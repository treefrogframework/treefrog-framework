commit 1d26818038db5cecbdc16c02d622b73dc409fa17
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 30 14:08:17 2018 -0400

    bump libbson to 1.9.5

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e46458ff3004a9f83efd4bfb78723499732640a5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 21 18:52:24 2018 -0400

    CDRIVER-2562 mark change streams fns extern "C"

 src/mongoc/mongoc-change-stream.h | 4 ++++
 1 file changed, 4 insertions(+)

commit e688cb4b8b714b5f93c53f405873b12f40322877
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Apr 19 17:23:56 2018 -0400

    CDRIVER-2581 improve opmsg cmd error msgs

 src/mongoc/mongoc-cluster.c | 29 +++++++++----------
 tests/test-mongoc-cluster.c | 69 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 83 insertions(+), 15 deletions(-)

commit 2dc318fafec36b1fea6a9182b2b36baf802b8649
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Apr 19 16:10:46 2018 -0400

    CDRIVER-2606 array arg on collection_watch

 src/mongoc/mongoc-change-stream.c   | 14 +++++-
 tests/test-mongoc-change-stream.c   | 98 +++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-sample-commands.c |  1 -
 3 files changed, 111 insertions(+), 2 deletions(-)

commit 5a18c3cf78b0a6f4145604b16f3fb199e9535b2f
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Apr 19 16:09:23 2018 -0400

    CDRIVER-2619 fix change_stream_next bugs

 src/mongoc/mongoc-change-stream.c |  96 +++++++++++++-----------
 tests/test-mongoc-change-stream.c | 150 +++++++++++++++++++++++++++++---------
 2 files changed, 171 insertions(+), 75 deletions(-)

commit 9428ea2ca73a15cde18389e8a241eb81bc496445
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 13 15:08:51 2018 -0400

    CDRIVER-2609 fix empty error after ismaster fails

 src/mongoc/mongoc-cluster.c | 15 ++++++++-------
 tests/test-mongoc-cluster.c | 35 ++++++++++++++++++++++++++++++++---
 2 files changed, 40 insertions(+), 10 deletions(-)

commit 105993d6079a92e25ae6b45ac4c025e5ba33e7bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 9 15:35:40 2018 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6d6ead7e70840d98965ff66f904281c20f56df14
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 9 15:35:08 2018 -0400

    1.9.4 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 19 +++++++++++++++++++
 VERSION_CURRENT  |  2 +-
 VERSION_RELEASED |  2 +-
 3 files changed, 21 insertions(+), 2 deletions(-)

commit ae65042567156db724021a4d22dd7aed4625329c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 12 21:11:52 2018 -0500

    sphinx 1.7.0 compatibility

 doc/taglist.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 963155d070d0151a6b92428f4f6a36235f85cec0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 9 15:26:27 2018 -0400

    bump libbson to 1.9.4

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5415c883c3ea1e99a09644ddbd4f201b369f40a5
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Mar 30 10:26:35 2018 -0400

    CDRIVER-2578 changestream getmore and agg lsid
    
    collection_watch runs an aggregate command with
    collection_read_command_with_opts and then creates a cursor with
    cursor_new_from_command_reply. To ensure they use the same implicit
    session lsid, the change_stream_t must be responsible for creating
    the implicit session and pass this session to both the command and
    cursor as if it were an explicit session.

 src/mongoc/mongoc-change-stream-private.h |  3 ++
 src/mongoc/mongoc-change-stream.c         | 62 +++++++++++++++++++++++++------
 tests/test-mongoc-client-session.c        | 57 +++++++++++++++++++++++++++-
 3 files changed, 110 insertions(+), 12 deletions(-)

commit 4df2aa565446b153299552b10c1a611d1e346eb9
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Mar 29 11:28:37 2018 -0400

    CDRIVER-2576 check stream_run_ismaster return

 src/mongoc/mongoc-cluster.c |  4 ++++
 tests/test-mongoc-cluster.c | 48 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 52 insertions(+)

commit fde9edf78fabd81c5b7914dd9f0032e823ef639f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 28 17:00:15 2018 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 45a9af60c1c34a36dbdc22cd6dc80e46064614e3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 28 16:59:53 2018 -0500

    1.9.3 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 18 ++++++++++++++++++
 VERSION_CURRENT  |  2 +-
 VERSION_RELEASED |  2 +-
 3 files changed, 20 insertions(+), 2 deletions(-)

commit a70be7b02ce67531f1e3f869f57551eebe9ede3e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 28 16:52:37 2018 -0500

    bump libbson to 1.9.3

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5602c585b231ddcc317930528c5331da749c9f38
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Feb 22 15:10:22 2018 -0500

    CDRIVER-2517 ignore $gleStats creating cursor from command reply

 src/mongoc/mongoc-cursor.c | 10 ++++++++--
 tests/test-mongoc-cursor.c | 39 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 47 insertions(+), 2 deletions(-)

commit afc62d1383c7efbf35ac5d237957e578ea546b33
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 13 16:28:33 2018 -0500

    CDRIVER-2506 a cursor always uses the same lsid

 src/mongoc/mongoc-cmd-private.h    |  2 +-
 src/mongoc/mongoc-cmd.c            |  8 ++--
 src/mongoc/mongoc-cursor.c         | 27 +++++++++----
 tests/test-mongoc-client-session.c | 83 ++++++++++++++++++++++++++++++++++----
 4 files changed, 100 insertions(+), 20 deletions(-)

commit dc206eedd86e1e8d1249e2ef5954b51f64226a9f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 11 22:00:20 2018 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c063949a9574a11032e0e353d9412bf9257ba84d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 11 21:59:47 2018 -0500

    1.9.2 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 8 ++++++++
 VERSION_CURRENT  | 2 +-
 VERSION_RELEASED | 2 +-
 3 files changed, 10 insertions(+), 2 deletions(-)

commit bc9a34e148d535d12369163e932074b40ae95cf1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 11 17:06:15 2018 -0500

    bump libbson to 1.9.2

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 135425c394ce9605894cf80d5e1fa99b146b181a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 9 17:30:41 2018 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a6964c8655014ded6f26c5f01cc1cd656041c212
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 9 17:30:09 2018 -0500

    1.9.1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 12 ++++++++++++
 VERSION_CURRENT  |  2 +-
 VERSION_RELEASED |  2 +-
 3 files changed, 14 insertions(+), 2 deletions(-)

commit df762380d68267a6ec0e431f4128884e8fecd8b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 9 17:19:24 2018 -0500

    bump libbson to 1.9.1

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f0e1ea8401802fec55e3ff5923807c1f317856bd
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Jan 4 11:13:02 2018 -0500

    CDRIVER-2449 omit lsid from auth and monitoring commands

 src/mongoc/mongoc-cluster.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit a5e18149839da356b926e62c8bd5335c607c1c75
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 20 20:50:59 2017 -0600

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 58a471b57f6a3a657abe9197a2627e239d7cc1a1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 20 20:50:31 2017 -0600

    1.9.0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 7 ++++---
 VERSION_CURRENT  | 2 +-
 VERSION_RELEASED | 2 +-
 3 files changed, 6 insertions(+), 5 deletions(-)

commit 8853013ddf73cd40a241d7dea772748e18dcb7f6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 20 14:38:26 2017 -0600

    bump libbson to 1.9.0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 80628aa2cbdc7c324cca456ff442bd2f54357666
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 20 11:43:43 2017 -0600

    CDRIVER-2376 fix performance loss
    
    Starting in commit #9f9934dcd, the driver had incorrectly called "ping"
    before nearly every command when in single-threaded mode. This was due
    to the mongoc_topology_scanner_node_t.last_update field not being
    updated, so the driver thought each server's socket had been idle and
    needed to be checked with "ping", even when the socket had been used
    recently.
    
    In this commit, update last_used after every command so we don't call
    "ping" unnecessarily.

 src/mongoc/mongoc-cluster.c          | 28 +++++++++++++++-------------
 src/mongoc/mongoc-topology-private.h |  4 ++++
 src/mongoc/mongoc-topology.c         | 28 ++++++++++++++++++++++++++++
 3 files changed, 47 insertions(+), 13 deletions(-)

commit 471bfb037e8e380dde9409ba318a66f491d003be
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Dec 19 17:29:36 2017 -0500

    CDRIVER-2431 check for empty command before comparing name

 src/mongoc/mongoc-client.c | 14 ++++++++++++--
 src/mongoc/mongoc-cmd.c    | 14 ++++++++++++--
 tests/test-mongoc-client.c | 24 ++++++++++++++++++++++++
 3 files changed, 48 insertions(+), 4 deletions(-)

commit 4df4560584886d55d95a1e3ef8308bc2be18e3a3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 12 15:38:26 2017 -0500

    CDRIVER-2425 authSource from TXT record is ignored

 src/mongoc/mongoc-client-pool.c    |  4 ++--
 src/mongoc/mongoc-client-private.h |  3 +--
 src/mongoc/mongoc-client.c         | 16 +++++++---------
 tests/test-mongoc-dns.c            | 12 ++++++++++++
 4 files changed, 22 insertions(+), 13 deletions(-)

commit 6b376b277824f68da0aad445ee43acdfe8369562
Author: Jeroen <jeroenooms@gmail.com>
Date:   Thu Dec 14 12:57:03 2017 +0100

    Windows: fix compiler warnings

 src/mongoc/mongoc-cluster-sspi.c |  2 --
 src/mongoc/mongoc-socket.c       | 10 +++++++---
 2 files changed, 7 insertions(+), 5 deletions(-)

commit b7138ce3de091a9537a24394ec0edf6ead17378e
Author: Jeroen <jeroenooms@gmail.com>
Date:   Wed Dec 13 20:30:23 2017 +0100

    remove _CRT_RAND_S macro from cmake

 CMakeLists.txt | 6 ------
 1 file changed, 6 deletions(-)

commit a058588b112cd38c997c6676145280eb82390f23
Author: Jeroen <jeroenooms@gmail.com>
Date:   Wed Dec 13 16:52:28 2017 +0100

    Windows: fix SSPI compiler warnings (CDRIVER-2427)

 src/mongoc/mongoc-cluster-sspi.c | 6 +++---
 src/mongoc/mongoc-sspi-private.h | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 3497a51e0231e535864c33d2baf257f6dafb2b53
Author: Jeroen <jeroenooms@gmail.com>
Date:   Tue Dec 12 23:55:46 2017 +0100

    Windows: define _CRT_RAND_S to enable rand_s()

 src/mongoc/mongoc-util.c | 3 +++
 1 file changed, 3 insertions(+)

commit 0d1364fe9b9d556844f779df944dac9f7a9f59cc
Author: Jeroen <jeroenooms@gmail.com>
Date:   Tue Dec 12 23:52:47 2017 +0100

    Windows: use _getpid() instead of getpid()

 src/mongoc/mongoc-socket.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d06c2f93bb3618b5647f67fb741b9496741d46d1
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Dec 12 00:43:01 2017 -0500

    CDRIVER-2422 don't ignore readConcern opt in raw commands

 src/mongoc/mongoc-cmd.c    |  5 +--
 tests/test-mongoc-client.c | 83 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 86 insertions(+), 2 deletions(-)

commit 68cfb8b3348c3ffa40e016b6c090b46742d65738
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Dec 11 19:31:02 2017 -0500

    CDRIVER-2256 fix _mongoc_validate_update errmsg

 src/mongoc/mongoc-util.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d8b1e19e56e704172432e7ef1c5fe6c6736bed6f
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Dec 8 17:30:16 2017 -0500

    CDRIVER-2331 document sessionId option for create_bulk

 doc/mongoc_collection_create_bulk_operation_with_opts.rst | 2 ++
 1 file changed, 2 insertions(+)

commit c34de1ed93a71d18a895b02decdefe7b66774e04
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Dec 8 17:29:27 2017 -0500

    CDRIVER-1930 docs for client and client_session bulk setters

 doc/mongoc_bulk_operation_set_client.rst         | 29 ++++++++++++++++++++++++
 doc/mongoc_bulk_operation_set_client_session.rst | 28 +++++++++++++++++++++++
 doc/mongoc_bulk_operation_t.rst                  |  2 ++
 3 files changed, 59 insertions(+)

commit b825d5d1293c6d7023af1ad4a083dade5b4826b6
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Dec 8 13:32:29 2017 -0500

    CDRIVER-2419 mongoc_bulk_operation_set_client_session
    
    Assertions when setting client and client_session will ensure that the bulk never has a client_session belonging to a foreign client.

 src/mongoc/mongoc-bulk-operation.c | 20 ++++++++++++++++++++
 src/mongoc/mongoc-bulk-operation.h |  6 ++++++
 2 files changed, 26 insertions(+)

commit 278f2d4779dcf45331f6159ecb37525014296666
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Dec 8 16:57:45 2017 -0500

    assert client in mongoc_bulk_operation_set_client
    
    This function should not be used to set the client to NULL and an assertion
    also guards against a potential segfault when incrementing operation_id.

 src/mongoc/mongoc-bulk-operation.c | 1 +
 1 file changed, 1 insertion(+)

commit aaee18dc7f7b109291b14e49909a7affc72d48e7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 7 13:57:20 2017 -0500

    CDRIVER-2418 send readConcern only with read cmds

 src/mongoc/mongoc-client.c         |   1 +
 src/mongoc/mongoc-cmd-private.h    |   1 +
 src/mongoc/mongoc-cmd.c            |   3 +-
 src/mongoc/mongoc-collection.c     |  11 +-
 src/mongoc/mongoc-cursor.c         |   1 +
 tests/test-mongoc-client-session.c | 221 ++++++++++++++++++++++++++-----------
 6 files changed, 170 insertions(+), 68 deletions(-)

commit e0fc95363b12c26b6a0416bfaa514e457f5b7f75
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Dec 8 08:44:46 2017 -0500

    CDRIVER-2233 change stream test fixes

 tests/test-mongoc-change-stream.c | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit bacc87f80ed75d3fcf352129f325a18239f9b993
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Dec 6 18:18:47 2017 -0500

    Missing ENTRY in advance_operation_time

 src/mongoc/mongoc-client-session.c | 2 ++
 1 file changed, 2 insertions(+)

commit 41723547962569696feeba6ad7dc06a158b0e862
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 7 14:12:44 2017 -0500

    CDRIVER-2233 make collection to test change stream
    
    We expect a characteristic server error when testing change streams with
    a standalone; if the database doesn't exist we get a different error, so
    make the database and collection before testing.

 tests/test-mongoc-change-stream.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 10125699a5704b48991f1ce96eda8e7bf5dffc17
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 16:36:11 2017 -0500

    update NEWS

 NEWS | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 9c76a12d8f8be321cb942f00047ed46aeb35603d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 16:26:03 2017 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1ec20b39bf0b416c476d4526b40eb22faacf6a75
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 16:25:40 2017 -0500

    1.9.0-rc1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS            | 7 +++++--
 VERSION_CURRENT | 2 +-
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 3b44cdc7587b05afdcdf41a9c581156891651a83
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 16:22:32 2017 -0500

    bump libbson to 1.9.0-rc1

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit db34b53495f619ce15095be5ab2ee915b7964e14
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 4 14:36:46 2017 -0500

    CDRIVER-2362 improve incompatibility error message

 src/mongoc/mongoc-topology-description.c | 44 +++++++++++--------------
 tests/test-mongoc-topology.c             | 56 ++++++++++++++++++++++++++++++++
 2 files changed, 75 insertions(+), 25 deletions(-)

commit 88293ad73e3c22235161151375294ebf9502d79c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 09:38:21 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bd7133dba9cf5c75ba654e4255495c5f97d07bdb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 08:28:09 2017 -0500

    CDRIVER-2410 findAndModify writeConcern as cmd_with_opts
    
    If mongoc_client_read_write_command_with_opts or similar function is
    passed a "findAndModify" command with no write concern and wire version
    >= 4, use the client, database, or collection write concern.

 src/mongoc/mongoc-client.c | 21 ++++++++++------
 tests/test-mongoc-client.c | 62 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 75 insertions(+), 8 deletions(-)

commit 0dc8fb1aca4194df67afd431c55d438f9ecef56c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 5 09:00:26 2017 -0500

    CDRIVER-2370 fix forward decl for C99

 src/mongoc/mongoc-apm-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f4d0da831eea29b66015ba25ed119cb9b0ab29d5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 4 17:15:14 2017 -0500

    CDRIVER-2389 deprecate minpoolsize

 NEWS                                |  3 ++-
 doc/mongoc_client_pool_min_size.rst |  9 ++++++---
 doc/mongoc_uri_t.rst                |  2 +-
 src/mongoc/mongoc-client-pool.c     |  9 +++++++++
 src/mongoc/mongoc-client-pool.h     |  2 +-
 tests/test-mongoc-client-pool.c     | 20 +++++++++++++++-----
 tests/test-mongoc-handshake.c       |  3 +--
 7 files changed, 35 insertions(+), 13 deletions(-)

commit e348665edca6d7be08b2ed9e89c5befdac3f9608
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 27 10:31:00 2017 -0500

    improved command monitoring example
    
    Use relaxed instead of canonical JSON, show multiple insert documents.

 doc/application-performance-monitoring.rst | 39 ++++++++++++++++++++----------
 examples/example-command-monitoring.c      | 22 ++++++++++-------
 2 files changed, 39 insertions(+), 22 deletions(-)

commit d2b1589423ab6f687e1a3b234d85c37052495685
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 27 10:30:11 2017 -0500

    CDRIVER-2370 command monitoring for OP_MSG
    
    New design: take the document sequence from an OP_MSG insert, update, or
    delete and append it to a synthesized command document for monitoring.

 src/mongoc/mongoc-apm-private.h        |  9 +++++
 src/mongoc/mongoc-apm.c                | 68 ++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-cluster.c            | 11 +-----
 src/mongoc/mongoc-util-private.h       |  3 ++
 src/mongoc/mongoc-util.c               | 19 ++++++++++
 tests/test-mongoc-command-monitoring.c |  5 ---
 6 files changed, 101 insertions(+), 14 deletions(-)

commit 1c669926ddafe44443ea6e04080fa2e99c80893d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 27 09:28:16 2017 -0500

    Revert "CDRIVER-2370 monitor OP_MSG document sequences"
    
    This reverts commit 51c7384

 doc/application-performance-monitoring.rst         |  35 ++-
 ..._apm_command_started_get_document_sequences.rst |  33 ---
 doc/mongoc_apm_command_started_t.rst               |   1 -
 ...pm_command_succeeded_get_document_sequences.rst |  33 ---
 doc/mongoc_apm_command_succeeded_t.rst             |   1 -
 doc/mongoc_apm_document_sequence_t.rst             |  34 ---
 examples/example-command-monitoring.c              |  65 ++---
 src/mongoc/mongoc-apm-private.h                    |  13 -
 src/mongoc/mongoc-apm.c                            | 251 +-------------------
 src/mongoc/mongoc-apm.h                            |  21 --
 src/mongoc/mongoc-cluster.c                        |  11 +-
 src/mongoc/mongoc-util-private.h                   |   3 -
 src/mongoc/mongoc-util.c                           |  19 --
 tests/test-mongoc-command-monitoring.c             | 264 +--------------------
 14 files changed, 45 insertions(+), 739 deletions(-)

commit b3e13101e0497d98d7d281bc7117dbd459726308
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 27 09:28:06 2017 -0500

    Revert "CDRIVER-2370 fix forward decl"
    
    This reverts commit 34165fb

 src/mongoc/mongoc-apm-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3ffee13dcb5df52310d06546b75a164328784fcf
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Nov 30 09:45:38 2017 -0500

    bump 3.6 download version

 .evergreen/download-mongodb.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7a9b43459cc78e55a77e9ec990a8fbe811ce8e02
Author: Sriharsha Vardhan <sriharsha.vardhan@gmail.com>
Date:   Wed Nov 29 19:59:30 2017 -0800

    Fix :Error parsing URI: Invalid host string in URI

 examples/example-gridfs.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d759ff62f0c1389075b8b40932b7fdc11b4e12d
Author: Michael Kuhn <michael.kuhn@informatik.uni-hamburg.de>
Date:   Mon Nov 27 14:09:18 2017 +0100

    Do not overwrite {SNAPPY,ZLIB}_LIBS for system versions
    
    *_LIBS often contains library paths (-L) if returned by pkg-config.
    Stripping them out causes the snappy and zlib libraries to not be found if
    they are not installed in a system library path.

 build/autotools/CheckSnappy.m4 | 2 +-
 build/autotools/CheckZlib.m4   | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 6c17ab6b368ea2142c90e6640e22dde6ebf6af9b
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Nov 28 09:11:54 2017 -0500

    CDRIVER-2408 fix aggregate write concern requirement

 doc/mongoc_collection_aggregate.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 01b6d96e77469336b6b64200eeccd90b36112d4f
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Nov 28 09:08:41 2017 -0500

    CDRIVER-2408 note read concern and collation errors in opts lists

 doc/includes/read-opts.txt                             | 4 ++--
 doc/includes/read-write-opts.txt                       | 4 ++--
 doc/includes/write-opts.txt                            | 2 +-
 doc/mongoc_client_command_with_opts.rst                | 2 +-
 doc/mongoc_client_read_command_with_opts.rst           | 2 +-
 doc/mongoc_client_read_write_command_with_opts.rst     | 2 +-
 doc/mongoc_client_write_command_with_opts.rst          | 2 +-
 doc/mongoc_collection_aggregate.rst                    | 6 +++---
 doc/mongoc_collection_command_with_opts.rst            | 2 +-
 doc/mongoc_collection_read_command_with_opts.rst       | 2 +-
 doc/mongoc_collection_read_write_command_with_opts.rst | 2 +-
 doc/mongoc_collection_write_command_with_opts.rst      | 2 +-
 doc/mongoc_database_command_with_opts.rst              | 2 +-
 doc/mongoc_database_read_command_with_opts.rst         | 2 +-
 doc/mongoc_database_read_write_command_with_opts.rst   | 2 +-
 doc/mongoc_database_write_command_with_opts.rst        | 2 +-
 16 files changed, 20 insertions(+), 20 deletions(-)

commit 21ab5f24b08569b9715d8e780fbcd4bb496a66a4
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Nov 27 12:14:16 2017 -0500

    CDRIVER-2409 bypass not supported by command_with_opts

 doc/includes/read-write-opts.txt | 1 -
 doc/includes/write-opts.txt      | 1 -
 2 files changed, 2 deletions(-)

commit 559b4dd9bddda4410cefba2ea0df38c68b63b11c
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Nov 27 12:13:10 2017 -0500

    CDRIVER-2408 fix docs for command_with_opts funcs

 doc/mongoc_client_command_with_opts.rst                | 4 +++-
 doc/mongoc_client_read_write_command_with_opts.rst     | 2 +-
 doc/mongoc_client_write_command_with_opts.rst          | 2 +-
 doc/mongoc_collection_command_with_opts.rst            | 4 +++-
 doc/mongoc_collection_read_write_command_with_opts.rst | 2 +-
 doc/mongoc_collection_write_command_with_opts.rst      | 2 +-
 doc/mongoc_database_command_with_opts.rst              | 4 +++-
 doc/mongoc_database_read_write_command_with_opts.rst   | 2 +-
 doc/mongoc_database_write_command_with_opts.rst        | 2 +-
 9 files changed, 15 insertions(+), 9 deletions(-)

commit a625b39a2ef868c879b9a6b5eacd2697ddc9a772
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 05:57:05 2017 -0500

    CDRIVER-2257 security rules for mongodb+srv://
    
    Hostnames returned from an SRV lookup must share the service name's
    parent domain, and SSL is turned on with mongodb+srv URIs by default.
    At most one TXT record is allowed, only "replicaSet" and "authSource"
    may be set from a TXT record.

 .evergreen/config.yml                              |  65 +++++--
 .evergreen/run-tests.sh                            |   2 +-
 doc/mongoc_uri_t.rst                               |   4 +-
 src/mongoc/mongoc-client.c                         |  93 ++++++---
 src/mongoc/mongoc-topology.c                       |  24 ++-
 src/mongoc/mongoc-uri-private.h                    |   7 +-
 src/mongoc/mongoc-uri.c                            | 211 +++++++++++++++++----
 .../longer-parent-in-return.json                   |  16 ++
 .../misformatted-option.json                       |   7 +
 .../not-enough-parts.json                          |   7 +
 .../one-result-default-port.json                   |   8 +-
 .../one-txt-record-multiple-strings.json           |   7 +-
 .../one-txt-record.json                            |   8 +-
 .../parent-part-mismatch1.json                     |   7 +
 .../parent-part-mismatch2.json                     |   7 +
 .../parent-part-mismatch3.json                     |   7 +
 .../parent-part-mismatch4.json                     |   7 +
 .../parent-part-mismatch5.json                     |   7 +
 .../returned-parent-too-short.json                 |   7 +
 .../returned-parent-wrong.json                     |   7 +
 .../two-results-default-port.json                  |  10 +-
 .../two-results-nonstandard-port.json              |  10 +-
 .../two-txt-records.json                           |   7 +
 .../txt-record-not-allowed-option.json             |   7 +
 .../txt-record-with-overridden-ssl-option.json     |  16 ++
 .../txt-record-with-overridden-uri-option.json     |  16 ++
 .../txt-record-with-unallowed-option.json          |   7 +
 tests/test-mongoc-dns.c                            |  76 +++++---
 tests/test-mongoc-uri.c                            | 133 ++++++++++++-
 29 files changed, 654 insertions(+), 136 deletions(-)

commit 50c18313428ac95d80b8976d00683a3a1ddb63bb
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Nov 22 13:42:08 2017 -0500

    CDRIVER-2284 validate wtimeout before calling setter
    
    _mongoc_write_concern_new_from_iter must validate wtimeout before it
    calls mongoc_write_concern_set_wtimeout, which ignores invalid
    values.

 src/mongoc/mongoc-write-concern.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b9ddcdf46951ddf851c4474c0c728e94d8651151
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Oct 9 17:33:53 2017 -0400

    Assert bson_t before iteration

 tests/test-mongoc-read-concern.c  | 2 +-
 tests/test-mongoc-write-concern.c | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit b114635fc1cc7c9dec86a412ff03576b48c07e34
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Oct 9 17:28:00 2017 -0400

    CDRIVER-2273 add tests for appending default read and write concern

 tests/test-mongoc-read-concern.c  | 6 +++++-
 tests/test-mongoc-write-concern.c | 6 +++++-
 2 files changed, 10 insertions(+), 2 deletions(-)

commit fe4ba77f67c0f2b3fbbd57c33c07e39b8b361b26
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Oct 9 15:07:07 2017 -0400

    CDRIVER-2284 don't worry about freezing WC in find_and_modify_with_opts
    
    _mongoc_write_concern_get_bson() will no longer leave the write concern
    immutable, so we can remove the macro for copying the write concern if
    it was not already frozen.

 src/mongoc/mongoc-collection.c | 24 ++++--------------------
 1 file changed, 4 insertions(+), 20 deletions(-)

commit 3db74e6265aa75823ee5d58b8aa17efa5ab50c8c
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Oct 9 14:53:02 2017 -0400

    CDRIVER-2284 keep read and write concerns mutable
    
    Previously, converting a read or write concern to BSON would freeze the
    struct for further modification. This repurposes the "frozen" boolean
    to track whether the struct has changed since its BSON was compiled and
    allows further modification to unfreeze the struct (i.e. invalidate the
    compiled BSON).
    
    This also changes _mongoc_write_concern_new_from_iter() to use existing
    new and setter functions to ensure that is_default is correctly
    reported.

 doc/mongoc_read_concern_set_level.rst      |   7 +-
 doc/mongoc_write_concern_set_fsync.rst     |   6 +-
 doc/mongoc_write_concern_set_journal.rst   |   4 +
 doc/mongoc_write_concern_set_w.rst         |   5 ++
 doc/mongoc_write_concern_set_wmajority.rst |   4 +
 doc/mongoc_write_concern_set_wtag.rst      |   4 +
 doc/mongoc_write_concern_set_wtimeout.rst  |   4 +
 src/mongoc/mongoc-read-concern.c           |  33 +++-----
 src/mongoc/mongoc-write-concern.c          | 116 +++++++++++--------------
 tests/test-mongoc-read-concern.c           |  30 +++++++
 tests/test-mongoc-write-concern.c          | 131 ++++++++++++++++++++---------
 11 files changed, 212 insertions(+), 132 deletions(-)

commit d7b68a3b75c08824ef945bcdb76d894c4cc5206d
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Oct 9 14:48:46 2017 -0400

    CDRIVER-2318 allow getting BSON for default read concern
    
    This commit also adds missing tests for read concern, based on the
    write concern tests.

 CMakeLists.txt                   |  1 +
 src/mongoc/mongoc-read-concern.c |  5 ++-
 tests/Makefile.am                |  1 +
 tests/test-libmongoc.c           |  3 ++
 tests/test-mongoc-read-concern.c | 93 ++++++++++++++++++++++++++++++++++++++++
 5 files changed, 101 insertions(+), 2 deletions(-)

commit c2639c821d3c84745bf2dca5629959926a69e973
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Sep 11 14:49:35 2017 -0400

    CDRIVER-2273 omit default write concern from CRUD commands

 src/mongoc/mongoc-write-command.c | 14 ++++++--------
 tests/test-mongoc-bulk.c          | 32 ++++++++++++++++++--------------
 2 files changed, 24 insertions(+), 22 deletions(-)

commit 550438a0eb87e50fdf227f4663fca38c1f81adaf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 22 17:24:30 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6beef735e1c60da5a369fb3ca01d508ab8e089ac
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 22 15:48:06 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 176b6643a6e801a24668e00f884700db0dbad581
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 22 13:25:05 2017 -0500

    CDRIVER-2401 test ASAN with GCC, as well as Clang

 .evergreen/config.yml | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit f4e8af4f80d2b20912a6c96407e1c20fe798c5f7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 22 13:24:45 2017 -0500

    CDRIVER-2401 validate whole URI as UTF-8

 src/mongoc/mongoc-uri.c |  5 +++++
 tests/test-mongoc-uri.c | 31 +++++++++++++++++++++++++++++++
 2 files changed, 36 insertions(+)

commit de392722236121977dda4c1d4a9ca2aae02bdeae
Author: Iulian Rotaru <iulian.rotaru@gmail.com>
Date:   Wed Nov 22 09:54:35 2017 +0100

    CDRIVER-2396 build error if ENABLE_SRV=OFF

 build/cmake/FindResSearch.cmake | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit cab0d5c62cce7d361b07cc3f2ced4b1cbcdd2224
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 21 18:36:06 2017 -0500

    Revert "[CDRIVER-2396] Set default values for mongoc-config.h. Simplify if checking and setting default values for mongoc-config.h"
    
    This reverts commit f81e63d

 build/cmake/FindResSearch.cmake | 26 +++++++++++++++++++-------
 1 file changed, 19 insertions(+), 7 deletions(-)

commit f81e63dd554946c5acc025ba4e9fffe90fbcfde9
Author: Iulian Rotaru <i.rotaru@cloudplan.net>
Date:   Tue Nov 21 17:08:09 2017 +0100

    [CDRIVER-2396] Set default values for mongoc-config.h.
    Simplify if checking and setting default values for mongoc-config.h

 build/cmake/FindResSearch.cmake | 26 +++++++-------------------
 1 file changed, 7 insertions(+), 19 deletions(-)

commit 7b92f88575268151fd9d2ed1ca083d398db19c67
Author: Iulian Rotaru <i.rotaru@cloudplan.net>
Date:   Tue Nov 21 16:45:09 2017 +0100

    fix  CMake can't find check_symbol_exists function.
    On windows this problem doesn't appear.
    Enviroment: OSX 0.13
    cmake version 3.8.2

 build/cmake/FindResSearch.cmake | 1 +
 1 file changed, 1 insertion(+)

commit bdcc2ca52aaa42744103ac27a5ada37cb2d39a24
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 21 11:29:20 2017 -0500

    CDRIVER-2257 include cmake file CheckSymbolExists

 build/cmake/FindResSearch.cmake | 2 ++
 1 file changed, 2 insertions(+)

commit 77de2c9084dcb7c2578a7e6c684da71c6bd0aeab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 21 09:28:20 2017 -0500

    CDRIVER-2329 fix topology test for SSL

 tests/test-mongoc-topology.c | 21 +++++++++++++++------
 1 file changed, 15 insertions(+), 6 deletions(-)

commit 0c9cc9d26728d3cf4dd84e1fe91e75ca40e9a7fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 13:36:08 2017 -0500

    CDRIVER-2256 accurate document-validation errors
    
    The error messages mostly say "invalid key", but invalid values can also
    cause errors.

 src/mongoc/mongoc-util.c       |  6 +++---
 tests/test-mongoc-bulk.c       | 28 ++++++++++------------------
 tests/test-mongoc-collection.c | 14 +++++++-------
 3 files changed, 20 insertions(+), 28 deletions(-)

commit 34165fbbfd93a45646b60f74301002713b888351
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 13:20:13 2017 -0500

    CDRIVER-2370 fix forward decl

 src/mongoc/mongoc-apm-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a3558febcf6de59842c483ac660700e2efb09f52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 12:58:17 2017 -0500

    CDRIVER-2329 race in topology test

 tests/test-mongoc-topology.c | 15 +++++++++++----
 1 file changed, 11 insertions(+), 4 deletions(-)

commit 0ed1330c9112e6d06d32234a4abd91e52ceca5f7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 12:00:53 2017 -0500

    CDRIVER-2336 leak in _mongoc_cyrus_set_mechanism

 src/mongoc/mongoc-cyrus.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3b96e5b72b9f87238b5a60bfcf0efd6bfe3ed32
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Nov 20 15:08:44 2017 -0500

    CDRIVER-2381 resync retryable writes tests

 tests/json/retryable_writes/bulkWrite.json | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2b778c6363120c4269e54a82293c9bcae15b1f15
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 11:10:03 2017 -0500

    CDRIVER-2152 note: GridFS stream ignores timeout

 doc/mongoc_stream_gridfs_new.rst | 2 ++
 1 file changed, 2 insertions(+)

commit 354f3be78c0af1de4aea095fbc6a9d630e71dd95
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 11:06:47 2017 -0500

    CDRIVER-2152 mistakes in GridFS file docs

 doc/api.rst                      |  1 -
 doc/mongoc_gridfs_file_t.rst     |  1 +
 doc/mongoc_stream_gridfs_new.rst |  7 ++++---
 doc/mongoc_stream_gridfs_t.rst   | 25 -------------------------
 doc/mongoc_stream_t.rst          |  3 ---
 5 files changed, 5 insertions(+), 32 deletions(-)

commit b66a2f7caf97f2f128c53a03713d5358e4906dd6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 10:55:59 2017 -0500

    CDRIVER-2392 nonstandard printf format

 src/mongoc/mongoc-uri.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 51c7384fa41642623930daabbbb2a4fbb09471b2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 16:14:17 2017 -0500

    CDRIVER-2370 monitor OP_MSG document sequences
    
    Update Command Monitoring (also known as APM) to expose the document
    sequence sent with an OP_MSG insert, update, or delete. Simulate a
    document sequence if the wire protocol uses OP_QUERY commands instead
    of OP_MSG.
    
    In MongoDB 3.8 there will be document sequences in the OP_MSG reply to
    "find", "aggregate", etc. Anticipate that wire protocol by simulating
    a document sequence with command replies.

 doc/application-performance-monitoring.rst         |  35 +--
 ..._apm_command_started_get_document_sequences.rst |  33 +++
 doc/mongoc_apm_command_started_t.rst               |   1 +
 ...pm_command_succeeded_get_document_sequences.rst |  33 +++
 doc/mongoc_apm_command_succeeded_t.rst             |   1 +
 doc/mongoc_apm_document_sequence_t.rst             |  34 +++
 examples/example-command-monitoring.c              |  65 +++--
 src/mongoc/mongoc-apm-private.h                    |  13 +
 src/mongoc/mongoc-apm.c                            | 251 +++++++++++++++++++-
 src/mongoc/mongoc-apm.h                            |  21 ++
 src/mongoc/mongoc-cluster.c                        |  11 +-
 src/mongoc/mongoc-util-private.h                   |   3 +
 src/mongoc/mongoc-util.c                           |  19 ++
 tests/test-mongoc-command-monitoring.c             | 264 ++++++++++++++++++++-
 14 files changed, 739 insertions(+), 45 deletions(-)

commit 5a0018c1a63853b13327d0ef55b77f4cc202025b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 20 08:41:08 2017 -0500

    test threaded GSSAPI auth
    
    This test of Cyrus SASL's GSSAPI Kerberos auth wasn't running in
    Evergreen. Split it to a separate test program and run it with the
    other auth tests.
    
    Also, only compile test-mongoc-cyrus.c if we are using Cyrus SASL.

 .evergreen/run-auth-tests.sh |   8 +++
 .gitignore                   |   1 +
 CMakeLists.txt               |   3 +-
 tests/Makefile.am            |   9 ++-
 tests/test-libmongoc.c       |   8 +--
 tests/test-mongoc-cyrus.c    | 131 +------------------------------------
 tests/test-mongoc-gssapi.c   | 151 +++++++++++++++++++++++++++++++++++++++++++
 7 files changed, 175 insertions(+), 136 deletions(-)

commit 35c200ac9077415d513ed80a93ed7a8051025cbe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 16:29:12 2017 -0500

    CDRIVER-2254 fix hang with "canonicalizeHostname"
    
    The GSSAPI / Kerberos option canonicalizeHostname allows the driver to
    authenticate when hosts report different hostnames than what is used in
    the Kerberos database. We had used it both with Cyrus-SASL and with
    Microsoft's SSPI, and it had an infinite loop.
    
    Fix the infinite loop, and ignore the setting with SSPI, since SSPI
    canonicalizes hostnames itself. The setting is only required for Cyrus.

 doc/authentication.rst             |  2 +-
 doc/mongoc_uri_t.rst               |  2 +-
 src/mongoc/mongoc-cluster-sspi.c   | 27 +--------------------------
 src/mongoc/mongoc-cyrus.c          |  2 +-
 src/mongoc/mongoc-sasl-private.h   |  3 +--
 src/mongoc/mongoc-sasl.c           | 17 +++--------------
 src/mongoc/mongoc-stream-private.h |  2 ++
 src/mongoc/mongoc-stream.c         |  3 +--
 tests/test-mongoc-cyrus.c          | 31 +++++++++++++++++++++++++++++++
 9 files changed, 42 insertions(+), 47 deletions(-)

commit 8d12d1a28135a274b226be5b2faf1673dd6eeef3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 13:37:13 2017 -0500

    unused declaration in mongoc-sasl-private.h

 src/mongoc/mongoc-sasl-private.h | 4 ----
 1 file changed, 4 deletions(-)

commit 1718e75f72199f83ea1abe38d09d79b64df762d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 11:21:55 2017 -0500

    CDRIVER-2375 add MongoDB 3.6 to test matrix
    
    Also clean up obsolete comments and delete some low-value variants.

 .evergreen/config.yml          | 1555 ++++++++++++++++++++++++++++++----------
 .evergreen/download-mongodb.sh |   20 +
 2 files changed, 1192 insertions(+), 383 deletions(-)

commit 374709e8de5bc1875ab846214aa72c506141a45e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 10:34:06 2017 -0500

    download-mongodb.sh whitespace

 .evergreen/download-mongodb.sh | 144 ++++++++++++++++++++---------------------
 1 file changed, 72 insertions(+), 72 deletions(-)

commit 1c5cf5564839fc5305c398f42567381fee5fb807
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 13:13:37 2017 -0500

    CDRIVER-2229 link to docs for causal consistency

 doc/includes/session-lifecycle.txt                 | 2 +-
 doc/mongoc_client_session_t.rst                    | 2 +-
 doc/mongoc_session_opts_set_causal_consistency.rst | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit bb977d15a9fa77a9cd8b7a7f04018ba08cf9bfa2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 13:04:59 2017 -0500

    CDRIVER-2287 link to change streams docs

 doc/mongoc_change_stream_t.rst | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit d5b8c42da25201c8950c5df9bd258090951d88fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 11:46:54 2017 -0500

    NEWS for 1.9.0

 NEWS | 69 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 62 insertions(+), 7 deletions(-)

commit 3441c0dee4255016372177d2d22a00aa52fa4483
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 11:43:39 2017 -0500

    NEWS for 1.8.2

 NEWS             | 25 +++++++++++++++++++++++++
 VERSION_RELEASED |  2 +-
 2 files changed, 26 insertions(+), 1 deletion(-)

commit 7a3d44efa3e7cfc8c01cac93e7b68ce90cef244e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 10:01:04 2017 -0500

    CDRIVER-2382 docs: findandmodify always inits reply

 doc/mongoc_collection_find_and_modify.rst           | 2 ++
 doc/mongoc_collection_find_and_modify_with_opts.rst | 2 ++
 2 files changed, 4 insertions(+)

commit b40842208d426b6984bc943c1922d4d64ce951a5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 19 09:54:53 2017 -0500

    CDRIVER-2374 fix C99 pedantic warnings, part 2
    
    Decided not to test clang on Ubuntu with -std=c99 -pedantic after all.
    The goal is to make R libraries like mongolite compile cleanly with
    MinGW on Windows with -std=c99 -pedantic. I seem to have achieved that
    and it's tested in Evergreen.

 .evergreen/config.yml                                   |  2 +-
 build/future_function_templates/future-value.h.template |  3 +--
 build/generate-future-functions.py                      |  1 +
 src/mongoc/mongoc-matcher-op.c                          |  5 ++---
 src/mongoc/mongoc-util-private.h                        | 13 -------------
 tests/mock_server/future-functions.c                    |  1 +
 tests/mock_server/future-functions.h                    |  2 +-
 tests/mock_server/future-value.c                        |  1 +
 tests/mock_server/future.c                              |  1 +
 tests/mock_server/future.h                              |  1 +
 10 files changed, 10 insertions(+), 20 deletions(-)

commit b06d444d3e385f22260333f55cd5f1bd2c4328b8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 21:58:47 2017 -0500

    CDRIVER-2374 fix C99 pedantic warnings

 .evergreen/config.yml                    | 4 ++--
 .evergreen/link-sample-program-mingw.cmd | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 3fd627143085fa2c5015eda6c43c3ec592362244
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 11:01:35 2017 -0500

    CDRIVER-2374 test "pedantic" cflag

 .evergreen/compile-windows-mingw.bat | 2 +-
 .evergreen/config.yml                | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit bbb0c01d96550e2714b457150c83ff2d571b586f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 20:47:50 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8875f3fd74f5d149e7bf4a8e9988912e97fa9e96
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 20:40:37 2017 -0500

    leak in retryabale test

 tests/test-mongoc-retryable-writes.c | 1 +
 1 file changed, 1 insertion(+)

commit 98d025f11375176e8984b973a3cbc1219e69352c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 20:40:19 2017 -0500

    leaks in mongoc_uri_parse_options

 src/mongoc/mongoc-uri.c | 2 ++
 1 file changed, 2 insertions(+)

commit 482d27c1020bcf87440c78730cfe5caea283cdb6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 18:32:54 2017 -0500

    CDRIVER-2228 document retryWrites URI option

 doc/mongoc_uri_t.rst | 2 ++
 1 file changed, 2 insertions(+)

commit 8cf9f1ccc8806841bb174e7a67a807a2dac54e8c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 18:11:20 2017 -0500

    CDRIVER-2228 shadowed decl in mock-rs.c, part 2

 tests/mock_server/mock-rs.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 04aae47d8cd3a527a6846ba7d375bb312c818dae
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 13:22:11 2017 -0500

    CDRIVER-2374 no arithmetic on void pointer

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 917d8563a13ea1d85212baec2012214900cbd63e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 13:20:30 2017 -0500

    CDRIVER-2374 don't return void expression

 src/mongoc/mongoc-client.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit a5ec2504e19293f69f7af773330402923722783a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 13:20:01 2017 -0500

    CDRIVER-2228 whitespace

 src/mongoc/mongoc-client.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit bafeb53590be8b64c115d3ef65cd54963df24585
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 11:16:11 2017 -0500

    CDRIVER-2384 test bulk_execute error

 tests/test-mongoc-bulk.c | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit 5c864a53e15cf130fca1a78fdc730f84d6e672a7
Author: Graham Whitted <graham.whitted@disneyanimation.com>
Date:   Fri Nov 17 13:22:41 2017 -0800

    CDRIVER-2384 Fixed reply not being initialized
    
    Fixed monogc_bulk_operation_execute() so that it behaves as documented
    and always initializes the reply bson_t before returning.

 src/mongoc/mongoc-bulk-operation.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 27b63306c20317a4132326c8715727b8fe5448ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 16:14:17 2017 -0500

    enable parallel sphinx-build

 doc/html/Makefile.am | 2 +-
 doc/man/Makefile.am  | 2 +-
 doc/taglist.py       | 2 ++
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 30788a0b8576194ba8594cfcb85cb2b98a29389e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 08:22:02 2017 -0500

    CDRIVER-2228 shadowed decl in mock-rs.c

 tests/mock_server/mock-rs.c | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit ea0478f18b4191250ed417c8827ca6f4e71257b7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 18 08:15:59 2017 -0500

    CDRIVER-2228 skip JSON retry tests if no crypto

 tests/TestSuite.c                    |  4 ++--
 tests/TestSuite.h                    |  7 +++++++
 tests/json-test.c                    | 25 +++++++++++++++----------
 tests/json-test.h                    | 11 +++++++----
 tests/test-mongoc-retryable-writes.c |  1 +
 5 files changed, 32 insertions(+), 16 deletions(-)

commit daa1a4f6296474a57202eead6113501f1d96c102
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 21:21:45 2017 -0500

    CDRIVER-2228 enum/boolean bug in retry logic

 src/mongoc/mongoc-cmd.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 7a55a054cfa126525a1e6224164dce15285a277c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 19:49:55 2017 -0500

    better message if test of error handling fails

 tests/TestSuite.h | 57 +++++++++++++++++++++++++++++++------------------------
 1 file changed, 32 insertions(+), 25 deletions(-)

commit 10eb8ff38d3cdef43f900c21eb040633ed663afb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 16 21:36:38 2017 -0500

    CDRIVER-2388 test retryWrites w/o server support

 .evergreen/config.yml   | 40 ++++++++++++++++++++++++++++++++++++++--
 .evergreen/run-tests.sh |  3 +++
 2 files changed, 41 insertions(+), 2 deletions(-)

commit e6e0647b374a92eb289258f2c6d5801374549ee2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 16 07:32:29 2017 -0500

    CDRIVER-2228 skip retry writes test if no crypto

 tests/test-mongoc-retryable-writes.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit f638e91e95a1a6d377e519c1b8641c683692c724
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Nov 17 15:49:06 2017 -0500

    CDRIVER-2228 test implicit sessions and command_with_opts

 tests/test-mongoc-retryable-writes.c | 125 ++++++++++++++++++++++++++++-------
 1 file changed, 101 insertions(+), 24 deletions(-)

commit e4cda04da33ccbfab57b583fb904c95312945745
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Nov 17 11:23:52 2017 -0500

    CDRIVER-2228 decide if a command is retryable during part assembly
    
    This consolidates most of the decision making for a command's retryable
    eligibility. Bulk operations will need to track if they include one or
    more multi-document writes (akin to collation).
    
    While the spec prohibits a generic command helper from injecting
    txnNumber and supporting retryable writes, we are allowed to do so for
    the write-specific command helper(s).

 src/mongoc/mongoc-bulk-operation.c        |  4 --
 src/mongoc/mongoc-client.c                | 67 +++++++++++++++++++++++
 src/mongoc/mongoc-cmd-private.h           |  7 +++
 src/mongoc/mongoc-cmd.c                   | 89 +++++++++++++++++++++++++++++--
 src/mongoc/mongoc-collection.c            | 15 +-----
 src/mongoc/mongoc-write-command-private.h |  2 +-
 src/mongoc/mongoc-write-command.c         | 25 +++++++--
 7 files changed, 183 insertions(+), 26 deletions(-)

commit a71991b08851af816c0b4619a09f8bf3fffc5ef2
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Nov 17 11:17:08 2017 -0500

    CDRIVER-2228 track implicit client session on mongoc_cmd_parts_t
    
    Previously, the lsid of an implicit session was added directly to the
    command body. Since we need to access the session later during command
    execution to update txnNumber (perhaps multiple times on split writes),
    save the client session in mongoc_cmd_parts_t and release it when the
    parts are cleaned up.

 src/mongoc/mongoc-cmd-private.h |  1 +
 src/mongoc/mongoc-cmd.c         | 32 +++++++++++++++++++-------------
 2 files changed, 20 insertions(+), 13 deletions(-)

commit ec2747683e85ddb891b7c1696523f451dc6c6f7f
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Nov 16 16:28:21 2017 -0500

    CDRIVER-2228 don't raise client error if retryWrites isn't supported

 src/mongoc/mongoc-write-command.c | 11 -----------
 1 file changed, 11 deletions(-)

commit f5b0fae747bbdb7b9e40b654f12c06c5e6a5624b
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Nov 16 00:19:49 2017 -0500

    CDRIVER-2228 reenable assertion and disallow extra documents

 tests/test-mongoc-retryable-writes.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7355bb2c3032167ec3b63ac8647e2e2635303382
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Nov 16 00:12:39 2017 -0500

    CDRIVER-2228 retry findAndModify commands via collection helper

 src/mongoc/mongoc-collection.c | 50 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 50 insertions(+)

commit ebd2ca00a963fbd08a23742eafe1d776967fa4ce
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Nov 16 00:14:34 2017 -0500

    CDRIVER-2228 refactor retry logic in _mongoc_write_opmsg

 src/mongoc/mongoc-write-command.c | 27 +++++++++++----------------
 1 file changed, 11 insertions(+), 16 deletions(-)

commit 0eebd9521ddcb09f7eec43c3dd742685481f9b33
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Nov 15 23:31:05 2017 -0500

    CDRIVER-2228 re-order bulk write ops to avoid mid-batch error

 tests/json/retryable_writes/bulkWrite.json | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 29fd6dd87c27b41b68309d7d6e502b02c2de668b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 19:28:09 2017 -0500

    CDRIVER-2228 clean up after failed retry tests

 tests/test-mongoc-retryable-writes.c | 28 +++++++++++++---------------
 1 file changed, 13 insertions(+), 15 deletions(-)

commit ee48264f89bcc698df6a1e0f30098b28b9f3bfa9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 19:15:14 2017 -0500

    CDRIVER-2228 mongoc_lookup_bool accepts dotted key

 src/mongoc/mongoc-util.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit b66fecc63f6c53ff490590dc919ce060602424ec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 18:32:35 2017 -0500

    CDRIVER-2228 leak if bulk write fails

 src/mongoc/mongoc-bulk-operation.c | 1 +
 1 file changed, 1 insertion(+)

commit 7c0763db0a06901a4dbc9fdbce0eb59484686192
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 17:45:57 2017 -0500

    CDRIVER-2228 omit "upserted" from test if empty

 tests/test-mongoc-retryable-writes.c | 35 ++++++++++++++++++++++-------------
 1 file changed, 22 insertions(+), 13 deletions(-)

commit aa7efb1211b59fdb09166307c94055d2345b8185
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 17:25:04 2017 -0500

    CDRIVER-2228 don't cache txnNumber iter
    
    We had attempted to optimize by keeping a bson_iter_t pointed to the
    location of the txnNumber field within bulk write commands, but there's
    some bug with this: intermittently we send a command to the server with
    txnNumber reset to 0. Let's not do this optimization now, and revisit
    later.

 src/mongoc/mongoc-cmd-private.h   | 1 -
 src/mongoc/mongoc-cmd.c           | 8 +++-----
 src/mongoc/mongoc-write-command.c | 5 ++++-
 3 files changed, 7 insertions(+), 7 deletions(-)

commit e0398ef593d7388ccf3a5f56707738a10d48b12d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 17:07:24 2017 -0500

    CDRIVER-2228 recover from net error in bulk write
    
    Recreate the stream to the selected server between batches, in case the
    stream was closed during a retry attempt further down the stack.

 src/mongoc/mongoc-bulk-operation.c | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 1073d1dd1a561285ce55ac6d1fe8b15fa64d257d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 16:50:41 2017 -0500

    CDRIVER-2228 set retryWrites true in test

 tests/test-mongoc-retryable-writes.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 87651a178bf43a64e620707417ee8df12a03d174
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 16:15:30 2017 -0500

    use MONGOC_TEST_FUTURE_TIMEOUT_MS with mock_rs_t

 tests/mock_server/mock-rs.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6218ae07e6dab92eb719a3ed46140a25ff6c30fe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 16:15:30 2017 -0500

    CDRIVER-2228 rs failover test for retryable writes

 src/mongoc/mongoc-cluster-private.h  |   3 +
 src/mongoc/mongoc-cluster.c          |  12 ++-
 src/mongoc/mongoc-write-command.c    |  10 +-
 tests/mock_server/mock-rs.c          | 196 ++++++++++++++++++++++++++++++++---
 tests/mock_server/mock-rs.h          |  12 +++
 tests/mock_server/mock-server.c      |  43 +-------
 tests/mock_server/request.c          |  58 +++++++++++
 tests/mock_server/request.h          |   3 +
 tests/test-mongoc-retryable-writes.c |  71 +++++++++++++
 9 files changed, 350 insertions(+), 58 deletions(-)

commit 027b0cebf26a1e0279f527138e75ea5acfd4ec5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 15 16:13:01 2017 -0500

    CDRIVER-2228 fix code to increment txnNumber

 src/mongoc/mongoc-cmd.c | 20 +++++++++++---------
 1 file changed, 11 insertions(+), 9 deletions(-)

commit c469b50bd9520106d0e208470df6cf1a99607756
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Oct 20 17:03:29 2017 -0400

    CDRIVER-2228 retryable write tests

 CMakeLists.txt                                     |   1 +
 tests/Makefile.am                                  |   2 +
 tests/json/retryable_writes/bulkWrite.json         | 654 ++++++++++++++++++++
 tests/json/retryable_writes/deleteOne.json         | 110 ++++
 tests/json/retryable_writes/findOneAndDelete.json  | 127 ++++
 tests/json/retryable_writes/findOneAndReplace.json | 135 +++++
 tests/json/retryable_writes/findOneAndUpdate.json  | 137 +++++
 tests/json/retryable_writes/insertMany.json        | 153 +++++
 tests/json/retryable_writes/insertOne.json         | 129 ++++
 tests/json/retryable_writes/replaceOne.json        | 134 +++++
 tests/json/retryable_writes/updateOne.json         | 275 +++++++++
 tests/test-libmongoc.c                             |   3 +
 tests/test-mongoc-retryable-writes.c               | 670 +++++++++++++++++++++
 13 files changed, 2530 insertions(+)

commit c2daf8cd1bdb3bac89088e01793c8f461a7f2e6f
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Nov 1 16:36:51 2017 -0400

    CDRIVER-2228 enable fail points for Evergreen RS nodes

 orchestration_configs/replica_sets/auth-ssl.json  | 3 +++
 orchestration_configs/replica_sets/auth.json      | 3 +++
 orchestration_configs/replica_sets/basic-ssl.json | 3 +++
 orchestration_configs/replica_sets/basic.json     | 3 +++
 4 files changed, 12 insertions(+)

commit 0b9e973249c4a35ef73756cecd1c4d629127bc9a
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Sep 26 18:54:49 2017 -0400

    CDRIVER-2228 add txnNumber and retry failed OP_MSG write commands

 src/mongoc/mongoc-cmd-private.h   |  1 +
 src/mongoc/mongoc-cmd.c           |  9 ++++++++
 src/mongoc/mongoc-write-command.c | 46 +++++++++++++++++++++++++++++++++++++++
 3 files changed, 56 insertions(+)

commit 1d388e7ff2f82332f4ced061ded6a23a85065ebe
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Sep 22 14:46:37 2017 -0400

    CDRIVER-2228 transaction number on client session

 src/mongoc/mongoc-client-session-private.h | 1 +
 src/mongoc/mongoc-client-session.c         | 4 ++++
 2 files changed, 5 insertions(+)

commit 0838482db974bdd368f03838a81bc71e906642f0
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Sep 26 18:44:02 2017 -0400

    CDRIVER-2228 error if first server does not support retryable writes

 src/mongoc/mongoc-client-private.h |  2 ++
 src/mongoc/mongoc-write-command.c  | 11 +++++++++++
 2 files changed, 13 insertions(+)

commit 54cf28f77ae1077b79470721a41bdd422e3b7b01
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Sep 26 18:40:53 2017 -0400

    CDRIVER-2228 is_retryable_write option on cmd parts

 src/mongoc/mongoc-cmd-private.h   | 1 +
 src/mongoc/mongoc-cmd.c           | 1 +
 src/mongoc/mongoc-write-command.c | 1 +
 3 files changed, 3 insertions(+)

commit 31fabbcb8b3123fb3ce1f06c0c5b5507c658ea4b
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Sep 26 15:50:08 2017 -0400

    CDRIVER-2228 is_retryable option on bulk write flags

 src/mongoc/mongoc-bulk-operation.c        | 4 ++++
 src/mongoc/mongoc-collection.c            | 8 ++++++++
 src/mongoc/mongoc-write-command-private.h | 1 +
 3 files changed, 13 insertions(+)

commit 1a5588493a07f4b38d533e79c733be1cf48c2575
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Sep 20 17:00:00 2017 -0400

    CDRIVER-2228 retryWrites URI option

 src/mongoc/mongoc-uri.c | 1 +
 src/mongoc/mongoc-uri.h | 1 +
 2 files changed, 2 insertions(+)

commit c80f6a62b1e809b9a407b9ed1dcdbd18783fdccd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 10:00:58 2017 -0500

    CDRIVER-2369 fix mingw evergreen test

 .evergreen/config.yml | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 24d83d20f86ecae129a231cc44c80ffdd73abcc2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 07:45:48 2017 -0500

    CDRIVER-2369 update evergreen's build + link tests

 .evergreen/compile-windows.sh     | 27 +++++++++++++++++++++------
 .evergreen/config.yml             | 35 +++++++++++++++++++++++++----------
 .evergreen/link-sample-program.sh | 12 ++++++++++--
 3 files changed, 56 insertions(+), 18 deletions(-)

commit 5c0ed324bc85f4a1c1fcf285c6fe975600d190ee
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 06:36:22 2017 -0500

    CDRIVER-2207 old command APIs are superseded

 doc/errors.rst                    |  4 ++--
 doc/mongoc_client_command.rst     |  5 ++++-
 doc/mongoc_collection_command.rst |  2 +-
 doc/mongoc_database_command.rst   |  5 +++++
 examples/mongoc-ping.c            | 27 ++++++++++++---------------
 5 files changed, 24 insertions(+), 19 deletions(-)

commit a02ce83a7e3a0e8ff28193afb370cd5db6f23431
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 06:32:56 2017 -0500

    Revert "CDRIVER-2207 deprecate mongoc_database_command"
    
    This reverts commit f98224425e0ae7f40896f42978e5c89b07ef8ab8.

 doc/errors.rst                  |  2 +-
 doc/mongoc_database_command.rst | 13 +------------
 examples/mongoc-ping.c          | 27 +++++++++++++++------------
 src/mongoc/mongoc-database.h    |  3 +--
 4 files changed, 18 insertions(+), 27 deletions(-)

commit 0f34ecdc57a9d4c37792b0bbb7e6e8d35751065f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 06:32:41 2017 -0500

    Revert "CDRIVER-2207 deprecate mongoc_client_command"
    
    This reverts commit e784642c4f5470bd50f585fbf9668b33787b76cf.

 doc/mongoc_client_command.rst          | 13 ++-----------
 src/mongoc/mongoc-client.h             |  3 +--
 tests/test-mongoc-client.c             |  8 --------
 tests/test-mongoc-cluster.c            |  2 --
 tests/test-mongoc-collection.c         |  3 ---
 tests/test-mongoc-command-monitoring.c |  4 +---
 tests/test-mongoc-cursor.c             |  2 --
 7 files changed, 4 insertions(+), 31 deletions(-)

commit b6aa249ba706667f86615ccc39092823de3748e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 04:36:37 2017 -0500

    CDRIVER-2257 update DNS tests

 .../json/initial_dns_seedlist_discovery/no-results.json  |  4 +++-
 .../one-txt-record-multiple-strings.json                 | 16 ++++++++++++++++
 .../two-txt-records-with-override.json                   | 16 ----------------
 .../initial_dns_seedlist_discovery/two-txt-records.json  | 16 ----------------
 .../initial_dns_seedlist_discovery/uri-with-port.json    |  7 +++++++
 .../uri-with-two-hosts.json                              |  7 +++++++
 tests/test-mongoc-dns.c                                  | 12 +++++++++++-
 7 files changed, 44 insertions(+), 34 deletions(-)

commit 25096cbf217d730bdac8b20db2718a768ae3944d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 17 04:29:21 2017 -0500

    CDRIVER-2257 parse multiple strings in TXT record

 src/mongoc/mongoc-client.c | 37 ++++++++++++++++++++++++++++---------
 1 file changed, 28 insertions(+), 9 deletions(-)

commit c7f63c061a3b2c4395d1679da6e70da6cc0ad860
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 13 09:26:15 2017 -0500

    CDRIVER-2369 don't bundle snappy

 .evergreen/check-release-archive.sh              |     2 +-
 .evergreen/compile-unix.sh                       |     4 +-
 .evergreen/config.yml                            |    73 +-
 .evergreen/link-sample-program-msvc.cmd          |    19 +-
 .evergreen/link-sample-program.sh                |    24 +-
 CMakeLists.txt                                   |    23 +-
 Makefile.am                                      |     2 +-
 THIRD_PARTY_NOTICES                              |    60 -
 build/autotools/CheckSnappy.m4                   |    74 +-
 build/autotools/ReadCommandLineArguments.m4      |     8 +-
 build/autotools/SetupAutomake.m4                 |     3 -
 build/cmake/FindSnappy.cmake                     |    99 +-
 build/cmake/libmongoc-1.0-config.cmake.in        |     2 +-
 build/cmake/libmongoc-static-1.0-config.cmake.in |     8 +-
 configure.ac                                     |     3 +-
 doc/installing.rst                               |     2 +-
 src/Makefile.am                                  |     3 -
 src/mongoc/Makefile.am                           |    22 -
 src/snappy-1.1.3/AUTHORS                         |     1 -
 src/snappy-1.1.3/COPYING                         |    54 -
 src/snappy-1.1.3/ChangeLog                       |  2468 ---
 src/snappy-1.1.3/INSTALL                         |   370 -
 src/snappy-1.1.3/Makefile.am                     |    20 -
 src/snappy-1.1.3/Makefile.in                     |  1325 --
 src/snappy-1.1.3/NEWS                            |   140 -
 src/snappy-1.1.3/README                          |   135 -
 src/snappy-1.1.3/aclocal.m4                      |  9912 -----------
 src/snappy-1.1.3/autogen.sh                      |     7 -
 src/snappy-1.1.3/compile                         |   347 -
 src/snappy-1.1.3/config.guess                    |  1558 --
 src/snappy-1.1.3/config.h.in                     |   134 -
 src/snappy-1.1.3/config.sub                      |  1791 --
 src/snappy-1.1.3/configure                       | 19015 ---------------------
 src/snappy-1.1.3/configure.ac                    |   133 -
 src/snappy-1.1.3/depcomp                         |   791 -
 src/snappy-1.1.3/format_description.txt          |   110 -
 src/snappy-1.1.3/framing_format.txt              |   135 -
 src/snappy-1.1.3/install-sh                      |   527 -
 src/snappy-1.1.3/ltmain.sh                       |  9661 -----------
 src/snappy-1.1.3/m4/gtest.m4                     |    74 -
 src/snappy-1.1.3/missing                         |   215 -
 src/snappy-1.1.3/snappy-c.cc                     |    90 -
 src/snappy-1.1.3/snappy-c.h                      |   138 -
 src/snappy-1.1.3/snappy-internal.h               |   150 -
 src/snappy-1.1.3/snappy-sinksource.cc            |   104 -
 src/snappy-1.1.3/snappy-sinksource.h             |   182 -
 src/snappy-1.1.3/snappy-stubs-internal.cc        |    42 -
 src/snappy-1.1.3/snappy-stubs-internal.h         |   495 -
 src/snappy-1.1.3/snappy-stubs-public.h.in        |    98 -
 src/snappy-1.1.3/snappy-test.cc                  |   609 -
 src/snappy-1.1.3/snappy-test.h                   |   597 -
 src/snappy-1.1.3/snappy.cc                       |  1555 --
 src/snappy-1.1.3/snappy.h                        |   203 -
 src/snappy-1.1.3/snappy_unittest.cc              |  1418 --
 src/snappy-1.1.3/test-driver                     |   139 -
 tests/Makefile.am                                |     1 -
 56 files changed, 159 insertions(+), 55016 deletions(-)

commit e89ba353c0a3f11d5fbdb3554417110a1147f346
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 16 10:18:26 2017 -0500

    Revert "add -lsnappy if bundled to pkg-config"
    
    This reverts commit fb72c5ba00ffb209749041db4dd0e907c7fec410.

 build/autotools/CheckSnappy.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fb72c5ba00ffb209749041db4dd0e907c7fec410
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 13 09:28:15 2017 -0500

    add -lsnappy if bundled to pkg-config

 build/autotools/CheckSnappy.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b927fa4a596102e6caa9e451ef72e7d934ae00e6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 09:48:12 2017 -0500

    CDRIVER-2293 add snappy/zlib flags to config files
    
    When we bundle zlib and/or snappy, currently the Autotools build system
    actually builds and installs the libraries alongside libmongoc. To link
    statically to libmongoc in this configuration, you need to include the
    full path to zlib and/or snappy in the link line.
    
    This patch adds the full path to zlib/snappy in the CMake config file.
    
    This is a temporary workaround until we fully vendor zlib/snappy in
    CDRIVER-2363.

 .evergreen/config.yml                            | 117 +++++++++++------------
 .evergreen/link-sample-program.sh                |   4 +-
 build/cmake/libmongoc-static-1.0-config.cmake.in |  13 ++-
 configure.ac                                     |  12 ++-
 4 files changed, 80 insertions(+), 66 deletions(-)

commit 76791d6e7dc01cd1b55d838eaf16fc4f2291d746
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 14 14:40:06 2017 -0500

    update URI tests for changed error messages

 tests/test-mongoc-uri.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3085ff26d79dd78f894d9e7834ea163dce024eb6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 14 09:12:17 2017 -0500

    CDRIVER-2227 document "opts" fields

 doc/bulk.rst                                          |  2 ++
 doc/includes/crud-opts.txt                            |  9 +++++++++
 doc/includes/read-opts.txt                            |  8 ++++++++
 doc/includes/read-write-opts.txt                      | 10 ++++++++++
 doc/includes/write-opts.txt                           |  9 +++++++++
 doc/mongoc_client_command_with_opts.rst               |  4 ++--
 doc/mongoc_client_read_command_with_opts.rst          |  4 ++--
 doc/mongoc_client_read_write_command_with_opts.rst    |  4 ++--
 doc/mongoc_client_write_command_with_opts.rst         |  8 +++++---
 doc/mongoc_collection_aggregate.rst                   | 19 +++++++++++++------
 doc/mongoc_collection_command_with_opts.rst           |  4 ++--
 doc/mongoc_collection_delete_many.rst                 |  6 +++++-
 doc/mongoc_collection_delete_one.rst                  |  6 +++++-
 doc/mongoc_collection_insert_many.rst                 | 15 ++++++++++-----
 doc/mongoc_collection_insert_one.rst                  |  6 +++++-
 doc/mongoc_collection_read_command_with_opts.rst      |  4 ++--
 ...mongoc_collection_read_write_command_with_opts.rst |  4 ++--
 doc/mongoc_collection_replace_one.rst                 |  8 ++------
 doc/mongoc_collection_update_many.rst                 | 16 +++++-----------
 doc/mongoc_collection_update_one.rst                  | 16 ++++------------
 doc/mongoc_collection_write_command_with_opts.rst     |  4 ++--
 doc/mongoc_database_command_with_opts.rst             |  4 ++--
 doc/mongoc_database_read_command_with_opts.rst        |  4 ++--
 doc/mongoc_database_read_write_command_with_opts.rst  |  4 ++--
 doc/mongoc_database_write_command_with_opts.rst       |  4 ++--
 doc/mongoc_write_concern_append.rst                   |  2 +-
 src/mongoc/mongoc-collection.c                        |  2 +-
 27 files changed, 116 insertions(+), 70 deletions(-)

commit af1164d8d991499103943d86f92b75a147ea3209
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 14 07:10:33 2017 -0500

    CDRIVER-2296 CRUD functions take "validate: false"

 src/mongoc/mongoc-collection.c | 20 +++++-----
 tests/test-mongoc-collection.c | 86 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 97 insertions(+), 9 deletions(-)

commit e600d396345a865e194bf56d77e4094a8a6d29c6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 13 18:07:20 2017 -0500

    1.8.1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 22 ++++++++++++++++++++++
 VERSION_RELEASED |  2 +-
 2 files changed, 23 insertions(+), 1 deletion(-)

commit f6c432dff11123de4b13e0cc81ee9cfc77baab33
Author: Derick Rethans <github@derickrethans.nl>
Date:   Tue Nov 14 14:05:30 2017 +0000

    remove dot at end of sentence in new error message
    
    This suddenly started creating "double dots" in the the PHP driver:
    
    006+ Failed to parse MongoDB URI: 'mongodb://127.0.0.1/?w=-1&journal=true'. Journal conflicts with w value [w=-1]..
    006- Failed to parse MongoDB URI: 'mongodb://127.0.0.1/?w=-1&journal=true'. Invalid writeConcern.
    008+ Failed to parse MongoDB URI: 'mongodb://127.0.0.1/?w=0&journal=true'. Journal conflicts with w value [w=0]..
    008- Failed to parse MongoDB URI: 'mongodb://127.0.0.1/?w=0&journal=true'. Invalid writeConcern.

 src/mongoc/mongoc-uri.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 30261584587614f3b1c45ab4bb30962c9979e5e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 13 13:57:45 2017 -0500

    CDRIVER-2365 only data nodes have session timeout

 src/mongoc/mongoc-topology-description-private.h   |   3 +-
 src/mongoc/mongoc-topology-description.c           |  33 +++-
 src/mongoc/mongoc-topology.c                       |   2 +-
 .../rs/ls_timeout.json                             | 193 +++++++++++++++++++--
 4 files changed, 208 insertions(+), 23 deletions(-)

commit a9c36c1cdfd47f8b82d09e33fe20b236e638188a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 13 13:15:40 2017 -0500

    CDRIVER-2293 remove snappy test files
    
    Preparing to unbundle snappy entirely. Removing these files, including
    binary files, avoids issues patch-testing subsequent changes in
    Evergreen.

 src/snappy-1.1.3/testdata/alice29.txt     |  3609 ----------
 src/snappy-1.1.3/testdata/asyoulik.txt    |  4122 -----------
 src/snappy-1.1.3/testdata/baddata1.snappy |   Bin 27512 -> 0 bytes
 src/snappy-1.1.3/testdata/baddata2.snappy |   Bin 27483 -> 0 bytes
 src/snappy-1.1.3/testdata/baddata3.snappy |   Bin 28384 -> 0 bytes
 src/snappy-1.1.3/testdata/fireworks.jpeg  |   Bin 123093 -> 0 bytes
 src/snappy-1.1.3/testdata/geo.protodata   |   Bin 118588 -> 0 bytes
 src/snappy-1.1.3/testdata/html            |     1 -
 src/snappy-1.1.3/testdata/html_x_4        |     1 -
 src/snappy-1.1.3/testdata/kppkn.gtb       |   Bin 184320 -> 0 bytes
 src/snappy-1.1.3/testdata/lcet10.txt      |  7519 -------------------
 src/snappy-1.1.3/testdata/paper-100k.pdf  |   598 --
 src/snappy-1.1.3/testdata/plrabn12.txt    | 10699 ----------------------------
 src/snappy-1.1.3/testdata/urls.10K        | 10000 --------------------------
 14 files changed, 36549 deletions(-)

commit af7ca3d1df0764bca45bd6dacdb3c87472e32b60
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 13 12:51:57 2017 -0500

    CDRIVER-2357 query secondaries with OP_MSG, part 3
    
    Injecting read preference primaryPreferred in "getMore" commands is ok.

 src/mongoc/mongoc-cmd.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fc5e2a27781fe29d027c336a92e9d1157c9af6e1
Author: Derick Rethans <github@derickrethans.nl>
Date:   Mon Nov 13 10:28:18 2017 +0000

    fixed compilation with tracing enabled

 src/mongoc/mongoc-client-session.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 25ee1193b5e343eea9edd32c4016101aec9a0961
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 16:04:32 2017 -0500

    CDRIVER-2348 cursor_new_from_command_reply options
    
    Accept "tailable", "awaitData" and other command options.

 doc/mongoc_cursor_new_from_command_reply.rst |  2 +-
 src/mongoc/mongoc-cursor.c                   |  7 +++-
 tests/test-mongoc-cursor.c                   | 60 ++++++++++++++++++++++++++++
 3 files changed, 67 insertions(+), 2 deletions(-)

commit d41d16b23e0d1592f59dc5314b4932a23e721bd4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 12 16:57:21 2017 -0500

    CDRIVER-2357 query secondaries with OP_MSG, part 2

 src/mongoc/mongoc-cmd.c                |  79 ++++++++-------
 src/mongoc/mongoc-collection.c         |   7 --
 src/mongoc/mongoc-cursor.c             |  35 +++----
 src/mongoc/mongoc-read-prefs-private.h |   3 +
 tests/mock_server/mock-server.c        |  35 +++++++
 tests/mock_server/mock-server.h        |   3 +
 tests/test-mongoc-read-prefs.c         | 178 +++++++++++++++++++--------------
 7 files changed, 204 insertions(+), 136 deletions(-)

commit 09232e44fbf220b237dd67311b5fe9dc7a6d2da8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 12 16:53:52 2017 -0500

    dead code in test-mongoc-read-prefs.c

 tests/test-mongoc-read-prefs.c | 243 ++++++++++++++++++++++++++++++++++++-----
 1 file changed, 218 insertions(+), 25 deletions(-)

commit 5e4eba07f11e6a4000358e296b27ca9acc74538d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 12 16:53:16 2017 -0500

    unused value in mongoc-write-command.c

 src/mongoc/mongoc-write-command.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit af92e3d80b6d29dd1993faba3f58f43eb04a8caf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 12 15:25:05 2017 -0500

    CDRIVER-2355 refactor mongoc_cmd_parts_assemble

 src/mongoc/mongoc-cmd.c | 36 ++++++------------------------------
 1 file changed, 6 insertions(+), 30 deletions(-)

commit 284b27b78354f9422fab16668fed8c3b26d1566b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 12 15:11:12 2017 -0500

    CDRIVER-2306 check mock_server_receives_msg args
    
    It's easy to write bad mock server tests with OP_MSG, by passing a str
    where a bson_t* is required.

 tests/mock_server/mock-server.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 76cab91be40d809dff6676ab8ee59e05b32f097d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 16:40:41 2017 -0500

    CDRIVER-2357 refactor cursor options logic

 src/mongoc/mongoc-cmd.c    | 22 ++++++++++----
 src/mongoc/mongoc-cursor.c | 76 ++++++++++++++++------------------------------
 2 files changed, 42 insertions(+), 56 deletions(-)

commit 6dc6cfb7127f2d41a7ded2c75112acf33a68958c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 16:41:25 2017 -0500

    CDRIVER-2229 merge user readConcern & clusterTime

 src/mongoc/mongoc-cmd-private.h |  1 +
 src/mongoc/mongoc-cmd.c         | 82 +++++++++++++++++++++++++++++------------
 2 files changed, 59 insertions(+), 24 deletions(-)

commit 0eb2397d0e6ccda69f06a649c21f95fcf40f901b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 12:35:16 2017 -0500

    CDRIVER-2229 w=0 is not causally consistent

 doc/includes/session-lifecycle.txt                 |  2 ++
 doc/mongoc_session_opts_set_causal_consistency.rst |  2 ++
 doc/mongoc_write_concern_set_w.rst                 |  1 +
 src/mongoc/mongoc-client-session-private.h         |  1 +
 src/mongoc/mongoc-client-session.c                 |  3 +-
 src/mongoc/mongoc-cluster.c                        |  3 +-
 src/mongoc/mongoc-cmd-private.h                    |  1 +
 src/mongoc/mongoc-write-command.c                  |  9 +++++-
 tests/test-mongoc-client-session.c                 | 34 ++++++++++++++++++++++
 9 files changed, 53 insertions(+), 3 deletions(-)

commit 4e37a5cc81ce453231f94a9c6a5b42fd556f58c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 12:34:20 2017 -0500

    CDRIVER-2229 refactor write concern validation

 src/mongoc/mongoc-cmd.c                   | 12 +++--
 src/mongoc/mongoc-collection.c            | 17 +++++--
 src/mongoc/mongoc-write-concern-private.h |  7 +--
 src/mongoc/mongoc-write-concern.c         | 85 ++++++++++---------------------
 tests/test-mongoc-bulk.c                  | 38 ++++++++++++++
 tests/test-mongoc-write-concern.c         | 21 +++++---
 6 files changed, 100 insertions(+), 80 deletions(-)

commit 8301a4841d56cd8b45646f123e2cfc98f134a764
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 10:59:24 2017 -0500

    CDRIVER-2365 ignore arbiters' session timeout

 src/mongoc/mongoc-topology-description.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6245db9a18bf02b3b3072adee449a2eb00d6fc00
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 10:59:33 2017 -0500

    CDRIVER-2229 test causal consistency

 tests/test-mongoc-client-session.c | 397 ++++++++++++++++++++++++++++++++++---
 1 file changed, 371 insertions(+), 26 deletions(-)

commit 340d8a4caaa8bd3c60227fae53db912fea284cd9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 11 10:56:16 2017 -0500

    CDRIVER-2357 query secondaries with OP_MSG

 src/mongoc/mongoc-client.c        |  2 +-
 src/mongoc/mongoc-cmd-private.h   |  3 ++
 src/mongoc/mongoc-cmd.c           | 91 +++++++++++++++++++++++++++++++++------
 src/mongoc/mongoc-collection.c    | 24 +++++++----
 src/mongoc/mongoc-cursor.c        | 29 +++++++++++--
 src/mongoc/mongoc-write-command.c |  4 +-
 6 files changed, 126 insertions(+), 27 deletions(-)

commit 947f5fbf8867d0ce5acbbe64ff5e15d779a4b569
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 21:58:27 2017 -0500

    CDRIVER-2229 get/advance session optime

 doc/mongoc_client_session_advance_cluster_time.rst |  2 +
 ...ongoc_client_session_advance_operation_time.rst | 30 ++++++++++++++
 doc/mongoc_client_session_get_operation_time.rst   | 28 +++++++++++++
 doc/mongoc_client_session_t.rst                    |  2 +
 src/mongoc/mongoc-client-session.c                 | 46 +++++++++++++++++++---
 src/mongoc/mongoc-client-session.h                 | 13 +++++-
 6 files changed, 115 insertions(+), 6 deletions(-)

commit cb4cbae51687c4c569287c1791c9173d97901ad5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 22:00:39 2017 -0500

    CDRIVER-2229 sessions are causal by default
    
    And finish renaming "causally consistent reads" to "causal consistency".

 doc/includes/session-lifecycle.txt                 |  2 +-
 doc/mongoc_session_opt_t.rst                       |  8 +-
 doc/mongoc_session_opts_destroy.rst                |  2 +-
 doc/mongoc_session_opts_get_causal_consistency.rst |  2 +-
 doc/mongoc_session_opts_new.rst                    |  2 +-
 doc/mongoc_session_opts_set_causal_consistency.rst | 45 ++++++++++-
 examples/example-session.c                         |  8 +-
 src/mongoc/mongoc-client-session-private.h         |  4 +-
 src/mongoc/mongoc-client-session.c                 | 25 ++++--
 tests/test-mongoc-client-session.c                 | 90 +++++++++++++++++++---
 10 files changed, 156 insertions(+), 32 deletions(-)

commit ffdf560d9e7fc582e2b9e5b05b36564b7d91c41b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 21:58:27 2017 -0500

    CDRIVER-2192 more "const" in session API

 doc/mongoc_client_session_append.rst           | 2 +-
 doc/mongoc_client_session_get_cluster_time.rst | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 760dbf8f60306dd4775c1690d3f1936b03431efe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 7 08:42:11 2017 -0500

    CDRIVER-2331 implement delete_one/many

 doc/errors.rst                            |   9 +-
 doc/mongoc_collection_delete.rst          |  10 +-
 doc/mongoc_collection_delete_many.rst     |  42 ++++++++
 doc/mongoc_collection_delete_one.rst      |  42 ++++++++
 doc/mongoc_collection_remove.rst          |   2 +
 doc/mongoc_collection_t.rst               |   2 +
 doc/mongoc_delete_flags_t.rst             |   2 +-
 doc/tutorial.rst                          |   6 +-
 src/mongoc/mongoc-bulk-operation.c        |   2 +-
 src/mongoc/mongoc-collection.c            |  91 ++++++++++++++++
 src/mongoc/mongoc-collection.h            |   2 -
 src/mongoc/mongoc-gridfs-file.c           |  23 ++--
 src/mongoc/mongoc-write-command-private.h |   1 +
 src/mongoc/mongoc-write-command.c         |   3 +-
 tests/test-mongoc-bulk.c                  |  12 +--
 tests/test-mongoc-client-session.c        |  16 +++
 tests/test-mongoc-collection.c            | 167 +++++++++++++++++++++++++++---
 tests/test-mongoc-command-monitoring.c    |   6 +-
 tests/test-mongoc-cursor.c                |   8 +-
 tests/test-mongoc-gridfs.c                |   4 +-
 tests/test-mongoc-sample-commands.c       |   8 +-
 21 files changed, 392 insertions(+), 66 deletions(-)

commit b8b3f6fad8dcfaaad21eb795771894c81f7a20bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 22:02:43 2017 -0500

    CDRIVER-2331 implement insert_many

 doc/mongoc_collection_insert_many.rst |   2 +-
 src/mongoc/mongoc-collection.c        | 100 ++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h        |   3 +-
 tests/test-mongoc-client-session.c    |  13 ++++
 tests/test-mongoc-collection.c        | 140 +++++++++++++++++++++-------------
 5 files changed, 202 insertions(+), 56 deletions(-)

commit 591efc0bd2e2f5a87592dbf5d07644094d0a5c7c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 10:30:25 2017 -0500

    Revert "CDRIVER-2286 enable cursor tests"
    
    a503f118b7d77c5e614a82cd5ad0b22746de2697

 tests/test-mongoc-cursor.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 5c24b1e7a6fa15e8f013ed47e7bf506d8806b77a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 10:21:30 2017 -0500

    more lenient max staleness test

 tests/test-mongoc-max-staleness.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit e451042c85135b8fb99fb5ea9fc0f4cea035cc91
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 9 10:11:39 2017 -0500

    CDRIVER-2233 longer wtimeout in change stream test
    
    Avoid "replication timed out" failures in tests. Also add more error
    logging to debug test failures.

 examples/example-collection-watch.c |  2 +-
 tests/test-mongoc-change-stream.c   | 55 +++++++++++++++++++++++--------------
 2 files changed, 35 insertions(+), 22 deletions(-)

commit 38e72de45fe1b3ec71be275bd507e29bb0d45a4e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 21:55:26 2017 -0500

    CDRIVER-2192 cursor_set_hint enables secondary read w/ OP_MSG

 src/mongoc/mongoc-cursor.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit aa11151f2dc6d48da1a8dc95afc7eee783874200
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 21:54:17 2017 -0500

    CDRIVER-2327 use primary's server id in auth test

 tests/test-mongoc-client.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 3e568a58a05ab8518fffaa5a7538114804a16699
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 21:52:46 2017 -0500

    informative error in change stream test

 tests/test-mongoc-change-stream.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 7cf6ab10c28f27bde67c9fb22cdf66ae060f9a9e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 18:31:59 2017 -0500

    CDRIVER-2327 enable replicaset auth tests

 .evergreen/config.yml | 2 ++
 1 file changed, 2 insertions(+)

commit ed825623b834ab74538ee0e2231ee1525a027e31
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 18:30:53 2017 -0500

    use C-style comment

 tests/test-mongoc-client.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 4aec3980c1a0e1cb7cd86d974c0237b3f16943e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 18:30:53 2017 -0500

    CDRIVER-2192 avoid endSessions warnings in tests

 tests/test-mongoc-client.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit d503e61e42a8e3bd1a9ccdd0bff7116034407b25
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Nov 8 11:12:16 2017 -0500

    CDRIVER-2342 check for null user in _mongoc_scram_start

 CMakeLists.txt            |  1 +
 src/mongoc/mongoc-scram.c |  8 ++++++++
 tests/Makefile.am         |  1 +
 tests/test-libmongoc.c    |  3 +++
 tests/test-mongoc-scram.c | 42 ++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 55 insertions(+)

commit a503f118b7d77c5e614a82cd5ad0b22746de2697
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 18 14:33:27 2017 -0400

    CDRIVER-2286 enable cursor tests

 tests/test-mongoc-cursor.c | 4 ----
 1 file changed, 4 deletions(-)

commit e98934cbb424d097e23d6d0b4022a4b384a9f493
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 17:13:38 2017 -0500

    enable auth tests for all SSL, not just OpenSSL

 tests/test-libmongoc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e829bada678a444a4c121479dcceece8071c7b46
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 17:13:23 2017 -0500

    CDRIVER-2192 fix session last_use_time test on Win

 tests/test-mongoc-client-session.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 2784c05746fe810a2d4e87ca0a1201d5207ac586
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 15:58:47 2017 -0500

    CDRIVER-2219 spelling: "compressible"

 src/mongoc/mongoc-cluster.c     | 4 ++--
 src/mongoc/mongoc-cmd-private.h | 2 +-
 src/mongoc/mongoc-cmd.c         | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 9b37ad9b6ad3096efc54c75dcfcbb45afb2105f9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 15:57:21 2017 -0500

    CDRIVER-2219 make mongoc_cluster_run_opmsg static

 src/mongoc/mongoc-cluster-private.h | 6 ------
 src/mongoc/mongoc-cluster.c         | 8 +++++++-
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 4e692730c1d7187a1717262f8fb5f418429dfb06
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 15:52:27 2017 -0500

    find_and_modify initializes reply twice

 src/mongoc/mongoc-collection.c | 1 -
 1 file changed, 1 deletion(-)

commit f7f0a8a406f8be3b196669694e8147a1e4da7fba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 15:34:44 2017 -0500

    CDRIVER-2192 no $clusterTime from OP_QUERY
    
    Dead code.

 src/mongoc/mongoc-cluster.c | 2 --
 1 file changed, 2 deletions(-)

commit ce7afa23c8acc5379446b1b87dc9ec0073a229c1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 15:33:30 2017 -0500

    CDRIVER-2192 track sessions' last use time

 src/mongoc/mongoc-cmd.c            |  4 ++++
 tests/test-mongoc-client-session.c | 10 ++++++++++
 2 files changed, 14 insertions(+)

commit a64115012c0385f476440500b07403a870922a8e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 15:02:08 2017 -0500

    CDRIVER-2192 use random sessionId

 src/mongoc/mongoc-client-private.h |  2 +-
 src/mongoc/mongoc-client.c         | 15 ++++++++-------
 tests/test-mongoc-client-session.c |  8 ++++++--
 3 files changed, 15 insertions(+), 10 deletions(-)

commit adbabe0ca5b03dd5832c5a16467102bd2e6c4640
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 13:11:57 2017 -0500

    CDRIVER-2192 handle endSessions in APM
    
    Update tests and examples to deal with endSessions command events during mongoc_client_destroy.

 examples/example-command-monitoring.c  | 10 +++++-----
 tests/test-mongoc-command-monitoring.c | 16 ++++++++++++++--
 2 files changed, 19 insertions(+), 7 deletions(-)

commit 5163877590520e2b75095d43c5d476e502155d13
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 07:10:05 2017 -0500

    CDRIVER-2192 auth earlier in tests
    
    Now that we use lsid everywhere, the test framework must auth even to
    call ismaster and determine if we're connected to a replset or not.

 tests/test-libmongoc.c | 23 +++++++++++++++++++----
 1 file changed, 19 insertions(+), 4 deletions(-)

commit fc620ac58b7dd6cf93d199693a799dd625ec2cfa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 7 23:00:50 2017 -0500

    CDRIVER-2192 fix bulk test for sessions

 tests/test-mongoc-bulk.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 2b32a08cbdb5d44eac7b410bc11e2f03c8329a19
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 8 13:10:10 2017 -0500

    CDRIVER-2192 leak in sessions tests, part 2

 tests/test-mongoc-client-session.c | 1 +
 1 file changed, 1 insertion(+)

commit 5b1081fb23fa0376d029eb5de79fe4b2cf5d7080
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 7 14:59:45 2017 -0500

    CDRIVER-2192 implicit sessions with all commands

 src/mongoc/mongoc-change-stream.c   |  14 ++
 src/mongoc/mongoc-client-private.h  |   3 +-
 src/mongoc/mongoc-client.c          |  16 ++-
 src/mongoc/mongoc-cluster.c         |   1 +
 src/mongoc/mongoc-cmd-private.h     |   1 +
 src/mongoc/mongoc-cmd.c             |  12 ++
 src/mongoc/mongoc-cursor-cursorid.c |   4 +
 src/mongoc/mongoc-cursor-private.h  |   3 +-
 src/mongoc/mongoc-cursor.c          |  34 ++++-
 tests/test-mongoc-change-stream.c   |   6 +-
 tests/test-mongoc-client-session.c  | 275 +++++++++++++++++++++++++-----------
 11 files changed, 276 insertions(+), 93 deletions(-)

commit ca522f437147b9703a595f2aa4994c67b5771956
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 7 17:07:41 2017 -0500

    CDRIVER-2192 leak in session tests

 tests/test-mongoc-client-session.c | 1 +
 1 file changed, 1 insertion(+)

commit 2019b3910bebcd44dafeb4749a2f2c8fac61e063
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 7 15:46:27 2017 -0500

    CDRIVER-2192 fix logging in endSessions

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fc7bdc660c78dbcd42a56177fd2ef5a25cfb8903
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 7 14:01:58 2017 -0500

    CDRIVER-2192 send session's cluster time if newer

 src/mongoc/mongoc-cmd.c            | 33 +++++++++++++++++++++++++++++----
 tests/test-mongoc-client-session.c | 15 ++++++++-------
 2 files changed, 37 insertions(+), 11 deletions(-)

commit f090ca40d77d90dfc41a73faa90c325543f6339c
Author: Brian Moss <kallimachos@gmail.com>
Date:   Tue Nov 7 11:46:55 2017 +1000

    CDRIVER-2345 Update connection URL for GSSAPI auth

 doc/authentication.rst | 17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

commit bf11cd9633425b0de9226e0a897cb180b1d5ff18
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 18:24:41 2017 -0500

    CDRIVER-2192 skip cluster time tests when needed

 tests/test-libmongoc.c             | 21 ++++++++++++++++-----
 tests/test-libmongoc.h             |  2 ++
 tests/test-mongoc-client-session.c | 30 +++++++++++++++---------------
 3 files changed, 33 insertions(+), 20 deletions(-)

commit ca66f8f1fc81b2a414987be1e455c01738676902
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 11:16:31 2017 -0500

    CDRIVER-2192 store clusterTime on session

 doc/mongoc_client_session_advance_cluster_time.rst |  26 ++
 doc/mongoc_client_session_get_cluster_time.rst     |  29 +++
 doc/mongoc_client_session_t.rst                    |   2 +
 src/mongoc/mongoc-client-session-private.h         |  13 +
 src/mongoc/mongoc-client-session.c                 |  96 ++++++++
 src/mongoc/mongoc-client-session.h                 |   7 +
 src/mongoc/mongoc-cluster.c                        |  12 +-
 src/mongoc/mongoc-cmd-private.h                    |   2 +-
 src/mongoc/mongoc-cmd.c                            |  15 +-
 src/mongoc/mongoc-topology-description-private.h   |   2 -
 src/mongoc/mongoc-topology-description.c           |  21 +-
 src/mongoc/mongoc-write-command.c                  |   8 +-
 tests/test-mongoc-client-session.c                 | 273 +++++++++++++++++----
 13 files changed, 425 insertions(+), 81 deletions(-)

commit 8c9bd140f7a9da27e34fcf8fabfccd9a7491d0ad
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 11:11:00 2017 -0500

    CDRIVER-2343 optionally skip lengthy bulk tests

 tests/test-mongoc-bulk.c | 20 ++++++++++++++------
 1 file changed, 14 insertions(+), 6 deletions(-)

commit 90850d1b811aa2144a9b21e8e7007f5ad042d47b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 5 17:52:33 2017 -0500

    CDRIVER-2192 send $clusterTime in ismaster

 src/mongoc/mongoc-topology-scanner-private.h |  5 ++-
 src/mongoc/mongoc-topology-scanner.c         | 27 +++++++++++--
 src/mongoc/mongoc-topology.c                 |  5 +++
 tests/test-mongoc-cluster.c                  | 59 ++++++++++++++++++++++------
 tests/test-mongoc-collection.c               |  3 +-
 5 files changed, 80 insertions(+), 19 deletions(-)

commit 7c82183034bf564be34518caef4be2ec5d68d27b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 11:15:10 2017 -0500

    CDRIVER-2192 leak calling endSessions

 src/mongoc/mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit 0758989a5ef9f5535dc77c2a2be28d8ccc30686a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 12:38:53 2017 -0500

    CDRIVER-2331 fix wtimeout tests

 tests/test-mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3fee5397575e5f968ed543aaaec86c969b306b46
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 6 12:33:48 2017 -0500

    CDRIVER-2331 rename "with_opts" CRUD functions

 build/generate-future-functions.py                |   2 +-
 doc/errors.rst                                    |  16 +--
 doc/mongoc_client_write_command_with_opts.rst     |   2 +-
 doc/mongoc_collection_insert.rst                  |   2 +-
 doc/mongoc_collection_insert_bulk.rst             |   4 +-
 doc/mongoc_collection_insert_many.rst             |  50 ++++++++
 doc/mongoc_collection_insert_one.rst              |  47 +++++++
 doc/mongoc_collection_insert_one_with_opts.rst    |  47 -------
 doc/mongoc_collection_replace_one.rst             |  67 ++++++++++
 doc/mongoc_collection_replace_one_with_opts.rst   |  67 ----------
 doc/mongoc_collection_save.rst                    |   8 +-
 doc/mongoc_collection_t.rst                       |   9 +-
 doc/mongoc_collection_update.rst                  |   2 +-
 doc/mongoc_collection_update_many.rst             |  67 ++++++++++
 doc/mongoc_collection_update_many_with_opts.rst   |  68 ----------
 doc/mongoc_collection_update_one.rst              |  78 ++++++++++++
 doc/mongoc_collection_update_one_with_opts.rst    |  79 ------------
 doc/mongoc_collection_write_command_with_opts.rst |   2 +-
 doc/mongoc_database_write_command_with_opts.rst   |   2 +-
 doc/tutorial.rst                                  |  14 +-
 examples/example-collection-watch.c               |   3 +-
 examples/example-command-monitoring.c             |   4 +-
 examples/example-session.c                        |   2 +-
 examples/example-update.c                         |   5 +-
 examples/hello_mongoc.c                           |   3 +-
 src/mongoc/mongoc-collection.c                    | 117 +++++++++--------
 src/mongoc/mongoc-collection.h                    |   7 +-
 tests/mock_server/future-functions.c              |   8 +-
 tests/mock_server/future-functions.h              |   2 +-
 tests/test-mongoc-bulk.c                          |  27 ++--
 tests/test-mongoc-change-stream.c                 |  15 +--
 tests/test-mongoc-client-session.c                |  40 +++---
 tests/test-mongoc-client.c                        |   6 +-
 tests/test-mongoc-cluster.c                       |   4 +-
 tests/test-mongoc-collection-find.c               |   5 +-
 tests/test-mongoc-collection.c                    | 148 ++++++++++------------
 tests/test-mongoc-command-monitoring.c            |   6 +-
 tests/test-mongoc-cursor.c                        |   6 +-
 tests/test-mongoc-database.c                      |   7 +-
 tests/test-mongoc-find-and-modify.c               |   6 +-
 tests/test-mongoc-gridfs.c                        |   2 +-
 tests/test-mongoc-max-staleness.c                 |   4 +-
 tests/test-mongoc-sample-commands.c               |   3 +-
 43 files changed, 544 insertions(+), 519 deletions(-)

commit 0c5fb8f0a6533179143e58f72021fe3b5a603d62
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 09:56:36 2017 -0400

    CDRIVER-2331 finish CRUD functions with opts

 src/mongoc/mongoc-collection.h | 72 +++++++++++++++++++++++++++---------------
 1 file changed, 46 insertions(+), 26 deletions(-)

commit 06c18abd17bd73925d1004e0df82a8fd29ce3425
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 5 16:08:31 2017 -0500

    CDRIVER-2331 fix writeConcernError tests

 tests/test-mongoc-collection.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 5c8e0865e5003a1e752e1fc69701bf879790fd05
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 5 15:08:09 2017 -0500

    Revert "CDRIVER-2337 only test one atlas cluster"
    
    This reverts commit ab510ad

 .evergreen/run-auth-tests.sh | 4 ++++
 1 file changed, 4 insertions(+)

commit ab510addc17fdb4b7b9b090d69326062f19622be
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 12:17:00 2017 -0400

    CDRIVER-2337 only test one atlas cluster

 .evergreen/run-auth-tests.sh | 4 ----
 1 file changed, 4 deletions(-)

commit f98224425e0ae7f40896f42978e5c89b07ef8ab8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 11:13:56 2017 -0400

    CDRIVER-2207 deprecate mongoc_database_command

 doc/errors.rst                  |  2 +-
 doc/mongoc_database_command.rst | 13 ++++++++++++-
 examples/mongoc-ping.c          | 27 ++++++++++++---------------
 src/mongoc/mongoc-database.h    |  3 ++-
 4 files changed, 27 insertions(+), 18 deletions(-)

commit e495d249f47c438b63ee1a041ee7ac6cb36c7a21
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 11:10:58 2017 -0400

    CDRIVER-2207 test db_command_with_opts

 tests/test-mongoc-client-session.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 08db9b0cf253231ebcc6ae767ace2b10ae12bbdf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 11:04:32 2017 -0400

    CDRIVER-2331 use insert_one_with_opts in test
    
    Now that we can call "insert" with an lsid, no need to call the "insert"
    command directly.

 tests/test-mongoc-client-session.c | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

commit cb8b56cb347ef4a0c1f30500495838e6921afcd7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 10:57:48 2017 -0400

    leak in match_bson test function, try 2

 tests/test-conveniences.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 8b8b111a7bfcaa115023c69d07e0b33cada4cb76
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 10:03:59 2017 -0400

    Revert "leak in match_bson test function"
    
    This reverts commit dd465cb

 tests/test-conveniences.c | 20 +++++++++++---------
 1 file changed, 11 insertions(+), 9 deletions(-)

commit 9c11eb9c76b2877a9b29923c89afdf15f43d75b6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 08:39:22 2017 -0400

    CDRIVER-2331 use new insert function in tests
    
    # Conflicts:
    #	tests/test-mongoc-collection.c

 build/generate-future-functions.py     |   6 +-
 tests/mock_server/future-functions.c   |  26 +++---
 tests/mock_server/future-functions.h   |   6 +-
 tests/test-mongoc-bulk.c               |  34 ++++----
 tests/test-mongoc-change-stream.c      |  37 ++++++---
 tests/test-mongoc-client.c             |   8 +-
 tests/test-mongoc-cluster.c            |   8 +-
 tests/test-mongoc-collection-find.c    |   8 +-
 tests/test-mongoc-collection.c         | 148 ++++++++++++++++++---------------
 tests/test-mongoc-command-monitoring.c |   8 +-
 tests/test-mongoc-cursor.c             |  13 ++-
 tests/test-mongoc-database.c           |   8 +-
 tests/test-mongoc-find-and-modify.c    |   4 +-
 tests/test-mongoc-gridfs.c             |   7 +-
 tests/test-mongoc-max-staleness.c      |   8 +-
 tests/test-mongoc-sample-commands.c    |   4 +-
 16 files changed, 177 insertions(+), 156 deletions(-)

commit 8dae9203d37c91fd2776513c252453ab8a421c49
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 2 19:12:41 2017 -0400

    CDRIVER-2331 test new CRUD functions with lsid

 tests/test-mongoc-client-session.c | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)

commit 6d99c691c5a58f1e010b475070907bfe16aff470
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 08:38:49 2017 -0400

    CDRIVER-2331 mongoc_collection_insert_one_with_opts
    
    New insert function that accepts sessionId and other options.

 doc/errors.rst                                    |  16 +-
 doc/mongoc_client_write_command_with_opts.rst     |   2 +-
 doc/mongoc_collection_insert.rst                  |   4 +-
 doc/mongoc_collection_insert_one_with_opts.rst    |  47 +++
 doc/mongoc_collection_replace_one_with_opts.rst   |   2 +
 doc/mongoc_collection_save.rst                    |   7 +-
 doc/mongoc_collection_t.rst                       |   1 +
 doc/mongoc_collection_update_many_with_opts.rst   |   3 +-
 doc/mongoc_collection_update_one_with_opts.rst    |   3 +-
 doc/mongoc_collection_write_command_with_opts.rst |   2 +-
 doc/mongoc_database_write_command_with_opts.rst   |   2 +-
 doc/tutorial.rst                                  |  13 +-
 examples/example-collection-watch.c               |  24 +-
 examples/example-command-monitoring.c             |   4 +-
 examples/example-update.c                         |   6 +-
 examples/hello_mongoc.c                           |   4 +-
 src/mongoc/mongoc-bulk-operation.c                |  13 +-
 src/mongoc/mongoc-collection.c                    | 350 ++++++++++++++--------
 src/mongoc/mongoc-collection.h                    |  10 +-
 src/mongoc/mongoc-util-private.h                  |   3 +
 src/mongoc/mongoc-util.c                          |  53 ++++
 src/mongoc/mongoc-write-command-private.h         |   7 +-
 src/mongoc/mongoc-write-command.c                 | 111 ++++++-
 tests/test-conveniences.c                         |  65 +---
 tests/test-mongoc-collection.c                    | 241 +++++++++++++--
 tests/test-mongoc-write-commands.c                |  34 ++-
 26 files changed, 753 insertions(+), 274 deletions(-)

commit ed91ee0790940c9f80042066ee294595f1e85d51
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 09:42:15 2017 -0400

    CDRIVER-2192 session tests don't require mongos

 tests/test-mongoc-client-session.c | 2 --
 1 file changed, 2 deletions(-)

commit dd465cbac4a3b5f46a4c044054dfe5df2a4de6e3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 4 09:41:13 2017 -0400

    leak in match_bson test function

 tests/test-conveniences.c | 20 +++++++++-----------
 1 file changed, 9 insertions(+), 11 deletions(-)

commit 5cc982a6f26aeddada848e0872b7b388c5cff1d2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 3 19:25:54 2017 -0400

    unused mongoc_cmd_parts_t field "is_find"

 src/mongoc/mongoc-cmd-private.h | 1 -
 src/mongoc/mongoc-cmd.c         | 1 -
 src/mongoc/mongoc-cursor.c      | 1 -
 3 files changed, 3 deletions(-)

commit 2db194ea1d8845967dccf5a48872423103ebbed8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 3 18:53:21 2017 -0400

    CDRIVER-2337 reenable Atlas tests

 .evergreen/run-auth-tests.sh | 27 +++++++++++++--------------
 1 file changed, 13 insertions(+), 14 deletions(-)

commit 222d41277a3075313998390a681e357c169b78b3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 3 18:45:13 2017 -0400

    CDRIVER-2341 clarify session lifecycle

 doc/includes/session-lifecycle.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 24bb13123d411b6f77f9be7a298f085ac7f7cc71
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 3 18:42:14 2017 -0400

    CDRIVER-2341 crash in mongoc_set_destroy
    
    The set-item destructor should be optional. Don't call it if it's NULL.

 src/mongoc/mongoc-set.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 5f6f3c4d29c329aaa5b51b612c9d6b745a60e185
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 3 15:41:41 2017 -0400

    CDRIVER-2192 call "endSessions"

 build/generate-future-functions.py   |  9 +++++
 src/mongoc/mongoc-client-pool.c      |  6 ++++
 src/mongoc/mongoc-client-private.h   |  6 ++--
 src/mongoc/mongoc-client.c           | 70 ++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-topology-private.h |  3 ++
 src/mongoc/mongoc-topology.c         | 35 ++++++++++++++++++
 tests/mock_server/future-functions.c | 60 +++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h | 14 ++++++++
 tests/mock_server/future-value.c     | 14 ++++++++
 tests/mock_server/future-value.h     | 12 +++++++
 tests/mock_server/future.c           | 12 +++++++
 tests/mock_server/future.h           |  3 ++
 tests/mock_server/mock-server.c      | 24 +++++++------
 13 files changed, 255 insertions(+), 13 deletions(-)

commit 4e3fef6aa00516739f2e81d8d7ff3c8177ecdfc5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 2 20:51:54 2017 -0400

    CDRIVER-2192 connect, then check session timeout

 src/mongoc/mongoc-topology-description-private.h |   4 +
 src/mongoc/mongoc-topology-description.c         |  25 ++
 src/mongoc/mongoc-topology.c                     |  32 ++-
 tests/test-mongoc-client-session.c               | 296 ++++++++++++++++++++++-
 4 files changed, 344 insertions(+), 13 deletions(-)

commit fedb86275bab6ed0c2c6978359282c789c406206
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 2 20:33:44 2017 -0400

    CDRIVER-2192 error if sessions are not supported

 src/mongoc/mongoc-topology.c       |  8 ++++++
 tests/test-mongoc-client-session.c | 50 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 58 insertions(+)

commit bf388c30233d3d99bbf085ea65ce97be3b31d91b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 2 16:44:32 2017 -0400

    speed up test_getmore_read_concern_live

 tests/test-mongoc-collection.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 1b47d45ca51664fe4651a24513612169ef708a66
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 1 07:49:07 2017 -0400

    obsolete comment

 src/mongoc/mongoc-cluster.c | 1 -
 1 file changed, 1 deletion(-)

commit 8d993bd079b1eb691ac4fa1a4a0423403a18838c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 17:27:59 2017 -0400

    Revert "CDRIVER-2319 disable GSSAPI test"
    
    This reverts commit db0129bfe0243cd7671d0a5b3682982d646049e1.

 .evergreen/run-auth-tests.sh | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit f4414503c6a82af264728954f270631da5747722
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 2 14:20:00 2017 -0400

    CDRIVER-2319 don't use SASL logging callback
    
    This was only effective if tracing was enabled at compile time, and it
    had begun causing very difficult-to-diagnose crashes when automatic
    init and cleanup was disabled (which is going to be the default config
    some day).

 src/mongoc/mongoc-cyrus-private.h | 2 +-
 src/mongoc/mongoc-cyrus.c         | 7 -------
 src/mongoc/mongoc-init.c          | 7 +------
 3 files changed, 2 insertions(+), 14 deletions(-)

commit f590582e1a7d11a4527ace8fee3fcf33b5923d7a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 1 11:14:09 2017 -0400

    CDRIVER-2331 bulk tests require live server

 tests/test-mongoc-bulk.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 98968d51f9020ca6baf61181c56c4e3d63b1cd5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 1 11:00:35 2017 -0400

    CDRIVER-2331 leak in collection_info test

 tests/test-mongoc-database.c | 1 +
 1 file changed, 1 insertion(+)

commit 3242639666f9480332166c72c7efdaeda969319f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 1 08:49:16 2017 -0400

    CDRIVER-2337 disable atlas test

 .evergreen/run-auth-tests.sh | 27 ++++++++++++++-------------
 1 file changed, 14 insertions(+), 13 deletions(-)

commit 87897cb7a272eef2d52599db22f7f04a26725934
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 1 08:01:16 2017 -0400

    CDRIVER-2331 find_collections_with_opts handles NULL

 src/mongoc/mongoc-database.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 07ca040bed6d260bf462fd43666a1a50b9da8d64
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 18:04:38 2017 -0400

    CDRIVER-2321 oversized doc aborts bulk operation
    
    A bulk operation should abort after encountering an oversized document,
    even if the bulk is unordered.

 src/mongoc/mongoc-write-command.c | 12 ++---
 tests/test-mongoc-bulk.c          | 97 ++++++++++++++++++++++++++++++++++++++-
 2 files changed, 99 insertions(+), 10 deletions(-)

commit 51a4cbbc2ed84bd09b966c735fdbe4a1a8c0f5f2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 17:20:40 2017 -0400

    optionally skip slow ismaster tests

 tests/test-mongoc-topology.c | 33 ++++++++++++++++++++-------------
 1 file changed, 20 insertions(+), 13 deletions(-)

commit f5b977ed22f546d77d4fe22a81aa2570206be7cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 17:20:11 2017 -0400

    CDRIVER-2323 standard change stream examples

 tests/test-mongoc-sample-commands.c | 135 ++++++++++++++++++++++++++++++++++++
 1 file changed, 135 insertions(+)

commit c5c487c53345cacb1ddcbc56646d92680df2f71b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 15:41:17 2017 -0400

    CDRIVER-1888 mock server detects duplicate keys, try 2
    
    This reverts commit 5d880a361719df91aa5414418ee61ddcaba5a0b2.

 tests/mock_server/mock-server.c | 54 ++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 53 insertions(+), 1 deletion(-)

commit 0c7fcf4b476b79bb045a0bfae000e4325c1dd969
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 14:52:20 2017 -0400

    CDRIVER-2331 collection_names_with_opts

 build/generate-future-functions.py                 |  3 +-
 doc/mongoc_database_get_collection_names.rst       | 30 ++++-------
 ...goc_database_get_collection_names_with_opts.rst | 63 ++++++++++++++++++++++
 doc/mongoc_database_t.rst                          |  1 +
 examples/mongoc-dump.c                             |  2 +-
 src/mongoc/mongoc-database.c                       | 15 ++++--
 src/mongoc/mongoc-database.h                       |  7 ++-
 tests/mock_server/future-functions.c               | 19 ++++---
 tests/mock_server/future-functions.h               |  3 +-
 tests/test-mongoc-client-session.c                 | 13 +++++
 tests/test-mongoc-collection.c                     |  2 +-
 tests/test-mongoc-database.c                       |  9 ++--
 12 files changed, 127 insertions(+), 40 deletions(-)

commit e0b40c7d0eb2ae946749b44c64824167c8eeb4b8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 14:28:34 2017 -0400

    CDRIVER-2331 find_collections_with_opts

 doc/mongoc_database_find_collections.rst           |  13 ++-
 doc/mongoc_database_find_collections_with_opts.rst |  63 +++++++++++++
 doc/mongoc_database_t.rst                          |   1 +
 src/mongoc/mongoc-database-private.h               |   6 --
 src/mongoc/mongoc-database.c                       | 103 +++++++++++++--------
 src/mongoc/mongoc-database.h                       |   6 +-
 tests/test-mongoc-client-session.c                 |  15 +++
 tests/test-mongoc-database.c                       |  72 ++++++++++++++
 8 files changed, 232 insertions(+), 47 deletions(-)

commit 77e356e6df33471948826240e6c1109416b75a4c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 13:43:38 2017 -0400

    CDRIVER-2331 test find_collections error

 tests/test-mongoc-database.c | 64 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 64 insertions(+)

commit 79a35ba1e7edf004af4ece0016434a25304b2ddb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 30 08:58:59 2017 -0400

    ignore .githooks/

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 360c6fdf5acd8bfcaf5ab91cb0d085a4e43cd23f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 29 08:07:16 2017 -0400

    CDRIVER-2331 link to find_dbs_with_opts doc

 doc/mongoc_client_t.rst | 1 +
 1 file changed, 1 insertion(+)

commit 0b14e371c5bc14c92a03e8492a1d3bfc84ede031
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 22:30:14 2017 -0400

    don't test zlib compression with MongoDB 3.4

 .evergreen/config.yml | 24 ------------------------
 1 file changed, 24 deletions(-)

commit 834e0434e825e67bb1a0096d373c2dc9e0c7e8dd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 21:17:12 2017 -0400

    CDRIVER-2331 clean up test code

 tests/test-mongoc-client-session.c | 60 ++++++++++++++++++--------------------
 1 file changed, 29 insertions(+), 31 deletions(-)

commit 44d53a9f802feb8e4653f55fa5811796e267161a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 21:15:28 2017 -0400

    CDRIVER-2331 mongoc_client_find_databases_with_opts()

 doc/mongoc_client_find_databases_with_opts.rst | 31 ++++++++++++++++++++++++++
 src/mongoc/mongoc-client.c                     | 11 ++++++++-
 src/mongoc/mongoc-client.h                     |  6 ++++-
 tests/test-mongoc-client-session.c             | 16 +++++++++++++
 4 files changed, 62 insertions(+), 2 deletions(-)

commit b619a952c43a25685ea632facc3e9d63168219d6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 15:06:13 2017 -0400

    delete obsolete 3rd-party notice

 THIRD_PARTY_NOTICES | 12 ------------
 1 file changed, 12 deletions(-)

commit 35fb6eab5ca945ef0a469f52e6c073f17095abf7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 15:05:05 2017 -0400

    obsolete warning in aggregation example

 doc/aggregate.rst | 2 --
 1 file changed, 2 deletions(-)

commit 2ef8c95aeaee73b37d221dae908f29534c063a9f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 15:04:12 2017 -0400

    delete obsolete comment

 tests/test-mongoc-collection-find-with-opts.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 9f14b31b7310fdbc5a211cc68b212d8900ec8cfe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 15:02:14 2017 -0400

    unused mock_server_receives_gle()

 tests/mock_server/mock-server.c | 24 ------------------------
 tests/mock_server/mock-server.h |  3 ---
 2 files changed, 27 deletions(-)

commit 52dff5a2877cb28ca365e31f1b51d8ad9b50ae9c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 15:01:25 2017 -0400

    unused parameter in cluster_run_command_opquery

 src/mongoc/mongoc-cluster.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 381689eee9b5b512eb2650b4ddd47bf97127dd1f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 14:58:24 2017 -0400

    redundant functions in test framework

 tests/test-conveniences.c              | 40 ----------------------------------
 tests/test-conveniences.h              |  6 -----
 tests/test-mongoc-command-monitoring.c |  6 ++---
 tests/test-mongoc-connection-uri.c     |  4 ++--
 4 files changed, 5 insertions(+), 51 deletions(-)

commit df5eb61dae02f2a6f83aca6b5afe96a5c8a4fd08
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 14:56:28 2017 -0400

    CDRIVER-2233 remove outdated test criterion
    
    All platforms' latest server builds are now at least 3.5.12, no need to
    check this before running change stream tests.

 tests/test-mongoc-change-stream.c | 27 ++++++---------------------
 1 file changed, 6 insertions(+), 21 deletions(-)

commit 4d702f3df8cbab55732c40009a058bbbd0113fde
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 14:54:33 2017 -0400

    CDRIVER-2233 fix _mongoc_cursor_new_with_opts decl

 src/mongoc/mongoc-cursor-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ad5cdd61d4671377dd170766f895b840e8ad94cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 14:53:30 2017 -0400

    more reliable auth tests

 .evergreen/run-auth-tests.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a16ff1f8cc34048b76e44534344e8755a7d984e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 14:50:56 2017 -0400

    simplify evergreen config for testing compression

 .evergreen/config.yml                           | 11 ++---------
 orchestration_configs/servers/experimental.json | 11 -----------
 2 files changed, 2 insertions(+), 20 deletions(-)

commit 849375b8a42c236e0c17a5f88a7f7f2f88b4e696
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 19:36:34 2017 -0400

    CDRIVER-2257 fix DNS tests

 .evergreen/config.yml | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit e784642c4f5470bd50f585fbf9668b33787b76cf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 24 16:46:03 2017 -0400

    CDRIVER-2207 deprecate mongoc_client_command

 doc/mongoc_client_command.rst          | 13 +++++++++++--
 src/mongoc/mongoc-client.h             |  3 ++-
 tests/test-mongoc-client.c             |  8 ++++++++
 tests/test-mongoc-cluster.c            |  2 ++
 tests/test-mongoc-collection.c         |  3 +++
 tests/test-mongoc-command-monitoring.c |  3 +++
 tests/test-mongoc-cursor.c             |  2 ++
 7 files changed, 31 insertions(+), 3 deletions(-)

commit f2d3db31be425d047a7814357786bc235df6d5d6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 24 16:18:11 2017 -0400

    CDRIVER-2207 mongoc_client_command_with_opts
    
    Generic command function that takes arbitrary opts. Required for using
    sessions with a command that does *not* apply any read concern, write
    concern, or read preference from the mongoc_client_t.

 build/generate-future-functions.py          | 10 ++++
 doc/mongoc_client_command_with_opts.rst     | 53 ++++++++++++++++++
 doc/mongoc_client_t.rst                     |  1 +
 doc/mongoc_collection_command_with_opts.rst | 53 ++++++++++++++++++
 doc/mongoc_collection_t.rst                 |  1 +
 doc/mongoc_database_command_with_opts.rst   | 53 ++++++++++++++++++
 doc/mongoc_database_t.rst                   |  1 +
 src/mongoc/mongoc-client-private.h          |  1 +
 src/mongoc/mongoc-client.c                  | 29 +++++++++-
 src/mongoc/mongoc-client.h                  |  8 +++
 src/mongoc/mongoc-collection.c              | 24 ++++++++
 src/mongoc/mongoc-collection.h              |  7 +++
 src/mongoc/mongoc-database.c                | 22 ++++++++
 src/mongoc/mongoc-database.h                |  7 +++
 tests/mock_server/future-functions.c        | 63 +++++++++++++++++++++
 tests/mock_server/future-functions.h        | 13 +++++
 tests/test-mongoc-client-session.c          | 18 +++++-
 tests/test-mongoc-client.c                  | 87 ++++++++++++++++++++++++++++-
 18 files changed, 446 insertions(+), 5 deletions(-)

commit 320fc3f66c0f199c761221dc75e2db64d7503ce6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 24 14:28:10 2017 -0400

    CDRIVER-2331 mongoc_collection_find_indexes_with_opts

 build/generate-future-functions.py               |  4 +-
 doc/mongoc_collection_find_indexes.rst           |  7 +++
 doc/mongoc_collection_find_indexes_with_opts.rst | 32 +++++++++++++
 doc/mongoc_collection_t.rst                      |  1 +
 src/mongoc/mongoc-collection-private.h           |  3 +-
 src/mongoc/mongoc-collection.c                   | 60 ++++++++++++++++--------
 src/mongoc/mongoc-collection.h                   |  6 ++-
 tests/mock_server/future-functions.c             | 16 +++----
 tests/mock_server/future-functions.h             |  4 +-
 tests/test-mongoc-client-session.c               | 16 +++++++
 tests/test-mongoc-collection.c                   | 30 ++++++------
 11 files changed, 128 insertions(+), 51 deletions(-)

commit 5ca69643b60559c51b5383a5c5c117eeeec387c4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 23 15:44:44 2017 -0400

    CDRIVER-2331 mongoc_collection_create_bulk_operation_with_opts

 doc/bulk.rst                                       |   6 +-
 doc/mongoc_bulk_operation_execute.rst              |   2 +-
 doc/mongoc_collection_create_bulk_operation.rst    |  10 +-
 ..._collection_create_bulk_operation_with_opts.rst |  55 ++++++
 doc/mongoc_collection_insert_bulk.rst              |   4 +-
 doc/mongoc_collection_t.rst                        |   1 +
 examples/bulk/bulk-collation.c                     |   3 +-
 examples/bulk/bulk1.c                              |   2 +-
 examples/bulk/bulk2.c                              |   2 +-
 examples/bulk/bulk3.c                              |   6 +-
 examples/bulk/bulk4.c                              |   5 +-
 examples/bulk/bulk5.c                              |   4 +-
 examples/bulk/bulk6.c                              |   5 +-
 examples/doc-common-insert.c                       |   2 +-
 src/mongoc/mongoc-bulk-operation-private.h         |   1 -
 src/mongoc/mongoc-bulk-operation.c                 |   5 +-
 src/mongoc/mongoc-collection.c                     |  53 +++++-
 src/mongoc/mongoc-collection.h                     |   7 +-
 src/mongoc/mongoc-gridfs.c                         |   8 +-
 src/mongoc/mongoc-util-private.h                   |   3 +
 src/mongoc/mongoc-util.c                           |  15 ++
 tests/test-mongoc-bulk.c                           | 186 ++++++++++++++-------
 tests/test-mongoc-client-session.c                 |  84 ++++++++--
 tests/test-mongoc-collection.c                     |  12 +-
 tests/test-mongoc-command-monitoring.c             |  20 ++-
 tests/test-mongoc-cursor.c                         |   6 +-
 tests/test-mongoc-exhaust.c                        |   2 +-
 tests/test-mongoc-sample-commands.c                |  18 +-
 tests/test-mongoc-write-commands.c                 |   8 +-
 29 files changed, 406 insertions(+), 129 deletions(-)

commit 930d4bab1d967296aaa18422fba60eb8515a8a67
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 22 18:44:50 2017 -0400

    CDRIVER-2331 mongoc_client_get_database_names_with_opts

 build/generate-future-functions.py                 |  3 +-
 doc/errors.rst                                     | 44 ++++++++---------
 doc/mongoc_client_get_database_names.rst           | 30 ++++--------
 doc/mongoc_client_get_database_names_with_opts.rst | 55 ++++++++++++++++++++++
 doc/mongoc_client_t.rst                            |  1 +
 examples/mongoc-dump.c                             |  3 +-
 src/mongoc/mongoc-client.c                         | 11 ++++-
 src/mongoc/mongoc-client.h                         |  7 ++-
 tests/mock_server/future-functions.c               | 19 +++++---
 tests/mock_server/future-functions.h               |  3 +-
 tests/test-mongoc-client-session.c                 | 21 +++++++--
 tests/test-mongoc-client.c                         |  4 +-
 12 files changed, 142 insertions(+), 59 deletions(-)

commit 6b263c44b2be48a3e7ea28ab53e54b31e5133b3a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 9 10:41:56 2017 -0400

    CDRIVER-2192 mongoc_client_session_append

 CMakeLists.txt                             |   3 +-
 doc/mongoc_client_session_append.rst       |  37 +++
 doc/mongoc_client_session_t.rst            |   6 +-
 examples/Makefile.am                       |   9 +-
 examples/example-session.c                 |  74 +++--
 src/mongoc/mongoc-change-stream-private.h  |   2 +-
 src/mongoc/mongoc-change-stream.c          |  21 +-
 src/mongoc/mongoc-client-private.h         |  14 +
 src/mongoc/mongoc-client-session-private.h |  10 +-
 src/mongoc/mongoc-client-session.c         |  55 +++-
 src/mongoc/mongoc-client-session.h         |   6 +-
 src/mongoc/mongoc-client.c                 |  80 ++++-
 src/mongoc/mongoc-cluster-cyrus.c          |   3 +-
 src/mongoc/mongoc-cluster-sspi.c           |   3 +-
 src/mongoc/mongoc-cluster.c                |  21 +-
 src/mongoc/mongoc-cmd-private.h            |   2 +
 src/mongoc/mongoc-cmd.c                    |  10 +-
 src/mongoc/mongoc-collection.c             |  39 ++-
 src/mongoc/mongoc-cursor-private.h         |   1 -
 src/mongoc/mongoc-cursor.c                 |  14 +-
 src/mongoc/mongoc-set.c                    |   4 +-
 src/mongoc/mongoc-write-command-private.h  |   2 +-
 src/mongoc/mongoc-write-command.c          |  11 +-
 tests/test-mongoc-client-session.c         | 505 +++++++++++++++++++++++++++++
 tests/test-mongoc-cluster.c                |   2 +-
 25 files changed, 834 insertions(+), 100 deletions(-)

commit 75f4576a89613b08e776ea9fd5baf2323da40443
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 28 10:30:18 2017 -0400

    CDRIVER-2192 fix test_session_no_crypto

 tests/test-mongoc-client-session.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a92ce5b0e3208cb88cd6e61df5e2bda8b3b6be6a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 15 15:45:07 2017 +0200

    CDRIVER-2324 CMakeLists bundled zlib/snappy fix

 CMakeLists.txt | 93 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 46 insertions(+), 47 deletions(-)

commit 60d4fe2db1f08200c26681513206449fc40be218
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 27 15:28:58 2017 -0400

    CDRIVER-2257 parse URI options from TXT records

 doc/mongoc_uri_t.rst               |   4 +-
 src/mongoc/mongoc-client-private.h |   9 +-
 src/mongoc/mongoc-client.c         | 284 +++++++++++++++++++++++++++----------
 src/mongoc/mongoc-topology.c       |  24 ++--
 src/mongoc/mongoc-uri-private.h    |   6 +-
 src/mongoc/mongoc-uri.c            |  30 ++--
 6 files changed, 256 insertions(+), 101 deletions(-)

commit 84bbacf2cb11fb8a7549825d900c2ef3a8161bf8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 26 09:28:36 2017 -0400

    CDRIVER-2257 use latest DNS discovery tests

 .evergreen/config.yml                              |  24 +-
 .evergreen/run-srv-tests.sh                        |  32 ---
 .evergreen/run-tests.sh                            |  17 +-
 CMakeLists.txt                                     |   2 +-
 CONTRIBUTING.md                                    |   6 +
 tests/Makefile.am                                  |   3 +-
 .../initial_dns_seedlist_discovery/no-results.json |   5 +
 .../one-result-default-port.json                   |  11 +
 .../one-txt-record.json                            |  16 ++
 .../two-results-default-port.json                  |  12 +
 .../two-results-nonstandard-port.json              |  12 +
 .../two-txt-records-with-override.json             |  16 ++
 .../two-txt-records.json                           |  16 ++
 tests/json/srv/no-results.json                     |   5 -
 tests/json/srv/one-result-default-port.json        |  11 -
 tests/json/srv/two-results-default-port.json       |  12 -
 tests/json/srv/two-results-nonstandard-port.json   |  12 -
 tests/test-conveniences.c                          |   6 +-
 tests/test-conveniences.h                          |   5 +
 tests/test-libmongoc.c                             |   6 +-
 tests/test-mongoc-dns.c                            | 285 +++++++++++++++++++++
 tests/test-mongoc-srv.c                            | 224 ----------------
 22 files changed, 420 insertions(+), 318 deletions(-)

commit 106d84e2bd982337993dfb809b4ddae2f47f154d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 27 10:57:59 2017 -0400

    CDRIVER-2334 fix JSON test runner on Windows

 tests/json-test.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit 2b283ca5ae73acaa6831d03fdac86a00953620e8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 26 08:53:34 2017 -0400

    CDRIVER-2275 use res_nsearch, not res_nquery
    
    res_nsearch respects the default domain and current domain when looking
    up the SRV record, instead of requiring fully-qualified domain as
    res_nquery does.

 CMakeLists.txt                        |   2 +-
 build/autotools/FindResQuery.m4       | 104 ----------------------------------
 build/autotools/FindResSearch.m4      | 104 ++++++++++++++++++++++++++++++++++
 build/cmake/FindResQuery.cmake        |  49 ----------------
 build/cmake/FindResSearch.cmake       |  49 ++++++++++++++++
 build/cmake/Makefile.am               |   2 +-
 configure.ac                          |   2 +-
 doc/mongoc_uri_t.rst                  |   2 +-
 examples/parse_handshake_cfg.py       |   4 +-
 src/mongoc/mongoc-client.c            |  34 +++++------
 src/mongoc/mongoc-config.h.in         |  21 +++----
 src/mongoc/mongoc-handshake-private.h |   4 +-
 src/mongoc/mongoc-handshake.c         |   8 +--
 13 files changed, 193 insertions(+), 192 deletions(-)

commit 7f0071455cbb94c1927e654330ea38d03a6e210c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 26 08:40:34 2017 -0400

    CDRIVER-2267 leak in SRV logic

 src/mongoc/mongoc-topology.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit c9d6c8fc708c522eefa102a806a444d65fd1b502
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 17 18:57:19 2017 +0200

    CDRIVER-2192 server session pool
    
    Try 2: use circular doubly-linked list macros from utlist.h, rather than
    the non-circular macros. Add some BSON_ASSERTs to silence scan-build
    warnings, and correctly select which tests to run.

 doc/errors.rst                               |   2 +
 doc/includes/session-lifecycle.txt           |   4 +-
 doc/mongoc_client_session_get_lsid.rst       |  29 +++
 doc/mongoc_client_session_get_session_id.rst |  29 ---
 doc/mongoc_client_session_t.rst              |   2 +-
 src/mongoc/mongoc-client-private.h           |   9 +-
 src/mongoc/mongoc-client-session-private.h   |  16 +-
 src/mongoc/mongoc-client-session.c           |  95 ++++++--
 src/mongoc/mongoc-client-session.h           |   2 +-
 src/mongoc/mongoc-client.c                   |  14 ++
 src/mongoc/mongoc-cmd.c                      |   6 +-
 src/mongoc/mongoc-error.h                    |   3 +-
 src/mongoc/mongoc-topology-private.h         |  12 +
 src/mongoc/mongoc-topology.c                 | 105 ++++++++-
 tests/test-libmongoc.c                       |  50 ++++
 tests/test-libmongoc.h                       |   8 +
 tests/test-mongoc-client-session.c           | 339 +++++++++++++++++++++++++++
 17 files changed, 672 insertions(+), 53 deletions(-)

commit 2cd8fc7c5c0a446c0e585454af744ec91cbf15ac
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 26 07:25:40 2017 -0400

    CDRIVER-573 fix shadowed declaration

 tests/test-mongoc-cluster.c | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit c21b8863db1a521a82c5e1076a69450bee36efc1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 15 10:34:51 2017 +0200

    CDRIVER-2328 default packing for OP_MSG struct

 .evergreen/config.yml           | 17 ++++++++---------
 src/mongoc/mongoc-rpc-private.h |  2 +-
 2 files changed, 9 insertions(+), 10 deletions(-)

commit af15a77df9256ef3d65ff8c973da7a6ace0d8e25
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 25 15:05:41 2017 -0400

    CDRIVER-2192 remove WIRE_VERSION_CLUSTER_TIME

 src/mongoc/mongoc-client-private.h | 2 --
 tests/mock_server/mock-server.c    | 2 +-
 tests/test-libmongoc.c             | 2 +-
 3 files changed, 2 insertions(+), 4 deletions(-)

commit ee490a5a7cd38761c564f8ffb28c8fe756f227df
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 9 09:19:13 2017 -0400

    CDRIVER-2192 no lsid or $clusterTime with OP_QUERY
    
    Now that we've implemented OP_MSG in the mock server we can test lsid
    and $clusterTime in realistic scenarios where the driver sends them in
    an OP_MSG. Code that had sent lsid and $clusterTime with OP_QUERY is
    now dead.

 src/mongoc/mongoc-cmd.c | 47 ++++++++++-------------------------------------
 1 file changed, 10 insertions(+), 37 deletions(-)

commit 9fdaa04ab0a9d6aed28de28147421e56aaa5126b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 25 12:00:30 2017 -0400

    CDRIVER-573 update change stream test
    
    Now that a "not master" error invalidates a server connection, the
    driver no longer sends killCursors after a change stream is interrupted
    by "not master".

 tests/test-mongoc-change-stream.c | 40 ++++++---------------------------------
 1 file changed, 6 insertions(+), 34 deletions(-)

commit 69c8a8a0e1b5fdda4bd7d89b425e6b71028f361e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 25 10:06:03 2017 -0400

    CDRIVER-573 "not master" err invalidates server
    
    Server Discovery and Monitoring Spec: a "not master" or "node is
    recovering" error from any command marks the server Unknown.
    
    This has been a missing feature since we implemented SDAM in libmongoc
    1.2.0. It's now urgent to fix because Retryable Writes depends on this
    feature. Otherwise during a stepdown, the driver might try a write
    against a former primary, get a "not master" error, and try again with
    the same server. Marking it Unknown ensures we re-scan the topology.

 .../future-value.h.template                        |   1 +
 build/generate-future-functions.py                 |  11 ++
 src/mongoc/mongoc-cluster-private.h                |   7 +
 src/mongoc/mongoc-cluster.c                        |  29 ++-
 tests/mock_server/future-functions.c               |  53 ++++++
 tests/mock_server/future-functions.h               |  11 ++
 tests/mock_server/future-value.c                   |  42 +++++
 tests/mock_server/future-value.h                   |  37 ++++
 tests/mock_server/future.c                         |  36 ++++
 tests/mock_server/future.h                         |   9 +
 tests/test-mongoc-cluster.c                        | 206 +++++++++++++++++++++
 11 files changed, 441 insertions(+), 1 deletion(-)

commit b86177f9005b683d2f60038537ca046d4e571c12
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 25 10:00:47 2017 -0400

    allow more skip criteria for mock server tests

 tests/TestSuite.c | 102 +++++++++++++++++++++++++++++++++++-------------------
 tests/TestSuite.h |   4 ++-
 2 files changed, 69 insertions(+), 37 deletions(-)

commit 4f5342bcb1536e1f73494705fbb2918ef848c9cf
Merge: 1a08600 926dc12
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 24 21:51:15 2017 -0400

    Merge remote-tracking branch 'upstream/master'
    
    * upstream/master:
      ignore example-update
      CDRIVER-2308 run live tests through valgrind
      CDRIVER-2304 remove collection_update from docs
      CXX-2326 Can't disable zlib with --with-zlib=no

commit 1a08600d6e8e295da603d53b449c93d934bfc11a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 24 21:51:03 2017 -0400

    CDRIVER-2219 delete mongoc_client_command_opmsg
    
    Unused function introduced for debugging.

 src/mongoc/mongoc-client.c | 45 ---------------------------------------------
 src/mongoc/mongoc-client.h |  8 --------
 2 files changed, 53 deletions(-)

commit 926dc12c2c676260edf9ae337d8a2975f50326d2
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Wed Oct 18 10:43:36 2017 -0400

    ignore example-update

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit f9f6338ed4f6effa7bfb01f93827195ba59b40e3
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Wed Oct 18 10:43:19 2017 -0400

    CDRIVER-2308 run live tests through valgrind

 .evergreen/config.yml   | 646 +++++++++++++++++++++++++++++++++++++++++++++++-
 .evergreen/run-tests.sh |   9 +-
 tests/Makefile.am       |   2 +-
 valgrind.suppressions   |  16 ++
 4 files changed, 670 insertions(+), 3 deletions(-)

commit 33575cabc102de5cb44595a402a06524155f2774
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Oct 13 10:07:44 2017 -0400

    CDRIVER-2304 remove collection_update from docs

 doc/mongoc_collection_replace_one_with_opts.rst | 1 -
 doc/mongoc_collection_update.rst                | 2 ++
 doc/tutorial.rst                                | 6 +++---
 3 files changed, 5 insertions(+), 4 deletions(-)

commit 138001d5d9666fd22658008d30f88fa5365a5f2d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 15 15:42:50 2017 +0200

    update MongoDB download URLs

 .evergreen/download-mongodb.sh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 30efe8556ad5695f7d337e2fb9ba62a809735745
Author: Derick Rethans <github@derickrethans.nl>
Date:   Fri Oct 13 15:55:56 2017 +0100

    CXX-2326 Can't disable zlib with --with-zlib=no

 build/autotools/CheckZlib.m4 | 4 ++++
 1 file changed, 4 insertions(+)

commit 365ab96360cf98c25fa5f619713e118cbb88e03c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 15 22:41:22 2017 +0200

    CDRIVER-2328 disable clang undefined sanitizer

 .evergreen/config.yml | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 164fc951b00526343e9290f5d143bdf53f93b080
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 15 22:32:34 2017 +0200

    CDRIVER-2271 avoid duplicate BSON_STATIC_ASSERTs

 src/mongoc/mongoc-client-private.h |  4 +---
 src/mongoc/mongoc-counters.c       |  4 ++--
 src/mongoc/mongoc-iovec.h          | 13 ++++++++-----
 src/mongoc/mongoc-rpc-private.h    | 10 ++++++----
 src/tools/mongoc-stat.c            |  8 +++++---
 5 files changed, 22 insertions(+), 17 deletions(-)

commit 9adf809e86d4e5c9ee587b5e2c40863eda574c98
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 15 22:27:16 2017 +0200

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0a584f637249ce8e29e27d84bf7c5dcb3c9e3e89
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 11 17:09:38 2017 -0400

    skip change stream tests on pre-3.5.12

 tests/test-mongoc-change-stream.c | 27 +++++++++++++++++++++------
 1 file changed, 21 insertions(+), 6 deletions(-)

commit 86cb58d9122882d9b87b8b8f6503c7e466b9ce63
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 11 15:01:59 2017 -0400

    CDRIVER-2219 fix bulk error indexes with OP_MSG

 src/mongoc/mongoc-write-command.c | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

commit 35f7b1597adad408081d840b071bac681a4814dc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 11 15:00:40 2017 -0400

    CDRIVER-2259 use new maxWriteBatchSize in tests

 tests/test-mongoc-bulk.c | 51 ++++++++++++++++++++++++++++++++++--------------
 1 file changed, 36 insertions(+), 15 deletions(-)

commit e4f9bea90cc990459636dbb1b3e28201aed75500
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 14 22:06:24 2017 +0200

    CDRIVER-2328 disable USBSan test for now

 .evergreen/config.yml | 17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

commit dddc3fe4cca44f162a66670d522068bbb436b006
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 14 18:16:24 2017 +0200

    CDRIVER-2272 avoid err in BSON_STATIC_ASSERT

 src/mongoc/mongoc-client-private.h | 1 +
 1 file changed, 1 insertion(+)

commit 958a0dd8c8e2e2fd08f2cb8527b96ebb110aa5cd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 14 16:48:47 2017 +0200

    compile-unix.sh continues if mkfifo fails
    
    Useful for hand-debugging compilation errors on systems where mkfifo
    is prohibited.

 .evergreen/compile-unix.sh | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 9ebca71ec7daab454dcef959d8273500ccb1988a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 14 16:47:25 2017 +0200

    git ignore example programs

 .gitignore | 2 ++
 1 file changed, 2 insertions(+)

commit a781014f3dc953c3aa398f8a5183ded6d8b88276
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 14 16:46:30 2017 +0200

    CDRIVER-2233 better errs from change stream tests

 tests/test-mongoc-change-stream.c | 21 ++++++++++++---------
 1 file changed, 12 insertions(+), 9 deletions(-)

commit 506e36a96b713822214eda939ff31df90f1aa615
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 11 14:00:20 2017 -0400

    don't hardcode maxWriteBatchSize in bulk test
    
    The OP_MSG bulk test assumed maxWriteBatchSize is 100,000, which fails
    on past development versions of MongoDB when it was still 1000.

 tests/test-libmongoc.c   | 21 +++++++++++++++++++++
 tests/test-libmongoc.h   |  2 ++
 tests/test-mongoc-bulk.c | 11 +++++++----
 3 files changed, 30 insertions(+), 4 deletions(-)

commit 42d8a658f4e9178ce76a9af60fbfcc7b0c1aa041
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 10 09:13:45 2017 -0400

    CDRIVER-2290 OP_MSG payload type 1, big-endian fix
    
    Don't overwrite payload.sequence.size with a little-endian int32. That
    size is used later in calculations which are wrong on big-endian boxes.
    Instead, write the little-endian number to a separate field.

 .evergreen/config.yml           | 18 ++++-----
 src/mongoc/mongoc-rpc-private.h |  1 +
 src/mongoc/mongoc-rpc.c         | 88 ++++++++++++++++++++---------------------
 3 files changed, 51 insertions(+), 56 deletions(-)

commit 89c7ea10723e1fc1dc0405a26e4997a1df7af226
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Tue Oct 10 17:29:42 2017 -0400

    CDRIVER-2308 fix leaks found from live tests

 src/mongoc/mongoc-client.c          |  7 ++++---
 src/mongoc/mongoc-cluster.c         | 42 +++++++++++++++++++++----------------
 tests/test-mongoc-collection.c      | 24 ++++++++++++++-------
 tests/test-mongoc-database.c        |  4 ++--
 tests/test-mongoc-find-and-modify.c |  1 +
 tests/test-mongoc-max-staleness.c   |  1 +
 6 files changed, 48 insertions(+), 31 deletions(-)

commit 5049dc8af37078aaf2ed7afc08772ec61db66fa4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 12 10:19:04 2017 -0400

    Revert "CDRIVER-2192 server session pool"
    
    5cb9050e716f8793db25b719493783a1d6bf6524

 doc/includes/session-lifecycle.txt         |   4 +-
 src/mongoc/mongoc-client-private.h         |  10 +-
 src/mongoc/mongoc-client-session-private.h |  16 +-
 src/mongoc/mongoc-client-session.c         |  78 +-------
 src/mongoc/mongoc-client.c                 |  14 --
 src/mongoc/mongoc-cmd.c                    |  15 +-
 src/mongoc/mongoc-topology-private.h       |  12 --
 src/mongoc/mongoc-topology.c               |  96 +--------
 tests/test-libmongoc.c                     |  29 ---
 tests/test-libmongoc.h                     |   4 -
 tests/test-mongoc-client-session.c         | 309 -----------------------------
 11 files changed, 16 insertions(+), 571 deletions(-)

commit ed198434edd0dd6a967201820d9af4891cb4e9a9
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Tue Oct 10 13:43:36 2017 -0400

    CDRIVER-2205 fix wc on update_and_replace tests

 tests/test-mongoc-collection.c | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit 5f41b74f8e9e4b6e83dc0a51e4a73c5f3550e849
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 5 16:22:18 2017 -0400

    CDRIVER-2306 mock_server sends/receives OP_MSG

 tests/mock_server/mock-server.c | 105 +++++++++++++++++++++++++++++++----
 tests/mock_server/mock-server.h |   5 ++
 tests/mock_server/request.c     |  96 +++++++++++++++++++++++++++++++-
 tests/test-mongoc-cluster.c     | 119 ++++++++++++++++++++++------------------
 4 files changed, 258 insertions(+), 67 deletions(-)

commit 5cb9050e716f8793db25b719493783a1d6bf6524
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 9 11:20:32 2017 -0400

    CDRIVER-2192 server session pool

 doc/includes/session-lifecycle.txt         |   4 +-
 src/mongoc/mongoc-client-private.h         |  10 +-
 src/mongoc/mongoc-client-session-private.h |  16 +-
 src/mongoc/mongoc-client-session.c         |  78 +++++++-
 src/mongoc/mongoc-client.c                 |  14 ++
 src/mongoc/mongoc-cmd.c                    |  15 +-
 src/mongoc/mongoc-topology-private.h       |  12 ++
 src/mongoc/mongoc-topology.c               |  96 ++++++++-
 tests/test-libmongoc.c                     |  29 +++
 tests/test-libmongoc.h                     |   4 +
 tests/test-mongoc-client-session.c         | 309 +++++++++++++++++++++++++++++
 11 files changed, 571 insertions(+), 16 deletions(-)

commit b8dc5830f6632a5e66f85a5de77dee29300677b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 9 17:32:17 2017 -0400

    CDRIVER-2192 rename session header guards

 src/mongoc/mongoc-client-session-private.h | 6 +++---
 src/mongoc/mongoc-client-session.h         | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

commit cb10c2cb34542be283c5ea8a9b12ba920c18d834
Author: Alex Masterov <alex.masterow@gmail.com>
Date:   Fri Sep 15 08:02:53 2017 +0300

    Add the missing CMake LIBRESSL option

 CMakeLists.txt | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit b3c9735757e1c544250afb125f8f76d6a795c0bc
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Oct 5 15:54:36 2017 -0400

    CDRIVER-2205 test update and replace with opts

 src/mongoc/mongoc-collection.c    |   2 +
 src/mongoc/mongoc-write-concern.c |   2 +-
 tests/test-mongoc-collection.c    | 284 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 287 insertions(+), 1 deletion(-)

commit db0129bfe0243cd7671d0a5b3682982d646049e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 9 16:28:00 2017 -0400

    CDRIVER-2319 disable GSSAPI test

 .evergreen/run-auth-tests.sh | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit d8bc92cd2539677ec93b8e8f663962891da06083
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Mon Oct 9 15:31:22 2017 -0400

    add future timeout to contributing.md

 CONTRIBUTING.md | 6 ++++++
 1 file changed, 6 insertions(+)

commit 02889951229d5263766f2dde9baa3331f053395d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 9 10:38:39 2017 -0400

    CDRIVER-2192 "causally consistent" ->"causal consistency"

 NEWS                                               |  2 +-
 doc/includes/session-lifecycle.txt                 |  2 +-
 doc/mongoc_client_session_t.rst                    |  2 +-
 doc/mongoc_session_opt_t.rst                       |  4 ++--
 doc/mongoc_session_opts_get_causal_consistency.rst | 24 ++++++++++++++++++++
 ..._session_opts_get_causally_consistent_reads.rst | 24 --------------------
 doc/mongoc_session_opts_set_causal_consistency.rst | 26 ++++++++++++++++++++++
 ..._session_opts_set_causally_consistent_reads.rst | 26 ----------------------
 doc/taglist.py                                     |  2 +-
 examples/example-session.c                         |  2 +-
 src/mongoc/mongoc-client-private.h                 |  2 +-
 src/mongoc/mongoc-client-session.c                 | 14 +++++-------
 src/mongoc/mongoc-client-session.h                 |  7 +++---
 tests/test-mongoc-client-session.c                 |  6 ++---
 14 files changed, 70 insertions(+), 73 deletions(-)

commit 9fd0ef7e01ff8ab66458bd3c1f318b6088ac76fa
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Oct 6 16:44:22 2017 -0400

    CDRIVER-2233 do not inspect resumeToken in tests

 tests/test-mongoc-change-stream.c | 39 +++++++++++++++++++++++++--------------
 1 file changed, 25 insertions(+), 14 deletions(-)

commit a4fd71fc3e4ea6c7706ac5be49559a4b6d71d975
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 5 18:36:20 2017 -0400

    CDRIVER-2205 add example-update to dist tarball

 examples/Makefile.am | 5 +++++
 1 file changed, 5 insertions(+)

commit c57d6b471db0bc9973d974b0fe9337a29f3b9889
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 5 12:49:59 2017 -0400

    no need to append \0 in TestSuite.c

 tests/TestSuite.c | 2 --
 1 file changed, 2 deletions(-)

commit 2f53cc6dd198dfda07c8956aaa78d0a739847dc6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 3 12:11:16 2017 -0400

    omit comma after final test's output

 tests/TestSuite.c | 42 +++++++++++++++++++++++++++++-------------
 1 file changed, 29 insertions(+), 13 deletions(-)

commit 2a329015756b28249806e4cb40902a7e10a6d99f
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Mon Oct 2 17:57:44 2017 -0400

    CDRIVER-2205 add update with opts functions

 CMakeLists.txt                                  |   1 +
 doc/mongoc_collection_replace_one_with_opts.rst |  66 +++++++++
 doc/mongoc_collection_t.rst                     |   1 +
 doc/mongoc_collection_update_many_with_opts.rst |   8 +-
 doc/mongoc_collection_update_one_with_opts.rst  |  18 ++-
 examples/example-update.c                       |  52 +++++++
 src/mongoc/mongoc-collection.c                  | 181 +++++++++++++++++++++++-
 src/mongoc/mongoc-collection.h                  |  33 +++--
 src/mongoc/mongoc-write-command-private.h       |   9 +-
 9 files changed, 336 insertions(+), 33 deletions(-)

commit 8f0b393eb930cc86074caa43551904d25ecb0996
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 5 11:02:40 2017 -0400

    CDRIVER-2219 remove wrong assert

 src/mongoc/mongoc-cursor.c | 3 ---
 1 file changed, 3 deletions(-)

commit f4e0214e8b52759527bbb3d97dc63a722a720e0a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 2 14:48:37 2017 -0400

    CDRIVER-2219 use OP_MSG for mongoc_client_command

 src/mongoc/mongoc-cursor-cursorid.c    |   4 +-
 src/mongoc/mongoc-cursor-private.h     |   2 +-
 src/mongoc/mongoc-cursor.c             | 117 +++++++++++++++------------------
 src/mongoc/mongoc-read-prefs-private.h |   1 -
 src/mongoc/mongoc-read-prefs.c         |   5 +-
 src/mongoc/mongoc-rpc-private.h        |   1 -
 src/mongoc/mongoc-rpc.c                |  30 +--------
 7 files changed, 58 insertions(+), 102 deletions(-)

commit 569a1ecd505db6145471309313c7ebb28a139ce7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 2 13:57:46 2017 -0400

    CDRIVER-2192 don't send $clusterTime with OP_QUERY

 src/mongoc/mongoc-read-prefs.c | 22 +---------------------
 1 file changed, 1 insertion(+), 21 deletions(-)

commit 1ad4e3fbff9cc2d3f81a35629791f932ae71300e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 29 16:37:23 2017 -0400

    allow multiple conditions for skipping a test

 tests/TestSuite.c | 184 ++++++++++++++++++++++++++++++------------------------
 tests/TestSuite.h |  19 +++---
 2 files changed, 114 insertions(+), 89 deletions(-)

commit 870cf01236ed4c4e554563e1dd413bc06fbd30b9
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Tue Oct 3 10:54:37 2017 -0400

    CDRIVER-2205 add docs for new update fns

 doc/mongoc_collection_t.rst                     |  2 +
 doc/mongoc_collection_update_many_with_opts.rst | 65 +++++++++++++++++++++++
 doc/mongoc_collection_update_one_with_opts.rst  | 68 +++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h                  | 16 ++++++
 4 files changed, 151 insertions(+)

commit 78d2fbc20ef99a0dfe7fcb9082445892373f316f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 2 14:07:18 2017 -0400

    CDRIVER-2257 handle null error ptr with SRV error

 src/mongoc/mongoc-topology.c |  9 ++++++---
 tests/test-mongoc-srv.c      | 18 ++++++++++++++++++
 2 files changed, 24 insertions(+), 3 deletions(-)

commit 9a4832981974a8ee52a8131388ce4d787cb6f32b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 1 21:09:28 2017 -0400

    CDRIVER-2192 gossip replica set $clusterTime
    
    Spec change: both replica sets and mongos servers report $clusterTime.
    The driver gossips cluster time for all servers that report it, checking
    wire version but not server type.

 src/mongoc/mongoc-cmd.c        |  3 ++-
 src/mongoc/mongoc-read-prefs.c |  9 ++-------
 tests/test-libmongoc.c         | 15 +++++++++++++++
 tests/test-libmongoc.h         |  2 ++
 tests/test-mongoc-cluster.c    | 14 ++++++--------
 5 files changed, 27 insertions(+), 16 deletions(-)

commit 20f983378b7690df3a2ce26f2304b32d29244dfc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 28 09:32:10 2017 -0400

    CDRIVER-2282 test NULL error and mongoc_topology_compatible

 tests/test-mongoc-topology.c | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit 555379dc8f736e03f29ebb50ff51a7417ad4a2a4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 27 16:50:25 2017 -0400

    CDRIVER-2192 parse session timeout from ismaster

 src/mongoc/mongoc-server-description-private.h   |  2 +
 src/mongoc/mongoc-server-description.c           | 11 +++++
 src/mongoc/mongoc-topology-description-private.h |  4 ++
 src/mongoc/mongoc-topology-description.c         | 51 ++++++++++++++++++++++++
 tests/test-mongoc-sdam.c                         | 10 ++++-
 5 files changed, 77 insertions(+), 1 deletion(-)

commit 9aa5ee832f3d1fa675e1dac7869de2771aa7ad2f
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Mon Oct 2 09:48:56 2017 -0400

    CDRIVER-2233 change stream watch runs agg cmd

 examples/example-collection-watch.c       |  12 ++-
 src/mongoc/mongoc-change-stream-private.h |   4 +-
 src/mongoc/mongoc-change-stream.c         | 127 ++++++++++++++++++--------
 src/mongoc/mongoc-cmd.c                   |   4 -
 tests/test-mongoc-change-stream.c         | 143 ++++++++++++++++--------------
 5 files changed, 178 insertions(+), 112 deletions(-)

commit dcfb740e1c8cf532079ad71ee2578a9f56db65ad
Merge: 466582d a3c9f7d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 1 18:05:08 2017 -0400

    Merge remote-tracking branch 'upstream/master'
    
    * upstream/master:
      fix leak in test framework

commit 466582db2210856c847bc0c38e554acd3200902b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 1 18:05:01 2017 -0400

    fix man page image upload in evergreen

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3c9f7d04774ea5a80ea93aa894d17eb79adf6ec
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Sep 29 16:31:09 2017 -0400

    fix leak in test framework

 tests/test-libmongoc.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2ba1fdba0e256c418a5756c4f790fba042ce43b4
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Mon Sep 25 07:45:20 2017 -0400

    CDRIVER-2233 add change stream tests

 CMakeLists.txt                       |    1 +
 build/generate-future-functions.py   |   16 +
 tests/Makefile.am                    |    1 +
 tests/mock_server/future-functions.c |  111 ++++
 tests/mock_server/future-functions.h |   24 +
 tests/mock_server/future-value.c     |   14 +
 tests/mock_server/future-value.h     |   12 +
 tests/mock_server/future.c           |   12 +
 tests/mock_server/future.h           |    3 +
 tests/test-libmongoc.c               |   27 +
 tests/test-libmongoc.h               |    4 +
 tests/test-mongoc-change-stream.c    | 1036 ++++++++++++++++++++++++++++++++++
 12 files changed, 1261 insertions(+)

commit 8005a9d49683d20ea9a4a1fc7b27e2bde3f19123
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Mon Sep 18 21:19:09 2017 -0400

    CDRIVER-2233 add change stream implementation

 doc/errors.rst                            |   2 +
 src/mongoc/mongoc-change-stream-private.h |  25 ++-
 src/mongoc/mongoc-change-stream.c         | 291 ++++++++++++++++++++++++++++--
 src/mongoc/mongoc-change-stream.h         |   6 +-
 src/mongoc/mongoc-client.c                |   6 +-
 src/mongoc/mongoc-cmd-private.h           |   1 +
 src/mongoc/mongoc-cmd.c                   |   5 +
 src/mongoc/mongoc-collection.c            |  17 +-
 src/mongoc/mongoc-cursor-cursorid.c       |   2 +-
 src/mongoc/mongoc-cursor-private.h        |   8 +-
 src/mongoc/mongoc-cursor.c                |  40 ++--
 src/mongoc/mongoc-database.c              |   4 +-
 src/mongoc/mongoc-error.h                 |   2 +
 src/mongoc/mongoc-gridfs-file-list.c      |   2 +-
 src/mongoc/mongoc-gridfs.c                |   2 +-
 src/mongoc/mongoc-read-prefs.c            |   6 +-
 tests/test-mongoc-cursor.c                |   6 +-
 17 files changed, 360 insertions(+), 65 deletions(-)

commit 3428ca1fbd37c1e1096daffd36138f4977a2e86c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 27 10:28:54 2017 -0400

    mistake in write command man page

 doc/mongoc_collection_write_command_with_opts.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0f316ffa990d0eb8bd317372bf6beb98fdf14bb6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 26 17:52:00 2017 -0400

    CDRIVER-2303 no analytics in HTML by default

 doc/conf.py | 5 +++++
 1 file changed, 5 insertions(+)

commit 59877ec0f8279f363fd673009e011386ab724466
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 26 17:26:38 2017 -0400

    update CONTRIBUTING

 CONTRIBUTING.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c6ec1bdff9ca91d25a7189cb618e6daffc6d74a5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 26 09:07:44 2017 -0400

    CDRIVER-2291 re-sync SDAM spec tests

 .../monitoring/replica_set_with_no_primary.json    |   9 +-
 .../monitoring/replica_set_with_primary.json       |   9 +-
 .../monitoring/required_replica_set.json           | 290 ++++++++--------
 .../monitoring/standalone.json                     | 200 +++++------
 .../rs/compatible.json                             |  55 +++
 .../rs/discover_arbiters.json                      |  75 ++--
 .../rs/discover_passives.json                      | 146 ++++----
 .../rs/discover_primary.json                       |  71 ++--
 .../rs/discover_secondary.json                     |  73 ++--
 .../rs/discovery.json                              | 334 +++++++++---------
 .../rs/equal_electionids.json                      | 125 +++----
 .../rs/ghost_discovered.json                       |  63 ++--
 .../rs/hosts_differ_from_seeds.json                |  61 ++--
 .../rs/ls_timeout.json                             | 106 ++++++
 .../rs/member_reconfig.json                        | 124 +++----
 .../rs/member_standalone.json                      | 106 +++---
 .../rs/new_primary.json                            | 134 ++++----
 .../rs/new_primary_new_electionid.json             | 251 +++++++-------
 .../rs/new_primary_new_setversion.json             | 237 +++++++------
 .../rs/new_primary_wrong_set_name.json             | 124 +++----
 .../rs/non_rs_member.json                          |  51 +--
 .../rs/normalize_case.json                         |  89 ++---
 .../rs/null_election_id.json                       | 342 +++++++++---------
 .../rs/primary_becomes_standalone.json             |  94 ++---
 .../rs/primary_changes_set_name.json               | 104 +++---
 .../rs/primary_disconnect.json                     |  98 +++---
 .../rs/primary_disconnect_electionid.json          | 381 +++++++++++----------
 .../rs/primary_disconnect_setversion.json          | 381 +++++++++++----------
 ...ary_hint_from_secondary_with_mismatched_me.json |  66 ++++
 .../rs/primary_mismatched_me.json                  |  71 ++--
 .../rs/primary_reports_new_member.json             | 280 +++++++--------
 .../rs/primary_to_no_primary_mismatched_me.json    | 138 ++++----
 .../rs/primary_wrong_set_name.json                 |  51 +--
 .../rs/response_from_removed.json                  | 118 ++++---
 .../rs/rsother_discovered.json                     | 119 ++++---
 .../rs/sec_not_auth.json                           |  99 +++---
 .../rs/secondary_mismatched_me.json                |  71 ++--
 .../rs/secondary_wrong_set_name.json               |  53 +--
 .../rs/secondary_wrong_set_name_with_primary.json  | 128 +++----
 .../rs/setversion_without_electionid.json          | 150 ++++----
 .../rs/stepdown_change_set_name.json               | 106 +++---
 .../rs/too_new.json                                |  55 +++
 .../rs/too_old.json                                |  53 +++
 .../rs/unexpected_mongos.json                      |  45 +--
 .../rs/use_setversion_without_electionid.json      | 233 +++++++------
 .../rs/wrong_set_name.json                         |  65 ++--
 .../sharded/compatible.json                        |  46 +++
 .../sharded/ls_timeout_mongos.json                 |  87 +++++
 .../sharded/mongos_disconnect.json                 | 181 +++++-----
 .../sharded/multiple_mongoses.json                 |  81 +++--
 .../sharded/non_mongos_removed.json                |  79 +++--
 .../sharded/normalize_uri_case.json                |  43 +--
 .../sharded/too_new.json                           |  44 +++
 .../sharded/too_old.json                           |  44 +++
 .../single/compatible.json                         |  31 ++
 .../single/direct_connection_external_ip.json      |  61 ++--
 .../single/direct_connection_mongos.json           |  55 +--
 .../single/direct_connection_rsarbiter.json        |  65 ++--
 .../single/direct_connection_rsprimary.json        |  63 ++--
 .../single/direct_connection_rssecondary.json      |  65 ++--
 .../single/direct_connection_slave.json            |  53 +--
 .../single/direct_connection_standalone.json       |  53 +--
 .../single/ls_timeout_standalone.json              |  31 ++
 .../single/not_ok_response.json                    |  69 ++--
 .../single/standalone_removed.json                 |  53 +--
 .../single/too_new.json                            |  31 ++
 .../single/too_old.json                            |  29 ++
 .../single/unavailable_seed.json                   |  45 +--
 tests/test-mongoc-sdam.c                           |  42 ++-
 69 files changed, 4177 insertions(+), 3208 deletions(-)

commit 5aac7b3267cc62ec29bfdaf35fc5b467291499e8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 26 09:17:16 2017 -0400

    CDRIVER-2300 use ismaster.primary with mismatched "me"
    
    Obey a Server Discovery and Monitoring Spec update: even if the server
    address does not equal its "ismaster.me", the isMaster response's
    "primary" field should be used to update the topology description.

 src/mongoc/mongoc-topology-description.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 8458f40cdc3e5a07337402ff2b44424921943588
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 23 10:45:26 2017 -0400

    CDRIVER-2298 race in topology description test
    
    /TopologyDescription/readable_writable/pooled could fail if topology
    discovered completed before the test asserted that there were no
    writable servers.

 tests/test-mongoc-topology-description.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit deeb0958e721d9aee593ac43b739b6cfee468904
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Sep 21 09:44:18 2017 -0400

    fix typos in docs

 doc/authentication.rst                             | 2 +-
 doc/mongoc_bulk_operation_remove_one_with_opts.rst | 2 +-
 doc/mongoc_write_concern_set_wtag.rst              | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 6ff35ef154a404e4e8b05f69d4744b0901efd19a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 22 23:59:32 2017 -0400

    CDRIVER-2292 fix --with-zlib=no, part 2

 build/autotools/CheckZlib.m4 | 4 ----
 1 file changed, 4 deletions(-)

commit 6d36be92f70b7615c3d6ae5755be27702fc8cc7b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 22 22:33:11 2017 -0400

    CDRIVER-2292 fix --with-snappy/zlib=no

 build/autotools/CheckSnappy.m4 | 10 ++++++----
 build/autotools/CheckZlib.m4   | 10 ++++++----
 2 files changed, 12 insertions(+), 8 deletions(-)

commit 152881b5c0b12a8d9e33ded567bec86891a2de81
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 18 14:33:27 2017 -0400

    show backtrace after abort on evergreen

 .evergreen/compile-unix.sh         | 2 ++
 .evergreen/config.yml              | 8 ++++++++
 .evergreen/debug-core-evergreen.sh | 9 +++++++++
 .evergreen/run-auth-tests.sh       | 1 +
 .evergreen/run-srv-tests.sh        | 1 +
 .evergreen/run-tests.sh            | 1 +
 6 files changed, 22 insertions(+)

commit a4ea9fc5edfeaf84e32073f1c0e504b26c536ea8
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Sep 22 11:24:54 2017 -0400

    CDRIVER-2297: Space out parens

 build/autotools/Versions.m4 | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 79eba0b7db70ae31bcf8b6e863589432a96d932a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 21 15:26:56 2017 -0400

    CDRIVER-2295 fix mongoc_collection_aggregate example

 doc/mongoc_collection_aggregate.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9636fa314bbe44b194d383d1e8529b5bb5a26f96
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 18 15:09:50 2017 -0400

    CDRIVER-2292 respect --with-zlib/snappy=system

 build/autotools/CheckSnappy.m4              | 51 ++++++++++++++------------
 build/autotools/CheckZlib.m4                | 55 ++++++++++++++++++-----------
 build/autotools/ReadCommandLineArguments.m4 | 12 +++----
 3 files changed, 69 insertions(+), 49 deletions(-)

commit b32e3e8a06f50ad749b8480180b3abf2da7104f1
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Tue Sep 19 18:04:43 2017 -0400

    CDRIVER-2233 Fix typedef redefinition

 src/mongoc/mongoc-change-stream.c | 2 +-
 src/mongoc/mongoc-change-stream.h | 7 ++++---
 src/mongoc/mongoc-collection.h    | 2 +-
 3 files changed, 6 insertions(+), 5 deletions(-)

commit ab0088ec3debb1d832236b5553c6f4cefca8d747
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 19 14:13:44 2017 -0700

    Fix unused variable when not enabling tracing

 src/mongoc/mongoc-stream-tls-openssl.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit cf7673702aa1f03cfad5bd7e48ef8a532047cfeb
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 19 10:44:09 2017 -0700

    Downgrade TLS chatty logs to TRACE messages as apropriate

 src/mongoc/mongoc-secure-channel.c     | 18 +++++++++---------
 src/mongoc/mongoc-secure-transport.c   | 17 ++++++++---------
 src/mongoc/mongoc-stream-tls-openssl.c |  4 ++--
 3 files changed, 19 insertions(+), 20 deletions(-)

commit d1b389bccea46dbeab2573ed5dd99d3a28acfc4e
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Thu Sep 14 17:55:25 2017 -0400

    CDRIVER-2233 Add interface for change streams

 CMakeLists.txt                              |  3 ++
 doc/api.rst                                 |  1 +
 doc/mongoc_change_stream_destroy.rst        | 19 +++++++++++
 doc/mongoc_change_stream_error_document.rst | 31 ++++++++++++++++++
 doc/mongoc_change_stream_next.rst           | 33 +++++++++++++++++++
 doc/mongoc_change_stream_t.rst              | 40 ++++++++++++++++++++++
 doc/mongoc_collection_watch.rst             | 50 ++++++++++++++++++++++++++++
 examples/Makefile.am                        |  5 +++
 examples/example-collection-watch.c         | 46 ++++++++++++++++++++++++++
 src/mongoc/Makefile.am                      |  3 ++
 src/mongoc/mongoc-change-stream-private.h   | 25 ++++++++++++++
 src/mongoc/mongoc-change-stream.c           | 51 +++++++++++++++++++++++++++++
 src/mongoc/mongoc-change-stream.h           | 36 ++++++++++++++++++++
 src/mongoc/mongoc-collection.c              |  9 +++++
 src/mongoc/mongoc-collection.h              |  5 +++
 src/mongoc/mongoc.h                         |  1 +
 16 files changed, 358 insertions(+)

commit f48a5d97b1a2ab3df24a6b360ffede83ac3e4ed6
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 18 17:11:13 2017 -0700

    CDRIVER-2270 Remove duplicate fix

 src/mongoc/mongoc-topology-description.c | 4 ----
 1 file changed, 4 deletions(-)

commit 29b720bc6ae9a254753df12874299d66d1df8470
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 18 15:06:32 2017 -0700

    CDRIVER-2243 Fix merge conflicts

 src/mongoc/mongoc-collection.c | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

commit 01e2d17db085a4f9afd1ff26860aa9f18fc788ea
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 18 14:54:18 2017 -0700

    CDRIVER-2243 Fix coding standards

 src/mongoc/mongoc-client.c               | 13 ++++---------
 src/mongoc/mongoc-cursor.c               | 12 ++++--------
 src/mongoc/mongoc-database.c             | 23 +++++++++++------------
 src/mongoc/mongoc-topology-description.c |  3 ++-
 tests/mock_server/mock-server.c          | 14 +++++++-------
 5 files changed, 28 insertions(+), 37 deletions(-)

commit f3dc2922e556bab99091ed0418c3ba27201d87d0
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 18 14:53:30 2017 -0700

    CDRIVER-2243 Fix merge conflicts

 src/mongoc/mongoc-collection.c  |  1 -
 tests/mock_server/mock-server.c |  4 ++--
 tests/test-mongoc-bulk.c        | 19 ++++++++-----------
 3 files changed, 10 insertions(+), 14 deletions(-)

commit 21f088a8f956fcd9b1e2820e22ed8043d3acd1cd
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 18 14:39:58 2017 -0700

    CDRIVER-2243 Fix merge error

 src/mongoc/mongoc-collection.c    | 8 +++-----
 src/mongoc/mongoc-write-command.c | 1 +
 2 files changed, 4 insertions(+), 5 deletions(-)

commit a3c4fb65b97b7a1fc4bd412fbe4f398254137c0c
Merge: a09540c b7e228d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 18 14:26:44 2017 -0700

    Merge branch 'CDRIVER-2243-drop-2.4-support'
    
    * CDRIVER-2243-drop-2.4-support:
      CDRIVER-2243 check_n_modified is no longer needed
      CDRIVER-2243 Don't use clang to format this file
      Use WIRE_VERSION_MIN per feedback
      CDRIVER-2270 Fix possible primary
      Remove wireverions<2 tests and ensure mock server is min=2
      Default min/maxWireVersion when non provided for mock server
      Remove dead write_concern parameter
      CDRIVER-2270 _mongoc_topology_description_check_compatible doesn't allow for unknown states
      Allow error to be NULL
      CDRIVER-2243 Skip skipif, wire version is always 2 or more
      CDRIVER-2243 Drop references and tests to 2.4
      CDRIVER-2243 Bump minimum required wire protocol version
      CDRIVER-2243 Only use OP_[INSERT|UPDATE|DELETE] for w=0
      CDRIVER-2243 Remove support for omit_nModified
      CDRIVER-2243 Remove support for aggregate-not-as-cursor
      CDRIVER-2243 Drop support for system.users
      CDRIVER-2243 Stop testing on MongoDB 2.4
      CDRIVER-2243 Drop support for system.indexes
      CDRIVER-2243 Drop support for 2.4 GLE

commit a09540c704f74bf99481854b0d809a6880cd21a9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 15 05:36:47 2017 -0400

    CDRIVER-2272 properly reinit server description

 src/mongoc/mongoc-server-description-private.h |  2 -
 src/mongoc/mongoc-server-description.c         | 59 +++++++-------------------
 tests/test-mongoc-cursor.c                     |  4 +-
 tests/test-mongoc-topology.c                   |  5 +++
 4 files changed, 23 insertions(+), 47 deletions(-)

commit e86e19589294b348ef8e7c547d65babb42fb089b
Merge: fde9feb 13c4f46
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Sep 15 15:39:01 2017 -0400

    Merge pull request #441 from kevinAlbs/typofix
    
    Fix typos

commit 13c4f462b1047e01e5a958e60a2baebf450ef4cd
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Sep 15 11:26:51 2017 -0400

    Fix typos

 NEWS              | 4 ++--
 doc/aggregate.rst | 5 ++++-
 2 files changed, 6 insertions(+), 3 deletions(-)

commit fde9feb7aa429e07bc39fca8c09689f3fc1802af
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 15 06:46:02 2017 -0400

    CDRIVER-2285 check that NEWS is a UTF-8 file

 .evergreen/check-release-archive.sh | 7 +++++++
 1 file changed, 7 insertions(+)

commit f9949914ed4552b7654c1453bc21b98cf10e6f6f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 14 22:59:39 2017 -0400

    NEWS for 1.8.0

 NEWS | 19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)

commit a16e7d32222396a950fa7e758b76cefc743431db
Merge: f1ea83b 154ca5b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 14 10:22:36 2017 -0700

    Merge branch 'CDRIVER-2281-travis-broken'
    
    * CDRIVER-2281-travis-broken:
      CDRIVER-2281 Ensure we have sd before accessing it
      CDRIVER-2281 Build on osx too
      CDRIVER-2281 Improve travis debugging

commit 154ca5b4e2fe279a36f748fbf42d75898fbdf52b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 13:21:53 2017 -0700

    CDRIVER-2281 Ensure we have sd before accessing it

 src/mongoc/mongoc-cluster.c | 4 ++++
 1 file changed, 4 insertions(+)

commit a75aaa1b47565e82de32f3ea0d4fa506da0e0da1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 12:18:55 2017 -0700

    CDRIVER-2281 Build on osx too

 .travis.yml | 21 ++++++++++++++++++---
 1 file changed, 18 insertions(+), 3 deletions(-)

commit 2fa99dbaed81ebc76413fa79a6b1957caea20901
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 11:55:33 2017 -0700

    CDRIVER-2281 Improve travis debugging

 .travis.scripts/debug-core.sh | 4 ++++
 .travis.yml                   | 8 +++++++-
 2 files changed, 11 insertions(+), 1 deletion(-)

commit f1ea83b3d48f3691e7fa042bfec703762df79937
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 13 15:18:51 2017 -0400

    CDRIVER-2272 skip cursor test for now

 tests/test-mongoc-cursor.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit b7e228d830430091bc0e77b193dfc1d29a8316ce
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 11:19:25 2017 -0700

    CDRIVER-2243 check_n_modified is no longer needed

 tests/test-mongoc-bulk.c | 59 +++++++++++++-----------------------------------
 1 file changed, 16 insertions(+), 43 deletions(-)

commit 15007f41e207bbace053f87d45a75f0e7138234e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 11:13:50 2017 -0700

    CDRIVER-2243 Don't use clang to format this file

 tests/test-mongoc-sample-commands.c | 1622 ++++++++++++++---------------------
 1 file changed, 662 insertions(+), 960 deletions(-)

commit 2affcb5dc69c438cfe1c1e03a3ba908e0c28be08
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 11:05:09 2017 -0700

    Use WIRE_VERSION_MIN per feedback

 tests/test-mongoc-cursor.c           | 4 ++--
 tests/test-mongoc-topology-scanner.c | 6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 154c7202d256ab3c6fff22becf1481c53a137cc1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 09:42:20 2017 -0700

    CDRIVER-2279 Subtract the size of the clusterTime

 tests/test-mongoc-bulk.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit fd3332df421a2258c1efcf0835f0c403f21924a1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 13 08:35:49 2017 -0700

    Revert "CDRIVER-2279 temporarily skip OP_MSG test"
    
    This reverts commit 4d747ab42ed6fce195fc3d96cda534fc3299429a.

 tests/test-mongoc-bulk.c | 4 ----
 1 file changed, 4 deletions(-)

commit 4d747ab42ed6fce195fc3d96cda534fc3299429a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 12 23:02:50 2017 -0400

    CDRIVER-2279 temporarily skip OP_MSG test

 tests/test-mongoc-bulk.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 8f21723ca96c94aab5e131ec8c7ee94c9c501591
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 12 22:02:41 2017 -0400

    potential leak in _mongoc_write_opmsg

 src/mongoc/mongoc-write-command.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 5d72e5056d5def94b073413405dd74370e5aa4e5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 12 18:51:09 2017 -0400

    CDRIVER-2192 const correctness in session API

 doc/mongoc_client_session_get_opts.rst     |  2 +-
 src/mongoc/mongoc-client-session-private.h |  4 ++--
 src/mongoc/mongoc-client-session.c         | 16 ++++++++++++----
 src/mongoc/mongoc-client-session.h         |  2 +-
 src/mongoc/mongoc-client.c                 |  2 +-
 src/mongoc/mongoc-client.h                 |  2 +-
 6 files changed, 18 insertions(+), 10 deletions(-)

commit cf3ece6b49166d74a5caecabca91dd906868da68
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 11 10:41:20 2017 -0400

    CDRIVER-2192 rename mongoc_session_t to mongoc_client_session_t

 CMakeLists.txt                                     |   6 +-
 NEWS                                               |   4 +-
 doc/api.rst                                        |   4 +-
 doc/includes/session-lifecycle.txt                 |   4 +-
 doc/mongoc_client_session_destroy.rst              |  26 +++
 doc/mongoc_client_session_get_client.rst           |  24 +++
 doc/mongoc_client_session_get_opts.rst             |  29 +++
 doc/mongoc_client_session_get_session_id.rst       |  29 +++
 doc/mongoc_client_session_t.rst                    |  32 ++++
 doc/mongoc_client_start_session.rst                |   4 +-
 doc/mongoc_session_destroy.rst                     |  26 ---
 doc/mongoc_session_get_client.rst                  |  24 ---
 doc/mongoc_session_get_opts.rst                    |  29 ---
 doc/mongoc_session_get_session_id.rst              |  29 ---
 doc/mongoc_session_opt_t.rst                       |   2 +-
 doc/mongoc_session_opts_destroy.rst                |   2 +-
 doc/mongoc_session_opts_new.rst                    |   2 +-
 ..._session_opts_set_causally_consistent_reads.rst |   2 +-
 doc/mongoc_session_t.rst                           |  32 ----
 examples/example-session.c                         |   6 +-
 src/mongoc/Makefile.am                             |   6 +-
 src/mongoc/mongoc-bulk-operation-private.h         |   4 +-
 src/mongoc/mongoc-bulk-operation.c                 |   2 +-
 src/mongoc/mongoc-client-session-private.h         |  49 +++++
 src/mongoc/mongoc-client-session.c                 | 203 +++++++++++++++++++++
 src/mongoc/mongoc-client-session.h                 |  70 +++++++
 src/mongoc/mongoc-client.c                         |  10 +-
 src/mongoc/mongoc-client.h                         |   4 +-
 src/mongoc/mongoc-cmd-private.h                    |   2 +-
 src/mongoc/mongoc-cmd.c                            |   2 +-
 src/mongoc/mongoc-cursor-private.h                 |   2 +-
 src/mongoc/mongoc-session-private.h                |  49 -----
 src/mongoc/mongoc-session.c                        | 203 ---------------------
 src/mongoc/mongoc-session.h                        |  69 -------
 src/mongoc/mongoc-write-command-private.h          |   2 +-
 src/mongoc/mongoc-write-command.c                  |   4 +-
 src/mongoc/mongoc.h                                |   2 +-
 tests/Makefile.am                                  |   2 +-
 tests/test-mongoc-client-session.c                 |  34 ++++
 tests/test-mongoc-session.c                        |  34 ----
 40 files changed, 535 insertions(+), 534 deletions(-)

commit e1c3b072b984ac6c9934d57e45edbe52a137bace
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 12 18:19:22 2017 -0400

    CDRIVER-2192 code improvements, fix leaks

 doc/mongoc_client_start_session.rst       |  2 +-
 src/mongoc/mongoc-client.c                |  8 ++++----
 src/mongoc/mongoc-cluster.c               | 18 +++++++++---------
 src/mongoc/mongoc-collection.c            |  7 ++++---
 src/mongoc/mongoc-server-stream-private.h |  3 +--
 src/mongoc/mongoc-server-stream.c         | 12 +++---------
 src/mongoc/mongoc-write-command.c         | 26 ++++++++++++--------------
 7 files changed, 34 insertions(+), 42 deletions(-)

commit c6b610baecd0be48a635899e8922b0e5a6b6df7f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 8 18:53:37 2017 -0400

    CDRIVER-2192 leak in _mongoc_stream_run_ismaster

 src/mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 971bcaa0dcfebaca847b247686b3fe7b7d0773e9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 8 11:16:48 2017 -0400

    CDRIVER-2192 remove APIs from prior session spec

 CMakeLists.txt                                     |   3 +-
 doc/includes/session-lifecycle.txt                 |  13 +-
 doc/mongoc_client_start_session.rst                |   6 +-
 doc/mongoc_collection_get_session.rst              |  30 ---
 doc/mongoc_collection_t.rst                        |   1 -
 doc/mongoc_database_get_session.rst                |  30 ---
 doc/mongoc_database_t.rst                          |   1 -
 doc/mongoc_session_destroy.rst                     |   2 +-
 doc/mongoc_session_get_collection.rst              |  35 ----
 doc/mongoc_session_get_database.rst                |  33 ----
 doc/mongoc_session_get_gridfs.rst                  |  40 ----
 doc/mongoc_session_get_read_concern.rst            |  25 ---
 doc/mongoc_session_get_read_prefs.rst              |  25 ---
 doc/mongoc_session_get_write_concern.rst           |  25 ---
 doc/mongoc_session_opt_t.rst                       |   2 -
 doc/mongoc_session_opts_get_retry_writes.rst       |  26 ---
 doc/mongoc_session_opts_set_retry_writes.rst       |  27 ---
 doc/mongoc_session_read_command_with_opts.rst      |  49 -----
 ...mongoc_session_read_write_command_with_opts.rst |  58 ------
 doc/mongoc_session_t.rst                           |  15 +-
 doc/mongoc_session_write_command_with_opts.rst     |  58 ------
 doc/taglist.py                                     |   4 +-
 examples/Makefile.am                               |   9 +-
 src/mongoc/mongoc-client-private.h                 |   2 +-
 src/mongoc/mongoc-client.c                         |  16 +-
 src/mongoc/mongoc-client.h                         |   4 +-
 src/mongoc/mongoc-cluster.c                        |   5 +-
 src/mongoc/mongoc-collection-private.h             |   5 +-
 src/mongoc/mongoc-collection.c                     |  52 +----
 src/mongoc/mongoc-collection.h                     |   4 -
 src/mongoc/mongoc-cursor-private.h                 |   6 +-
 src/mongoc/mongoc-cursor.c                         |  15 +-
 src/mongoc/mongoc-database-private.h               |   5 +-
 src/mongoc/mongoc-database.c                       |  35 +---
 src/mongoc/mongoc-database.h                       |   4 -
 src/mongoc/mongoc-gridfs-file-list.c               |   3 +-
 src/mongoc/mongoc-gridfs-private.h                 |   2 -
 src/mongoc/mongoc-gridfs.c                         |   5 +-
 src/mongoc/mongoc-session-private.h                |   3 +-
 src/mongoc/mongoc-session.c                        | 217 +--------------------
 src/mongoc/mongoc-session.h                        |  69 +------
 src/mongoc/mongoc.h                                |   1 +
 tests/test-mongoc-cursor.c                         |   3 -
 tests/test-mongoc-session.c                        | 202 +------------------
 44 files changed, 67 insertions(+), 1108 deletions(-)

commit 8261e8b376e6294e25d97f2b13e701bc24c3ec69
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 8 07:51:33 2017 -0400

    CDRIVER-2219 skip mock server test that uses OP_MSG

 tests/test-mongoc-cluster.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 3e4454e947c05040c582d8b56522079cc00f0413
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Sep 10 14:46:37 2017 -0400

    CDRIVER-2192 $clusterTime fixes

 src/mongoc/mongoc-cluster.c |  9 ++++-
 src/mongoc/mongoc-cmd.c     | 83 ++++++++++++++++++++++++---------------------
 tests/test-mongoc-cluster.c |  1 -
 3 files changed, 53 insertions(+), 40 deletions(-)

commit 270666bc736a95af3491f352acdf0b9e682e26d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 2 20:56:48 2017 -0400

    CDRIVER-2192 generate and send session ids

 doc/mongoc_client_start_session.rst   |   4 +-
 doc/mongoc_session_get_session_id.rst |   6 +-
 src/mongoc/mongoc-cmd.c               |  28 ++++++
 src/mongoc/mongoc-session-private.h   |   2 +-
 src/mongoc/mongoc-session.c           |  70 +++++++++++++--
 src/mongoc/mongoc-session.h           |   2 +-
 tests/test-libmongoc.c                |   9 ++
 tests/test-libmongoc.h                |   2 +
 tests/test-mongoc-session.c           | 163 +++++++++++++++++++++++++++++++++-
 9 files changed, 269 insertions(+), 17 deletions(-)

commit 4e6ca92e9517186a737c1e7c99c6055eea9bd01c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 27 16:28:18 2017 -0400

    CDRIVER-2192 new session functions

 doc/mongoc_session_get_read_concern.rst            |  25 ++++
 doc/mongoc_session_get_read_prefs.rst              |  25 ++++
 doc/mongoc_session_get_write_concern.rst           |  25 ++++
 doc/mongoc_session_read_command_with_opts.rst      |  49 +++++++
 ...mongoc_session_read_write_command_with_opts.rst |  58 ++++++++
 doc/mongoc_session_t.rst                           |   8 +-
 doc/mongoc_session_write_command_with_opts.rst     |  58 ++++++++
 src/mongoc/mongoc-client-private.h                 |   1 +
 src/mongoc/mongoc-client.c                         |   5 +
 src/mongoc/mongoc-collection.c                     |  62 ++++++---
 src/mongoc/mongoc-database.c                       |  44 ++++--
 src/mongoc/mongoc-session.c                        | 154 ++++++++++++++++++++-
 src/mongoc/mongoc-session.h                        |  38 +++++
 13 files changed, 518 insertions(+), 34 deletions(-)

commit 31619896e524d2e5a6f75826fbaa13bb73350b73
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 26 18:09:12 2017 -0400

    sort and dedupe pages that are linked by tag

 doc/taglist.py | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 21c13d0d678d468f3cb565d150a15be841ebb90e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 17 17:00:31 2017 -0400

    CDRIVER-2192 refactor cursor option handling
    
    mongoc_collection_aggregate, in particular, was prone to merging
    options into the command body twice. And when talking with mongos, it
    was very complex to handle $query, $readPreference, and $clusterTime
    properly. The logic that merges options into a command to produce a
    command cursor is now in one place, and the functions that do so for
    mongos and mongod are now separated.

 src/mongoc/mongoc-cmd.c                       | 264 +++++++++++++++++---------
 src/mongoc/mongoc-collection.c                |  37 +---
 src/mongoc/mongoc-cursor-array.c              |   3 +-
 src/mongoc/mongoc-cursor-cursorid.c           |  14 +-
 src/mongoc/mongoc-cursor-private.h            |   1 +
 src/mongoc/mongoc-cursor.c                    |  45 ++---
 tests/test-mongoc-cluster.c                   | 216 +++++++++++++++++++++
 tests/test-mongoc-collection-find-with-opts.c |   4 +-
 tests/test-mongoc-collection.c                |   1 +
 9 files changed, 430 insertions(+), 155 deletions(-)

commit a5edc35980da6219ef9c22e99708940b3a861f1a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 26 13:50:43 2017 -0400

    better mock server errors
    
    Include the request body if possible in the error message, even if the
    mismatch is in its flags, not the body.

 tests/mock_server/request.c | 94 ++++++++++++++++++++++++++-------------------
 1 file changed, 54 insertions(+), 40 deletions(-)

commit cf1e1d1fe3b761ec30ed8738a562cda3902e34dc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 26 13:50:07 2017 -0400

    CDRIVER-2192 mock mongos returns $clusterTime

 tests/mock_server/mock-server.c | 30 ++++++++++++++++++++++++------
 1 file changed, 24 insertions(+), 6 deletions(-)

commit b0ad845e456e2ce294d3142bdf764f7442dd7585
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 25 14:41:30 2017 -0400

    CDRIVER-2192 test $clusterTime comparison

 tests/test-mongoc-cluster.c | 185 ++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 180 insertions(+), 5 deletions(-)

commit f5f16b0f9ed9fe536808b41016711c4581c70f55
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 20 13:46:24 2017 -0400

    CDRIVER-2192 parse $clusterTime from server reply

 src/mongoc/mongoc-cluster.c |   2 +
 tests/test-mongoc-cluster.c | 206 ++++++++++++++++++++++++++++++++++++++++++--
 2 files changed, 200 insertions(+), 8 deletions(-)

commit ed6ec91eace54f5a955048709c8f024f289a7d2d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 15 09:08:42 2017 -0400

    CDRIVER-2192 send $clusterTime in cursor commands
    
    Send $clusterTime to MongoDB 3.6 mongos from mongoc_collection_aggregate
    and old mongoc_client_command.

 src/mongoc/mongoc-cursor.c             | 89 ++++++++++++++++++++++++----------
 src/mongoc/mongoc-read-prefs-private.h | 21 ++++----
 src/mongoc/mongoc-read-prefs.c         | 63 ++++++++++++++++--------
 3 files changed, 118 insertions(+), 55 deletions(-)

commit 4e76b4ac877fb98693cc8bad0b200371678ed971
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 17 17:00:31 2017 -0400

    CDRIVER-2192 detect empty command body
    
    Now that we add "$clusterTime" to commands sent to MongoDB 3.6+ mongos
    servers, we must still ensure that executing an empty command "{}" is an
    error. Check in mongoc_cmd_parts_assemble that the command is not empty
    before adding "$clusterTime".

 src/mongoc/mongoc-client.c        | 34 +++++++++-----
 src/mongoc/mongoc-cluster-cyrus.c |  8 +++-
 src/mongoc/mongoc-cluster-sspi.c  |  9 +++-
 src/mongoc/mongoc-cluster.c       | 94 +++++++++++++++++++++++----------------
 src/mongoc/mongoc-cmd-private.h   |  5 ++-
 src/mongoc/mongoc-cmd.c           | 25 ++++++++---
 src/mongoc/mongoc-collection.c    | 36 ++++++++++-----
 src/mongoc/mongoc-cursor.c        |  6 ++-
 src/mongoc/mongoc-util-private.h  |  3 ++
 src/mongoc/mongoc-util.c          |  8 ++++
 src/mongoc/mongoc-write-command.c | 24 ++++++----
 11 files changed, 169 insertions(+), 83 deletions(-)

commit 095b5dbf6f58163c37a70498a4efc528632320cb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 17 17:00:31 2017 -0400

    whitespace

 src/mongoc/mongoc-write-command.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 659841f98c4fc80a2eb54c87748575a3609d0d30
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 22 23:55:46 2017 -0500

    CDRIVER-2192 add mongoc_session_t

 .gitignore                                         |   1 +
 CMakeLists.txt                                     |   4 +
 NEWS                                               |   5 +-
 doc/api.rst                                        |   2 +
 doc/includes/session-lifecycle.txt                 |  12 ++
 doc/lifecycle.rst                                  |   5 +
 doc/mongoc_client_get_gridfs.rst                   |   3 +-
 doc/mongoc_client_start_session.rst                |  40 ++++
 doc/mongoc_client_t.rst                            |   1 +
 doc/mongoc_collection_get_session.rst              |  30 +++
 doc/mongoc_collection_t.rst                        |   1 +
 doc/mongoc_database_get_session.rst                |  30 +++
 doc/mongoc_database_t.rst                          |   1 +
 doc/mongoc_session_destroy.rst                     |  26 +++
 doc/mongoc_session_get_client.rst                  |  24 +++
 doc/mongoc_session_get_collection.rst              |  35 ++++
 doc/mongoc_session_get_database.rst                |  33 ++++
 doc/mongoc_session_get_gridfs.rst                  |  40 ++++
 doc/mongoc_session_get_opts.rst                    |  29 +++
 doc/mongoc_session_get_session_id.rst              |  29 +++
 doc/mongoc_session_opt_t.rst                       |  28 +++
 doc/mongoc_session_opts_clone.rst                  |  24 +++
 doc/mongoc_session_opts_destroy.rst                |  21 ++
 ..._session_opts_get_causally_consistent_reads.rst |  24 +++
 doc/mongoc_session_opts_get_retry_writes.rst       |  26 +++
 doc/mongoc_session_opts_new.rst                    |  21 ++
 ..._session_opts_set_causally_consistent_reads.rst |  26 +++
 doc/mongoc_session_opts_set_retry_writes.rst       |  27 +++
 doc/mongoc_session_t.rst                           |  37 ++++
 examples/Makefile.am                               |   5 +
 examples/example-session.c                         | 129 ++++++++++++
 src/mongoc/Makefile.am                             |   4 +
 src/mongoc/mongoc-bulk-operation-private.h         |   2 +
 src/mongoc/mongoc-bulk-operation.c                 |   3 +
 src/mongoc/mongoc-client-private.h                 |   2 +
 src/mongoc/mongoc-client.c                         |  51 ++++-
 src/mongoc/mongoc-client.h                         |   6 +-
 src/mongoc/mongoc-cluster.c                        |  33 +++-
 src/mongoc/mongoc-cmd-private.h                    |   1 +
 src/mongoc/mongoc-cmd.c                            |  18 +-
 src/mongoc/mongoc-collection-private.h             |   6 +-
 src/mongoc/mongoc-collection.c                     |  51 +++--
 src/mongoc/mongoc-collection.h                     |   4 +-
 src/mongoc/mongoc-cursor-private.h                 |   7 +-
 src/mongoc/mongoc-cursor.c                         |  23 ++-
 src/mongoc/mongoc-database-private.h               |   7 +-
 src/mongoc/mongoc-database.c                       |  26 ++-
 src/mongoc/mongoc-database.h                       |   4 +-
 src/mongoc/mongoc-gridfs-file-list.c               |   3 +-
 src/mongoc/mongoc-gridfs-private.h                 |   2 +
 src/mongoc/mongoc-gridfs.c                         |  18 +-
 src/mongoc/mongoc-server-stream-private.h          |   2 +
 src/mongoc/mongoc-server-stream.c                  |   8 +
 src/mongoc/mongoc-session-private.h                |  50 +++++
 src/mongoc/mongoc-session.c                        | 218 +++++++++++++++++++++
 src/mongoc/mongoc-session.h                        |  96 +++++++++
 src/mongoc/mongoc-topology-description-private.h   |  10 +
 src/mongoc/mongoc-topology-description.c           |  81 ++++++++
 src/mongoc/mongoc-topology-private.h               |   4 +
 src/mongoc/mongoc-topology.c                       |  22 +++
 src/mongoc/mongoc-write-command-private.h          |   1 +
 src/mongoc/mongoc-write-command.c                  |   4 +
 tests/Makefile.am                                  |   1 +
 tests/test-libmongoc.c                             |   3 +
 tests/test-mongoc-cluster.c                        | 166 ++++++++++++++++
 tests/test-mongoc-cursor.c                         |   3 +
 tests/test-mongoc-session.c                        |  65 ++++++
 tests/test-mongoc-write-commands.c                 |   2 +
 68 files changed, 1662 insertions(+), 64 deletions(-)

commit 75fce668f1eb7e5ae12046c8b4b2a16283497721
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 11 18:05:53 2017 -0400

    read :tags: from RST pages' metadata
    
    This allows us to add a :tags: line at the top of a page to include it
    in other pages' "see also" list, without affecting how the tagged page
    itself is rendered.

 doc/taglist.py | 19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)

commit 971a3c4b308097bba42444d41511f33c80b7546f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 18 12:55:48 2017 -0400

    dead declaration in mongoc-cluster-private.h

 src/mongoc/mongoc-cluster-private.h | 4 ----
 1 file changed, 4 deletions(-)

commit 382334a61e756e5209566612360a2ca2e253eb1c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 12 19:17:32 2017 -0400

    CDRIVER-2270 compatibility logic fix, part 2

 src/mongoc/mongoc-topology-description.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit de5c129de3635cbb45dbf3cb710194f646bfa7e3
Merge: 85b5936 87e06ec
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 12 13:57:32 2017 -0700

    Merge branch 'CDRIVER-2261-examples-require-c++-linker'
    
    * CDRIVER-2261-examples-require-c++-linker:
      CDRIVER-2261 Examples require C++ linker

commit 52eae75dbf98d65eb2b7113f68de36c2f1ffdfef
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 12 11:26:02 2017 -0700

    CDRIVER-2270 Fix possible primary

 src/mongoc/mongoc-topology-description.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 85b5936826efb99697b182544669b525557796c0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 12 11:57:57 2017 -0400

    CDRIVER-2277 skip latest server tests on zSeries

 .evergreen/config.yml | 28 ++++++++++++++++------------
 1 file changed, 16 insertions(+), 12 deletions(-)

commit b2cad84bcec7022b03557750091004f29e1adc27
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 8 09:12:07 2017 -0700

    Remove wireverions<2 tests and ensure mock server is min=2

 tests/mock_server/mock-rs.c                   |   1 +
 tests/mock_server/mock-server.c               |   6 +-
 tests/test-conveniences.h                     |   1 +
 tests/test-libmongoc.c                        |   1 +
 tests/test-mongoc-async.c                     |   4 +-
 tests/test-mongoc-bulk.c                      | 203 -------------
 tests/test-mongoc-client.c                    |  44 +--
 tests/test-mongoc-cluster.c                   |  26 +-
 tests/test-mongoc-collection-find-with-opts.c |   4 +-
 tests/test-mongoc-collection.c                | 411 ++------------------------
 tests/test-mongoc-command-monitoring.c        |  52 +---
 tests/test-mongoc-cursor.c                    | 246 +--------------
 tests/test-mongoc-database.c                  |  87 ++----
 tests/test-mongoc-error.c                     |   2 +-
 tests/test-mongoc-exhaust.c                   |   2 +-
 tests/test-mongoc-find-and-modify.c           |   3 +-
 tests/test-mongoc-handshake.c                 |   3 +-
 tests/test-mongoc-read-prefs.c                |   1 +
 tests/test-mongoc-sample-commands.c           |   2 +-
 tests/test-mongoc-sdam-monitoring.c           |  18 +-
 tests/test-mongoc-topology-reconcile.c        |   9 +-
 tests/test-mongoc-topology-scanner.c          |  12 +-
 tests/test-mongoc-topology.c                  |  42 ++-
 23 files changed, 191 insertions(+), 989 deletions(-)

commit 1b6e57d6933c098782ff682364d31eb9e490d55c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 8 09:11:09 2017 -0700

    Default min/maxWireVersion when non provided for mock server

 tests/mock_server/mock-server.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 129be86c225823f9299f302bcb2c1631fb019f4e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 8 09:10:14 2017 -0700

    Remove dead write_concern parameter

 src/mongoc/mongoc-client.c                       |  2 +-
 src/mongoc/mongoc-cluster-private.h              |  1 -
 src/mongoc/mongoc-cluster.c                      |  5 --
 src/mongoc/mongoc-cursor.c                       |  9 +--
 src/mongoc/mongoc-write-command-legacy-private.h | 54 ++++++--------
 src/mongoc/mongoc-write-command-legacy.c         | 94 ++++++++++--------------
 src/mongoc/mongoc-write-command.c                |  2 -
 7 files changed, 66 insertions(+), 101 deletions(-)

commit 832bba96dd9411c38fb68439384b7f884affb0fa
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 8 09:09:22 2017 -0700

    CDRIVER-2270 _mongoc_topology_description_check_compatible doesn't allow for unknown states

 src/mongoc/mongoc-topology-description.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e2d9d0d3f814ebd1f594aa94d32fe4aa93b571d4
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 8 09:09:08 2017 -0700

    Allow error to be NULL

 src/mongoc/mongoc-topology.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 91a33bcf666117a196721a90936429631bb902fe
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 16:10:40 2017 -0700

    CDRIVER-2243 Skip skipif, wire version is always 2 or more

 tests/test-libmongoc.c                 | 18 ------------------
 tests/test-libmongoc.h                 |  4 ----
 tests/test-mongoc-client.c             | 11 ++++-------
 tests/test-mongoc-collection.c         | 11 ++++-------
 tests/test-mongoc-command-monitoring.c | 20 ++++++--------------
 tests/test-mongoc-cursor.c             | 21 +++++++--------------
 6 files changed, 21 insertions(+), 64 deletions(-)

commit d78c43a8b637a953fb568be7f250f563f1b65e47
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 16:01:25 2017 -0700

    CDRIVER-2243 Drop references and tests to 2.4

 doc/aggregate.rst                   |    9 +-
 doc/authentication.rst              |    6 +-
 doc/bulk.rst                        |   10 -
 doc/matcher.rst                     |    8 +-
 doc/mongoc_database_add_user.rst    |    2 -
 src/mongoc/mongoc-gridfs.c          |    2 -
 tests/test-mongoc-collection.c      |   56 +-
 tests/test-mongoc-cursor.c          |    7 +-
 tests/test-mongoc-sample-commands.c | 1629 +++++++++++++++++++++--------------
 9 files changed, 980 insertions(+), 749 deletions(-)

commit 4741a459708f40be0a605d866a8d4040bb0cff59
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 15:42:52 2017 -0700

    CDRIVER-2243 Bump minimum required wire protocol version

 src/mongoc/mongoc-client-private.h       | 2 +-
 src/mongoc/mongoc-topology-description.c | 5 ++++-
 2 files changed, 5 insertions(+), 2 deletions(-)

commit ce9d17b9addbb49887a83edc6250e51e1ecadce6
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 15:41:38 2017 -0700

    CDRIVER-2243 Only use OP_[INSERT|UPDATE|DELETE] for w=0

 src/mongoc/mongoc-write-command.c | 40 ++++++++++++---------------------------
 1 file changed, 12 insertions(+), 28 deletions(-)

commit 829c73b093a83dd7f6f198c2799a52eff5ba2d19
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 15:36:49 2017 -0700

    CDRIVER-2243 Remove support for omit_nModified

 src/mongoc/mongoc-write-command-private.h |   1 -
 src/mongoc/mongoc-write-command.c         |  27 +-
 tests/test-mongoc-bulk.c                  | 573 +++++++-----------------------
 tests/test-mongoc-collection.c            |   5 -
 4 files changed, 139 insertions(+), 467 deletions(-)

commit 1704f5dbfc9d8a00ca1db482ebd9fcd89245a7c7
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 15:35:18 2017 -0700

    CDRIVER-2243 Remove support for aggregate-not-as-cursor

 src/mongoc/mongoc-collection.c | 40 ++++++++++------------------------------
 1 file changed, 10 insertions(+), 30 deletions(-)

commit 013bce92235a0cca8d07816445863b0e13f3ad8c
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 15:10:43 2017 -0700

    CDRIVER-2243 Drop support for system.users

 src/mongoc/mongoc-database.c | 203 +++++--------------------------------------
 1 file changed, 22 insertions(+), 181 deletions(-)

commit 5796fba991194745fbbe9ce819e048a5a244581f
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 14:59:00 2017 -0700

    CDRIVER-2243 Stop testing on MongoDB 2.4

 .evergreen/benchmark.yml       |  12 -
 .evergreen/config.yml          | 891 -----------------------------------------
 .evergreen/download-mongodb.sh |  20 -
 3 files changed, 923 deletions(-)

commit 9e92e51c42f90a8c10af8553278c4d00fa16b9d8
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 14:58:25 2017 -0700

    CDRIVER-2243 Drop support for system.indexes

 doc/mongoc_bulk_operation_insert_with_opts.rst   |   7 +-
 doc/mongoc_collection_create_index_with_opts.rst |   3 +-
 src/mongoc/mongoc-bulk-operation.c               |   8 +-
 src/mongoc/mongoc-collection.c                   | 141 +----------------------
 src/mongoc/mongoc-util-private.h                 |   5 +-
 src/mongoc/mongoc-util.c                         |  23 ----
 tests/test-mongoc-bulk.c                         |  64 ----------
 7 files changed, 5 insertions(+), 246 deletions(-)

commit dd4addbe2aaccaba3dc8a499ff8aca8144848914
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 14:41:41 2017 -0700

    CDRIVER-2243 Drop support for 2.4 GLE

 src/mongoc/mongoc-client-private.h               |   9 +-
 src/mongoc/mongoc-client.c                       | 150 -------
 src/mongoc/mongoc-cluster.c                      |  39 --
 src/mongoc/mongoc-collection.h                   |   6 +-
 src/mongoc/mongoc-rpc-private.h                  |   3 -
 src/mongoc/mongoc-rpc.c                          |  46 --
 src/mongoc/mongoc-write-command-legacy-private.h |   7 -
 src/mongoc/mongoc-write-command-legacy.c         | 541 +----------------------
 src/mongoc/mongoc-write-command-private.h        |   3 +-
 src/mongoc/mongoc-write-command.c                |  14 +-
 src/mongoc/mongoc-write-concern-private.h        |   3 -
 src/mongoc/mongoc-write-concern.c                |  32 --
 tests/test-mongoc-write-concern.c                |  41 +-
 13 files changed, 22 insertions(+), 872 deletions(-)

commit 858c4df5f58fe70f261bd82da5fd72507e604993
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 11 12:40:23 2017 -0700

    CDRIVER-2219 Fix invalid read on error

 src/mongoc/mongoc-write-command.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit f9bf3acd42f7cc77cc679cca789687c4353afa24
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 11 12:26:51 2017 -0700

    Revert "CDRIVER-2219 REVERT ME. Disable a test failing on Windows"
    
    This reverts commit a50ec474dc62e01282a00bf5c82e4b66dbf2741c.

 tests/test-mongoc-bulk.c | 3 ---
 1 file changed, 3 deletions(-)

commit c4dd9d7c4a2814a1d22df01323a35e3e59473977
Merge: 590cdfe b2b32fc
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Sep 11 14:46:09 2017 -0400

    Merge pull request #439 from kevinAlbs/cdriver2262
    
    CDRIVER-2262 Implement database enumeration spec

commit 590cdfe1fa7d5c299db1d1ca25f8c86f7b31bde2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 11 08:48:33 2017 -0400

    CDRIVER-2270 compatibility logic fix

 src/mongoc/mongoc-topology-description.c | 3 +++
 1 file changed, 3 insertions(+)

commit 383d67d6a9593bf40596181b38af5dea3eb5f796
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 8 16:54:11 2017 -0700

    CDRIVER-2219 Fix leaks on write legacy write errors

 src/mongoc/mongoc-write-command-legacy.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit a50ec474dc62e01282a00bf5c82e4b66dbf2741c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 11 11:29:56 2017 -0700

    CDRIVER-2219 REVERT ME. Disable a test failing on Windows

 tests/test-mongoc-bulk.c | 3 +++
 1 file changed, 3 insertions(+)

commit b2b32fc1bcb39b77412a14b976770a55ee40e71d
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Mon Sep 11 09:05:04 2017 -0400

    CDRIVER-2262 Implement database enumeration spec

 src/mongoc/mongoc-client.c | 10 +++++++++-
 tests/test-mongoc-client.c | 14 ++++++++++----
 2 files changed, 19 insertions(+), 5 deletions(-)

commit 6797dbe185fb89c0593b34e654b2fcb701591904
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 11 10:42:23 2017 -0400

    CDRIVER-2234 obsolete comment

 src/mongoc/mongoc-uri.c | 1 -
 1 file changed, 1 deletion(-)

commit e2df2c006d15029df08e16d23652f01ae0ddce1f
Merge: 0c29631 7ffa3f0
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Sep 11 10:40:05 2017 -0400

    Merge pull request #438 from kevinAlbs/cdriver2234
    
    CDRIVER-2234 Add error message for write concern during URI parse

commit 7ffa3f05207555d691b162ea51b5d86ddf3bfa55
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Fri Sep 8 10:34:01 2017 -0400

    CDRIVER-2234 Add error message for write concern during URI parse

 src/mongoc/mongoc-uri.c | 26 +++++++++-------
 tests/test-mongoc-uri.c | 80 +++++++++++++++++++++++++++++++++++++++----------
 2 files changed, 81 insertions(+), 25 deletions(-)

commit 0c296315c98a2f59a6b56cae30857f937ece5539
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 8 07:50:02 2017 -0400

    CDRIVER-2257 enable pooled mongodb+srv test

 tests/test-mongoc-srv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3dc47e41fa147cc0984a54d1d75d40fbe319ae5
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 12:44:41 2017 -0700

    CDRIVER-2219 Skip OP_MSG & APM

 tests/test-mongoc-command-monitoring.c | 5 +++++
 1 file changed, 5 insertions(+)

commit a580766d64b5c9232ac348e330d2e5de328bcb0a
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 6 16:00:33 2017 -0700

    CDRIVER-2219 Implement Payload Type=1 Writes

 src/mongoc/mongoc-write-command-legacy.c  |  96 ++++----
 src/mongoc/mongoc-write-command-private.h |   6 +-
 src/mongoc/mongoc-write-command.c         | 380 +++++++++++++++++++++---------
 tests/mock_server/request.c               |  21 +-
 tests/test-mongoc-bulk.c                  | 240 +++++++++++++++++++
 5 files changed, 575 insertions(+), 168 deletions(-)

commit 77c19a5cdd77fbe4589e1a05b7d91efc1b8edf89
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 6 15:56:31 2017 -0700

    CDRIVER-2219 Use Relaxed Extended JSON to print the rpc
    
    Canonical Extended JSON is way to verbose

 src/mongoc/mongoc-rpc.c | 30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)

commit 0f12b9d2782feef0418894bcd0134c89e21a5b5e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 6 09:37:36 2017 -0700

    CDRIVER-2219 Fix offset calc for multi documents
    
    Also simplify the rpc debug helper

 src/mongoc/mongoc-rpc.c | 143 +++++++++++++++++++++++++++---------------------
 1 file changed, 80 insertions(+), 63 deletions(-)

commit 980f02b1b248c811ee29d6614ffc0f2b74745b00
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 6 09:36:32 2017 -0700

    CDRIVER-2219 Add _mongoc_buffer_append()

 src/mongoc/mongoc-buffer-private.h |  5 +++++
 src/mongoc/mongoc-buffer.c         | 40 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 45 insertions(+)

commit 7b959a10f25274bb0cf15c046809585aab07739d
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 6 09:35:26 2017 -0700

    CDRIVER-2219 Remove unused collection buffer

 src/mongoc/mongoc-collection-private.h | 2 --
 src/mongoc/mongoc-collection.c         | 4 ----
 2 files changed, 6 deletions(-)

commit 87e06ec1f3d847859c4563d5db773bdc12ef512b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 13:21:30 2017 -0700

    CDRIVER-2261 Examples require C++ linker

 CMakeLists.txt | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

commit a7e2ad129c15257aa05417c8cc1a00049617b4ba
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 13:22:25 2017 -0700

    CDRIVER-2103 Fix executable name

 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 09cde10e47858484867c3af3a25b2fb524debfff
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 7 12:46:44 2017 -0700

    CDRIVER-2268 Coverity analysis defect 102106: Double free

 src/mongoc/mongoc-cluster.c | 1 -
 1 file changed, 1 deletion(-)

commit 294976a086ce1a1d7c8dc904d8ba2503ae7e648e
Merge: 5df0b60 d773e3a
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Sep 6 16:02:22 2017 -0400

    Merge pull request #437 from kevinAlbs/cdriver2103
    
    CDRIVER-2103 Merge find-and-modify examples

commit d773e3a5f8141866f31fbdf80844fdb42a5cf7fd
Author: Kevin Albertson <kevin.albertson@10gen.com>
Date:   Wed Sep 6 15:45:15 2017 -0400

    CDRIVER-2103 Merge find-and-modify examples

 CMakeLists.txt                                     |   1 +
 doc/mongoc_find_and_modify_opts_append.rst         |   4 +-
 ..._modify_opts_set_bypass_document_validation.rst |   4 +-
 doc/mongoc_find_and_modify_opts_set_fields.rst     |   4 +-
 doc/mongoc_find_and_modify_opts_set_flags.rst      |   4 +-
 ...mongoc_find_and_modify_opts_set_max_time_ms.rst |   4 +-
 doc/mongoc_find_and_modify_opts_set_sort.rst       |   4 +-
 doc/mongoc_find_and_modify_opts_set_update.rst     |   4 +-
 doc/mongoc_find_and_modify_opts_t.rst              |  26 +-
 examples/Makefile.am                               |   8 +-
 examples/find_and_modify_with_opts/bypass.c        |  44 ---
 examples/find_and_modify_with_opts/fam.c           | 314 ++++++++++++++++++++-
 examples/find_and_modify_with_opts/fields.c        |  50 ----
 examples/find_and_modify_with_opts/flags.c         |  50 ----
 examples/find_and_modify_with_opts/opts.c          |  59 ----
 examples/find_and_modify_with_opts/sort.c          |  46 ---
 examples/find_and_modify_with_opts/update.c        |  46 ---
 17 files changed, 351 insertions(+), 321 deletions(-)

commit 5df0b60d804687c0f6278250c03c5f319cb05c85
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 31 13:57:29 2017 -0400

    CDRIVER-2257 support mongodb+srv URIs

 .evergreen/config.yml                            |  23 +
 .evergreen/run-srv-tests.sh                      |  31 ++
 CMakeLists.txt                                   |   1 +
 NEWS                                             |   8 +
 doc/mongoc_uri_get_hosts.rst                     |   3 +-
 doc/mongoc_uri_get_service.rst                   |  27 ++
 doc/mongoc_uri_t.rst                             |  22 +-
 examples/mongoc-ping.c                           |   3 +-
 src/mongoc/mongoc-client.c                       |  15 +-
 src/mongoc/mongoc-topology-description-apm.c     |   3 +-
 src/mongoc/mongoc-topology-description-private.h |   1 -
 src/mongoc/mongoc-topology-description.c         |  10 +-
 src/mongoc/mongoc-topology-scanner-private.h     |   3 +
 src/mongoc/mongoc-topology-scanner.c             |   8 +
 src/mongoc/mongoc-topology.c                     |  66 ++-
 src/mongoc/mongoc-uri.c                          |  79 +++-
 src/mongoc/mongoc-uri.h                          |   2 +
 tests/Makefile.am                                |   2 +
 tests/json-test.c                                |  47 +-
 tests/json-test.h                                |   5 +
 tests/json/connection_uri/invalid-uris.json      | 526 ++++++++++++-----------
 tests/json/srv/no-results.json                   |   5 +
 tests/json/srv/one-result-default-port.json      |  11 +
 tests/json/srv/two-results-default-port.json     |  12 +
 tests/json/srv/two-results-nonstandard-port.json |  12 +
 tests/test-libmongoc.c                           |   3 +
 tests/test-mongoc-srv.c                          | 206 +++++++++
 tests/test-mongoc-uri.c                          |  21 +
 28 files changed, 835 insertions(+), 320 deletions(-)

commit abcac919a5c91a1bf355129e89d0825dcea68cea
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 6 09:03:48 2017 -0700

    CDRIVER-2219 Add a reference to the server_stream to the mongoc_cmd_t

 src/mongoc/mongoc-client.c           | 1 +
 src/mongoc/mongoc-cluster-cyrus.c    | 3 ++-
 src/mongoc/mongoc-cluster-private.h  | 9 +++++++--
 src/mongoc/mongoc-cluster-sspi.c     | 2 +-
 src/mongoc/mongoc-cluster.c          | 7 +------
 src/mongoc/mongoc-collection.c       | 1 +
 src/mongoc/mongoc-cursor.c           | 1 +
 src/mongoc/mongoc-topology-private.h | 1 -
 tests/test-conveniences.h            | 1 +
 9 files changed, 15 insertions(+), 11 deletions(-)

commit 47edc43edf52a1f385d854b729733f7ef1836cce
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 5 16:06:07 2017 -0700

    Revert "Revert "CDRIVER-2219 Add a reference to the server_stream to the mongoc_cmd_t""
    
    This reverts commit 883636d3d1d06725ab5d9ce229be2ce5a4987e93.

 src/mongoc/mongoc-client.c          |  10 +--
 src/mongoc/mongoc-cluster-cyrus.c   |   8 ++-
 src/mongoc/mongoc-cluster-private.h |   8 +--
 src/mongoc/mongoc-cluster-sspi.c    |   8 ++-
 src/mongoc/mongoc-cluster.c         | 138 ++++++++++++++++++++++--------------
 src/mongoc/mongoc-cmd-private.h     |   5 +-
 src/mongoc/mongoc-cmd.c             |  29 +-------
 src/mongoc/mongoc-collection.c      |   6 +-
 src/mongoc/mongoc-cursor.c          |   7 +-
 src/mongoc/mongoc-write-command.c   |   3 +-
 10 files changed, 117 insertions(+), 105 deletions(-)

commit 470fb4175c02f2d03589f4ac4131faa14128e60d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 5 13:16:06 2017 -0700

    CDRIVER-2260 Fix lib ordering

 src/Makefile.am        | 3 +++
 src/mongoc/Makefile.am | 1 -
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 3659712b0e72a4d02240a777a13d2351dc573817
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 5 13:15:16 2017 -0700

    Use correct shell comment syntax

 build/autotools/CheckSnappy.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 53af5ee8e0818bde2fabc66fcda6a24bf438cd80
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 5 11:09:09 2017 -0700

    declaration of clone shadows a global declaration
    
    RHEL 6.2
    
    [2017/09/02 07:17:10.676] /usr/include/bits/sched.h:83: warning:
    shadowed declaration is here

 tests/test-mongoc-cursor.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 35ec00a9481a64f3ec0643b2c06f954192db9611
Merge: e890db8 883636d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 2 10:01:09 2017 -0400

    Merge remote-tracking branch 'upstream/master'
    
    * upstream/master:
      Revert "CDRIVER-2219 Add a reference to the server_stream to the mongoc_cmd_t"
      CDRIVER-2219 Add a reference to the server_stream to the mongoc_cmd_t
      CDRIVER-2257 Fix test syntax

commit e890db86bdaef61f646f095c1db8d11d2d0ed188
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 2 10:00:26 2017 -0400

    CDRIVER-2260 Autoconf syntax fixes

 build/autotools/CheckSnappy.m4 | 8 +++-----
 build/autotools/CheckZlib.m4   | 6 ++----
 2 files changed, 5 insertions(+), 9 deletions(-)

commit 883636d3d1d06725ab5d9ce229be2ce5a4987e93
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 1 15:49:52 2017 -0700

    Revert "CDRIVER-2219 Add a reference to the server_stream to the mongoc_cmd_t"
    
    This reverts commit 1a92d6dc942c68e3c303428aae4864b81a479b4d.

 src/mongoc/mongoc-client.c          |  10 +--
 src/mongoc/mongoc-cluster-cyrus.c   |   8 +--
 src/mongoc/mongoc-cluster-private.h |   8 ++-
 src/mongoc/mongoc-cluster-sspi.c    |   8 +--
 src/mongoc/mongoc-cluster.c         | 138 ++++++++++++++----------------------
 src/mongoc/mongoc-cmd-private.h     |   5 +-
 src/mongoc/mongoc-cmd.c             |  29 +++++++-
 src/mongoc/mongoc-collection.c      |   6 +-
 src/mongoc/mongoc-cursor.c          |   7 +-
 src/mongoc/mongoc-write-command.c   |   3 +-
 10 files changed, 105 insertions(+), 117 deletions(-)

commit 1a92d6dc942c68e3c303428aae4864b81a479b4d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 1 14:28:07 2017 -0700

    CDRIVER-2219 Add a reference to the server_stream to the mongoc_cmd_t
    
    This will make it easier to have the cmd_t construct a fully
    qualified query based on the server_stream.
    It'll also make it possible to construct a complete Payload Type 0
    and re-use it for multiple batches of with Payload Type 1

 src/mongoc/mongoc-client.c          |  10 +--
 src/mongoc/mongoc-cluster-cyrus.c   |   8 ++-
 src/mongoc/mongoc-cluster-private.h |   8 +--
 src/mongoc/mongoc-cluster-sspi.c    |   8 ++-
 src/mongoc/mongoc-cluster.c         | 138 ++++++++++++++++++++++--------------
 src/mongoc/mongoc-cmd-private.h     |   5 +-
 src/mongoc/mongoc-cmd.c             |  29 +-------
 src/mongoc/mongoc-collection.c      |   6 +-
 src/mongoc/mongoc-cursor.c          |   7 +-
 src/mongoc/mongoc-write-command.c   |   3 +-
 10 files changed, 117 insertions(+), 105 deletions(-)

commit 2b77bf60e2156bb087d70780d0bade424b03a06b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 1 14:33:37 2017 -0700

    CDRIVER-2257 Fix test syntax

 build/autotools/ReadCommandLineArguments.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 21a22353f2773e0100bb8596849ce60c9d5abcea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 1 10:44:14 2017 -0400

    CDRIVER-2213 findAndModify respects writeConcern opt

 NEWS                                      |  2 +
 examples/find_and_modify_with_opts/opts.c |  7 +++
 src/mongoc/mongoc-cmd.c                   |  9 +++-
 src/mongoc/mongoc-collection.c            | 27 ++++++------
 tests/test-mongoc-find-and-modify.c       | 71 ++++++++++++++++++++++++++++++-
 5 files changed, 102 insertions(+), 14 deletions(-)

commit 5d965f425dfd57ffac3c037caafa60f7f174e2f1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 1 04:26:10 2017 -0400

    fix SDAM spec test

 tests/test-mongoc-sdam.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 465372abd7cf5b3953f5481b366cb05eb9c42aab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 1 06:00:44 2017 -0400

    CDRIVER-2257 remove /Client/srv test

 tests/test-mongoc-client.c | 25 -------------------------
 1 file changed, 25 deletions(-)

commit 0c6354d5151d5fb5e9af8b86e91e936f2358ed9f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 1 05:03:24 2017 -0400

    CDRIVER-2257 libresolv config check sets all options

 build/cmake/FindResQuery.cmake | 6 ++++++
 1 file changed, 6 insertions(+)

commit 36ebc2e8620f082e60d3ee59e410443b2b3864f1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 29 16:08:06 2017 -0400

    CDRIVER-2257 util function to retrieve SRV records

 CMakeLists.txt                                   |  20 +-
 build/autotools/FindResQuery.m4                  | 104 +++++++++++
 build/autotools/PrintBuildConfiguration.m4       |   1 +
 build/autotools/ReadCommandLineArguments.m4      |   9 +
 build/cmake/FindResQuery.cmake                   |  43 +++++
 build/cmake/Makefile.am                          |   1 +
 build/cmake/libmongoc-1.0-config.cmake.in        |   2 +-
 build/cmake/libmongoc-static-1.0-config.cmake.in |   2 +-
 configure.ac                                     |   3 +-
 doc/mongoc_uri_t.rst                             |   2 +
 examples/parse_handshake_cfg.py                  |   5 +
 src/mongoc/Makefile.am                           |   3 +-
 src/mongoc/mongoc-client-private.h               |   3 +
 src/mongoc/mongoc-client.c                       | 227 ++++++++++++++++++++++-
 src/mongoc/mongoc-config.h.in                    |  55 ++++++
 src/mongoc/mongoc-handshake-private.h            |   5 +
 src/mongoc/mongoc-handshake.c                    |  20 ++
 src/mongoc/mongoc-host-list-private.h            |   5 +
 src/mongoc/mongoc-host-list.c                    |  34 ++++
 tests/Makefile.am                                |   1 +
 tests/test-mongoc-client.c                       |  26 +++
 21 files changed, 560 insertions(+), 11 deletions(-)

commit c2073231209f20f5eef7263e969ae69ed47a031e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 30 14:51:35 2017 -0700

    CDRIVER-2219 Add support for using Payload Type 2 in mongoc_cmd_t's

 src/mongoc/mongoc-client.c      |  5 ++++
 src/mongoc/mongoc-client.h      |  2 ++
 src/mongoc/mongoc-cluster.c     | 19 ++++++++++---
 src/mongoc/mongoc-cmd-private.h |  3 +++
 src/mongoc/mongoc-cmd.c         |  2 ++
 src/mongoc/mongoc-rpc-private.h |  2 +-
 src/mongoc/mongoc-rpc.c         | 59 +++++++++++++++++++++++++++++------------
 7 files changed, 70 insertions(+), 22 deletions(-)

commit aadefa3ad15e5b4b704953928a1ab77a2a06b16c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 30 10:57:24 2017 -0700

    CDRIVER-2259 Respect maxWriteBatchSize
    
    With OP_MSG, this will be optimized differently

 src/mongoc/mongoc-bulk-operation.c | 14 ++++----------
 1 file changed, 4 insertions(+), 10 deletions(-)

commit 62d536f59e4afe40bf3ee39c523e9a6078bba815
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 30 14:50:35 2017 -0700

    CDRIVER-2219 Simplify wire feature checks

 src/mongoc/mongoc-write-command.c | 120 +++++++++++++++++---------------------
 1 file changed, 55 insertions(+), 65 deletions(-)

commit b16b1eb9e51abb7ae603e951f6424dfa5e0ad24a
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 30 10:17:57 2017 -0700

    CDRIVER-2219 Refactor old legacy opcode writes

 CMakeLists.txt                                   |    1 +
 src/mongoc/Makefile.am                           |    2 +
 src/mongoc/mongoc-write-command-legacy-private.h |   74 ++
 src/mongoc/mongoc-write-command-legacy.c         | 1040 +++++++++++++++++++++
 src/mongoc/mongoc-write-command-private.h        |   32 +-
 src/mongoc/mongoc-write-command.c                | 1058 +---------------------
 6 files changed, 1168 insertions(+), 1039 deletions(-)

commit 4aae1cf06673b4d2ba61c0e2f01f7ca7e911e82e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 16:05:30 2017 -0700

    CDRIVER-2258 Add new auth tests to the release archive

 tests/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 582a8da177baf028adb06cf2c95422a400e8d273
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 15:03:06 2017 -0700

    CDRIVER-2258 Fix test, username is required for GSSAPI

 tests/test-mongoc-cyrus.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 3d67fe58b466be0e5383320b62e86540e56370f2
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 14:23:58 2017 -0700

    Revert "Remove unused forward declaration"
    
    This reverts commit d086642219bf937ebe595268cf92127247ffed28.

 src/mongoc/mongoc-cluster.c | 5 +++++
 1 file changed, 5 insertions(+)

commit bb7d1804bc392ddcf8b2c9a9a53a51029b2d3114
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 14:23:43 2017 -0700

    Fix function call after prototype change

 src/mongoc/mongoc-cluster.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 256129e6409e8483c2fb9d9372f79b2e8ed39c0c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 11:19:21 2017 -0700

    CDRIVER-2219 Initial OP_MSG implementation

 src/mongoc/mongoc-apm.c             |   8 +-
 src/mongoc/mongoc-client-private.h  |   4 +-
 src/mongoc/mongoc-client.c          |  37 ++++
 src/mongoc/mongoc-client.h          |   6 +
 src/mongoc/mongoc-cluster-private.h |   6 +
 src/mongoc/mongoc-cluster.c         | 366 +++++++++++++++++++++++++++---------
 src/mongoc/mongoc-cmd.c             |  35 +++-
 7 files changed, 362 insertions(+), 100 deletions(-)

commit 6aac8f5c02607a397fcef8c78474cedaf317d7c5
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 11:06:14 2017 -0700

    CDRIVER-2219 Define the new OP_MSG opcode

 src/mongoc/mongoc-opcode.h      |  2 +-
 src/mongoc/mongoc-rpc-private.h | 19 ++++++++++
 src/mongoc/mongoc-rpc.c         | 81 +++++++++++++++++++++++++++++++++++++++++
 src/mongoc/op-msg.def           |  3 +-
 tests/test-mongoc-rpc.c         | 45 -----------------------
 5 files changed, 103 insertions(+), 47 deletions(-)

commit 6b5a31304da2e0cb35bc32c5818ebca681225102
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 12:55:40 2017 -0700

    CDRIVER-2219 Add couple of missing disconnects and update arguments

 src/mongoc/mongoc-cluster.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d086642219bf937ebe595268cf92127247ffed28
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 12:51:37 2017 -0700

    Remove unused forward declaration

 src/mongoc/mongoc-cluster.c | 5 -----
 1 file changed, 5 deletions(-)

commit 53e5ed256b083165ef6098b8aea1e3f67b53e60b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 10:12:06 2017 -0700

    CDRIVER-2219 Ensure we provide the server_id so we can disconnect on failure
    
    And since we are passing the server_description around, we might
    as well simplify the hostname in the auth functions

 src/mongoc/mongoc-cluster-cyrus-private.h  |  2 +-
 src/mongoc/mongoc-cluster-cyrus.c          |  6 +--
 src/mongoc/mongoc-cluster-gssapi-private.h |  2 +-
 src/mongoc/mongoc-cluster-gssapi.c         |  2 +-
 src/mongoc/mongoc-cluster-sasl-private.h   |  2 +-
 src/mongoc/mongoc-cluster-sasl.c           |  8 ++--
 src/mongoc/mongoc-cluster-sspi-private.h   |  2 +-
 src/mongoc/mongoc-cluster-sspi.c           | 12 ++---
 src/mongoc/mongoc-cluster.c                | 70 ++++++++++++++++--------------
 9 files changed, 53 insertions(+), 53 deletions(-)

commit f3210bde6a6cc85db02ba2899980018f8fa84338
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 12:49:34 2017 -0700

    Remove commented out code

 src/mongoc/mongoc-counters.defs | 10 +---------
 1 file changed, 1 insertion(+), 9 deletions(-)

commit e6bfbc450c6b30a3b0cf88a6ba1c136688a1643f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 10:50:56 2017 -0700

    CDRIVER-2219 Make opcode counter part of scatter/gather operations

 src/mongoc/mongoc-cluster.c     | 119 ----------------------------------------
 src/mongoc/mongoc-counters.defs |  26 +++++----
 src/mongoc/mongoc-rpc.c         |  39 ++++++++++++-
 3 files changed, 51 insertions(+), 133 deletions(-)

commit 7a34ccf2d2c93cbc8862ed68549c0fbcab384fd3
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 11:02:17 2017 -0700

    CDRIVER-2219 Rename mongoc_cluster_sendv_to_server -> mongoc_cluster_legacy_rpc_sendv_to_server
    
    And clean up code formatting

 src/mongoc/mongoc-client.c          |  7 +++----
 src/mongoc/mongoc-cluster-private.h | 11 ++++++-----
 src/mongoc/mongoc-cluster.c         | 13 +++++++------
 src/mongoc/mongoc-cursor.c          | 12 ++++++------
 src/mongoc/mongoc-write-command.c   |  6 +++---
 5 files changed, 25 insertions(+), 24 deletions(-)

commit 190b422c73d258575cf3ad44ad744030b08b2a64
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 10:43:57 2017 -0700

    CDRIVER-2219 Make the command name part of the mongoc_cmd_t

 src/mongoc/mongoc-cmd-private.h |  4 ++++
 src/mongoc/mongoc-cmd.c         | 24 ++++++++++++++++++++++++
 2 files changed, 28 insertions(+)

commit d35a67a404e3311257b7ad331e4f12d69ce5ec04
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 10:40:24 2017 -0700

    CDRIVER-2219 Remove compression check as we support noop compressor too

 src/mongoc/mongoc-cluster.c                    | 22 ++--------------------
 src/mongoc/mongoc-server-description-private.h |  2 --
 src/mongoc/mongoc-server-description.c         | 12 ++----------
 src/mongoc/mongoc-server-description.h         |  2 --
 4 files changed, 4 insertions(+), 34 deletions(-)

commit fcfd93a437459a0ae6f42254de72667daca7a70e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 10:32:55 2017 -0700

    CDRIVER-2219 Add support for 'noop' compression
    
    Makes it easier to test for and develop against.

 src/mongoc/mongoc-compression.c | 31 ++++++++++++++++++++++++-------
 1 file changed, 24 insertions(+), 7 deletions(-)

commit 4e8848841e826ac1934fa854b5a14a91d5eb118c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 23 15:56:41 2017 -0700

    CDRIVER-2258 Import authentication spec tests

 src/mongoc/mongoc-uri.c                |  22 ++-
 tests/json/auth/connection-string.json | 291 +++++++++++++++++++++++++++++++++
 tests/test-mongoc-connection-uri.c     |   3 +
 tests/test-mongoc-uri.c                |  31 ++--
 4 files changed, 330 insertions(+), 17 deletions(-)

commit f1006e059c29c7652b51bd1e095f289ccbba4250
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 11:35:51 2017 -0700

    Bump current version

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9cc67594e074665802f37913f76f9e83cdffe574
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 11:35:29 2017 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ba46b5e68f9563f324a1a68caa7a242ffdb35453
Merge: 759c969 8fb2e79
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 11:13:30 2017 -0700

    Merge branch 'master' of github.com:mongodb/mongo-c-driver
    
    * 'master' of github.com:mongodb/mongo-c-driver:
      typo in mongoc_uri_t.rst
      typo in mongoc-config.h
      CDRIVER-2252 leak in mongoc_client_kill_cursors

commit 759c969c76de708b41e4cbb54b843ed79ca3b43d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 11:12:34 2017 -0700

    Always abort on failure in mock tests

 tests/TestSuite.c           | 1 +
 tests/mock_server/request.c | 1 -
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 9499b6a8f131a3d6414ee5658734a40a03b6a3ca
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 11:07:04 2017 -0700

    CDRIVER-2219 Fix couple of leaks and opcode expectations

 tests/mock_server/request.c    |  1 +
 tests/test-mongoc-bulk.c       |  3 +++
 tests/test-mongoc-client.c     |  5 ++++-
 tests/test-mongoc-collection.c | 16 +++++++++-------
 4 files changed, 17 insertions(+), 8 deletions(-)

commit 8fb2e7925698f85760d0e7fc4cdb4d641d4ff7a7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 29 11:22:42 2017 -0400

    typo in mongoc_uri_t.rst

 doc/mongoc_uri_t.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 50deb00fe6d40afe2f3c4553a78a474a4ae7c906
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 29 11:22:28 2017 -0400

    typo in mongoc-config.h

 src/mongoc/mongoc-config.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f18c8660d5fd4d551d0ecd51a4167388e74f748e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 29 11:04:37 2017 -0400

    CDRIVER-2252 leak in mongoc_client_kill_cursors
    
    Very minor leak: the topology must include incompatible servers, so no
    operations will succeed in any case, and the application must call the
    deprecated and useless mongoc_client_kill_cursors function repeatedly.

 src/mongoc/mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit a3abe9de7017c92723c1c26b33199746549b6ebb
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 08:58:09 2017 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c4f135d97797248404570505f80d013d9d02bdf7
Merge: ade806b ba5e96e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 29 08:57:42 2017 -0700

    Merge branch 'CDRIVER-2230-end-solaris'
    
    * CDRIVER-2230-end-solaris:
      CDRIVER-2230 End Official Solaris Support

commit ade806b7f182329cbf7511a49941cd8032d79715
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 25 19:52:32 2017 -0400

    clear error in mongoc_cluster_stream_for_server

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 74600b68eb7c6293c962eab752e114f4d69446db
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 24 16:49:18 2017 -0400

    CDRIVER-2237 re-check servers after network errors
    
    Obeying the Server Discovery and Monitoring Spec, mark a server Unknown
    after any network besides a timeout, re-check the server before using it
    again.

 src/mongoc/mongoc-cluster-private.h |  8 +++--
 src/mongoc/mongoc-cluster.c         | 67 ++++++++++++++++++++++++++-----------
 src/mongoc/mongoc-cursor.c          |  2 +-
 tests/test-mongoc-client.c          | 16 +++++----
 tests/test-mongoc-cluster.c         | 12 +++++++
 tests/test-mongoc-topology.c        | 43 ++++++++++++++----------
 6 files changed, 101 insertions(+), 47 deletions(-)

commit 7d24183ab5794b51a156911ea9cb49cfd887c5bb
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 13:48:29 2017 -0700

    CDRIVER-2250 nModified is not available in MongoDB 2.4

 tests/test-mongoc-collection.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 32442ad23a0c28b9eab7c74643bdd50946e084dc
Merge: e66b022 cee8946
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 25 13:11:39 2017 -0700

    Merge branch 'CDRIVER-2250-null-value-in-strings'
    
    * CDRIVER-2250-null-value-in-strings:
      CDRIVER-2250 Cannot insert strings with null bytes

commit e66b022948a4ada936628e75a662daf6c913c22e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 12:07:14 2017 -0400

    CDRIVER-2237 distinguish network timeout and error

 NEWS                                            |   1 +
 doc/mongoc_stream_t.rst                         |   1 +
 doc/mongoc_stream_timed_out.rst                 |  22 +++++
 src/mongoc/mongoc-errno-private.h               |   3 +
 src/mongoc/mongoc-socket.c                      | 102 +++++++++++++-----------
 src/mongoc/mongoc-stream-buffered.c             |  10 +++
 src/mongoc/mongoc-stream-socket.c               |  18 ++++-
 src/mongoc/mongoc-stream-tls-libressl.c         |  11 +++
 src/mongoc/mongoc-stream-tls-openssl.c          |  11 +++
 src/mongoc/mongoc-stream-tls-secure-channel.c   |  10 +++
 src/mongoc/mongoc-stream-tls-secure-transport.c |  11 +++
 src/mongoc/mongoc-stream.c                      |  11 +++
 src/mongoc/mongoc-stream.h                      |   5 +-
 tests/debug-stream.c                            |   9 +++
 tests/test-mongoc-socket.c                      |  66 +++++++++++----
 15 files changed, 226 insertions(+), 65 deletions(-)

commit cee8946363eb9286eea6b9191350343965cdaadd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 24 09:50:53 2017 -0700

    CDRIVER-2250 Cannot insert strings with null bytes

 src/mongoc/mongoc-util.c       |  8 ++--
 tests/test-mongoc-collection.c | 84 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 89 insertions(+), 3 deletions(-)

commit 12e643af657f5ece3ef9a800fa1d5231160add13
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 07:09:17 2017 -0400

    CDRIVER-2081 use select() on Windows
    
    WSAPoll doesn't detect connection resets, and forces us to wait for a
    timeout on Windows even when the server actively refused the connection.
    Use select() instead: it detects resets, and on Windows doesn't have the
    maximum file descriptor limit it has on Unix.
    
    daniel.haxx.se/blog/2012/10/10/wsapoll-is-broken
    msdn.microsoft.com/en-us/library/windows/desktop/ms740142.aspx

 src/mongoc/mongoc-socket.c           | 99 +++++++++++++++++++++++++++---------
 tests/test-mongoc-topology-scanner.c |  7 +--
 2 files changed, 76 insertions(+), 30 deletions(-)

commit b48a0dabedfd9b026149cc0e3aa7330b44bd23aa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 07:05:49 2017 -0400

    better ASSERT_CONTAINS output

 tests/TestSuite.h | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit 32f14324209609630540da2babbcd6ee3b273960
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 07:05:29 2017 -0400

    fix mongoc_socket_poll comment block

 src/mongoc/mongoc-socket.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 4a678ac36b043328a9d74587ba43f601b51010ba
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 23 10:24:07 2017 -0700

    Do not redownload mongodb if we have it already
    
    Makes running this on localhost annoying :)

 .evergreen/download-mongodb.sh | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 6e86dcbef39dc4cda66656774a48108e7b65a7f0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 12:16:33 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b9f2ff2426784362b9521a72261c1470013a8101
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 12:16:01 2017 -0400

    CDRIVER-2249 don't set maintainer flags with MSVC
    
    MSVC accepts "-Wall" but it results in thousands of spurious warnings.
    It doesn't accept any other GCC-style flags like "-Wformat", so CMake
    wastes time checking them all. To solve both problems, just skip the
    maintainer flags configuration with MSVC.

 build/cmake/MaintainerFlags.cmake | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 40e02859088e4a524b49dc6b86d34a43701b44da
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 10:36:48 2017 -0400

    CDRIVER-2238 race in mongoc_client_kill_cursor
    
    Once the topology mutex is unlocked, it isn't safe to use a server
    description from the topology: the server description could be freed by
    a topology change before mongoc_client_kill_cursor accesses its server
    id. I had apparently begun to make this thread-safe a while ago but
    didn't finish the job until now.

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4628a23a998ed57330ea917c2397cf860dfbf4d9
Merge: 1fe73a6 6e834dc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 04:16:55 2017 -0400

    Merge remote-tracking branch 'upstream/master'
    
    * upstream/master:
      CDRIVER-672 Remove supplemental tests and cleanup the test directory
      CDRIVER-2176 Enable and configure TCP Keepalive on macOS

commit 1fe73a6b0c16dfa9f2c9ef2ba39a90bfb190b82c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 23 04:16:48 2017 -0400

    update google analytics in docs

 doc/conf.py | 17 +++++++----------
 1 file changed, 7 insertions(+), 10 deletions(-)

commit 6e834dc1c96db05b677b6bb595a11c0f1e0c1d06
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 17 13:33:31 2017 -0700

    CDRIVER-672 Remove supplemental tests and cleanup the test directory

 .gitignore                         |    6 -
 CMakeLists.txt                     |   30 +-
 tests/Makefile.am                  |   85 +-
 tests/ha-test.c                    | 1065 ---------
 tests/ha-test.h                    |  139 --
 tests/mongoc-tests.c               |   32 -
 tests/mongoc-tests.h               |   36 -
 tests/test-bulk.c                  | 4495 ------------------------------------
 tests/test-cyrus.c                 |  190 --
 tests/test-load.c                  |  128 -
 tests/test-mongoc-bulk.c           | 4495 ++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-cyrus.c          |  190 ++
 tests/test-mongoc-write-commands.c |  278 +++
 tests/test-mongoc-x509.c           |   31 +
 tests/test-replica-set-ssl.c       |  117 -
 tests/test-replica-set.c           |  345 ---
 tests/test-secondary.c             |   90 -
 tests/test-sharded-cluster.c       |   79 -
 tests/test-write-commands.c        |  278 ---
 tests/test-x509.c                  |   31 -
 20 files changed, 5014 insertions(+), 7126 deletions(-)

commit 6f538bc1a23f7282b2c313af53be0dddd59c89b4
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 15 14:07:19 2017 -0700

    CDRIVER-2176 Enable and configure TCP Keepalive on macOS

 src/mongoc/mongoc-socket.c | 165 ++++++++++++++++++++++++++++-----------------
 1 file changed, 105 insertions(+), 60 deletions(-)

commit 36811950d533b1db21ebc7b0410bfe49b0569b80
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 12 10:41:52 2017 -0400

    longer timeouts in evergreen auth test

 .evergreen/run-auth-tests.sh | 21 ++++++++++++---------
 1 file changed, 12 insertions(+), 9 deletions(-)

commit d780c0f9488da7528573eff37afbc8ae4e7decf9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 11 16:43:50 2017 -0400

    update NEWS for 1.7.0

 NEWS             | 1 -
 VERSION_RELEASED | 2 +-
 2 files changed, 1 insertion(+), 2 deletions(-)

commit ff6b44e9c38b783f4238b55916da0a1677bd3b80
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 11 15:40:33 2017 -0400

    add createIndexes guide
    
    CDRIVER-2096 and CDRIVER-1493

 doc/create-indexes.rst | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 7de58ec824a5c68e97d69f467ed3147bab96f393
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 11 10:55:22 2017 -0700

    Fix -Wunused-variable

 tests/test-mongoc-client.c | 1 -
 1 file changed, 1 deletion(-)

commit c0a1afbc4a6a5f7454062fda183329dd768f1c3a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 10 19:17:50 2017 -0400

    add createIndexes example
    
    CDRIVER-2096 and CDRIVER-1493

 examples/example-create-indexes.c | 81 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 81 insertions(+)

commit 6b908ace8d8efc80c7b973df4a988c034618ea84
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 4 18:58:09 2017 -0400

    CDRIVER-689 detect incompatible wire versions

 src/mongoc/mongoc-client.c                       |  6 ++
 src/mongoc/mongoc-topology-description-private.h |  3 +-
 src/mongoc/mongoc-topology-description.c         | 88 ++++++++++++++++++++----
 src/mongoc/mongoc-topology.c                     |  5 ++
 tests/test-mongoc-client.c                       | 63 +++++++++++++----
 5 files changed, 136 insertions(+), 29 deletions(-)

commit fba6f4e4238c8d0200af1feac92eafaccd946e78
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 11 10:12:58 2017 -0700

    Downgrade client certificate request to a trace message

 src/mongoc/mongoc-secure-channel.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 851142eecbc2b54ae3eb1ac69cae66373a9afd12
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 11 09:03:55 2017 -0700

    Typo in docs s/seperated/separated/g

 NEWS                               | 2 +-
 doc/mongoc_uri_set_compressors.rst | 2 +-
 doc/mongoc_uri_t.rst               | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 851596b50572e724ba8f3196e4a0dfdca977d3eb
Merge: f929c7c 28a8482
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 11 08:51:47 2017 -0700

    Merge branch 'CDRIVER-2235-openssl'
    
    * CDRIVER-2235-openssl:
      CDRIVER-2235 OpenSSL 1.0.0 version check sometimes fails in Evergreen

commit f929c7cea31ebe136a9127cc19a65949c0bdd2d9
Merge: 993f245 bccc024
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 11 08:50:42 2017 -0700

    Merge branch 'doc-keepalive'
    
    * doc-keepalive:
      CDRIVER-2176 Document keepalive options

commit 993f24585f9c33dcd065e441da06466d6e78a7e1
Merge: 35b988e 0a14b9d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 11 08:49:21 2017 -0700

    Merge branch 'CDRIVER-2236-make-dist'
    
    * CDRIVER-2236-make-dist:
      CDRIVER-2236 Don't require SASL and SSL in order to make distribution tarball

commit 35b988e51f97127a9cd75d8197c78bd12cae3b58
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 16:19:51 2017 -0700

    CDRIVER-2240 Document mongoc_uri_get/set_compressors/new_with_error

 doc/mongoc_uri_get_compressors.rst | 43 +++++++++++++++++++++++++++
 doc/mongoc_uri_new.rst             | 28 ++----------------
 doc/mongoc_uri_new_with_error.rst  | 59 ++++++++++++++++++++++++++++++++++++++
 doc/mongoc_uri_set_compressors.rst | 46 +++++++++++++++++++++++++++++
 doc/mongoc_uri_t.rst               |  3 ++
 tests/test-mongoc-uri.c            | 13 +++++++++
 6 files changed, 167 insertions(+), 25 deletions(-)

commit e3c43713c1227e52e27bdf7b6bb18a166da4e46b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 10 18:01:41 2017 -0400

    duplicate thanks in NEWS

 NEWS | 21 ++++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

commit 48750743091175d771ff4aa7b25097657bda828e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 10 17:59:18 2017 -0400

    deprecate createIndexes helpers
    
    CDRIVER-2096 and CDRIVER-1493

 .gitignore                                       |  1 +
 CMakeLists.txt                                   |  1 +
 NEWS                                             |  3 +++
 doc/guides.rst                                   |  1 +
 doc/mongoc_collection_create_index.rst           | 11 +++++------
 doc/mongoc_collection_create_index_with_opts.rst |  5 +++++
 doc/mongoc_collection_ensure_index.rst           |  8 ++------
 doc/mongoc_collection_keys_to_index_string.rst   |  2 +-
 doc/mongoc_index_opt_t.rst                       |  5 +++++
 examples/Makefile.am                             |  5 +++++
 src/mongoc/mongoc-collection.c                   | 10 ++++++----
 src/mongoc/mongoc-collection.h                   | 10 ++++++----
 src/mongoc/mongoc-gridfs.c                       |  8 +++++++-
 src/mongoc/mongoc-util-private.h                 | 17 +++++++++++++++++
 tests/TestSuite.h                                | 15 ---------------
 tests/test-bulk.c                                |  3 +++
 tests/test-mongoc-collection.c                   |  4 ++++
 tests/test-mongoc-matcher.c                      |  1 +
 tests/test-mongoc-write-concern.c                |  1 +
 19 files changed, 74 insertions(+), 37 deletions(-)

commit ba5e96e4380ecb2a478f2540b7c9d327bb6fc5eb
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 14:54:17 2017 -0700

    CDRIVER-2230 End Official Solaris Support

 .evergreen/compile-unix.sh           | 11 +---------
 .evergreen/config.yml                | 40 ------------------------------------
 .evergreen/download-mongodb.sh       |  8 --------
 .evergreen/integration-tests.sh      |  8 --------
 .evergreen/run-auth-tests.sh         |  9 --------
 .evergreen/run-tests.sh              |  9 --------
 CONTRIBUTING.md                      |  1 -
 doc/installing.rst                   |  1 -
 src/mongoc/mongoc-openssl.c          |  5 -----
 tests/test-mongoc-stream-tls-error.c |  5 ++---
 10 files changed, 3 insertions(+), 94 deletions(-)

commit 0a14b9da664b52f6e54b59c55c59171cf98ec30a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 14:35:36 2017 -0700

    CDRIVER-2236 Don't require SASL and SSL in order to make distribution tarball

 src/mongoc/Makefile.am | 81 +++++++++++++++++++++++---------------------------
 1 file changed, 37 insertions(+), 44 deletions(-)

commit bccc0245795f9da26770a44f6a88fe2e8d0ceb31
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 13:49:12 2017 -0700

    CDRIVER-2176 Document keepalive options

 doc/advanced-connections.rst | 20 ++++++++++++++++++++
 src/mongoc/mongoc-socket.c   |  8 ++++----
 2 files changed, 24 insertions(+), 4 deletions(-)

commit 28a848277f38ce08506dd09b89dc7ea84cc0f409
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 08:45:59 2017 -0700

    CDRIVER-2235 OpenSSL 1.0.0 version check sometimes fails in Evergreen

 .evergreen/compile-unix.sh | 65 +---------------------------------------
 .evergreen/config.yml      | 52 +++++++++++++++++++++++++-------
 .evergreen/install-ssl.sh  | 75 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 118 insertions(+), 74 deletions(-)

commit e622b08c810772f14d0a44a555d11835c8598a8e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 08:18:10 2017 -0700

    Revert "CDRIVER-2217 Disable temporarly non-existing variants"
    
    This reverts commit 43da28a2e88ac642b91fd3fdbb06148d30b48b09.

 .evergreen/config.yml | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 7c7c15c3d94f82cd1076457ecaf230e15641b708
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 08:17:55 2017 -0700

    Revert "CDRIVER-2217 Disable this variant due to bug in mongod"
    
    This reverts commit 47971feb1e3727eb0bdd91dc6e92432c2760b446.

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 533b82cf3f5c0dd5f51a3a57a198f5cbcab6c5a9
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 10 08:10:23 2017 -0700

    Revert "CDRIVER-2215 Disable sharded cluster testing"
    
    This reverts commit 4810f2ff6dbe3a6ad822501379662eb58c9c0bbc.

 .evergreen/config.yml | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit fe3fd392dbc684fc2b89099ae3e53679e7e296b1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 9 09:34:26 2017 -0700

    CDRIVER-2176 Enable and configure TCP Keepalive by default

 src/mongoc/mongoc-socket.c | 164 ++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 161 insertions(+), 3 deletions(-)

commit c31a8ca2414ff6b093c8e0323dbb19c65b641f61
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 8 16:10:59 2017 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 693ea2f4c0380bc11218eb3fcdc0a1893513d5a5
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 8 14:31:27 2017 -0700

    CDRIVER-2239 Rename bson_as_[canonical|relaxed]_json() to bson_as_[canonical|relaxed]_extended_json()

 doc/cursors.rst                             |  2 +-
 doc/mongoc_collection_command_simple.rst    |  2 +-
 doc/mongoc_collection_find.rst              |  2 +-
 doc/mongoc_collection_find_with_opts.rst    |  2 +-
 doc/mongoc_matcher_t.rst                    |  2 +-
 doc/mongoc_read_prefs_set_tags.rst          |  2 +-
 doc/mongoc_uri_get_mechanism_properties.rst |  2 +-
 doc/tutorial.rst                            | 12 ++++++------
 examples/aggregation/aggregation1.c         |  2 +-
 examples/bulk/bulk-collation.c              |  2 +-
 examples/bulk/bulk1.c                       |  2 +-
 examples/bulk/bulk2.c                       |  2 +-
 examples/bulk/bulk3.c                       |  2 +-
 examples/bulk/bulk4.c                       |  2 +-
 examples/bulk/bulk5.c                       |  4 ++--
 examples/bulk/bulk6.c                       |  2 +-
 examples/doc-common-insert.c                |  2 +-
 examples/example-client.c                   |  2 +-
 examples/example-command-monitoring.c       |  8 ++++----
 examples/example-command-with-opts.c        |  4 ++--
 examples/example-matcher.c                  |  4 ++--
 examples/example-sdam-monitoring.c          |  2 +-
 examples/filter-bsondump.c                  |  2 +-
 examples/find-and-modify.c                  |  2 +-
 examples/find_and_modify_with_opts/bypass.c |  2 +-
 examples/find_and_modify_with_opts/fields.c |  2 +-
 examples/find_and_modify_with_opts/flags.c  |  2 +-
 examples/find_and_modify_with_opts/opts.c   |  2 +-
 examples/find_and_modify_with_opts/sort.c   |  2 +-
 examples/find_and_modify_with_opts/update.c |  2 +-
 examples/mongoc-ping.c                      |  2 +-
 examples/mongoc-tail.c                      |  2 +-
 src/mongoc/mongoc-cluster-cyrus.c           | 15 ++++-----------
 src/mongoc/mongoc-rpc.c                     | 26 +++++++++++++-------------
 tests/TestSuite.h                           |  4 ++--
 tests/ha-test.c                             |  8 ++++----
 tests/json-test.c                           |  8 ++++----
 tests/test-conveniences.c                   |  2 +-
 tests/test-load.c                           |  2 +-
 tests/test-mongoc-command-monitoring.c      |  4 ++--
 tests/test-mongoc-matcher.c                 |  2 +-
 tests/test-replica-set.c                    |  2 +-
 tests/test-secondary.c                      |  2 +-
 43 files changed, 77 insertions(+), 84 deletions(-)

commit 7ca6a2eb926808b919f66d80b0a5ac3991389225
Merge: 8aeb5d1 fb1031b
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 8 14:06:10 2017 -0700

    Merge branch 'CDRIVER-2218-appname'
    
    * CDRIVER-2218-appname:
      CDRIVER-2218 Only topology scanner performs MongoDB Handshake

commit fb1031b76f1e28bdf96bb51cc5e71926b675f222
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 8 09:32:31 2017 -0700

    CDRIVER-2218 Only topology scanner performs MongoDB Handshake

 src/mongoc/mongoc-cluster.c                  |  9 +++--
 src/mongoc/mongoc-topology-scanner-private.h |  3 ++
 src/mongoc/mongoc-topology-scanner.c         | 22 ++++++-----
 tests/test-mongoc-client.c                   | 56 ++++++++++++++++++++++++++--
 4 files changed, 73 insertions(+), 17 deletions(-)

commit 8aeb5d143d06fb90f1816256131ded556efab990
Merge: fe20fe3 86eddf9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 8 07:51:47 2017 -0400

    Merge remote-tracking branch 'upstream/master'
    
    * upstream/master:
      Set this via cflags
      CDRIVER-1104 Don't error when adding -pthread on clang

commit fe20fe3b47f3dff9f4b0da4da6978cb96b343916
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 8 07:51:36 2017 -0400

    CDRIVER-2145 don't include MaintainerFlags.cmake twice

 CMakeLists.txt | 2 --
 1 file changed, 2 deletions(-)

commit 86eddf998771582bf037a177055f1148099404a3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 7 15:28:46 2017 -0700

    Set this via cflags

 .evergreen/compile-unix.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b51fdf8fd39d9c1e220d5b9bd057f52bb2aa6e40
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 24 13:57:58 2017 -0700

    CDRIVER-1104 Don't error when adding -pthread on clang

 build/autotools/PlatformFlags.m4 | 2 ++
 1 file changed, 2 insertions(+)

commit 34c5c96985eb9bdcb669502cf7cd126fb21c4248
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 7 16:21:48 2017 -0400

    CDRIVER-2145 CMake option ENABLE_MAINTAINER_FLAGS

 .evergreen/compile-windows.sh      |  2 +-
 CMakeLists.txt                     | 15 ++++++++++++++
 Makefile.am                        |  2 +-
 build/Makefile.am                  |  3 +++
 build/autotools/MaintainerFlags.m4 | 41 ++++++++++++++++----------------------
 build/cmake/MaintainerFlags.cmake  | 28 ++++++++++++++++++++++++++
 build/cmake/Makefile.am            |  3 ++-
 build/maintainer-flags.txt         | 20 +++++++++++++++++++
 8 files changed, 87 insertions(+), 27 deletions(-)

commit a0480985628c4f7201ab33e09ac421eb0c1dbe02
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 7 12:12:53 2017 -0700

    CDRIVER-2209 Improve bundling compressor libs

 Makefile.am                    |  8 ------
 build/autotools/CheckSnappy.m4 |  2 +-
 build/autotools/CheckZlib.m4   |  2 +-
 src/Makefile.am                |  5 ----
 src/mongoc/Makefile.am         | 57 ++++++++++++++++++++++++++++++++++++++++++
 tests/Makefile.am              | 24 ------------------
 6 files changed, 59 insertions(+), 39 deletions(-)

commit 225a0f86490648ce886de24f29728dc9a13e048d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 7 12:12:21 2017 -0700

    CDRIVER-1104 Actually remove the -priv.so creation

 Makefile.am              |  1 -
 src/Makefile.am          | 82 ++++++++++--------------------------------------
 src/mongoc/Makefile.am   | 73 +++++++++++++++++++++++++++++++-----------
 tests/Makefile.am        | 30 ++++++++++--------
 tests/test-replica-set.c |  6 ++--
 5 files changed, 92 insertions(+), 100 deletions(-)

commit ad65f71456b3979a0d30423dd09d6a55d5a83a2f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 3 09:15:01 2017 -0400

    CDRIVER-2001 mongoc_gridfs_file_writev takes const iovec

 build/generate-future-functions.py   |  3 ++-
 doc/mongoc_gridfs_file_writev.rst    |  2 +-
 src/mongoc/mongoc-gridfs-file.c      |  2 +-
 src/mongoc/mongoc-gridfs-file.h      |  2 +-
 tests/mock_server/future-functions.c |  6 +++---
 tests/mock_server/future-functions.h |  2 +-
 tests/mock_server/future-value.c     | 14 ++++++++++++++
 tests/mock_server/future-value.h     | 12 ++++++++++++
 tests/mock_server/future.c           | 12 ++++++++++++
 tests/mock_server/future.h           |  3 +++
 10 files changed, 50 insertions(+), 8 deletions(-)

commit 5d33068cc4c365e2f520731a8f907c2bb75472c5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 3 07:38:56 2017 -0400

    more lenient timeout tests

 tests/TestSuite.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a64b8bbc7980be1846242c02dc37e8b383ee6487
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 2 15:30:54 2017 -0400

    CDRIVER-670 don't check links in docs
    
    "sphinx-build" linkcheck fails too often to be worthwhile, due GitHub
    outages and other problems.

 .evergreen/check-release-archive.sh | 1 -
 1 file changed, 1 deletion(-)

commit 0e776ff7839dfd8112c5be8c1e1125749351ecb4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 2 14:07:47 2017 -0400

    CDRIVER-2231 wrap all public functions in extern "C"

 src/mongoc/mongoc-server-description.h   | 4 ++++
 src/mongoc/mongoc-topology-description.h | 4 ++++
 src/mongoc/mongoc-version-functions.h    | 4 ++++
 3 files changed, 12 insertions(+)

commit 15e89d0eed6308edded31f730f158c7d8c182a4e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 2 12:38:59 2017 -0400

    typo in comment

 src/mongoc/mongoc-server-description.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a275b6e13797ddd1f02f08a2a32a8ff385a1d9e0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 27 15:00:49 2017 -0400

    fix references to read-command example

 doc/mongoc_client_read_write_command_with_opts.rst     | 2 +-
 doc/mongoc_client_write_command_with_opts.rst          | 2 +-
 doc/mongoc_collection_read_command_with_opts.rst       | 2 +-
 doc/mongoc_collection_read_write_command_with_opts.rst | 2 +-
 doc/mongoc_collection_write_command_with_opts.rst      | 2 +-
 doc/mongoc_database_read_command_with_opts.rst         | 2 +-
 doc/mongoc_database_read_write_command_with_opts.rst   | 2 +-
 doc/mongoc_database_write_command_with_opts.rst        | 2 +-
 8 files changed, 8 insertions(+), 8 deletions(-)

commit 35d9a46d43c93b4c6699ed2fc8dc3bc1a989e4df
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 26 18:23:41 2017 -0400

    CDRIVER-2209 zlib/snappy header paths, part 2
    
    When building with bundled zLib or Snappy, CMake must set the include
    paths to its internal directories.

 CMakeLists.txt               | 5 +++--
 build/cmake/FindSnappy.cmake | 1 +
 2 files changed, 4 insertions(+), 2 deletions(-)

commit b1450d176c3456031f41658f646ef9daadcf7179
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 27 12:52:15 2017 -0400

    CDRIVER-2224 read_write_command funcs must ignore read prefs
    
    The command functions mongoc_client_read_write_command_with_opts,
    mongoc_database_read_write_command_with_opts, and
    mongoc_collection_read_write_command_with_opts now ignore the read_prefs
    parameter.
    
    The read prefs parameter was included by mistake in libmongoc 1.5.
    A command that writes must not obey a read preference.

 NEWS                                               |  6 +-
 build/generate-future-functions.py                 |  9 +++
 doc/mongoc_client_read_write_command_with_opts.rst |  8 ++-
 ...goc_collection_read_write_command_with_opts.rst |  8 ++-
 ...ongoc_database_read_write_command_with_opts.rst |  8 ++-
 src/mongoc/mongoc-client.c                         |  8 ++-
 src/mongoc/mongoc-client.h                         |  2 +-
 src/mongoc/mongoc-collection.c                     |  2 +-
 src/mongoc/mongoc-collection.h                     |  2 +-
 src/mongoc/mongoc-database.c                       |  2 +-
 src/mongoc/mongoc-database.h                       |  2 +-
 tests/mock_server/future-functions.c               | 58 ++++++++++++++++++++
 tests/mock_server/future-functions.h               | 12 ++++
 tests/test-mongoc-client.c                         | 64 +++++++++++++++++++++-
 14 files changed, 171 insertions(+), 20 deletions(-)

commit ff9290623ca75c53e16b9499422274c11e875175
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 26 18:37:38 2017 -0400

    unused code

 tests/test-mongoc-read-prefs.c | 2 --
 1 file changed, 2 deletions(-)

commit 0d3e9c356bedce60045bfc10f1f7503f9120da4e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 25 15:27:26 2017 -0400

    CDRIVER-2209 set zlib/snappy header paths in CMake
    
    When building with bundled zLib or Snappy, CMake must set the include
    paths to its internal directories.

 CMakeLists.txt               | 15 +++++++++++++--
 build/cmake/FindSnappy.cmake |  7 ++++++-
 2 files changed, 19 insertions(+), 3 deletions(-)

commit 6f28ec66c3b566a42d68b6fec154dadef58bdaa6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 26 16:13:36 2017 -0400

    CDRIVER-2222 disable /TLS/handshake_stall with macOS

 tests/test-mongoc-stream-tls-error.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 99858031e954f554b6ea47dcf5f9c2ef4ab6c09f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 25 07:34:32 2017 -0400

    CDRIVER-2211 use .cmd files in Evergreen, not .bat
    
    Error code reporting in .bat files is broken in Windows.

 .evergreen/config.yml                    | 10 ++--
 .evergreen/link-sample-program-mingw.bat | 94 --------------------------------
 .evergreen/link-sample-program-mingw.cmd | 94 ++++++++++++++++++++++++++++++++
 .evergreen/link-sample-program-msvc.bat  | 91 -------------------------------
 .evergreen/link-sample-program-msvc.cmd  | 91 +++++++++++++++++++++++++++++++
 5 files changed, 190 insertions(+), 190 deletions(-)

commit 43f003e2ae293eacca2e8e54dceaf5eca569ee30
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 24 22:33:55 2017 -0400

    CDRIVER-2211 add ENABLE_STATIC cmake option

 .evergreen/link-sample-program.sh |  2 ++
 build/cmake/MongoCPackage.cmake   | 15 +++++++++++----
 2 files changed, 13 insertions(+), 4 deletions(-)

commit 69ddfb72cc1870cb7cf79aa1d05929b34d545a0c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 24 21:14:35 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7c2fe66953207e91d8abe0449a5f37fa9f62aeb9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 24 21:06:55 2017 -0400

    CDRIVER-2208 use bson_as_canonical_json

 doc/cursors.rst                             |  2 +-
 doc/mongoc_collection_command_simple.rst    |  2 +-
 doc/mongoc_collection_find.rst              |  2 +-
 doc/mongoc_collection_find_with_opts.rst    |  2 +-
 doc/mongoc_matcher_t.rst                    |  2 +-
 doc/mongoc_read_prefs_set_tags.rst          |  2 +-
 doc/mongoc_uri_get_mechanism_properties.rst |  2 +-
 doc/tutorial.rst                            | 12 ++++++------
 examples/aggregation/aggregation1.c         |  2 +-
 examples/bulk/bulk-collation.c              |  2 +-
 examples/bulk/bulk1.c                       |  2 +-
 examples/bulk/bulk2.c                       |  2 +-
 examples/bulk/bulk3.c                       |  2 +-
 examples/bulk/bulk4.c                       |  2 +-
 examples/bulk/bulk5.c                       |  4 ++--
 examples/bulk/bulk6.c                       |  2 +-
 examples/doc-common-insert.c                |  2 +-
 examples/example-client.c                   |  2 +-
 examples/example-command-monitoring.c       |  4 ++--
 examples/example-command-with-opts.c        |  4 ++--
 examples/example-matcher.c                  |  4 ++--
 examples/example-sdam-monitoring.c          |  2 +-
 examples/filter-bsondump.c                  |  2 +-
 examples/find-and-modify.c                  |  2 +-
 examples/find_and_modify_with_opts/bypass.c |  2 +-
 examples/find_and_modify_with_opts/fields.c |  2 +-
 examples/find_and_modify_with_opts/flags.c  |  2 +-
 examples/find_and_modify_with_opts/opts.c   |  2 +-
 examples/find_and_modify_with_opts/sort.c   |  2 +-
 examples/find_and_modify_with_opts/update.c |  2 +-
 examples/mongoc-ping.c                      |  2 +-
 examples/mongoc-tail.c                      |  2 +-
 src/mongoc/mongoc-cluster-cyrus.c           |  6 +++---
 src/mongoc/mongoc-rpc.c                     |  4 ++--
 tests/TestSuite.h                           |  4 ++--
 tests/ha-test.c                             |  8 ++++----
 tests/json-test.c                           |  8 ++++----
 tests/test-conveniences.c                   |  2 +-
 tests/test-load.c                           |  2 +-
 tests/test-mongoc-command-monitoring.c      |  4 ++--
 tests/test-mongoc-matcher.c                 |  2 +-
 tests/test-replica-set.c                    |  2 +-
 tests/test-secondary.c                      |  2 +-
 43 files changed, 63 insertions(+), 63 deletions(-)

commit 248efaa0b6fcb4959ed1fd2f2508020900849145
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 24 17:05:24 2017 -0400

    CDRIVER-2211 add ENABLE_STATIC cmake option

 .evergreen/link-sample-program.sh | 65 ++++++++++++++-------------
 CMakeLists.txt                    | 94 +++++++++++++++++++++++++--------------
 NEWS                              |  1 +
 3 files changed, 95 insertions(+), 65 deletions(-)

commit 5d880a361719df91aa5414418ee61ddcaba5a0b2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 22 12:40:33 2017 -0400

    Revert "CDRIVER-1888 mock server detects duplicate keys"
    
    83f47385e67ce7cc691699b8145452e10cb5bf0c
    
    Test fails at the moment.

 tests/mock_server/mock-server.c | 54 +----------------------------------------
 1 file changed, 1 insertion(+), 53 deletions(-)

commit f5cde9af9b8e27056d19a3b21c85b996c7e0a9f6
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 21 17:43:59 2017 -0700

    bumpb libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0677ff8a2b2a818b1189e5f15321b605c0f3941f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 21 17:42:54 2017 -0700

    Make sure clang properly errors on unsupported flags

 build/autotools/MaintainerFlags.m4 | 3 +++
 1 file changed, 3 insertions(+)

commit 83f47385e67ce7cc691699b8145452e10cb5bf0c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 21 15:27:53 2017 -0400

    CDRIVER-1888 mock server detects duplicate keys

 tests/mock_server/mock-server.c | 54 ++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 53 insertions(+), 1 deletion(-)

commit 78c5058146894c68c936848c5db5f28b9981319d
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 20 16:44:19 2017 -0700

    CDRIVER-1688 Test in Evergreen with hardening flags

 .evergreen/config.yml | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit 95f0a879a11bacf34b4f7335524f736b1e18b418
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 20 14:26:53 2017 -0700

    CDRIVER-2188 Move to macOS-1012
    
    This means we can no longer test with OpenSSL on macOS

 .evergreen/compile-unix.sh   | 2 +-
 .evergreen/config.yml        | 9 ++-------
 .evergreen/run-auth-tests.sh | 1 +
 .evergreen/run-tests.sh      | 1 +
 4 files changed, 5 insertions(+), 8 deletions(-)

commit 43da28a2e88ac642b91fd3fdbb06148d30b48b09
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 20 14:25:01 2017 -0700

    CDRIVER-2217 Disable temporarly non-existing variants

 .evergreen/config.yml | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 47971feb1e3727eb0bdd91dc6e92432c2760b446
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 19 13:51:04 2017 -0700

    CDRIVER-2217 Disable this variant due to bug in mongod

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4810f2ff6dbe3a6ad822501379662eb58c9c0bbc
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 19 12:06:50 2017 -0700

    CDRIVER-2215 Disable sharded cluster testing

 .evergreen/config.yml | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit cd903c0ea2452fcaecf13815808cc37aa9424c99
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 16:09:30 2017 -0700

    Compression docs

 doc/advanced-connections.rst | 26 ++++++++++++++++++++++++++
 doc/mongoc_uri_t.rst         |  8 +++++---
 2 files changed, 31 insertions(+), 3 deletions(-)

commit f276dcf2dbe15372c2cfc09af2a401ddeb0fef9c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 15:28:34 2017 -0700

    Don't include snappy while sanitizing

 .evergreen/config.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fc25d7cffcf02d14c7eb3786f96a61396b7cfa35
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 15:08:01 2017 -0700

    Update configure output

 doc/installing.rst | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 8edd9f53af3bdcc0e238f162a3cc13a51e27b7be
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 14:55:27 2017 -0700

    Overwrite the c++ path too, for snappy

 .evergreen/config.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a57b7208a995431c779c4d197695076009796d95
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 09:37:56 2017 -0700

    CDRIVER-2167 Mention CMake 3.7 is required for OpenSSL 1.1.0 support on Windows

 doc/installing.rst | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 50642b4857b9609848667ab679eea2c4d4c18621
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 09:28:15 2017 -0700

    CDRIVER-2167 OpenSSL 1.1.0 on Windows requires CMake 3.7+

 CMakeLists.txt | 5 +++++
 1 file changed, 5 insertions(+)

commit 7fc01bce0ebce144e05421b1ea5735bad33d4876
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 13:27:40 2017 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 25763f184c472d44af16303cbebf61a929b3caab
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 11:18:59 2017 -0700

    CDRIVER-2197 Add -Wexpansion-to-defined to maintainer flags

 build/autotools/MaintainerFlags.m4 | 50 +++++++++++++++++++-------------------
 1 file changed, 25 insertions(+), 25 deletions(-)

commit 005b17fd0cb8ac8564e8865c18150f380f1838d4
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 18 09:19:25 2017 -0700

    CDRIVER-2118 Add zlib and snappy support on Windows via cmake

 .evergreen/compile-unix.sh    | 10 ++++++++
 .evergreen/compile-windows.sh |  6 +++++
 .evergreen/config.yml         | 10 +++++---
 CMakeLists.txt                | 56 ++++++++++++++++++++++++++++++++++++++++---
 build/cmake/FindSnappy.cmake  | 53 ++++++++++++++++++++++++++++++++++++++++
 build/cmake/Makefile.am       |  1 +
 6 files changed, 130 insertions(+), 6 deletions(-)

commit daa9c9441172d1eae439d1fcdc6e854ff0740076
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 17 15:21:54 2017 -0700

    CDRIVER-2198 Check for O_NOFOLLOW

 src/mongoc/mongoc-counters.c | 3 +++
 1 file changed, 3 insertions(+)

commit 9a55c7e73034efd574836892bcd80c04e31ba541
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 15 11:01:51 2017 -0400

    CDRIVER-2212 fix X509 auth on macOS 10.12

 src/mongoc/mongoc-secure-transport.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 767c84a89e21c7e5f1755b58233450df02831994
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 17 18:23:33 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c25ca079ecec500828bf970eea17372bf588b71b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 17 14:23:27 2017 -0700

    Don't add zlib & snappy linker flags when bundling

 configure.ac | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 9ecbd05f1395a97ac63bc0a14e5cb3b354ac017d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 17 12:49:28 2017 -0700

    Fix sanitizer builds

 .evergreen/config.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 28958699409eab410c894bdf48f64c718425eb01
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 14 15:22:05 2017 -0400

    typos in mongoc-cmd.c comments

 src/mongoc/mongoc-cmd.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 04127a0dab4683fcd27872dfcde0314bd76f8ea5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 13 16:02:42 2017 -0400

    CDRIVER-2192 assert in Cyrus auth

 src/mongoc/mongoc-cluster-cyrus.c |  6 ++++--
 src/mongoc/mongoc-cluster-sspi.c  | 11 ++++++++---
 2 files changed, 12 insertions(+), 5 deletions(-)

commit 7533d03d292ac1b9472b246367d1c8d598b04f4a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 14 11:38:43 2017 -0700

    CDRIVER-2209 Static link snappy & zlib

 Makefile.am                    | 10 ++++----
 build/autotools/CheckProgs.m4  |  2 ++
 build/autotools/CheckSnappy.m4 | 54 ++++++++++++++++++++++++++++++++++++++++++
 build/autotools/CheckZlib.m4   |  2 ++
 configure.ac                   |  2 ++
 src/Makefile.am                |  7 +++++-
 tests/Makefile.am              | 24 +++++++++++++++++++
 7 files changed, 96 insertions(+), 5 deletions(-)

commit 33a0921c82ca2f03f7aa21e0464af943534aad06
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 11 13:54:17 2017 -0700

    CDRIVER-2209 Bundle snappy-1.1.3 & zlib-1.2.11

 .gitignore                                         |     2 +
 THIRD_PARTY_NOTICES                                |    93 +
 src/snappy-1.1.3/AUTHORS                           |     1 +
 src/snappy-1.1.3/COPYING                           |    54 +
 src/snappy-1.1.3/ChangeLog                         |  2468 +++
 src/snappy-1.1.3/INSTALL                           |   370 +
 src/snappy-1.1.3/Makefile.am                       |    20 +
 src/snappy-1.1.3/Makefile.in                       |  1325 ++
 src/snappy-1.1.3/NEWS                              |   140 +
 src/snappy-1.1.3/README                            |   135 +
 src/snappy-1.1.3/aclocal.m4                        |  9912 ++++++++++
 src/snappy-1.1.3/autogen.sh                        |     7 +
 src/snappy-1.1.3/compile                           |   347 +
 src/snappy-1.1.3/config.guess                      |  1558 ++
 src/snappy-1.1.3/config.h.in                       |   134 +
 src/snappy-1.1.3/config.sub                        |  1791 ++
 src/snappy-1.1.3/configure                         | 19015 +++++++++++++++++++
 src/snappy-1.1.3/configure.ac                      |   133 +
 src/snappy-1.1.3/depcomp                           |   791 +
 src/snappy-1.1.3/format_description.txt            |   110 +
 src/snappy-1.1.3/framing_format.txt                |   135 +
 src/snappy-1.1.3/install-sh                        |   527 +
 src/snappy-1.1.3/ltmain.sh                         |  9661 ++++++++++
 src/snappy-1.1.3/m4/gtest.m4                       |    74 +
 src/snappy-1.1.3/missing                           |   215 +
 src/snappy-1.1.3/snappy-c.cc                       |    90 +
 src/snappy-1.1.3/snappy-c.h                        |   138 +
 src/snappy-1.1.3/snappy-internal.h                 |   150 +
 src/snappy-1.1.3/snappy-sinksource.cc              |   104 +
 src/snappy-1.1.3/snappy-sinksource.h               |   182 +
 src/snappy-1.1.3/snappy-stubs-internal.cc          |    42 +
 src/snappy-1.1.3/snappy-stubs-internal.h           |   495 +
 src/snappy-1.1.3/snappy-stubs-public.h.in          |    98 +
 src/snappy-1.1.3/snappy-test.cc                    |   609 +
 src/snappy-1.1.3/snappy-test.h                     |   597 +
 src/snappy-1.1.3/snappy.cc                         |  1555 ++
 src/snappy-1.1.3/snappy.h                          |   203 +
 src/snappy-1.1.3/snappy_unittest.cc                |  1418 ++
 src/snappy-1.1.3/test-driver                       |   139 +
 src/snappy-1.1.3/testdata/alice29.txt              |  3609 ++++
 src/snappy-1.1.3/testdata/asyoulik.txt             |  4122 ++++
 src/snappy-1.1.3/testdata/baddata1.snappy          |   Bin 0 -> 27512 bytes
 src/snappy-1.1.3/testdata/baddata2.snappy          |   Bin 0 -> 27483 bytes
 src/snappy-1.1.3/testdata/baddata3.snappy          |   Bin 0 -> 28384 bytes
 src/snappy-1.1.3/testdata/fireworks.jpeg           |   Bin 0 -> 123093 bytes
 src/snappy-1.1.3/testdata/geo.protodata            |   Bin 0 -> 118588 bytes
 src/snappy-1.1.3/testdata/html                     |     1 +
 src/snappy-1.1.3/testdata/html_x_4                 |     1 +
 src/snappy-1.1.3/testdata/kppkn.gtb                |   Bin 0 -> 184320 bytes
 src/snappy-1.1.3/testdata/lcet10.txt               |  7519 ++++++++
 src/snappy-1.1.3/testdata/paper-100k.pdf           |   598 +
 src/snappy-1.1.3/testdata/plrabn12.txt             | 10699 +++++++++++
 src/snappy-1.1.3/testdata/urls.10K                 | 10000 ++++++++++
 src/zlib-1.2.11/CMakeLists.txt                     |   249 +
 src/zlib-1.2.11/FAQ                                |   368 +
 src/zlib-1.2.11/INDEX                              |    68 +
 src/zlib-1.2.11/Makefile.am                        |    31 +
 src/zlib-1.2.11/adler32.c                          |   186 +
 src/zlib-1.2.11/amiga/Makefile.pup                 |    69 +
 src/zlib-1.2.11/amiga/Makefile.sas                 |    68 +
 src/zlib-1.2.11/compress.c                         |    86 +
 src/zlib-1.2.11/contrib/README.contrib             |    78 +
 src/zlib-1.2.11/contrib/ada/buffer_demo.adb        |   106 +
 src/zlib-1.2.11/contrib/ada/mtest.adb              |   156 +
 src/zlib-1.2.11/contrib/ada/read.adb               |   156 +
 src/zlib-1.2.11/contrib/ada/readme.txt             |    65 +
 src/zlib-1.2.11/contrib/ada/test.adb               |   463 +
 src/zlib-1.2.11/contrib/ada/zlib-streams.adb       |   225 +
 src/zlib-1.2.11/contrib/ada/zlib-streams.ads       |   114 +
 src/zlib-1.2.11/contrib/ada/zlib-thin.adb          |   141 +
 src/zlib-1.2.11/contrib/ada/zlib-thin.ads          |   450 +
 src/zlib-1.2.11/contrib/ada/zlib.adb               |   701 +
 src/zlib-1.2.11/contrib/ada/zlib.ads               |   328 +
 src/zlib-1.2.11/contrib/ada/zlib.gpr               |    20 +
 src/zlib-1.2.11/contrib/amd64/amd64-match.S        |   452 +
 src/zlib-1.2.11/contrib/asm686/README.686          |    51 +
 src/zlib-1.2.11/contrib/asm686/match.S             |   357 +
 src/zlib-1.2.11/contrib/blast/blast.c              |   466 +
 src/zlib-1.2.11/contrib/blast/blast.h              |    83 +
 src/zlib-1.2.11/contrib/blast/test.pk              |   Bin 0 -> 8 bytes
 src/zlib-1.2.11/contrib/blast/test.txt             |     1 +
 src/zlib-1.2.11/contrib/delphi/ZLib.pas            |   557 +
 src/zlib-1.2.11/contrib/delphi/ZLibConst.pas       |    11 +
 src/zlib-1.2.11/contrib/delphi/readme.txt          |    76 +
 src/zlib-1.2.11/contrib/delphi/zlibd32.mak         |    99 +
 src/zlib-1.2.11/contrib/dotzlib/DotZLib.build      |    33 +
 src/zlib-1.2.11/contrib/dotzlib/DotZLib.chm        |   Bin 0 -> 72726 bytes
 .../contrib/dotzlib/DotZLib/AssemblyInfo.cs        |    58 +
 .../contrib/dotzlib/DotZLib/ChecksumImpl.cs        |   202 +
 .../contrib/dotzlib/DotZLib/CircularBuffer.cs      |    83 +
 .../contrib/dotzlib/DotZLib/CodecBase.cs           |   198 +
 .../contrib/dotzlib/DotZLib/Deflater.cs            |   106 +
 src/zlib-1.2.11/contrib/dotzlib/DotZLib/DotZLib.cs |   288 +
 .../contrib/dotzlib/DotZLib/DotZLib.csproj         |   141 +
 .../contrib/dotzlib/DotZLib/GZipStream.cs          |   301 +
 .../contrib/dotzlib/DotZLib/Inflater.cs            |   105 +
 .../contrib/dotzlib/DotZLib/UnitTests.cs           |   274 +
 src/zlib-1.2.11/contrib/dotzlib/LICENSE_1_0.txt    |    23 +
 src/zlib-1.2.11/contrib/dotzlib/readme.txt         |    58 +
 src/zlib-1.2.11/contrib/gcc_gvmat64/gvmat64.S      |   574 +
 src/zlib-1.2.11/contrib/infback9/infback9.c        |   615 +
 src/zlib-1.2.11/contrib/infback9/infback9.h        |    37 +
 src/zlib-1.2.11/contrib/infback9/inffix9.h         |   107 +
 src/zlib-1.2.11/contrib/infback9/inflate9.h        |    47 +
 src/zlib-1.2.11/contrib/infback9/inftree9.c        |   324 +
 src/zlib-1.2.11/contrib/infback9/inftree9.h        |    61 +
 src/zlib-1.2.11/contrib/inflate86/inffas86.c       |  1157 ++
 src/zlib-1.2.11/contrib/inflate86/inffast.S        |  1368 ++
 src/zlib-1.2.11/contrib/iostream/test.cpp          |    24 +
 src/zlib-1.2.11/contrib/iostream/zfstream.cpp      |   329 +
 src/zlib-1.2.11/contrib/iostream/zfstream.h        |   128 +
 src/zlib-1.2.11/contrib/iostream2/zstream.h        |   307 +
 src/zlib-1.2.11/contrib/iostream2/zstream_test.cpp |    25 +
 src/zlib-1.2.11/contrib/iostream3/TODO             |    17 +
 src/zlib-1.2.11/contrib/iostream3/test.cc          |    50 +
 src/zlib-1.2.11/contrib/iostream3/zfstream.cc      |   479 +
 src/zlib-1.2.11/contrib/iostream3/zfstream.h       |   466 +
 src/zlib-1.2.11/contrib/masmx64/bld_ml64.bat       |     2 +
 src/zlib-1.2.11/contrib/masmx64/gvmat64.asm        |   553 +
 src/zlib-1.2.11/contrib/masmx64/inffas8664.c       |   186 +
 src/zlib-1.2.11/contrib/masmx64/inffasx64.asm      |   396 +
 src/zlib-1.2.11/contrib/masmx64/readme.txt         |    31 +
 src/zlib-1.2.11/contrib/masmx86/bld_ml32.bat       |     2 +
 src/zlib-1.2.11/contrib/masmx86/inffas32.asm       |  1080 ++
 src/zlib-1.2.11/contrib/masmx86/match686.asm       |   479 +
 src/zlib-1.2.11/contrib/masmx86/readme.txt         |    27 +
 src/zlib-1.2.11/contrib/minizip/Makefile.am        |    45 +
 .../contrib/minizip/MiniZip64_Changes.txt          |     6 +
 src/zlib-1.2.11/contrib/minizip/MiniZip64_info.txt |    74 +
 src/zlib-1.2.11/contrib/minizip/configure.ac       |    32 +
 src/zlib-1.2.11/contrib/minizip/crypt.h            |   131 +
 src/zlib-1.2.11/contrib/minizip/ioapi.c            |   247 +
 src/zlib-1.2.11/contrib/minizip/ioapi.h            |   208 +
 src/zlib-1.2.11/contrib/minizip/iowin32.c          |   462 +
 src/zlib-1.2.11/contrib/minizip/iowin32.h          |    28 +
 src/zlib-1.2.11/contrib/minizip/make_vms.com       |    25 +
 src/zlib-1.2.11/contrib/minizip/miniunz.c          |   660 +
 src/zlib-1.2.11/contrib/minizip/miniunzip.1        |    63 +
 src/zlib-1.2.11/contrib/minizip/minizip.1          |    46 +
 src/zlib-1.2.11/contrib/minizip/minizip.c          |   520 +
 src/zlib-1.2.11/contrib/minizip/minizip.pc.in      |    12 +
 src/zlib-1.2.11/contrib/minizip/mztools.c          |   291 +
 src/zlib-1.2.11/contrib/minizip/mztools.h          |    37 +
 src/zlib-1.2.11/contrib/minizip/unzip.c            |  2125 +++
 src/zlib-1.2.11/contrib/minizip/unzip.h            |   437 +
 src/zlib-1.2.11/contrib/minizip/zip.c              |  2007 ++
 src/zlib-1.2.11/contrib/minizip/zip.h              |   362 +
 src/zlib-1.2.11/contrib/pascal/example.pas         |   599 +
 src/zlib-1.2.11/contrib/pascal/readme.txt          |    76 +
 src/zlib-1.2.11/contrib/pascal/zlibd32.mak         |    99 +
 src/zlib-1.2.11/contrib/pascal/zlibpas.pas         |   276 +
 src/zlib-1.2.11/contrib/puff/puff.c                |   840 +
 src/zlib-1.2.11/contrib/puff/puff.h                |    35 +
 src/zlib-1.2.11/contrib/puff/pufftest.c            |   165 +
 src/zlib-1.2.11/contrib/puff/zeros.raw             |   Bin 0 -> 2517 bytes
 src/zlib-1.2.11/contrib/testzlib/testzlib.c        |   275 +
 src/zlib-1.2.11/contrib/testzlib/testzlib.txt      |    10 +
 src/zlib-1.2.11/contrib/untgz/Makefile.msc         |    17 +
 src/zlib-1.2.11/contrib/untgz/untgz.c              |   674 +
 src/zlib-1.2.11/contrib/vstudio/readme.txt         |    78 +
 src/zlib-1.2.11/contrib/vstudio/vc10/zlib.rc       |    32 +
 src/zlib-1.2.11/contrib/vstudio/vc10/zlibvc.def    |   153 +
 src/zlib-1.2.11/contrib/vstudio/vc11/zlib.rc       |    32 +
 src/zlib-1.2.11/contrib/vstudio/vc11/zlibvc.def    |   153 +
 src/zlib-1.2.11/contrib/vstudio/vc12/zlib.rc       |    32 +
 src/zlib-1.2.11/contrib/vstudio/vc12/zlibvc.def    |   153 +
 src/zlib-1.2.11/contrib/vstudio/vc14/zlib.rc       |    32 +
 src/zlib-1.2.11/contrib/vstudio/vc14/zlibvc.def    |   153 +
 src/zlib-1.2.11/contrib/vstudio/vc9/miniunz.vcproj |   565 +
 src/zlib-1.2.11/contrib/vstudio/vc9/minizip.vcproj |   562 +
 .../contrib/vstudio/vc9/testzlib.vcproj            |   852 +
 .../contrib/vstudio/vc9/testzlibdll.vcproj         |   565 +
 src/zlib-1.2.11/contrib/vstudio/vc9/zlib.rc        |    32 +
 .../contrib/vstudio/vc9/zlibstat.vcproj            |   835 +
 src/zlib-1.2.11/contrib/vstudio/vc9/zlibvc.def     |   153 +
 src/zlib-1.2.11/contrib/vstudio/vc9/zlibvc.vcproj  |  1156 ++
 src/zlib-1.2.11/crc32.c                            |   442 +
 src/zlib-1.2.11/crc32.h                            |   441 +
 src/zlib-1.2.11/deflate.c                          |  2163 +++
 src/zlib-1.2.11/deflate.h                          |   349 +
 src/zlib-1.2.11/doc/algorithm.txt                  |   209 +
 src/zlib-1.2.11/doc/rfc1950.txt                    |   619 +
 src/zlib-1.2.11/doc/rfc1951.txt                    |   955 +
 src/zlib-1.2.11/doc/rfc1952.txt                    |   675 +
 src/zlib-1.2.11/doc/txtvsbin.txt                   |   107 +
 src/zlib-1.2.11/examples/README.examples           |    49 +
 src/zlib-1.2.11/examples/enough.c                  |   572 +
 src/zlib-1.2.11/examples/fitblk.c                  |   233 +
 src/zlib-1.2.11/examples/gun.c                     |   702 +
 src/zlib-1.2.11/examples/gzappend.c                |   504 +
 src/zlib-1.2.11/examples/gzjoin.c                  |   449 +
 src/zlib-1.2.11/examples/gzlog.c                   |  1059 ++
 src/zlib-1.2.11/examples/gzlog.h                   |    91 +
 src/zlib-1.2.11/examples/zlib_how.html             |   545 +
 src/zlib-1.2.11/examples/zpipe.c                   |   205 +
 src/zlib-1.2.11/examples/zran.c                    |   409 +
 src/zlib-1.2.11/gzclose.c                          |    25 +
 src/zlib-1.2.11/gzguts.h                           |   218 +
 src/zlib-1.2.11/gzlib.c                            |   637 +
 src/zlib-1.2.11/gzread.c                           |   656 +
 src/zlib-1.2.11/gzwrite.c                          |   667 +
 src/zlib-1.2.11/infback.c                          |   640 +
 src/zlib-1.2.11/inffast.c                          |   323 +
 src/zlib-1.2.11/inffast.h                          |    11 +
 src/zlib-1.2.11/inffixed.h                         |    94 +
 src/zlib-1.2.11/inflate.c                          |  1561 ++
 src/zlib-1.2.11/inflate.h                          |   125 +
 src/zlib-1.2.11/inftrees.c                         |   304 +
 src/zlib-1.2.11/inftrees.h                         |    62 +
 src/zlib-1.2.11/make_vms.com                       |   867 +
 src/zlib-1.2.11/msdos/Makefile.bor                 |   115 +
 src/zlib-1.2.11/msdos/Makefile.dj2                 |   104 +
 src/zlib-1.2.11/msdos/Makefile.emx                 |    69 +
 src/zlib-1.2.11/msdos/Makefile.msc                 |   112 +
 src/zlib-1.2.11/msdos/Makefile.tc                  |   100 +
 src/zlib-1.2.11/old/Makefile.emx                   |    69 +
 src/zlib-1.2.11/old/Makefile.riscos                |   151 +
 src/zlib-1.2.11/old/descrip.mms                    |    48 +
 src/zlib-1.2.11/old/os2/Makefile.os2               |   136 +
 src/zlib-1.2.11/old/os2/zlib.def                   |    51 +
 src/zlib-1.2.11/old/visual-basic.txt               |   160 +
 src/zlib-1.2.11/os400/README400                    |    48 +
 src/zlib-1.2.11/os400/bndsrc                       |   119 +
 src/zlib-1.2.11/os400/make.sh                      |   366 +
 src/zlib-1.2.11/os400/zlib.inc                     |   527 +
 src/zlib-1.2.11/qnx/package.qpg                    |   141 +
 src/zlib-1.2.11/test/example.c                     |   602 +
 src/zlib-1.2.11/test/infcover.c                    |   671 +
 src/zlib-1.2.11/test/minigzip.c                    |   651 +
 src/zlib-1.2.11/treebuild.xml                      |   116 +
 src/zlib-1.2.11/trees.c                            |  1203 ++
 src/zlib-1.2.11/trees.h                            |   128 +
 src/zlib-1.2.11/uncompr.c                          |    93 +
 src/zlib-1.2.11/watcom/watcom_f.mak                |    43 +
 src/zlib-1.2.11/watcom/watcom_l.mak                |    43 +
 src/zlib-1.2.11/win32/DLL_FAQ.txt                  |   397 +
 src/zlib-1.2.11/win32/Makefile.bor                 |   110 +
 src/zlib-1.2.11/win32/Makefile.gcc                 |   182 +
 src/zlib-1.2.11/win32/Makefile.msc                 |   163 +
 src/zlib-1.2.11/win32/README-WIN32.txt             |   103 +
 src/zlib-1.2.11/win32/VisualC.txt                  |     3 +
 src/zlib-1.2.11/win32/zlib.def                     |    94 +
 src/zlib-1.2.11/win32/zlib1.rc                     |    40 +
 src/zlib-1.2.11/zconf.h.cmakein                    |   536 +
 src/zlib-1.2.11/zconf.h.in                         |   534 +
 src/zlib-1.2.11/zlib.3                             |   149 +
 src/zlib-1.2.11/zlib.3.pdf                         |   Bin 0 -> 19318 bytes
 src/zlib-1.2.11/zlib.h                             |  1912 ++
 src/zlib-1.2.11/zlib.map                           |    94 +
 src/zlib-1.2.11/zlib.pc.cmakein                    |    13 +
 src/zlib-1.2.11/zlib.pc.in                         |    13 +
 src/zlib-1.2.11/zlib2ansi                          |   152 +
 src/zlib-1.2.11/zutil.c                            |   325 +
 src/zlib-1.2.11/zutil.h                            |   271 +
 254 files changed, 152756 insertions(+)

commit 0a007e73f52ceca5dd4f1de1a174537bad1701e7
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jun 30 13:49:58 2017 -0700

    CDRIVER-2118 Add --with-[snappy|zlib]=bundled

 .evergreen/check-release-archive.sh |  3 ++-
 .evergreen/compile-unix.sh          |  6 +++---
 Makefile.am                         | 10 +++++++++-
 build/autotools/CheckSnappy.m4      |  7 ++++---
 build/autotools/CheckZlib.m4        |  7 ++++---
 5 files changed, 22 insertions(+), 11 deletions(-)

commit 3099c6d12740fd7870d01f7493bb36cafb7a3b95
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jun 30 15:28:59 2017 -0700

    CDRIVER-2118 Expand test matrix for compression

 .evergreen/compile-unix.sh | 26 ++++++++++++++++++++------
 .evergreen/config.yml      | 26 +++++++++++++++-----------
 2 files changed, 35 insertions(+), 17 deletions(-)

commit f727174fcc680f837f6a84235673f9527593a6cd
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 11 13:00:06 2017 -0700

    Only empty line between sections

 build/autotools/PrintBuildConfiguration.m4 | 1 -
 1 file changed, 1 deletion(-)

commit 0f15716e1384a2dc5f0a5e0b589f36c87fa9d3b7
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 7 09:40:34 2017 -0700

    Fix segfault when tracing and tags don't match

 src/mongoc/mongoc-server-description.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 0c618710c1dd3c36c85b377842830182fc7af4dd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 6 15:46:40 2017 -0700

    CDRIVER-2202: Fix Big Endian support for OP_COMPRESSED

 src/mongoc/mongoc-async-cmd.c   |   8 +--
 src/mongoc/mongoc-cluster.c     |  43 ++++++++++-----
 src/mongoc/mongoc-cursor.c      |  36 -------------
 src/mongoc/mongoc-rpc-private.h |   4 +-
 src/mongoc/mongoc-rpc.c         | 117 ++++++++++++++++++++++++++++++++--------
 5 files changed, 133 insertions(+), 75 deletions(-)

commit 2fd22c982a6c6db51c3955c6aa90f5c138cc372e
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 10 15:55:13 2017 -0700

    CDRIVER-2204 Rename --enable-[snappy|zlib] to --with-[snappy|zlib]

 .evergreen/compile-unix.sh                  |  2 +-
 .evergreen/config.yml                       |  6 ++--
 Makefile.am                                 |  4 ++-
 NEWS                                        |  2 +-
 build/autotools/CheckSnappy.m4              | 56 +++++++++++++++--------------
 build/autotools/CheckZlib.m4                | 55 ++++++++++++++--------------
 build/autotools/PrintBuildConfiguration.m4  |  5 +--
 build/autotools/ReadCommandLineArguments.m4 | 16 +++++++++
 build/autotools/SetupAutomake.m4            |  6 ++++
 configure.ac                                |  2 +-
 10 files changed, 91 insertions(+), 63 deletions(-)

commit 99abf581afd54dd33c761dbca97f5d29a389d1f5
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 11 12:45:52 2017 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f85890370b2c1e77450c85573465781671eda54
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 28 21:41:08 2017 -0400

    CDRIVER-2192 internal struct mongoc_cmd_t
    
    Prepare to implement sessions and OP_MSG.

 CMakeLists.txt                      |   1 +
 src/mongoc/Makefile.am              |   2 +
 src/mongoc/mongoc-client-private.h  |   5 -
 src/mongoc/mongoc-client.c          | 181 +++++---------------
 src/mongoc/mongoc-cluster-cyrus.c   |   8 +-
 src/mongoc/mongoc-cluster-private.h |  11 +-
 src/mongoc/mongoc-cluster.c         | 159 +++++++----------
 src/mongoc/mongoc-cmd-private.h     |  86 ++++++++++
 src/mongoc/mongoc-cmd.c             | 328 ++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-collection.c      |  78 ++++-----
 src/mongoc/mongoc-cursor.c          |  33 ++--
 src/mongoc/mongoc-read-prefs.c      |   6 +
 src/mongoc/mongoc-rpc-private.h     |   4 +-
 src/mongoc/mongoc-rpc.c             |  10 +-
 src/mongoc/mongoc-write-command.c   |  16 +-
 15 files changed, 597 insertions(+), 331 deletions(-)

commit 82b25b757299ef18235c01979946c639f1db8dbd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 10 22:17:10 2017 -0400

    CDRIVER-2206 mongoc_read/write_concern_is_default
    
    New function mongoc_write_concern_is_default determines if any write
    concern options have been set, and mongoc_read_concern_is_default checks
    if read concern options are set.

 NEWS                                      |  3 +++
 doc/mongoc_read_concern_is_default.rst    | 22 ++++++++++++++++++++++
 doc/mongoc_read_concern_t.rst             |  1 +
 doc/mongoc_write_concern_is_default.rst   | 23 +++++++++++++++++++++++
 doc/mongoc_write_concern_t.rst            |  1 +
 src/mongoc/mongoc-client.c                |  4 ++--
 src/mongoc/mongoc-cursor.c                |  2 +-
 src/mongoc/mongoc-read-concern-private.h  |  2 --
 src/mongoc/mongoc-read-concern.c          |  6 ++----
 src/mongoc/mongoc-read-concern.h          |  3 ++-
 src/mongoc/mongoc-uri.c                   |  2 +-
 src/mongoc/mongoc-write-concern-private.h |  2 --
 src/mongoc/mongoc-write-concern.c         |  6 ++----
 src/mongoc/mongoc-write-concern.h         |  2 ++
 tests/test-mongoc-connection-uri.c        |  2 +-
 15 files changed, 63 insertions(+), 18 deletions(-)

commit bc38da07c709acf733f3bb9b16295a5cf4658661
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 10 14:23:08 2017 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 090ccb6f92b80ec06818717ee4a532f27f813927
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 10 14:19:32 2017 -0700

    Bump version

 NEWS            | 13 +++++++++++++
 VERSION_CURRENT |  2 +-
 2 files changed, 14 insertions(+), 1 deletion(-)

commit 9d1873fa87a4b6b4a11db30a44eebd35891532c6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 5 16:40:00 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7bdcff56c577eecc393817f1d37d3107527fed68
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 5 16:39:22 2017 -0400

    NEWS for 1.7.0

 NEWS | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 5d93d21341d143c34d7074835a339acab51a40f3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 5 16:31:30 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4b3a32a7055705dc9586d4f0e41ceee91e017d94
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 3 12:37:02 2017 -0400

    CDRIVER-1920 connection pooling guide

 doc/connection-pooling.rst   | 54 ++++++++++++++++++++++++++++++++++++++++++++
 doc/guides.rst               |  1 +
 doc/mongoc_client_pool_t.rst |  2 +-
 doc/mongoc_client_t.rst      |  6 ++---
 doc/mongoc_uri_t.rst         |  2 ++
 5 files changed, 61 insertions(+), 4 deletions(-)

commit ebb485ff0c1d6f25535ec015ef3e88691bd3129a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 30 09:15:11 2017 -0400

    CDRIVER-2075 retry ismaster once
    
    Server Discovery and Monitoring Spec: "Once a server is connected, the
    client MUST change its type to Unknown only after it has retried the
    server once."

 src/mongoc/mongoc-topology-scanner-private.h |   9 +-
 src/mongoc/mongoc-topology-scanner.c         |  14 +-
 src/mongoc/mongoc-topology.c                 |  29 ++-
 tests/TestSuite.h                            |  17 ++
 tests/test-mongoc-client.c                   |   6 +
 tests/test-mongoc-topology.c                 | 342 ++++++++++++++++++++++++++-
 6 files changed, 395 insertions(+), 22 deletions(-)

commit 5799548c54aff7b996eb51179e6665fa283fc8ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 29 22:33:03 2017 -0400

    whitespace

 src/mongoc/mongoc-topology-description.c | 2 +-
 src/mongoc/mongoc-topology.c             | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 372a3d568eff4e922f669b2796f8443bf9bbd5bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 30 16:36:24 2017 -0400

    CDRIVER-2178 TOCTOU warning in example code
    
    Coverity warns about time-of-check, time-of-use race in mongoc-dump.c.

 examples/mongoc-dump.c | 24 +++++++-----------------
 1 file changed, 7 insertions(+), 17 deletions(-)

commit d573130858a9252df958d2e688936814da4c12f7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 30 14:36:34 2017 -0400

    CDRIVER-2173 unused argument

 src/mongoc/mongoc-async-cmd.c      | 4 ++--
 src/mongoc/mongoc-buffer-private.h | 3 +--
 src/mongoc/mongoc-buffer.c         | 6 ++----
 3 files changed, 5 insertions(+), 8 deletions(-)

commit 87fcd65cabafab39cde49fd87ae2382aacda133a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 30 09:15:53 2017 -0400

    disable solaris tests

 .evergreen/config.yml | 74 +++++++++++++++++++++++++--------------------------
 1 file changed, 37 insertions(+), 37 deletions(-)

commit 4148c997db04adf5fff1f5faa551be1452ced25b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 28 21:50:45 2017 -0400

    CDRIVER-2195 fix some write concern docs

 doc/mongoc_collection_rename_with_opts.rst | 2 +-
 doc/mongoc_database_create_collection.rst  | 2 +-
 doc/mongoc_database_drop_with_opts.rst     | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 756e9e18bfe85e062883299d26e229d0d81b586f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 18 10:08:45 2017 -0700

    CDRIVER-2157 link a sample program with MinGW-64

 .evergreen/check-installed-files.bat     |  45 +++++++++++
 .evergreen/config.yml                    |  29 ++++++-
 .evergreen/link-sample-program-mingw.bat |  94 ++++++++++++++++++++++
 .evergreen/link-sample-program-msvc.bat  |  91 ++++++++++++++++++++++
 .evergreen/link-sample-program.bat       | 130 -------------------------------
 CMakeLists.txt                           |   6 +-
 src/mongoc/mongoc-cluster-cyrus.c        |   4 -
 src/mongoc/mongoc-cluster-sasl.c         |   2 +
 8 files changed, 262 insertions(+), 139 deletions(-)

commit 6540c1032c4c945ac99d5526460ff450b8b310fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 19 19:36:37 2017 -0500

    unused function
    
    Introduced by mistake while implementing CDRIVER-2190.

 src/mongoc/mongoc-uri.c | 29 -----------------------------
 1 file changed, 29 deletions(-)

commit 056a0f963a67331308d70448323db40d985c4eed
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 12 22:25:48 2017 -0400

    CDRIVER-2190 uname and password must be percent-encoded

 src/mongoc/mongoc-uri.c                            | 360 ++++++++++-----
 .../connection_uri/valid-unix_socket-absolute.json | 498 ++++++++++----------
 .../connection_uri/valid-unix_socket-relative.json | 510 ++++++++++-----------
 tests/test-mongoc-uri.c                            |  24 +-
 4 files changed, 757 insertions(+), 635 deletions(-)

commit a0884b6f86cecfca7f46f1bdd89b933f56f0bd74
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 12 21:40:29 2017 -0400

    CDRIVER-2190 update URI JSON tests

 tests/json/connection_uri/invalid-uris.json | 472 +++++++++++-----------
 tests/json/connection_uri/valid-auth.json   | 582 ++++++++++++++--------------
 2 files changed, 545 insertions(+), 509 deletions(-)

commit 182f2b0cbc32013897f1566d66b90137a9a7e5b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 9 21:38:36 2017 -0400

    CDRIVER-2158 preserve case of domain socket paths

 NEWS                            |  1 +
 src/mongoc/mongoc-uri-private.h |  2 +-
 src/mongoc/mongoc-uri.c         | 19 ++++++++++++-------
 tests/test-mongoc-uri.c         |  9 ++++++++-
 4 files changed, 22 insertions(+), 9 deletions(-)

commit 6039a1ad6abd7f50023feb3823553062fbac8856
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 19 14:35:37 2017 -0700

    Revert "CDRIVER-2188 Bump evergreen to macos-1012 as osx-1010 is being decomissioned"
    
    This reverts commit 997a823969938e7f893f124d280ba0f42d3840ac.
    
    This commit only solved some of the problem, not all

 .evergreen/compile-unix.sh | 2 +-
 .evergreen/config.yml      | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 997a823969938e7f893f124d280ba0f42d3840ac
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 19 14:19:41 2017 -0700

    CDRIVER-2188 Bump evergreen to macos-1012 as osx-1010 is being decomissioned

 .evergreen/compile-unix.sh | 2 +-
 .evergreen/config.yml      | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 1867f878ad280766d3573aa6eaec3fb2816b4f78
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 19 10:03:57 2017 -0700

    CDRIVER-2116 Skip compression builds on 32bit

 .evergreen/compile-unix.sh | 2 ++
 1 file changed, 2 insertions(+)

commit f21010190e03441fe8770ad09a904b0d2dffb5f4
Merge: 80c91b9 5a6003c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 19 09:52:36 2017 -0700

    Merge branch 'evergreen-fix' into CDRIVER-2037-static-pkg
    
    * evergreen-fix:
      CDRIVER-2074 Fix static linking evergreen matrix to fail on error

commit 5a6003cdea18299d2334968a13c36e41a3214a3d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 19 09:48:58 2017 -0700

    CDRIVER-2074 Fix static linking evergreen matrix to fail on error

 .evergreen/config.yml | 6 ++++++
 1 file changed, 6 insertions(+)

commit 80c91b9d4bd7a6d87707179aefa523e8bc9ff40b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 19 09:48:28 2017 -0700

    CDRIVER-2037 Fix static linking when compression is enabled

 CMakeLists.txt                                   | 6 +++---
 build/cmake/libmongoc-static-1.0-config.cmake.in | 2 +-
 configure.ac                                     | 2 +-
 src/libmongoc-1.0.pc.in                          | 2 +-
 src/libmongoc-static-1.0.pc.in                   | 2 +-
 5 files changed, 7 insertions(+), 7 deletions(-)

commit 5980128eabf2c3a8d3f5bc7a51eb9b54b2ae2982
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 17 21:31:23 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e355f8f20ceb5ba049ae6819be33e67b87068deb
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jun 16 15:31:56 2017 -0700

    CDRIVER-2116 Fix type warning on clang

 src/mongoc/mongoc-compression.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 53ac72ee834cab1109ec290c728408c191e12a8a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jun 16 15:07:32 2017 -0700

    CDRIVER-2116 Enable compression support by default

 .evergreen/config.yml                          | 109 +++++++++++++++++++++++--
 NEWS                                           |   7 +-
 build/autotools/PrintBuildConfiguration.m4     |   7 +-
 configure.ac                                   |  24 +++---
 orchestration_configs/servers/snappy-zlib.json |  11 +++
 orchestration_configs/servers/snappy.json      |  11 +++
 orchestration_configs/servers/zlib.json        |  11 +++
 7 files changed, 152 insertions(+), 28 deletions(-)

commit 9f9934dcd9d7de3e7f8db315145106df44edee23
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 15 15:01:55 2017 -0400

    CDRIVER-2172 check idle socket with "ping"
    
    Server Selection Spec update for single-threaded drivers.
    
    If a server is selected that has an existing connection that has been idle for
    socketCheckIntervalMS, the driver MUST check the connection with the "ping"
    command. If the ping succeeds, use the selected connection. If not, set the
    server's type to Unknown and update the Topology Description according to the
    Server Discovery and Monitoring Spec, and attempt once more to select a server.

 src/mongoc/mongoc-client.c             |   4 +-
 src/mongoc/mongoc-cluster-private.h    |   3 +-
 src/mongoc/mongoc-cluster.c            |  62 ++++++++++----------
 src/mongoc/mongoc-collection.c         |  33 +++++------
 src/mongoc/mongoc-server-description.c |   1 +
 tests/test-mongoc-client.c             | 103 +++++++++++++++++++++++++++++++--
 6 files changed, 147 insertions(+), 59 deletions(-)

commit 28ed9801d233ef24116c74ff2bb1894be3c638c6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 13 09:10:06 2017 -0400

    make CSS style of links consistent

 doc/mongoc-theme/static/mongoc.css_t | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 80925c2e9479abccecd74c243093827551494323
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 15 12:12:32 2017 -0700

    CDRIVER-2177 memleak on compression failure

 src/mongoc/mongoc-rpc.c | 1 +
 1 file changed, 1 insertion(+)

commit 3a099a3735b2d9cbbcfe812a3395257de6c2d1ed
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 15 12:10:08 2017 -0700

    CDRIVER-2171 make uninstall fixes

 Makefile.am | 4 ++--
 src/libbson | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 206fcfb774154b24657c379b9f2af7704479500b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 14 17:28:34 2017 -0700

    CDRIVER-2083 Fix windows build

 CMakeLists.txt | 4 ++++
 1 file changed, 4 insertions(+)

commit d4ba500a429a26df508b89901284c8221a4224f8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 14 10:07:03 2017 -0700

    Simplify the test code command again
    
    Internal isMaster commands should not be compressed, but user triggered
    isMaster is fair game. We previously had asserts to ensure no
    non-compressable commands would get compressed, which this check
    would hit. Now that check has been removed and no longer need for this
    workaround

 tests/test-libmongoc.c | 16 ++--------------
 1 file changed, 2 insertions(+), 14 deletions(-)

commit fed9e52d6339bf31cd487cd2ad1f6e696baf9faf
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 12 11:34:42 2017 -0700

    Resolve bad merge

 examples/Makefile.am | 4 ----
 1 file changed, 4 deletions(-)

commit 30f5c0baa0bc001dd8145267a0ded4889bec5e30
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 12 11:32:32 2017 -0700

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6ffc637e9225e6080cd5a44e9e7e2afe4b6a5ab8
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 12 11:24:34 2017 -0700

    CDRIVER-2083 Use consistent path for the artifacts

 CMakeLists.txt | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 6c2c918551608657461969ccc3154bfc979b9ca2
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 12 11:24:15 2017 -0700

    CDRIVER-2175 pthreads not correctly compiled in

 examples/Makefile.am | 7 +++++++
 1 file changed, 7 insertions(+)

commit 6040421156526930a8d4adc9acd222696454137c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jun 9 12:27:46 2017 -0700

    CDRIVER-2083 Raise a warning when using CMake on non-Windows platform

 CMakeLists.txt | 6 +++++-
 NEWS           | 2 ++
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 1f0cb5a1644cd662718418001c9bef16469241af
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 8 10:42:32 2017 -0700

    CDRIVER-2175 pthreads not compiled correctly in

 CMakeLists.txt       | 9 +++++++--
 examples/Makefile.am | 8 ++++++--
 2 files changed, 13 insertions(+), 4 deletions(-)

commit 4db9aeb477d13a1eb66f2111bc21e6fbe5611c46
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 10 22:42:08 2017 -0400

    stray references to .page files

 .gitignore      | 1 -
 CONTRIBUTING.md | 4 ++--
 2 files changed, 2 insertions(+), 3 deletions(-)

commit 79869c5d00b8aba41932ed22bf79cad5a992bd2e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 9 18:53:45 2017 -0400

    test suite crashes if no server is running

 tests/test-libmongoc.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 3f1a09b8d1c277df0b7efb79c5fc2acb03bf0d3b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 7 12:33:15 2017 -0400

    CDRIVER-2172 robust mongoc_client_server_select
    
    If a server is selected and its socket has not been used in 5 seconds,
    check if the socket is still good and retry once if not.

 build/generate-future-functions.py   |   7 +++
 src/mongoc/mongoc-client.c           |  27 ++++++++--
 src/mongoc/mongoc-cluster-private.h  |   5 ++
 src/mongoc/mongoc-cluster.c          |  48 ++++++++++-------
 tests/mock_server/future-functions.c |  48 +++++++++++++++++
 tests/mock_server/future-functions.h |  10 ++++
 tests/test-mongoc-client.c           |  89 +++++++++++++++++++++++++++++++
 tests/test-mongoc-cluster.c          | 100 -----------------------------------
 8 files changed, 212 insertions(+), 122 deletions(-)

commit eb9b73c3038018303ce2dc119d31892ed7715268
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 7 12:26:29 2017 -0400

    fix errorlog in Evergreen

 .evergreen/compile-unix.sh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 804e9814174b32589f828c41534c5d91536015e4
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jun 2 14:56:38 2017 -0700

    Fix OpenSSL builds after new releases

 .evergreen/compile-unix.sh     | 13 ++++++++++---
 .evergreen/config.yml          |  4 ++--
 tests/test-mongoc-stream-tls.c |  6 +++---
 3 files changed, 15 insertions(+), 8 deletions(-)

commit a3c8a760ce90f144fd65d8a4a6e3606cbeea2f6b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 17 14:17:52 2017 -0700

    CDRIVER-2162 Import the CA store regardless if the root store failed

 src/mongoc/mongoc-openssl.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit e2ae5584d5608a4f8722263598e89a733c28041c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 16 16:32:26 2017 -0700

    CDRIVER-2162 Automate Atlas connectivity tests

 .evergreen/compile-unix.sh   |   2 +-
 .evergreen/config.yml        | 235 ++++++++++++++++---------------------------
 .evergreen/run-auth-tests.sh |  28 ++++++
 3 files changed, 115 insertions(+), 150 deletions(-)

commit b402d86f1d8d8ded80ae89d74528d41955f5769d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri May 26 11:44:04 2017 -0700

    CDRIVER-2170 Check the right option

 src/mongoc/mongoc-sasl.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1adc69ce051e8c0606d8f58655fda0b62cef4e14
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri May 26 10:03:26 2017 -0700

    CDRIVER-2170 Missing include

 src/mongoc/mongoc-cluster-sspi.c | 1 +
 1 file changed, 1 insertion(+)

commit 6932241642ed6fab01ee8e1a3d91efefcd5f90ea
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 2 14:06:07 2017 -0700

    CDRIVER-2170 Refactor Cyrus-SASL & Bootstrap RFC compliant GSS-API support

 CMakeLists.txt                             |  26 +-
 build/autotools/CheckSasl.m4               | 110 +++++---
 examples/parse_handshake_cfg.py            |   3 +-
 src/mongoc/Makefile.am                     |  19 +-
 src/mongoc/mongoc-cluster-cyrus-private.h  |  33 +++
 src/mongoc/mongoc-cluster-cyrus.c          | 134 +++++++++
 src/mongoc/mongoc-cluster-gssapi-private.h |  33 +++
 src/mongoc/mongoc-cluster-gssapi.c         |  53 ++++
 src/mongoc/mongoc-cluster-private.h        |  14 +
 src/mongoc/mongoc-cluster-sasl-private.h   |   6 -
 src/mongoc/mongoc-cluster-sasl.c           | 223 ++-------------
 src/mongoc/mongoc-cluster-sspi.c           |  38 ++-
 src/mongoc/mongoc-cluster.c                |  10 -
 src/mongoc/mongoc-config.h.in              |  11 +
 src/mongoc/mongoc-cyrus-private.h          |  77 ++++++
 src/mongoc/mongoc-cyrus.c                  | 425 +++++++++++++++++++++++++++++
 src/mongoc/mongoc-gssapi-private.h         |  44 +++
 src/mongoc/mongoc-gssapi.c                 |  28 ++
 src/mongoc/mongoc-handshake-private.h      |   1 +
 src/mongoc/mongoc-handshake.c              |   4 +
 src/mongoc/mongoc-init.c                   |  20 +-
 src/mongoc/mongoc-sasl-private.h           |  46 +---
 src/mongoc/mongoc-sasl.c                   | 398 +++++----------------------
 tests/Makefile.am                          |   2 +-
 tests/test-cyrus.c                         | 190 +++++++++++++
 tests/test-sasl.c                          | 190 -------------
 26 files changed, 1287 insertions(+), 851 deletions(-)

commit 9982861dac67bae659ce8a3370b18c3a44f764fc
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu May 25 10:32:45 2017 -0700

    Missing news entry about mongoc_uri_new_with_error

 NEWS | 2 ++
 1 file changed, 2 insertions(+)

commit 420d16f1dea54a2d22cca3e654e40a5587724806
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 22 13:39:21 2017 -0700

    CDRIVER-2163 Only claim full support for things we actually tests in CI

 doc/installing.rst | 25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)

commit 5d5329f215df98b435327269effa2ec6581d9a74
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 22 11:18:46 2017 -0700

    CDRIVER-2165 Ensure fallback to sspi/schannel works
    
    On Windows, OpenSSL and Cyrus SASL are unlikely to be available.
    By default, we'll fallback to compiling against SSPI/Schannel which
    is always available on Windows.

 CMakeLists.txt | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 8cbbd9662078de76eca4d7f6dd98cf676699df77
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 18 10:35:41 2017 -0700

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f9d2bf41c326f8cdcd487d592076a90ff5281b90
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 18 10:33:21 2017 -0700

    CDRIVER-2161 sphinx 1.6 compatibility

 doc/mongoc/__init__.py | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 197c2278a1b5bce16119a2ad889b6fbb0f11d712
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 17 19:40:22 2017 -0400

    CDRIVER-2161 sphinx 1.6 compatibility

 doc/conf.py | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 31a93c95b90810c5cfe5e4648a8ee781ca5da617
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 17 11:10:07 2017 -0400

    CDRIVER-2016 on error, report which key is invalid

 src/mongoc/mongoc-cursor.c     | 28 +++++++++++-------
 src/mongoc/mongoc-util.c       | 35 +++++++++++++++-------
 tests/test-bulk.c              | 67 +++++++++++++++++++++++++-----------------
 tests/test-mongoc-collection.c |  8 ++---
 tests/test-mongoc-cursor.c     |  6 ++--
 5 files changed, 88 insertions(+), 56 deletions(-)

commit 15ed1b8348c307891d45b8b43c310c50968c842a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 17 12:29:10 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1c7f61ee2bf5544e2e149b95be4dcf1d7c142543
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 17 11:10:30 2017 -0400

    parse MONGOC_CHECK_IPV6 the same as other test vars

 CONTRIBUTING.md            | 4 ++++
 tests/test-mongoc-client.c | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

commit cfaac760e40908b5dddea6d8ee03fb6498bb950d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 16 15:40:33 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit be9bb9fbf9124f25f7461c5c3f035dd9f813c2ce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 16 15:39:15 2017 -0400

    CDRIVER-2161 sphinx 1.6 compatibility

 doc/mongoc/__init__.py | 6 ++++++
 1 file changed, 6 insertions(+)

commit d1f6383ee83e0c7d97978b26fc192d8adadf4d0a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 9 12:42:13 2017 -0400

    CDRIVER-2155 fix IPv6 parsing in pooled mode

 src/mongoc/mongoc-host-list.c | 68 +++++++++++++++++++++++++++---
 src/mongoc/mongoc-uri.c       |  5 +++
 tests/test-mongoc-client.c    | 48 +++++++++++++++++++---
 tests/test-mongoc-uri.c       | 96 +++++++++++++++++++++++++++++++++++++++++--
 4 files changed, 202 insertions(+), 15 deletions(-)

commit 7243a236db06016fdba20445a3ada800f5547000
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 9 18:24:46 2017 -0400

    curl --retry in more evergreen tests

 .evergreen/benchmark.yml       | 6 +++---
 .evergreen/compile-unix.sh     | 6 +++---
 .evergreen/download-mongodb.sh | 2 +-
 3 files changed, 7 insertions(+), 7 deletions(-)

commit d065d85036a91f80b539047e7e02323f950fce26
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 6 16:46:50 2017 -0400

    CDRIVER-2028 32-bit overflow in GridFS uploadDate

 src/mongoc/mongoc-gridfs-file.c |  2 +-
 tests/test-mongoc-gridfs.c      | 16 +++++++++++++++-
 2 files changed, 16 insertions(+), 2 deletions(-)

commit a08c413e830ab49fccef1317ad7bd3a725f4bbea
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 10 15:35:17 2017 -0700

    CDRIVER-2156 Ignore clang-format for generated test code

 build/generate-future-functions.py   | 3 ++-
 tests/mock_server/future-functions.c | 1 +
 tests/mock_server/future-functions.h | 1 +
 tests/mock_server/future-value.c     | 1 +
 tests/mock_server/future-value.h     | 1 +
 tests/mock_server/future.c           | 1 +
 tests/mock_server/future.h           | 1 +
 7 files changed, 8 insertions(+), 1 deletion(-)

commit a6374ffccb80f389b997c6f37dfc4bd9d1798ad3
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 10 13:31:44 2017 -0700

    CDRIVER-2150 Improve consistency with similar test cases

 tests/test-mongoc-client.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 7c2a74bac8fa7b51a08de0c1d66471a9fdf45ddc
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 9 15:41:47 2017 -0700

    CDRIVER-2150 Add test

 tests/test-libmongoc.c     |  2 +-
 tests/test-mongoc-client.c | 97 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 98 insertions(+), 1 deletion(-)

commit fc3ff3bdbcce8a1dfc86a2c9a10e4943a3c8eb10
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 9 12:54:51 2017 -0700

    CDRIVER-2150 Cache the computed ClientKey, ServerKey and SaltdPassword

 src/mongoc/mongoc-cluster-private.h |  4 ++
 src/mongoc/mongoc-cluster.c         | 23 ++++++++++
 src/mongoc/mongoc-scram-private.h   | 18 ++++++++
 src/mongoc/mongoc-scram.c           | 88 ++++++++++++++++++++++++++-----------
 4 files changed, 108 insertions(+), 25 deletions(-)

commit b66260ec58fd6df2ac338fb8861e286aa51f7123
Merge: be1ec8e 85e4615
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 9 16:01:31 2017 -0700

    Merge branch 'compression-blacklist'
    
    * compression-blacklist:
      CDRIVER-2116 Add more compression blacklisted commands

commit be1ec8ec59df832dffc17c509c0d0038f937d56e
Merge: 9a8f9b7 ca97a91
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 9 16:00:53 2017 -0700

    Merge branch 'CDRIVER-2153-pool-ssl'
    
    * CDRIVER-2153-pool-ssl:
      CDRIVER-2153 Install our custom CA to the system trust store
      CDRIVER-2153 Add SNI support for the mock server
      CDRIVER-2153 mongoc_client_pool_t cannot connect to MongoDB Atlas
      CDRIVER-2154 SNI not provided when allow_invalid_hostname is set

commit ca97a9164cdc7851cb07457b9e597498b8264e02
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 8 17:32:25 2017 -0700

    CDRIVER-2153 Install our custom CA to the system trust store
    
    This will only work on certain ubuntu versions

 .evergreen/run-tests.sh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 97dddf96ff1a83d0d6cddac72877bd65ece688b6
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 8 16:16:57 2017 -0700

    CDRIVER-2153 Add SNI support for the mock server

 src/mongoc/mongoc-stream-tls-openssl.c | 42 +++++++++++++++++++++++++++++-----
 1 file changed, 36 insertions(+), 6 deletions(-)

commit 9a8f9b79514787d258ed09fd03a36b1d147f357f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 6 16:10:10 2017 -0400

    CDRIVER-2026 optimize mongoc_gridfs_find_one_with_opts

 NEWS                                 |   1 +
 build/generate-future-functions.py   |   7 ++
 src/mongoc/mongoc-gridfs.c           |  11 ++-
 tests/mock_server/future-functions.c |  48 +++++++++++++
 tests/mock_server/future-functions.h |  10 +++
 tests/mock_server/future-value.c     |  90 ++++++++----------------
 tests/mock_server/future.c           |  29 ++++----
 tests/test-mongoc-gridfs.c           | 133 ++++++++++++++++++++++++++++-------
 8 files changed, 225 insertions(+), 104 deletions(-)

commit 094225bb03e3ad6a7c486c06159ed68eeceedf5d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 5 18:55:14 2017 -0400

    CDRIVER-2136 compiler warning in mongoc-stat

 src/tools/mongoc-stat.c | 21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

commit 46b4962d0b7792bb806460bd75e7eb67e8d62cf7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 5 18:43:24 2017 -0400

    CDRIVER-2134 warning in gridfs stream code

 src/mongoc/mongoc-stream-gridfs.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 85e4615b1d0e86197f4913e85b01c4630f7fc6b8
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 9 09:13:17 2017 -0700

    CDRIVER-2116 Add more compression blacklisted commands

 src/mongoc/mongoc-cluster.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 64d0abf4720475e50bc5c3ac8c125a65c9cb3e36
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 8 09:33:01 2017 -0700

    CDRIVER-2153 mongoc_client_pool_t cannot connect to MongoDB Atlas
    
    Also add support for setting the ssl_opts through the URI in pool mode

 src/mongoc/mongoc-client-pool.c |  9 +++++++++
 src/mongoc/mongoc-client.c      | 18 ++++--------------
 src/mongoc/mongoc-ssl-private.h |  3 +++
 src/mongoc/mongoc-ssl.c         | 16 ++++++++++++++++
 4 files changed, 32 insertions(+), 14 deletions(-)

commit df963153d5e35e5739d36f7783fe52a769a6a323
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 8 09:32:17 2017 -0700

    CDRIVER-2154 SNI not provided when allow_invalid_hostname is set

 src/mongoc/mongoc-stream-tls-openssl.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 2002dfee205af8fda326c17a59f24ee55d783b52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 6 22:02:51 2017 -0400

    CDRIVER-1110 revert example code

 examples/example-client.c | 95 +++++++++++++++++++----------------------------
 1 file changed, 38 insertions(+), 57 deletions(-)

commit 2ac565f16daf774af202feebdef81cd4d8297be2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 6 16:10:31 2017 -0400

    style in future-value.c test code

 build/future_function_templates/future-value.c.template | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit bd105b95489a1b2e34e114b4802f5c858af8da54
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 5 11:01:01 2017 -0400

    CDRIVER-2122 update readConcern docs

 doc/mongoc_read_concern_get_level.rst |  3 +--
 doc/mongoc_read_concern_set_level.rst | 12 +++++++++---
 doc/mongoc_read_concern_t.rst         | 16 ++++++++++------
 3 files changed, 20 insertions(+), 11 deletions(-)

commit 65d43fbbfde2533df56c709fe470e699b7cc1af8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 5 15:41:14 2017 -0400

    CDRIVER-1917 update mongoc_cursor_new_from_command_reply.rst

 doc/mongoc_cursor_new_from_command_reply.rst | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 82dbe605e91fb817fb56fa1954e3bf97a3a28b09
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 5 15:28:37 2017 -0400

    CDRIVER-2095 allow NULL findandmodify options

 doc/mongoc_find_and_modify_opts_set_fields.rst | 2 +-
 doc/mongoc_find_and_modify_opts_set_sort.rst   | 2 +-
 doc/mongoc_find_and_modify_opts_set_update.rst | 2 +-
 src/mongoc/mongoc-find-and-modify.c            | 9 ---------
 4 files changed, 3 insertions(+), 12 deletions(-)

commit 3b55ef7882a590cef6a30c63e641659607cee49b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 5 12:05:19 2017 -0400

    CDRIVER-1543 update mongoc_client_command doc

 doc/mongoc_client_command.rst | 14 +++++++++-----
 src/mongoc/mongoc-client.c    |  3 +--
 2 files changed, 10 insertions(+), 7 deletions(-)

commit b7c8f0c64be6f16806d2ede664e11ea1793068da
Author: David Golden <xdg@xdg.me>
Date:   Fri May 5 13:43:55 2017 -0400

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c628f96a1aec3e79292477711841c1db8dd0cae0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 3 17:28:54 2017 -0400

    CDRIVER-1992 reenable OpenSSL test on Windows

 tests/test-mongoc-async.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit f699143ed114637f8df9014b3cebc02fd7916cc4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 3 16:27:08 2017 -0400

    CDRIVER-1980 document main objects' lifecycles

 doc/api.rst                 |  1 +
 doc/lifecycle.rst           | 27 +++++++++++++++++++++++++++
 doc/mongoc_client_t.rst     |  5 -----
 doc/mongoc_collection_t.rst |  5 -----
 doc/mongoc_cursor_t.rst     |  2 +-
 doc/mongoc_database_t.rst   |  4 ----
 6 files changed, 29 insertions(+), 15 deletions(-)

commit 62e8fc399e9a3f23cca6493bf57d728d4d7bbf77
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 3 16:57:38 2017 -0400

    CDRIVER-2095 improve error-reporting docs

 doc/mongoc_bulk_operation_insert_with_opts.rst               |  2 +-
 doc/mongoc_bulk_operation_remove_many_with_opts.rst          |  2 +-
 doc/mongoc_bulk_operation_remove_one_with_opts.rst           |  2 +-
 doc/mongoc_bulk_operation_replace_one_with_opts.rst          |  2 +-
 doc/mongoc_bulk_operation_update_many_with_opts.rst          |  2 +-
 doc/mongoc_bulk_operation_update_one_with_opts.rst           |  2 +-
 doc/mongoc_client_command_simple.rst                         |  2 +-
 doc/mongoc_client_command_simple_with_server_id.rst          |  2 +-
 doc/mongoc_client_get_server_status.rst                      |  2 +-
 doc/mongoc_client_pool_set_apm_callbacks.rst                 |  2 +-
 doc/mongoc_client_pool_set_appname.rst                       |  2 +-
 doc/mongoc_client_pool_set_error_api.rst                     |  2 +-
 doc/mongoc_client_read_command_with_opts.rst                 |  2 +-
 doc/mongoc_client_read_write_command_with_opts.rst           |  2 +-
 doc/mongoc_client_set_apm_callbacks.rst                      |  2 +-
 doc/mongoc_client_set_error_api.rst                          |  3 +--
 doc/mongoc_client_write_command_with_opts.rst                |  2 +-
 doc/mongoc_collection_command_simple.rst                     |  2 +-
 doc/mongoc_collection_create_index_with_opts.rst             |  2 +-
 doc/mongoc_collection_delete.rst                             |  2 +-
 doc/mongoc_collection_drop_index_with_opts.rst               |  5 ++---
 doc/mongoc_collection_drop_with_opts.rst                     |  3 ++-
 doc/mongoc_collection_find_and_modify_with_opts.rst          |  2 +-
 doc/mongoc_collection_insert.rst                             |  2 +-
 doc/mongoc_collection_insert_bulk.rst                        |  2 +-
 doc/mongoc_collection_read_command_with_opts.rst             |  2 +-
 doc/mongoc_collection_read_write_command_with_opts.rst       |  2 +-
 doc/mongoc_collection_remove.rst                             |  2 +-
 doc/mongoc_collection_rename_with_opts.rst                   |  2 +-
 doc/mongoc_collection_save.rst                               |  2 +-
 doc/mongoc_collection_stats.rst                              |  2 +-
 doc/mongoc_collection_update.rst                             |  2 +-
 doc/mongoc_collection_validate.rst                           |  2 +-
 doc/mongoc_collection_write_command_with_opts.rst            |  2 +-
 doc/mongoc_cursor_set_hint.rst                               |  2 +-
 doc/mongoc_cursor_set_limit.rst                              |  3 +--
 doc/mongoc_database_add_user.rst                             |  2 +-
 doc/mongoc_database_command_simple.rst                       |  2 +-
 doc/mongoc_database_drop_with_opts.rst                       |  2 +-
 doc/mongoc_database_has_collection.rst                       |  3 ++-
 doc/mongoc_database_read_command_with_opts.rst               |  2 +-
 doc/mongoc_database_read_write_command_with_opts.rst         |  2 +-
 doc/mongoc_database_remove_all_users.rst                     |  2 +-
 doc/mongoc_database_remove_user.rst                          |  2 +-
 doc/mongoc_database_write_command_with_opts.rst              |  2 +-
 doc/mongoc_find_and_modify_opts_append.rst                   |  2 +-
 ...c_find_and_modify_opts_set_bypass_document_validation.rst |  2 +-
 doc/mongoc_find_and_modify_opts_set_fields.rst               |  2 +-
 doc/mongoc_find_and_modify_opts_set_flags.rst                |  2 +-
 doc/mongoc_find_and_modify_opts_set_max_time_ms.rst          |  2 +-
 doc/mongoc_find_and_modify_opts_set_sort.rst                 |  2 +-
 doc/mongoc_find_and_modify_opts_set_update.rst               |  2 +-
 doc/mongoc_gridfs_drop.rst                                   |  2 +-
 doc/mongoc_gridfs_file_remove.rst                            |  2 +-
 doc/mongoc_gridfs_file_set_id.rst                            |  3 +--
 doc/mongoc_gridfs_remove_by_filename.rst                     |  2 +-
 doc/mongoc_read_concern_append.rst                           |  2 +-
 doc/mongoc_uri_set_option_as_int32.rst                       |  2 +-
 doc/mongoc_write_concern_append.rst                          |  2 +-
 src/mongoc/mongoc-find-and-modify.c                          | 12 ++++++++++++
 60 files changed, 74 insertions(+), 64 deletions(-)

commit 6826a103afaa1a003c316499912108b0cf81bc14
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 4 10:12:11 2017 -0400

    retry curl downloads in evergreen

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d6b0e2bd3e88dbab318f2fdc38eefbb4bf40bf39
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 3 10:18:17 2017 -0700

    CDRIVER-670 Bump Ubuntu version as we need python with SNI support

 .evergreen/config.yml | 2 --
 1 file changed, 2 deletions(-)

commit 5289e4bb0f02ecdc8ab9ab83289c264a9828e35d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 2 16:32:48 2017 -0700

    CDRIVER-670 Fix link

 doc/mongoc_uri_t.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4be7bd8877677c0f832e7ef1ab7531d6e86c475d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 2 16:29:35 2017 -0700

    CDRIVER-670 Check links in docs

 .evergreen/check-release-archive.sh | 51 +++++++++++++++++++++++++++++++++++++
 .evergreen/config.yml               | 47 +---------------------------------
 2 files changed, 52 insertions(+), 46 deletions(-)

commit cb110dbfe4d346c1207ff05005f305cde44f6470
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 2 16:28:54 2017 -0700

    CDRIVER-2147 Token replacement issue in download link

 doc/conf.py        | 5 +++++
 doc/installing.rst | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 50d512b2606d16b2fb0b718f05c1657f5ec7c0eb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 3 13:09:51 2017 -0400

    CDRIVER-1110 refactor server-error checks

 src/mongoc/mongoc-cluster.c     |   2 +-
 src/mongoc/mongoc-cursor.c      |  29 +++---
 src/mongoc/mongoc-rpc-private.h |  20 ++--
 src/mongoc/mongoc-rpc.c         | 206 +++++++++++++++-------------------------
 4 files changed, 98 insertions(+), 159 deletions(-)

commit bc6ecd16c7161b5d2a6f05c8d592e36fb08afd12
Author: David Golden <xdg@xdg.me>
Date:   Wed May 3 12:13:03 2017 -0400

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1096018c1d7c142496d75994425944c8f0f92713
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 28 22:15:12 2017 -0400

    CDRIVER-1110 add mongoc_cursor_error_document

 NEWS                                 |   3 +-
 doc/mongoc_cursor_error.rst          |   4 +
 doc/mongoc_cursor_error_document.rst | 139 +++++++++++++++++++++++++++++++++
 doc/mongoc_cursor_t.rst              |   1 +
 examples/example-client.c            |  95 ++++++++++++++---------
 src/mongoc/mongoc-cursor-array.c     |  14 +++-
 src/mongoc/mongoc-cursor-cursorid.c  |  24 +++---
 src/mongoc/mongoc-cursor-private.h   |   9 ++-
 src/mongoc/mongoc-cursor.c           |  51 ++++++++++---
 src/mongoc/mongoc-cursor.h           |   4 +
 src/mongoc/mongoc-rpc-private.h      |   6 +-
 src/mongoc/mongoc-rpc.c              |  37 +++++++--
 tests/test-mongoc-cursor.c           | 144 +++++++++++++++++++++++++++++++++++
 13 files changed, 458 insertions(+), 73 deletions(-)

commit 4a849f03903023d93cc321f0822744af2263c034
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 2 12:54:24 2017 -0700

    Add news entries, and fix a typo

 NEWS | 23 ++++++++++++++++++++++-
 1 file changed, 22 insertions(+), 1 deletion(-)

commit b62881e7d503273c17951d2c4053c5ac5e088c91
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 1 11:21:54 2017 -0700

    CDRIVER-1138 Only check the error log for specific tasks

 .evergreen/compile-unix.sh | 15 ++++++++++-----
 .evergreen/config.yml      |  4 ++--
 2 files changed, 12 insertions(+), 7 deletions(-)

commit f8924b196cc761c9ce7abcf3ea5ae2c8634ef7dc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 28 21:59:11 2017 -0400

    don't pass --nohttpinterface to test mongods
    
    SERVER-29000 this option was removed from MongoDB 3.5.7.

 orchestration_configs/replica_sets/auth-ssl.json  | 3 ---
 orchestration_configs/replica_sets/auth.json      | 3 ---
 orchestration_configs/replica_sets/basic-ssl.json | 3 ---
 orchestration_configs/replica_sets/basic.json     | 3 ---
 4 files changed, 12 deletions(-)

commit d7c8105bab38806b455ab431675d3cb205636485
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 24 15:14:26 2017 -0700

    CDRIVER-2139 Please add generated files to .gitignore

 .gitignore | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 03a20af45bb3c86a1283633d47131850f9d85c13
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 28 13:54:48 2017 -0700

    CDRIVER-1138 Test with undefined behavior sanitizer

 .evergreen/compile-unix.sh         | 16 ++++++++++++++--
 .evergreen/config.yml              | 21 +++++++++++++++++++++
 src/mongoc/mongoc-bulk-operation.c | 17 +++++++++--------
 tests/test-bulk.c                  | 11 ++++++++++-
 tests/test-mongoc-max-staleness.c  |  4 ++++
 5 files changed, 58 insertions(+), 11 deletions(-)

commit e85551c0ae43013b0abf08110a4555e3f7fdc4f2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 28 14:12:19 2017 -0400

    CDRIVER-2133 array overrun in _mongoc_sasl_init

 src/mongoc/mongoc-sasl-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 04707295cc89d0d9b875da991743a8f8e07cc42e
Author: David Golden <xdg@xdg.me>
Date:   Thu Apr 27 22:37:50 2017 -0400

    CDRIVER-2083 Split absolute paths used in .pc files
    
    When generating .pc files from CMake, we don't want to put absolute
    library paths in the .pc files (which is how CMake prefers them) because
    pkg-config will re-order items without '-l' options.
    
    This commit splits absolute paths back into separate -L and -l
    components.  E.g. `/opt/foo/lib/libbar.a` becomes `-L/opt/foo/lib` and
    `-lbar`.

 CMakeLists.txt | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 4327e32116a5bb9675ed9a812dc9765276f6d6ac
Author: David Golden <xdg@xdg.me>
Date:   Thu Apr 27 21:56:09 2017 -0400

    CDRIVER-2083 Fix CMake conditions for WIN32 not MSVC

 CMakeLists.txt | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 94742c837e4ed75d0e83785cf665a56079f9a736
Author: David Golden <xdg@xdg.me>
Date:   Thu Apr 27 22:39:35 2017 -0400

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 104870c1355e428bec05af271436e17789daffdb
Merge: ea42982 586c0f0
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 14:10:18 2017 -0700

    Merge branch 'CDRIVER-1990-travis'
    
    * CDRIVER-1990-travis:
      CDRIVER-1990 Enable travis

commit ea429822c23d97ef63a61ac5ed94ed0fcb7c6e01
Merge: ce52160 c04548d
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 13:44:27 2017 -0700

    Merge branch 'CDRIVER-1404-c89'
    
    * CDRIVER-1404-c89:
      CDRIVER-1404 Require at most -D_XOPEN_SOURCE=500 -D_POSIX_C_SOURCE=200112L

commit ce52160f647684906fefb69908cc683ff14d399a
Merge: 807d27f 00d7e99
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 13:42:43 2017 -0700

    Merge branch 'CDRIVER-1542-simplify-holds-numbers'
    
    * CDRIVER-1542-simplify-holds-numbers:
      CDRIVER-1542 Simplify code using new HOLDS_INT macro
      CDRIVER-1542 Simplify code using new HOLDS_NUMBER macro

commit 586c0f0960ae0c4f692f2f0112bcfe8ab9d0f032
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 13:08:28 2017 -0700

    CDRIVER-1990 Enable travis

 .travis.yml | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 807d27ffd95f9ddb288e4d85cba8f512a3169482
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 11:12:19 2017 -0700

    CDRIVER-2124 Environment flag to skip mockserver tests

 .evergreen/run-tests.sh |  1 +
 CONTRIBUTING.md         |  4 ++++
 tests/TestSuite.c       | 12 +++++++-----
 3 files changed, 12 insertions(+), 5 deletions(-)

commit c04548d9e0a1df34a4d078aa7dd95f13357dcf15
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 12:40:30 2017 -0700

    CDRIVER-1404 Require at most -D_XOPEN_SOURCE=500 -D_POSIX_C_SOURCE=200112L

 tests/TestSuite.c           | 16 +++++++---------
 tests/TestSuite.h           |  1 +
 tests/json-test.c           |  2 +-
 tests/test-mongoc-matcher.c |  4 ++--
 4 files changed, 11 insertions(+), 12 deletions(-)

commit 00d7e99b0be3cf484294566e1f0461de38a88d6a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 12:14:49 2017 -0700

    CDRIVER-1542 Simplify code using new HOLDS_INT macro

 src/mongoc/mongoc-bulk-operation.c |  6 ++----
 src/mongoc/mongoc-cursor.c         | 20 ++++++++++----------
 src/mongoc/mongoc-database.c       |  4 ++--
 src/mongoc/mongoc-util.c           |  8 +++++---
 src/mongoc/mongoc-write-command.c  |  3 +--
 tests/json-test.c                  |  2 +-
 tests/test-mongoc-connection-uri.c |  2 +-
 7 files changed, 22 insertions(+), 23 deletions(-)

commit 6557ebb6dea5ab7bc5250c481e7efd3fcb1396d4
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 12:06:07 2017 -0700

    CDRIVER-1542 Simplify code using new HOLDS_NUMBER macro

 src/mongoc/mongoc-collection.c  | 8 +++-----
 src/mongoc/mongoc-gridfs-file.c | 6 ++----
 2 files changed, 5 insertions(+), 9 deletions(-)

commit fb06dbea4b12aa3774319967bd0a8ece693dd819
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 27 12:16:06 2017 -0700

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 20b08ec5711ceb555c57b90bcb4351373ea4d9ab
Author: David Golden <xdg@xdg.me>
Date:   Wed Apr 26 14:50:30 2017 -0400

    CDRIVER-2083 Add MONGOC_STATIC to static .pc file

 src/libmongoc-static-1.0.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 77be285cc93ce14d85927b0110b0f1227e10fb7d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 25 14:47:31 2017 -0700

    CDRIVER-2116 Refactor compression to remove duplication

 src/mongoc/mongoc-cluster.c     | 119 +++++-----------------------------------
 src/mongoc/mongoc-rpc-private.h |  16 +++---
 src/mongoc/mongoc-rpc.c         |  60 ++++++++++++++++----
 3 files changed, 70 insertions(+), 125 deletions(-)

commit dad4e89dfbaf7be7d75401d7255a60bb52f9f65e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 25 12:03:31 2017 -0700

    CDRIVER-2116 There will only ever be 1 rpc

 src/mongoc/mongoc-client.c          |   2 +-
 src/mongoc/mongoc-cluster-private.h |   1 -
 src/mongoc/mongoc-cluster.c         | 186 ++++++++++++++++++------------------
 src/mongoc/mongoc-cursor.c          |   3 +-
 src/mongoc/mongoc-write-command.c   |   6 +-
 5 files changed, 96 insertions(+), 102 deletions(-)

commit 5bb1e4b61de99a432cd39111c841c29ac0cc621d
Author: David Golden <xdg@xdg.me>
Date:   Fri Apr 14 13:17:12 2017 -0400

    CDRIVER-2083 Update .cmake variable naming scheme
    
    This commit updates the libbson submodule commit point.
    
    libbson already publishes two .cmake files, one for shared builds and one
    for static builds.  The updated libbson commit publishes variables under
    separate namespaces, BSON_* and BSON_STATIC_*.
    
    This commit uses those .cmake files directly instead of our own FindBSON
    config file and uses the new variable names where appropriate.
    
    This commit also changes the generated .cmake files for libmongoc to
    follow the same MONGOC_* and MONGOC_STATIC_* naming convention for
    downstream users.
    
    mongocxx (and maybe the PHP driver) will need a corresponding update.

 .evergreen/compile-windows-mingw.bat              |  2 +-
 .evergreen/compile-windows.sh                     |  2 +-
 .evergreen/link-sample-program.bat                |  4 +-
 .evergreen/link-sample-program.sh                 |  2 +-
 CMakeLists.txt                                    | 46 +++++++++----
 NEWS                                              |  2 +
 build/cmake/FindBSON.cmake                        | 80 -----------------------
 build/cmake/Makefile.am                           |  1 -
 build/cmake/libmongoc-1.0-config.cmake.in         | 40 +++++++-----
 build/cmake/libmongoc-static-1.0-config.cmake.in  | 53 ++++++++-------
 examples/cmake/find_package/CMakeLists.txt        |  7 +-
 examples/cmake/find_package_static/CMakeLists.txt | 15 ++---
 src/libbson                                       |  2 +-
 13 files changed, 98 insertions(+), 158 deletions(-)

commit ea6d8eea992fc0209a97377f02138ffc85dce585
Merge: 5311bbb 5beb35b
Author: Hannes Magnusson <hannes.magnusson@gmail.com>
Date:   Tue Apr 25 13:48:26 2017 -0700

    Merge pull request #435 from jmikola/cdriver-2142
    
    CDRIVER-2141: Set error if authSource is invalid GSSAPI and X509

commit 5beb35b31f630d1c23b6127e5df8d4fb65fa135f
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Apr 25 15:19:01 2017 -0400

    CDRIVER-2141: Set error if authSource is invalid GSSAPI and X509

 src/mongoc/mongoc-uri.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 5311bbb7550276cfed05efc98681daab203d6d2b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 24 11:51:49 2017 -0700

    CDRIVER-2140 Add support for zlibCompressionLevel uri option

 src/mongoc/mongoc-cluster.c             | 29 +++++++++++++---
 src/mongoc/mongoc-compression-private.h |  1 +
 src/mongoc/mongoc-compression.c         | 11 +++---
 src/mongoc/mongoc-rpc-private.h         |  1 +
 src/mongoc/mongoc-rpc.c                 |  8 ++++-
 src/mongoc/mongoc-uri.c                 | 11 +++++-
 src/mongoc/mongoc-uri.h                 |  1 +
 tests/test-mongoc-uri.c                 | 60 +++++++++++++++++++++++++++++++++
 8 files changed, 112 insertions(+), 10 deletions(-)

commit 955ec3168e361079b92c022ed84b3b03fda21ab8
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 24 11:17:33 2017 -0700

    CDRIVER-2116 Ensure we don't compress auth commands

 .evergreen/config.yml       |  1 -
 src/mongoc/mongoc-cluster.c | 20 ++++++--------------
 2 files changed, 6 insertions(+), 15 deletions(-)

commit baaf3dff5d8fc55dcc3483072e92d9f66fd94a9c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 24 12:57:15 2017 -0700

    CDRIVER-2141 Fix appname set through mongoc_uri_set_option_as_utf8
    
    Validation logic for appname isn't enforced when setting through _as_utf8

 src/mongoc/mongoc-uri.c |  7 +++++--
 tests/test-mongoc-uri.c | 15 ++++++++++++---
 2 files changed, 17 insertions(+), 5 deletions(-)

commit 047a3a7c2661abbf6f9ea274be5ffdb503460f85
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 21 15:04:23 2017 -0700

    CDRIVER-2137 Refactor compression code to accommodate multiple compressors

 CMakeLists.txt                          |   1 +
 src/mongoc/Makefile.am                  |   2 +
 src/mongoc/mongoc-cluster.c             |  89 +++-----------
 src/mongoc/mongoc-compression-private.h |  69 +++++++++++
 src/mongoc/mongoc-compression.c         | 203 ++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-rpc.c                 | 138 ++++------------------
 src/mongoc/mongoc-server-description.c  |  17 +--
 src/mongoc/mongoc-uri.c                 |  23 +---
 src/mongoc/mongoc-util-private.h        |   7 --
 9 files changed, 325 insertions(+), 224 deletions(-)

commit 22bd6d8b048aa6859c09f5abf4724168a2ba9bd4
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 20 17:30:45 2017 -0700

    CDRIVER-2137 Add support for zlib in OP_COMPRESSED

 .evergreen/config.yml                      |  4 +-
 CMakeLists.txt                             |  1 +
 build/autotools/CheckSnappy.m4             |  2 -
 build/autotools/CheckZlib.m4               | 38 ++++++++++++++
 build/autotools/PrintBuildConfiguration.m4 |  8 ++-
 configure.ac                               |  9 ++++
 doc/installing.rst                         |  1 +
 examples/parse_handshake_cfg.py            |  1 +
 src/Makefile.am                            |  2 +
 src/mongoc/mongoc-cluster.c                | 80 ++++++++++++++++++++++++++----
 src/mongoc/mongoc-config.h.in              | 11 ++++
 src/mongoc/mongoc-handshake-private.h      |  1 +
 src/mongoc/mongoc-handshake.c              |  4 ++
 src/mongoc/mongoc-rpc.c                    | 50 ++++++++++++++++---
 src/mongoc/mongoc-server-description.c     | 12 ++++-
 src/mongoc/mongoc-uri.c                    |  5 ++
 src/mongoc/mongoc-util-private.h           |  7 +++
 tests/Makefile.am                          |  2 +
 18 files changed, 214 insertions(+), 24 deletions(-)

commit 11baed405935b7a37b62712885ec94dd46bb3211
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 21 12:45:54 2017 -0700

    CDRIVER-2132 Remove dependency on c++ compiler

 CMakeLists.txt | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9f7918956bb1184fdd026658be035cc3b0247819
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 21 12:45:31 2017 -0700

    Revert "Revert "CDRIVER-2132 CMake unnecessarily requires C++ compiler""
    
    This reverts commit 37fc6c2fc5e3b0cc362fae4c70beeb59a5a8feee.

 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 37fc6c2fc5e3b0cc362fae4c70beeb59a5a8feee
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 21 11:33:04 2017 -0700

    Revert "CDRIVER-2132 CMake unnecessarily requires C++ compiler"
    
    We do compile one c++ file during CMake configuration
    
    This reverts commit 10edbf3b9d530e41e7930d308165d2d42a94871b.

 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 13f5b2d1ead4a57aef88115dc299c09b4544bdce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 21 14:15:41 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 724074e581241634feb1ad563db1a66b25cd630e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 21 14:15:34 2017 -0400

    CDRIVER-2083 fix semicolons in pkg-config files
    
    Same as the CMake fix, now with Autools.

 configure.ac | 3 +++
 1 file changed, 3 insertions(+)

commit 7cce898003aa6d5065eda00a40c4ed3a2c52a823
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 21 14:14:52 2017 -0400

    CDRIVER-2083 fix linking test

 .evergreen/link-sample-program.sh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 10edbf3b9d530e41e7930d308165d2d42a94871b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 21 09:54:05 2017 -0700

    CDRIVER-2132 CMake unnecessarily requires C++ compiler

 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 12615f55d6660538d3815d7618fdc6cdba84f6b2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 21 10:57:35 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 11cda664a795659c7085f2ded7064807d737bb2e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 21 09:07:22 2017 -0400

    CDRIVER-2083 fix semicolons in pkg-config files
    
    When libmongoc-1.0.pc and libmongoc-static-1.0.pc were generated by
    CMake, the "Libs" list could be semicolon-delimited, rather than
    space-delimited.

 CMakeLists.txt                 | 5 +++++
 src/libmongoc-1.0.pc.in        | 2 +-
 src/libmongoc-static-1.0.pc.in | 2 +-
 3 files changed, 7 insertions(+), 2 deletions(-)

commit ce0a2ad1fd62525ee18808f08bc96c2df440a5fa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 20 11:53:05 2017 -0400

    duplicate NEWS entry for 1.1.11

 NEWS | 22 ----------------------
 1 file changed, 22 deletions(-)

commit a1f436c697fbec8fb51e0ab673efa6c3d4f69bc4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 19 16:19:46 2017 -0700

    CDRIVER-2039 Document readPreferenceTags

 doc/mongoc_read_prefs_set_tags.rst | 70 ++++++++++++++++++++++++++++++++++++++
 doc/mongoc_read_prefs_t.rst        | 20 +++++++++++
 doc/mongoc_uri_t.rst               |  5 +--
 3 files changed, 91 insertions(+), 4 deletions(-)

commit ecf16f00cffe80b480de339bc22bc05cae267d32
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 19 14:02:02 2017 -0700

    CDRIVER-2109 Don't compress auth commands, as per spec draft

 .evergreen/config.yml                  |   1 +
 src/mongoc/mongoc-cluster-private.h    |  16 +--
 src/mongoc/mongoc-cluster-sasl.c       |  16 +--
 src/mongoc/mongoc-cluster-sspi.c       |  16 +--
 src/mongoc/mongoc-cluster.c            | 205 ++++++++++++++++++---------------
 tests/test-bulk.c                      |  59 ++++------
 tests/test-libmongoc.c                 |  15 ++-
 tests/test-mongoc-command-monitoring.c |  18 +--
 8 files changed, 180 insertions(+), 166 deletions(-)

commit 3f53e3683df385bcca65c942596bfb00a95f2def
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 14:35:33 2017 -0700

    CDRIVER-2109 Add support for writing OP_COMPRESSED

 src/mongoc/mongoc-async-cmd.c                  |   1 +
 src/mongoc/mongoc-cluster-private.h            |   6 +
 src/mongoc/mongoc-cluster.c                    | 159 ++++++++++++++++++++++++-
 src/mongoc/mongoc-rpc-private.h                |   9 ++
 src/mongoc/mongoc-rpc.c                        |  34 ++++++
 src/mongoc/mongoc-server-description-private.h |   4 +
 src/mongoc/mongoc-server-description.c         |  46 +++++++
 src/mongoc/mongoc-server-description.h         |   6 +
 tests/test-mongoc-rpc.c                        |  60 ++++++++++
 9 files changed, 319 insertions(+), 6 deletions(-)

commit 546284eff33c169ef72ca4ac78d5fa37e22706cd
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 13:22:25 2017 -0700

    CDRIVER-2108 Add support for reading OP_COMPRESSED

 src/mongoc/mongoc-async-cmd.c        | 18 ++++++++++
 src/mongoc/mongoc-cluster.c          | 41 ++++++++++++++++++++++-
 src/mongoc/mongoc-cursor.c           | 36 ++++++++++++++++++++
 src/mongoc/mongoc-rpc-private.h      |  2 ++
 src/mongoc/mongoc-rpc.c              | 65 ++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-topology-scanner.c | 29 +++++++++++++---
 6 files changed, 185 insertions(+), 6 deletions(-)

commit d9249e4c84df2aefe42fc9092d9766f7c8fea569
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 18 10:15:37 2017 -0700

    CDRIVER-2130 Any "ssl" config option in URI should turn on SSL/TLS

 src/mongoc/mongoc-uri.c | 14 ++++++++++--
 tests/test-mongoc-uri.c | 58 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 70 insertions(+), 2 deletions(-)

commit a3504dd37cd457924159077f20008f3b91527945
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 19 08:45:58 2017 -0400

    CDRIVER-2082 finish asserts for sample commands
    
    Some were not properly generated by my Python-C converter. Also delete
    extra newlines.

 tests/test-mongoc-sample-commands.c | 65 +++++++++++++++++++++++++++----------
 1 file changed, 48 insertions(+), 17 deletions(-)

commit bc6ea8906869185b131f3adc09669fa6feedb8c9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 18 19:05:45 2017 -0400

    CDRIVER-2082 skip sample commands on MongoDB 2.4

 tests/test-mongoc-sample-commands.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 9ed167d84c80ddad4da2fc2adb32a7808521b139
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 17 17:12:02 2017 -0400

    CDRIVER-2083 libmongoc-static-1.0-config.cmake sets MONGOC_STATIC
    
    Also test static and dynamic linking, with and without SSL, on Windows.

 .evergreen/config.yml                            |  48 +++++++++
 .evergreen/link-sample-program.bat               | 130 +++++++++++++++++++++++
 build/cmake/libmongoc-static-1.0-config.cmake.in |   1 +
 examples/hello_mongoc.c                          |  10 +-
 4 files changed, 188 insertions(+), 1 deletion(-)

commit 58574918d70ba8ab2e65f29031707ea84c47b982
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 17 17:13:21 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3e257f7d4610b17c28e92a46f23fa751c7e33136
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 17 17:13:01 2017 -0400

    unused test file

 tests/certificates/mycert.pfx | Bin 2493 -> 0 bytes
 1 file changed, 0 insertions(+), 0 deletions(-)

commit b3d02a83dc28e028d91d6d6a68a0c4b41ee5006c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 17 10:05:41 2017 -0400

    CDRIVER-2082 C language examples for shell commands

 tests/test-mongoc-sample-commands.c | 2497 +++++++++++++++++++++++++++++++++--
 1 file changed, 2401 insertions(+), 96 deletions(-)

commit 64bda10ce4421c559b19a969b3634bd2fdba6a12
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 16 14:54:37 2017 -0400

    CDRIVER-2082 ASSERT_HAS_NOT_FIELD helper macro

 tests/TestSuite.h | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit bb0c048cf5a8229c77e836d18dc027efe2ab6c4c
Merge: 52b3d7b 1115b75
Author: Hannes Magnusson <hannes.magnusson@gmail.com>
Date:   Mon Apr 17 11:11:49 2017 -0700

    Merge pull request #434 from jmikola/1.7-mongoc_uri_option_is_utf8
    
    Remove unnecessary string comparisons in mongoc_uri_option_is_utf8()

commit 1115b756222d2bfa3c672b9785709343bfafc959
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Apr 17 13:59:02 2017 -0400

    Remove unnecessary string comparisons in mongoc_uri_option_is_utf8()
    
    The default return was changed to false in 16d03dc58f598c1671d20d658681c0d871f96514, which means we need only check for known options.

 src/mongoc/mongoc-uri.c | 37 +++++++------------------------------
 1 file changed, 7 insertions(+), 30 deletions(-)

commit 52b3d7b11f6682d98c31199b3f8ebcfac6acf532
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 7 13:56:46 2017 -0400

    CDRIVER-2074 static-link guide for MSVC GUI

 doc/static/msvc-add-dependencies-static.png | Bin 0 -> 23627 bytes
 doc/static/msvc-set-path.png                | Bin 10062 -> 24767 bytes
 doc/visual-studio-guide.rst                 |  32 ++++++++++++++++++++++++++++
 3 files changed, 32 insertions(+)

commit 5086daabf8e3b058da5857e2f73fb25f3d911693
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 8 21:48:55 2017 -0400

    CDRIVER-2115 skip mock server tests on 32-bit

 tests/TestSuite.c                             |  21 +++
 tests/TestSuite.h                             |   4 +
 tests/mock_server/mock-server.c               |   4 +-
 tests/test-bulk.c                             | 183 +++++++++++++-------------
 tests/test-mongoc-async.c                     |   9 +-
 tests/test-mongoc-client.c                    | 169 +++++++++++++-----------
 tests/test-mongoc-cluster.c                   |  32 +++--
 tests/test-mongoc-collection-find-with-opts.c | 118 +++++++++--------
 tests/test-mongoc-collection-find.c           |  16 ++-
 tests/test-mongoc-collection.c                | 149 ++++++++++++---------
 tests/test-mongoc-command-monitoring.c        |  31 +++--
 tests/test-mongoc-cursor.c                    | 107 ++++++++-------
 tests/test-mongoc-database.c                  |  42 +++---
 tests/test-mongoc-error.c                     |   9 +-
 tests/test-mongoc-exhaust.c                   |  56 ++++----
 tests/test-mongoc-find-and-modify.c           |  41 +++---
 tests/test-mongoc-gridfs.c                    |   7 +-
 tests/test-mongoc-handshake.c                 |  14 +-
 tests/test-mongoc-max-staleness.c             |   6 +-
 tests/test-mongoc-read-prefs.c                |  40 +++---
 tests/test-mongoc-sdam-monitoring.c           |   8 +-
 tests/test-mongoc-topology-reconcile.c        |   8 ++
 tests/test-mongoc-topology-scanner.c          |  22 ++--
 tests/test-mongoc-topology.c                  |  40 +++---
 24 files changed, 648 insertions(+), 488 deletions(-)

commit 886db037fd10a218b7b552089d6ea8d86c4f772b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 13:06:04 2017 -0700

    CDRIVER-2106 Fix counter description

 src/mongoc/mongoc-counters.defs | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 832818df3df634480c11dc12bbacc8dcd5fe969e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 13:05:21 2017 -0700

    CDRIVER-2106 Missing counters for commands

 src/mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 236d3dff4e237274a66f291a60bf534375055268
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 13:03:09 2017 -0700

    CDRIVER-2106 Minor refactoring to make accommodating new opcode easier

 src/mongoc/mongoc-async-cmd.c   |  12 +-
 src/mongoc/mongoc-cluster.c     | 256 ++++++++++++++++++++--------------------
 src/mongoc/mongoc-rpc-private.h |   2 +
 src/mongoc/mongoc-rpc.c         |  80 +++++++++----
 4 files changed, 191 insertions(+), 159 deletions(-)

commit ed0f73a7a68d49f39e104009e8597c22ac73ef05
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 11:35:28 2017 -0700

    CDRIVER-2044 Max URI set to only 64 chars
    
    HOST_NAME_MAX determines the maximum length gethostname() returns,
    not the maximum dns name we can resolve or connect to.
    As each label cannot be longer then 64, which is why HOST_NAME_MAX is
    limited to 64, and should in turn not be used to limit dns names.

 src/mongoc/mongoc-host-list.h | 4 ----
 1 file changed, 4 deletions(-)

commit d51a48ff7f7d5c678cfe85d55b2b04d0e3d6eea4
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 12:40:23 2017 -0700

    Fix test: reply is always initialized
    
    Update coding standard in the way

 tests/test-bulk.c | 29 +++++++++++------------------
 1 file changed, 11 insertions(+), 18 deletions(-)

commit 9d8d916b5feb04eac34854f71f555936aefbfb91
Merge: 7297904 8afe2f8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 7 13:58:32 2017 -0400

    Merge remote-tracking branch 'upstream/master'
    
    * upstream/master:
      Fix typo
      CDRIVER-2121 Remove legacy info
      CDRIVER-2121 Update set_ssl_opts since CDRIVER-1316
      CDRIVER-2120 Add MONGOC_TEST_COMPRESSORS to the test suite

commit 72979043c8fb27b197e45829ca507fccb6f5d287
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 7 13:58:26 2017 -0400

    CDRIVER-2082 sample commands updates

 tests/test-mongoc-sample-commands.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 8afe2f8e3a660c0ee5ca90f917f8fa2c3e33e207
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 09:19:22 2017 -0700

    Fix typo

 doc/advanced-connections.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 185f7efbc5db46bf6b82fe5276c067521c2f2ea0
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 7 09:11:29 2017 -0700

    CDRIVER-2121 Remove legacy info
    
    Historic details can be found in the published legacy docs

 doc/mongoc_client_pool_set_ssl_opts.rst | 4 ----
 doc/mongoc_client_set_ssl_opts.rst      | 4 ----
 2 files changed, 8 deletions(-)

commit 0f53bcffe6bd04d680ef37d74dab7c0c5b1080db
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 6 10:58:39 2017 -0700

    CDRIVER-2121 Update set_ssl_opts since CDRIVER-1316

 doc/mongoc_client_pool_set_ssl_opts.rst | 16 +++++++++++++---
 doc/mongoc_client_set_ssl_opts.rst      | 17 +++++++++++++----
 2 files changed, 26 insertions(+), 7 deletions(-)

commit cd25310ba581d433bcb0caf57ceec0d08ceb8ee0
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 6 10:07:29 2017 -0700

    CDRIVER-2120 Add MONGOC_TEST_COMPRESSORS to the test suite
    
    MONGOC_TEST_COMPRESSORS=snappy,zlib will negotiate compression with
    live MongoDB (3.4+) to run the test suite with

 .evergreen/config.yml   |   4 +-
 .evergreen/run-tests.sh |   4 ++
 CONTRIBUTING.md         |   1 +
 tests/TestSuite.c       |   2 +
 tests/test-libmongoc.c  | 102 +++++++++++++++++++++++++++++++++++++++++++++++-
 5 files changed, 110 insertions(+), 3 deletions(-)

commit 6d1ea889e48db42910ebeb197d56d214f4e3c463
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 6 11:30:06 2017 -0400

    CDRIVER-2074 instructions for MSVC GUI

 doc/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 38d9cd1cd92eb2ebe0882f02b125864976709ee5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 6 11:29:59 2017 -0400

    exclude some RSTs from man pages, more simply

 .evergreen/config.yml | 6 ++++++
 doc/conf.py           | 5 +++--
 2 files changed, 9 insertions(+), 2 deletions(-)

commit 72863e8c18a30ac0fbc39f9d6a9a6412f55ab03a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 6 04:59:41 2017 -0400

    CDRIVER-2074 instructions for MSVC GUI

 .gitignore                                  |   1 +
 doc/guides.rst                              |   1 +
 doc/installing.rst                          |   4 ++
 doc/static/msvc-add-dependencies.png        | Bin 0 -> 7855 bytes
 doc/static/msvc-add-include-directories.png | Bin 0 -> 7909 bytes
 doc/static/msvc-create-project.png          | Bin 0 -> 12266 bytes
 doc/static/msvc-set-path.png                | Bin 0 -> 10062 bytes
 doc/static/msvc-switch-architecture.png     | Bin 0 -> 11221 bytes
 doc/tutorial.rst                            |   7 ++++
 doc/visual-studio-guide.rst                 |  56 ++++++++++++++++++++++++++++
 10 files changed, 69 insertions(+)

commit 5e5ac7909ec0179db27717d987e115c0dcfad8b6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 6 04:39:20 2017 -0400

    exclude some RSTs from man pages, more simply

 doc/api.rst   | 2 --
 doc/conf.py   | 6 ++----
 doc/index.rst | 2 --
 3 files changed, 2 insertions(+), 8 deletions(-)

commit ff8e3944d531500fdf81a4b72b81d1e6ed6435bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 6 06:01:27 2017 -0400

    delete sphinx tmp files more simply

 Makefile.am          | 2 --
 doc/html/Makefile.am | 1 +
 doc/man/Makefile.am  | 1 +
 3 files changed, 2 insertions(+), 2 deletions(-)

commit 09451822a2549a066fefe2db1c4921847ae94e40
Merge: 59cdcfd b70c8e0
Author: Hannes Magnusson <hannes.magnusson@gmail.com>
Date:   Thu Apr 6 11:13:10 2017 -0700

    Merge pull request #432 from xdg/fix-bulk-operation-docs
    
    Fix link in mongoc_bulk_operation_update_one_with_opts docs

commit b70c8e00977f6d286188da050acced83f1e0e385
Author: David Golden <xdg@xdg.me>
Date:   Thu Apr 6 14:06:31 2017 -0400

    Fix link in mongoc_bulk_operation_update_one_with_opts docs

 doc/mongoc_bulk_operation_update_one_with_opts.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 59cdcfda64a25395afb73ae6a4b1c564e9e92165
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 5 14:21:53 2017 -0700

    Simplify contribution readme

 CONTRIBUTING.md   | 81 ++++++++-----------------------------------------------
 tests/TestSuite.c |  8 ++----
 2 files changed, 13 insertions(+), 76 deletions(-)

commit 4b4f8b412bc3f6e3b1b2547924b1d1aefd2a670b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 1 16:40:03 2017 -0400

    CDRIVER-2082 sample commands one to three

 CMakeLists.txt                      |   1 +
 tests/Makefile.am                   |   1 +
 tests/TestSuite.h                   |  38 +++++++
 tests/test-bulk.c                   |  19 ----
 tests/test-libmongoc.c              |   3 +
 tests/test-mongoc-sample-commands.c | 220 ++++++++++++++++++++++++++++++++++++
 6 files changed, 263 insertions(+), 19 deletions(-)

commit a16a061b08287bccad721150d10f49494ac009fd
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 4 09:09:53 2017 -0700

    CDRIVER-2118 Explicitly disable compression in cmake builds for now

 CMakeLists.txt | 3 +++
 1 file changed, 3 insertions(+)

commit aa357987ac59e13020757b401068abf25e191609
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 3 16:10:09 2017 -0700

    CDRIVER-2117 Add support for `compressors` URI option
    
    Along with mongoc_uri_ getter & setter

 src/mongoc/mongoc-uri.c | 67 +++++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-uri.h |  8 ++++--
 tests/test-mongoc-uri.c | 73 +++++++++++++++++++++++++++++++++++++++++++++++--
 3 files changed, 144 insertions(+), 4 deletions(-)

commit 7eb12048e9f9472edc13b5481dd6ae6e1955dfa1
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 30 12:16:22 2017 -0700

    CDRIVER-2108: Define OP_COMPRESSED

 src/mongoc/Makefile.am          |  1 +
 src/mongoc/mongoc-cluster.c     |  6 ++++++
 src/mongoc/mongoc-counters.defs |  2 ++
 src/mongoc/mongoc-opcode.h      |  1 +
 src/mongoc/mongoc-rpc-private.h |  4 ++++
 src/mongoc/mongoc-rpc.c         | 43 +++++++++++++++++++++++++++++++++++++----
 src/mongoc/op-compressed.def    | 11 +++++++++++
 tests/mock_server/request.c     |  2 ++
 8 files changed, 66 insertions(+), 4 deletions(-)

commit 6df9ea4c308fa71110375e6885c99dae43a1350e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 30 12:10:27 2017 -0700

    CDRIVER-2110 Compile and link against snappy when available

 build/autotools/CheckSnappy.m4             | 40 ++++++++++++++++++++++++++++++
 build/autotools/PrintBuildConfiguration.m4 |  1 +
 configure.ac                               |  7 ++++++
 doc/installing.rst                         |  1 +
 examples/parse_handshake_cfg.py            |  2 ++
 src/Makefile.am                            |  2 ++
 src/mongoc/mongoc-config.h.in              | 21 ++++++++++++++++
 src/mongoc/mongoc-handshake-private.h      |  2 ++
 src/mongoc/mongoc-handshake.c              |  8 ++++++
 tests/Makefile.am                          |  3 +++
 10 files changed, 87 insertions(+)

commit 56e157f16b778038c57d7a62a814914ff048b093
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 3 10:49:31 2017 -0700

    CDRIVER-2114 Add evergreen Matrix for inflight 3.6 implementations

 .evergreen/config.yml                           | 43 ++++++++++++++++++++++++-
 .evergreen/integration-tests.sh                 |  4 ++-
 orchestration_configs/servers/experimental.json | 11 +++++++
 3 files changed, 56 insertions(+), 2 deletions(-)

commit a2b338841637bf6ffa30ed72ac5115d18e383e38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 29 11:55:56 2017 -0400

    CDRIVER-1458 reliable test_socket_check_closed
    
    This had failed occasionally on Mac, because it assumes that as soon as
    the server has closed its localhost connection, the client detects it.

 tests/test-mongoc-socket.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 87abf8e6a270ddd1b945b35706c8e8a6e7bcebb7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 29 11:17:34 2017 -0400

    Revert "CDRIVER-1458 disable /Socket/check_closed on Mac"
    
    This reverts commit 5a108cbe60041e56aab878dd0cc8eeb251083fcf.

 tests/test-libmongoc.c     | 11 -----------
 tests/test-libmongoc.h     |  2 --
 tests/test-mongoc-socket.c | 11 +++--------
 3 files changed, 3 insertions(+), 21 deletions(-)

commit 13f91bcc880676a26524ab7783b4b8a8d6b8f6a1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 29 09:46:34 2017 -0400

    CDRIVER-2049 don't shutdown sockets created by parent
    
    Store the current process id when creating a socket, and check the pid
    in mongoc_socket_close to prevent closing a socket created by the parent
    process. Useful for forking environments like PHP.
    
    test_mongoc_socket_check_closed proves we still shut down sockets in the
    common case.

 doc/mongoc_socket_close.rst        |  4 ++--
 src/mongoc/mongoc-socket-private.h |  1 +
 src/mongoc/mongoc-socket.c         | 39 +++++++++++++++-----------------------
 3 files changed, 18 insertions(+), 26 deletions(-)

commit 32a3bc62f71b9eded0bba0aa1e9e7fa52a0d0451
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 3 09:48:32 2017 -0700

    CDRIVER-2104 Ensure llvm-cov from homebrew is available

 .evergreen/compile-unix.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit fadba9bd048a77d733a5c2ef9c2cd05633ea5e01
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 31 12:18:44 2017 -0700

    Fix libressl handshake flag

 src/mongoc/mongoc-handshake.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ebb09079206f0f0dc73301addce8a1dd52a890bd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 30 11:43:57 2017 -0700

    Read the message header consistently

 src/mongoc/mongoc-async-cmd.c     |   8 +--
 src/mongoc/mongoc-client.c        |   8 +--
 src/mongoc/mongoc-cluster.c       |  10 +--
 src/mongoc/mongoc-cursor.c        |  16 ++---
 src/mongoc/mongoc-rpc.c           | 135 ++++++++++++++++++-------------------
 src/mongoc/mongoc-write-command.c |  24 +++----
 tests/mock_server/mock-server.c   |   8 +--
 tests/test-mongoc-rpc.c           | 136 +++++++++++++++++++-------------------
 8 files changed, 170 insertions(+), 175 deletions(-)

commit 56defbacd51c4f7895cef5ddd0f4172140812372
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 29 14:53:37 2017 -0700

    Remove unused function & files

 CMakeLists.txt                     |  1 -
 src/mongoc/Makefile.am             |  2 --
 src/mongoc/mongoc-opcode-private.h | 25 ---------------
 src/mongoc/mongoc-opcode.c         | 62 --------------------------------------
 4 files changed, 90 deletions(-)

commit 4876aba3310de4f81991effd6d8900e01462f8de
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 31 11:08:15 2017 -0700

    Fix Evergreen builds using platform provided OpenSSL

 .evergreen/compile-unix.sh | 96 ++++++++++++++++++++++++++--------------------
 1 file changed, 55 insertions(+), 41 deletions(-)

commit b932ad7dd602a3b098b7a2d239475fbedffde2dd
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 28 20:12:37 2017 -0700

    Run the live auth tests in all supported OpenSSL+LibreSSL versions

 .evergreen/config.yml        | 77 +++++++++++++++++++++++++++++++++++++++++---
 .evergreen/run-auth-tests.sh |  8 +++--
 2 files changed, 78 insertions(+), 7 deletions(-)

commit 2f57db6c77faa4caa0e36beffdb14f2d36e298df
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 28 20:12:06 2017 -0700

    Test compiling against LibreSSL

 .evergreen/compile-unix.sh | 27 ++++++++++++++++++++++++---
 .evergreen/config.yml      | 13 +++++++++++++
 2 files changed, 37 insertions(+), 3 deletions(-)

commit 9cc93cd894c2db498700d543adcbbd1497def208
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 28 20:10:54 2017 -0700

    Add support for detected libressl via pkg-config

 build/autotools/CheckSSL.m4 | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 050943df33905519edffb6d821c850f0d03075c0
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 28 20:10:33 2017 -0700

    Fix build warnings

 tests/test-mongoc-stream-tls-error.c | 3 +++
 tests/test-mongoc-stream-tls.c       | 4 ++++
 2 files changed, 7 insertions(+)

commit 8341521b3cc02662ab2e69ac6131c0abefccfb20
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 28 16:50:00 2017 -0700

    Test against multiple different OpenSSL versions

 .evergreen/compile-unix.sh | 39 ++++++++++++++--------
 .evergreen/config.yml      | 80 ++++++++++++++++++++++++++++++++++++++++++++--
 2 files changed, 103 insertions(+), 16 deletions(-)

commit 333bebb849023333be410f5e209101916d683d97
Merge: 81f52f8 2c81e9a
Author: Hannes Magnusson <hannes.magnusson@gmail.com>
Date:   Tue Mar 28 17:06:19 2017 -0700

    Merge pull request #422 from Sp1l/master
    
    CDRIVER-2101 Fix LibreSSL build issue

commit 81f52f8a11a9f39e3ce3e40abe73cae7cf967db4
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 27 23:46:01 2017 +0000

    CDRIVER-1509 Compile against OpenSSL 1.1 in evergreen

 .evergreen/compile-unix.sh | 27 ++++++++++++++++++++++++---
 .evergreen/config.yml      | 13 +++++++++++++
 tests/Makefile.am          |  1 +
 3 files changed, 38 insertions(+), 3 deletions(-)

commit 3d5092e634575dce74338f21b81916516ab80417
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 27 15:28:25 2017 -0700

    CDRIVER-2061 Compiler warning for openssl 1.1.0

 CMakeLists.txt                |  6 ++++++
 build/autotools/CheckSSL.m4   |  8 +++++++-
 src/mongoc/mongoc-config.h.in | 10 ++++++++++
 src/mongoc/mongoc-openssl.c   | 10 ++++++++--
 4 files changed, 31 insertions(+), 3 deletions(-)

commit 0416c3d14e5e5d5fdb7bea40784444c6e7c0d838
Merge: 0f5651e 630f9ba
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Mar 28 14:46:09 2017 -0400

    Merge pull request #431 from jmikola/patch-1
    
    Supply description argument to AC_DEFINE

commit 630f9ba6cec5d01e0e60cc58f62468331be93803
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Mar 28 14:41:49 2017 -0400

    Supply description argument to AC_DEFINE
    
    This avoids a possible autoheader warning when calling AC_DEFINE with less than three arguments.
    
    See: https://lists.gnu.org/archive/html/autoconf/2009-04/msg00087.html

 build/autotools/m4/ax_prototype.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0f5651ed10b5ad564411a010c8bab06d43ddfd62
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 28 09:43:19 2017 -0400

    CDRIVER-2002 gridfs_readv sets error on missing file

 doc/mongoc_gridfs_file_writev.rst |  3 +--
 doc/mongoc_gridfs_find_one.rst    |  2 +-
 src/mongoc/mongoc-gridfs-file.c   | 34 +++++++++++++++++-------
 tests/test-mongoc-gridfs.c        | 54 +++++++++++++++++++++++++++++++++++++++
 4 files changed, 81 insertions(+), 12 deletions(-)

commit 6aab91e51260f1658dfae803c734afd3d87605f7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 28 11:12:49 2017 -0400

    CDRIVER-2076 test building from release tarball

 .evergreen/compile-unix.sh    |  6 ++++--
 .evergreen/compile-windows.sh | 22 ++++++++++++++++++----
 2 files changed, 22 insertions(+), 6 deletions(-)

commit 465af7e5e7d44100e193f0b858c817fbc4ce7e7d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 26 11:53:52 2017 -0400

    CDRIVER-2006 gridfs find_one clears error

 src/mongoc/mongoc-gridfs.c | 11 +++++++++--
 tests/test-mongoc-gridfs.c | 30 ++++++++++++++++++++++++++++++
 2 files changed, 39 insertions(+), 2 deletions(-)

commit 32d336edd995747d05c9502ef11de9162e5257d1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 28 11:11:11 2017 -0400

    use "gtar" on evergreen when available
    
    Fixes error extracting symlinks with Sun "tar" on Solaris: "typeflag 'x'
    not recognized".

 .evergreen/config.yml | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit c8e766ecddaccda0ec018af60171f5b58c6f05a8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 25 18:14:56 2017 -0400

    CDRIVER-1981 cleanup threads on Windows

 src/mongoc/mongoc-thread-private.h | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 5b24f894d460c5fa3052d4436ac1d84be14f14b4
Merge: deaa560 1fd9a1c
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Mar 27 12:09:51 2017 -0400

    Merge pull request #430 from xdg/CDRIVER-2093
    
    CDRIVER-2093 fix cursor is_alive and more

commit 1fd9a1c39203ad6f7b5793d30751b4fd820fa02b
Author: David Golden <xdg@xdg.me>
Date:   Fri Mar 24 22:32:17 2017 -0400

    CDRIVER-2093 fix cursor is_alive and more

 doc/mongoc_cursor_is_alive.rst      |  6 ++++--
 doc/mongoc_cursor_more.rst          |  2 ++
 src/mongoc/mongoc-cursor-cursorid.c | 11 ++++++++---
 src/mongoc/mongoc-cursor.c          |  7 ++++---
 tests/test-mongoc-cursor.c          | 35 +++++++++++++++++++++++++++++++++++
 5 files changed, 53 insertions(+), 8 deletions(-)

commit deaa5608979a4b0a82b42eabe98fb9385128cbc0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 24 18:50:22 2017 -0400

    CDRIVER-2098 aggregate with read pref sets slaveOk

 src/mongoc/mongoc-collection.c | 16 ++++----
 tests/test-mongoc-collection.c | 85 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 94 insertions(+), 7 deletions(-)

commit fe248c2794d95efa023e87eafb941f5d6e88fb5b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 24 10:36:04 2017 -0400

    preserve old lib order in cmakelists

 CMakeLists.txt | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit e4ecf5216bd84d886ec87263482bd4fa9b62df3c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 24 10:35:53 2017 -0400

    add some text in .nojekyll file
    
    Work around a bug with certain versions of the aws-cli tool.

 .evergreen/config.yml | 1 -
 doc/conf.py           | 3 ++-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 19b00bb9df1849b4bb067cb238d499ea09d3008d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 07:59:23 2017 -0400

    use connect.c as tutorial example and sample program for linking

 .evergreen/config.yml   |  12 +++++
 doc/tutorial.rst        | 129 +++++++++++-------------------------------------
 examples/hello_mongoc.c |  67 ++++++++++++++++++++++---
 3 files changed, 102 insertions(+), 106 deletions(-)

commit 16cefdfcdf15250264f036430e23308faf0190cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 07:59:04 2017 -0400

    little fixes

 Makefile.am                | 3 +--
 build/cmake/FindBSON.cmake | 2 --
 build/cmake/Makefile.am    | 4 ++--
 3 files changed, 3 insertions(+), 6 deletions(-)

commit f9e2a607f22c54f6bd345da39bf909d7f5798ca5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 23:10:22 2017 -0400

    also test with SSL

 .evergreen/config.yml             | 60 +++++++++++++++++++++++++++++++++------
 .evergreen/link-sample-program.sh |  9 ++++--
 2 files changed, 58 insertions(+), 11 deletions(-)

commit 06aeb83a86052461449e9c1bef2988d5a0aba11d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 22:25:28 2017 -0400

    work around "aws cp" bug uploading .nojekyll file

 .evergreen/config.yml | 1 +
 1 file changed, 1 insertion(+)

commit 3a522396807209076e1cbee96da6a604112a4243
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 18 15:09:57 2017 -0400

    CDRIVER-2037, CDRIVER-2083 convenient linking
    
    Whether built with CMake or the Autotools, libmongoc now installs CMake
    config-file packages for libmongoc-1.0 and libmongoc-static-1.0, and pkg-config
    files for the same.
    
    Compile and link an example program with all combinations: libmongoc built with
    CMake or the Autotools, using static or dynamic linking, and finding libmongoc
    with the CMake find_package command or with pkg-config.

 .evergreen/compile-unix-cmake.sh                   |  53 ------
 .evergreen/config.yml                              |  72 ++++++--
 .evergreen/link-sample-program.sh                  | 202 +++++++++++++++++++++
 CMakeLists.txt                                     |  40 ++--
 Makefile.am                                        |  31 ++++
 build/autotools/SetupAutomake.m4                   |   1 +
 build/cmake/.gitignore                             |   4 +
 build/cmake/FindBSON.cmake                         |   3 +
 build/cmake/FindSASL2.cmake                        |  20 +-
 build/cmake/Makefile.am                            |   3 +
 build/cmake/MongoCPackage.cmake                    |  35 ++--
 build/cmake/libmongoc-1.0-config-version.cmake.in  |  27 +++
 build/cmake/libmongoc-1.0-config.cmake.in          |  40 +++-
 .../libmongoc-static-1.0-config-version.cmake.in   |  27 +++
 build/cmake/libmongoc-static-1.0-config.cmake.in   |  56 ++++++
 configure.ac                                       |   5 +
 doc/tutorial.rst                                   |  52 +++++-
 examples/.gitignore                                |   3 +
 examples/Makefile.am                               |   8 +
 examples/cmake/FindPkgConfig/.gitignore            |   6 -
 examples/cmake/FindPkgConfig/CMakeLists.txt        |  37 ----
 examples/cmake/FindPkgConfig/hello_mongoc.c        |  34 ----
 examples/cmake/find_package/.gitignore             |   6 -
 examples/cmake/find_package/CMakeLists.txt         |  33 ++--
 examples/cmake/find_package/hello_mongoc.c         |  34 ----
 examples/cmake/find_package_static/CMakeLists.txt  |  44 +++++
 examples/compile-with-pkg-config-static.sh         |   4 +
 examples/compile-with-pkg-config.sh                |   4 +
 examples/hello_mongoc.c                            |  34 ++++
 src/Makefile.am                                    |   9 +-
 src/libmongoc-static-1.0.pc.in                     |  11 ++
 31 files changed, 679 insertions(+), 259 deletions(-)

commit 455d18776fd312fc0a5e675f3f45cff3a6ae0601
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 26 22:02:32 2017 -0400

    avoid pip cache corruption on s390x

 .evergreen/integration-tests.sh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 1f556ec8a442645e88f63969e24d4f6385c27fc9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 25 19:26:29 2017 -0400

    comments in compile-windows.sh

 .evergreen/compile-windows.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 9feb9772409771d8116616ae9e65e79b46d8eed8
Author: Aleksander Melnikov <a.melnikov69@gmail.com>
Date:   Wed Mar 15 21:22:23 2017 +0700

    CDRIVER-2080 cmake checks socket API params
    
    Necessary for HP-UX and other legacy platforms.

 CMakeLists.txt | 51 ++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 48 insertions(+), 3 deletions(-)

commit 7f4b1f6da7bb4dd0912eeda3c5b82a3e10264db1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 23 18:08:53 2017 -0400

    CDRIVER-299 fix cmake check for SSPI

 CMakeLists.txt | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit c6ebd2233c04ce6d00d0a25d76b806758b02f682
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 23 16:20:39 2017 -0400

    CDRIVER-589 test oversized unordered upsert

 tests/test-bulk.c | 52 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 52 insertions(+)

commit 758adfe9e4f3de25f7c06e15b334b896037d0e52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 23 16:19:45 2017 -0400

    CDRIVER-589 style in mongoc-write-command.c

 src/mongoc/mongoc-write-command.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d38df5714f898810d83a7f7a704530dfd9a90a9e
Author: Adam Seering <aseering@nutonian.com>
Date:   Mon Feb 6 18:21:55 2017 -0500

    Skip over documents that are too large to upload to MongoDB

 src/mongoc/mongoc-write-command.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 8c0e06fe2059bed372d2d13b487e222125069952
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 16:40:38 2017 -0400

    CDRIVER-2018 add mongoc_bulk_operation_insert_with_opts

 NEWS                                           |   2 +
 doc/mongoc_bulk_operation_insert.rst           |   2 +
 doc/mongoc_bulk_operation_insert_with_opts.rst |  42 +++++
 doc/mongoc_bulk_operation_t.rst                |   1 +
 src/mongoc/mongoc-bulk-operation.c             |  36 ++++-
 src/mongoc/mongoc-bulk-operation.h             |   5 +
 src/mongoc/mongoc-util-private.h               |   4 +
 src/mongoc/mongoc-util.c                       |  17 ++
 tests/test-bulk.c                              | 209 +++++++++++++++++++++++++
 9 files changed, 312 insertions(+), 6 deletions(-)

commit 1860c2768c1cd583916a9bdd7e20b18afaf5f781
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 17:24:49 2017 -0400

    clean up asserts in mongoc-write-command.c

 src/mongoc/mongoc-write-command.c | 28 +++++-----------------------
 1 file changed, 5 insertions(+), 23 deletions(-)

commit 8cf3e639f72f77dc092995ea9223791382adf626
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 13:15:14 2017 -0400

    CDRIVER-2058 prohibit small heartbeatfrequencyms values

 doc/mongoc_uri_set_option_as_int32.rst |  5 ++---
 doc/mongoc_uri_t.rst                   |  2 ++
 src/mongoc/mongoc-uri.c                | 15 ++++++++++++++-
 tests/test-mongoc-uri.c                | 35 ++++++++++++++++++++++++++++++++++
 4 files changed, 53 insertions(+), 4 deletions(-)

commit 84ee70aa9ca6f08d3686cb7ba34049b2cb9e4181
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 16:41:16 2017 -0400

    link from old bulk write function docs to new ones

 doc/mongoc_bulk_operation_remove.rst      | 2 ++
 doc/mongoc_bulk_operation_remove_one.rst  | 2 ++
 doc/mongoc_bulk_operation_replace_one.rst | 2 ++
 doc/mongoc_bulk_operation_update.rst      | 6 +++---
 doc/mongoc_bulk_operation_update_one.rst  | 2 ++
 5 files changed, 11 insertions(+), 3 deletions(-)

commit 415a5ee4a77fde591c1d5ba3faaf483194b50ddc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 11:17:01 2017 -0400

    CDRIVER-2084 add mongoc_uri_set_auth_mechanism

 NEWS                                        |  6 +++++
 doc/authentication.rst                      |  4 ++++
 doc/mongoc_uri_get_auth_mechanism.rst       |  4 ++++
 doc/mongoc_uri_get_auth_source.rst          |  4 ++++
 doc/mongoc_uri_get_mechanism_properties.rst |  4 +++-
 doc/mongoc_uri_set_auth_mechanism.rst       | 35 +++++++++++++++++++++++++++++
 doc/mongoc_uri_set_auth_source.rst          |  4 ++++
 doc/mongoc_uri_set_mechanism_properties.rst |  4 ++++
 doc/mongoc_uri_t.rst                        |  1 +
 src/mongoc/mongoc-uri.c                     | 20 +++++++++++++++++
 src/mongoc/mongoc-uri.h                     |  3 +++
 tests/test-mongoc-uri.c                     |  9 ++++++++
 12 files changed, 97 insertions(+), 1 deletion(-)

commit ecca77767519f51c9ef54aa20baeca376bc96218
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 11:56:39 2017 -0400

    always link to current libbson docs

 doc/conf.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9c3f80151ccd790ea4f7dec9419a0db8a6b37ef4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 22 10:25:05 2017 -0400

    style in cursor.rst

 doc/cursors.rst | 24 +++++++++++++++++++++---
 1 file changed, 21 insertions(+), 3 deletions(-)

commit 9aac2adbb226c4709daf6c496bca8fd6db51f4a9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 23:16:09 2017 -0400

    add canonical link to <head> in HTML docs

 doc/conf.py | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 258bf0582a45936c0ab29a38b0bf97643ba53eec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 23:10:38 2017 -0400

    typo in sphinx config

 doc/conf.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 14cc86790f158288da4dad636d904064a91dee06
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 16:43:27 2017 -0400

    CDRIVER-2054 use MONGOC_EXPORT for gridfs funs

 src/mongoc/mongoc-gridfs-file.h | 27 +++++++++++++--------------
 1 file changed, 13 insertions(+), 14 deletions(-)

commit 3029021b6c8b66564c8da491365df12d58973620
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 16:29:20 2017 -0400

    CDRIVER-2034 fix index test
    
    On some of our zSeries build machines, example.com is aliased to
    localhost, so there appears to actually be a running mongod on
    example.com:27017. Use example.doesntexist to test connection errors
    instead.

 tests/test-mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 57b2c1eccb123d2812308401e7223d544e935cad
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 16:23:57 2017 -0400

    Revert "CDRIVER-2034 disable create-index test on s390x"
    
    081b14527e2df05c884a86a948f844efd761675f

 tests/test-mongoc-collection.c | 17 +----------------
 1 file changed, 1 insertion(+), 16 deletions(-)

commit 6341c7fecbb828fa0f8df6020dc7beeb355400bd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 18 19:14:45 2017 -0400

    CDRIVER-2054 use MONGOC_EXPORT for exports
    
    We'd used BSON_EXPORT, but that doesn't work now because it was updated
    in libbson commit 5b5b74e0. Now, if BSON_COMPILATION isn't defined,
    BSON_EXPORT does *not* export symbols. We should properly make a new
    macro MONGOC_EXPORT that exports symbols iff MONGOC_COMPILATION is set.

 CMakeLists.txt                                  |   1 +
 src/mongoc/Makefile.am                          |   1 +
 src/mongoc/mongoc-apm.h                         | 136 ++++++++++++------------
 src/mongoc/mongoc-bulk-operation.h              |  49 ++++-----
 src/mongoc/mongoc-client-pool.h                 |  23 ++--
 src/mongoc/mongoc-client.h                      |  71 +++++++------
 src/mongoc/mongoc-collection.h                  |  85 +++++++--------
 src/mongoc/mongoc-crypto-cng.h                  |   5 +-
 src/mongoc/mongoc-cursor.h                      |  37 +++----
 src/mongoc/mongoc-database.h                    |  49 ++++-----
 src/mongoc/mongoc-find-and-modify.h             |  34 +++---
 src/mongoc/mongoc-gridfs-file-list.h            |   7 +-
 src/mongoc/mongoc-gridfs-file.h                 |  27 ++---
 src/mongoc/mongoc-gridfs.h                      |  25 ++---
 src/mongoc/mongoc-handshake.h                   |   4 +-
 src/mongoc/mongoc-index.h                       |  14 +--
 src/mongoc/mongoc-init.h                        |   5 +-
 src/mongoc/mongoc-log.h                         |  13 +--
 src/mongoc/mongoc-macros.h                      |  71 +++++++++++++
 src/mongoc/mongoc-matcher.h                     |   7 +-
 src/mongoc/mongoc-rand.h                        |   7 +-
 src/mongoc/mongoc-read-concern.h                |  13 +--
 src/mongoc/mongoc-read-prefs.h                  |  23 ++--
 src/mongoc/mongoc-server-description.h          |  15 +--
 src/mongoc/mongoc-socket.h                      |  37 +++----
 src/mongoc/mongoc-ssl.h                         |   3 +-
 src/mongoc/mongoc-stream-buffered.h             |   3 +-
 src/mongoc/mongoc-stream-file.h                 |   7 +-
 src/mongoc/mongoc-stream-gridfs.h               |   3 +-
 src/mongoc/mongoc-stream-socket.h               |   5 +-
 src/mongoc/mongoc-stream-tls-libressl.h         |   5 +-
 src/mongoc/mongoc-stream-tls-openssl.h          |   4 +-
 src/mongoc/mongoc-stream-tls-secure-channel.h   |   4 +-
 src/mongoc/mongoc-stream-tls-secure-transport.h |   4 +-
 src/mongoc/mongoc-stream-tls.h                  |  13 +--
 src/mongoc/mongoc-stream.h                      |  27 ++---
 src/mongoc/mongoc-topology-description.h        |  10 +-
 src/mongoc/mongoc-uri.h                         |  83 ++++++++-------
 src/mongoc/mongoc-version-functions.h           |  14 +--
 src/mongoc/mongoc-write-concern.h               |  39 +++----
 src/mongoc/mongoc.h                             |   1 +
 41 files changed, 553 insertions(+), 431 deletions(-)

commit 25273b3c827868c47ee9072cfa6d24aed33a82bb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 16:07:40 2017 -0400

    CDRIVER-782 leak in URI error test

 tests/test-mongoc-uri.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit f7d495e328af596a01cb7d0fcab67da4686c1903
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 21 16:02:47 2017 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5942ddce0840f4bdfaafab08f01bff78a3c9850d
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 16 13:22:40 2017 -0700

    CDRIVER-2062 Compile and test Windows Native SSL & SASL under mingw

 .evergreen/config.yml                         | 68 +++++++++++++++++++--------
 src/mongoc/mongoc-secure-channel.c            |  5 ++
 src/mongoc/mongoc-sspi.c                      |  5 ++
 src/mongoc/mongoc-stream-tls-secure-channel.c |  9 ++++
 4 files changed, 67 insertions(+), 20 deletions(-)

commit 63a68090e928d2e8867e90a8a943f7addfb83e61
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 15 15:25:32 2017 -0700

    CDRIVER-1549 Connection string documentation incomplete

 doc/advanced-connections.rst |   2 +-
 doc/authentication.rst       |  81 ++++++++++++++++---
 doc/conf.py                  |   1 +
 doc/mongoc_uri_t.rst         | 188 ++++++++++++++++++++++++++-----------------
 src/mongoc/mongoc-uri.c      |   5 +-
 src/mongoc/mongoc-uri.h      |   7 +-
 6 files changed, 188 insertions(+), 96 deletions(-)

commit ba74b9fcb92d592777ccc34e04d4e50a42a630bd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 16 10:00:18 2017 -0700

    CDRIVER-782 Allow more detailed error reporting for failed URI parsing

 src/mongoc/mongoc-uri.c | 66 ++++++++++++++++++++++++++++++++++++-------------
 src/mongoc/mongoc-uri.h |  3 +++
 tests/test-mongoc-uri.c | 52 +++++++++++++++++++++++++++++++++++++-
 3 files changed, 103 insertions(+), 18 deletions(-)

commit c22301b391fb9252166ca544dd768ae8aca634bf
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 15 15:47:17 2017 -0700

    Improve docs css

 doc/mongoc-theme/static/mongoc.css_t | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit 081b14527e2df05c884a86a948f844efd761675f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 15 23:20:01 2017 -0400

    CDRIVER-2034 disable create-index test on s390x

 tests/test-mongoc-collection.c | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

commit f64c2083b39d614c8c962209230ac053ba49558d
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 15 16:38:03 2017 -0700

    Fix mingw build

 .evergreen/compile-windows-mingw.bat | 6 +++---
 .evergreen/compile-windows.sh        | 1 +
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 8d5bf4a631b0e8b8563fa14489e3f2c68cba1639
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 15 10:43:45 2017 -0700

    CDRIVER-2005 Improve installation instructions

 doc/installing.rst | 42 ++++++++++++++++++++++++++++++++++--------
 1 file changed, 34 insertions(+), 8 deletions(-)

commit 9fb2398134b78ea036c13bf4a56ea956e8f40b68
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 15 09:54:41 2017 -0700

    CDRIVER-2005 Produce proper debug & release binaries

 .evergreen/compile-windows.sh | 35 ++++++++++++++++++++++++-----------
 .evergreen/run-tests.sh       |  6 ++++--
 2 files changed, 28 insertions(+), 13 deletions(-)

commit 242e585de1d0fd142fc2222a98b2deb2f592bc1b
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 14 16:27:21 2017 -0700

    CDRIVER-2032 Unix Domain Sockets must be escaped in URI

 src/mongoc/mongoc-host-list.c    | 39 ++++++++++++++++++++
 src/mongoc/mongoc-uri.c          | 77 ++++++----------------------------------
 src/mongoc/mongoc-util-private.h |  6 ++++
 src/mongoc/mongoc-util.c         | 24 +++++++++++++
 tests/test-libmongoc.c           | 26 --------------
 tests/test-libmongoc.h           |  2 --
 tests/test-mongoc-uri.c          | 10 +++---
 7 files changed, 84 insertions(+), 100 deletions(-)

commit e432ad9cd2cdd4c36c277e39a54b94cff9b3eea6
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 14 11:44:07 2017 -0700

    Revert "CDRIVER-2032 - Unix Domain Sockets must be escaped in URI"
    
    This reverts commit 0143ab37a030ed0d302d816e66180a0ed83d01c8.

 tests/json/connection_uri/invalid-uris.json | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 63757304e5e97a8beb4f6d1bac18c7723a6f421d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 11:42:46 2017 -0500

    CDRIVER-2015 getpeername and getsockopt params, part 2

 CMakeLists.txt                   | 14 +++++---------
 build/autotools/CheckCompiler.m4 | 39 ++++++---------------------------------
 src/mongoc/mongoc-config.h.in    |  9 ++-------
 src/mongoc/mongoc-socket.c       | 13 ++++++++-----
 src/mongoc/mongoc-socket.h       |  6 +-----
 5 files changed, 22 insertions(+), 59 deletions(-)

commit 779b71a655a855339b73d86819f3cf73c43cd911
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 14 11:40:07 2017 -0700

    CDRIVER-784: Only test for/missing warnings when explicitly requested

 tests/test-mongoc-connection-uri.c | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

commit 2218660e08ae6871e202a6067c00421ea571133e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 14 11:11:24 2017 -0700

    CDRIVER-1987 mongoc_uri_unescape() silently fails on invalid percent-encoding

 src/mongoc/mongoc-uri.c |  1 +
 tests/test-mongoc-uri.c | 29 +++++++++++++++++++++++++----
 2 files changed, 26 insertions(+), 4 deletions(-)

commit 980ce3762be9010c64f8097e0c7cc5cc8b73a9b2
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 14 10:48:49 2017 -0700

    the build ticket has been fixed now

 .evergreen/config.yml        |  5 +++--
 .evergreen/run-auth-tests.sh | 27 ++++++++++++---------------
 2 files changed, 15 insertions(+), 17 deletions(-)

commit 6dc5515d47cb8999606ceab257ff7a79c68cdf25
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 24 13:30:25 2017 -0800

    CDRIVER-2005 Don't use naked assert()s

 .../future-value.c.template                        |   4 +-
 build/future_function_templates/future.c.template  |   8 +-
 examples/example-gridfs.c                          |   1 +
 src/libbson                                        |   2 +-
 src/mongoc/mongoc-counters.c                       |   1 -
 src/mongoc/mongoc-rpc.c                            |  38 +--
 src/mongoc/mongoc-topology-description.c           |   2 +-
 src/mongoc/utlist.h                                |  40 ++-
 tests/TestSuite.c                                  |   3 +-
 tests/TestSuite.h                                  |   2 +-
 tests/json-test.c                                  |  60 ++--
 tests/json/connection_uri/README.rst               |   4 +-
 tests/mock_server/future-value.c                   | 346 +++++++++++----------
 tests/mock_server/future.c                         |  37 ++-
 tests/mock_server/mock-rs.c                        |   6 +-
 tests/mock_server/mock-server.c                    |  10 +-
 tests/mock_server/request.c                        |  38 +--
 tests/mongoc-tests.h                               |   1 -
 tests/ssl-test.c                                   |  46 +--
 tests/test-bulk.c                                  | 329 ++++++++++----------
 tests/test-conveniences.c                          |  35 ++-
 tests/test-conveniences.h                          |   2 +-
 tests/test-libmongoc.c                             |  18 +-
 tests/test-mongoc-array.c                          |  22 +-
 tests/test-mongoc-async.c                          |   8 +-
 tests/test-mongoc-client-pool.c                    |  46 +--
 tests/test-mongoc-client.c                         |  90 +++---
 tests/test-mongoc-cluster.c                        |  20 +-
 tests/test-mongoc-collection-find.c                |   7 +-
 tests/test-mongoc-collection.c                     | 136 ++++----
 tests/test-mongoc-command-monitoring.c             |  10 +-
 tests/test-mongoc-cursor.c                         |  17 +-
 tests/test-mongoc-database.c                       | 102 +++---
 tests/test-mongoc-error.c                          |   2 +-
 tests/test-mongoc-exhaust.c                        |  48 +--
 tests/test-mongoc-find-and-modify.c                |  46 +--
 tests/test-mongoc-gridfs.c                         |  30 +-
 tests/test-mongoc-matcher.c                        |  36 +--
 tests/test-mongoc-read-prefs.c                     |   8 +-
 tests/test-mongoc-sdam-monitoring.c                |   8 +-
 tests/test-mongoc-sdam.c                           |  22 +-
 tests/test-mongoc-server-selection.c               |   8 +-
 tests/test-mongoc-set.c                            |  22 +-
 tests/test-mongoc-socket.c                         |  64 ++--
 tests/test-mongoc-stream-tls-error.c               |  46 +--
 tests/test-mongoc-stream.c                         |   4 +-
 tests/test-mongoc-topology-reconcile.c             |  16 +-
 tests/test-mongoc-topology-scanner.c               |  14 +-
 tests/test-mongoc-topology.c                       | 123 ++++----
 tests/test-mongoc-uri.c                            |  48 +--
 tests/test-mongoc-write-concern.c                  |   4 +-
 tests/test-replica-set-ssl.c                       |   6 +-
 tests/test-sasl.c                                  |   2 +-
 tests/test-write-commands.c                        |  20 +-
 54 files changed, 1058 insertions(+), 1010 deletions(-)

commit aee2565cfbe216bc68955d946791cf186201ace2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 10 09:13:46 2017 -0500

    CDRIVER-2014 fix Evergreen tarball-checking code

 .evergreen/config.yml | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit 2729838592e55909ae3a14f4909cb81b7aa6da03
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 19:13:02 2017 -0500

    CDRIVER-2014 clean all doctrees and buildinfo

 Makefile.am          | 4 +++-
 doc/html/Makefile.am | 2 +-
 doc/man/Makefile.am  | 2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

commit 0e19e78bfe7fe9473d4f4e74dbd2ae6a2a184a6e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 15:47:08 2017 -0500

    check that man pages are included in tarball

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 666007e9763c6a8a1ac939bb27c7fc416f154e90
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 12:31:31 2017 -0500

    verify all C files are distributed
    
    Catch mistakes like CDRIVER-2071.

 .evergreen/config.yml | 24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)

commit b5337c563da8c0cebbfc704cb90c743378271ff1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 12:30:48 2017 -0500

    CDRIVER-2071 distribute mongoc-sspi.c

 src/mongoc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 4046ae947ca00e6970a579d97b77cba273a1c6e0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 11:44:58 2017 -0500

    CDRIVER-2014 check for doc files in release tarball

 .evergreen/config.yml | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

commit dfd1cc9d07243ac11e096363395fba5fb0d7c955
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 9 08:50:52 2017 -0500

    don't try to make a virtualenv on solaris

 .evergreen/integration-tests.sh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 8ff898a971c6d892e90e8de4a953b495fc2f5dc4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 8 14:15:52 2017 -0500

    always use latest Mongo Orchestration

 .evergreen/config.yml           |  1 -
 .evergreen/integration-tests.sh | 10 +++++++++-
 2 files changed, 9 insertions(+), 2 deletions(-)

commit d75e3562088c54e8d4d7fc90253133e156f39082
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 8 14:15:22 2017 -0500

    CDRIVER-2078 distribute libbson-objects.inv

 doc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit d9478760c9df97bd4310c157040fabef453fb3d5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 6 15:34:45 2017 -0500

    CDRIVER-2015 getpeername and getsockopt params vary
    
    Call getpeername and getsockopt with the right parameters on each
    platform where we use the Autotools build system. Set reasonable
    defaults in CMake builds.

 CMakeLists.txt                     |   9 ++
 build/autotools/CheckCompiler.m4   |  46 ++++++++
 build/autotools/m4/ax_prototype.m4 | 232 +++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-config.h.in      |  14 +++
 src/mongoc/mongoc-socket.c         |   8 +-
 5 files changed, 306 insertions(+), 3 deletions(-)

commit a818257848ad2d3dce9c7ef24dc7d2bde1a3f35f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 8 11:02:25 2017 -0500

    distinguish archive uploads by branch

 .evergreen/config.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8a3498751b518a5081c7839aace81e6132d34f31
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 8 09:18:01 2017 -0500

    CDRIVER-2078 store libbson's objects.inv locally

 doc/conf.py             |   4 +++-
 doc/libbson-objects.inv | Bin 0 -> 2826 bytes
 2 files changed, 3 insertions(+), 1 deletion(-)

commit ff8316b84aca45856987e577aeb7776a03468e99
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 6 18:49:56 2017 -0500

    update install instructions for macOS

 doc/installing.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 17b5f5ab81f8f4781bfbcea9b6bcde47dbb92420
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 6 18:45:45 2017 -0500

    update install instructions for macOS

 doc/installing.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d4f67c409e1747ccc27845b0bed45a2179b82d2f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 6 10:56:29 2017 -0500

    fix Versions.m4 for HP's "cut"

 build/autotools/Versions.m4 | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 30be089a93d6a781be52aa2c1d347700ece7ab1d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 5 16:10:58 2017 -0500

    NEWS for 1.5.5

 NEWS | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 431a6e79fc66e4b273f2cb5b2825639259c6ee60
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 4 10:03:48 2017 -0500

    CDRIVER-2034 reenable index test

 tests/test-mongoc-collection.c | 4 ----
 1 file changed, 4 deletions(-)

commit de0e30a0c8fdd109b8bb99becbb37d4bfb73395d
Merge: ea5d1cd fe277d1
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sun Mar 5 12:19:03 2017 -0500

    Merge pull request #425 from jmikola/cdriver-2072
    
    CDRIVER-2072: Always initialize cursor filter and opts

commit fe277d1e3d247e80cd630a082ed29e0f0eb2a1f3
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Mar 3 14:53:16 2017 -0500

    CDRIVER-2072: Always initialize cursor filter and opts
    
    mongoc_cursor_destroy() always attempts to destroy these documents, which would previously crash if they were left uninitialized when an error was reported by _mongoc_cursor_new_with_opts().

 src/mongoc/mongoc-cursor.c |  9 +++---
 tests/test-mongoc-cursor.c | 72 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 76 insertions(+), 5 deletions(-)

commit ea5d1cd20092d6eea9fbd8e43903e063d78f94a1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 4 08:37:40 2017 -0500

    CDRIVER-2035 don't build index and API man pages
    
    mongoc_api.3 and mongoc_index.3 man pages include all other pages, so
    skip them.

 doc/conf.py | 4 ++++
 1 file changed, 4 insertions(+)

commit 59a6a0685a049e4d709bcdfdf392e202cbbd2796
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 3 20:24:26 2017 -0500

    mongoc docs link to current libbson release

 doc/conf.py | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit 5dcbcf6a008037d541d45d2dfcbb90ab42dd9925
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 3 18:22:57 2017 -0500

    break after return in _mongoc_async_cmd_phase_setup

 src/mongoc/mongoc-async-cmd.c | 1 -
 1 file changed, 1 deletion(-)

commit e021467cbdd10da68d2a78cd1af75e6df436ffcc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 3 18:22:32 2017 -0500

    unused import in generate-future-functions.py

 build/generate-future-functions.py | 1 -
 1 file changed, 1 deletion(-)

commit 1a81cc54025e567a562bcfe45ec40c9bf0a5576b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 3 15:30:39 2017 -0500

    include rand seed in test output

 tests/TestSuite.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2e6156afa8fa6234044ba010ead1158510816854
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 2 15:39:34 2017 -0500

    CDRIVER-2071 distribute mongoc-cluster-sspi.c

 src/mongoc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 81d194541e65209f670fe8f9e3706c1750947be0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 2 13:40:15 2017 -0500

    CDRIVER-2067 fix rand num generator in MSVC

 src/mongoc/mongoc-topology-description.c |  2 +-
 src/mongoc/mongoc-util-private.h         |  7 ++-----
 src/mongoc/mongoc-util.c                 | 20 ++++++++++++++++++++
 tests/test-mongoc-util.c                 | 20 ++++++++++++++++++++
 4 files changed, 43 insertions(+), 6 deletions(-)

commit 9ca1b11cc697b822dee1f872d9e08d49f5fc4bea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 2 11:58:11 2017 -0500

    unneeded cast

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4b9b3bdbe350af7ca66842ef410f3e268aa8f815
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Feb 26 17:16:17 2017 -0500

    unused check for clock_gettime

 build/autotools/FindDependencies.m4 | 7 -------
 1 file changed, 7 deletions(-)

commit deefb2268c5b263a3890dda7542a24e2b64470c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 28 02:58:41 2017 -0500

    CDRIVER-2073 fix topology scanner data race

 src/mongoc/mongoc-server-description-private.h       |  3 +++
 src/mongoc/mongoc-server-description.c               |  1 +
 src/mongoc/mongoc-topology-description-apm-private.h |  2 +-
 src/mongoc/mongoc-topology-description-apm.c         |  5 +++--
 src/mongoc/mongoc-topology.c                         | 11 +++++++++--
 5 files changed, 17 insertions(+), 5 deletions(-)

commit 6a54d2ce37fb72cfb5b6527239e0980ec3bfc8ad
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 28 02:00:32 2017 -0500

    CDRIVER-2073 test data race in topology scanner

 src/mongoc/mongoc-client-pool-private.h  |   5 +-
 src/mongoc/mongoc-client-pool.c          |   6 +-
 tests/test-libmongoc.c                   |  28 +++++++++
 tests/test-libmongoc.h                   |   2 +
 tests/test-mongoc-topology-description.c |   2 +-
 tests/test-mongoc-topology-reconcile.c   | 104 +++++++++++++++++++++++++++++++
 6 files changed, 141 insertions(+), 6 deletions(-)

commit d41fe55981ad62f28e44a4e2d6b09a4869ef2f11
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 28 15:58:43 2017 -0500

    fix a typedef in test code

 build/generate-future-functions.py | 2 +-
 tests/mock_server/future-value.h   | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 930ab068a85156b68edba445d20b2082b3bc5ee4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 20 17:46:21 2017 -0500

    CDRIVER-2052 measure connectTimeoutMS per server

 src/mongoc/mongoc-async-cmd-private.h        |  3 +-
 src/mongoc/mongoc-async-cmd.c                |  5 +-
 src/mongoc/mongoc-async-private.h            |  2 +-
 src/mongoc/mongoc-async.c                    | 71 +++++++++++++++-------------
 src/mongoc/mongoc-topology-scanner-private.h |  3 +-
 src/mongoc/mongoc-topology-scanner.c         |  8 +---
 src/mongoc/mongoc-topology.c                 |  6 +--
 tests/test-libmongoc.c                       |  2 +-
 tests/test-mongoc-async.c                    |  2 +-
 tests/test-mongoc-topology-scanner.c         |  2 +-
 10 files changed, 52 insertions(+), 52 deletions(-)

commit ab2e43839c872733165137f6abbb3d5f91a4f96c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Feb 26 19:11:17 2017 -0500

    google analytics in HTML docs

 doc/conf.py | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit e9e3a6c9f0f2b982a015612d4682b5caabc38627
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 28 10:49:07 2017 -0500

    CDRIVER-2060 localThreshold code cleanups

 src/mongoc/mongoc-uri.c |  1 -
 tests/test-mongoc-uri.c | 33 ++++++++++++++++++---------------
 2 files changed, 18 insertions(+), 16 deletions(-)

commit faa52777ba79797ebab1a231c20a413cd2e310cc
Merge: 2eb4b26 e51f87c
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Feb 28 09:37:40 2017 -0500

    Merge pull request #424 from jmikola/1.5-cdriver-2056
    
    CDRIVER-2056, CDRIVER-2060: Improve localThresholdMS URI option parsing

commit e51f87cddbd02bae14f3b71a38b7d213e70ca638
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Feb 16 12:21:38 2017 -0500

    CDRIVER-2060: Validate that localThresholdMS URI option is non-negative

 src/mongoc/mongoc-uri.c |  5 +++++
 tests/test-mongoc-uri.c | 13 +++++++++++++
 2 files changed, 18 insertions(+)

commit 0bc493e5cd000a0e59a1b65d2f0682fbb6bc603a
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Feb 16 12:12:04 2017 -0500

    CDRIVER-2056: Parse zero values for localThresholdMS URI option

 src/mongoc/mongoc-topology.c    |  6 ++----
 src/mongoc/mongoc-uri-private.h |  3 +++
 src/mongoc/mongoc-uri.c         | 19 +++++++++++++++++++
 tests/test-mongoc-uri.c         | 42 +++++++++++++++++++++++++++++------------
 4 files changed, 54 insertions(+), 16 deletions(-)

commit 2eb4b266f30a9fecbf7b72b98e93377604235ed9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Feb 26 17:12:51 2017 -0500

    obsolete TODOs

 tests/test-bulk.c | 6 ------
 1 file changed, 6 deletions(-)

commit 501399a94bd5c3b6a33550df570e978c3b40451c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Feb 25 14:30:48 2017 -0500

    don't git-ignore config.yml

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 05ba957de29220687e76750d28c9e1f488a89f08
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Feb 25 14:30:39 2017 -0500

    CDRIVER-1058 fix cmake test in Evergreen

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8c900de6ed1b87b22c7f7c104fa362fca727eb8a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 24 11:40:48 2017 -0500

    CDRIVER-1058 cmake package config
    
    Also fix CDRIVER-1993: cmake now checks libbson version.

 .evergreen/compile-unix-cmake.sh            |  36 ++++++----
 .evergreen/compile-windows-mingw.bat        |   2 +-
 .evergreen/compile-windows.sh               |   2 +-
 .evergreen/compile.sh                       |   6 +-
 .evergreen/config.yml                       |   4 +-
 CMakeLists.txt                              |  31 ++++----
 build/cmake/FindBSON.cmake                  | 106 +++++++++++++++-------------
 build/cmake/Makefile.am                     |   2 +
 build/cmake/MongoCPackage.cmake             |  26 +++++++
 build/cmake/libmongoc-1.0-config.cmake.in   |  24 +++++++
 doc/installing.rst                          |  10 +--
 examples/cmake/FindPkgConfig/.gitignore     |   6 ++
 examples/cmake/FindPkgConfig/CMakeLists.txt |  37 ++++++++++
 examples/cmake/FindPkgConfig/hello_mongoc.c |  34 +++++++++
 examples/cmake/find_package/.gitignore      |   6 ++
 examples/cmake/find_package/CMakeLists.txt  |  43 +++++++++++
 examples/cmake/find_package/hello_mongoc.c  |  34 +++++++++
 17 files changed, 321 insertions(+), 88 deletions(-)

commit 3b86e7ac18297e1634948ef930f4201a32bf572a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Feb 19 20:40:53 2017 -0500

    CDRIVER-1058 don't git-ignore cmake files

 .gitignore | 1 -
 1 file changed, 1 deletion(-)

commit a71fbd2bca912ca4ee80ee2ac3a05f87b09f730e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 24 14:11:27 2017 -0800

    CDRIVER-2025 Duplicate the original string and inline lowercase it
    
    Its easier to simply duplicate it upfront so we don't have to \0
    terminate it afterwards

 src/mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f67b44f8d1e52ea0966e222f20afd745722c6265
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 24 11:40:10 2017 -0800

    rollback libbson bumping
    
    mongoc still assumes bson includes assert.h

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 841bddecb3156c70fe1b4ac298b6b81e1f04face
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 24 11:38:53 2017 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0cdddc020bbb2c16b42aa49ba23a2c70b30bbadf
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 24 11:34:14 2017 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1b42409f344c3a90c3b0857bfd95fe21e3cd0c6c
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 23 11:36:19 2017 -0800

    CDRIVER-2023 Unescaped percent sign in connection uri should fail

 src/mongoc/mongoc-uri.c | 38 ++++++++++++++++++++++++++------------
 1 file changed, 26 insertions(+), 12 deletions(-)

commit 35c22ed5ddd76f1477fd8ceaef940b2d993293ae
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 23 11:16:03 2017 -0800

    Revert "CDRIVER-2023 - Unescaped percent sign in connection uri should fail"
    
    This reverts commit 1f7634d885aa096a15c5a4db9e3fb812bf99d059.

 tests/json/connection_uri/invalid-uris.json | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 49c1eafbc7eccdd74bc3aa7055042c8f11e0b36b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 23 11:13:45 2017 -0800

    Revert "CDRIVER-2022 Missing support for fsync in connection uri"
    
    This reverts commit 632da6a1b97cccf31121bc043e350de5b8e95e6c.

 tests/json/connection_uri/valid-warnings.json | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

commit 63764775a3f4a359dd25512eeb88ae8ea4286245
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 23 11:11:32 2017 -0800

    Revert "CDRIVER-2024 - Escaped username maybe not properly parsed"
    
    This reverts commit c80acaf6e397fa359d2c51962fc4d993992dce47.

 tests/json/connection_uri/valid-auth.json | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

commit fbbb80243913d4172fa23bc8c38b32ccbd001d77
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 16:25:44 2017 -0800

    Revert "CDRIVER-2029 - 3 colons should fails URI parsing"
    
    This reverts commit 285c3a00cb9d2873b839199c63c41a27dd47a2a5.

 tests/json/connection_uri/invalid-uris.json | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 48ed951f240ec87cd8319c4978976f2d4c6a1f92
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 15:46:16 2017 -0800

    CDRIVER-2031 Multiple unescaped @ should fail uri parsing

 src/mongoc/mongoc-uri.c                            | 20 +++++++++---
 .../connection_uri/additional-nonspec-tests.json   | 36 ++++++++++++++++++++++
 2 files changed, 52 insertions(+), 4 deletions(-)

commit d9283b80184d563b7172a10355d0bc0a6591df67
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 14:32:18 2017 -0800

    Revert "CDRIVER-2031 - Multiple unescaped @ should fail uri parsing"
    
    This reverts commit b789a26bbc9873dc6c2d2415fe8a8f649d5fb432.

 tests/json/connection_uri/invalid-uris.json | 9 +++++++++
 1 file changed, 9 insertions(+)

commit c1e0281968c491a8a33578ffb1630fd946cb956e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 14:01:07 2017 -0800

    CDRIVER-2025 Repeated options should issue a warning

 src/mongoc/mongoc-uri.c                            | 123 ++++++++++++++-------
 src/mongoc/mongoc-uri.h                            |   4 +-
 .../connection_uri/additional-nonspec-tests.json   |  72 ++++++++++++
 tests/test-mongoc-connection-uri.c                 |  10 +-
 4 files changed, 167 insertions(+), 42 deletions(-)

commit ecc31c4ed384e8abd9f76fb87809ae85a3a9ab5e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 10:37:51 2017 -0800

    Revert "CDRIVER-2025 - Repeated options should issue a warning"
    
    This reverts commit 79f154e0c00a7f704ddfc354a847b45169f35716.

 tests/json/connection_uri/valid-warnings.json | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 86abf4bd7026e358a080c46c25b9d80a739b50fd
Merge: 7f6326b dd10f2b
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Feb 24 06:49:15 2017 -0500

    Merge pull request #423 from jmikola/1.5-cdriver-2057
    
    CDRIVER-2057: localThresholdMS should default to 15 milliseconds

commit 7f6326b82af4a0e026e694c09a9e2293f3c131db
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 16:17:51 2017 -0800

    Whops. A tad to eager

 examples/mongoc-ping.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7e2afb9b784dd0e78caab8541921f276da8252b2
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 10:44:10 2017 -0800

    Fix mem leaks

 examples/mongoc-ping.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit bad5696b2b2377d737c98d44dcf8292f6d02528c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 22 16:09:43 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 354ff9db2d57289757b75f694f243ff0f38d32a0
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 10:32:01 2017 -0800

    Coding standard

 tests/TestSuite.h | 64 +++++++++++++++++++++++++++++++++----------------------
 1 file changed, 39 insertions(+), 25 deletions(-)

commit 237aa276e3eff656bb56ef5e1b58d7b6b739b817
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 22 10:31:40 2017 -0800

    CDRIVER-1947 Use the non-deprecated JSON function

 doc/cursors.rst                             |  2 +-
 doc/mongoc_collection_command_simple.rst    |  2 +-
 doc/mongoc_collection_find.rst              |  2 +-
 doc/mongoc_collection_find_with_opts.rst    |  2 +-
 doc/mongoc_matcher_t.rst                    |  2 +-
 doc/mongoc_uri_get_mechanism_properties.rst |  2 +-
 doc/tutorial.rst                            | 14 +++++++-------
 examples/aggregation/aggregation1.c         |  2 +-
 examples/bulk/bulk-collation.c              |  2 +-
 examples/bulk/bulk1.c                       |  2 +-
 examples/bulk/bulk2.c                       |  2 +-
 examples/bulk/bulk3.c                       |  2 +-
 examples/bulk/bulk4.c                       |  2 +-
 examples/bulk/bulk5.c                       |  4 ++--
 examples/bulk/bulk6.c                       |  2 +-
 examples/doc-common-insert.c                |  2 +-
 examples/example-client.c                   |  2 +-
 examples/example-command-monitoring.c       |  6 ++++--
 examples/example-command-with-opts.c        |  4 ++--
 examples/example-matcher.c                  |  4 ++--
 examples/example-sdam-monitoring.c          |  2 +-
 examples/filter-bsondump.c                  |  2 +-
 examples/find-and-modify.c                  |  2 +-
 examples/find_and_modify_with_opts/bypass.c |  2 +-
 examples/find_and_modify_with_opts/fields.c |  2 +-
 examples/find_and_modify_with_opts/flags.c  |  2 +-
 examples/find_and_modify_with_opts/opts.c   |  2 +-
 examples/find_and_modify_with_opts/sort.c   |  2 +-
 examples/find_and_modify_with_opts/update.c |  2 +-
 examples/mongoc-ping.c                      |  2 +-
 examples/mongoc-tail.c                      |  2 +-
 src/mongoc/mongoc-cluster-sasl.c            |  6 +++---
 src/mongoc/mongoc-rpc.c                     |  4 ++--
 tests/TestSuite.h                           |  2 +-
 tests/ha-test.c                             |  8 ++++----
 tests/json-test.c                           |  8 ++++----
 tests/test-conveniences.c                   |  2 +-
 tests/test-load.c                           |  2 +-
 tests/test-mongoc-command-monitoring.c      |  4 ++--
 tests/test-mongoc-matcher.c                 |  2 +-
 tests/test-replica-set.c                    |  2 +-
 tests/test-secondary.c                      |  2 +-
 42 files changed, 64 insertions(+), 62 deletions(-)

commit 7eea8866928db46f98a6c76edde8827d7a1594af
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 22 12:44:09 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fea9357890446c093bc1e938ae34a544b9f01445
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 20 06:36:12 2017 -0500

    redundant function mongoc_async_cmd()

 src/mongoc/mongoc-async-private.h    | 11 -----------
 src/mongoc/mongoc-async.c            | 14 --------------
 src/mongoc/mongoc-topology-scanner.c | 18 +++++++++---------
 tests/test-mongoc-async.c            | 18 +++++++++---------
 4 files changed, 18 insertions(+), 43 deletions(-)

commit ab929d352afc47e949b36f151be0505417b81457
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Feb 21 13:48:42 2017 -0800

    CDRIVER-2030 Don't include the exact option name in the check
    
    Not all the tests use the same option name to generate the warning

 tests/test-mongoc-connection-uri.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit a51e387f551d563c62a8c8cec02523a8d5772354
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Feb 21 13:39:34 2017 -0800

    Revert "CDRIVER-2030 - Deprecated options should be ignored if replacement exists"
    
    This reverts commit 3cfded64be28858f1fe9f8c7756c4afd0bb649ce.

 tests/json/connection_uri/valid-warnings.json | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit bf17726e5a1dcda40c5b4640492dc966254ed79a
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Feb 21 13:34:09 2017 -0800

    Coding standards

 tests/test-mongoc-collection.c         | 9 ++++++---
 tests/test-mongoc-command-monitoring.c | 3 +--
 2 files changed, 7 insertions(+), 5 deletions(-)

commit c2ef7994cbd58278e7d344e63a2d052eaf994337
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Feb 21 13:33:41 2017 -0800

    Coding standard

 src/mongoc/mongoc-bulk-operation.c  |  42 +++++++--------
 src/mongoc/mongoc-collection.c      |  26 +++++-----
 src/mongoc/mongoc-cursor-cursorid.c |  12 +++--
 src/mongoc/mongoc-cursor.c          | 101 +++++++++++++++++++++++++-----------
 src/mongoc/mongoc-database.c        |   3 +-
 src/mongoc/mongoc-openssl.c         |  12 ++---
 src/mongoc/mongoc-util.c            |   7 +--
 7 files changed, 123 insertions(+), 80 deletions(-)

commit 5b7ed214192ae9e6d2a6df32dfba922d5a1bb4f3
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 16 14:00:06 2017 -0800

    Use the getter rather then accessing it directly

 src/mongoc/mongoc-handshake.c | 45 +++++++++++++++++++++++--------------------
 1 file changed, 24 insertions(+), 21 deletions(-)

commit 4a0945f722d5c58ae5b5e25ac3d0860202729c3b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 16 16:39:15 2017 -0500

    CDRIVER-2017 fix bulk-op validation logic

 src/mongoc/mongoc-bulk-operation.c | 108 +++++++--
 tests/test-bulk.c                  | 460 +++++++++++++++++++++++++++++++++++++
 2 files changed, 546 insertions(+), 22 deletions(-)

commit dd10f2b4c6b4e20ec915235c7c3e8252412b4030
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Feb 16 10:12:33 2017 -0500

    CDRIVER-2057: localThresholdMS should default to 15 milliseconds

 src/mongoc/mongoc-topology-private.h | 2 +-
 tests/json-test.c                    | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 00b23b58f7071325775cfd7840d9ff8892308909
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 15 14:25:03 2017 -0500

    CDRIVER-2014 update build config for sphinx-build
    
    Ensure man pages are distributed and that sphinx cache files .buildinfo and
    .doctrees are cleaned.

 Makefile.am          |  6 ++++++
 doc/Makefile.am      |  6 ------
 doc/html/Makefile.am | 51 ++++++++++++++++-----------------------------------
 doc/man/Makefile.am  | 22 ++++++++--------------
 4 files changed, 30 insertions(+), 55 deletions(-)

commit 6623425c09a88e2add01b95f3e881edfb373b526
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 14 11:00:47 2017 -0500

    fix permissions for Orchestration

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 950d4d9870f1901328439ccf61e13e1a36393648
Author: Hannes Magnusson <bjori@php.net>
Date:   Sun Feb 12 20:49:33 2017 -0800

    Fix help text

 build/autotools/CheckSSL.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2c81e9a80bf3b202f1fba14362658592a059d5d2
Author: Bernard Spil <Sp1l@users.noreply.github.com>
Date:   Sun Feb 12 14:19:09 2017 +0100

    Fix LibreSSL build issue
    
    LibreSSL forked from 1.0.1f, this 1.0.2 method is unavailable

 src/mongoc/mongoc-stream-tls-openssl.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e746b2a0723f94560800277036e0ef1404746dfb
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 10 09:59:48 2017 -0800

    CDRIVER-2040 CDRIVER-2000 Disable GSSAPI tests for now

 .evergreen/config.yml | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 5f5ad00ee602671f80e1adbd21ff519acc938966
Author: Remi Collet <fedora@famillecollet.com>
Date:   Fri Feb 10 06:48:24 2017 +0100

    CDRIVER-2042 skip test_create_index_fail when offline

 tests/test-mongoc-collection.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 02d8d5d807d282190f7b4e26842d5b19cfa24a39
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 14:53:51 2017 -0800

    CDRIVER-2019 Missing delimiting slash between hosts and options should fail

 src/mongoc/mongoc-uri.c         | 42 ++++++++++++++++++++++++-----------------
 tests/test-libmongoc.c          |  2 +-
 tests/test-mongoc-client-pool.c | 12 ++++++------
 tests/test-mongoc-handshake.c   |  2 +-
 tests/test-mongoc-uri.c         |  2 +-
 5 files changed, 34 insertions(+), 26 deletions(-)

commit 069bc621668c08e1709425da6945c879c83ab4b1
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 17:24:31 2017 -0800

    CDRIVER-2021 UTF-8 Hostnames in connection URI should be allowed
    
    Rather then aborting on UTF-8 chars, we leave them intact.

 src/mongoc/mongoc-uri.c | 16 +++-------------
 1 file changed, 3 insertions(+), 13 deletions(-)

commit 2375decd816fd754aa688eb5047962bf2805226e
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 17:19:45 2017 -0800

    CDRIVER-2021 Enable the testcase again
    
    This reverts commit b4cda6962cd90485b4232564ee3441433e7fe635.

 .../connection_uri/valid-host_identifiers.json     | 22 +++++++++++++++++++++-
 1 file changed, 21 insertions(+), 1 deletion(-)

commit 8d3ce98d448d3fc2c8854b2452a29a14cce6ee50
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 17:47:03 2017 -0800

    Revert "Add support for case-insensitive values & to define the match options"
    
    This reverts commit 6c9083c893abd7e345d1f058dbd2a1871f7187f0.

 tests/mock_server/mock-server.c | 29 ++++----------------
 tests/mock_server/mock-server.h |  9 -------
 tests/mock_server/request.c     | 34 +++---------------------
 tests/mock_server/request.h     | 11 --------
 tests/test-conveniences.c       | 59 +++++++++--------------------------------
 tests/test-conveniences.h       | 25 +++++------------
 6 files changed, 28 insertions(+), 139 deletions(-)

commit 10053838c9bc8dc2c4a1f60acde9f29efc6ee535
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 17:47:01 2017 -0800

    Revert "Fix build on aarch64"
    
    This reverts commit 9b2dd0415e732bc2a413dd3020b5234d1cb353f1.

 tests/mock_server/mock-server.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 549cb5488921f30e02222b0ac4e9027d07b5f177
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 17:46:57 2017 -0800

    Revert "Fix incompatible type va_list <-> void *, on aarch64"
    
    This reverts commit 99084bf9384c32f3beee5cfab4591eb959ca1e66.

 tests/mock_server/request.c | 5 ++---
 tests/test-conveniences.c   | 8 ++++++--
 2 files changed, 8 insertions(+), 5 deletions(-)

commit 99084bf9384c32f3beee5cfab4591eb959ca1e66
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 16:48:47 2017 -0800

    Fix incompatible type va_list <-> void *, on aarch64

 tests/mock_server/request.c | 5 +++--
 tests/test-conveniences.c   | 8 ++------
 2 files changed, 5 insertions(+), 8 deletions(-)

commit acb7b6b8df3a240d256fb7137a50f992ec8aa91b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 13:34:27 2017 -0800

    CDRIVER-2004 Document new SSL URI Options

 doc/mongoc_ssl_opt_t.rst | 32 ++++++++++++++++++++++++++------
 doc/mongoc_uri_t.rst     | 11 +++++++++++
 2 files changed, 37 insertions(+), 6 deletions(-)

commit fbd23737d3722b27e1ec8c296481d9627ffd32b7
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jan 31 13:04:57 2017 -0800

    Add test for mongoc_ssl_opt_get_default ()

 tests/test-mongoc-client.c | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

commit a82dbba68a8a9f1d992ef21946346b11c7cbc415
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jan 30 15:53:03 2017 -0800

    CDRIVER-857 Test the support of MONGODB-X509 authentication mechanism

 .evergreen/config.yml        | 114 ++++++++++++++++++++++++++++++++-----------
 .evergreen/run-auth-tests.sh |   7 +++
 tests/x509gen/legacy-ca.crt  |  17 +++++++
 3 files changed, 110 insertions(+), 28 deletions(-)

commit 6755bdb95aeda574681ea394d28b3b940da90cfd
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jan 30 15:52:38 2017 -0800

    CDRIVER-2004 Add SSL Configuration options to the URI

 src/mongoc/mongoc-client.c |  15 +++++-
 src/mongoc/mongoc-uri.c    |   9 +++-
 src/mongoc/mongoc-uri.h    |   5 ++
 tests/test-mongoc-uri.c    | 116 +++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 142 insertions(+), 3 deletions(-)

commit 04de45247ce477804bce40e4e678d6b816bef012
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jan 30 14:53:12 2017 -0800

    Improve error on failure

 src/mongoc/mongoc-secure-channel.c | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit bb8b1884ffea2be6646a790352e24164f104b0b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 6 16:37:35 2017 -0600

    render man pages as PNGs from evergreen

 .evergreen/config.yml             | 43 +++++++++++++++++++++++++++++++++++++--
 .evergreen/man-page-image-list.sh | 33 ++++++++++++++++++++++++++++++
 2 files changed, 74 insertions(+), 2 deletions(-)

commit 9b2dd0415e732bc2a413dd3020b5234d1cb353f1
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 13:58:14 2017 -0800

    Fix build on aarch64

 tests/mock_server/mock-server.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit fc86a2a26a63f23b93202f284dc822b01ee9ba69
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 13:30:28 2017 -0800

    CDRIVER-2038 Document undocumented Connection URI Options

 doc/mongoc_uri_t.rst | 46 ++++++++++++++++++++++++++++++----------------
 1 file changed, 30 insertions(+), 16 deletions(-)

commit 2cedf097c25f3596c8054f12c03de7fba60f5613
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 10:58:41 2017 -0800

    Remove unused variable

 tests/test-mongoc-connection-uri.c | 1 -
 1 file changed, 1 deletion(-)

commit 66b721c2b910430e92aae5f96722594dcf021b15
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 10:31:20 2017 -0800

    Bump libbson to 1.7.0-dev

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 80f7e9b25fcb360c31c103ff5ca0938209947e66
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 10:30:49 2017 -0800

    Bump version

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6c9083c893abd7e345d1f058dbd2a1871f7187f0
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 1 15:53:34 2017 -0800

    Add support for case-insensitive values & to define the match options

 tests/mock_server/mock-server.c | 29 ++++++++++++++++----
 tests/mock_server/mock-server.h |  9 +++++++
 tests/mock_server/request.c     | 34 +++++++++++++++++++++---
 tests/mock_server/request.h     | 11 ++++++++
 tests/test-conveniences.c       | 59 ++++++++++++++++++++++++++++++++---------
 tests/test-conveniences.h       | 25 ++++++++++++-----
 6 files changed, 139 insertions(+), 28 deletions(-)

commit 4f184cb00c5d86ab94e9b56f2ec80e2d1b2f8b2e
Merge: 7bf676d 0143ab3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 6 09:59:42 2017 -0800

    Merge branch 'CDRIVER-784-connection-uri-spec'
    
    * CDRIVER-784-connection-uri-spec:
      CDRIVER-2032 - Unix Domain Sockets must be escaped in URI
      CDRIVER-2031 - Multiple unescaped @ should fail uri parsing
      CDRIVER-2030 - Deprecated options should be ignored if replacement exists
      CDRIVER-2029 - 3 colons should fails URI parsing
      CDRIVER-2025 - Repeated options should issue a warning
      CDRIVER-2024 - Escaped username maybe not properly parsed
      CDRIVER-2023 - Unescaped percent sign in connection uri should fail
      CDRIVER-2022 Missing support for fsync in connection uri
      CDRIVER-2021 UTF-8 Hostnames in connection URI should be allowed
      CDRIVER-2019 Missing delimiting slash between hosts and options should fail
      CDRIVER-2020 Escaped null bytes in URI (%00) should be allowed
      CDRIVER-1388 Define all URI options
      CDRIVER-1388 Warn on unsupported URI options
      CDRIVER-784: Improve boolean values in connection URI
      CDRIVER-1478 Test runner for Connection String Spec Tests
      Only used in one file

commit 0143ab37a030ed0d302d816e66180a0ed83d01c8
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 18:42:15 2017 -0800

    CDRIVER-2032 - Unix Domain Sockets must be escaped in URI

 tests/json/connection_uri/invalid-uris.json | 9 ---------
 1 file changed, 9 deletions(-)

commit b789a26bbc9873dc6c2d2415fe8a8f649d5fb432
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 18:40:39 2017 -0800

    CDRIVER-2031 - Multiple unescaped @ should fail uri parsing

 tests/json/connection_uri/invalid-uris.json | 9 ---------
 1 file changed, 9 deletions(-)

commit 3cfded64be28858f1fe9f8c7756c4afd0bb649ce
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 18:39:08 2017 -0800

    CDRIVER-2030 - Deprecated options should be ignored if replacement exists

 tests/json/connection_uri/valid-warnings.json | 17 -----------------
 1 file changed, 17 deletions(-)

commit 285c3a00cb9d2873b839199c63c41a27dd47a2a5
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 18:35:58 2017 -0800

    CDRIVER-2029 - 3 colons should fails URI parsing

 tests/json/connection_uri/invalid-uris.json | 9 ---------
 1 file changed, 9 deletions(-)

commit 79f154e0c00a7f704ddfc354a847b45169f35716
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:37:22 2017 -0800

    CDRIVER-2025 - Repeated options should issue a warning

 tests/json/connection_uri/valid-warnings.json | 17 -----------------
 1 file changed, 17 deletions(-)

commit c80acaf6e397fa359d2c51962fc4d993992dce47
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:35:42 2017 -0800

    CDRIVER-2024 - Escaped username maybe not properly parsed

 tests/json/connection_uri/valid-auth.json | 25 -------------------------
 1 file changed, 25 deletions(-)

commit 1f7634d885aa096a15c5a4db9e3fb812bf99d059
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:33:09 2017 -0800

    CDRIVER-2023 - Unescaped percent sign in connection uri should fail

 tests/json/connection_uri/invalid-uris.json | 9 ---------
 1 file changed, 9 deletions(-)

commit 632da6a1b97cccf31121bc043e350de5b8e95e6c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:29:02 2017 -0800

    CDRIVER-2022 Missing support for fsync in connection uri

 tests/json/connection_uri/valid-warnings.json | 17 +----------------
 1 file changed, 1 insertion(+), 16 deletions(-)

commit b4cda6962cd90485b4232564ee3441433e7fe635
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:24:51 2017 -0800

    CDRIVER-2021 UTF-8 Hostnames in connection URI should be allowed

 .../connection_uri/valid-host_identifiers.json     | 22 +---------------------
 1 file changed, 1 insertion(+), 21 deletions(-)

commit 85ee5fbbc2aa898145e80fc753254ca36c20cbee
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:23:54 2017 -0800

    CDRIVER-2019 Missing delimiting slash between hosts and options should fail

 tests/json/connection_uri/invalid-uris.json | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

commit 6c996ca8d30a6348fb9849ed0d170187ecd9b89a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 15:23:41 2017 -0800

    CDRIVER-2020 Escaped null bytes in URI (%00) should be allowed

 tests/json/connection_uri/valid-auth.json    | 21 +--------------------
 tests/json/connection_uri/valid-options.json | 19 +------------------
 2 files changed, 2 insertions(+), 38 deletions(-)

commit 16d03dc58f598c1671d20d658681c0d871f96514
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 1 16:04:59 2017 -0800

    CDRIVER-1388 Define all URI options

 src/mongoc/mongoc-client-pool.c      |   7 +-
 src/mongoc/mongoc-client.c           |   7 +-
 src/mongoc/mongoc-cluster-sspi.c     |  10 +-
 src/mongoc/mongoc-cluster.c          |   8 +-
 src/mongoc/mongoc-sasl.c             |   6 +-
 src/mongoc/mongoc-topology.c         |  20 +-
 src/mongoc/mongoc-uri.c              | 180 ++++++++++-------
 src/mongoc/mongoc-uri.h              |  33 +++
 tests/test-libmongoc.c               |  15 +-
 tests/test-mongoc-handshake.c        |  22 +-
 tests/test-mongoc-max-staleness.c    |  58 +++---
 tests/test-mongoc-topology-scanner.c |   8 +-
 tests/test-mongoc-uri.c              | 376 ++++++++++++++++++++---------------
 13 files changed, 460 insertions(+), 290 deletions(-)

commit b4a1c7bb0a0a6f6761368e6ced0b207daeb742e0
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 1 09:18:41 2017 -0800

    CDRIVER-1388 Warn on unsupported URI options

 src/mongoc/mongoc-uri.c | 16 ++++++++++------
 tests/test-mongoc-uri.c | 29 +++++++++++++++--------------
 2 files changed, 25 insertions(+), 20 deletions(-)

commit fb9f45e9abfd02bcb298e29bb4bffeb4a5a46fd4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 1 08:57:32 2017 -0800

    CDRIVER-784: Improve boolean values in connection URI
    
    Boolean values can now be "yes" / "no" and more.
    
    Unsupported values issue warnings

 src/mongoc/mongoc-uri.c | 26 ++++++++++++++++++++------
 1 file changed, 20 insertions(+), 6 deletions(-)

commit cb9534b2527b667b049329bb41c4640911d3c523
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jan 31 11:54:37 2017 -0800

    CDRIVER-1478 Test runner for Connection String Spec Tests

 CMakeLists.txt                                     |   1 +
 tests/Makefile.am                                  |   2 +
 tests/json/connection_uri/README.rst               |  99 +++++++
 tests/json/connection_uri/invalid-uris.json        | 229 ++++++++++++++
 tests/json/connection_uri/invalid-uris.yml         | 201 +++++++++++++
 tests/json/connection_uri/valid-auth.json          | 330 +++++++++++++++++++++
 tests/json/connection_uri/valid-auth.yml           | 256 ++++++++++++++++
 .../connection_uri/valid-host_identifiers.json     | 154 ++++++++++
 .../json/connection_uri/valid-host_identifiers.yml | 121 ++++++++
 tests/json/connection_uri/valid-options.json       |  42 +++
 tests/json/connection_uri/valid-options.yml        |  30 ++
 .../connection_uri/valid-unix_socket-absolute.json | 251 ++++++++++++++++
 .../connection_uri/valid-unix_socket-absolute.yml  | 197 ++++++++++++
 .../connection_uri/valid-unix_socket-relative.json | 271 +++++++++++++++++
 .../connection_uri/valid-unix_socket-relative.yml  | 213 +++++++++++++
 tests/json/connection_uri/valid-warnings.json      |  68 +++++
 tests/json/connection_uri/valid-warnings.yml       |  51 ++++
 tests/test-conveniences.c                          |  28 ++
 tests/test-conveniences.h                          |   6 +
 tests/test-libmongoc.c                             |   3 +
 tests/test-mongoc-connection-uri.c                 | 187 ++++++++++++
 21 files changed, 2740 insertions(+)

commit 7bf676d4928e8eea30846527d34b75def206a71b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Feb 5 22:35:31 2017 -0600

    CDRIVER-2034 disable test_create_index_fail

 tests/test-mongoc-collection.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 1ecb2317cd3ebf577af9790a84d5452ff148f2b3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Feb 4 22:59:40 2017 -0600

    CDRIVER-2007 fix create-index test
    
    Depending on the network configuration, trying to create an index on
    mongodb://example.com could cause "connection timeout" or "connection
    refused", so don't specify the error message.

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6adb54fa0a63887dd4eb539e17cce4e2470f06c4
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 3 14:49:38 2017 -0800

    Only used in one file

 src/mongoc/mongoc-uri-private.h | 2 --
 1 file changed, 2 deletions(-)

commit 723d030d358f65f7d88e5dee3d8378a20f587cbd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 1 23:41:43 2017 -0500

    NEWS whitespace

 NEWS | 1 +
 1 file changed, 1 insertion(+)

commit 299a263ddb288832cf8ecc79bde3d52744386cc9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 1 23:41:28 2017 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ed97bbe2b13d6038a6b0fd24e044915c4630128
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 1 20:59:57 2017 -0500

    1.6.0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 VERSION_CURRENT  | 2 +-
 VERSION_RELEASED | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0cadf49b33d721ad3a8b1d3a60d4993af4e8f12d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 1 20:45:59 2017 -0500

    update sphinx extension

 doc/mongoc/__init__.py | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit cae049e0d89b16b4dfa46e342de8bf8d88748043
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 1 20:22:31 2017 -0500

    bump libbson to 1.6.0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 16a725a4bd8d635de6e541c0e97fa5232b5d9f6b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 31 21:00:59 2017 -0500

    update NEWS for 1.6.0

 NEWS | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit af574ec268388ffc05587e45173f6754a8895cc1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 1 09:02:54 2017 -0800

    CDRIVER-2012 Move MONGOC_ENABLE_SASL_SSPI guard up in mongoc-cluster-sspi.c

 src/mongoc/mongoc-cluster-sspi.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b97de7d024ac4d4aa69c770eaec0443aff43b941
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 1 09:01:32 2017 -0800

    CDRIVER-2013 Autotools may skip substitution of MONGOC_HAVE_SOCKLEN

 build/autotools/FindDependencies.m4 | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 84ac14f10411927edb091ed5a3d4cb52c6857370
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 1 06:50:12 2017 -0500

    update mongoc_write_concern_t doc

 doc/mongoc_write_concern_t.rst | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit be13b52b46730b952c1d920bd88114bdc2a0c7ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 31 10:04:29 2017 -0500

    enable IPv6 test in Evergreen

 .evergreen/config.yml                                 | 3 ++-
 .evergreen/run-tests.sh                               | 4 ++++
 orchestration_configs/replica_sets/auth-ssl.json      | 3 +++
 orchestration_configs/replica_sets/auth.json          | 3 +++
 orchestration_configs/replica_sets/basic-ssl.json     | 3 +++
 orchestration_configs/replica_sets/basic.json         | 3 +++
 orchestration_configs/servers/auth-ssl.json           | 1 +
 orchestration_configs/servers/auth.json               | 1 +
 orchestration_configs/servers/basic-ssl.json          | 1 +
 orchestration_configs/servers/basic.json              | 1 +
 orchestration_configs/servers/mmapv1.json             | 1 +
 orchestration_configs/servers/wiredtiger.json         | 1 +
 orchestration_configs/sharded_clusters/auth-ssl.json  | 8 ++++++--
 orchestration_configs/sharded_clusters/auth.json      | 8 ++++++--
 orchestration_configs/sharded_clusters/basic-ssl.json | 8 ++++++--
 orchestration_configs/sharded_clusters/basic.json     | 8 ++++++--
 tests/test-mongoc-client.c                            | 9 ++++++---
 17 files changed, 54 insertions(+), 12 deletions(-)

commit 82c33b6f27b86b5a458b49efae21514d526a91e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 31 05:53:45 2017 -0500

    obsolete configure flag

 .evergreen/compile-unix.sh | 1 -
 1 file changed, 1 deletion(-)

commit daaee5668281898a477c4cdbf01b9f0ba63fe240
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 30 17:20:09 2017 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3adf9b71eb5989493b7f3bf0748b1e265d5f22b6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 30 17:14:14 2017 -0500

    1.6.0-rc0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1984a6e142808e63a75e34121900c2ec89603082
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 30 16:51:47 2017 -0500

    bump libbson to 1.6.0-rc0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bc822c2c579fc9993ef617869cf7562c7b7f056e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 30 16:50:57 2017 -0500

    NEWS for 1.6.0-rc0

 NEWS | 39 ++++++++++++++++++++++++++++++++++++---
 1 file changed, 36 insertions(+), 3 deletions(-)

commit 4532e159a142351830db1cf4194e2407c9f81985
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 30 17:14:53 2017 -0500

    update VERSION_RELEASED to 1.5.4

 VERSION_RELEASED | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2c6cfa5d154aad2172c61c059f15ad0a296b77ce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 30 16:35:23 2017 -0500

    NEWS entries for 1.5.3 and 1.5.4

 NEWS | 29 +++++++++++++++++++++++++++++
 1 file changed, 29 insertions(+)

commit abd6526e883d58562102424ab1a8142ea40b953c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 29 14:31:48 2017 -0500

    CDRIVER-2007 crash creating index disconnected

 src/mongoc/mongoc-collection.c |  4 ++++
 tests/test-mongoc-collection.c | 51 +++++++++++++++++++++++++++++++++---------
 2 files changed, 44 insertions(+), 11 deletions(-)

commit 5a108cbe60041e56aab878dd0cc8eeb251083fcf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 29 14:33:56 2017 -0500

    CDRIVER-1458 disable /Socket/check_closed on Mac

 tests/test-libmongoc.c     | 11 +++++++++++
 tests/test-libmongoc.h     |  2 ++
 tests/test-mongoc-socket.c | 11 ++++++++---
 3 files changed, 21 insertions(+), 3 deletions(-)

commit 09f2b423fdbeab49c4c51a8a5b38b949bee850d6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 28 15:53:55 2017 -0500

    CDRIVER-1979 simpler RST markup
    
    Now :symbol:`function()` and :symbol:`function` work the same, but let
    you choose whether to include parentheses.

 doc/application-performance-monitoring.rst         |  2 +-
 doc/bulk.rst                                       | 10 ++++-----
 doc/cursors.rst                                    |  6 +++---
 doc/errors.rst                                     | 24 +++++++++++-----------
 doc/mongoc/__init__.py                             |  6 ++++++
 doc/mongoc_apm_callbacks_destroy.rst               |  2 +-
 doc/mongoc_apm_callbacks_new.rst                   |  2 +-
 doc/mongoc_apm_callbacks_t.rst                     |  2 +-
 doc/mongoc_apm_command_failed_get_command_name.rst |  2 +-
 doc/mongoc_apm_command_failed_get_context.rst      |  4 ++--
 doc/mongoc_apm_command_failed_get_duration.rst     |  2 +-
 doc/mongoc_apm_command_failed_get_error.rst        |  4 ++--
 doc/mongoc_apm_command_failed_get_host.rst         |  6 +++---
 doc/mongoc_apm_command_failed_get_operation_id.rst |  2 +-
 doc/mongoc_apm_command_failed_get_request_id.rst   |  2 +-
 doc/mongoc_apm_command_failed_get_server_id.rst    |  2 +-
 doc/mongoc_apm_command_started_get_command.rst     |  4 ++--
 ...mongoc_apm_command_started_get_command_name.rst |  2 +-
 doc/mongoc_apm_command_started_get_context.rst     |  4 ++--
 ...ongoc_apm_command_started_get_database_name.rst |  2 +-
 doc/mongoc_apm_command_started_get_host.rst        |  6 +++---
 ...mongoc_apm_command_started_get_operation_id.rst |  2 +-
 doc/mongoc_apm_command_started_get_request_id.rst  |  2 +-
 doc/mongoc_apm_command_started_get_server_id.rst   |  2 +-
 ...ngoc_apm_command_succeeded_get_command_name.rst |  2 +-
 doc/mongoc_apm_command_succeeded_get_context.rst   |  4 ++--
 doc/mongoc_apm_command_succeeded_get_duration.rst  |  2 +-
 doc/mongoc_apm_command_succeeded_get_host.rst      |  6 +++---
 ...ngoc_apm_command_succeeded_get_operation_id.rst |  2 +-
 doc/mongoc_apm_command_succeeded_get_reply.rst     |  4 ++--
 ...mongoc_apm_command_succeeded_get_request_id.rst |  2 +-
 doc/mongoc_apm_command_succeeded_get_server_id.rst |  2 +-
 doc/mongoc_apm_server_changed_get_context.rst      |  4 ++--
 doc/mongoc_apm_server_changed_get_host.rst         |  6 +++---
 ...ngoc_apm_server_changed_get_new_description.rst |  4 ++--
 ...apm_server_changed_get_previous_description.rst |  4 ++--
 doc/mongoc_apm_server_changed_get_topology_id.rst  |  4 ++--
 doc/mongoc_apm_server_closed_get_context.rst       |  4 ++--
 doc/mongoc_apm_server_closed_get_host.rst          |  6 +++---
 doc/mongoc_apm_server_closed_get_topology_id.rst   |  4 ++--
 doc/mongoc_apm_server_closed_t.rst                 |  2 +-
 ...goc_apm_server_heartbeat_failed_get_context.rst |  4 ++--
 ...oc_apm_server_heartbeat_failed_get_duration.rst |  2 +-
 ...ongoc_apm_server_heartbeat_failed_get_error.rst |  4 ++--
 ...mongoc_apm_server_heartbeat_failed_get_host.rst |  6 +++---
 ...oc_apm_server_heartbeat_started_get_context.rst |  4 ++--
 ...ongoc_apm_server_heartbeat_started_get_host.rst |  6 +++---
 ..._apm_server_heartbeat_succeeded_get_context.rst |  4 ++--
 ...apm_server_heartbeat_succeeded_get_duration.rst |  2 +-
 ...goc_apm_server_heartbeat_succeeded_get_host.rst |  6 +++---
 ...oc_apm_server_heartbeat_succeeded_get_reply.rst |  4 ++--
 doc/mongoc_apm_server_opening_get_context.rst      |  4 ++--
 doc/mongoc_apm_server_opening_get_host.rst         |  6 +++---
 doc/mongoc_apm_server_opening_get_topology_id.rst  |  4 ++--
 doc/mongoc_apm_server_opening_t.rst                |  2 +-
 doc/mongoc_apm_set_command_failed_cb.rst           |  4 ++--
 doc/mongoc_apm_set_command_started_cb.rst          |  4 ++--
 doc/mongoc_apm_set_command_succeeded_cb.rst        |  4 ++--
 doc/mongoc_apm_topology_changed_get_context.rst    |  4 ++--
 ...oc_apm_topology_changed_get_new_description.rst |  4 ++--
 ...m_topology_changed_get_previous_description.rst |  4 ++--
 ...mongoc_apm_topology_changed_get_topology_id.rst |  4 ++--
 doc/mongoc_apm_topology_closed_get_context.rst     |  4 ++--
 doc/mongoc_apm_topology_closed_get_topology_id.rst |  4 ++--
 doc/mongoc_apm_topology_closed_t.rst               |  2 +-
 doc/mongoc_apm_topology_opening_get_context.rst    |  4 ++--
 ...mongoc_apm_topology_opening_get_topology_id.rst |  4 ++--
 doc/mongoc_apm_topology_opening_t.rst              |  2 +-
 doc/mongoc_bulk_operation_delete.rst               | 14 ++++++-------
 doc/mongoc_bulk_operation_delete_one.rst           | 14 ++++++-------
 doc/mongoc_bulk_operation_destroy.rst              |  4 ++--
 doc/mongoc_bulk_operation_execute.rst              | 12 +++++------
 doc/mongoc_bulk_operation_get_hint.rst             |  4 ++--
 doc/mongoc_bulk_operation_get_write_concern.rst    |  4 ++--
 doc/mongoc_bulk_operation_insert.rst               |  8 ++++----
 doc/mongoc_bulk_operation_remove.rst               | 14 ++++++-------
 ...mongoc_bulk_operation_remove_many_with_opts.rst | 14 ++++++-------
 doc/mongoc_bulk_operation_remove_one.rst           | 12 +++++------
 doc/mongoc_bulk_operation_remove_one_with_opts.rst | 14 ++++++-------
 doc/mongoc_bulk_operation_replace_one.rst          | 12 +++++------
 ...mongoc_bulk_operation_replace_one_with_opts.rst | 18 ++++++++--------
 ...lk_operation_set_bypass_document_validation.rst |  2 +-
 doc/mongoc_bulk_operation_set_hint.rst             |  4 ++--
 doc/mongoc_bulk_operation_t.rst                    |  4 ++--
 doc/mongoc_bulk_operation_update.rst               | 14 ++++++-------
 ...mongoc_bulk_operation_update_many_with_opts.rst | 16 +++++++--------
 doc/mongoc_bulk_operation_update_one.rst           | 12 +++++------
 doc/mongoc_bulk_operation_update_one_with_opts.rst | 14 ++++++-------
 doc/mongoc_client_command.rst                      | 16 +++++++--------
 doc/mongoc_client_command_simple.rst               | 10 ++++-----
 ...mongoc_client_command_simple_with_server_id.rst |  6 +++---
 doc/mongoc_client_destroy.rst                      |  2 +-
 doc/mongoc_client_get_collection.rst               |  6 +++---
 doc/mongoc_client_get_database.rst                 |  6 +++---
 doc/mongoc_client_get_database_names.rst           |  4 ++--
 doc/mongoc_client_get_default_database.rst         |  4 ++--
 doc/mongoc_client_get_gridfs.rst                   |  6 +++---
 doc/mongoc_client_get_max_bson_size.rst            |  4 ++--
 doc/mongoc_client_get_max_message_size.rst         |  4 ++--
 doc/mongoc_client_get_read_concern.rst             |  4 ++--
 doc/mongoc_client_get_read_prefs.rst               |  4 ++--
 doc/mongoc_client_get_server_description.rst       |  4 ++--
 doc/mongoc_client_get_server_descriptions.rst      |  6 +++---
 doc/mongoc_client_get_server_status.rst            |  8 ++++----
 doc/mongoc_client_get_uri.rst                      |  6 +++---
 doc/mongoc_client_get_write_concern.rst            |  4 ++--
 doc/mongoc_client_new.rst                          |  6 +++---
 doc/mongoc_client_new_from_uri.rst                 |  6 +++---
 doc/mongoc_client_pool_destroy.rst                 |  2 +-
 doc/mongoc_client_pool_max_size.rst                |  4 ++--
 doc/mongoc_client_pool_min_size.rst                |  4 ++--
 doc/mongoc_client_pool_new.rst                     |  6 +++---
 doc/mongoc_client_pool_pop.rst                     |  6 +++---
 doc/mongoc_client_pool_push.rst                    |  6 +++---
 doc/mongoc_client_pool_set_apm_callbacks.rst       |  4 ++--
 doc/mongoc_client_pool_set_appname.rst             |  6 +++---
 doc/mongoc_client_pool_set_error_api.rst           |  2 +-
 doc/mongoc_client_pool_set_ssl_opts.rst            |  6 +++---
 doc/mongoc_client_pool_t.rst                       |  2 +-
 doc/mongoc_client_pool_try_pop.rst                 |  6 +++---
 doc/mongoc_client_read_command_with_opts.rst       | 14 ++++++-------
 doc/mongoc_client_read_write_command_with_opts.rst | 16 +++++++--------
 doc/mongoc_client_select_server.rst                |  6 +++---
 doc/mongoc_client_set_apm_callbacks.rst            |  4 ++--
 doc/mongoc_client_set_appname.rst                  |  4 ++--
 doc/mongoc_client_set_error_api.rst                |  4 ++--
 doc/mongoc_client_set_read_concern.rst             |  6 +++---
 doc/mongoc_client_set_read_prefs.rst               |  6 +++---
 doc/mongoc_client_set_ssl_opts.rst                 |  6 +++---
 doc/mongoc_client_set_stream_initiator.rst         |  4 ++--
 doc/mongoc_client_set_write_concern.rst            |  6 +++---
 doc/mongoc_client_t.rst                            |  8 ++++----
 doc/mongoc_client_write_command_with_opts.rst      | 16 +++++++--------
 doc/mongoc_collection_aggregate.rst                | 18 ++++++++--------
 doc/mongoc_collection_command.rst                  | 16 +++++++--------
 doc/mongoc_collection_command_simple.rst           | 10 ++++-----
 doc/mongoc_collection_copy.rst                     |  6 +++---
 doc/mongoc_collection_count.rst                    | 10 ++++-----
 doc/mongoc_collection_count_with_opts.rst          | 12 +++++------
 doc/mongoc_collection_create_bulk_operation.rst    | 12 +++++------
 doc/mongoc_collection_create_index.rst             |  6 +++---
 doc/mongoc_collection_create_index_with_opts.rst   | 12 +++++------
 doc/mongoc_collection_delete.rst                   | 10 ++++-----
 doc/mongoc_collection_destroy.rst                  |  6 +++---
 doc/mongoc_collection_drop.rst                     |  4 ++--
 doc/mongoc_collection_drop_index.rst               |  2 +-
 doc/mongoc_collection_drop_index_with_opts.rst     |  4 ++--
 doc/mongoc_collection_drop_with_opts.rst           |  4 ++--
 doc/mongoc_collection_ensure_index.rst             |  6 +++---
 doc/mongoc_collection_find.rst                     | 14 ++++++-------
 doc/mongoc_collection_find_and_modify.rst          | 16 +++++++--------
 ...mongoc_collection_find_and_modify_with_opts.rst |  6 +++---
 doc/mongoc_collection_find_indexes.rst             |  2 +-
 doc/mongoc_collection_find_with_opts.rst           | 12 +++++------
 doc/mongoc_collection_get_last_error.rst           |  4 ++--
 doc/mongoc_collection_get_name.rst                 |  2 +-
 doc/mongoc_collection_get_read_concern.rst         |  4 ++--
 doc/mongoc_collection_get_read_prefs.rst           |  4 ++--
 doc/mongoc_collection_get_write_concern.rst        |  4 ++--
 doc/mongoc_collection_insert.rst                   | 10 ++++-----
 doc/mongoc_collection_insert_bulk.rst              |  8 ++++----
 doc/mongoc_collection_keys_to_index_string.rst     |  6 +++---
 doc/mongoc_collection_read_command_with_opts.rst   | 16 +++++++--------
 ...goc_collection_read_write_command_with_opts.rst | 16 +++++++--------
 doc/mongoc_collection_remove.rst                   |  8 ++++----
 doc/mongoc_collection_rename.rst                   |  4 ++--
 doc/mongoc_collection_rename_with_opts.rst         |  4 ++--
 doc/mongoc_collection_save.rst                     | 10 ++++-----
 doc/mongoc_collection_set_read_concern.rst         |  4 ++--
 doc/mongoc_collection_set_read_prefs.rst           |  4 ++--
 doc/mongoc_collection_set_write_concern.rst        |  4 ++--
 doc/mongoc_collection_stats.rst                    | 10 ++++-----
 doc/mongoc_collection_t.rst                        |  2 +-
 doc/mongoc_collection_update.rst                   | 10 ++++-----
 doc/mongoc_collection_validate.rst                 |  8 ++++----
 doc/mongoc_collection_write_command_with_opts.rst  | 16 +++++++--------
 doc/mongoc_cursor_clone.rst                        |  6 +++---
 doc/mongoc_cursor_current.rst                      |  4 ++--
 doc/mongoc_cursor_destroy.rst                      |  4 ++--
 doc/mongoc_cursor_error.rst                        |  2 +-
 doc/mongoc_cursor_get_batch_size.rst               |  2 +-
 doc/mongoc_cursor_get_hint.rst                     |  4 ++--
 doc/mongoc_cursor_get_host.rst                     |  4 ++--
 doc/mongoc_cursor_get_id.rst                       |  2 +-
 doc/mongoc_cursor_get_limit.rst                    |  4 ++--
 doc/mongoc_cursor_get_max_await_time_ms.rst        |  4 ++--
 doc/mongoc_cursor_is_alive.rst                     |  2 +-
 doc/mongoc_cursor_more.rst                         |  4 ++--
 doc/mongoc_cursor_new_from_command_reply.rst       |  8 ++++----
 doc/mongoc_cursor_next.rst                         |  6 +++---
 doc/mongoc_cursor_set_batch_size.rst               |  2 +-
 doc/mongoc_cursor_set_hint.rst                     |  2 +-
 doc/mongoc_cursor_set_limit.rst                    |  6 +++---
 doc/mongoc_cursor_set_max_await_time_ms.rst        |  6 +++---
 doc/mongoc_cursor_t.rst                            | 10 ++++-----
 doc/mongoc_database_add_user.rst                   |  6 +++---
 doc/mongoc_database_command.rst                    | 16 +++++++--------
 doc/mongoc_database_command_simple.rst             |  8 ++++----
 doc/mongoc_database_copy.rst                       |  6 +++---
 doc/mongoc_database_create_collection.rst          | 10 ++++-----
 doc/mongoc_database_destroy.rst                    |  2 +-
 doc/mongoc_database_drop.rst                       |  4 ++--
 doc/mongoc_database_drop_with_opts.rst             |  4 ++--
 doc/mongoc_database_find_collections.rst           |  2 +-
 doc/mongoc_database_get_collection.rst             |  4 ++--
 doc/mongoc_database_get_collection_names.rst       |  4 ++--
 doc/mongoc_database_get_name.rst                   |  2 +-
 doc/mongoc_database_get_read_concern.rst           |  6 +++---
 doc/mongoc_database_get_read_prefs.rst             |  4 ++--
 doc/mongoc_database_get_write_concern.rst          |  6 +++---
 doc/mongoc_database_has_collection.rst             |  2 +-
 doc/mongoc_database_read_command_with_opts.rst     | 16 +++++++--------
 ...ongoc_database_read_write_command_with_opts.rst | 16 +++++++--------
 doc/mongoc_database_remove_all_users.rst           |  2 +-
 doc/mongoc_database_remove_user.rst                |  2 +-
 doc/mongoc_database_set_read_concern.rst           |  6 +++---
 doc/mongoc_database_set_read_prefs.rst             |  6 +++---
 doc/mongoc_database_set_write_concern.rst          |  6 +++---
 doc/mongoc_database_t.rst                          |  6 +++---
 doc/mongoc_database_write_command_with_opts.rst    | 16 +++++++--------
 doc/mongoc_delete_flags_t.rst                      |  2 +-
 doc/mongoc_find_and_modify_opts_append.rst         |  4 ++--
 doc/mongoc_find_and_modify_opts_destroy.rst        |  2 +-
 ..._modify_opts_get_bypass_document_validation.rst |  4 ++--
 doc/mongoc_find_and_modify_opts_get_fields.rst     |  6 +++---
 doc/mongoc_find_and_modify_opts_get_flags.rst      |  4 ++--
 ...mongoc_find_and_modify_opts_get_max_time_ms.rst |  4 ++--
 doc/mongoc_find_and_modify_opts_get_sort.rst       |  6 +++---
 doc/mongoc_find_and_modify_opts_get_update.rst     |  6 +++---
 doc/mongoc_find_and_modify_opts_new.rst            |  2 +-
 ..._modify_opts_set_bypass_document_validation.rst |  2 +-
 doc/mongoc_find_and_modify_opts_set_fields.rst     |  2 +-
 doc/mongoc_find_and_modify_opts_set_flags.rst      |  2 +-
 ...mongoc_find_and_modify_opts_set_max_time_ms.rst |  2 +-
 doc/mongoc_find_and_modify_opts_set_sort.rst       |  2 +-
 doc/mongoc_find_and_modify_opts_set_update.rst     |  4 ++--
 doc/mongoc_find_and_modify_opts_t.rst              |  2 +-
 doc/mongoc_gridfs_create_file.rst                  | 10 ++++-----
 doc/mongoc_gridfs_create_file_from_stream.rst      | 10 ++++-----
 doc/mongoc_gridfs_destroy.rst                      |  2 +-
 doc/mongoc_gridfs_drop.rst                         |  2 +-
 doc/mongoc_gridfs_file_destroy.rst                 |  4 ++--
 doc/mongoc_gridfs_file_error.rst                   |  2 +-
 doc/mongoc_gridfs_file_get_aliases.rst             |  2 +-
 doc/mongoc_gridfs_file_get_chunk_size.rst          |  2 +-
 doc/mongoc_gridfs_file_get_content_type.rst        |  2 +-
 doc/mongoc_gridfs_file_get_filename.rst            |  2 +-
 doc/mongoc_gridfs_file_get_id.rst                  |  2 +-
 doc/mongoc_gridfs_file_get_length.rst              |  2 +-
 doc/mongoc_gridfs_file_get_md5.rst                 |  2 +-
 doc/mongoc_gridfs_file_get_metadata.rst            |  2 +-
 doc/mongoc_gridfs_file_get_upload_date.rst         |  2 +-
 doc/mongoc_gridfs_file_list_destroy.rst            |  2 +-
 doc/mongoc_gridfs_file_list_error.rst              |  2 +-
 doc/mongoc_gridfs_file_list_next.rst               |  4 ++--
 doc/mongoc_gridfs_file_list_t.rst                  |  2 +-
 doc/mongoc_gridfs_file_opt_t.rst                   |  2 +-
 doc/mongoc_gridfs_file_readv.rst                   |  6 +++---
 doc/mongoc_gridfs_file_remove.rst                  |  2 +-
 doc/mongoc_gridfs_file_save.rst                    |  4 ++--
 doc/mongoc_gridfs_file_seek.rst                    |  2 +-
 doc/mongoc_gridfs_file_set_aliases.rst             |  6 +++---
 doc/mongoc_gridfs_file_set_content_type.rst        |  4 ++--
 doc/mongoc_gridfs_file_set_filename.rst            |  4 ++--
 doc/mongoc_gridfs_file_set_id.rst                  |  2 +-
 doc/mongoc_gridfs_file_set_md5.rst                 |  4 ++--
 doc/mongoc_gridfs_file_set_metadata.rst            |  6 +++---
 doc/mongoc_gridfs_file_t.rst                       |  8 ++++----
 doc/mongoc_gridfs_file_tell.rst                    |  2 +-
 doc/mongoc_gridfs_file_writev.rst                  |  4 ++--
 doc/mongoc_gridfs_find.rst                         |  8 ++++----
 doc/mongoc_gridfs_find_one.rst                     |  8 ++++----
 doc/mongoc_gridfs_find_one_by_filename.rst         |  4 ++--
 doc/mongoc_gridfs_find_one_with_opts.rst           | 10 ++++-----
 doc/mongoc_gridfs_find_with_opts.rst               | 10 ++++-----
 doc/mongoc_gridfs_get_chunks.rst                   |  6 +++---
 doc/mongoc_gridfs_get_files.rst                    |  6 +++---
 doc/mongoc_gridfs_remove_by_filename.rst           |  2 +-
 doc/mongoc_gridfs_t.rst                            |  6 +++---
 doc/mongoc_host_list_t.rst                         |  4 ++--
 doc/mongoc_index_opt_geo_init.rst                  |  2 +-
 doc/mongoc_index_opt_init.rst                      |  2 +-
 doc/mongoc_index_opt_wt_init.rst                   |  2 +-
 doc/mongoc_iovec_t.rst                             |  2 +-
 doc/mongoc_matcher_destroy.rst                     |  2 +-
 doc/mongoc_matcher_match.rst                       |  6 +++---
 doc/mongoc_matcher_new.rst                         |  6 +++---
 doc/mongoc_read_concern_append.rst                 |  8 ++++----
 doc/mongoc_read_concern_copy.rst                   |  4 ++--
 doc/mongoc_read_concern_destroy.rst                |  2 +-
 doc/mongoc_read_concern_get_level.rst              |  2 +-
 doc/mongoc_read_concern_new.rst                    |  2 +-
 doc/mongoc_read_concern_set_level.rst              |  2 +-
 doc/mongoc_read_concern_t.rst                      |  2 +-
 doc/mongoc_read_prefs_add_tag.rst                  |  4 ++--
 doc/mongoc_read_prefs_copy.rst                     |  4 ++--
 doc/mongoc_read_prefs_destroy.rst                  |  2 +-
 ...mongoc_read_prefs_get_max_staleness_seconds.rst |  2 +-
 doc/mongoc_read_prefs_get_mode.rst                 |  4 ++--
 doc/mongoc_read_prefs_get_tags.rst                 |  4 ++--
 doc/mongoc_read_prefs_is_valid.rst                 |  2 +-
 doc/mongoc_read_prefs_new.rst                      |  6 +++---
 ...mongoc_read_prefs_set_max_staleness_seconds.rst |  2 +-
 doc/mongoc_read_prefs_set_mode.rst                 |  4 ++--
 doc/mongoc_read_prefs_set_tags.rst                 |  4 ++--
 doc/mongoc_read_prefs_t.rst                        |  2 +-
 doc/mongoc_server_description_destroy.rst          |  2 +-
 doc/mongoc_server_description_host.rst             |  4 ++--
 doc/mongoc_server_description_id.rst               |  2 +-
 doc/mongoc_server_description_ismaster.rst         |  4 ++--
 doc/mongoc_server_description_new_copy.rst         |  2 +-
 doc/mongoc_server_description_round_trip_time.rst  |  2 +-
 doc/mongoc_server_description_t.rst                |  4 ++--
 doc/mongoc_server_description_type.rst             |  2 +-
 doc/mongoc_server_descriptions_destroy_all.rst     |  2 +-
 doc/mongoc_socket_accept.rst                       |  4 ++--
 doc/mongoc_socket_bind.rst                         |  2 +-
 doc/mongoc_socket_close.rst                        |  2 +-
 doc/mongoc_socket_connect.rst                      |  4 ++--
 doc/mongoc_socket_destroy.rst                      |  4 ++--
 doc/mongoc_socket_errno.rst                        |  2 +-
 doc/mongoc_socket_getnameinfo.rst                  |  4 ++--
 doc/mongoc_socket_getsockname.rst                  |  2 +-
 doc/mongoc_socket_listen.rst                       |  2 +-
 doc/mongoc_socket_new.rst                          |  2 +-
 doc/mongoc_socket_recv.rst                         |  4 ++--
 doc/mongoc_socket_send.rst                         |  4 ++--
 doc/mongoc_socket_sendv.rst                        |  4 ++--
 doc/mongoc_socket_setsockopt.rst                   |  2 +-
 doc/mongoc_ssl_opt_t.rst                           |  4 ++--
 doc/mongoc_stream_buffered_new.rst                 |  6 +++---
 doc/mongoc_stream_buffered_t.rst                   |  2 +-
 doc/mongoc_stream_close.rst                        |  2 +-
 doc/mongoc_stream_cork.rst                         |  2 +-
 doc/mongoc_stream_destroy.rst                      |  4 ++--
 doc/mongoc_stream_file_get_fd.rst                  |  4 ++--
 doc/mongoc_stream_file_new.rst                     |  4 ++--
 doc/mongoc_stream_file_new_for_path.rst            |  4 ++--
 doc/mongoc_stream_file_t.rst                       |  2 +-
 doc/mongoc_stream_flush.rst                        |  2 +-
 doc/mongoc_stream_get_base_stream.rst              |  6 +++---
 doc/mongoc_stream_gridfs_new.rst                   |  6 +++---
 doc/mongoc_stream_gridfs_t.rst                     |  2 +-
 doc/mongoc_stream_read.rst                         | 12 +++++------
 doc/mongoc_stream_readv.rst                        | 12 +++++------
 doc/mongoc_stream_setsockopt.rst                   |  2 +-
 doc/mongoc_stream_socket_get_socket.rst            |  6 +++---
 doc/mongoc_stream_socket_new.rst                   |  6 +++---
 doc/mongoc_stream_socket_t.rst                     |  2 +-
 doc/mongoc_stream_tls_t.rst                        |  2 +-
 doc/mongoc_stream_uncork.rst                       |  2 +-
 doc/mongoc_stream_write.rst                        | 12 +++++------
 doc/mongoc_stream_writev.rst                       |  6 +++---
 doc/mongoc_topology_description_get_servers.rst    |  6 +++---
 ...oc_topology_description_has_readable_server.rst |  4 ++--
 ...oc_topology_description_has_writable_server.rst |  2 +-
 doc/mongoc_topology_description_type.rst           |  2 +-
 doc/mongoc_uri_copy.rst                            |  4 ++--
 doc/mongoc_uri_destroy.rst                         |  2 +-
 doc/mongoc_uri_get_auth_mechanism.rst              |  2 +-
 doc/mongoc_uri_get_auth_source.rst                 |  2 +-
 doc/mongoc_uri_get_database.rst                    |  2 +-
 doc/mongoc_uri_get_hosts.rst                       |  4 ++--
 doc/mongoc_uri_get_mechanism_properties.rst        |  8 ++++----
 doc/mongoc_uri_get_option_as_bool.rst              |  2 +-
 doc/mongoc_uri_get_option_as_int32.rst             |  2 +-
 doc/mongoc_uri_get_option_as_utf8.rst              |  2 +-
 doc/mongoc_uri_get_options.rst                     |  4 ++--
 doc/mongoc_uri_get_password.rst                    |  2 +-
 doc/mongoc_uri_get_read_concern.rst                |  4 ++--
 doc/mongoc_uri_get_read_prefs.rst                  |  2 +-
 doc/mongoc_uri_get_read_prefs_t.rst                |  4 ++--
 doc/mongoc_uri_get_replica_set.rst                 |  2 +-
 doc/mongoc_uri_get_ssl.rst                         |  2 +-
 doc/mongoc_uri_get_string.rst                      |  2 +-
 doc/mongoc_uri_get_username.rst                    |  2 +-
 doc/mongoc_uri_get_write_concern.rst               |  4 ++--
 doc/mongoc_uri_new.rst                             |  2 +-
 doc/mongoc_uri_new_for_host_port.rst               |  4 ++--
 doc/mongoc_uri_set_auth_source.rst                 |  4 ++--
 doc/mongoc_uri_set_database.rst                    |  4 ++--
 doc/mongoc_uri_set_mechanism_properties.rst        |  6 +++---
 doc/mongoc_uri_set_option_as_bool.rst              |  4 ++--
 doc/mongoc_uri_set_option_as_int32.rst             |  4 ++--
 doc/mongoc_uri_set_option_as_utf8.rst              |  4 ++--
 doc/mongoc_uri_set_password.rst                    |  2 +-
 doc/mongoc_uri_set_read_concern.rst                |  4 ++--
 doc/mongoc_uri_set_read_prefs_t.rst                |  4 ++--
 doc/mongoc_uri_set_username.rst                    |  2 +-
 doc/mongoc_uri_set_write_concern.rst               |  4 ++--
 doc/mongoc_uri_t.rst                               | 10 ++++-----
 doc/mongoc_uri_unescape.rst                        |  2 +-
 doc/mongoc_write_concern_append.rst                |  8 ++++----
 doc/mongoc_write_concern_copy.rst                  |  4 ++--
 doc/mongoc_write_concern_destroy.rst               |  2 +-
 doc/mongoc_write_concern_get_fsync.rst             |  2 +-
 doc/mongoc_write_concern_get_journal.rst           |  2 +-
 doc/mongoc_write_concern_get_w.rst                 |  2 +-
 doc/mongoc_write_concern_get_wmajority.rst         |  2 +-
 doc/mongoc_write_concern_get_wtag.rst              |  2 +-
 doc/mongoc_write_concern_get_wtimeout.rst          |  2 +-
 doc/mongoc_write_concern_is_acknowledged.rst       |  2 +-
 doc/mongoc_write_concern_is_valid.rst              |  2 +-
 doc/mongoc_write_concern_journal_is_set.rst        |  2 +-
 doc/mongoc_write_concern_new.rst                   |  2 +-
 doc/mongoc_write_concern_set_fsync.rst             |  4 ++--
 doc/mongoc_write_concern_set_journal.rst           |  2 +-
 doc/mongoc_write_concern_set_w.rst                 |  4 ++--
 doc/mongoc_write_concern_set_wmajority.rst         |  2 +-
 doc/mongoc_write_concern_set_wtag.rst              |  4 ++--
 doc/mongoc_write_concern_set_wtimeout.rst          |  2 +-
 doc/mongoc_write_concern_t.rst                     | 14 ++++++-------
 doc/tutorial.rst                                   |  6 +++---
 413 files changed, 1023 insertions(+), 1017 deletions(-)

commit 0d8383f32ab34b3aa8471db48e2667bbda2fde4b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 28 08:25:15 2017 -0500

    CDRIVER-1996 document maxAwaitTimeMS

 doc/mongoc_collection_find_with_opts.rst | 32 +++++++++++++++++++-------------
 1 file changed, 19 insertions(+), 13 deletions(-)

commit 6432c3d5a19762e0714b7a54933aef9a072ec3dd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 28 08:12:39 2017 -0500

    "find" options table style

 doc/mongoc_collection_find_with_opts.rst | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 41a08387cffbf80f43e61aa1bc869247d1039021
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 28 08:05:24 2017 -0500

    CDRIVER-1932 mongoc_collection_update dead code

 src/mongoc/mongoc-collection.c | 2 --
 1 file changed, 2 deletions(-)

commit e93dc32c7aca7a8c22074dd0fc7d0fa948cffee9
Merge: 5bda9c8 7c7e5bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 28 08:01:14 2017 -0500

    Merge branch 'master' of github.com:mongodb/mongo-c-driver
    
    * 'master' of github.com:mongodb/mongo-c-driver:
      CDRIVER-1985 Deprecate mongoc_collection_save
      CDRIVER-2003 readConcern option should not be included in getMore commands
      CDRIVER-1998: Bump the handshake configure flags
      CDRIVER-2000 Implement sasl logger and fail early on unsupported mechanism

commit 7c7e5bf733c3891628b0526d6a20fc2ec3a014d4
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 15:35:43 2017 -0800

    CDRIVER-1985 Deprecate mongoc_collection_save

 doc/mongoc_collection_save.rst | 12 +++++++++++-
 src/mongoc/mongoc-collection.h |  3 ++-
 src/mongoc/mongoc-database.c   |  2 +-
 tests/test-mongoc-collection.c |  5 +++++
 4 files changed, 19 insertions(+), 3 deletions(-)

commit 0a9cd935c79021cb8efc2f33f73f725e17501243
Merge: 1a5a95d 1a1a065
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 20:12:25 2017 -0800

    Merge branch 'CDRIVER-2003-getmore-read-concern'
    
    * CDRIVER-2003-getmore-read-concern:
      CDRIVER-2003 readConcern option should not be included in getMore commands

commit 1a5a95d90d9b1e427654bb382a99087f5fb56ed8
Merge: 113a29b a97b2f9
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 20:09:08 2017 -0800

    Merge branch 'CDRIVER-1998-handshake'
    
    * CDRIVER-1998-handshake:
      CDRIVER-1998: Bump the handshake configure flags

commit 5bda9c810ae42647a493bfb23388686cd3439cee
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 21:12:16 2017 -0500

    CDRIVER-1909 improve init / cleanup docs

 doc/Makefile.am               |  3 ++-
 doc/includes/init_cleanup.txt |  3 +++
 doc/init-cleanup.rst          | 20 ++++++++++++++++++--
 doc/installing.rst            |  2 +-
 doc/mongoc_cleanup.rst        |  3 +--
 doc/mongoc_init.rst           |  5 +----
 6 files changed, 26 insertions(+), 10 deletions(-)

commit c70bc1678c5fb4952d8f2c3e76d92b47a20a7d54
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 22:30:53 2017 -0500

    CDRIVER-1431 document pool's thread safety

 doc/includes/mongoc_client_pool_call_once.txt   | 4 ++++
 doc/includes/mongoc_client_pool_thread_safe.txt | 4 ++++
 doc/mongoc_client_pool_max_size.rst             | 1 +
 doc/mongoc_client_pool_min_size.rst             | 3 +++
 doc/mongoc_client_pool_pop.rst                  | 1 +
 doc/mongoc_client_pool_push.rst                 | 1 +
 doc/mongoc_client_pool_set_apm_callbacks.rst    | 4 ++--
 doc/mongoc_client_pool_set_appname.rst          | 3 +--
 doc/mongoc_client_pool_set_error_api.rst        | 1 +
 doc/mongoc_client_pool_set_ssl_opts.rst         | 4 ++--
 doc/mongoc_client_pool_try_pop.rst              | 1 +
 11 files changed, 21 insertions(+), 6 deletions(-)

commit bbd15c11c68b1d5b7a0ae7691bbea3c04b63f73b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 14 18:13:14 2017 -0500

    CDRIVER-1912 update installation instructions

 README.rst                                  | 59 +----------------------------
 build/autotools/PrintBuildConfiguration.m4  |  1 +
 build/autotools/ReadCommandLineArguments.m4 | 37 ++++++++++--------
 doc/installing.rst                          | 33 ++++++++--------
 4 files changed, 42 insertions(+), 88 deletions(-)

commit 1a1a065d054959b63b4d406d83978c701bf94207
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 17:16:09 2017 -0800

    CDRIVER-2003 readConcern option should not be included in getMore commands

 src/mongoc/mongoc-collection.c |  8 +++++++
 src/mongoc/mongoc-cursor.c     |  6 -----
 tests/test-mongoc-collection.c | 51 ++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 59 insertions(+), 6 deletions(-)

commit a97b2f9d25e82fe0dd1c0d3cdffd63706978e5b5
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 15:16:26 2017 -0800

    CDRIVER-1998: Bump the handshake configure flags

 examples/parse_handshake_cfg.py       |  3 +++
 src/mongoc/mongoc-handshake-private.h |  5 ++++-
 src/mongoc/mongoc-handshake.c         | 12 ++++++++++++
 3 files changed, 19 insertions(+), 1 deletion(-)

commit 113a29b2badeb86ece094aa7fa1e7ef703032c56
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 15:01:29 2017 -0800

    CDRIVER-2000 Implement sasl logger and fail early on unsupported mechanism

 src/mongoc/mongoc-cluster-sasl.c |  4 ++-
 src/mongoc/mongoc-init.c         | 11 +++++--
 src/mongoc/mongoc-sasl-private.h | 12 ++++++--
 src/mongoc/mongoc-sasl.c         | 64 +++++++++++++++++++++++++++++++++++-----
 4 files changed, 78 insertions(+), 13 deletions(-)

commit 844d288a66d62285d03d10972de986c82b277a8a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 26 14:53:45 2017 -0800

    Revert "revert me"
    
    This reverts commit c9a9d36f55489c8986715f410e431d12cce4d497.

 .evergreen/config.yml | 34 +---------------------------------
 1 file changed, 1 insertion(+), 33 deletions(-)

commit 2f4abe5dc924d2138e7aa157d2aba3c91da7f159
Merge: c9a9d36 7ea1f91
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 16:42:42 2017 -0800

    Merge branch 'CDRIVER-1955-gssapi-tests-in-evergreen'
    
    * CDRIVER-1955-gssapi-tests-in-evergreen:
      CDRIVER-2000 Disable the sasl test for now
      CDRIVER-2000 Skip Solaris and RHEL7.1 PPC64le
      CDRIVER-1955 Skip Windows
      CDRIVER-1955 Run GSSAPI tests in evergreen
      CDRIVER-2000 Implement user canonicalization

commit 7ea1f91aefd60561e909c84b5f734e9c23e7ee75
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 16:42:04 2017 -0800

    CDRIVER-2000 Disable the sasl test for now

 .evergreen/run-tests.sh | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit 2ae5f350a4943a87b9fe891f8a3f6f12ceca73b4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 10:15:54 2017 -0800

    CDRIVER-2000 Skip Solaris and RHEL7.1 PPC64le
    
    After implementing SASL_CB_CANON_USER the MongoDB on ldaptest is
    replying with empty payload. Disable these until we can find out why
    
    {
        "saslStart" : 1,
        "mechanism" : "GSSAPI",
        "payload" :
    "YIICmAYJKoZIhvcSAQICAQBuggKHMIICg6ADAgEFoQMCAQ6iBwMFAAAAAACjggGTYYIBjzCCAYugAwIBBaETGxFMREFQVEVTVC4xMEdFTi5DQ6InMCWgAwIBA6EeMBwbB21vbmdvZGIbEWxkYXB0ZXN0LjEwZ2VuLmNjo4IBRDCCAUCgAwIBEqEDAgEEooIBMgSCAS7
        "autoAuthorize" : 1
    }
    returns:
    {
        "conversationId" : 1,
        "done" : false,
        "payload" : "",
        "ok" : 1.0
    }

 .evergreen/config.yml | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 48611c440b17e184d95a8f6504e587e5c0936ac9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 10:15:25 2017 -0800

    CDRIVER-1955 Skip Windows
    
    The Cyrus GSSAPI module is currently not available on Windows

 .evergreen/config.yml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 684e2576eaf9d4c15ff890b686625e2cadcdbb2f
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 10:14:27 2017 -0800

    CDRIVER-1955 Run GSSAPI tests in evergreen

 .evergreen/compile-unix.sh    |   1 -
 .evergreen/config.yml         |  70 ++++++++++++++++++++++++++++-
 .evergreen/kerberos.realm     |   5 +++
 .evergreen/regedit.base64     |  21 +++++++++
 .evergreen/run-auth-tests.sh  |  58 +++++++++++++++++++++---
 .evergreen/run-tests.sh       |   5 +++
 tests/test-sasl.c             |   2 +-
 tests/x509gen/legacy-x509.pem | 101 ++++++++++++++++++++++++++++++++++++++++++
 8 files changed, 253 insertions(+), 10 deletions(-)

commit 426d233291b9fdea4b5af3417a8cc125003dc75c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jan 24 17:07:52 2017 -0800

    CDRIVER-2000 Implement user canonicalization

 src/mongoc/mongoc-cluster-sasl.c |  9 +++++++--
 src/mongoc/mongoc-sasl.c         | 24 +++++++++++++++++++++++-
 2 files changed, 30 insertions(+), 3 deletions(-)

commit c9a9d36f55489c8986715f410e431d12cce4d497
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 09:59:30 2017 -0800

    revert me

 .evergreen/config.yml | 34 +++++++++++++++++++++++++++++++++-
 1 file changed, 33 insertions(+), 1 deletion(-)

commit fa00474b53c7dd7dc330c2576985fd3cdb728b5b
Merge: 318883f caf92a3
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 25 09:53:22 2017 -0800

    Merge branch 'CDRIVER-1961-improve-gssapi-error-message'
    
    * CDRIVER-1961-improve-gssapi-error-message:
      CDRIVER-1961 Improve error message when GSSAPI module not available

commit 318883fc88d79f59c9154281084df78bc5e59b8b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 05:29:34 2017 -0500

    CDRIVER-959 delimit test paths with "/"

 tests/json-test.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit b9b1c0b66026ae67da229614bf9cf98490a31c78
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 12:41:06 2017 -0500

    CDRIVER-959 fix MinGW-W64 warning in counters code

 src/mongoc/mongoc-counters-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c4e5eb71bbb92ef01d12906d531a909683720f6a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 12:41:06 2017 -0500

    CDRIVER-1957 fix test-libmongoc build in MinGW-W64

 tests/json-test.c         | 4 +++-
 tests/test-conveniences.h | 5 ++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 59ae56aecbdbe515424189098cb2b026599af452
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 18:06:35 2017 -0500

    CDRIVER-959 cmake config for MinGW-W64

 CMakeLists.txt             |  8 +++++++-
 build/cmake/FindBSON.cmake | 44 ++++++++++++--------------------------------
 2 files changed, 19 insertions(+), 33 deletions(-)

commit f63fbaace28a10b4c821cc22ca7e84cb50d95e5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 18:06:35 2017 -0500

    CDRIVER-959 MinGW-W64 config for Evergreen

 .evergreen/compile-windows-mingw.bat | 23 +++++++++++++++++++++++
 .evergreen/compile-windows.sh        |  9 ++++++++-
 .evergreen/compile.sh                |  2 --
 .evergreen/config.yml                | 12 +++++++++++-
 .evergreen/integration-tests.sh      |  2 +-
 .evergreen/run-tests-mingw.bat       | 17 +++++++++++++++++
 .evergreen/run-tests.sh              |  6 ++++++
 7 files changed, 66 insertions(+), 5 deletions(-)

commit caf92a3580ac9eb07c21162054dab3d7320cf76a
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jan 24 21:19:28 2017 +0000

    CDRIVER-1961 Improve error message when GSSAPI module not available

 src/mongoc/mongoc-sasl.c | 18 +++++++++++++++---
 1 file changed, 15 insertions(+), 3 deletions(-)

commit 670366c954d6cd1c8ac609e9b76aa5fe6616062c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jan 24 14:12:43 2017 -0800

    CDRIVER-1991 Ensure we limit the hex to 7 digits

 .evergreen/config.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d7f68f9a96a949981cb952305e3450b7f9f8678
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 20:26:18 2017 -0500

    CDRIVER-1999 escape raw log in test-results.json

 tests/TestSuite.c | 18 +++---------------
 1 file changed, 3 insertions(+), 15 deletions(-)

commit 8aed18295b10f0b6a1665b0627ac0f9ee01c125c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 18:28:34 2017 -0500

    CDRIVER-1979 use modern sphinx on evergreen

 .evergreen/config.yml | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 9d971beb95436ed5b48141eb24a1003854b02b43
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 15:33:33 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 16e0b4040aaa66f58fb6ad2e5621593f87c0ad88
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 15:32:56 2017 -0500

    CDRIVER-1979 fix "make dist"

 doc/Makefile.am      |  3 +--
 examples/Makefile.am | 10 ++++++++++
 2 files changed, 11 insertions(+), 2 deletions(-)

commit f9304810c967db5a0438940696506b7395372fd2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 14:08:05 2017 -0500

    rename socklen_t to mongoc_socklen_t

 doc/mongoc_socket_bind.rst        | 4 ++--
 doc/mongoc_socket_connect.rst     | 4 ++--
 doc/mongoc_socket_getsockname.rst | 4 ++--
 doc/mongoc_socket_setsockopt.rst  | 4 ++--
 doc/mongoc_stream_setsockopt.rst  | 2 +-
 5 files changed, 9 insertions(+), 9 deletions(-)

commit 81b3a1fb0f1f27a3294e986e25a6342b51527590
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 23 14:22:18 2017 -0500

    CDRIVER-1979 simpler config, copyrights

 doc/Makefile.am         |   2 -
 doc/conf.py             |   9 +--
 doc/githubpages.py      |  24 --------
 doc/libbson-objects.inv | Bin 2751 -> 0 bytes
 doc/taglist.py          | 146 ++++++++++++++++++++++++++++++++++++++++++++++++
 doc/taglist/__init__.py | 146 ------------------------------------------------
 6 files changed, 149 insertions(+), 178 deletions(-)

commit 5feaf3ed535759001eeb418e83c46b2f5009cf60
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 21 09:40:57 2017 -0500

    CDRIVER-1979 fix "make distcheck"

 doc/.gitignore       |  1 +
 doc/Makefile.am      | 19 +++++++++++++++++++
 doc/conf.py          |  4 +++-
 doc/html/Makefile.am |  5 +++--
 doc/man/Makefile.am  |  9 ++++-----
 5 files changed, 30 insertions(+), 8 deletions(-)

commit 1640c4ee1bd9dbbca3ad0c41505ea1e34168b9ef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 5 22:11:07 2017 -0500

    CDRIVER-1979 build docs with sphinx-build

 build/autotools/CheckProgs.m4               |   2 +-
 build/autotools/ReadCommandLineArguments.m4 |   6 -
 build/autotools/SetupAutomake.m4            |   6 +-
 build/libmongoc.xsl                         |  93 -------
 build/version.in                            |   1 -
 build/version.xml                           |   3 -
 configure.ac                                |   3 -
 doc/.gitignore                              |   2 -
 doc/Makefile.am                             |   2 -
 doc/html/Makefile.am                        |  43 ++-
 doc/mallard2man.py                          | 388 ----------------------------
 doc/man/Makefile.am                         |   8 +-
 doc/mongoc_installing.page.in               | 261 -------------------
 doc/mongoc_version.page.in                  |  43 ---
 14 files changed, 40 insertions(+), 821 deletions(-)

commit e348980eb710c561e04794371c823599c4480713
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 5 11:54:09 2017 -0500

    CDRIVER-1979 manual fixes for some RST files

 doc/aggregate.rst                                  |  14 +-
 doc/api.rst                                        |  52 +++
 doc/application-performance-monitoring.rst         |  27 +-
 doc/authentication.rst                             |  11 +-
 doc/basic-aggregate-examples.rst                   |  76 ----
 doc/basic-troubleshooting.rst                      |  15 +-
 doc/bulk.rst                                       |  15 +-
 doc/cursors.rst                                    |  10 +-
 doc/deleting-document.rst                          |  84 -----
 doc/distinct-mapreduce.rst                         |  90 +++++
 doc/errors.rst                                     | 127 ++++---
 doc/executing-command.rst                          |  70 ----
 doc/finding-document.rst                           | 131 -------
 doc/full_index.rst                                 |   5 +-
 doc/guides.rst                                     |  15 +
 doc/index.rst                                      | 196 ++---------
 doc/inserting-document.rst                         |  75 ----
 doc/installing.rst                                 | 174 ++++------
 doc/logging.rst                                    |  79 +++--
 doc/matcher.rst                                    |   1 +
 doc/mongoc-common-task-examples.rst                |   4 +-
 doc/mongoc_apm_callbacks_destroy.rst               |   2 +-
 doc/mongoc_apm_callbacks_new.rst                   |   2 +-
 doc/mongoc_apm_command_failed_get_command_name.rst |   5 +-
 doc/mongoc_apm_command_failed_get_context.rst      |   5 +-
 doc/mongoc_apm_command_failed_get_duration.rst     |   5 +-
 doc/mongoc_apm_command_failed_get_error.rst        |   4 +-
 doc/mongoc_apm_command_failed_get_host.rst         |   2 +-
 doc/mongoc_apm_command_failed_get_operation_id.rst |   5 +-
 doc/mongoc_apm_command_failed_get_request_id.rst   |   5 +-
 doc/mongoc_apm_command_failed_get_server_id.rst    |   5 +-
 doc/mongoc_apm_command_started_get_command.rst     |   5 +-
 ...mongoc_apm_command_started_get_command_name.rst |   5 +-
 doc/mongoc_apm_command_started_get_context.rst     |   5 +-
 ...ongoc_apm_command_started_get_database_name.rst |   5 +-
 doc/mongoc_apm_command_started_get_host.rst        |   2 +-
 ...mongoc_apm_command_started_get_operation_id.rst |   5 +-
 doc/mongoc_apm_command_started_get_request_id.rst  |   5 +-
 doc/mongoc_apm_command_started_get_server_id.rst   |   5 +-
 ...ngoc_apm_command_succeeded_get_command_name.rst |   5 +-
 doc/mongoc_apm_command_succeeded_get_context.rst   |   5 +-
 doc/mongoc_apm_command_succeeded_get_duration.rst  |   5 +-
 doc/mongoc_apm_command_succeeded_get_host.rst      |   5 +-
 ...ngoc_apm_command_succeeded_get_operation_id.rst |   5 +-
 doc/mongoc_apm_command_succeeded_get_reply.rst     |   5 +-
 ...mongoc_apm_command_succeeded_get_request_id.rst |   5 +-
 doc/mongoc_apm_command_succeeded_get_server_id.rst |   5 +-
 doc/mongoc_apm_server_changed_get_context.rst      |   5 +-
 doc/mongoc_apm_server_changed_get_host.rst         |   2 +-
 ...ngoc_apm_server_changed_get_new_description.rst |   5 +-
 ...apm_server_changed_get_previous_description.rst |   5 +-
 doc/mongoc_apm_server_changed_get_topology_id.rst  |   6 +-
 doc/mongoc_apm_server_closed_get_context.rst       |   2 +-
 doc/mongoc_apm_server_closed_get_host.rst          |   2 +-
 doc/mongoc_apm_server_closed_get_topology_id.rst   |   6 +-
 ...goc_apm_server_heartbeat_failed_get_context.rst |   5 +-
 ...oc_apm_server_heartbeat_failed_get_duration.rst |   5 +-
 ...ongoc_apm_server_heartbeat_failed_get_error.rst |   6 +-
 ...mongoc_apm_server_heartbeat_failed_get_host.rst |   5 +-
 ...oc_apm_server_heartbeat_started_get_context.rst |   5 +-
 ...ongoc_apm_server_heartbeat_started_get_host.rst |   5 +-
 ..._apm_server_heartbeat_succeeded_get_context.rst |   5 +-
 ...apm_server_heartbeat_succeeded_get_duration.rst |   5 +-
 ...goc_apm_server_heartbeat_succeeded_get_host.rst |   5 +-
 ...oc_apm_server_heartbeat_succeeded_get_reply.rst |   5 +-
 doc/mongoc_apm_server_opening_get_context.rst      |   5 +-
 doc/mongoc_apm_server_opening_get_host.rst         |   2 +-
 doc/mongoc_apm_server_opening_get_topology_id.rst  |   6 +-
 doc/mongoc_apm_set_command_failed_cb.rst           |  10 +-
 doc/mongoc_apm_set_command_started_cb.rst          |  10 +-
 doc/mongoc_apm_set_command_succeeded_cb.rst        |  10 +-
 doc/mongoc_apm_topology_changed_get_context.rst    |   5 +-
 ...oc_apm_topology_changed_get_new_description.rst |   5 +-
 ...m_topology_changed_get_previous_description.rst |   5 +-
 ...mongoc_apm_topology_changed_get_topology_id.rst |   6 +-
 doc/mongoc_apm_topology_closed_get_context.rst     |   5 +-
 doc/mongoc_apm_topology_closed_get_topology_id.rst |   6 +-
 doc/mongoc_apm_topology_opening_get_context.rst    |   5 +-
 ...mongoc_apm_topology_opening_get_topology_id.rst |   6 +-
 doc/mongoc_bulk_operation_delete.rst               |   4 +-
 doc/mongoc_bulk_operation_delete_one.rst           |   4 +-
 doc/mongoc_bulk_operation_destroy.rst              |   2 +-
 doc/mongoc_bulk_operation_execute.rst              |   6 +-
 doc/mongoc_bulk_operation_get_hint.rst             |   2 +-
 doc/mongoc_bulk_operation_get_write_concern.rst    |   2 +-
 doc/mongoc_bulk_operation_insert.rst               |   6 +-
 doc/mongoc_bulk_operation_remove.rst               |   4 +-
 ...mongoc_bulk_operation_remove_many_with_opts.rst |  10 +-
 doc/mongoc_bulk_operation_remove_one.rst           |   4 +-
 doc/mongoc_bulk_operation_remove_one_with_opts.rst |  10 +-
 doc/mongoc_bulk_operation_replace_one.rst          |   8 +-
 ...mongoc_bulk_operation_replace_one_with_opts.rst |  14 +-
 ...lk_operation_set_bypass_document_validation.rst |   9 +-
 doc/mongoc_bulk_operation_set_hint.rst             |   4 +-
 doc/mongoc_bulk_operation_t.rst                    |   2 +-
 doc/mongoc_bulk_operation_update.rst               |   8 +-
 ...mongoc_bulk_operation_update_many_with_opts.rst |  12 +-
 doc/mongoc_bulk_operation_update_one.rst           |   8 +-
 doc/mongoc_bulk_operation_update_one_with_opts.rst |  12 +-
 doc/mongoc_check_version.rst                       |   2 +-
 doc/mongoc_cleanup.rst                             |   2 +-
 doc/mongoc_client_command.rst                      |  18 +-
 doc/mongoc_client_command_simple.rst               |  12 +-
 ...mongoc_client_command_simple_with_server_id.rst |  16 +-
 doc/mongoc_client_destroy.rst                      |   2 +-
 doc/mongoc_client_get_collection.rst               |   6 +-
 doc/mongoc_client_get_database.rst                 |   5 +-
 doc/mongoc_client_get_database_names.rst           |  11 +-
 doc/mongoc_client_get_default_database.rst         |   3 +-
 doc/mongoc_client_get_gridfs.rst                   |   8 +-
 doc/mongoc_client_get_max_bson_size.rst            |   2 +-
 doc/mongoc_client_get_max_message_size.rst         |   2 +-
 doc/mongoc_client_get_read_concern.rst             |   2 +-
 doc/mongoc_client_get_read_prefs.rst               |   2 +-
 doc/mongoc_client_get_server_description.rst       |   6 +-
 doc/mongoc_client_get_server_descriptions.rst      |   9 +-
 doc/mongoc_client_get_server_status.rst            |   8 +-
 doc/mongoc_client_get_uri.rst                      |   2 +-
 doc/mongoc_client_get_write_concern.rst            |   2 +-
 doc/mongoc_client_new.rst                          |   2 +-
 doc/mongoc_client_new_from_uri.rst                 |   2 +-
 doc/mongoc_client_pool_destroy.rst                 |   2 +-
 doc/mongoc_client_pool_max_size.rst                |   6 +-
 doc/mongoc_client_pool_min_size.rst                |   6 +-
 doc/mongoc_client_pool_new.rst                     |   2 +-
 doc/mongoc_client_pool_pop.rst                     |   2 +-
 doc/mongoc_client_pool_push.rst                    |   5 +-
 doc/mongoc_client_pool_set_apm_callbacks.rst       |   6 +-
 doc/mongoc_client_pool_set_appname.rst             |   5 +-
 doc/mongoc_client_pool_set_error_api.rst           |   4 +-
 doc/mongoc_client_pool_set_ssl_opts.rst            |   4 +-
 doc/mongoc_client_pool_t.rst                       |   2 +-
 doc/mongoc_client_pool_try_pop.rst                 |   2 +-
 doc/mongoc_client_read_command_with_opts.rst       |  16 +-
 doc/mongoc_client_read_write_command_with_opts.rst |  17 +-
 doc/mongoc_client_select_server.rst                |   8 +-
 doc/mongoc_client_set_apm_callbacks.rst            |   6 +-
 doc/mongoc_client_set_appname.rst                  |   5 +-
 doc/mongoc_client_set_error_api.rst                |   5 +-
 doc/mongoc_client_set_read_concern.rst             |   6 +-
 doc/mongoc_client_set_read_prefs.rst               |   4 +-
 doc/mongoc_client_set_ssl_opts.rst                 |   4 +-
 doc/mongoc_client_set_stream_initiator.rst         |  10 +-
 doc/mongoc_client_set_write_concern.rst            |   4 +-
 doc/mongoc_client_t.rst                            |  16 +-
 doc/mongoc_client_write_command_with_opts.rst      |  14 +-
 doc/mongoc_collection_aggregate.rst                |  34 +-
 doc/mongoc_collection_command.rst                  |  18 +-
 doc/mongoc_collection_command_simple.rst           |  10 +-
 doc/mongoc_collection_copy.rst                     |   2 +-
 doc/mongoc_collection_count.rst                    |  14 +-
 doc/mongoc_collection_count_with_opts.rst          |  18 +-
 doc/mongoc_collection_create_bulk_operation.rst    |   9 +-
 doc/mongoc_collection_create_index.rst             |   8 +-
 doc/mongoc_collection_create_index_with_opts.rst   |  12 +-
 doc/mongoc_collection_delete.rst                   |  10 +-
 doc/mongoc_collection_destroy.rst                  |   2 +-
 doc/mongoc_collection_drop.rst                     |   5 +-
 doc/mongoc_collection_drop_index.rst               |   6 +-
 doc/mongoc_collection_drop_index_with_opts.rst     |   8 +-
 doc/mongoc_collection_drop_with_opts.rst           |   6 +-
 doc/mongoc_collection_ensure_index.rst             |   8 +-
 doc/mongoc_collection_find.rst                     |  19 +-
 doc/mongoc_collection_find_and_modify.rst          |  24 +-
 ...mongoc_collection_find_and_modify_with_opts.rst |  19 +-
 doc/mongoc_collection_find_indexes.rst             |   8 +-
 doc/mongoc_collection_find_with_opts.rst           |  65 ++--
 doc/mongoc_collection_get_last_error.rst           |   2 +-
 doc/mongoc_collection_get_name.rst                 |   2 +-
 doc/mongoc_collection_get_read_concern.rst         |   2 +-
 doc/mongoc_collection_get_read_prefs.rst           |   2 +-
 doc/mongoc_collection_get_write_concern.rst        |   2 +-
 doc/mongoc_collection_insert.rst                   |  10 +-
 doc/mongoc_collection_insert_bulk.rst              |  12 +-
 doc/mongoc_collection_keys_to_index_string.rst     |   2 +-
 doc/mongoc_collection_read_command_with_opts.rst   |  12 +-
 ...goc_collection_read_write_command_with_opts.rst |  15 +-
 doc/mongoc_collection_remove.rst                   |  10 +-
 doc/mongoc_collection_rename.rst                   |  10 +-
 doc/mongoc_collection_rename_with_opts.rst         |  12 +-
 doc/mongoc_collection_save.rst                     |   8 +-
 doc/mongoc_collection_set_read_concern.rst         |   6 +-
 doc/mongoc_collection_set_read_prefs.rst           |   4 +-
 doc/mongoc_collection_set_write_concern.rst        |   7 +-
 doc/mongoc_collection_stats.rst                    |   8 +-
 doc/mongoc_collection_t.rst                        |   2 +-
 doc/mongoc_collection_update.rst                   |  12 +-
 doc/mongoc_collection_validate.rst                 |   8 +-
 doc/mongoc_collection_write_command_with_opts.rst  |  12 +-
 doc/mongoc_cursor_clone.rst                        |   2 +-
 doc/mongoc_cursor_current.rst                      |   2 +-
 doc/mongoc_cursor_destroy.rst                      |   2 +-
 doc/mongoc_cursor_error.rst                        |   5 +-
 doc/mongoc_cursor_get_batch_size.rst               |   2 +-
 doc/mongoc_cursor_get_hint.rst                     |   2 +-
 doc/mongoc_cursor_get_host.rst                     |   5 +-
 doc/mongoc_cursor_get_id.rst                       |   2 +-
 doc/mongoc_cursor_get_limit.rst                    |   2 +-
 doc/mongoc_cursor_get_max_await_time_ms.rst        |   2 +-
 doc/mongoc_cursor_is_alive.rst                     |   2 +-
 doc/mongoc_cursor_more.rst                         |   2 +-
 doc/mongoc_cursor_new_from_command_reply.rst       |   6 +-
 doc/mongoc_cursor_next.rst                         |   5 +-
 doc/mongoc_cursor_set_batch_size.rst               |   5 +-
 doc/mongoc_cursor_set_hint.rst                     |   5 +-
 doc/mongoc_cursor_set_limit.rst                    |   5 +-
 doc/mongoc_cursor_set_max_await_time_ms.rst        |   4 +-
 doc/mongoc_cursor_t.rst                            |   4 +-
 doc/mongoc_database_add_user.rst                   |  12 +-
 doc/mongoc_database_command.rst                    |  16 +-
 doc/mongoc_database_command_simple.rst             |  10 +-
 doc/mongoc_database_copy.rst                       |   2 +-
 doc/mongoc_database_create_collection.rst          |  14 +-
 doc/mongoc_database_destroy.rst                    |   2 +-
 doc/mongoc_database_drop.rst                       |   5 +-
 doc/mongoc_database_drop_with_opts.rst             |   6 +-
 doc/mongoc_database_find_collections.rst           |  11 +-
 doc/mongoc_database_get_collection.rst             |   5 +-
 doc/mongoc_database_get_collection_names.rst       |  10 +-
 doc/mongoc_database_get_name.rst                   |   2 +-
 doc/mongoc_database_get_read_concern.rst           |   2 +-
 doc/mongoc_database_get_read_prefs.rst             |   2 +-
 doc/mongoc_database_get_write_concern.rst          |   2 +-
 doc/mongoc_database_has_collection.rst             |   6 +-
 doc/mongoc_database_read_command_with_opts.rst     |  12 +-
 ...ongoc_database_read_write_command_with_opts.rst |  15 +-
 doc/mongoc_database_remove_all_users.rst           |   4 +-
 doc/mongoc_database_remove_user.rst                |   6 +-
 doc/mongoc_database_set_read_concern.rst           |   6 +-
 doc/mongoc_database_set_read_prefs.rst             |   4 +-
 doc/mongoc_database_set_write_concern.rst          |   4 +-
 doc/mongoc_database_t.rst                          |  12 +-
 doc/mongoc_database_write_command_with_opts.rst    |  12 +-
 doc/mongoc_delete_flags_t.rst                      |   7 +-
 doc/mongoc_find_and_modify_opts_append.rst         |   4 +-
 doc/mongoc_find_and_modify_opts_destroy.rst        |   9 +-
 ..._modify_opts_get_bypass_document_validation.rst |   2 +-
 doc/mongoc_find_and_modify_opts_get_fields.rst     |   5 +-
 doc/mongoc_find_and_modify_opts_get_flags.rst      |   2 +-
 ...mongoc_find_and_modify_opts_get_max_time_ms.rst |   2 +-
 doc/mongoc_find_and_modify_opts_get_sort.rst       |   7 +-
 doc/mongoc_find_and_modify_opts_get_update.rst     |   5 +-
 doc/mongoc_find_and_modify_opts_new.rst            |   6 +-
 ..._modify_opts_set_bypass_document_validation.rst |  47 +--
 doc/mongoc_find_and_modify_opts_set_fields.rst     |  28 +-
 doc/mongoc_find_and_modify_opts_set_flags.rst      |  47 ++-
 ...mongoc_find_and_modify_opts_set_max_time_ms.rst |   6 +-
 doc/mongoc_find_and_modify_opts_set_sort.rst       |  41 +--
 doc/mongoc_find_and_modify_opts_set_update.rst     |  39 +--
 doc/mongoc_find_and_modify_opts_t.rst              | 381 ++------------------
 doc/mongoc_get_major_version.rst                   |   2 +-
 doc/mongoc_get_micro_version.rst                   |   2 +-
 doc/mongoc_get_minor_version.rst                   |   2 +-
 doc/mongoc_get_version.rst                         |   2 +-
 doc/mongoc_gridfs_create_file.rst                  |   4 +-
 doc/mongoc_gridfs_create_file_from_stream.rst      |   6 +-
 doc/mongoc_gridfs_destroy.rst                      |   2 +-
 doc/mongoc_gridfs_drop.rst                         |   5 +-
 doc/mongoc_gridfs_file_destroy.rst                 |   2 +-
 doc/mongoc_gridfs_file_error.rst                   |   5 +-
 doc/mongoc_gridfs_file_get_aliases.rst             |   2 +-
 doc/mongoc_gridfs_file_get_chunk_size.rst          |   2 +-
 doc/mongoc_gridfs_file_get_content_type.rst        |   2 +-
 doc/mongoc_gridfs_file_get_filename.rst            |   2 +-
 doc/mongoc_gridfs_file_get_id.rst                  |   2 +-
 doc/mongoc_gridfs_file_get_length.rst              |   2 +-
 doc/mongoc_gridfs_file_get_md5.rst                 |   2 +-
 doc/mongoc_gridfs_file_get_metadata.rst            |   2 +-
 doc/mongoc_gridfs_file_get_upload_date.rst         |   2 +-
 doc/mongoc_gridfs_file_list_destroy.rst            |   2 +-
 doc/mongoc_gridfs_file_list_error.rst              |   4 +-
 doc/mongoc_gridfs_file_list_next.rst               |   2 +-
 doc/mongoc_gridfs_file_list_t.rst                  |   6 +-
 doc/mongoc_gridfs_file_opt_t.rst                   |  13 +-
 doc/mongoc_gridfs_file_readv.rst                   |  10 +-
 doc/mongoc_gridfs_file_remove.rst                  |   5 +-
 doc/mongoc_gridfs_file_save.rst                    |   2 +-
 doc/mongoc_gridfs_file_seek.rst                    |   6 +-
 doc/mongoc_gridfs_file_set_aliases.rst             |   5 +-
 doc/mongoc_gridfs_file_set_content_type.rst        |   4 +-
 doc/mongoc_gridfs_file_set_filename.rst            |   4 +-
 doc/mongoc_gridfs_file_set_id.rst                  |  10 +-
 doc/mongoc_gridfs_file_set_md5.rst                 |   5 +-
 doc/mongoc_gridfs_file_set_metadata.rst            |   4 +-
 doc/mongoc_gridfs_file_t.rst                       |   2 +-
 doc/mongoc_gridfs_file_tell.rst                    |   2 +-
 doc/mongoc_gridfs_file_writev.rst                  |   8 +-
 doc/mongoc_gridfs_find.rst                         |   7 +-
 doc/mongoc_gridfs_find_one.rst                     |   6 +-
 doc/mongoc_gridfs_find_one_by_filename.rst         |   6 +-
 doc/mongoc_gridfs_find_one_with_opts.rst           |   8 +-
 doc/mongoc_gridfs_find_with_opts.rst               |   7 +-
 doc/mongoc_gridfs_get_chunks.rst                   |   2 +-
 doc/mongoc_gridfs_get_files.rst                    |   2 +-
 doc/mongoc_gridfs_remove_by_filename.rst           |   6 +-
 doc/mongoc_gridfs_t.rst                            |   2 +-
 doc/mongoc_index_opt_geo_get_default.rst           |   2 +-
 doc/mongoc_index_opt_geo_init.rst                  |   2 +-
 doc/mongoc_index_opt_geo_t.rst                     |  11 +-
 doc/mongoc_index_opt_get_default.rst               |   2 +-
 doc/mongoc_index_opt_init.rst                      |   2 +-
 doc/mongoc_index_opt_t.rst                         |  63 ++--
 doc/mongoc_index_opt_wt_get_default.rst            |   2 +-
 doc/mongoc_index_opt_wt_init.rst                   |   2 +-
 doc/mongoc_index_opt_wt_t.rst                      |  11 +-
 doc/mongoc_init.rst                                |   2 +-
 doc/mongoc_insert_flags_t.rst                      |   7 +-
 doc/mongoc_iovec_t.rst                             |   9 +-
 doc/mongoc_matcher_destroy.rst                     |   2 +-
 doc/mongoc_matcher_match.rst                       |   5 +-
 doc/mongoc_matcher_new.rst                         |   5 +-
 doc/mongoc_matcher_t.rst                           |   8 +-
 doc/mongoc_query_flags_t.rst                       |  21 +-
 doc/mongoc_rand.rst                                |   9 +-
 doc/mongoc_rand_add.rst                            |   6 +-
 doc/mongoc_rand_seed.rst                           |   5 +-
 doc/mongoc_rand_status.rst                         |   4 +-
 doc/mongoc_read_concern_append.rst                 |   5 +-
 doc/mongoc_read_concern_copy.rst                   |   2 +-
 doc/mongoc_read_concern_destroy.rst                |   2 +-
 doc/mongoc_read_concern_get_level.rst              |   4 +-
 doc/mongoc_read_concern_new.rst                    |   2 +-
 doc/mongoc_read_concern_set_level.rst              |   6 +-
 doc/mongoc_read_concern_t.rst                      |   6 +-
 doc/mongoc_read_mode_t.rst                         |  13 +-
 doc/mongoc_read_prefs_add_tag.rst                  |   5 +-
 doc/mongoc_read_prefs_copy.rst                     |   2 +-
 doc/mongoc_read_prefs_destroy.rst                  |   2 +-
 ...mongoc_read_prefs_get_max_staleness_seconds.rst |   5 +-
 doc/mongoc_read_prefs_get_mode.rst                 |   2 +-
 doc/mongoc_read_prefs_get_tags.rst                 |   2 +-
 doc/mongoc_read_prefs_is_valid.rst                 |   2 +-
 doc/mongoc_read_prefs_new.rst                      |   2 +-
 ...mongoc_read_prefs_set_max_staleness_seconds.rst |   4 +-
 doc/mongoc_read_prefs_set_mode.rst                 |   4 +-
 doc/mongoc_read_prefs_set_tags.rst                 |   4 +-
 doc/mongoc_remove_flags_t.rst                      |   7 +-
 doc/mongoc_reply_flags_t.rst                       |  13 +-
 doc/mongoc_server_description_destroy.rst          |   4 +-
 doc/mongoc_server_description_host.rst             |   2 +-
 doc/mongoc_server_description_id.rst               |   2 +-
 doc/mongoc_server_description_ismaster.rst         |   5 +-
 doc/mongoc_server_description_new_copy.rst         |   5 +-
 doc/mongoc_server_description_round_trip_time.rst  |   5 +-
 doc/mongoc_server_description_t.rst                |   2 +-
 doc/mongoc_server_description_type.rst             |   2 +-
 doc/mongoc_server_descriptions_destroy_all.rst     |   2 +-
 doc/mongoc_socket_accept.rst                       |   5 +-
 doc/mongoc_socket_bind.rst                         |   6 +-
 doc/mongoc_socket_close.rst                        |   2 +-
 doc/mongoc_socket_connect.rst                      |  10 +-
 doc/mongoc_socket_destroy.rst                      |   2 +-
 doc/mongoc_socket_errno.rst                        |   2 +-
 doc/mongoc_socket_getnameinfo.rst                  |   2 +-
 doc/mongoc_socket_getsockname.rst                  |   4 +-
 doc/mongoc_socket_listen.rst                       |   5 +-
 doc/mongoc_socket_new.rst                          |   6 +-
 doc/mongoc_socket_recv.rst                         |  12 +-
 doc/mongoc_socket_send.rst                         |  10 +-
 doc/mongoc_socket_sendv.rst                        |  10 +-
 doc/mongoc_socket_setsockopt.rst                   |  10 +-
 doc/mongoc_socket_t.rst                            |   2 +-
 doc/mongoc_ssl_opt_get_default.rst                 |   2 +-
 doc/mongoc_ssl_opt_t.rst                           |  42 +--
 doc/mongoc_stream_buffered_new.rst                 |   5 +-
 doc/mongoc_stream_buffered_t.rst                   |   2 +-
 doc/mongoc_stream_close.rst                        |   2 +-
 doc/mongoc_stream_cork.rst                         |   2 +-
 doc/mongoc_stream_destroy.rst                      |   2 +-
 doc/mongoc_stream_file_get_fd.rst                  |   2 +-
 doc/mongoc_stream_file_new.rst                     |   2 +-
 doc/mongoc_stream_file_new_for_path.rst            |   6 +-
 doc/mongoc_stream_file_t.rst                       |   2 +-
 doc/mongoc_stream_flush.rst                        |   2 +-
 doc/mongoc_stream_get_base_stream.rst              |   2 +-
 doc/mongoc_stream_gridfs_new.rst                   |   2 +-
 doc/mongoc_stream_gridfs_t.rst                     |   2 +-
 doc/mongoc_stream_read.rst                         |  10 +-
 doc/mongoc_stream_readv.rst                        |  10 +-
 doc/mongoc_stream_setsockopt.rst                   |  10 +-
 doc/mongoc_stream_socket_get_socket.rst            |   2 +-
 doc/mongoc_stream_socket_new.rst                   |   2 +-
 doc/mongoc_stream_socket_t.rst                     |   2 +-
 doc/mongoc_stream_t.rst                            |   2 +-
 doc/mongoc_stream_tls_t.rst                        |   2 +-
 doc/mongoc_stream_uncork.rst                       |   2 +-
 doc/mongoc_stream_write.rst                        |   8 +-
 doc/mongoc_stream_writev.rst                       |   8 +-
 doc/mongoc_topology_description_get_servers.rst    |   5 +-
 ...oc_topology_description_has_readable_server.rst |  12 +-
 ...oc_topology_description_has_writable_server.rst |   5 +-
 doc/mongoc_topology_description_t.rst              |   7 +-
 doc/mongoc_topology_description_type.rst           |   2 +-
 doc/mongoc_update_flags_t.rst                      |   9 +-
 doc/mongoc_uri_copy.rst                            |   2 +-
 doc/mongoc_uri_destroy.rst                         |   2 +-
 doc/mongoc_uri_get_auth_mechanism.rst              |   2 +-
 doc/mongoc_uri_get_auth_source.rst                 |   2 +-
 doc/mongoc_uri_get_database.rst                    |   2 +-
 doc/mongoc_uri_get_hosts.rst                       |   2 +-
 doc/mongoc_uri_get_mechanism_properties.rst        |  20 +-
 doc/mongoc_uri_get_option_as_bool.rst              |   6 +-
 doc/mongoc_uri_get_option_as_int32.rst             |  10 +-
 doc/mongoc_uri_get_option_as_utf8.rst              |   6 +-
 doc/mongoc_uri_get_options.rst                     |   2 +-
 doc/mongoc_uri_get_password.rst                    |   2 +-
 doc/mongoc_uri_get_read_concern.rst                |   2 +-
 doc/mongoc_uri_get_read_prefs.rst                  |   2 +-
 doc/mongoc_uri_get_read_prefs_t.rst                |   2 +-
 doc/mongoc_uri_get_replica_set.rst                 |   2 +-
 doc/mongoc_uri_get_ssl.rst                         |   2 +-
 doc/mongoc_uri_get_string.rst                      |   2 +-
 doc/mongoc_uri_get_username.rst                    |   2 +-
 doc/mongoc_uri_get_write_concern.rst               |   2 +-
 doc/mongoc_uri_new.rst                             |   5 +-
 doc/mongoc_uri_new_for_host_port.rst               |   5 +-
 doc/mongoc_uri_option_is_bool.rst                  |   2 +-
 doc/mongoc_uri_option_is_int32.rst                 |   2 +-
 doc/mongoc_uri_option_is_utf8.rst                  |   2 +-
 doc/mongoc_uri_set_auth_source.rst                 |   5 +-
 doc/mongoc_uri_set_database.rst                    |   5 +-
 doc/mongoc_uri_set_mechanism_properties.rst        |  10 +-
 doc/mongoc_uri_set_option_as_bool.rst              |   6 +-
 doc/mongoc_uri_set_option_as_int32.rst             |   6 +-
 doc/mongoc_uri_set_option_as_utf8.rst              |   6 +-
 doc/mongoc_uri_set_password.rst                    |   5 +-
 doc/mongoc_uri_set_read_concern.rst                |   6 +-
 doc/mongoc_uri_set_read_prefs_t.rst                |   4 +-
 doc/mongoc_uri_set_username.rst                    |   5 +-
 doc/mongoc_uri_set_write_concern.rst               |   6 +-
 doc/mongoc_uri_t.rst                               | 109 +++---
 doc/mongoc_uri_unescape.rst                        |   2 +-
 doc/mongoc_version.rst                             |  15 +-
 doc/mongoc_write_concern_append.rst                |   4 +-
 doc/mongoc_write_concern_copy.rst                  |   2 +-
 doc/mongoc_write_concern_destroy.rst               |   2 +-
 doc/mongoc_write_concern_get_fsync.rst             |   2 +-
 doc/mongoc_write_concern_get_journal.rst           |   2 +-
 doc/mongoc_write_concern_get_w.rst                 |   2 +-
 doc/mongoc_write_concern_get_wmajority.rst         |   5 +-
 doc/mongoc_write_concern_get_wtag.rst              |   2 +-
 doc/mongoc_write_concern_get_wtimeout.rst          |   2 +-
 doc/mongoc_write_concern_is_acknowledged.rst       |   5 +-
 doc/mongoc_write_concern_is_valid.rst              |   2 +-
 doc/mongoc_write_concern_journal_is_set.rst        |   5 +-
 doc/mongoc_write_concern_new.rst                   |   2 +-
 doc/mongoc_write_concern_set_fsync.rst             |   4 +-
 doc/mongoc_write_concern_set_journal.rst           |   4 +-
 doc/mongoc_write_concern_set_w.rst                 |   5 +-
 doc/mongoc_write_concern_set_wmajority.rst         |   4 +-
 doc/mongoc_write_concern_set_wtag.rst              |   4 +-
 doc/mongoc_write_concern_set_wtimeout.rst          |   4 +-
 doc/tutorial.rst                                   | 386 +++++++++++----------
 doc/updating-document.rst                          |  96 -----
 454 files changed, 1994 insertions(+), 2909 deletions(-)

commit 7eac27de507a1f94a5432967fe612b85cc54a3ac
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 5 09:25:01 2017 -0500

    CDRIVER-1979 convert docs from XML to RST

 doc/advanced-connections.rst                       | 148 ++++
 doc/aggregate.rst                                  | 136 ++++
 doc/application-performance-monitoring.rst         | 117 +++
 doc/authentication.rst                             | 113 +++
 doc/basic-aggregate-examples.rst                   |  76 ++
 doc/basic-troubleshooting.rst                      |  88 ++
 doc/bulk.rst                                       | 219 +++++
 doc/cursors.rst                                    |  74 ++
 doc/deleting-document.rst                          |  84 ++
 doc/errors.rst                                     |  73 ++
 doc/executing-command.rst                          |  70 ++
 doc/finding-document.rst                           | 131 +++
 doc/full_index.rst                                 |  14 +
 doc/index.rst                                      | 200 +++++
 doc/init-cleanup.rst                               |  19 +
 doc/inserting-document.rst                         |  75 ++
 doc/installing.rst                                 | 310 ++++++++
 doc/logging.rst                                    | 128 +++
 doc/matcher.rst                                    |  37 +
 doc/mongoc-common-task-examples.rst                | 139 ++++
 doc/mongoc_advanced_connections.page               | 129 ---
 doc/mongoc_aggregate.page                          | 122 ---
 doc/mongoc_apm_callbacks_destroy.page              |  26 -
 doc/mongoc_apm_callbacks_destroy.rst               |  20 +
 doc/mongoc_apm_callbacks_new.page                  |  31 -
 doc/mongoc_apm_callbacks_new.rst                   |  25 +
 doc/mongoc_apm_callbacks_t.page                    |  27 -
 doc/mongoc_apm_callbacks_t.rst                     |  34 +
 ...mongoc_apm_command_failed_get_command_name.page |  41 -
 doc/mongoc_apm_command_failed_get_command_name.rst |  30 +
 doc/mongoc_apm_command_failed_get_context.page     |  40 -
 doc/mongoc_apm_command_failed_get_context.rst      |  30 +
 doc/mongoc_apm_command_failed_get_duration.page    |  40 -
 doc/mongoc_apm_command_failed_get_duration.rst     |  30 +
 doc/mongoc_apm_command_failed_get_error.page       |  37 -
 doc/mongoc_apm_command_failed_get_error.rst        |  27 +
 doc/mongoc_apm_command_failed_get_host.page        |  41 -
 doc/mongoc_apm_command_failed_get_host.rst         |  30 +
 ...mongoc_apm_command_failed_get_operation_id.page |  40 -
 doc/mongoc_apm_command_failed_get_operation_id.rst |  30 +
 doc/mongoc_apm_command_failed_get_request_id.page  |  40 -
 doc/mongoc_apm_command_failed_get_request_id.rst   |  30 +
 doc/mongoc_apm_command_failed_get_server_id.page   |  40 -
 doc/mongoc_apm_command_failed_get_server_id.rst    |  30 +
 doc/mongoc_apm_command_failed_t.page               |  26 -
 doc/mongoc_apm_command_failed_t.rst                |  35 +
 doc/mongoc_apm_command_started_get_command.page    |  41 -
 doc/mongoc_apm_command_started_get_command.rst     |  30 +
 ...ongoc_apm_command_started_get_command_name.page |  41 -
 ...mongoc_apm_command_started_get_command_name.rst |  30 +
 doc/mongoc_apm_command_started_get_context.page    |  40 -
 doc/mongoc_apm_command_started_get_context.rst     |  30 +
 ...ngoc_apm_command_started_get_database_name.page |  41 -
 ...ongoc_apm_command_started_get_database_name.rst |  30 +
 doc/mongoc_apm_command_started_get_host.page       |  41 -
 doc/mongoc_apm_command_started_get_host.rst        |  30 +
 ...ongoc_apm_command_started_get_operation_id.page |  40 -
 ...mongoc_apm_command_started_get_operation_id.rst |  30 +
 doc/mongoc_apm_command_started_get_request_id.page |  40 -
 doc/mongoc_apm_command_started_get_request_id.rst  |  30 +
 doc/mongoc_apm_command_started_get_server_id.page  |  40 -
 doc/mongoc_apm_command_started_get_server_id.rst   |  30 +
 doc/mongoc_apm_command_started_t.page              |  26 -
 doc/mongoc_apm_command_started_t.rst               |  35 +
 ...goc_apm_command_succeeded_get_command_name.page |  41 -
 ...ngoc_apm_command_succeeded_get_command_name.rst |  30 +
 doc/mongoc_apm_command_succeeded_get_context.page  |  40 -
 doc/mongoc_apm_command_succeeded_get_context.rst   |  30 +
 doc/mongoc_apm_command_succeeded_get_duration.page |  40 -
 doc/mongoc_apm_command_succeeded_get_duration.rst  |  30 +
 doc/mongoc_apm_command_succeeded_get_host.page     |  41 -
 doc/mongoc_apm_command_succeeded_get_host.rst      |  30 +
 ...goc_apm_command_succeeded_get_operation_id.page |  40 -
 ...ngoc_apm_command_succeeded_get_operation_id.rst |  30 +
 doc/mongoc_apm_command_succeeded_get_reply.page    |  41 -
 doc/mongoc_apm_command_succeeded_get_reply.rst     |  30 +
 ...ongoc_apm_command_succeeded_get_request_id.page |  40 -
 ...mongoc_apm_command_succeeded_get_request_id.rst |  30 +
 ...mongoc_apm_command_succeeded_get_server_id.page |  40 -
 doc/mongoc_apm_command_succeeded_get_server_id.rst |  30 +
 doc/mongoc_apm_command_succeeded_t.page            |  26 -
 doc/mongoc_apm_command_succeeded_t.rst             |  35 +
 doc/mongoc_apm_server_changed_get_context.page     |  41 -
 doc/mongoc_apm_server_changed_get_context.rst      |  30 +
 doc/mongoc_apm_server_changed_get_host.page        |  42 -
 doc/mongoc_apm_server_changed_get_host.rst         |  30 +
 ...goc_apm_server_changed_get_new_description.page |  42 -
 ...ngoc_apm_server_changed_get_new_description.rst |  30 +
 ...pm_server_changed_get_previous_description.page |  42 -
 ...apm_server_changed_get_previous_description.rst |  30 +
 doc/mongoc_apm_server_changed_get_topology_id.page |  42 -
 doc/mongoc_apm_server_changed_get_topology_id.rst  |  32 +
 doc/mongoc_apm_server_changed_t.page               |  26 -
 doc/mongoc_apm_server_changed_t.rst                |  32 +
 doc/mongoc_apm_server_closed_get_context.page      |  41 -
 doc/mongoc_apm_server_closed_get_context.rst       |  30 +
 doc/mongoc_apm_server_closed_get_host.page         |  42 -
 doc/mongoc_apm_server_closed_get_host.rst          |  30 +
 doc/mongoc_apm_server_closed_get_topology_id.page  |  42 -
 doc/mongoc_apm_server_closed_get_topology_id.rst   |  32 +
 doc/mongoc_apm_server_closed_t.page                |  26 -
 doc/mongoc_apm_server_closed_t.rst                 |  30 +
 ...oc_apm_server_heartbeat_failed_get_context.page |  41 -
 ...goc_apm_server_heartbeat_failed_get_context.rst |  30 +
 ...c_apm_server_heartbeat_failed_get_duration.page |  41 -
 ...oc_apm_server_heartbeat_failed_get_duration.rst |  30 +
 ...ngoc_apm_server_heartbeat_failed_get_error.page |  37 -
 ...ongoc_apm_server_heartbeat_failed_get_error.rst |  27 +
 ...ongoc_apm_server_heartbeat_failed_get_host.page |  42 -
 ...mongoc_apm_server_heartbeat_failed_get_host.rst |  30 +
 doc/mongoc_apm_server_heartbeat_failed_t.page      |  26 -
 doc/mongoc_apm_server_heartbeat_failed_t.rst       |  31 +
 ...c_apm_server_heartbeat_started_get_context.page |  41 -
 ...oc_apm_server_heartbeat_started_get_context.rst |  30 +
 ...ngoc_apm_server_heartbeat_started_get_host.page |  42 -
 ...ongoc_apm_server_heartbeat_started_get_host.rst |  30 +
 doc/mongoc_apm_server_heartbeat_started_t.page     |  26 -
 doc/mongoc_apm_server_heartbeat_started_t.rst      |  29 +
 ...apm_server_heartbeat_succeeded_get_context.page |  41 -
 ..._apm_server_heartbeat_succeeded_get_context.rst |  30 +
 ...pm_server_heartbeat_succeeded_get_duration.page |  41 -
 ...apm_server_heartbeat_succeeded_get_duration.rst |  30 +
 ...oc_apm_server_heartbeat_succeeded_get_host.page |  42 -
 ...goc_apm_server_heartbeat_succeeded_get_host.rst |  30 +
 ...c_apm_server_heartbeat_succeeded_get_reply.page |  42 -
 ...oc_apm_server_heartbeat_succeeded_get_reply.rst |  30 +
 doc/mongoc_apm_server_heartbeat_succeeded_t.page   |  26 -
 doc/mongoc_apm_server_heartbeat_succeeded_t.rst    |  31 +
 doc/mongoc_apm_server_opening_get_context.page     |  41 -
 doc/mongoc_apm_server_opening_get_context.rst      |  30 +
 doc/mongoc_apm_server_opening_get_host.page        |  42 -
 doc/mongoc_apm_server_opening_get_host.rst         |  30 +
 doc/mongoc_apm_server_opening_get_topology_id.page |  42 -
 doc/mongoc_apm_server_opening_get_topology_id.rst  |  32 +
 doc/mongoc_apm_server_opening_t.page               |  26 -
 doc/mongoc_apm_server_opening_t.rst                |  30 +
 doc/mongoc_apm_set_command_failed_cb.page          |  38 -
 doc/mongoc_apm_set_command_failed_cb.rst           |  30 +
 doc/mongoc_apm_set_command_started_cb.page         |  38 -
 doc/mongoc_apm_set_command_started_cb.rst          |  30 +
 doc/mongoc_apm_set_command_succeeded_cb.page       |  38 -
 doc/mongoc_apm_set_command_succeeded_cb.rst        |  30 +
 doc/mongoc_apm_topology_changed_get_context.page   |  41 -
 doc/mongoc_apm_topology_changed_get_context.rst    |  30 +
 ...c_apm_topology_changed_get_new_description.page |  42 -
 ...oc_apm_topology_changed_get_new_description.rst |  30 +
 ..._topology_changed_get_previous_description.page |  42 -
 ...m_topology_changed_get_previous_description.rst |  30 +
 ...ongoc_apm_topology_changed_get_topology_id.page |  42 -
 ...mongoc_apm_topology_changed_get_topology_id.rst |  32 +
 doc/mongoc_apm_topology_changed_t.page             |  26 -
 doc/mongoc_apm_topology_changed_t.rst              |  31 +
 doc/mongoc_apm_topology_closed_get_context.page    |  41 -
 doc/mongoc_apm_topology_closed_get_context.rst     |  30 +
 ...mongoc_apm_topology_closed_get_topology_id.page |  42 -
 doc/mongoc_apm_topology_closed_get_topology_id.rst |  32 +
 doc/mongoc_apm_topology_closed_t.page              |  26 -
 doc/mongoc_apm_topology_closed_t.rst               |  29 +
 doc/mongoc_apm_topology_opening_get_context.page   |  41 -
 doc/mongoc_apm_topology_opening_get_context.rst    |  30 +
 ...ongoc_apm_topology_opening_get_topology_id.page |  42 -
 ...mongoc_apm_topology_opening_get_topology_id.rst |  32 +
 doc/mongoc_apm_topology_opening_t.page             |  26 -
 doc/mongoc_apm_topology_opening_t.rst              |  29 +
 doc/mongoc_application_performance_monitoring.page | 105 ---
 doc/mongoc_authentication.page                     |  96 ---
 doc/mongoc_basic_aggregate.page                    |  68 --
 doc/mongoc_basic_troubleshooting.page              | 108 ---
 doc/mongoc_bulk.page                               | 158 ----
 doc/mongoc_bulk_operation_delete.page              |  50 --
 doc/mongoc_bulk_operation_delete.rst               |  43 +
 doc/mongoc_bulk_operation_delete_one.page          |  50 --
 doc/mongoc_bulk_operation_delete_one.rst           |  43 +
 doc/mongoc_bulk_operation_destroy.page             |  32 -
 doc/mongoc_bulk_operation_destroy.rst              |  20 +
 doc/mongoc_bulk_operation_execute.page             |  57 --
 doc/mongoc_bulk_operation_execute.rst              |  51 ++
 doc/mongoc_bulk_operation_get_hint.page            |  34 -
 doc/mongoc_bulk_operation_get_hint.rst             |  27 +
 doc/mongoc_bulk_operation_get_write_concern.page   |  37 -
 doc/mongoc_bulk_operation_get_write_concern.rst    |  28 +
 doc/mongoc_bulk_operation_insert.page              |  41 -
 doc/mongoc_bulk_operation_insert.rst               |  32 +
 doc/mongoc_bulk_operation_remove.page              |  42 -
 doc/mongoc_bulk_operation_remove.rst               |  36 +
 ...ongoc_bulk_operation_remove_many_with_opts.page |  50 --
 ...mongoc_bulk_operation_remove_many_with_opts.rst |  43 +
 doc/mongoc_bulk_operation_remove_one.page          |  41 -
 doc/mongoc_bulk_operation_remove_one.rst           |  34 +
 ...mongoc_bulk_operation_remove_one_with_opts.page |  50 --
 doc/mongoc_bulk_operation_remove_one_with_opts.rst |  43 +
 doc/mongoc_bulk_operation_replace_one.page         |  48 --
 doc/mongoc_bulk_operation_replace_one.rst          |  40 +
 ...ongoc_bulk_operation_replace_one_with_opts.page |  56 --
 ...mongoc_bulk_operation_replace_one_with_opts.rst |  49 ++
 ...k_operation_set_bypass_document_validation.page |  39 -
 ...lk_operation_set_bypass_document_validation.rst |  30 +
 doc/mongoc_bulk_operation_set_hint.page            |  36 -
 doc/mongoc_bulk_operation_set_hint.rst             |  29 +
 doc/mongoc_bulk_operation_t.page                   |  33 -
 doc/mongoc_bulk_operation_t.rst                    |  56 ++
 doc/mongoc_bulk_operation_update.page              |  47 --
 doc/mongoc_bulk_operation_update.rst               |  42 +
 ...ongoc_bulk_operation_update_many_with_opts.page |  53 --
 ...mongoc_bulk_operation_update_many_with_opts.rst |  47 ++
 doc/mongoc_bulk_operation_update_one.page          |  44 -
 doc/mongoc_bulk_operation_update_one.rst           |  37 +
 ...mongoc_bulk_operation_update_one_with_opts.page |  55 --
 doc/mongoc_bulk_operation_update_one_with_opts.rst |  47 ++
 doc/mongoc_check_version.page                      |  35 -
 doc/mongoc_check_version.rst                       |  27 +
 doc/mongoc_cleanup.page                            |  28 -
 doc/mongoc_cleanup.rst                             |  18 +
 doc/mongoc_client_command.page                     |  53 --
 doc/mongoc_client_command.rst                      |  43 +
 doc/mongoc_client_command_simple.page              |  54 --
 doc/mongoc_client_command_simple.rst               |  46 ++
 ...ongoc_client_command_simple_with_server_id.page |  48 --
 ...mongoc_client_command_simple_with_server_id.rst |  38 +
 doc/mongoc_client_destroy.page                     |  31 -
 doc/mongoc_client_destroy.rst                      |  20 +
 doc/mongoc_client_get_collection.page              |  41 -
 doc/mongoc_client_get_collection.rst               |  33 +
 doc/mongoc_client_get_database.page                |  36 -
 doc/mongoc_client_get_database.rst                 |  31 +
 doc/mongoc_client_get_database_names.page          |  61 --
 doc/mongoc_client_get_database_names.rst           |  53 ++
 doc/mongoc_client_get_default_database.page        |  59 --
 doc/mongoc_client_get_default_database.rst         |  49 ++
 doc/mongoc_client_get_gridfs.page                  |  47 --
 doc/mongoc_client_get_gridfs.rst                   |  36 +
 doc/mongoc_client_get_max_bson_size.page           |  38 -
 doc/mongoc_client_get_max_bson_size.rst            |  32 +
 doc/mongoc_client_get_max_message_size.page        |  38 -
 doc/mongoc_client_get_max_message_size.rst         |  32 +
 doc/mongoc_client_get_read_concern.page            |  32 -
 doc/mongoc_client_get_read_concern.rst             |  25 +
 doc/mongoc_client_get_read_prefs.page              |  35 -
 doc/mongoc_client_get_read_prefs.rst               |  25 +
 doc/mongoc_client_get_server_description.page      |  37 -
 doc/mongoc_client_get_server_description.rst       |  27 +
 doc/mongoc_client_get_server_descriptions.page     |  63 --
 doc/mongoc_client_get_server_descriptions.rst      |  56 ++
 doc/mongoc_client_get_server_status.page           |  48 --
 doc/mongoc_client_get_server_status.rst            |  40 +
 doc/mongoc_client_get_uri.page                     |  35 -
 doc/mongoc_client_get_uri.rst                      |  25 +
 doc/mongoc_client_get_write_concern.page           |  32 -
 doc/mongoc_client_get_write_concern.rst            |  25 +
 doc/mongoc_client_new.page                         |  37 -
 doc/mongoc_client_new.rst                          |  30 +
 doc/mongoc_client_new_from_uri.page                |  35 -
 doc/mongoc_client_new_from_uri.rst                 |  25 +
 doc/mongoc_client_pool_destroy.page                |  30 -
 doc/mongoc_client_pool_destroy.rst                 |  20 +
 doc/mongoc_client_pool_max_size.page               |  33 -
 doc/mongoc_client_pool_max_size.rst                |  22 +
 doc/mongoc_client_pool_min_size.page               |  33 -
 doc/mongoc_client_pool_min_size.rst                |  22 +
 doc/mongoc_client_pool_new.page                    |  36 -
 doc/mongoc_client_pool_new.rst                     |  25 +
 doc/mongoc_client_pool_pop.page                    |  36 -
 doc/mongoc_client_pool_pop.rst                     |  25 +
 doc/mongoc_client_pool_push.page                   |  32 -
 doc/mongoc_client_pool_push.rst                    |  22 +
 doc/mongoc_client_pool_set_apm_callbacks.page      |  42 -
 doc/mongoc_client_pool_set_apm_callbacks.rst       |  36 +
 doc/mongoc_client_pool_set_appname.page            |  37 -
 doc/mongoc_client_pool_set_appname.rst             |  31 +
 doc/mongoc_client_pool_set_error_api.page          |  35 -
 doc/mongoc_client_pool_set_error_api.rst           |  27 +
 doc/mongoc_client_pool_set_ssl_opts.page           |  38 -
 doc/mongoc_client_pool_set_ssl_opts.rst            |  33 +
 doc/mongoc_client_pool_t.page                      |  30 -
 doc/mongoc_client_pool_t.rst                       |  44 +
 doc/mongoc_client_pool_try_pop.page                |  36 -
 doc/mongoc_client_pool_try_pop.rst                 |  25 +
 doc/mongoc_client_read_command_with_opts.page      |  61 --
 doc/mongoc_client_read_command_with_opts.rst       |  59 ++
 ...mongoc_client_read_write_command_with_opts.page |  63 --
 doc/mongoc_client_read_write_command_with_opts.rst |  57 ++
 doc/mongoc_client_select_server.page               |  43 -
 doc/mongoc_client_select_server.rst                |  33 +
 doc/mongoc_client_set_apm_callbacks.page           |  41 -
 doc/mongoc_client_set_apm_callbacks.rst            |  34 +
 doc/mongoc_client_set_appname.page                 |  42 -
 doc/mongoc_client_set_appname.rst                  |  35 +
 doc/mongoc_client_set_error_api.page               |  36 -
 doc/mongoc_client_set_error_api.rst                |  29 +
 doc/mongoc_client_set_read_concern.page            |  31 -
 doc/mongoc_client_set_read_concern.rst             |  26 +
 doc/mongoc_client_set_read_prefs.page              |  32 -
 doc/mongoc_client_set_read_prefs.rst               |  28 +
 doc/mongoc_client_set_ssl_opts.page                |  38 -
 doc/mongoc_client_set_ssl_opts.rst                 |  34 +
 doc/mongoc_client_set_stream_initiator.page        |  40 -
 doc/mongoc_client_set_stream_initiator.rst         |  26 +
 doc/mongoc_client_set_write_concern.page           |  31 -
 doc/mongoc_client_set_write_concern.rst            |  26 +
 doc/mongoc_client_t.page                           |  56 --
 doc/mongoc_client_t.rst                            |  88 ++
 doc/mongoc_client_write_command_with_opts.page     |  65 --
 doc/mongoc_client_write_command_with_opts.rst      |  58 ++
 doc/mongoc_collection_aggregate.page               | 117 ---
 doc/mongoc_collection_aggregate.rst                | 120 +++
 doc/mongoc_collection_command.page                 |  52 --
 doc/mongoc_collection_command.rst                  |  42 +
 doc/mongoc_collection_command_simple.page          |  91 ---
 doc/mongoc_collection_command_simple.rst           |  80 ++
 doc/mongoc_collection_copy.page                    |  38 -
 doc/mongoc_collection_copy.rst                     |  30 +
 doc/mongoc_collection_count.page                   |  85 --
 doc/mongoc_collection_count.rst                    |  74 ++
 doc/mongoc_collection_count_with_opts.page         | 131 ---
 doc/mongoc_collection_count_with_opts.rst          | 122 +++
 doc/mongoc_collection_create_bulk_operation.page   |  64 --
 doc/mongoc_collection_create_bulk_operation.rst    |  58 ++
 doc/mongoc_collection_create_index.page            |  42 -
 doc/mongoc_collection_create_index.rst             |  29 +
 doc/mongoc_collection_create_index_with_opts.page  |  61 --
 doc/mongoc_collection_create_index_with_opts.rst   |  53 ++
 doc/mongoc_collection_delete.page                  |  60 --
 doc/mongoc_collection_delete.rst                   |  54 ++
 doc/mongoc_collection_destroy.page                 |  36 -
 doc/mongoc_collection_destroy.rst                  |  27 +
 doc/mongoc_collection_drop.page                    |  38 -
 doc/mongoc_collection_drop.rst                     |  25 +
 doc/mongoc_collection_drop_index.page              |  36 -
 doc/mongoc_collection_drop_index.rst               |  27 +
 doc/mongoc_collection_drop_index_with_opts.page    |  49 --
 doc/mongoc_collection_drop_index_with_opts.rst     |  41 +
 doc/mongoc_collection_drop_with_opts.page          |  52 --
 doc/mongoc_collection_drop_with_opts.rst           |  39 +
 doc/mongoc_collection_ensure_index.page            |  49 --
 doc/mongoc_collection_ensure_index.rst             |  39 +
 doc/mongoc_collection_find.page                    | 155 ----
 doc/mongoc_collection_find.rst                     | 161 ++++
 doc/mongoc_collection_find_and_modify.page         |  71 --
 doc/mongoc_collection_find_and_modify.rst          |  68 ++
 ...ongoc_collection_find_and_modify_with_opts.page |  56 --
 ...mongoc_collection_find_and_modify_with_opts.rst |  52 ++
 doc/mongoc_collection_find_indexes.page            |  46 --
 doc/mongoc_collection_find_indexes.rst             |  36 +
 doc/mongoc_collection_find_with_opts.page          | 167 ----
 doc/mongoc_collection_find_with_opts.rst           | 175 ++++
 doc/mongoc_collection_get_last_error.page          |  38 -
 doc/mongoc_collection_get_last_error.rst           |  30 +
 doc/mongoc_collection_get_name.page                |  37 -
 doc/mongoc_collection_get_name.rst                 |  28 +
 doc/mongoc_collection_get_read_concern.page        |  37 -
 doc/mongoc_collection_get_read_concern.rst         |  28 +
 doc/mongoc_collection_get_read_prefs.page          |  38 -
 doc/mongoc_collection_get_read_prefs.rst           |  28 +
 doc/mongoc_collection_get_write_concern.page       |  37 -
 doc/mongoc_collection_get_write_concern.rst        |  28 +
 doc/mongoc_collection_insert.page                  |  52 --
 doc/mongoc_collection_insert.rst                   |  45 ++
 doc/mongoc_collection_insert_bulk.page             |  60 --
 doc/mongoc_collection_insert_bulk.rst              |  53 ++
 doc/mongoc_collection_keys_to_index_string.page    |  39 -
 doc/mongoc_collection_keys_to_index_string.rst     |  30 +
 doc/mongoc_collection_read_command_with_opts.page  |  59 --
 doc/mongoc_collection_read_command_with_opts.rst   |  51 ++
 ...oc_collection_read_write_command_with_opts.page |  61 --
 ...goc_collection_read_write_command_with_opts.rst |  55 ++
 doc/mongoc_collection_remove.page                  |  53 --
 doc/mongoc_collection_remove.rst                   |  43 +
 doc/mongoc_collection_rename.page                  |  40 -
 doc/mongoc_collection_rename.rst                   |  31 +
 doc/mongoc_collection_rename_with_opts.page        |  54 --
 doc/mongoc_collection_rename_with_opts.rst         |  45 ++
 doc/mongoc_collection_save.page                    |  49 --
 doc/mongoc_collection_save.rst                     |  41 +
 doc/mongoc_collection_set_read_concern.page        |  35 -
 doc/mongoc_collection_set_read_concern.rst         |  27 +
 doc/mongoc_collection_set_read_prefs.page          |  36 -
 doc/mongoc_collection_set_read_prefs.rst           |  29 +
 doc/mongoc_collection_set_write_concern.page       |  35 -
 doc/mongoc_collection_set_write_concern.rst        |  27 +
 doc/mongoc_collection_stats.page                   |  50 --
 doc/mongoc_collection_stats.rst                    |  43 +
 doc/mongoc_collection_t.page                       |  35 -
 doc/mongoc_collection_t.rst                        |  78 ++
 doc/mongoc_collection_update.page                  |  54 --
 doc/mongoc_collection_update.rst                   |  47 ++
 doc/mongoc_collection_validate.page                |  56 --
 doc/mongoc_collection_validate.rst                 |  45 ++
 doc/mongoc_collection_write_command_with_opts.page |  63 --
 doc/mongoc_collection_write_command_with_opts.rst  |  56 ++
 doc/mongoc_common_task_examples.page               | 126 ---
 doc/mongoc_cursor_clone.page                       |  39 -
 doc/mongoc_cursor_clone.rst                        |  33 +
 doc/mongoc_cursor_current.page                     |  37 -
 doc/mongoc_cursor_current.rst                      |  28 +
 doc/mongoc_cursor_destroy.page                     |  32 -
 doc/mongoc_cursor_destroy.rst                      |  23 +
 doc/mongoc_cursor_error.page                       |  44 -
 doc/mongoc_cursor_error.rst                        |  35 +
 doc/mongoc_cursor_get_batch_size.page              |  33 -
 doc/mongoc_cursor_get_batch_size.rst               |  25 +
 doc/mongoc_cursor_get_hint.page                    |  34 -
 doc/mongoc_cursor_get_hint.rst                     |  27 +
 doc/mongoc_cursor_get_host.page                    |  34 -
 doc/mongoc_cursor_get_host.rst                     |  25 +
 doc/mongoc_cursor_get_id.page                      |  33 -
 doc/mongoc_cursor_get_id.rst                       |  25 +
 doc/mongoc_cursor_get_limit.page                   |  32 -
 doc/mongoc_cursor_get_limit.rst                    |  23 +
 doc/mongoc_cursor_get_max_await_time_ms.page       |  32 -
 doc/mongoc_cursor_get_max_await_time_ms.rst        |  23 +
 doc/mongoc_cursor_is_alive.page                    |  38 -
 doc/mongoc_cursor_is_alive.rst                     |  30 +
 doc/mongoc_cursor_more.page                        |  44 -
 doc/mongoc_cursor_more.rst                         |  37 +
 doc/mongoc_cursor_new_from_command_reply.page      |  52 --
 doc/mongoc_cursor_new_from_command_reply.rst       |  53 ++
 doc/mongoc_cursor_next.page                        |  46 --
 doc/mongoc_cursor_next.rst                         |  39 +
 doc/mongoc_cursor_set_batch_size.page              |  35 -
 doc/mongoc_cursor_set_batch_size.rst               |  27 +
 doc/mongoc_cursor_set_hint.page                    |  41 -
 doc/mongoc_cursor_set_hint.rst                     |  34 +
 doc/mongoc_cursor_set_limit.page                   |  41 -
 doc/mongoc_cursor_set_limit.rst                    |  34 +
 doc/mongoc_cursor_set_max_await_time_ms.page       |  40 -
 doc/mongoc_cursor_set_max_await_time_ms.rst        |  32 +
 doc/mongoc_cursor_t.page                           |  48 --
 doc/mongoc_cursor_t.rst                            |  66 ++
 doc/mongoc_cursors.page                            |  70 --
 doc/mongoc_database_add_user.page                  |  57 --
 doc/mongoc_database_add_user.rst                   |  42 +
 doc/mongoc_database_command.page                   |  51 --
 doc/mongoc_database_command.rst                    |  41 +
 doc/mongoc_database_command_simple.page            |  54 --
 doc/mongoc_database_command_simple.rst             |  40 +
 doc/mongoc_database_copy.page                      |  39 -
 doc/mongoc_database_copy.rst                       |  30 +
 doc/mongoc_database_create_collection.page         |  53 --
 doc/mongoc_database_create_collection.rst          |  43 +
 doc/mongoc_database_destroy.page                   |  31 -
 doc/mongoc_database_destroy.rst                    |  20 +
 doc/mongoc_database_drop.page                      |  36 -
 doc/mongoc_database_drop.rst                       |  25 +
 doc/mongoc_database_drop_with_opts.page            |  49 --
 doc/mongoc_database_drop_with_opts.rst             |  39 +
 doc/mongoc_database_find_collections.page          |  46 --
 doc/mongoc_database_find_collections.rst           |  35 +
 doc/mongoc_database_get_collection.page            |  30 -
 doc/mongoc_database_get_collection.rst             |  21 +
 doc/mongoc_database_get_collection_names.page      |  60 --
 doc/mongoc_database_get_collection_names.rst       |  51 ++
 doc/mongoc_database_get_name.page                  |  35 -
 doc/mongoc_database_get_name.rst                   |  25 +
 doc/mongoc_database_get_read_concern.page          |  35 -
 doc/mongoc_database_get_read_concern.rst           |  25 +
 doc/mongoc_database_get_read_prefs.page            |  35 -
 doc/mongoc_database_get_read_prefs.rst             |  25 +
 doc/mongoc_database_get_write_concern.page         |  35 -
 doc/mongoc_database_get_write_concern.rst          |  25 +
 doc/mongoc_database_has_collection.page            |  44 -
 doc/mongoc_database_has_collection.rst             |  34 +
 doc/mongoc_database_read_command_with_opts.page    |  59 --
 doc/mongoc_database_read_command_with_opts.rst     |  51 ++
 ...ngoc_database_read_write_command_with_opts.page |  61 --
 ...ongoc_database_read_write_command_with_opts.rst |  55 ++
 doc/mongoc_database_remove_all_users.page          |  42 -
 doc/mongoc_database_remove_all_users.rst           |  32 +
 doc/mongoc_database_remove_user.page               |  44 -
 doc/mongoc_database_remove_user.rst                |  34 +
 doc/mongoc_database_set_read_concern.page          |  34 -
 doc/mongoc_database_set_read_concern.rst           |  24 +
 doc/mongoc_database_set_read_prefs.page            |  35 -
 doc/mongoc_database_set_read_prefs.rst             |  26 +
 doc/mongoc_database_set_write_concern.page         |  34 -
 doc/mongoc_database_set_write_concern.rst          |  24 +
 doc/mongoc_database_t.page                         |  58 --
 doc/mongoc_database_t.rst                          |  86 ++
 doc/mongoc_database_write_command_with_opts.page   |  64 --
 doc/mongoc_database_write_command_with_opts.rst    |  57 ++
 doc/mongoc_delete_flags_t.page                     |  29 -
 doc/mongoc_delete_flags_t.rst                      |  27 +
 doc/mongoc_deleting_document.page                  |  80 --
 doc/mongoc_errors.page                             | 462 -----------
 doc/mongoc_executing_command.page                  |  65 --
 doc/mongoc_find_and_modify_opts_append.page        |  43 -
 doc/mongoc_find_and_modify_opts_append.rst         |  39 +
 doc/mongoc_find_and_modify_opts_destroy.page       |  30 -
 doc/mongoc_find_and_modify_opts_destroy.rst        |  27 +
 ...modify_opts_get_bypass_document_validation.page |  30 -
 ..._modify_opts_get_bypass_document_validation.rst |  24 +
 doc/mongoc_find_and_modify_opts_get_fields.page    |  32 -
 doc/mongoc_find_and_modify_opts_get_fields.rst     |  26 +
 doc/mongoc_find_and_modify_opts_get_flags.page     |  30 -
 doc/mongoc_find_and_modify_opts_get_flags.rst      |  24 +
 ...ongoc_find_and_modify_opts_get_max_time_ms.page |  30 -
 ...mongoc_find_and_modify_opts_get_max_time_ms.rst |  24 +
 doc/mongoc_find_and_modify_opts_get_sort.page      |  32 -
 doc/mongoc_find_and_modify_opts_get_sort.rst       |  26 +
 doc/mongoc_find_and_modify_opts_get_update.page    |  32 -
 doc/mongoc_find_and_modify_opts_get_update.rst     |  26 +
 doc/mongoc_find_and_modify_opts_new.page           |  24 -
 doc/mongoc_find_and_modify_opts_new.rst            |  22 +
 ...modify_opts_set_bypass_document_validation.page |  66 --
 ..._modify_opts_set_bypass_document_validation.rst |  72 ++
 doc/mongoc_find_and_modify_opts_set_fields.page    |  60 --
 doc/mongoc_find_and_modify_opts_set_fields.rst     |  61 ++
 doc/mongoc_find_and_modify_opts_set_flags.page     |  73 --
 doc/mongoc_find_and_modify_opts_set_flags.rst      |  74 ++
 ...ongoc_find_and_modify_opts_set_max_time_ms.page |  42 -
 ...mongoc_find_and_modify_opts_set_max_time_ms.rst |  37 +
 doc/mongoc_find_and_modify_opts_set_sort.page      |  66 --
 doc/mongoc_find_and_modify_opts_set_sort.rst       |  67 ++
 doc/mongoc_find_and_modify_opts_set_update.page    |  65 --
 doc/mongoc_find_and_modify_opts_set_update.rst     |  66 ++
 doc/mongoc_find_and_modify_opts_t.page             | 133 ----
 doc/mongoc_find_and_modify_opts_t.rst              | 499 ++++++++++++
 doc/mongoc_finding_document.page                   | 123 ---
 doc/mongoc_get_major_version.page                  |  24 -
 doc/mongoc_get_major_version.rst                   |  18 +
 doc/mongoc_get_micro_version.page                  |  24 -
 doc/mongoc_get_micro_version.rst                   |  18 +
 doc/mongoc_get_minor_version.page                  |  24 -
 doc/mongoc_get_minor_version.rst                   |  18 +
 doc/mongoc_get_version.page                        |  24 -
 doc/mongoc_get_version.rst                         |  18 +
 doc/mongoc_gridfs_create_file.page                 |  39 -
 doc/mongoc_gridfs_create_file.rst                  |  32 +
 doc/mongoc_gridfs_create_file_from_stream.page     |  42 -
 doc/mongoc_gridfs_create_file_from_stream.rst      |  32 +
 doc/mongoc_gridfs_destroy.page                     |  32 -
 doc/mongoc_gridfs_destroy.rst                      |  23 +
 doc/mongoc_gridfs_drop.page                        |  43 -
 doc/mongoc_gridfs_drop.rst                         |  35 +
 doc/mongoc_gridfs_file_destroy.page                |  32 -
 doc/mongoc_gridfs_file_destroy.rst                 |  23 +
 doc/mongoc_gridfs_file_error.page                  |  43 -
 doc/mongoc_gridfs_file_error.rst                   |  35 +
 doc/mongoc_gridfs_file_get_aliases.page            |  35 -
 doc/mongoc_gridfs_file_get_aliases.rst             |  28 +
 doc/mongoc_gridfs_file_get_chunk_size.page         |  37 -
 doc/mongoc_gridfs_file_get_chunk_size.rst          |  28 +
 doc/mongoc_gridfs_file_get_content_type.page       |  35 -
 doc/mongoc_gridfs_file_get_content_type.rst        |  28 +
 doc/mongoc_gridfs_file_get_filename.page           |  36 -
 doc/mongoc_gridfs_file_get_filename.rst            |  28 +
 doc/mongoc_gridfs_file_get_id.page                 |  37 -
 doc/mongoc_gridfs_file_get_id.rst                  |  30 +
 doc/mongoc_gridfs_file_get_length.page             |  36 -
 doc/mongoc_gridfs_file_get_length.rst              |  28 +
 doc/mongoc_gridfs_file_get_md5.page                |  37 -
 doc/mongoc_gridfs_file_get_md5.rst                 |  28 +
 doc/mongoc_gridfs_file_get_metadata.page           |  36 -
 doc/mongoc_gridfs_file_get_metadata.rst            |  28 +
 doc/mongoc_gridfs_file_get_upload_date.page        |  36 -
 doc/mongoc_gridfs_file_get_upload_date.rst         |  28 +
 doc/mongoc_gridfs_file_list_destroy.page           |  31 -
 doc/mongoc_gridfs_file_list_destroy.rst            |  23 +
 doc/mongoc_gridfs_file_list_error.page             |  43 -
 doc/mongoc_gridfs_file_list_error.rst              |  35 +
 doc/mongoc_gridfs_file_list_next.page              |  36 -
 doc/mongoc_gridfs_file_list_next.rst               |  28 +
 doc/mongoc_gridfs_file_list_t.page                 |  44 -
 doc/mongoc_gridfs_file_list_t.rst                  |  50 ++
 doc/mongoc_gridfs_file_opt_t.page                  |  32 -
 doc/mongoc_gridfs_file_opt_t.rst                   |  34 +
 doc/mongoc_gridfs_file_readv.page                  |  47 --
 doc/mongoc_gridfs_file_readv.rst                   |  38 +
 doc/mongoc_gridfs_file_remove.page                 |  43 -
 doc/mongoc_gridfs_file_remove.rst                  |  35 +
 doc/mongoc_gridfs_file_save.page                   |  38 -
 doc/mongoc_gridfs_file_save.rst                    |  30 +
 doc/mongoc_gridfs_file_seek.page                   |  54 --
 doc/mongoc_gridfs_file_seek.rst                    |  48 ++
 doc/mongoc_gridfs_file_set_aliases.page            |  34 -
 doc/mongoc_gridfs_file_set_aliases.rst             |  27 +
 doc/mongoc_gridfs_file_set_content_type.page       |  34 -
 doc/mongoc_gridfs_file_set_content_type.rst        |  27 +
 doc/mongoc_gridfs_file_set_filename.page           |  34 -
 doc/mongoc_gridfs_file_set_filename.rst            |  27 +
 doc/mongoc_gridfs_file_set_id.page                 |  42 -
 doc/mongoc_gridfs_file_set_id.rst                  |  34 +
 doc/mongoc_gridfs_file_set_md5.page                |  34 -
 doc/mongoc_gridfs_file_set_md5.rst                 |  27 +
 doc/mongoc_gridfs_file_set_metadata.page           |  34 -
 doc/mongoc_gridfs_file_set_metadata.rst            |  27 +
 doc/mongoc_gridfs_file_t.page                      |  42 -
 doc/mongoc_gridfs_file_t.rst                       |  67 ++
 doc/mongoc_gridfs_file_tell.page                   |  37 -
 doc/mongoc_gridfs_file_tell.rst                    |  28 +
 doc/mongoc_gridfs_file_writev.page                 |  44 -
 doc/mongoc_gridfs_file_writev.rst                  |  36 +
 doc/mongoc_gridfs_find.page                        |  44 -
 doc/mongoc_gridfs_find.rst                         |  36 +
 doc/mongoc_gridfs_find_one.page                    |  51 --
 doc/mongoc_gridfs_find_one.rst                     |  43 +
 doc/mongoc_gridfs_find_one_by_filename.page        |  45 --
 doc/mongoc_gridfs_find_one_by_filename.rst         |  37 +
 doc/mongoc_gridfs_find_one_with_opts.page          |  49 --
 doc/mongoc_gridfs_find_one_with_opts.rst           |  42 +
 doc/mongoc_gridfs_find_with_opts.page              |  43 -
 doc/mongoc_gridfs_find_with_opts.rst               |  35 +
 doc/mongoc_gridfs_get_chunks.page                  |  37 -
 doc/mongoc_gridfs_get_chunks.rst                   |  28 +
 doc/mongoc_gridfs_get_files.page                   |  36 -
 doc/mongoc_gridfs_get_files.rst                    |  28 +
 doc/mongoc_gridfs_remove_by_filename.page          |  45 --
 doc/mongoc_gridfs_remove_by_filename.rst           |  37 +
 doc/mongoc_gridfs_t.page                           |  48 --
 doc/mongoc_gridfs_t.rst                            |  66 ++
 doc/mongoc_host_list_t.page                        |  37 -
 doc/mongoc_host_list_t.rst                         |  29 +
 doc/mongoc_index.page                              |  75 --
 doc/mongoc_index_opt_geo_get_default.page          |  30 -
 doc/mongoc_index_opt_geo_get_default.rst           |  18 +
 doc/mongoc_index_opt_geo_init.page                 |  32 -
 doc/mongoc_index_opt_geo_init.rst                  |  23 +
 doc/mongoc_index_opt_geo_t.page                    |  45 --
 doc/mongoc_index_opt_geo_t.rst                     |  46 ++
 doc/mongoc_index_opt_get_default.page              |  30 -
 doc/mongoc_index_opt_get_default.rst               |  18 +
 doc/mongoc_index_opt_init.page                     |  32 -
 doc/mongoc_index_opt_init.rst                      |  23 +
 doc/mongoc_index_opt_t.page                        |  92 ---
 doc/mongoc_index_opt_t.rst                         |  94 +++
 doc/mongoc_index_opt_wt_get_default.page           |  30 -
 doc/mongoc_index_opt_wt_get_default.rst            |  18 +
 doc/mongoc_index_opt_wt_init.page                  |  32 -
 doc/mongoc_index_opt_wt_init.rst                   |  23 +
 doc/mongoc_index_opt_wt_t.page                     |  41 -
 doc/mongoc_index_opt_wt_t.rst                      |  43 +
 doc/mongoc_init.page                               |  26 -
 doc/mongoc_init.rst                                |  20 +
 doc/mongoc_init_cleanup.page                       |  23 -
 doc/mongoc_insert_flags_t.page                     |  49 --
 doc/mongoc_insert_flags_t.rst                      |  34 +
 doc/mongoc_inserting_document.page                 |  71 --
 doc/mongoc_iovec_t.page                            |  38 -
 doc/mongoc_iovec_t.rst                             |  31 +
 doc/mongoc_logging.page                            | 117 ---
 doc/mongoc_matcher.page                            |  42 -
 doc/mongoc_matcher_destroy.page                    |  37 -
 doc/mongoc_matcher_destroy.rst                     |  27 +
 doc/mongoc_matcher_match.page                      |  43 -
 doc/mongoc_matcher_match.rst                       |  34 +
 doc/mongoc_matcher_new.page                        |  48 --
 doc/mongoc_matcher_new.rst                         |  39 +
 doc/mongoc_matcher_t.page                          |  84 --
 doc/mongoc_matcher_t.rst                           |  92 +++
 doc/mongoc_query_flags_t.page                      |  73 --
 doc/mongoc_query_flags_t.rst                       |  43 +
 doc/mongoc_rand.page                               |  55 --
 doc/mongoc_rand.rst                                |  54 ++
 doc/mongoc_rand_add.page                           |  39 -
 doc/mongoc_rand_add.rst                            |  27 +
 doc/mongoc_rand_seed.page                          |  37 -
 doc/mongoc_rand_seed.rst                           |  25 +
 doc/mongoc_rand_status.page                        |  33 -
 doc/mongoc_rand_status.rst                         |  23 +
 doc/mongoc_read_concern_append.page                |  44 -
 doc/mongoc_read_concern_append.rst                 |  35 +
 doc/mongoc_read_concern_copy.page                  |  36 -
 doc/mongoc_read_concern_copy.rst                   |  28 +
 doc/mongoc_read_concern_destroy.page               |  31 -
 doc/mongoc_read_concern_destroy.rst                |  23 +
 doc/mongoc_read_concern_get_level.page             |  36 -
 doc/mongoc_read_concern_get_level.rst              |  28 +
 doc/mongoc_read_concern_new.page                   |  25 -
 doc/mongoc_read_concern_new.rst                    |  18 +
 doc/mongoc_read_concern_set_level.page             |  34 -
 doc/mongoc_read_concern_set_level.rst              |  25 +
 doc/mongoc_read_concern_t.page                     |  44 -
 doc/mongoc_read_concern_t.rst                      |  49 ++
 doc/mongoc_read_mode_t.page                        |  31 -
 doc/mongoc_read_mode_t.rst                         |  28 +
 doc/mongoc_read_prefs_add_tag.page                 |  33 -
 doc/mongoc_read_prefs_add_tag.rst                  |  25 +
 doc/mongoc_read_prefs_copy.page                    |  39 -
 doc/mongoc_read_prefs_copy.rst                     |  28 +
 doc/mongoc_read_prefs_destroy.page                 |  33 -
 doc/mongoc_read_prefs_destroy.rst                  |  23 +
 ...ongoc_read_prefs_get_max_staleness_seconds.page |  32 -
 ...mongoc_read_prefs_get_max_staleness_seconds.rst |  23 +
 doc/mongoc_read_prefs_get_mode.page                |  37 -
 doc/mongoc_read_prefs_get_mode.rst                 |  28 +
 doc/mongoc_read_prefs_get_tags.page                |  37 -
 doc/mongoc_read_prefs_get_tags.rst                 |  28 +
 doc/mongoc_read_prefs_is_valid.page                |  38 -
 doc/mongoc_read_prefs_is_valid.rst                 |  30 +
 doc/mongoc_read_prefs_new.page                     |  37 -
 doc/mongoc_read_prefs_new.rst                      |  28 +
 ...ongoc_read_prefs_set_max_staleness_seconds.page |  33 -
 ...mongoc_read_prefs_set_max_staleness_seconds.rst |  25 +
 doc/mongoc_read_prefs_set_mode.page                |  34 -
 doc/mongoc_read_prefs_set_mode.rst                 |  25 +
 doc/mongoc_read_prefs_set_tags.page                |  33 -
 doc/mongoc_read_prefs_set_tags.rst                 |  25 +
 doc/mongoc_read_prefs_t.page                       |  74 --
 doc/mongoc_read_prefs_t.rst                        |  73 ++
 doc/mongoc_remove_flags_t.page                     |  43 -
 doc/mongoc_remove_flags_t.rst                      |  31 +
 doc/mongoc_reply_flags_t.page                      |  58 --
 doc/mongoc_reply_flags_t.rst                       |  37 +
 doc/mongoc_server_description_destroy.page         |  32 -
 doc/mongoc_server_description_destroy.rst          |  23 +
 doc/mongoc_server_description_host.page            |  38 -
 doc/mongoc_server_description_host.rst             |  28 +
 doc/mongoc_server_description_id.page              |  32 -
 doc/mongoc_server_description_id.rst               |  23 +
 doc/mongoc_server_description_ismaster.page        |  38 -
 doc/mongoc_server_description_ismaster.rst         |  28 +
 doc/mongoc_server_description_new_copy.page        |  37 -
 doc/mongoc_server_description_new_copy.rst         |  28 +
 doc/mongoc_server_description_round_trip_time.page |  32 -
 doc/mongoc_server_description_round_trip_time.rst  |  23 +
 doc/mongoc_server_description_t.page               |  31 -
 doc/mongoc_server_description_t.rst                |  42 +
 doc/mongoc_server_description_type.page            |  42 -
 doc/mongoc_server_description_type.rst             |  33 +
 doc/mongoc_server_descriptions_destroy_all.page    |  31 -
 doc/mongoc_server_descriptions_destroy_all.rst     |  22 +
 doc/mongoc_socket_accept.page                      |  43 -
 doc/mongoc_socket_accept.rst                       |  30 +
 doc/mongoc_socket_bind.page                        |  46 --
 doc/mongoc_socket_bind.rst                         |  32 +
 doc/mongoc_socket_close.page                       |  38 -
 doc/mongoc_socket_close.rst                        |  28 +
 doc/mongoc_socket_connect.page                     |  46 --
 doc/mongoc_socket_connect.rst                      |  36 +
 doc/mongoc_socket_destroy.page                     |  33 -
 doc/mongoc_socket_destroy.rst                      |  23 +
 doc/mongoc_socket_errno.page                       |  38 -
 doc/mongoc_socket_errno.rst                        |  28 +
 doc/mongoc_socket_getnameinfo.page                 |  38 -
 doc/mongoc_socket_getnameinfo.rst                  |  28 +
 doc/mongoc_socket_getsockname.page                 |  42 -
 doc/mongoc_socket_getsockname.rst                  |  32 +
 doc/mongoc_socket_listen.page                      |  38 -
 doc/mongoc_socket_listen.rst                       |  30 +
 doc/mongoc_socket_new.page                         |  41 -
 doc/mongoc_socket_new.rst                          |  32 +
 doc/mongoc_socket_recv.page                        |  45 --
 doc/mongoc_socket_recv.rst                         |  36 +
 doc/mongoc_socket_send.page                        |  44 -
 doc/mongoc_socket_send.rst                         |  34 +
 doc/mongoc_socket_sendv.page                       |  48 --
 doc/mongoc_socket_sendv.rst                        |  34 +
 doc/mongoc_socket_setsockopt.page                  |  45 --
 doc/mongoc_socket_setsockopt.rst                   |  36 +
 doc/mongoc_socket_t.page                           |  30 -
 doc/mongoc_socket_t.rst                            |  45 ++
 doc/mongoc_ssl_opt_get_default.page                |  29 -
 doc/mongoc_ssl_opt_get_default.rst                 |  18 +
 doc/mongoc_ssl_opt_t.page                          | 107 ---
 doc/mongoc_ssl_opt_t.rst                           | 117 +++
 doc/mongoc_stream_buffered_new.page                |  43 -
 doc/mongoc_stream_buffered_new.rst                 |  29 +
 doc/mongoc_stream_buffered_t.page                  |  26 -
 doc/mongoc_stream_buffered_t.rst                   |  24 +
 doc/mongoc_stream_close.page                       |  45 --
 doc/mongoc_stream_close.rst                        |  30 +
 doc/mongoc_stream_cork.page                        |  45 --
 doc/mongoc_stream_cork.rst                         |  36 +
 doc/mongoc_stream_destroy.page                     |  35 -
 doc/mongoc_stream_destroy.rst                      |  20 +
 doc/mongoc_stream_file_get_fd.page                 |  42 -
 doc/mongoc_stream_file_get_fd.rst                  |  29 +
 doc/mongoc_stream_file_new.page                    |  42 -
 doc/mongoc_stream_file_new.rst                     |  27 +
 doc/mongoc_stream_file_new_for_path.page           |  45 --
 doc/mongoc_stream_file_new_for_path.rst            |  31 +
 doc/mongoc_stream_file_t.page                      |  24 -
 doc/mongoc_stream_file_t.rst                       |  27 +
 doc/mongoc_stream_flush.page                       |  42 -
 doc/mongoc_stream_flush.rst                        |  27 +
 doc/mongoc_stream_get_base_stream.page             |  40 -
 doc/mongoc_stream_get_base_stream.rst              |  25 +
 doc/mongoc_stream_gridfs_new.page                  |  40 -
 doc/mongoc_stream_gridfs_new.rst                   |  25 +
 doc/mongoc_stream_gridfs_t.page                    |  22 -
 doc/mongoc_stream_gridfs_t.rst                     |  25 +
 doc/mongoc_stream_read.page                        |  55 --
 doc/mongoc_stream_read.rst                         |  42 +
 doc/mongoc_stream_readv.page                       |  55 --
 doc/mongoc_stream_readv.rst                        |  42 +
 doc/mongoc_stream_setsockopt.page                  |  48 --
 doc/mongoc_stream_setsockopt.rst                   |  33 +
 doc/mongoc_stream_socket_get_socket.page           |  40 -
 doc/mongoc_stream_socket_get_socket.rst            |  25 +
 doc/mongoc_stream_socket_new.page                  |  41 -
 doc/mongoc_stream_socket_new.rst                   |  29 +
 doc/mongoc_stream_socket_t.page                    |  24 -
 doc/mongoc_stream_socket_t.rst                     |  26 +
 doc/mongoc_stream_t.page                           |  39 -
 doc/mongoc_stream_t.rst                            |  56 ++
 doc/mongoc_stream_tls_t.page                       |  24 -
 doc/mongoc_stream_tls_t.rst                        |  23 +
 doc/mongoc_stream_uncork.page                      |  47 --
 doc/mongoc_stream_uncork.rst                       |  36 +
 doc/mongoc_stream_write.page                       |  53 --
 doc/mongoc_stream_write.rst                        |  40 +
 doc/mongoc_stream_writev.page                      |  49 --
 doc/mongoc_stream_writev.rst                       |  34 +
 doc/mongoc_topology_description_get_servers.page   |  37 -
 doc/mongoc_topology_description_get_servers.rst    |  28 +
 ...c_topology_description_has_readable_server.page |  43 -
 ...oc_topology_description_has_readable_server.rst |  34 +
 ...c_topology_description_has_writable_server.page |  38 -
 ...oc_topology_description_has_writable_server.rst |  30 +
 doc/mongoc_topology_description_t.page             |  32 -
 doc/mongoc_topology_description_t.rst              |  35 +
 doc/mongoc_topology_description_type.page          |  38 -
 doc/mongoc_topology_description_type.rst           |  29 +
 doc/mongoc_tutorial.page                           | 870 --------------------
 doc/mongoc_update_flags_t.page                     |  54 --
 doc/mongoc_update_flags_t.rst                      |  36 +
 doc/mongoc_updating_document.page                  |  92 ---
 doc/mongoc_uri_copy.page                           |  36 -
 doc/mongoc_uri_copy.rst                            |  28 +
 doc/mongoc_uri_destroy.page                        |  31 -
 doc/mongoc_uri_destroy.rst                         |  23 +
 doc/mongoc_uri_get_auth_mechanism.page             |  37 -
 doc/mongoc_uri_get_auth_mechanism.rst              |  28 +
 doc/mongoc_uri_get_auth_source.page                |  36 -
 doc/mongoc_uri_get_auth_source.rst                 |  28 +
 doc/mongoc_uri_get_database.page                   |  37 -
 doc/mongoc_uri_get_database.rst                    |  28 +
 doc/mongoc_uri_get_hosts.page                      |  37 -
 doc/mongoc_uri_get_hosts.rst                       |  28 +
 doc/mongoc_uri_get_mechanism_properties.page       |  64 --
 doc/mongoc_uri_get_mechanism_properties.rst        |  61 ++
 doc/mongoc_uri_get_option_as_bool.page             |  36 -
 doc/mongoc_uri_get_option_as_bool.rst              |  27 +
 doc/mongoc_uri_get_option_as_int32.page            |  41 -
 doc/mongoc_uri_get_option_as_int32.rst             |  35 +
 doc/mongoc_uri_get_option_as_utf8.page             |  36 -
 doc/mongoc_uri_get_option_as_utf8.rst              |  27 +
 doc/mongoc_uri_get_options.page                    |  37 -
 doc/mongoc_uri_get_options.rst                     |  28 +
 doc/mongoc_uri_get_password.page                   |  36 -
 doc/mongoc_uri_get_password.rst                    |  28 +
 doc/mongoc_uri_get_read_concern.page               |  37 -
 doc/mongoc_uri_get_read_concern.rst                |  28 +
 doc/mongoc_uri_get_read_prefs.page                 |  43 -
 doc/mongoc_uri_get_read_prefs.rst                  |  37 +
 doc/mongoc_uri_get_read_prefs_t.page               |  37 -
 doc/mongoc_uri_get_read_prefs_t.rst                |  28 +
 doc/mongoc_uri_get_replica_set.page                |  37 -
 doc/mongoc_uri_get_replica_set.rst                 |  28 +
 doc/mongoc_uri_get_ssl.page                        |  37 -
 doc/mongoc_uri_get_ssl.rst                         |  28 +
 doc/mongoc_uri_get_string.page                     |  37 -
 doc/mongoc_uri_get_string.rst                      |  28 +
 doc/mongoc_uri_get_username.page                   |  37 -
 doc/mongoc_uri_get_username.rst                    |  28 +
 doc/mongoc_uri_get_write_concern.page              |  37 -
 doc/mongoc_uri_get_write_concern.rst               |  28 +
 doc/mongoc_uri_new.page                            |  53 --
 doc/mongoc_uri_new.rst                             |  56 ++
 doc/mongoc_uri_new_for_host_port.page              |  38 -
 doc/mongoc_uri_new_for_host_port.rst               |  30 +
 doc/mongoc_uri_option_is_bool.page                 |  32 -
 doc/mongoc_uri_option_is_bool.rst                  |  23 +
 doc/mongoc_uri_option_is_int32.page                |  32 -
 doc/mongoc_uri_option_is_int32.rst                 |  23 +
 doc/mongoc_uri_option_is_utf8.page                 |  32 -
 doc/mongoc_uri_option_is_utf8.rst                  |  23 +
 doc/mongoc_uri_set_auth_source.page                |  40 -
 doc/mongoc_uri_set_auth_source.rst                 |  32 +
 doc/mongoc_uri_set_database.page                   |  40 -
 doc/mongoc_uri_set_database.rst                    |  32 +
 doc/mongoc_uri_set_mechanism_properties.page       |  62 --
 doc/mongoc_uri_set_mechanism_properties.rst        |  55 ++
 doc/mongoc_uri_set_option_as_bool.page             |  43 -
 doc/mongoc_uri_set_option_as_bool.rst              |  36 +
 doc/mongoc_uri_set_option_as_int32.page            |  43 -
 doc/mongoc_uri_set_option_as_int32.rst             |  36 +
 doc/mongoc_uri_set_option_as_utf8.page             |  43 -
 doc/mongoc_uri_set_option_as_utf8.rst              |  36 +
 doc/mongoc_uri_set_password.page                   |  39 -
 doc/mongoc_uri_set_password.rst                    |  30 +
 doc/mongoc_uri_set_read_concern.page               |  34 -
 doc/mongoc_uri_set_read_concern.rst                |  25 +
 doc/mongoc_uri_set_read_prefs_t.page               |  34 -
 doc/mongoc_uri_set_read_prefs_t.rst                |  25 +
 doc/mongoc_uri_set_username.page                   |  39 -
 doc/mongoc_uri_set_username.rst                    |  30 +
 doc/mongoc_uri_set_write_concern.page              |  34 -
 doc/mongoc_uri_set_write_concern.rst               |  25 +
 doc/mongoc_uri_t.page                              | 155 ----
 doc/mongoc_uri_t.rst                               | 198 +++++
 doc/mongoc_uri_unescape.page                       |  37 -
 doc/mongoc_uri_unescape.rst                        |  28 +
 doc/mongoc_version.rst                             |  51 ++
 doc/mongoc_write_concern_append.page               |  44 -
 doc/mongoc_write_concern_append.rst                |  35 +
 doc/mongoc_write_concern_copy.page                 |  36 -
 doc/mongoc_write_concern_copy.rst                  |  28 +
 doc/mongoc_write_concern_destroy.page              |  31 -
 doc/mongoc_write_concern_destroy.rst               |  23 +
 doc/mongoc_write_concern_get_fsync.page            |  42 -
 doc/mongoc_write_concern_get_fsync.rst             |  35 +
 doc/mongoc_write_concern_get_journal.page          |  36 -
 doc/mongoc_write_concern_get_journal.rst           |  28 +
 doc/mongoc_write_concern_get_w.page                |  37 -
 doc/mongoc_write_concern_get_w.rst                 |  28 +
 doc/mongoc_write_concern_get_wmajority.page        |  37 -
 doc/mongoc_write_concern_get_wmajority.rst         |  28 +
 doc/mongoc_write_concern_get_wtag.page             |  37 -
 doc/mongoc_write_concern_get_wtag.rst              |  28 +
 doc/mongoc_write_concern_get_wtimeout.page         |  38 -
 doc/mongoc_write_concern_get_wtimeout.rst          |  30 +
 doc/mongoc_write_concern_is_acknowledged.page      |  32 -
 doc/mongoc_write_concern_is_acknowledged.rst       |  25 +
 doc/mongoc_write_concern_is_valid.page             |  31 -
 doc/mongoc_write_concern_is_valid.rst              |  23 +
 doc/mongoc_write_concern_journal_is_set.page       |  31 -
 doc/mongoc_write_concern_journal_is_set.rst        |  23 +
 doc/mongoc_write_concern_new.page                  |  25 -
 doc/mongoc_write_concern_new.rst                   |  18 +
 doc/mongoc_write_concern_set_fsync.page            |  40 -
 doc/mongoc_write_concern_set_fsync.rst             |  34 +
 doc/mongoc_write_concern_set_journal.page          |  34 -
 doc/mongoc_write_concern_set_journal.rst           |  25 +
 doc/mongoc_write_concern_set_w.page                |  33 -
 doc/mongoc_write_concern_set_w.rst                 |  25 +
 doc/mongoc_write_concern_set_wmajority.page        |  34 -
 doc/mongoc_write_concern_set_wmajority.rst         |  27 +
 doc/mongoc_write_concern_set_wtag.page             |  34 -
 doc/mongoc_write_concern_set_wtag.rst              |  25 +
 doc/mongoc_write_concern_set_wtimeout.page         |  34 -
 doc/mongoc_write_concern_set_wtimeout.rst          |  25 +
 doc/mongoc_write_concern_t.page                    |  68 --
 doc/mongoc_write_concern_t.rst                     |  75 ++
 doc/tutorial.rst                                   | 882 +++++++++++++++++++++
 doc/updating-document.rst                          |  96 +++
 935 files changed, 19371 insertions(+), 21842 deletions(-)

commit c63a60e2f611f30a71afc6c30b20f652ed42b960
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 5 06:05:23 2017 -0500

    CDRIVER-1979 sphinx documentation config and theme

 THIRD_PARTY_NOTICES                  |  54 ++++
 doc/.gitignore                       |   7 +
 doc/conf.py                          | 106 +++++++
 doc/githubpages.py                   |  24 ++
 doc/libbson-objects.inv              | Bin 0 -> 2751 bytes
 doc/mongoc-theme/globaltoc.html      |   7 +
 doc/mongoc-theme/layout.html         |  42 +++
 doc/mongoc-theme/static/mongoc.css_t | 535 +++++++++++++++++++++++++++++++++++
 doc/mongoc-theme/static/pygments.css |  70 +++++
 doc/mongoc-theme/theme.conf          |   4 +
 doc/mongoc/__init__.py               |  30 ++
 doc/taglist/__init__.py              | 146 ++++++++++
 12 files changed, 1025 insertions(+)

commit 6564d4684ca34a065609aba0d28ce6ff4950868c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 5 09:18:09 2017 -0500

    CDRIVER-1979 XML fixes to aid RST conversion

 doc/mongoc_apm_command_failed_t.page               |  3 +-
 doc/mongoc_basic_troubleshooting.page              |  4 +--
 ...ongoc_client_command_simple_with_server_id.page |  3 +-
 doc/mongoc_client_pool_set_error_api.page          |  2 +-
 doc/mongoc_client_set_error_api.page               |  2 +-
 doc/mongoc_collection_copy.page                    |  2 +-
 doc/mongoc_collection_find_with_opts.page          |  6 ----
 doc/mongoc_database_copy.page                      |  2 +-
 doc/mongoc_errors.page                             | 20 ++++-------
 doc/mongoc_gridfs_file_set_id.page                 |  9 ++---
 doc/mongoc_gridfs_t.page                           |  2 +-
 doc/mongoc_read_prefs_t.page                       |  2 +-
 doc/mongoc_tutorial.page                           |  4 ---
 doc/mongoc_uri_t.page                              | 42 ++--------------------
 examples/basic_aggregation/constants.c             |  2 +-
 15 files changed, 24 insertions(+), 81 deletions(-)

commit 1eb5955c3ef361aa97ddf07b54f169c8ba788924
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jan 23 11:04:51 2017 -0800

    Include a link back to the original project

 src/mongoc/mongoc-sspi.c | 2 ++
 1 file changed, 2 insertions(+)

commit 0ce43c377716028981c3462fbda6677f5ff1d084
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 18 15:55:08 2017 -0800

    CDRIVER-299 Add SSPI Evergreen configuration

 .evergreen/compile-windows.sh |  22 ++++--
 .evergreen/config.yml         | 164 ++++++++++++++++++++++++++++++------------
 .evergreen/run-auth-tests.sh  |  23 ++++++
 3 files changed, 156 insertions(+), 53 deletions(-)

commit 96dd6ed98d50f66ce4667d117b341b2d7103e97d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 13 15:46:09 2016 -0800

    CDRIVER-299 Add native GSSAPI (SSPI) support on Windows

 CMakeLists.txt                           |  54 +++-
 build/autotools/CheckSasl.m4             |   4 +
 src/mongoc/Makefile.am                   |   4 +
 src/mongoc/mongoc-cluster-sasl-private.h |  39 +++
 src/mongoc/mongoc-cluster-sasl.c         | 281 +++++++++++++++++
 src/mongoc/mongoc-cluster-sspi-private.h |  33 ++
 src/mongoc/mongoc-cluster-sspi.c         | 286 ++++++++++++++++++
 src/mongoc/mongoc-cluster.c              | 242 +--------------
 src/mongoc/mongoc-config.h.in            |  22 ++
 src/mongoc/mongoc-init.c                 |   8 +-
 src/mongoc/mongoc-sspi-private.h         |  88 ++++++
 src/mongoc/mongoc-sspi.c                 | 500 +++++++++++++++++++++++++++++++
 tests/test-sasl.c                        |   6 +
 13 files changed, 1322 insertions(+), 245 deletions(-)

commit bcb0dfce0072952b911b98d423ae804eb1f2879c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jan 23 11:00:16 2017 -0800

    regenerate

 tests/mock_server/future-functions.c | 1155 +++++++++++++++++++---------------
 tests/mock_server/future-functions.h |   97 ++-
 tests/mock_server/future-value.c     |  342 +++++-----
 tests/mock_server/future-value.h     |  298 +++++----
 tests/mock_server/future.c           |   25 +-
 tests/mock_server/future.h           |   44 +-
 6 files changed, 1102 insertions(+), 859 deletions(-)

commit f13891e494227a1e35d64a7e5266946bcc1f60f5
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jan 23 10:58:59 2017 -0800

    Make sure generated files end with an empty newline

 build/future_function_templates/future-functions.c.template | 1 +
 1 file changed, 1 insertion(+)

commit 98345054e1393385d406f0c0ce16275e4a83fd78
Author: Aleksander Melnikov <a.melnikov69@gmail.com>
Date:   Fri Jan 20 14:38:55 2017 -0800

    CDRIVER-1973 Improve test results

 tests/TestSuite.c | 5 +++++
 1 file changed, 5 insertions(+)

commit bdc68dd6e0a58c5f79dacbd37382e5df9c7fc00c
Author: Aleksander Melnikov <a.melnikov69@gmail.com>
Date:   Fri Jan 20 14:37:25 2017 -0800

    Improve debug tracing on failures

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ec9a155b4a9beb8e8fda02102c1c29df53825f0
Author: Aleksander Melnikov <a.melnikov69@gmail.com>
Date:   Fri Jan 20 14:36:04 2017 -0800

    CDRIVER-1973 Add CPU counter support for HPUX

 src/mongoc/mongoc-counters-private.h | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 3368aafadcbddc1bf288a82f3177c9accaa6722d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jan 20 14:32:31 2017 -0800

    Coding standards

 doc/mongoc_socket_bind.page          |  6 +++---
 doc/mongoc_socket_connect.page       |  8 ++++----
 doc/mongoc_socket_getsockname.page   |  4 ++--
 doc/mongoc_socket_setsockopt.page    | 10 +++++-----
 doc/mongoc_stream_setsockopt.page    |  8 ++++----
 src/mongoc/mongoc-client.c           |  5 +++--
 src/mongoc/mongoc-socket.c           | 20 ++++++++++----------
 src/mongoc/mongoc-topology-scanner.c |  3 ++-
 8 files changed, 33 insertions(+), 31 deletions(-)

commit 6c63c20006602d5561689ebff39d9a61cfe60451
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jan 20 14:31:21 2017 -0800

    CDRIVER-1973 Add typecheck for socklen_t

 CMakeLists.txt                      | 15 +++++++++++++++
 build/autotools/FindDependencies.m4 |  2 ++
 src/mongoc/mongoc-config.h.in       |  9 +++++++++
 src/mongoc/mongoc-socket.h          |  7 +++++++
 4 files changed, 33 insertions(+)

commit fb80a4931167916c825d23f6a3b1b95b81ec86a9
Author: Aleksander Melnikov <a.melnikov69@gmail.com>
Date:   Fri Jan 20 14:17:27 2017 -0800

    CDRIVER-1973 Make sure socklen_t is available

 src/mongoc/mongoc-client.c                      |  2 +-
 src/mongoc/mongoc-socket.c                      | 14 +++++++-------
 src/mongoc/mongoc-socket.h                      |  8 ++++----
 src/mongoc/mongoc-stream-socket.c               |  2 +-
 src/mongoc/mongoc-stream-tls-libressl.c         |  2 +-
 src/mongoc/mongoc-stream-tls-openssl.c          |  2 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c   |  2 +-
 src/mongoc/mongoc-stream-tls-secure-transport.c |  2 +-
 src/mongoc/mongoc-stream.c                      |  2 +-
 src/mongoc/mongoc-stream.h                      |  4 ++--
 src/mongoc/mongoc-topology-scanner.c            |  2 +-
 tests/debug-stream.c                            |  2 +-
 tests/mock_server/mock-server.c                 |  2 +-
 tests/ssl-test.c                                |  2 +-
 tests/test-mongoc-socket.c                      |  4 ++--
 tests/test-mongoc-stream-tls-error.c            |  2 +-
 16 files changed, 27 insertions(+), 27 deletions(-)

commit 08d9c51176f3a04d76f78ede4b151f58ff9ffa9c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jan 20 14:14:32 2017 -0800

    CDRIVER-1973 Declare all host variables upfront and add hpux

 build/autotools/CheckHost.m4 | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit d27405859d0a5b664d69c9dc713771a1a54f1861
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 21 08:38:37 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dc8f4c2a5d88102d9d877f5831e13d8cabbf7bc4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 20 23:10:12 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9cfbeaefe65acf902a6abbcbe1a96835d9a3a475
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 20 17:22:41 2017 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 340e610e019f404105aae8e2c1c12f8c85fc4c72
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 20 09:30:10 2017 -0500

    CDRIVER-1407 fix socket test on FreeBSD
    
    Fixes a timeout in /Socket/sendv test.
    
    The test had wrongly assumed that a sendv timeout set socket->errno_,
    but this errno was actually set from the initial call to accept or
    connect. These functions do not set socket->errno_ during this test of
    localhost connections on FreeBSD, the way they do on Mac and Linux.

 tests/test-mongoc-socket.c | 32 +++++++-------------------------
 1 file changed, 7 insertions(+), 25 deletions(-)

commit 4382859be07d7a3ceb3f59755a86765ceea6601e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 06:26:31 2017 -0500

    CDRIVER-1341 proper UTF-8 strings in tests

 tests/test-conveniences.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 497fb0be07212851c00d335de35ad878b3fa28c9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 06:23:41 2017 -0500

    better output when tests of errors fail

 tests/TestSuite.h | 32 +++++++++++++++++++++-----------
 1 file changed, 21 insertions(+), 11 deletions(-)

commit 4b37e655ac066514350d08c882d385c881c7a438
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 06:23:04 2017 -0500

    CDRIVER-1341 validate keys for insert and update
    
    Keys in documents for insert, save, or replace must not contain "." or start with "$". Keys in documents for update must all start with "$".

 src/mongoc/mongoc-bulk-operation.c | 100 ++++++++-------
 src/mongoc/mongoc-collection.c     |  68 +++++-----
 src/mongoc/mongoc-util-private.h   |   8 ++
 src/mongoc/mongoc-util.c           |  73 +++++++++++
 tests/test-bulk.c                  | 250 ++++++++++++++++++++++++++++++++-----
 tests/test-mongoc-collection.c     | 123 +++++++++++++-----
 6 files changed, 474 insertions(+), 148 deletions(-)

commit ff8ec7b1c6384527402cb893971bfa4cc58dd6d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jan 7 08:30:57 2017 -0500

    CDRIVER-1931 fix operation ids for APM
    
    Fix the Application Performance Monitoring implementation. A series of commands
    could be monitored with the same operation_id. Now we generate unique ids.
    
    Also, a series of commands related to the same mongoc_bulk_operation_t could
    have different ids. Now, we monitor all commands for one bulk operation with
    the same id.

 src/mongoc/mongoc-bulk-operation.c     |   6 ++
 src/mongoc/mongoc-client.c             |  14 +++-
 src/mongoc/mongoc-cluster-private.h    |   1 +
 src/mongoc/mongoc-cluster.c            |  13 ++--
 src/mongoc/mongoc-collection.c         |  11 +++-
 src/mongoc/mongoc-cursor.c             |   1 +
 src/mongoc/mongoc-write-command.c      |   1 +
 tests/test-mongoc-command-monitoring.c | 116 +++++++++++++++++++++++++++++----
 8 files changed, 143 insertions(+), 20 deletions(-)

commit 173bb5f3bc168414e4ad5dbed2c399263025d90c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 18 18:58:08 2017 -0500

    CDRIVER-1995 disable some topology tests on Solaris

 tests/test-mongoc-topology.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 570c650895ca8a39c3d581a3fc226873b6e66f38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 18 18:55:04 2017 -0500

    more reliable handshake-data test

 tests/test-mongoc-handshake.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2109c21c385a7093daee2ee526f6773d9ef1ac9c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 17 17:08:52 2017 -0500

    CDRIVER-1442 reenable some cursor tests

 tests/test-mongoc-cursor.c | 5 -----
 1 file changed, 5 deletions(-)

commit 9535c1f009c28ca683117683f1e4dd61c413744e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 17 17:06:49 2017 -0500

    more reliable topology tests

 tests/test-mongoc-topology.c | 14 ++++----------
 1 file changed, 4 insertions(+), 10 deletions(-)

commit c4fb5bea9d675b179a94bbadf4342ec7d2dd544a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 6 21:56:46 2017 -0500

    CDRIVER-1969 don't abort if command doc is empty

 src/mongoc/mongoc-cluster.c | 14 ++++++++++++--
 tests/test-mongoc-client.c  | 23 +++++++++++++++++++++++
 2 files changed, 35 insertions(+), 2 deletions(-)

commit 97299bf0ce112729478d25073957d9e2ac1d4286
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 15 23:06:58 2017 -0500

    check if mongo-orchestration started mongod

 .evergreen/integration-tests.sh | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 28c0b225f96f327ef81d2e27241481c666863cb2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 15 21:57:04 2017 -0500

    fix mock server's timeout logic

 build/future_function_templates/future.c.template | 11 ++++++-----
 tests/mock_server/future.c                        | 10 ++++++----
 tests/mock_server/sync-queue.c                    |  9 +++++----
 3 files changed, 17 insertions(+), 13 deletions(-)

commit c7a300e2af68c14e5222ed5708f4645989b40c82
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 15 19:17:09 2017 -0500

    CDRIVER-1992 disable SSL test on Windows for now

 tests/test-mongoc-async.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 29b8e3b46e16adddfc04b5f0e8a8d5db1c32186c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 15 15:26:13 2017 -0500

    reliable test_reset_callbacks
    
    Don't assume the primary's server_id is always 1.

 tests/test-mongoc-command-monitoring.c | 19 ++++++++++++++++---
 1 file changed, 16 insertions(+), 3 deletions(-)

commit 626a506a62a49bf8fd954153ecc47bdeb0f8d4d2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 15 07:11:31 2017 -0500

    fix race in test_invalid_cluster_node

 tests/test-mongoc-topology.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit f002156256aafcfb80a4de89950832647e40b0e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 15 07:11:31 2017 -0500

    longer timeout in SSL tests

 tests/ssl-test.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 364e84393316d3eb91dd72b3e7ab10f2966fafc4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 21:52:40 2017 -0500

    more reliable test_client_appname

 tests/test-mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit 8d0eb72e60756a356df2963713ca58e8ddfc1467
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 18:25:10 2017 -0500

    fix /Database/create_with_write_concern

 tests/test-mongoc-database.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fd9857f2a563c9a413bf01dee816cea77b6b54d9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 17:57:12 2017 -0500

    fix valgrind errors in mock server tests

 tests/mock_server/mock-server.c     |  4 +++-
 tests/test-mongoc-client.c          | 10 ++--------
 tests/test-mongoc-find-and-modify.c |  2 ++
 tests/test-mongoc-topology.c        |  9 ++++++---
 4 files changed, 13 insertions(+), 12 deletions(-)

commit c9f327bf446523bd03f9b8654c82fafcc60c745c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 17:00:13 2017 -0500

    leaks in tests

 tests/test-mongoc-client.c             | 1 +
 tests/test-mongoc-cursor.c             | 2 ++
 tests/test-mongoc-database.c           | 2 ++
 tests/test-mongoc-gridfs.c             | 6 +++++-
 tests/test-mongoc-socket.c             | 4 ++--
 tests/test-mongoc-topology-reconcile.c | 3 ++-
 6 files changed, 14 insertions(+), 4 deletions(-)

commit 749b49495d3c69109835fb806b926f2a76c5908b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 13 14:28:29 2017 -0500

    delete mongoc-ssl.c.orig

 src/mongoc/mongoc-ssl.c.orig | 121 -------------------------------------------
 1 file changed, 121 deletions(-)

commit 107dbb031d3d77662c2efb3a68997507845df0d1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 15:26:25 2017 -0500

    Revert "CDRIVER-1972 Support for ipv6 hostnames"
    
    8729c1448782481f392e4b51e513c14bb9736a5b
    
    Fixes CDRIVER-1988.

 src/mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 49dc46626d2838fc88c585904362aaca960fc622
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 14:12:58 2017 -0500

    CDRIVER-1988 test with IPv6 disabled

 .evergreen/config.yml                              | 25 +++++++++++++++++++++-
 .evergreen/integration-tests.sh                    |  4 ++++
 orchestration_configs/servers/basic-ipv4-only.json |  9 ++++++++
 tests/test-mongoc-uri.c                            |  1 -
 4 files changed, 37 insertions(+), 2 deletions(-)

commit fa32ded79fdab705041ea67f8ebfd7a471f42142
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 15:31:12 2017 -0500

    set version to 1.6.0-dev

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3024e8322413a2738b6383782b94ed2a36346a62
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jan 11 15:30:30 2017 -0500

    1.5.2 Release

 NEWS             | 52 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 VERSION_RELEASED |  2 +-
 2 files changed, 53 insertions(+), 1 deletion(-)

commit 2e2bd128838804727265b4d224cf7cd3841f823c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 6 20:22:30 2017 -0500

    CDRIVER-1975 allow mixed $ and non-$ query ops

 src/mongoc/mongoc-cursor.c          | 38 ---------------------------------
 tests/test-mongoc-collection-find.c | 19 +++++++++++++++++
 tests/test-mongoc-cursor.c          | 42 -------------------------------------
 3 files changed, 19 insertions(+), 80 deletions(-)

commit a6d798466d5ae00158584724cfaf52a5b2c4a55f
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 5 14:11:03 2017 -0800

    CDRIVER-1964 Windows CA stores should be opened with read-only flag

 src/mongoc/mongoc-openssl.c | 19 ++++++++++++++++---
 1 file changed, 16 insertions(+), 3 deletions(-)

commit 9f1e63c625f9893fe185f1c98baec4ca359cecb2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 5 14:55:39 2017 -0800

    CDRIVER-1972 We explicitly know when its UDS but AF_UNSPEC might be ipv4 or ipv6

 src/mongoc/mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit 8729c1448782481f392e4b51e513c14bb9736a5b
Author: Alexey Ponomarev <nine@yandex-team.ru>
Date:   Tue Dec 27 18:27:48 2016 +0700

    CDRIVER-1972 Support for ipv6 hostnames
    
    For cases when connection endpoint specified as hostname with ipv6
    address only.

 src/mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bc04ad0a7157788b4494a2b6c22b0bb88183a16a
Author: Rockford Wei <rocky@perfect.org>
Date:   Wed Dec 21 14:51:00 2016 -0500

    Fixing gridfs_file_set_xxx wouldnt export to module map.
    
    When using clang to export modules, functions set of
    mongo_gridfs_file_set_xxx couldnt export to destination simply because
    only the getting methods were marked with BSON_API. Typical scenario is
    a third party exporting, such as c library exporting for Swift
    language.
    Script test-libmongoc, which includes GridFS, passed.
    This issue was found by Kyle Jessup and Rockford Wei,
    perfect.org

 src/mongoc/mongoc-gridfs-file.h | 2 ++
 1 file changed, 2 insertions(+)

commit 6dd99265127d45104bb722062e3f4058b2cf1f9a
Author: Peter Beckman <beckman@angryox.com>
Date:   Mon Jan 2 15:34:43 2017 -0500

    CDRIVER-1522 CDRIVER-1970 update define constants for "find" opts to be unique

 src/mongoc/mongoc-cursor-cursorid.c |   8 +-
 src/mongoc/mongoc-cursor-private.h  | 116 ++++++++++++------------
 src/mongoc/mongoc-cursor.c          | 172 ++++++++++++++++++------------------
 3 files changed, 148 insertions(+), 148 deletions(-)

commit c2c0611983f9ed83ff7f80c61c38fba26388df90
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Dec 16 14:09:00 2016 -0800

    CDRIVER-1952 cyrus header checks don't account for non-system paths

 build/autotools/CheckSasl.m4 | 3 +++
 1 file changed, 3 insertions(+)

commit 303bd2c7f77404d5e2b44aff301349ba3d229df1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 5 05:05:53 2017 -0500

    CDRIVER-1954 getters for findandmodify opts struct

 NEWS                                               |  7 ++
 ...modify_opts_get_bypass_document_validation.page | 30 ++++++++
 doc/mongoc_find_and_modify_opts_get_fields.page    | 32 +++++++++
 doc/mongoc_find_and_modify_opts_get_flags.page     | 30 ++++++++
 ...ongoc_find_and_modify_opts_get_max_time_ms.page | 30 ++++++++
 doc/mongoc_find_and_modify_opts_get_sort.page      | 32 +++++++++
 doc/mongoc_find_and_modify_opts_get_update.page    | 32 +++++++++
 src/mongoc/mongoc-find-and-modify.c                | 80 ++++++++++++++++++++++
 src/mongoc/mongoc-find-and-modify.h                | 35 ++++++++++
 tests/test-mongoc-find-and-modify.c                | 20 ++++++
 10 files changed, 328 insertions(+)

commit 8c701ac1e12d74ed2ccb35e91f09dac762b228b7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Dec 23 09:32:35 2016 -0600

    typo in mongoc_init.page

 doc/mongoc_init.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit be603f929a4a4643a26314b2a07e943597c07c42
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 21 07:39:32 2016 -0600

    CDRIVER-1926 fix truncated man page lines
    
    Mallard lines like "Optional <code>bson_t</code>. Might be NULL." was output as:
    
    Optional
    .B bson_t
    . Might be NULL.
    
    Groff misinterprets, and truncates at the first period. Escape the dot:
    
    Optional
    .B bson_t
    \[char46] Might be NULL.
    
    Fix some other layout and formatting issues too.

 doc/mallard2man.py               | 37 +++++++++++++++++++++++++------------
 doc/mongoc_finding_document.page |  4 +++-
 2 files changed, 28 insertions(+), 13 deletions(-)

commit 79ecc50b847c59c90f02417c05796172ad01d37e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 13 15:22:36 2016 -0800

    Run on whichver distro is available

 .evergreen/config.yml | 4 ++++
 1 file changed, 4 insertions(+)

commit ad3e722e9c6210b7736e252944605d945732e3ba
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 13 15:22:13 2016 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5c254d40707271633fa058123c33a439be72f747
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 13 07:37:06 2016 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 101c7d3e0a3d0c455c04c168dbd9b2eb08c17b08
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 12 15:57:18 2016 -0800

    CDRIVER-1953 Escape double quotes in MONGOC_USER_SET_LDFLAGS/CC/CFLAGS

 src/mongoc/mongoc-handshake-compiler-private.h |  7 ++-----
 src/mongoc/mongoc-handshake.c                  | 10 ++++++----
 src/mongoc/mongoc-util-private.h               |  4 ++++
 3 files changed, 12 insertions(+), 9 deletions(-)

commit 482374fac4abf7dd21cc881581d72ac4d6e6e622
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 12 11:53:02 2016 -0800

    CDRIVER-1577 Declare __cdecl as calling convention on Windows

 src/mongoc/mongoc-apm.h                            | 201 +++++++--------------
 src/mongoc/mongoc-bulk-operation.h                 |  72 +++-----
 src/mongoc/mongoc-client-pool.h                    |  33 ++--
 src/mongoc/mongoc-client.h                         | 105 ++++-------
 src/mongoc/mongoc-collection.h                     | 126 +++++--------
 src/mongoc/mongoc-crypto-cng.h                     |   6 +-
 src/mongoc/mongoc-cursor.h                         |  54 ++----
 src/mongoc/mongoc-database.h                       |  72 +++-----
 src/mongoc/mongoc-find-and-modify.h                |  27 +--
 src/mongoc/mongoc-gridfs-file-list.h               |   9 +-
 src/mongoc/mongoc-gridfs-file.h                    |  39 ++--
 src/mongoc/mongoc-gridfs.h                         |  36 ++--
 src/mongoc/mongoc-handshake.h                      |   3 +-
 src/mongoc/mongoc-index.h                          |  18 +-
 src/mongoc/mongoc-init.h                           |   6 +-
 src/mongoc/mongoc-log.h                            |  18 +-
 src/mongoc/mongoc-matcher.h                        |   9 +-
 src/mongoc/mongoc-rand.h                           |   9 +-
 src/mongoc/mongoc-read-concern.h                   |  18 +-
 src/mongoc/mongoc-read-prefs.h                     |  33 ++--
 src/mongoc/mongoc-server-description.h             |  21 +--
 src/mongoc/mongoc-socket.h                         |  51 ++----
 src/mongoc/mongoc-ssl.h                            |   3 +-
 src/mongoc/mongoc-stream-buffered.h                |   3 +-
 src/mongoc/mongoc-stream-file.h                    |   9 +-
 src/mongoc/mongoc-stream-gridfs.h                  |   3 +-
 src/mongoc/mongoc-stream-socket.h                  |   6 +-
 src/mongoc/mongoc-stream-tls-libressl.h            |   3 +-
 src/mongoc/mongoc-stream-tls-openssl.h             |   3 +-
 .../mongoc-stream-tls-secure-channel-private.h     |   3 +-
 src/mongoc/mongoc-stream-tls-secure-channel.h      |   3 +-
 src/mongoc/mongoc-stream-tls-secure-transport.h    |   3 +-
 src/mongoc/mongoc-stream-tls.h                     |  18 +-
 src/mongoc/mongoc-stream.h                         |  39 ++--
 src/mongoc/mongoc-topology-description.h           |  12 +-
 src/mongoc/mongoc-uri.h                            | 120 ++++--------
 src/mongoc/mongoc-version-functions.h              |  15 +-
 src/mongoc/mongoc-write-concern.h                  |  57 ++----
 38 files changed, 422 insertions(+), 844 deletions(-)

commit 03891bc6f44ca63d9f35a9a0060ab21ac61e4d98
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 12 13:06:27 2016 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7f1dd3630d6bb4b8d5db4c2b865c328acd170012
Author: Clang Formatter <drivers@mongodb.com>
Date:   Mon Dec 12 11:04:19 2016 -0800

    CDRIVER-1167 Format mongoc with out new clang-format config

 examples/aggregation/aggregation1.c                |   38 +-
 examples/basic_aggregation/basic-aggregation.c     |    8 +-
 examples/basic_aggregation/constants.c             |   28 +-
 examples/basic_aggregation/distinct.c              |   27 +-
 examples/basic_aggregation/map-reduce-advanced.c   |   30 +-
 examples/basic_aggregation/map-reduce-basic.c      |   37 +-
 examples/bulk/bulk-collation.c                     |   20 +-
 examples/bulk/bulk1.c                              |    3 +-
 examples/bulk/bulk2.c                              |    3 +-
 examples/bulk/bulk3.c                              |    3 +-
 examples/bulk/bulk4.c                              |    5 +-
 examples/bulk/bulk5.c                              |   12 +-
 examples/bulk/bulk6.c                              |    3 +-
 examples/common_operations/clone-collection.c      |   22 +-
 examples/common_operations/common-operations.c     |   14 +-
 examples/common_operations/copydb.c                |   25 +-
 examples/common_operations/explain.c               |   23 +-
 examples/doc-common-insert.c                       |   12 +-
 examples/example-client.c                          |   19 +-
 examples/example-command-monitoring.c              |   34 +-
 examples/example-command-with-opts.c               |   58 +-
 examples/example-gridfs.c                          |   68 +-
 examples/example-matcher.c                         |   29 +-
 examples/example-pool.c                            |   12 +-
 examples/example-scram.c                           |   22 +-
 examples/example-sdam-monitoring.c                 |   42 +-
 examples/filter-bsondump.c                         |    3 +-
 examples/find-and-modify.c                         |   17 +-
 examples/find_and_modify_with_opts/bypass.c        |   14 +-
 examples/find_and_modify_with_opts/fam.c           |   34 +-
 examples/find_and_modify_with_opts/fields.c        |   17 +-
 examples/find_and_modify_with_opts/flags.c         |   20 +-
 examples/find_and_modify_with_opts/opts.c          |   17 +-
 examples/find_and_modify_with_opts/sort.c          |   14 +-
 examples/find_and_modify_with_opts/update.c        |   17 +-
 examples/mongoc-dump.c                             |   79 +-
 examples/mongoc-ping.c                             |   46 +-
 examples/mongoc-tail.c                             |   85 +-
 src/mongoc/mongoc-apm-private.h                    |  197 +-
 src/mongoc/mongoc-apm.c                            |  143 +-
 src/mongoc/mongoc-apm.h                            |  297 +--
 src/mongoc/mongoc-array-private.h                  |   37 +-
 src/mongoc/mongoc-array.c                          |   24 +-
 src/mongoc/mongoc-async-cmd-private.h              |   70 +-
 src/mongoc/mongoc-async-cmd.c                      |  111 +-
 src/mongoc/mongoc-async-private.h                  |   52 +-
 src/mongoc/mongoc-async.c                          |   74 +-
 src/mongoc/mongoc-b64-private.h                    |   12 +-
 src/mongoc/mongoc-b64.c                            |  489 +++--
 src/mongoc/mongoc-buffer-private.h                 |   50 +-
 src/mongoc/mongoc-buffer.c                         |   74 +-
 src/mongoc/mongoc-bulk-operation-private.h         |   36 +-
 src/mongoc/mongoc-bulk-operation.c                 |  301 +--
 src/mongoc/mongoc-bulk-operation.h                 |  178 +-
 src/mongoc/mongoc-client-pool-private.h            |   14 +-
 src/mongoc/mongoc-client-pool.c                    |  164 +-
 src/mongoc/mongoc-client-pool.h                    |   53 +-
 src/mongoc/mongoc-client-private.h                 |  108 +-
 src/mongoc/mongoc-client.c                         |  717 +++----
 src/mongoc/mongoc-client.h                         |  298 +--
 src/mongoc/mongoc-cluster-private.h                |   93 +-
 src/mongoc/mongoc-cluster.c                        |  838 ++++----
 src/mongoc/mongoc-collection-private.h             |   43 +-
 src/mongoc/mongoc-collection.c                     |  999 +++++-----
 src/mongoc/mongoc-collection.h                     |  483 +++--
 src/mongoc/mongoc-counters-private.h               |  128 +-
 src/mongoc/mongoc-counters.c                       |   91 +-
 src/mongoc/mongoc-crypto-cng-private.h             |   19 +-
 src/mongoc/mongoc-crypto-cng.c                     |   64 +-
 src/mongoc/mongoc-crypto-cng.h                     |   19 +-
 src/mongoc/mongoc-crypto-common-crypto-private.h   |   19 +-
 src/mongoc/mongoc-crypto-common-crypto.c           |   24 +-
 src/mongoc/mongoc-crypto-openssl-private.h         |   18 +-
 src/mongoc/mongoc-crypto-openssl.c                 |   43 +-
 src/mongoc/mongoc-crypto-private.h                 |   41 +-
 src/mongoc/mongoc-crypto.c                         |   25 +-
 src/mongoc/mongoc-cursor-array-private.h           |    9 +-
 src/mongoc/mongoc-cursor-array.c                   |   61 +-
 src/mongoc/mongoc-cursor-cursorid-private.h        |   39 +-
 src/mongoc/mongoc-cursor-cursorid.c                |   48 +-
 src/mongoc/mongoc-cursor-private.h                 |  184 +-
 src/mongoc/mongoc-cursor-transform-private.h       |   24 +-
 src/mongoc/mongoc-cursor-transform.c               |   46 +-
 src/mongoc/mongoc-cursor.c                         |  626 +++---
 src/mongoc/mongoc-cursor.h                         |   70 +-
 src/mongoc/mongoc-database-private.h               |   31 +-
 src/mongoc/mongoc-database.c                       |  443 +++--
 src/mongoc/mongoc-database.h                       |  220 ++-
 src/mongoc/mongoc-errno-private.h                  |   17 +-
 src/mongoc/mongoc-error.h                          |   14 +-
 src/mongoc/mongoc-find-and-modify-private.h        |   21 +-
 src/mongoc/mongoc-find-and-modify.c                |   31 +-
 src/mongoc/mongoc-find-and-modify.h                |   46 +-
 src/mongoc/mongoc-flags.h                          |   54 +-
 src/mongoc/mongoc-gridfs-file-list-private.h       |   21 +-
 src/mongoc/mongoc-gridfs-file-list.c               |   30 +-
 src/mongoc/mongoc-gridfs-file-list.h               |   15 +-
 src/mongoc/mongoc-gridfs-file-page-private.h       |   59 +-
 src/mongoc/mongoc-gridfs-file-page.c               |   32 +-
 src/mongoc/mongoc-gridfs-file-page.h               |    4 +-
 src/mongoc/mongoc-gridfs-file-private.h            |   62 +-
 src/mongoc/mongoc-gridfs-file.c                    |  230 ++-
 src/mongoc/mongoc-gridfs-file.h                    |   71 +-
 src/mongoc/mongoc-gridfs-private.h                 |   16 +-
 src/mongoc/mongoc-gridfs.c                         |   99 +-
 src/mongoc/mongoc-gridfs.h                         |   71 +-
 src/mongoc/mongoc-handshake-compiler-private.h     |   43 +-
 src/mongoc/mongoc-handshake-os-private.h           |  108 +-
 src/mongoc/mongoc-handshake-private.h              |   50 +-
 src/mongoc/mongoc-handshake.c                      |   66 +-
 src/mongoc/mongoc-handshake.h                      |   10 +-
 src/mongoc/mongoc-host-list-private.h              |   15 +-
 src/mongoc/mongoc-host-list.c                      |    4 +-
 src/mongoc/mongoc-host-list.h                      |   29 +-
 src/mongoc/mongoc-index.c                          |   55 +-
 src/mongoc/mongoc-index.h                          |   79 +-
 src/mongoc/mongoc-init.c                           |   31 +-
 src/mongoc/mongoc-init.h                           |   10 +-
 src/mongoc/mongoc-iovec.h                          |   19 +-
 src/mongoc/mongoc-libressl-private.h               |   11 +-
 src/mongoc/mongoc-libressl.c                       |   11 +-
 src/mongoc/mongoc-linux-distro-scanner-private.h   |   31 +-
 src/mongoc/mongoc-linux-distro-scanner.c           |   98 +-
 src/mongoc/mongoc-list-private.h                   |   29 +-
 src/mongoc/mongoc-list.c                           |   28 +-
 src/mongoc/mongoc-log-private.h                    |   21 +-
 src/mongoc/mongoc-log.c                            |  160 +-
 src/mongoc/mongoc-log.h                            |   59 +-
 src/mongoc/mongoc-matcher-op-private.h             |   73 +-
 src/mongoc/mongoc-matcher-op.c                     |  324 ++-
 src/mongoc/mongoc-matcher-private.h                |    7 +-
 src/mongoc/mongoc-matcher.c                        |  116 +-
 src/mongoc/mongoc-matcher.h                        |   17 +-
 src/mongoc/mongoc-memcmp-private.h                 |    6 +-
 src/mongoc/mongoc-memcmp.c                         |   40 +-
 src/mongoc/mongoc-opcode-private.h                 |    3 +-
 src/mongoc/mongoc-opcode.c                         |   10 +-
 src/mongoc/mongoc-opcode.h                         |   23 +-
 src/mongoc/mongoc-openssl-private.h                |   22 +-
 src/mongoc/mongoc-openssl.c                        |  181 +-
 src/mongoc/mongoc-queue-private.h                  |   39 +-
 src/mongoc/mongoc-queue.c                          |   12 +-
 src/mongoc/mongoc-rand-cng.c                       |   24 +-
 src/mongoc/mongoc-rand-common-crypto.c             |   24 +-
 src/mongoc/mongoc-rand-openssl.c                   |   24 +-
 src/mongoc/mongoc-rand-private.h                   |    5 +-
 src/mongoc/mongoc-rand.h                           |   11 +-
 src/mongoc/mongoc-read-concern-private.h           |   17 +-
 src/mongoc/mongoc-read-concern.c                   |   18 +-
 src/mongoc/mongoc-read-concern.h                   |   29 +-
 src/mongoc/mongoc-read-prefs-private.h             |   20 +-
 src/mongoc/mongoc-read-prefs.c                     |   63 +-
 src/mongoc/mongoc-read-prefs.h                     |   56 +-
 src/mongoc/mongoc-rpc-private.h                    |  122 +-
 src/mongoc/mongoc-rpc.c                            |  713 ++++---
 src/mongoc/mongoc-sasl-private.h                   |   70 +-
 src/mongoc/mongoc-sasl.c                           |   99 +-
 src/mongoc/mongoc-scram-private.h                  |   47 +-
 src/mongoc/mongoc-scram.c                          |  256 +--
 src/mongoc/mongoc-secure-channel-private.h         |   53 +-
 src/mongoc/mongoc-secure-channel.c                 |  494 +++--
 src/mongoc/mongoc-secure-transport-private.h       |   29 +-
 src/mongoc/mongoc-secure-transport.c               |  180 +-
 src/mongoc/mongoc-server-description-private.h     |  129 +-
 src/mongoc/mongoc-server-description.c             |  198 +-
 src/mongoc/mongoc-server-description.h             |    9 +-
 src/mongoc/mongoc-server-stream-private.h          |   14 +-
 src/mongoc/mongoc-server-stream.c                  |    8 +-
 src/mongoc/mongoc-set-private.h                    |   57 +-
 src/mongoc/mongoc-set.c                            |   74 +-
 src/mongoc/mongoc-socket-private.h                 |   14 +-
 src/mongoc/mongoc-socket.c                         |  244 +--
 src/mongoc/mongoc-socket.h                         |  166 +-
 src/mongoc/mongoc-ssl-private.h                    |   15 +-
 src/mongoc/mongoc-ssl.c                            |   49 +-
 src/mongoc/mongoc-ssl.c.orig                       |  121 ++
 src/mongoc/mongoc-ssl.h                            |   16 +-
 src/mongoc/mongoc-stream-buffered.c                |   73 +-
 src/mongoc/mongoc-stream-buffered.h                |    8 +-
 src/mongoc/mongoc-stream-file.c                    |   53 +-
 src/mongoc/mongoc-stream-file.h                    |   15 +-
 src/mongoc/mongoc-stream-gridfs.c                  |   35 +-
 src/mongoc/mongoc-stream-gridfs.h                  |    7 +-
 src/mongoc/mongoc-stream-private.h                 |   21 +-
 src/mongoc/mongoc-stream-socket.c                  |   80 +-
 src/mongoc/mongoc-stream-socket.h                  |   10 +-
 src/mongoc/mongoc-stream-tls-libressl-private.h    |   12 +-
 src/mongoc/mongoc-stream-tls-libressl.c            |  159 +-
 src/mongoc/mongoc-stream-tls-libressl.h            |   11 +-
 src/mongoc/mongoc-stream-tls-openssl-bio-private.h |   24 +-
 src/mongoc/mongoc-stream-tls-openssl-bio.c         |   52 +-
 src/mongoc/mongoc-stream-tls-openssl-private.h     |   13 +-
 src/mongoc/mongoc-stream-tls-openssl.c             |  160 +-
 src/mongoc/mongoc-stream-tls-openssl.h             |   10 +-
 src/mongoc/mongoc-stream-tls-private.h             |   23 +-
 .../mongoc-stream-tls-secure-channel-private.h     |   34 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c      |  429 ++--
 src/mongoc/mongoc-stream-tls-secure-channel.h      |   11 +-
 .../mongoc-stream-tls-secure-transport-private.h   |   14 +-
 src/mongoc/mongoc-stream-tls-secure-transport.c    |  193 +-
 src/mongoc/mongoc-stream-tls-secure-transport.h    |   11 +-
 src/mongoc/mongoc-stream-tls.c                     |   70 +-
 src/mongoc/mongoc-stream-tls.h                     |   53 +-
 src/mongoc/mongoc-stream.c                         |  129 +-
 src/mongoc/mongoc-stream.h                         |  138 +-
 src/mongoc/mongoc-thread-private.h                 |  108 +-
 .../mongoc-topology-description-apm-private.h      |   28 +-
 src/mongoc/mongoc-topology-description-apm.c       |    7 +-
 src/mongoc/mongoc-topology-description-private.h   |   95 +-
 src/mongoc/mongoc-topology-description.c           |  624 +++---
 src/mongoc/mongoc-topology-description.h           |   17 +-
 src/mongoc/mongoc-topology-private.h               |   82 +-
 src/mongoc/mongoc-topology-scanner-private.h       |  120 +-
 src/mongoc/mongoc-topology-scanner.c               |  192 +-
 src/mongoc/mongoc-topology.c                       |  318 ++-
 src/mongoc/mongoc-trace-private.h                  |   87 +-
 src/mongoc/mongoc-uri-private.h                    |   13 +-
 src/mongoc/mongoc-uri.c                            |  695 ++++---
 src/mongoc/mongoc-uri.h                            |  169 +-
 src/mongoc/mongoc-util-private.h                   |   47 +-
 src/mongoc/mongoc-util.c                           |   48 +-
 src/mongoc/mongoc-version-functions.c              |    2 +-
 src/mongoc/mongoc-version-functions.h              |   23 +-
 src/mongoc/mongoc-write-command-private.h          |  169 +-
 src/mongoc/mongoc-write-command.c                  |  684 ++++---
 src/mongoc/mongoc-write-concern-private.h          |   49 +-
 src/mongoc/mongoc-write-concern.c                  |  108 +-
 src/mongoc/mongoc-write-concern.h                  |   88 +-
 src/mongoc/utlist.h                                | 1342 +++++++------
 src/tools/mongoc-stat.c                            |   97 +-
 tests/TestSuite.c                                  |  334 ++--
 tests/TestSuite.h                                  |  524 ++---
 tests/certificates/mycert.pfx                      |  Bin 0 -> 2493 bytes
 tests/debug-stream.c                               |   60 +-
 tests/ha-test.c                                    |  605 +++---
 tests/ha-test.h                                    |  118 +-
 tests/json-test.c                                  |  216 +-
 tests/json-test.h                                  |   23 +-
 tests/mock_server/future-functions.c               | 1154 +++++------
 tests/mock_server/future-functions.h               |   97 +-
 tests/mock_server/future-value.c                   |  342 ++--
 tests/mock_server/future-value.h                   |  298 ++-
 tests/mock_server/future.c                         |   30 +-
 tests/mock_server/future.h                         |   44 +-
 tests/mock_server/mock-rs.c                        |  130 +-
 tests/mock_server/mock-rs.h                        |  159 +-
 tests/mock_server/mock-server.c                    |  288 ++-
 tests/mock_server/mock-server.h                    |  266 +--
 tests/mock_server/request.c                        |  170 +-
 tests/mock_server/request.h                        |  115 +-
 tests/mock_server/sync-queue.c                     |   10 +-
 tests/mock_server/sync-queue.h                     |   17 +-
 tests/mongoc-tests.c                               |   17 +-
 tests/mongoc-tests.h                               |    5 +-
 tests/ssl-test.c                                   |  166 +-
 tests/ssl-test.h                                   |   29 +-
 tests/test-bulk.c                                  | 1545 ++++++++-------
 tests/test-conveniences.c                          |  313 +--
 tests/test-conveniences.h                          |  104 +-
 tests/test-libmongoc.c                             |  391 ++--
 tests/test-libmongoc.h                             |  191 +-
 tests/test-load.c                                  |  101 +-
 tests/test-mongoc-array.c                          |   32 +-
 tests/test-mongoc-async.c                          |   50 +-
 tests/test-mongoc-buffer.c                         |   31 +-
 tests/test-mongoc-client-pool.c                    |   75 +-
 tests/test-mongoc-client.c                         |  886 +++++----
 tests/test-mongoc-cluster.c                        |  160 +-
 tests/test-mongoc-collection-find-with-opts.c      |  474 ++---
 tests/test-mongoc-collection-find.c                |  524 ++---
 tests/test-mongoc-collection.c                     | 2088 +++++++++++---------
 tests/test-mongoc-command-monitoring.c             |  350 ++--
 tests/test-mongoc-cursor.c                         |  572 +++---
 tests/test-mongoc-database.c                       |  255 +--
 tests/test-mongoc-error.c                          |   18 +-
 tests/test-mongoc-exhaust.c                        |  195 +-
 tests/test-mongoc-find-and-modify.c                |  187 +-
 tests/test-mongoc-gridfs.c                         |  288 +--
 tests/test-mongoc-handshake.c                      |   54 +-
 tests/test-mongoc-linux-distro-scanner.c           |  148 +-
 tests/test-mongoc-list.c                           |   68 +-
 tests/test-mongoc-log.c                            |   53 +-
 tests/test-mongoc-matcher.c                        |  218 +-
 tests/test-mongoc-max-staleness.c                  |   72 +-
 tests/test-mongoc-queue.c                          |   34 +-
 tests/test-mongoc-read-prefs.c                     |  385 ++--
 tests/test-mongoc-rpc.c                            |  506 ++---
 tests/test-mongoc-sdam-monitoring.c                |  150 +-
 tests/test-mongoc-sdam.c                           |   75 +-
 tests/test-mongoc-server-selection-errors.c        |  124 +-
 tests/test-mongoc-server-selection.c               |   25 +-
 tests/test-mongoc-set.c                            |   50 +-
 tests/test-mongoc-socket.c                         |  184 +-
 tests/test-mongoc-stream-tls-error.c               |   77 +-
 tests/test-mongoc-stream-tls.c                     |   78 +-
 tests/test-mongoc-stream.c                         |   57 +-
 tests/test-mongoc-thread.c                         |    4 +-
 tests/test-mongoc-topology-description.c           |   16 +-
 tests/test-mongoc-topology-reconcile.c             |  110 +-
 tests/test-mongoc-topology-scanner.c               |  159 +-
 tests/test-mongoc-topology.c                       |  384 ++--
 tests/test-mongoc-uri.c                            | 1118 ++++++-----
 tests/test-mongoc-usleep.c                         |    2 +-
 tests/test-mongoc-version.c                        |   18 +-
 tests/test-mongoc-write-concern.c                  |  413 ++--
 tests/test-replica-set-ssl.c                       |   77 +-
 tests/test-replica-set.c                           |  240 ++-
 tests/test-sasl.c                                  |   29 +-
 tests/test-secondary.c                             |   63 +-
 tests/test-sharded-cluster.c                       |   52 +-
 tests/test-write-commands.c                        |  138 +-
 tests/test-x509.c                                  |    6 +-
 312 files changed, 21979 insertions(+), 19723 deletions(-)

commit 02d3fb5bed760ed589696490c993fc82677d8d3c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 12 11:03:11 2016 -0800

    CDRIVER-1167 Add clang-format file, and remove uncrustify

 .clang-format             | 37 +++++++++++++++++++
 src/mongoc/indent         |  3 --
 src/mongoc/uncrustify.cfg | 91 -----------------------------------------------
 3 files changed, 37 insertions(+), 94 deletions(-)

commit 205538289782d335b61bf7e46df69987fb0ce9cf
Merge: f96509f 7e80f45
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Dec 12 09:29:52 2016 -0500

    Merge pull request #411 from jwangdy/master
    
    CDRIVER-1946 SEGFAULT with fast performance counters on NUMA

commit f96509fc71004d4a6e3b5e0db64e033589344001
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 08:42:46 2016 -0500

    CDRIVER-1525 bulk collation tests skipped by mistake

 tests/test-bulk.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0dd90eee6599a9d06c2e06ded44d0571a1e42d26
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 08:41:52 2016 -0500

    CDRIVER-1884 leaks in mock server tests

 tests/mock_server/mock-server.c | 1 +
 valgrind.suppressions           | 8 --------
 2 files changed, 1 insertion(+), 8 deletions(-)

commit e713ead90a752df9af9a9c3ea5b3297051e89e5e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 08:41:17 2016 -0500

    leak in SSL mock server tests

 tests/mock_server/mock-server.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2bf34185232d6e35454fe2ea25a8a594c4b5a5c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 06:54:15 2016 -0500

    CDRIVER-1928 "unknown command error" from auth
    
    Auth errors have $err, not the standard errmsg - check for $err instead
    of setting the error message to "Unknown command error".

 src/mongoc/mongoc-rpc.c    |  3 +++
 tests/test-mongoc-client.c | 36 ++++++++++++++++++++++++++++++++++++
 2 files changed, 39 insertions(+)

commit 3d2593cb2f7ed20520e63301265f27d3945e8244
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 06:27:20 2016 -0500

    leak in replica set test

 tests/test-mongoc-topology.c | 1 +
 1 file changed, 1 insertion(+)

commit 6ec32cad3de8a6eba02bcc327d7619a7c70d42e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 05:48:04 2016 -0500

    leak in topology test

 tests/test-mongoc-topology.c | 1 +
 1 file changed, 1 insertion(+)

commit 698023942f37580408b0e5c04ed8e717e3b11bb6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Dec 10 05:47:54 2016 -0500

    CDRIVER-1494 missing-sentinel warning in URI code

 src/mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2cbc5b9f7d818970b588aed60cbf5ff08fb63a76
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 8 13:14:23 2016 -0800

    CDRIVER-1944 Fix OpenSSL header lookups in non-default paths

 build/autotools/CheckSSL.m4 | 3 +++
 1 file changed, 3 insertions(+)

commit 7e80f45d6cc576fdc1ee42510a7fea38dcc2fff5
Author: Jonathan Wang <jwang@domeyard.com>
Date:   Fri Dec 9 15:58:31 2016 -0500

    CDRIVER-1946 SEGFAULT with fast performance counters on NUMA

 src/mongoc/mongoc-counters-private.h | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 22496a8b08dec8c5cb0cd5c97a54abeeb83591fb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 8 16:14:56 2016 -0500

    style

 src/mongoc/mongoc-set.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit ed8bc5c0c786f77e8ba1be7ae3abd6202b01461a
Merge: 10b4f23 79468a8
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Dec 8 16:13:52 2016 -0500

    Merge pull request #408 from jeroenooms/ubsan
    
    fix UBSAN problem

commit 10b4f2336618219434b29cadee5eb1d0f5c6931d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 7 15:50:37 2016 -0500

    fix invalid JSON used in tests

 tests/test-mongoc-collection-find-with-opts.c | 4 ++--
 tests/test-mongoc-collection.c                | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 5090147fba5e7c3d67dec131a0e778e51dddb9d5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 7 14:44:22 2016 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 95cd85c35b41c1ca977b057e26b4a4ec3c8cd730
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 5 22:58:52 2016 -0500

    CDRIVER-1494 add mongoc_uri_set_mechanism_properties
    
    New function to replace all authMechanismProperties set on a URI.

 NEWS                                         |  8 ++++
 doc/mongoc_uri_get_mechanism_properties.page | 64 ++++++++++++++++++++++++++++
 doc/mongoc_uri_set_mechanism_properties.page | 62 +++++++++++++++++++++++++++
 src/mongoc/mongoc-uri.c                      | 42 ++++++++++++++++--
 src/mongoc/mongoc-uri.h                      |  3 ++
 tests/test-mongoc-uri.c                      | 30 +++++++++++++
 6 files changed, 205 insertions(+), 4 deletions(-)

commit 9452e1c9a2a0d5bce11563cc522054a28bb2f762
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 6 16:56:29 2016 -0800

    Add MongoDB 3.4 to the matrix

 .evergreen/config.yml          | 934 +++++++++++++++++++++++++++++++++++++++++
 .evergreen/download-mongodb.sh |  29 +-
 2 files changed, 959 insertions(+), 4 deletions(-)

commit 1f6fd43b13ddd8b9631d547fd362e35a11baa7d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 6 11:42:03 2016 -0800

    CDRIVER-1941 Fix libressl build

 src/mongoc/mongoc-init.c                | 2 ++
 src/mongoc/mongoc-libressl.c            | 2 +-
 src/mongoc/mongoc-ssl.c                 | 1 +
 src/mongoc/mongoc-stream-tls-libressl.c | 1 -
 4 files changed, 4 insertions(+), 2 deletions(-)

commit fa7c250323aa1703e47647e4b3fa0b3bb22afc66
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 6 15:34:59 2016 -0500

    whitespace fix

 src/mongoc/mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 85ac3ad24b46394924581365cae4fdbb879f5685
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 5 07:36:33 2016 -0500

    CDRIVER-1918 use getMore for command cursors
    
    We had incorrectly used OP_GETMORE to iterate command cursors, even with
    a modern server that supports the "getMore" command.

 src/mongoc/mongoc-cursor-cursorid.c |  2 +-
 src/mongoc/mongoc-cursor-private.h  |  2 +
 src/mongoc/mongoc-cursor.c          |  9 ++++
 tests/test-mongoc-database.c        | 87 ++++++++++++++++++++++++++++++++++++-
 4 files changed, 98 insertions(+), 2 deletions(-)

commit 593b004a2b32c373845b2e597f8aa8328ff2f7e4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 28 09:06:42 2016 -0500

    CDRIVER-1922 second assert err in stream_not_found

 src/mongoc/mongoc-cluster.c | 16 +++++----
 tests/test-mongoc-client.c  | 83 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 93 insertions(+), 6 deletions(-)

commit 79468a8cb00aa4335e3737916fb10bd3717949ab
Author: Jeroen Ooms <jeroenooms@gmail.com>
Date:   Wed Nov 30 17:14:40 2016 +0100

    fix UBSAN problem

 src/mongoc/mongoc-set.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 429317b2fab6dc904bf77da7acec511222ef4de0
Merge: d7748e5 82fcf3c
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Wed Nov 30 08:00:34 2016 -0800

    Merge pull request #407 from jeroenooms/windows
    
    DWORD is unsigned long, fixes CDRIVER-1935

commit 82fcf3c534da444125df0d7654714d72e6401fee
Author: Jeroen Ooms <jeroenooms@gmail.com>
Date:   Wed Nov 30 15:01:48 2016 +0100

    DWORD is unsigned long, fixes CDRIVER-1935

 src/mongoc/mongoc-handshake.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d7748e54fd92cf7c5765c52f7a760fc2f8d292f6
Merge: 266e65f c73136d
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Nov 30 08:59:19 2016 -0500

    Merge pull request #406 from christopherjwang/christopherjwang/readme_updates
    
    Update README links to mongoc host

commit c73136d42ef8fc0a51ddd629cd3d40077739df65
Author: Christopher Wang <christopher.j.wang@gmail.com>
Date:   Tue Nov 29 22:37:59 2016 -0800

    Update README links to mongoc host

 README.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 266e65f4889bde1bafbb704141a768c221287fa8
Author: Brian McCarthy <brian.mccarthy@mongodb.com>
Date:   Mon Nov 28 13:41:31 2016 -0500

    BUILD-2414 Modify mongo-c-driver-performance evergreen.yml to use native cmake on rhel62

 .evergreen/benchmark.yml | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit e3e18ce3dbbb0290f31f3703c8580a934aed253a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 27 15:32:14 2016 -0500

    CDRIVER-1924 doc how to pass collation to commands

 doc/mongoc_client_read_command_with_opts.page           | 2 +-
 doc/mongoc_client_read_write_command_with_opts.page     | 2 +-
 doc/mongoc_client_write_command_with_opts.page          | 2 +-
 doc/mongoc_collection_read_command_with_opts.page       | 2 +-
 doc/mongoc_collection_read_write_command_with_opts.page | 2 +-
 doc/mongoc_collection_write_command_with_opts.page      | 2 +-
 doc/mongoc_database_read_command_with_opts.page         | 2 +-
 doc/mongoc_database_read_write_command_with_opts.page   | 2 +-
 doc/mongoc_database_write_command_with_opts.page        | 2 +-
 9 files changed, 9 insertions(+), 9 deletions(-)

commit 60e1e591b1f206d436432f53e7397fed4abfdfc1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 27 15:16:49 2016 -0500

    CDRIVER-1928 show URL-encoded Unix sockets in docs

 doc/mongoc_advanced_connections.page | 10 ++++------
 doc/mongoc_uri_new.page              |  3 ++-
 2 files changed, 6 insertions(+), 7 deletions(-)

commit 3bd52c3c285445310517c574b32815db54285972
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 21 22:17:55 2016 -0500

    CDRIVER-1933 smallest maxStalenessSeconds is 90
    
    Revert code to parse "idleWritePeriodMillis" from ismaster, and revert
    changes that allowed maxStalenessSeconds to be a float. Sync JSON tests
    from specs repo.

 ...ongoc_read_prefs_get_max_staleness_seconds.page |  4 +-
 ...ongoc_read_prefs_set_max_staleness_seconds.page |  4 +-
 doc/mongoc_read_prefs_t.page                       |  7 ++
 src/mongoc/mongoc-read-prefs-private.h             |  4 +-
 src/mongoc/mongoc-read-prefs.c                     | 20 ++---
 src/mongoc/mongoc-read-prefs.h                     |  7 +-
 src/mongoc/mongoc-server-description-private.h     |  3 +-
 src/mongoc/mongoc-server-description.c             | 10 +--
 src/mongoc/mongoc-topology-description-private.h   |  2 +-
 src/mongoc/mongoc-topology-description.c           | 86 +++++++---------------
 src/mongoc/mongoc-topology.c                       |  4 +-
 src/mongoc/mongoc-uri.c                            | 72 ++++++++++++++----
 tests/json-test.c                                  | 15 +---
 .../ReplicaSetNoPrimary/IdleWritePeriod.json       | 81 --------------------
 .../ReplicaSetNoPrimary/IdleWritePeriod2.json      | 39 ----------
 .../ReplicaSetNoPrimary/LastUpdateTime.json        |  8 +-
 .../ReplicaSetNoPrimary/MaxStalenessTooSmall.json  | 37 ----------
 .../max_staleness/ReplicaSetNoPrimary/Nearest.json |  8 +-
 .../ReplicaSetNoPrimary/Nearest2.json              |  6 +-
 .../ReplicaSetNoPrimary/NoKnownServers.json        |  3 +-
 .../ReplicaSetNoPrimary/PrimaryPreferred.json      |  2 +-
 .../ReplicaSetNoPrimary/PrimaryPreferred_tags.json |  8 +-
 .../ReplicaSetNoPrimary/Secondary.json             |  4 +-
 .../SecondaryPreferred_tags.json                   |  4 +-
 .../ReplicaSetNoPrimary/ZeroMaxStaleness.json      | 36 +++++++++
 .../ReplicaSetWithPrimary/IdleWritePeriod.json     | 39 ----------
 .../ReplicaSetWithPrimary/IdleWritePeriod2.json    | 68 -----------------
 .../ReplicaSetWithPrimary/LastUpdateTime.json      | 10 +--
 .../ReplicaSetWithPrimary/LongHeartbeat.json       | 76 +++++++++++++++++++
 .../ReplicaSetWithPrimary/LongHeartbeat2.json      | 37 ++++++++++
 .../MaxStalenessTooSmall.json                      |  2 +-
 .../ReplicaSetWithPrimary/Nearest.json             |  8 +-
 .../ReplicaSetWithPrimary/Nearest2.json            |  6 +-
 .../ReplicaSetWithPrimary/Nearest_tags.json        |  8 +-
 .../ReplicaSetWithPrimary/PrimaryPreferred.json    |  2 +-
 .../PrimaryPreferred_incompatible.json             |  2 +-
 .../SecondaryPreferred_tags.json                   |  4 +-
 .../SecondaryPreferred_tags2.json                  |  4 +-
 .../ReplicaSetWithPrimary/Secondary_tags.json      |  4 +-
 .../ReplicaSetWithPrimary/Secondary_tags2.json     |  4 +-
 .../ShortHeartbeatShortMaxStaleness.json           | 76 -------------------
 .../ShortHeartbeatShortMaxStaleness2.json          | 76 -------------------
 .../ReplicaSetWithPrimary/ZeroMaxStaleness.json    | 36 +++++++++
 .../max_staleness/Sharded/SmallMaxStaleness.json   | 24 ++++++
 tests/test-mongoc-max-staleness.c                  | 47 ++++++++----
 45 files changed, 410 insertions(+), 597 deletions(-)

commit 5261371c50ffe80274bfbad1d73790ddf2fff12d
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 23 09:42:22 2016 -0800

    CDRIVER-1934 Darwin Secure Transport build warning

 src/mongoc/mongoc-stream-tls-secure-transport.c | 17 +++++++++--------
 src/mongoc/mongoc-stream-tls.c                  | 10 +++++-----
 2 files changed, 14 insertions(+), 13 deletions(-)

commit 2d397938f1dbe9c41e8f41294ffab07c010ba77d
Author: Remi Collet <remi@php.net>
Date:   Wed Nov 23 09:39:38 2016 -0800

    CDRIVER-1910 Fedora installation instructions

 doc/mongoc_installing.page.in | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

commit 4d7a842ebcfcda2d5b4dd108e992f245d60d0667
Author: Brian McCarthy <brian.mccarthy@mongodb.com>
Date:   Tue Nov 8 16:12:20 2016 -0500

    BUILD-2112 Create evergreen.yml for C driver performance project

 .evergreen/benchmark.yml | 22 ++++++++++------------
 1 file changed, 10 insertions(+), 12 deletions(-)

commit edeea77ff754be7670f3ac4fe7885cea74687bf8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 17 16:22:56 2016 +0000

    CDRIVER-1922 assert err in stream_not_found

 src/mongoc/mongoc-cluster.c | 19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)

commit d4c56c6ad702aab19515eeb1d295cc337d20c5df
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 17 14:47:27 2016 -0800

    CDRIVER-1044 fix -Wint-conversion on macOS
    
    incompatible pointer to integer conversion returning 'unsigned char *'
    from a function with result type 'bool' (aka 'signed char')

 src/mongoc/mongoc-crypto-common-crypto.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 200fd2253962570a6fd6e3ec3f81b8fa95d757d6
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 17 14:40:04 2016 -0800

    CDRIVER-1044 Fix ifdefs to not declare functions not being used

 tests/test-mongoc-stream-tls.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 964027e13ea5c523c217d53c3c99f005d271a20e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 17 14:09:59 2016 -0800

    CDRIVER-1044 declare the proper prototype
    
    Oddly enough, it only affected Suse12 on zSeries
    
    call to function 'mongoc_stream_tls_openssl_bio_set_data'
    without a real prototype [-Werror=unprototyped-calls]

 src/mongoc/mongoc-stream-tls-openssl-bio-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 56c4e044582f4b0893b6d3a9aad20e76954ceadd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 17 13:56:19 2016 -0800

    CDRIVER-1927 implicit declaration of function strcasecmp

 src/mongoc/mongoc-util-private.h | 4 ++++
 1 file changed, 4 insertions(+)

commit ea36df9f436fd9182cd35e820a6523f28b5a8a9c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 15 16:13:43 2016 -0800

    CDRIVER-1044: passing an object that undergoes default argument promotion to 'va_start' has undefined behavior

 tests/test-mongoc-topology-reconcile.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fdb2fc62e5e96b9e95cc5ca749c6809b53a74be8
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 15 15:55:57 2016 -0800

    CDRIVER-1044: incompatible pointer to integer conversion initializing 'bool' (aka 'signed char') with an expression of type 'void *'

 tests/test-mongoc-uri.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit fc164adeeef21f94ae80f133077ccfdf94546dfa
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 15 15:39:14 2016 -0800

    CDRIVER-1919: Fix return value

 src/mongoc/mongoc-cursor.c | 24 ++++++++++++++++++------
 1 file changed, 18 insertions(+), 6 deletions(-)

commit 7e75d18fa946433f1c9af31287cd259651b398e8
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 14 16:30:25 2016 -0800

    CDRIVER-1044 Enable -Werror for clang on Evergreen

 .evergreen/compile-unix.sh         |  7 +-----
 build/autotools/MaintainerFlags.m4 | 45 +++++++++++++++++++++-----------------
 src/Makefile.am                    |  2 ++
 src/tools/Makefile.am              |  1 +
 tests/Makefile.am                  |  2 +-
 5 files changed, 30 insertions(+), 27 deletions(-)

commit 111ad1a8fb39fa996c707fbf7f93b30f4b8c988e
Author: David Golden <xdg@xdg.me>
Date:   Wed Nov 16 06:30:56 2016 -0500

    CDRIVER-1921 cursor from static reply

 src/mongoc/mongoc-cursor-cursorid.c |  4 +++-
 tests/test-mongoc-cursor.c          | 39 +++++++++++++++++++++++++++++++++++++
 2 files changed, 42 insertions(+), 1 deletion(-)

commit e49f133ae52c19c781f7fc037894c53d12e5217c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 17 16:51:20 2016 +0000

    CDRIVER-1522 use llabs for int64 in mongoc-cursor.c

 src/mongoc/mongoc-cursor.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit af74cb12269fc0e13b41f6b957c24f5a6d872a27
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 16 15:10:33 2016 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 76c12c07e3743b96ab56cd94f1133ee6e9ad399f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 16 17:46:28 2016 +0000

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2d05349089b89b6f829ded8ab648a3955a99ba7b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 16 17:26:25 2016 +0000

    1.5.0-rc5 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS            | 2 ++
 VERSION_CURRENT | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 3efa209b74cc737c224b61149f26dac43c8024ca
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 16 17:18:20 2016 +0000

    bump libbson to 1.5.0-rc5

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 158b673995b78e095a0296e8db0f9701b7e837a7
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 14 15:42:16 2016 -0800

    CDRIVER-1421 zSeries unused function error

 .evergreen/compile-unix.sh | 3 +++
 src/mongoc/mongoc-rpc.c    | 7 ++-----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit d18a47dfa0ec9dd58eb07c6f6f7b559bbb17b879
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 15 16:00:47 2016 +0000

    CDRIVER-1915 omit thread example on MSVC

 CMakeLists.txt | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 1e94555c5333500284bb906ef87ecbdd6f52d2e7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 15 14:09:04 2016 +0000

    CDRIVER-1919 warning in mongoc-cursor.c

 src/mongoc/mongoc-cursor.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 620193353673ce902d783b7984fe097818019a44
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 11 16:27:42 2016 -0500

    CDRIVER-1915 mistakes in thread example

 .gitignore                    |  1 +
 CMakeLists.txt                |  1 +
 doc/mongoc_client_pool_t.page | 67 +-----------------------------
 doc/mongoc_tutorial.page      | 50 +----------------------
 examples/Makefile.am          |  5 +++
 examples/example-pool.c       | 95 +++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 104 insertions(+), 115 deletions(-)

commit f53dbf12b36c5d607d3af09ac724c8cb059a7397
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 11 14:42:31 2016 -0500

    CDRIVER-1915 mistakes in thread example

 doc/mongoc_client_pool_t.page | 36 +++++++++++++++++++++++++++---------
 1 file changed, 27 insertions(+), 9 deletions(-)

commit 57899f0ac172bffaef77720cb7bd5884d60babc6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 13 19:18:37 2016 +0000

    CDRIVER-1903 truly fix gridfs write test in MSVC
    
    I had not known that _vsnprintf_s in debug mode fills the buffer out to
    "len" with 0xFE.

 tests/test-mongoc-gridfs.c | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

commit 883cc25eae75f9bea67d24ad4689a9a70103a04c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 12 15:48:48 2016 -0500

    CDRIVER-1903 disable gridfs write test in MSVC
    
    Until I can diagnose the issue.

 tests/test-mongoc-gridfs.c | 2 ++
 1 file changed, 2 insertions(+)

commit bcc962e91f4414b6a3f24d2bdb6d08ad5d7fab29
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 12 14:32:08 2016 -0500

    CDRIVER-1903 fix gridfs-write test in MSVC

 tests/test-mongoc-gridfs.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit d23e71f533748106486dbe8831e8ad7b33ecb820
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 11 20:45:45 2016 -0500

    Revert "CDRIVER-1886 add mongoc_cursor_sent"
    
    This reverts commit 594764260d21afb04e2a4b02a7511818c54d0513.

 NEWS                        |  2 --
 doc/mongoc_cursor_sent.page | 33 ---------------------------------
 src/mongoc/mongoc-cursor.c  |  9 ---------
 src/mongoc/mongoc-cursor.h  |  2 --
 tests/test-mongoc-cursor.c  | 25 -------------------------
 5 files changed, 71 deletions(-)

commit 72351e9926001a03b51143648746598ec53163cb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 11 17:38:11 2016 -0500

    CDRIVER-1903 fix gridfs-write test

 tests/test-mongoc-gridfs.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit fbe7dca4173ec4ce7c4f201884b0f154857efb92
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 9 23:53:56 2016 -0500

    CDRIVER-1895 clean up topology locking in callback

 src/mongoc/mongoc-topology-scanner-private.h | 28 ++++++++------
 src/mongoc/mongoc-topology-scanner.c         | 12 +++---
 src/mongoc/mongoc-topology.c                 | 46 ++++++++++++++++------
 tests/test-mongoc-topology-scanner.c         |  2 +-
 tests/test-mongoc-topology.c                 | 57 ++++++++++++++++++++++++++++
 5 files changed, 116 insertions(+), 29 deletions(-)

commit b698499dd631648ff8d0d0583222122a4d9e14e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 11 15:43:55 2016 -0500

    CDRIVER-1519 update NEWS for collation

 NEWS | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit b84fc35d1d32da7343f44711f46a6a49fa5534b4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 9 08:02:20 2016 -0500

    CDRIVER-1906 implement idleWritePeriodMillis

 src/mongoc/mongoc-server-description-private.h     |   2 +
 src/mongoc/mongoc-server-description.c             |   5 +
 src/mongoc/mongoc-topology-description-private.h   |   6 ++
 src/mongoc/mongoc-topology-description.c           | 103 ++++++++++++++++++++-
 src/mongoc/mongoc-topology.c                       |   9 +-
 tests/json-test.c                                  |  16 +++-
 .../ReplicaSetNoPrimary/IdleWritePeriod.json       |  81 ++++++++++++++++
 .../ReplicaSetNoPrimary/IdleWritePeriod2.json      |  39 ++++++++
 .../ReplicaSetNoPrimary/LastUpdateTime.json        |   4 +-
 .../ReplicaSetNoPrimary/MaxStalenessTooSmall.json  |  37 ++++++++
 .../ReplicaSetNoPrimary/NoKnownServers.json        |  21 +++++
 .../ReplicaSetWithPrimary/IdleWritePeriod.json     |  39 ++++++++
 .../ReplicaSetWithPrimary/IdleWritePeriod2.json    |  68 ++++++++++++++
 .../MaxStalenessTooSmall.json                      |   3 +-
 .../ShortHeartbeartShortMaxStaleness.json          |  76 ---------------
 .../ShortHeartbeartShortMaxStaleness2.json         |  76 ---------------
 .../ShortHeartbeatShortMaxStaleness.json           |  76 +++++++++++++++
 .../ShortHeartbeatShortMaxStaleness2.json          |  76 +++++++++++++++
 18 files changed, 567 insertions(+), 170 deletions(-)

commit e0e7bab296c6c28165cffbf049dd15da93b1d49e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 8 16:23:34 2016 -0500

    CDRIVER-1906 maxStalenessSeconds is float, default -1

 ...ongoc_read_prefs_get_max_staleness_seconds.page |  4 +-
 ...ongoc_read_prefs_set_max_staleness_seconds.page |  4 +-
 src/mongoc/mongoc-read-prefs-private.h             |  4 +-
 src/mongoc/mongoc-read-prefs.c                     | 23 ++++---
 src/mongoc/mongoc-read-prefs.h                     |  4 +-
 src/mongoc/mongoc-server-description.c             | 11 ++--
 src/mongoc/mongoc-topology.c                       |  4 +-
 src/mongoc/mongoc-uri.c                            | 20 ++++--
 tests/TestSuite.h                                  | 17 +++++
 tests/json-test.c                                  |  2 +-
 .../ReplicaSetWithPrimary/ZeroMaxStaleness.json    | 75 ----------------------
 tests/test-mongoc-max-staleness.c                  | 44 +++++++++++--
 12 files changed, 99 insertions(+), 113 deletions(-)

commit 9dfb7d741efbca16faa7859b9349d7a942273e43
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 8 12:04:12 2016 -0500

    CDRIVER-1906 maxStalenessMS -> maxStalenessSeconds

 NEWS                                               |  2 +-
 doc/mongoc_read_prefs_get_max_staleness_ms.page    | 32 -------------
 ...ongoc_read_prefs_get_max_staleness_seconds.page | 32 +++++++++++++
 doc/mongoc_read_prefs_set_max_staleness_ms.page    | 33 --------------
 ...ongoc_read_prefs_set_max_staleness_seconds.page | 33 ++++++++++++++
 src/mongoc/mongoc-client-private.h                 |  2 +-
 src/mongoc/mongoc-read-prefs-private.h             |  2 +-
 src/mongoc/mongoc-read-prefs.c                     | 30 +++++++------
 src/mongoc/mongoc-read-prefs.h                     | 30 ++++++-------
 src/mongoc/mongoc-server-description.c             | 52 +++++++++++++---------
 src/mongoc/mongoc-topology.c                       | 13 +++---
 src/mongoc/mongoc-uri.c                            |  8 ++--
 tests/json-test.c                                  |  4 +-
 .../ReplicaSetNoPrimary/Incompatible.json          |  2 +-
 .../ReplicaSetNoPrimary/LastUpdateTime.json        |  2 +-
 .../max_staleness/ReplicaSetNoPrimary/Nearest.json |  2 +-
 .../ReplicaSetNoPrimary/Nearest2.json              |  2 +-
 .../ReplicaSetNoPrimary/PrimaryPreferred.json      |  2 +-
 .../ReplicaSetNoPrimary/PrimaryPreferred_tags.json |  2 +-
 .../ReplicaSetNoPrimary/Secondary.json             |  2 +-
 .../ReplicaSetNoPrimary/SecondaryPreferred.json    |  2 +-
 .../SecondaryPreferred_tags.json                   |  2 +-
 .../ReplicaSetWithPrimary/Incompatible.json        |  2 +-
 .../ReplicaSetWithPrimary/LastUpdateTime.json      |  2 +-
 .../MaxStalenessTooSmall.json                      |  2 +-
 .../MaxStalenessWithModePrimary.json               |  2 +-
 .../ReplicaSetWithPrimary/Nearest.json             |  2 +-
 .../ReplicaSetWithPrimary/Nearest2.json            |  2 +-
 .../ReplicaSetWithPrimary/Nearest_tags.json        |  2 +-
 .../ReplicaSetWithPrimary/PrimaryPreferred.json    |  2 +-
 .../PrimaryPreferred_incompatible.json             |  2 +-
 .../ReplicaSetWithPrimary/SecondaryPreferred.json  |  2 +-
 .../SecondaryPreferred_tags.json                   |  2 +-
 .../SecondaryPreferred_tags2.json                  |  2 +-
 .../ReplicaSetWithPrimary/Secondary_tags.json      |  2 +-
 .../ReplicaSetWithPrimary/Secondary_tags2.json     |  2 +-
 .../ShortHeartbeartShortMaxStaleness.json          |  2 +-
 .../ShortHeartbeartShortMaxStaleness2.json         |  2 +-
 .../ReplicaSetWithPrimary/ZeroMaxStaleness.json    |  2 +-
 tests/json/max_staleness/Sharded/Incompatible.json |  2 +-
 .../max_staleness/Sharded/SmallMaxStaleness.json   |  2 +-
 tests/json/max_staleness/Single/Incompatible.json  |  2 +-
 .../max_staleness/Single/SmallMaxStaleness.json    |  2 +-
 .../max_staleness/Unknown/SmallMaxStaleness.json   |  2 +-
 .../supplemental/MissingLastWriteDate.json         |  2 +-
 .../supplemental/MissingLastWriteDate.yml          |  2 +-
 tests/test-mongoc-max-staleness.c                  | 34 +++++++-------
 47 files changed, 192 insertions(+), 181 deletions(-)

commit 5aecadcaf701e64c6a3aaae09255d36dbf50229d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 6 11:15:10 2016 -0500

    CDRIVER-1903 bugs in _mongoc_gridfs_file_extend

 src/mongoc/mongoc-gridfs-file-page-private.h |   2 +-
 src/mongoc/mongoc-gridfs-file-page.c         |   8 +-
 src/mongoc/mongoc-gridfs-file.c              |  26 ++++--
 tests/test-mongoc-gridfs-file-page.c         |   7 +-
 tests/test-mongoc-gridfs.c                   | 134 +++++++++++++++++++++++++--
 5 files changed, 152 insertions(+), 25 deletions(-)

commit e1e0a23f0ec7aea5a0483f733fa39cc30c08475b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 5 09:32:30 2016 -0400

    CDRIVER-1892 add mongoc_gridfs_find_with_opts

 NEWS                                         |  2 +
 doc/mongoc_gridfs_find.page                  | 11 +++-
 doc/mongoc_gridfs_find_one.page              | 10 ++-
 doc/mongoc_gridfs_find_one_with_opts.page    | 49 +++++++++++++++
 doc/mongoc_gridfs_find_with_opts.page        | 43 +++++++++++++
 examples/example-gridfs.c                    | 20 +++---
 src/mongoc/mongoc-gridfs-file-list-private.h |  9 ++-
 src/mongoc/mongoc-gridfs-file-list.c         | 22 +++++++
 src/mongoc/mongoc-gridfs.c                   | 43 +++++++++++--
 src/mongoc/mongoc-gridfs.h                   | 17 ++++-
 tests/test-mongoc-gridfs.c                   | 93 ++++++++++++++++++++++++----
 11 files changed, 284 insertions(+), 35 deletions(-)

commit 168abfd2742f16bb1036199a56e521ba5334b04b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 7 06:07:34 2016 -0500

    CDRIVER-1872 fix mongos cursor_set_hint logic

 src/mongoc/mongoc-cursor.c | 17 +++++------------
 tests/test-mongoc-cursor.c | 12 ++++++++----
 2 files changed, 13 insertions(+), 16 deletions(-)

commit 64ff8f8d8ed132dcccc5a39ac1eb4ebccd39783d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 7 14:28:04 2016 -0500

    include version.xml in tarball

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c5b95c7a5b88791f31b22061c1858c7c4b047980
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 7 15:32:12 2016 -0800

    CDRIVER-1901 Structurally dead code

 src/mongoc/mongoc-handshake.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b36a8d8d555414ad670997114547ebc8a28bddb7
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 7 15:31:36 2016 -0800

    CDRIVER-1897 Logically dead code

 examples/example-scram.c | 13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)

commit 9863d62f1c6bab2c4467236ad6dc0a57083105cd
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 7 15:28:52 2016 -0800

    CDRIVER-671 Build against system provided libbson

 .evergreen/compile-unix.sh | 31 ++++++++++++++++++++++++++++---
 1 file changed, 28 insertions(+), 3 deletions(-)

commit 3349d54c9d03b1db5ec1a900ca4ba0e345d7ea41
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 5 14:22:32 2016 -0400

    CDRIVER-1898 crash in mongoc_client_kill_cursor
    
    If an APM "command started" callback is registered, the null database
    and collection names from mongoc_client_kill_cursor causes a crash.

 src/mongoc/mongoc-client.c             | 33 +++++++++++++++++----------------
 tests/test-mongoc-command-monitoring.c | 34 +++++++++++++++++++++++++++++++++-
 2 files changed, 50 insertions(+), 17 deletions(-)

commit 97d228aad15abf44ee1ff2023d01f1f733f50568
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 1 13:41:58 2016 -0400

    CDRIVER-1528 deprecate mongoc_collection_find

 NEWS                                          |  3 ++
 doc/mongoc_collection_find.page               |  5 ++-
 doc/mongoc_collection_find_with_opts.page     |  2 +-
 doc/mongoc_cursor_set_max_await_time_ms.page  |  2 +-
 doc/mongoc_cursors.page                       |  3 +-
 doc/mongoc_errors.page                        |  2 +-
 doc/mongoc_finding_document.page              |  8 ++---
 doc/mongoc_gridfs_file_list_t.page            |  2 +-
 doc/mongoc_tutorial.page                      |  4 +--
 examples/basic_aggregation/map-reduce-basic.c |  4 +--
 examples/example-client.c                     | 12 +++----
 examples/example-scram.c                      |  2 +-
 examples/mongoc-dump.c                        |  3 +-
 examples/mongoc-tail.c                        | 25 +++++++-------
 src/mongoc/mongoc-collection.c                |  6 ++--
 src/mongoc/mongoc-collection.h                |  4 ++-
 src/mongoc/mongoc-database.c                  | 14 +++++---
 src/mongoc/mongoc-gridfs-file-list.c          | 10 ++++--
 src/mongoc/mongoc-gridfs-file.c               | 47 +++++++++++++--------------
 src/mongoc/mongoc-gridfs.c                    |  8 +++--
 tests/test-bulk.c                             | 32 +++---------------
 tests/test-load.c                             |  2 +-
 tests/test-mongoc-client.c                    | 33 +++++--------------
 tests/test-mongoc-cluster.c                   |  6 ++--
 24 files changed, 106 insertions(+), 133 deletions(-)

commit 02cf6fd99d88242368062e3f7144d312ec190a6f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Nov 4 12:52:37 2016 -0700

    Improve debugging

 src/mongoc/mongoc-openssl.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit b97a6500e01e2b364e2bdaec345dec9f4d8974c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 4 12:09:25 2016 -0400

    remove_all_users docs typo

 doc/mongoc_database_remove_all_users.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 53a43737e29c2870459ff5ee986caa12a384d368
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 2 22:57:06 2016 -0400

    CDRIVER-1902 reset round trip time on error
    
    After a server description is invalidated (typically from a socket hangup
    during an application operation), its RTT should be reset. The next time we
    successfully connect to it, the new RTT begins a new series of moving averages.
    
    The Server Discovery And Monitoring Spec says about a server description, "if
    it changes from a known type to Unknown its RTT is set to null."
    
    The C Driver instead records an RTT of 0 and factors this into the moving
    average. Therefore, a server that we have failed to reach for the last few
    checks and then successfully connected to, appears to have a very low latency
    and it is preferred for reads.

 src/mongoc/mongoc-server-description.c | 4 ++++
 tests/test-mongoc-topology.c           | 4 ++++
 2 files changed, 8 insertions(+)

commit dda634be970f9168ad899c1cc6ff75bf8d111f99
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 2 20:44:59 2016 -0400

    show version in html docs

 build/libmongoc.xsl | 15 +++++++++++++++
 build/version.xml   |  3 +++
 2 files changed, 18 insertions(+)

commit 83f41579f628afd95dbf3d2ca55320c29f5f0d30
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 3 11:29:56 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dcaaeebbc774deddd40d593b60f7eba970193f25
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 3 11:14:37 2016 -0400

    1.5.0-rc4 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS            | 9 ++++++++-
 VERSION_CURRENT | 2 +-
 2 files changed, 9 insertions(+), 2 deletions(-)

commit 785981bcd84146d7e22ae800c71bb0f0454b4c97
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 3 11:17:37 2016 -0400

    CDRIVER-1424 fix make distcheck when doc/html/ exists

 doc/html/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c77271eeee3cafdbd9ec9f68dea9c2e97294a0e9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 3 10:32:01 2016 -0400

    bump libbson to 1.5.0-rc4

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f51a9eb050a80012fffd42a5c39e054f59bf2b14
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 16:20:48 2016 -0700

    Unpack the release archive appropriately

 .evergreen/compile-unix-cmake.sh | 7 +++++++
 1 file changed, 7 insertions(+)

commit 3427c158404eb34b952208d5edb3d08909ba9aec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 2 22:49:38 2016 -0400

    Revert "CDRIVER-1896 assignment in assert"
    
    37b92878ae3df4465dbb7bf41b3e32a5d4d58319

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3ada537e56bfe39093f3db5b02b94945f44452f8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 2 18:40:26 2016 -0400

    rename libbson.xsl to libmongoc.xsl
    
    The file now does more than just customizing links to libbson's docs.

 build/libbson.xsl    | 78 ----------------------------------------------------
 build/libmongoc.xsl  | 78 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 doc/Makefile.am      |  2 +-
 doc/html/Makefile.am |  2 +-
 4 files changed, 80 insertions(+), 80 deletions(-)

commit 5dee552deb51a5b5f6f036efc2c1785b3919e01b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 2 09:49:44 2016 -0400

    add internal-link anchors to HTML docs

 build/libbson.xsl | 55 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 55 insertions(+)

commit 523f7d5cc115cb60ba597642812f04c9f15199b1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 15:33:29 2016 -0700

    Fix build on MSVC 2013

 CMakeLists.txt | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 5179afdeced9e2ec12a1994692f4f4fb81e975c6
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 14:41:08 2016 -0700

    Workaround coverity limitation
    
    Coverity has a problem with these static assertions so they need
    to be disabled, but disabling them makes coverity confused
    about this multi line dangling expression. Make it a single line, and it
    works

 src/mongoc/mongoc-rpc-private.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit d86ebaa820847b2ac7f416b78011da3a6ee73319
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 14:06:21 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ed4d37eaf824514ad57346aa344eee6975a5260a
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 10:36:15 2016 -0700

    CDRIVER-666 cmake build & test in Evergreen

 .evergreen/compile-unix-cmake.sh | 36 ++++++++++++++++++++++++++++++++++++
 .evergreen/compile.sh            |  6 +++++-
 .evergreen/config.yml            | 18 ++++++++++++++++++
 CMakeLists.txt                   |  6 +++++-
 4 files changed, 64 insertions(+), 2 deletions(-)

commit d0ba7892766197a83d976a5149c483934023be15
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 09:36:24 2016 -0700

    CDRIVER-1424 Fixed distcheck

 .evergreen/config.yml                  |  5 ++++-
 Makefile.am                            |  1 +
 doc/html/Makefile.am                   |  3 ++-
 tests/Makefile.am                      |  6 +++++-
 tests/TestSuite.h                      |  8 +++++++-
 tests/test-mongoc-command-monitoring.c |  5 ++---
 tests/test-mongoc-max-staleness.c      |  7 +++----
 tests/test-mongoc-sdam-monitoring.c    |  2 +-
 tests/test-mongoc-sdam.c               | 20 ++++++++------------
 tests/test-mongoc-server-selection.c   | 10 ++++------
 10 files changed, 37 insertions(+), 30 deletions(-)

commit 13be1f67c5329e86e5c7939d080848564abfa1fd
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 09:35:09 2016 -0700

    Enable evergreen to automatically stepback to determin where task first failed

 .evergreen/config.yml | 1 +
 1 file changed, 1 insertion(+)

commit 6f605ed0cf6b7fad389fc543a2256bb7d2b1c5d3
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 2 08:08:07 2016 -0700

    CDRIVER-604: make dist should generate html and man pages

 doc/Makefile.am      |  3 ++-
 doc/html/Makefile.am | 10 ++++++----
 doc/man/Makefile.am  |  8 ++++----
 3 files changed, 12 insertions(+), 9 deletions(-)

commit 37b92878ae3df4465dbb7bf41b3e32a5d4d58319
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 2 15:29:59 2016 -0400

    CDRIVER-1896 assignment in assert

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b368746aa6a64fcdc49af61e287af383c5abe31c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 1 11:15:17 2016 -0400

    CDRIVER-1885 don't send slaveok to primary after mongoc_cursor_set_hint

 src/mongoc/mongoc-cursor.c |  60 +++++++++++++-------------
 tests/test-mongoc-cursor.c | 103 ++++++++++++++++++++++++++++-----------------
 2 files changed, 93 insertions(+), 70 deletions(-)

commit 382b247e0e4345c6879f5a2a557ed4177031e31c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 1 10:59:42 2016 -0400

    CDRIVER-562 topology code refactoring

 src/mongoc/mongoc-topology.c | 49 +++++++++++++++++++++++++++-----------------
 1 file changed, 30 insertions(+), 19 deletions(-)

commit d6d06fe4b50f95d573749842f16a09a141fb5bed
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 1 15:12:51 2016 -0400

    CDRIVER-1893 localThresholdMS calc'ed in usec
    
    This was discovered while reading the code. The topology scanner sets each
    server's round trip time in microseconds, then compares the round trip time to
    localThresholdMS, which is specified in milliseconds (default 15ms).
    
    In theory, this means that when the driver is doing secondary reads, it ignores
    a member that is even 15 microseconds higher-latency than the nearest
    secondary.
    
    In practice, I believe the behavior is this: the driver always reads from the
    lowest-latency member matching the read preference, instead of the specified
    behavior of reading from the lowest-latency member and all members not more
    than 15ms higher-latency. But in many users' replica sets, secondaries have
    similar latencies. Which secondary is lowest-latency varies from one scan to
    the next, so the driver accidentally distributes reads reasonably evenly.

 NEWS                                           |  4 ++-
 src/mongoc/mongoc-async-cmd.c                  |  8 ++---
 src/mongoc/mongoc-async.c                      |  2 +-
 src/mongoc/mongoc-server-description-private.h |  4 +--
 src/mongoc/mongoc-server-description.c         | 19 +++++------
 src/mongoc/mongoc-topology-description.c       |  8 +++--
 src/mongoc/mongoc-topology.c                   |  4 +--
 tests/json-test.c                              |  2 +-
 tests/test-mongoc-server-selection.c           |  4 +--
 tests/test-mongoc-topology.c                   | 44 ++++++++++++++++++++++++++
 10 files changed, 74 insertions(+), 25 deletions(-)

commit 71a50491f2acd319f47cd0264bdcc48b17af8bfc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 1 14:03:36 2016 -0400

    CDRIVER-1477 log and abort if scanner thread fails

 NEWS                         |  2 ++
 src/mongoc/mongoc-topology.c | 12 ++++++++++--
 2 files changed, 12 insertions(+), 2 deletions(-)

commit 7ebc93a2e71134af81750bc82902a5c9e0913d11
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 1 11:01:42 2016 -0400

    CDRIVER-1751 fix merge error in collation test

 tests/test-mongoc-collection-find-with-opts.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 72e907d6400d2e591643a4df76300ec63c3266cf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 31 12:12:00 2016 -0400

    CDRIVER-562 Update topology from handshake reply.

 src/mongoc/mongoc-cluster.c                      |  43 ++++----
 src/mongoc/mongoc-topology-description-private.h |   2 +-
 src/mongoc/mongoc-topology-description.c         |  25 ++---
 src/mongoc/mongoc-topology-private.h             |   4 +
 src/mongoc/mongoc-topology.c                     |  70 ++++++++++---
 tests/json-test.c                                |   3 +-
 tests/test-mongoc-collection-find-with-opts.c    |   4 -
 tests/test-mongoc-collection.c                   |   5 +-
 tests/test-mongoc-topology-description.c         |   4 +-
 tests/test-mongoc-topology.c                     | 123 +++++++++++++++++++++++
 10 files changed, 217 insertions(+), 66 deletions(-)

commit 7df7db642aa7d17a4ef873884887c21749311db1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 29 09:46:21 2016 -0400

    CDRIVER-1890 test resetting APM callbacks

 tests/test-libmongoc.c                 |   8 ++
 tests/test-libmongoc.h                 |   1 +
 tests/test-mongoc-command-monitoring.c | 171 +++++++++++++++++++++++++++++++++
 3 files changed, 180 insertions(+)

commit 7a38713ffaf91ed6f1687b123b84ad38cb096b3b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 29 09:25:09 2016 -0400

    typo in test framework helper-function name

 tests/test-libmongoc.c         | 8 ++++----
 tests/test-libmongoc.h         | 8 ++++----
 tests/test-mongoc-client.c     | 2 +-
 tests/test-mongoc-collection.c | 4 ++--
 tests/test-mongoc-cursor.c     | 8 ++++----
 tests/test-write-commands.c    | 2 +-
 6 files changed, 16 insertions(+), 16 deletions(-)

commit 1e0a6d84ec61d1bb3427ffa6861802d092e40ae4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 28 17:02:28 2016 -0400

    CDRIVER-1890 allow resetting APM callbacks

 doc/mongoc_client_set_apm_callbacks.page | 3 +--
 src/mongoc/mongoc-client-private.h       | 1 -
 src/mongoc/mongoc-client.c               | 8 ++------
 tests/test-mongoc-command-monitoring.c   | 7 ++-----
 4 files changed, 5 insertions(+), 14 deletions(-)

commit 431b209d1575eebdffb0743bb611434930f6ca0c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 23 08:57:07 2016 -0400

    CDRIVER-562 clarify data flow in mongoc_cluster_t

 src/mongoc/mongoc-cluster-private.h              |   1 +
 src/mongoc/mongoc-cluster.c                      | 368 +++++++++++++----------
 src/mongoc/mongoc-collection.c                   |  46 ++-
 src/mongoc/mongoc-cursor.c                       |   2 +-
 src/mongoc/mongoc-server-description-private.h   |   2 +-
 src/mongoc/mongoc-server-description.c           |  34 ++-
 src/mongoc/mongoc-topology-description-private.h |   4 +-
 src/mongoc/mongoc-topology-description.c         |  23 +-
 src/mongoc/mongoc-topology-private.h             |  13 +-
 src/mongoc/mongoc-topology-scanner-private.h     |  10 +-
 src/mongoc/mongoc-topology.c                     | 116 +++++--
 tests/json-test.c                                |   4 +-
 tests/test-mongoc-client.c                       |  10 +-
 tests/test-mongoc-collection-find-with-opts.c    |  12 +-
 tests/test-mongoc-collection.c                   |   8 +-
 tests/test-mongoc-cursor.c                       |  60 ++++
 tests/test-mongoc-topology-description.c         |   5 +-
 tests/test-mongoc-topology-scanner.c             |  10 +-
 tests/test-mongoc-topology.c                     |   4 +-
 19 files changed, 475 insertions(+), 257 deletions(-)

commit c052c9a481c6a85f8d8f9e02ae1559b623a95dc1
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 28 11:18:37 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b96abc3a2a7a20b9827ba4f5ddca86a0fc8463e5
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 27 10:32:40 2016 -0700

    CDRIVER-1871: Duplicate write and readConcern

 src/mongoc/mongoc-client.c | 25 +++++++++++--------------
 tests/test-mongoc-client.c | 16 ++++++++++++++++
 2 files changed, 27 insertions(+), 14 deletions(-)

commit 3b0d74ff951d559791fd4715e7cf263f6993c5c8
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 27 11:28:56 2016 -0700

    CDRIVER-1751: Error client side when find doesn't support collation

 src/mongoc/mongoc-cursor-private.h            |  2 ++
 src/mongoc/mongoc-cursor.c                    | 39 ++++++++++++++++++++-------
 tests/test-libmongoc.c                        |  2 +-
 tests/test-mongoc-collection-find-with-opts.c | 33 +++++++++++++++++++++++
 4 files changed, 65 insertions(+), 11 deletions(-)

commit 971392d383dfcca9ba0f50f149fc1ffe89f1cadc
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 27 11:36:46 2016 -0700

    CDRIVER-1701 Remove useless clutter from configure output

 configure.ac | 1 -
 1 file changed, 1 deletion(-)

commit ddb20fd9053d236fa4605494a3eb3727da3e1da5
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 27 13:00:01 2016 -0700

    CDRIVER-1699 Document lifetime expectations

 doc/mongoc_find_and_modify_opts_append.page     | 1 +
 doc/mongoc_find_and_modify_opts_set_fields.page | 1 +
 doc/mongoc_find_and_modify_opts_set_sort.page   | 1 +
 doc/mongoc_find_and_modify_opts_set_update.page | 1 +
 4 files changed, 4 insertions(+)

commit 8d9c8219a5e2aa789bdf4f2782917b0e05420255
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 27 10:36:03 2016 -0700

    CDRIVER-1866 Remove forgotten manpages, these are called _get_server_id () now.

 doc/mongoc_apm_command_failed_get_hint.page    | 39 --------------------------
 doc/mongoc_apm_command_started_get_hint.page   | 39 --------------------------
 doc/mongoc_apm_command_succeeded_get_hint.page | 39 --------------------------
 3 files changed, 117 deletions(-)

commit 594764260d21afb04e2a4b02a7511818c54d0513
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 26 12:12:23 2016 -0400

    CDRIVER-1886 add mongoc_cursor_sent

 NEWS                        |  2 ++
 doc/mongoc_cursor_sent.page | 33 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-cursor.c  |  9 +++++++++
 src/mongoc/mongoc-cursor.h  |  2 ++
 tests/test-mongoc-cursor.c  | 25 +++++++++++++++++++++++++
 5 files changed, 71 insertions(+)

commit 6d9536fbf4b26b059404ea82123b4f1a9b674c87
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 26 10:02:47 2016 -0700

    CDRIVER-1869 Fix MongoDB 2.4 compatability

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5071c98688c5e8e841261fcf14e7fb3ffc477f9a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 24 18:12:58 2016 -0400

    CDRIVER-1569 better network errors from scanner

 src/mongoc/mongoc-async.c            | 22 ++++++++++++++++++++++
 src/mongoc/mongoc-buffer.c           | 15 +++++++--------
 src/mongoc/mongoc-cluster.c          | 25 ++++---------------------
 src/mongoc/mongoc-stream-buffered.c  |  4 +---
 tests/test-bulk.c                    |  5 +++--
 tests/test-mongoc-client.c           | 17 +++++++----------
 tests/test-mongoc-cluster.c          | 11 ++++-------
 tests/test-mongoc-exhaust.c          |  4 ++--
 tests/test-mongoc-topology-scanner.c | 12 ++++++------
 9 files changed, 56 insertions(+), 59 deletions(-)

commit 96fed722bd1313b7c8c1ef2770eae09c9ce0b67b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 24 18:38:54 2016 -0400

    CDRIVER-1872 don't use slaveok with mongos after mongoc_cursor_set_hint

 src/mongoc/mongoc-cursor-private.h |  1 +
 src/mongoc/mongoc-cursor.c         | 16 +++++--
 tests/test-mongoc-cursor.c         | 90 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 104 insertions(+), 3 deletions(-)

commit 330de0359039c5f1a60323a778f5d3203dfaf370
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 24 14:34:32 2016 -0700

    Fix various leaks in tests

 tests/test-bulk.c                        |  7 +++++++
 tests/test-mongoc-client.c               |  2 ++
 tests/test-mongoc-collection.c           |  9 ++++++++-
 tests/test-mongoc-cursor.c               |  2 --
 tests/test-mongoc-linux-distro-scanner.c |  2 ++
 tests/test-mongoc-max-staleness.c        |  7 ++++---
 tests/test-mongoc-uri.c                  |  2 ++
 tests/test-write-commands.c              | 22 ++++++++++++++++------
 8 files changed, 41 insertions(+), 12 deletions(-)

commit 963802090e858e1d6b13e27710082d62affcaf01
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 24 14:34:40 2016 -0700

    CDRIVER-1884 ignore test suite leaks

 valgrind.suppressions | 8 ++++++++
 1 file changed, 8 insertions(+)

commit c67b81ef117019813ff34dd6857e6cb891f9ac83
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 24 17:03:19 2016 -0700

    CDRIVER-1882 mongoc_client_new () leaks on failure

 src/mongoc/mongoc-client.c | 3 +++
 1 file changed, 3 insertions(+)

commit 5eddde2f43c10731e4f11cf869c22f7dcc07df76
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 24 14:28:29 2016 -0700

    CDRIVER-1881 2 memory leaks in mongoc_collection_create_index_with_opts

 src/mongoc/mongoc-collection.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit d8206ebd6fab9b7b3f9dffacc23a7de6d052d716
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 21 15:58:44 2016 -0700

    CDRIVER-747: Run the test suite through valgrind

 .evergreen/config.yml | 1 +
 tests/Makefile.am     | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 1dca4603e208a0d494f1a8a7396a5d5342b0f97e
Author: Brian McCarthy <brian.mccarthy@mongodb.com>
Date:   Tue Oct 25 07:08:52 2016 -0400

    BUILD-2286 Update benchmark.yml refactor mongod startup

 .evergreen/benchmark.yml | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

commit b6c1cfae281fbe6f9bd35a75d106c6919a4316c7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 20 15:53:39 2016 -0400

    CDRIVER-1844 add "serverId" opt to command funcs

 doc/mongoc_client_read_command_with_opts.page      |   1 +
 ...mongoc_client_read_write_command_with_opts.page |   1 +
 doc/mongoc_client_write_command_with_opts.page     |   1 +
 doc/mongoc_collection_aggregate.page               |   1 +
 doc/mongoc_collection_find_with_opts.page          |   1 +
 doc/mongoc_collection_read_command_with_opts.page  |   1 +
 ...oc_collection_read_write_command_with_opts.page |   1 +
 doc/mongoc_collection_write_command_with_opts.page |   1 +
 doc/mongoc_database_read_command_with_opts.page    |   1 +
 ...ngoc_database_read_write_command_with_opts.page |   1 +
 doc/mongoc_database_write_command_with_opts.page   |   1 +
 src/mongoc/mongoc-client-private.h                 |   2 +-
 src/mongoc/mongoc-client.c                         |  53 +++--
 src/mongoc/mongoc-collection.c                     |  39 +++-
 src/mongoc/mongoc-cursor.c                         |  16 +-
 src/mongoc/mongoc-util-private.h                   |  10 +-
 src/mongoc/mongoc-util.c                           |  41 ++++
 tests/test-libmongoc.c                             |  15 ++
 tests/test-libmongoc.h                             |   1 +
 tests/test-mongoc-client.c                         | 134 ++++++++++-
 tests/test-mongoc-collection-find-with-opts.c      | 244 +++++++++++++++++++++
 tests/test-mongoc-collection.c                     | 141 ++++++++++++
 22 files changed, 674 insertions(+), 33 deletions(-)

commit dbea527d33e739352882ebfeb6f19a3640ec00fd
Author: Brian McCarthy <brian.mccarthy@mongodb.com>
Date:   Mon Oct 24 08:55:37 2016 -0400

    BUILD-2286 Update benchmark.yml for mongo-c-driver-perf project

 .benchmark.yml           | 217 ------------------------------------
 .evergreen/benchmark.yml | 283 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 283 insertions(+), 217 deletions(-)

commit 972e3970d30d05a2cf4909075cc5125f0ff49049
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 22 12:37:54 2016 -0400

    CDRIVER-1527 git ignore example-command-with-opts

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit cf80a36794a15a3bb76910727d5c15690b671b01
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 21 11:21:51 2016 -0400

    CDRIVER-1697 explicitly document write concern err

 doc/mongoc_bulk_operation_execute.page               |  1 +
 doc/mongoc_client_command.page                       |  2 +-
 doc/mongoc_client_command_simple.page                |  1 +
 doc/mongoc_client_command_simple_with_server_id.page |  1 +
 doc/mongoc_collection_command.page                   | 13 +++----------
 doc/mongoc_collection_command_simple.page            |  2 +-
 doc/mongoc_collection_delete.page                    |  1 +
 doc/mongoc_collection_find_and_modify.page           |  1 +
 doc/mongoc_collection_find_and_modify_with_opts.page |  1 +
 doc/mongoc_collection_insert.page                    |  1 +
 doc/mongoc_collection_insert_bulk.page               |  1 +
 doc/mongoc_collection_save.page                      |  1 +
 doc/mongoc_collection_update.page                    |  1 +
 doc/mongoc_database_command.page                     | 14 +++-----------
 doc/mongoc_database_command_simple.page              |  1 +
 doc/mongoc_write_concern_t.page                      | 12 +++++++++++-
 16 files changed, 30 insertions(+), 24 deletions(-)

commit 466cd53acaa6651731b182b4a269ac83058d21e6
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 20 15:17:08 2016 -0700

    CDRIVER-1873 mongoc_collection_aggregate() leaks mongoc_[read|write]_concern_t

 src/mongoc/mongoc-collection.c | 2 ++
 1 file changed, 2 insertions(+)

commit 0ca49ad05074950f128192f4e5866f325cb6819a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 20 03:35:44 2016 -0400

    CDRIVER-1527 don't call "insert" etc. with mongoc_client_write_command_with_opts

 doc/mongoc_client_write_command_with_opts.page     | 7 ++++++-
 doc/mongoc_collection_write_command_with_opts.page | 7 ++++++-
 doc/mongoc_database_write_command_with_opts.page   | 7 ++++++-
 3 files changed, 18 insertions(+), 3 deletions(-)

commit b9b66212cad92e2f45906ee8ae7a1797575a2c40
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 20 03:13:00 2016 -0400

    CDRIVER-1527 whitespace in command func docs

 doc/mongoc_client_read_write_command_with_opts.page | 14 +++++++-------
 doc/mongoc_client_write_command_with_opts.page      | 12 ++++++------
 2 files changed, 13 insertions(+), 13 deletions(-)

commit 5c44591ad0645075273fc7520062a2910ad63742
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 19 23:03:37 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c5d211e040210c0b476f7206cddd2b5c9e87eb51
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 19 22:54:07 2016 -0400

    1.5.0-rc3 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS            | 54 +++++++++++++++++++++++++++++++++++++++++++++++-------
 VERSION_CURRENT |  2 +-
 2 files changed, 48 insertions(+), 8 deletions(-)

commit 65c33f1a2918852350aa3d0009055a7e83dc0e24
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 19 22:46:43 2016 -0400

    bump libbson to 1.5.0-rc3

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8095e0274c27e3d7df455eb4adadef76fded4b8b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 19 17:19:14 2016 -0700

    CDRIVER-1868 Fix typo/syntax error

 doc/mongoc_collection_find.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9bbc314eeebbc8f975628c74c3199721bf26ab56
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 19 17:26:45 2016 -0400

    CDRIVER-1551 use BAD_WIRE_VERSION for collation errs

 src/mongoc/mongoc-client.c          | 2 +-
 src/mongoc/mongoc-collection.c      | 4 ++--
 src/mongoc/mongoc-write-command.c   | 2 +-
 tests/test-bulk.c                   | 4 ++--
 tests/test-mongoc-collection.c      | 4 ++--
 tests/test-mongoc-find-and-modify.c | 2 +-
 6 files changed, 9 insertions(+), 9 deletions(-)

commit 8dbce234c2c41765ef6722020dc5cfeab760ed76
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 19 19:24:43 2016 -0400

    redundant mongoc_read_concern_append decl

 src/mongoc/mongoc-read-concern-private.h | 2 --
 1 file changed, 2 deletions(-)

commit 8bcf168ce366e6eec0cd23ac9c6d2fec8ac0fb59
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 19 16:51:21 2016 -0400

    unused variable in test

 tests/test-bulk.c | 1 -
 1 file changed, 1 deletion(-)

commit adfff3aa7fadd61063f82d6c0e5d35d655552d74
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 14 11:30:44 2016 -0700

    CDRIVER-1704 Aggregate should apply collection [read|write]Concern if not in opts

 src/mongoc/mongoc-client-private.h       |   7 +-
 src/mongoc/mongoc-client.c               |  94 ++++++++++++--------
 src/mongoc/mongoc-collection.c           | 101 +++++++++------------
 src/mongoc/mongoc-cursor.c               |   6 ++
 src/mongoc/mongoc-read-concern-private.h |   2 +
 src/mongoc/mongoc-read-concern.c         |   4 +
 tests/test-mongoc-collection.c           | 147 +++++++++++++++++++++++++++++++
 7 files changed, 261 insertions(+), 100 deletions(-)

commit eb64540631ab2dde2b8b4885a505dc648cab9cdc
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 18 15:14:16 2016 -0700

    CDRIVER-1853 _mongoc_write_concern_iter_is_valid fails with write concern "majority"

 src/mongoc/mongoc-write-concern.c | 11 ++++----
 tests/test-mongoc-write-concern.c | 55 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 61 insertions(+), 5 deletions(-)

commit d1c74abeee1be66f7608507eec12926e9205589b
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 18 10:56:23 2016 -0700

    CDRIVER-1779 fam+collation should error if max_wire_version<5

 src/mongoc/mongoc-collection.c      | 17 ++++-----
 tests/test-mongoc-find-and-modify.c | 72 +++++++++++++++++++++++++++++++++++++
 2 files changed, 81 insertions(+), 8 deletions(-)

commit 3e34af30faca57e014044e0a3b7ca8f3460991df
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 3 14:54:52 2016 -0400

    CDRIVER-1527 new command funcs with bson_t opts

 CMakeLists.txt                                     |   1 +
 NEWS                                               |  20 ++
 build/generate-future-functions.py                 |  30 ++
 doc/mongoc_client_command.page                     |   2 +-
 doc/mongoc_client_command_simple.page              |   2 +-
 doc/mongoc_client_read_command_with_opts.page      |  60 ++++
 ...mongoc_client_read_write_command_with_opts.page |  62 ++++
 doc/mongoc_client_write_command_with_opts.page     |  59 ++++
 doc/mongoc_collection_command.page                 |   1 +
 doc/mongoc_collection_command_simple.page          |   2 +-
 doc/mongoc_collection_count_with_opts.page         |   2 +-
 doc/mongoc_collection_create_index_with_opts.page  |   7 +-
 doc/mongoc_collection_drop_index_with_opts.page    |  11 +-
 doc/mongoc_collection_drop_with_opts.page          |   9 +-
 doc/mongoc_collection_read_command_with_opts.page  |  58 ++++
 ...oc_collection_read_write_command_with_opts.page |  60 ++++
 doc/mongoc_collection_rename_with_opts.page        |  14 +-
 doc/mongoc_collection_write_command_with_opts.page |  57 ++++
 doc/mongoc_database_command.page                   |   1 +
 doc/mongoc_database_command_simple.page            |   3 +-
 doc/mongoc_database_drop_with_opts.page            |   9 +-
 doc/mongoc_database_read_command_with_opts.page    |  58 ++++
 ...ngoc_database_read_write_command_with_opts.page |  60 ++++
 doc/mongoc_database_write_command_with_opts.page   |  58 ++++
 doc/mongoc_read_concern_append.page                |  44 +++
 doc/mongoc_write_concern_append.page               |  21 +-
 examples/Makefile.am                               |   5 +
 examples/doc-common-insert.c                       |   2 +-
 examples/example-client.c                          |   2 +-
 examples/example-command-with-opts.c               | 131 +++++++++
 src/mongoc/mongoc-client-private.h                 |  33 ++-
 src/mongoc/mongoc-client.c                         | 184 +++++++++---
 src/mongoc/mongoc-client.h                         |  23 ++
 src/mongoc/mongoc-collection.c                     | 114 +++++++-
 src/mongoc/mongoc-collection.h                     |  23 ++
 src/mongoc/mongoc-cursor.c                         |  14 +-
 src/mongoc/mongoc-database.c                       |  69 ++++-
 src/mongoc/mongoc-database.h                       |  23 ++
 src/mongoc/mongoc-read-concern-private.h           |   3 +-
 src/mongoc/mongoc-read-concern.c                   |  43 ++-
 src/mongoc/mongoc-read-concern.h                   |   3 +
 src/mongoc/mongoc-rpc.c                            |   5 +-
 src/mongoc/mongoc-write-concern-private.h          |   2 +-
 src/mongoc/mongoc-write-concern.c                  |   4 +-
 tests/mock_server/future-functions.c               | 184 ++++++++++++
 tests/mock_server/future-functions.h               |  38 +++
 tests/mock_server/future-value.c                   |  14 +
 tests/mock_server/future-value.h                   |  12 +
 tests/mock_server/future.c                         |  12 +
 tests/mock_server/future.h                         |   3 +
 tests/test-mongoc-client.c                         | 315 ++++++++++++++++++---
 51 files changed, 1815 insertions(+), 157 deletions(-)

commit f306c1b11c6c3156462972f9b19319a00683359b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 28 22:29:18 2016 -0400

    CDRIVER-1551 err code for collation and old server

 src/mongoc/mongoc-client.c     | 2 +-
 tests/test-mongoc-collection.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 307daaa568392aa2e9dfcbc75ebfbd7075027086
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 18 11:11:31 2016 -0700

    CDRIVER-1802: Improve error message

 src/mongoc/mongoc-bulk-operation.c |  4 ++--
 tests/test-bulk.c                  | 28 ++++++++++++++++++++++++++++
 2 files changed, 30 insertions(+), 2 deletions(-)

commit 5ef423c17126879b5618d23a4fe51f611cd7e0df
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 18 11:58:33 2016 -0700

    CDRIVER-1691 /dev/shm/mongoc-${PID} is created in an insecure manner

 src/mongoc/mongoc-counters.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f36c20c51fe52aac49d962bda0c718bf3b7da064
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 14 15:32:35 2016 -0400

    CDRIVER-662 consistent errs from CRUD functions.
    
    mongoc_collection_insert, mongoc_collection_update, and
    mongoc_collection_remove consistently use domain MONGOC_ERROR_BSON, code
    MONGOC_ERROR_BSON_INVALID if passed oversized BSON, and
    MONGOC_ERROR_COLLECTION for other errors.
    
    mongoc_bulk_operation_execute continues to use MONGOC_ERROR_COMMAND for
    all errors.

 NEWS                                      |   5 ++
 doc/mongoc_errors.page                    |   2 +-
 src/mongoc/mongoc-bulk-operation.c        |   1 +
 src/mongoc/mongoc-collection.c            |   7 ++
 src/mongoc/mongoc-write-command-private.h |   1 +
 src/mongoc/mongoc-write-command.c         | 133 ++++++++++++++++++------------
 tests/test-bulk.c                         |  96 ++-------------------
 tests/test-conveniences.c                 |  62 ++++++++++++++
 tests/test-conveniences.h                 |   8 ++
 tests/test-mongoc-collection.c            | 126 +++++++++++++++++++++++++---
 tests/test-write-commands.c               |   5 +-
 11 files changed, 289 insertions(+), 157 deletions(-)

commit 28dad160051462eee3c2fcd92bce3af9785c283b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 12 22:42:36 2016 -0400

    CDRIVER-852 document that gridfs timeout is unused

 doc/mongoc_gridfs_file_readv.page  |  4 ++--
 doc/mongoc_gridfs_file_writev.page |  4 ++--
 src/mongoc/mongoc-gridfs-file.c    | 12 ++++--------
 3 files changed, 8 insertions(+), 12 deletions(-)

commit 4f6ee21a8f7ddf917ab9656fb253a4f8385100a4
Merge: ccbbf24 fdf7c4f
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Fri Oct 14 06:31:15 2016 -0700

    Merge pull request #402 from remicollet/issue-1703
    
    CDRIVER-1703 missing files in archive

commit ccbbf24464df4dbfe2bac9ced9ecd9bfc19d8342
Merge: 7d1562b a021ada
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Fri Oct 14 06:29:46 2016 -0700

    Merge pull request #401 from remicollet/issue-1702
    
    CDRIVER-1702 don't fail when returned platform is truncated

commit fdf7c4f49f0072a31216f17786eac4167b4f2ec6
Author: Remi Collet <fedora@famillecollet.com>
Date:   Fri Oct 14 10:31:26 2016 +0200

    CDRIVER-1703 missing files in archive

 tests/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit a021ada41374b9be9b478252d53a2a199bfdbf7b
Author: Remi Collet <fedora@famillecollet.com>
Date:   Fri Oct 14 09:42:13 2016 +0200

    CDRIVER-1702 don't fail when returned platform is truncated

 tests/test-mongoc-handshake.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 7d1562bd7bdca731bab988407dbb25a0d51d57d0
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 13 10:39:25 2016 -0700

    New ARM64 download urls

 .evergreen/download-mongodb.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5bae13e956f8a4efecf0a6500dce63b7bc957ab1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 12 21:26:52 2016 -0400

    CDRIVER-598 check URI for bad readPreferenceTags

 NEWS                    |  1 +
 src/mongoc/mongoc-uri.c | 33 +++++++++++++++++++++++----------
 tests/test-mongoc-uri.c | 22 ++++++++++++++++------
 3 files changed, 40 insertions(+), 16 deletions(-)

commit 6b1d188bda6eb6cf43afd95baa185b1539c42aba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 23 14:18:31 2016 -0400

    CDRIVER-1557 add THIRD_PARTY_NOTICES file

 Makefile.am         |   4 +-
 THIRD_PARTY_NOTICES | 128 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 131 insertions(+), 1 deletion(-)

commit 5f33f7d78de8c8ff250461ca5d44fe49559efa61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 12 21:00:26 2016 -0400

    CDRIVER-1639 seed the PRNG used to select servers

 NEWS                                             | 1 +
 src/mongoc/mongoc-topology-description-private.h | 1 +
 src/mongoc/mongoc-topology-description.c         | 7 ++++++-
 src/mongoc/mongoc-util-private.h                 | 6 ++++++
 4 files changed, 14 insertions(+), 1 deletion(-)

commit 5a46ba9a2d991c127830665c935835cf215bbd52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 13:27:29 2016 -0400

    CDRIVER-1564 never use PossiblePrimary for query

 NEWS                                                |  1 +
 src/mongoc/mongoc-topology-description.c            |  2 --
 .../ReplicaSetNoPrimary/read/PossiblePrimary.json   | 21 +++++++++++++++++++++
 .../read/PossiblePrimaryNearest.json                | 21 +++++++++++++++++++++
 4 files changed, 43 insertions(+), 2 deletions(-)

commit 70c36ac31afb442aa3ac7e523bb60db231b81892
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 12:08:48 2016 -0400

    CDRIVER-1685 add trace output for server selection

 src/mongoc/mongoc-read-prefs-private.h   |  3 +++
 src/mongoc/mongoc-read-prefs.c           |  6 +++---
 src/mongoc/mongoc-server-description.c   | 10 ++++++++++
 src/mongoc/mongoc-topology-description.c | 29 ++++++++++++++++++++++++++---
 4 files changed, 42 insertions(+), 6 deletions(-)

commit 230bb5c86c846a591fce1ef38dec542b6e89f9e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 11:27:21 2016 -0400

    add CMake option ENABLE_TRACE

 CMakeLists.txt | 5 +++++
 NEWS           | 2 ++
 2 files changed, 7 insertions(+)

commit 971af90ac2883690090f21ebd468904fdeae7b69
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 16:10:41 2016 -0400

    CDRIVER-1692 allow $-ops inside filter/projection

 src/mongoc/mongoc-cursor.c                    | 54 +++++++++++++++++++++------
 tests/test-mongoc-collection-find-with-opts.c | 17 +++++++++
 2 files changed, 59 insertions(+), 12 deletions(-)

commit 99a02373a1f908052e7f1890b09ffab3d41a6274
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 12 11:24:56 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6eb3667c42e295b72020103dbcb2c0a74d9a3799
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 3 10:19:28 2016 -0700

    CDRIVER-1573 _many_with_opts must only allow multi=true/limit=0 or else error

 ...ongoc_bulk_operation_remove_many_with_opts.page |  50 +++
 doc/mongoc_bulk_operation_remove_with_opts.page    |  50 ---
 ...ongoc_bulk_operation_update_many_with_opts.page |  53 +++
 doc/mongoc_bulk_operation_update_with_opts.page    |  53 ---
 src/mongoc/mongoc-bulk-operation.c                 | 373 ++++++++++++++-------
 tests/test-bulk.c                                  |   8 +-
 6 files changed, 355 insertions(+), 232 deletions(-)

commit 68283097da1f7efb887345f84f5fd7312a766bf0
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 3 09:17:45 2016 -0700

    CDRIVER-1573 Rename bulk_operation_[update|remove]_with_opts to bulk_operation_[update|remove]_many_with_opts

 doc/mongoc_bulk_operation_delete.page              |  2 +-
 doc/mongoc_bulk_operation_delete_one.page          |  2 +-
 doc/mongoc_bulk_operation_remove.page              |  2 +-
 doc/mongoc_bulk_operation_remove_one.page          |  2 +-
 ...mongoc_bulk_operation_remove_one_with_opts.page |  2 +-
 doc/mongoc_bulk_operation_remove_with_opts.page    | 12 ++++----
 ...ongoc_bulk_operation_replace_one_with_opts.page |  2 +-
 doc/mongoc_bulk_operation_update.page              |  2 +-
 ...mongoc_bulk_operation_update_one_with_opts.page |  2 +-
 doc/mongoc_bulk_operation_update_with_opts.page    | 14 ++++-----
 examples/bulk/bulk2.c                              |  4 +--
 src/mongoc/mongoc-bulk-operation.c                 | 34 +++++++++++-----------
 src/mongoc/mongoc-bulk-operation.h                 |  4 +--
 tests/test-bulk.c                                  | 10 +++----
 14 files changed, 47 insertions(+), 47 deletions(-)

commit b953656c699ef69ff2082474ba3778eddc1d4d6b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 23:17:23 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e4764d0e195a24cfc699243d089906cebbdce267
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 22:30:56 2016 -0400

    1.5.0-rc2 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 20f55d79d1b65b35eb7c5150f8be4927af88a26e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 22:20:57 2016 -0400

    bump libbson to 1.5.0-rc2

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 66a4364865e6821d8c2960e8f6f46da189595214
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 11 12:38:09 2016 -0700

    CDRIVER-1687 Remove autoIndexId handling

 src/mongoc/mongoc-database.c | 9 ---------
 tests/test-mongoc-database.c | 2 --
 2 files changed, 11 deletions(-)

commit 2d085cf9ca8180a08cfcd8dd05909ab05bf0b430
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 11 11:57:14 2016 -0700

    CDRIVER-1689 Document mongoc_handshake_data_append in the .h, not public doc

 doc/mongoc_handshake_data_append.page | 70 -----------------------------------
 src/mongoc/mongoc-handshake.h         | 55 +++++++++++++++++++++++++++
 2 files changed, 55 insertions(+), 70 deletions(-)

commit cbdd47d7fe223039c4166c42d4afb4d7567ed1e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 06:36:44 2016 -0400

    CDRIVER-703 update mongoc_collection_get_last_error doc

 doc/mongoc_collection_get_last_error.page | 2 +-
 doc/mongoc_collection_insert.page         | 3 +--
 src/mongoc/mongoc-collection.c            | 3 +--
 tests/test-mongoc-collection.c            | 1 -
 4 files changed, 3 insertions(+), 6 deletions(-)

commit 90c72a86fa944a4045cca1ba80bd95d117db99f9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 5 21:05:29 2016 -0400

    CDRIVER-709 add MONGOC_ERROR_DUPLICATE_KEY

 NEWS                              |  1 +
 doc/mongoc_errors.page            |  9 +++++++++
 src/mongoc/mongoc-error.h         |  2 ++
 src/mongoc/mongoc-write-command.c | 14 ++++++++++++++
 tests/test-mongoc-collection.c    | 22 ++++++++++++++++++++++
 5 files changed, 48 insertions(+)

commit 1cf7ef1ea3dda6b720d039a9d7ebc6c1c31101e3
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 11 10:40:03 2016 -0700

    Update NEWS

 NEWS | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit a36dcda79c51ba03474383d13941403933e5f12e
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 10 17:00:52 2016 -0700

    CDRIVER-1574 Remove --enable-hardening

 .evergreen/compile-unix.sh                 |  1 -
 build/autotools/AutoHarden.m4              | 57 ------------------------------
 build/autotools/Optimizations.m4           |  3 ++
 build/autotools/PrintBuildConfiguration.m4 |  1 -
 configure.ac                               |  1 -
 doc/mongoc_installing.page.in              |  1 -
 src/Makefile.am                            |  3 +-
 7 files changed, 4 insertions(+), 63 deletions(-)

commit b855c82daa87fd661776a48c622a907c41ba916d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 11 07:26:37 2016 -0400

    CDRIVER-1144 fix heartbeat started event
    
    We had been skipping the second and later heartbeat started events as
    long as the monitoring connection stayed open.

 src/mongoc/mongoc-topology-scanner.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 44765ab7caae03efc282eba9a982e2b2568c0b58
Merge: 2e5be75 ce64a5b
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Oct 8 15:28:27 2016 -0400

    Merge pull request #399 from jrassi/CDRIVER-1347
    
    CDRIVER-1347 Add missing BSON_API specifier to mongoc_log_set_handler

commit ce64a5b2d5299f221271e5b04e017dca3c9ce473
Author: J. Rassi <rassi@10gen.com>
Date:   Fri Oct 7 17:43:24 2016 -0400

    CDRIVER-1347 Add missing BSON_API specifier to mongoc_log_set_handler

 src/mongoc/mongoc-log.h | 1 +
 1 file changed, 1 insertion(+)

commit 2e5be75bbe12d43cb821c8901a52cef38e54e389
Author: Brian McCarthy <brian.mccarthy@mongodb.com>
Date:   Fri Oct 7 13:30:38 2016 -0400

    BUILD-1924 Add benchmark yml for Evergreen

 .benchmark.yml | 217 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 217 insertions(+)

commit 253fbac5bc25dc834d00b11ccd5d7ed2173d488f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 7 10:26:47 2016 -0700

    docs can be NULL when n_docs is 0

 tests/mock_server/mock-server.c | 1 -
 1 file changed, 1 deletion(-)

commit 91f8ffe40044201fae003745bb976195e764202e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 5 12:55:31 2016 -0700

    CDRIVER-1347 Explicitly export symbols

 CMakeLists.txt                                  | 15 +++---
 src/Makefile.am                                 |  3 +-
 src/mongoc/mongoc-apm.h                         | 67 +++++++++++++++++++++++++
 src/mongoc/mongoc-bulk-operation.h              | 24 +++++++++
 src/mongoc/mongoc-client-pool.h                 | 11 ++++
 src/mongoc/mongoc-client.h                      | 32 ++++++++++++
 src/mongoc/mongoc-collection.h                  | 39 ++++++++++++++
 src/mongoc/mongoc-crypto-cng.h                  |  2 +
 src/mongoc/mongoc-cursor.h                      | 18 +++++++
 src/mongoc/mongoc-database.h                    | 21 ++++++++
 src/mongoc/mongoc-find-and-modify.h             |  9 ++++
 src/mongoc/mongoc-gridfs-file-list.h            |  3 ++
 src/mongoc/mongoc-gridfs-file.h                 | 15 ++++++
 src/mongoc/mongoc-gridfs.h                      | 10 ++++
 src/mongoc/mongoc-handshake.h                   |  1 +
 src/mongoc/mongoc-index.h                       |  6 +++
 src/mongoc/mongoc-init.h                        |  2 +
 src/mongoc/mongoc-log.h                         |  5 ++
 src/mongoc/mongoc-matcher.h                     |  3 ++
 src/mongoc/mongoc-rand.h                        |  3 ++
 src/mongoc/mongoc-read-concern.h                |  5 ++
 src/mongoc/mongoc-read-prefs.h                  | 11 ++++
 src/mongoc/mongoc-server-description.h          |  7 +++
 src/mongoc/mongoc-socket.h                      | 17 +++++++
 src/mongoc/mongoc-ssl.h                         |  1 +
 src/mongoc/mongoc-stream-buffered.h             |  1 +
 src/mongoc/mongoc-stream-file.h                 |  3 ++
 src/mongoc/mongoc-stream-gridfs.h               |  1 +
 src/mongoc/mongoc-stream-socket.h               |  2 +
 src/mongoc/mongoc-stream-tls-libressl.h         |  1 +
 src/mongoc/mongoc-stream-tls-openssl.h          |  1 +
 src/mongoc/mongoc-stream-tls-secure-channel.h   |  1 +
 src/mongoc/mongoc-stream-tls-secure-transport.h |  1 +
 src/mongoc/mongoc-stream-tls.h                  |  6 +++
 src/mongoc/mongoc-stream.h                      | 13 +++++
 src/mongoc/mongoc-topology-description.h        |  4 ++
 src/mongoc/mongoc-uri.h                         | 39 ++++++++++++++
 src/mongoc/mongoc-version-functions.h           |  5 ++
 src/mongoc/mongoc-write-concern.h               | 19 +++++++
 39 files changed, 418 insertions(+), 9 deletions(-)

commit 09da97ac93ee275ebd3f6f2c68f15cfb15dcdad8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 5 11:17:18 2016 -0700

    CDRIVER-1347 Remove static symbol files

 CMakeLists.txt                     |  14 +-
 CONTRIBUTING.md                    |   3 -
 build/autotools/LDVersionScript.m4 |  55 -----
 build/autotools/versions.ldscript  | 429 -------------------------------------
 build/cmake/Makefile.am            |   4 +-
 build/cmake/libmongoc-ssl.def      | 406 -----------------------------------
 build/cmake/libmongoc.def          | 397 ----------------------------------
 configure.ac                       |   1 -
 src/Makefile.am                    |   8 -
 src/libmongoc.symbols              | 409 -----------------------------------
 tests/Makefile.am                  |  16 +-
 tests/abicheck.sh                  |   6 -
 12 files changed, 9 insertions(+), 1739 deletions(-)

commit 6f990e7059672d1880ced84b4d70e8a83f9446a1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 5 21:07:19 2016 -0400

    CDRIVER-711 test: ok result has empty writeErrors

 tests/test-bulk.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 589f554cdde6384c50954cc7fa9f8a351bda4ba1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 5 16:54:43 2016 -0700

    CDRIVER-1574: Quick disabling hardening, it broke RHEL

 build/autotools/AutoHarden.m4 | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2bac7aea7b4fd3c5ba70990b30c7c9c7aa219cc8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 5 14:27:47 2016 -0700

    remove accidental file

 php.php | 267 ----------------------------------------------------------------
 1 file changed, 267 deletions(-)

commit 468941ac76906658f158a6be055bbdbc24018b93
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 5 14:28:59 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da7e2e2cc9a56a51f1bb51afab208196707738b8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 5 10:52:46 2016 -0700

    CDRIVER-1574 --enable-hardening is a NOOP

 build/autotools/AutoHarden.m4 | 2 +-
 src/Makefile.am               | 6 ++++--
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 5cf7749b33d7d976e5b47979f4fc30a9c2594c71
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 4 16:50:43 2016 -0400

    CDRIVER-1571 simplify async command loop
    
    mongoc_async_run() no longer returns "true" if there is more work to do:
    it never returns early now since there is only one timeout for the whole
    function. Also, make timeouts int64_t in all internal functions.

 src/mongoc/mongoc-async-cmd-private.h        |  2 +-
 src/mongoc/mongoc-async-cmd.c                |  2 +-
 src/mongoc/mongoc-async-private.h            |  6 ++--
 src/mongoc/mongoc-async.c                    | 27 ++++++----------
 src/mongoc/mongoc-topology-scanner-private.h |  6 ++--
 src/mongoc/mongoc-topology-scanner.c         | 18 +++--------
 src/mongoc/mongoc-topology.c                 | 46 +++-------------------------
 tests/test-mongoc-async.c                    |  3 +-
 tests/test-mongoc-topology-scanner.c         |  7 +----
 9 files changed, 28 insertions(+), 89 deletions(-)

commit a5a02711aab0e8d01e16faf7b0d63ca5219292d6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 30 11:09:12 2016 -0400

    CDRIVER-1571 slow initiator cancels topology scan
    
    Async ismaster commands started before a slow call to a blocking stream
    initiator had the initiator's duration subtracted from their timeouts.
    The initiator and the async commands use the same initial timeout value,
    so once an initiator times out, all async commands started beforehand
    now have 0 seconds remaining. They're canceled before they run.
    
    This change relies on the overall timeout applied to mongoc_async_run
    instead of per-command timeouts.

 src/mongoc/mongoc-async-cmd-private.h |  2 +-
 src/mongoc/mongoc-async-cmd.c         | 31 +++-------------
 src/mongoc/mongoc-async.c             | 68 +++++++++++++++--------------------
 tests/test-mongoc-topology-scanner.c  | 63 ++++++++++++++++++++++++++++++++
 4 files changed, 98 insertions(+), 66 deletions(-)

commit ac15bd45abf0628a918f867c7f1738076a4352f8
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 4 13:14:23 2016 -0700

    CDRIVER-1576 New error code for unrecognized pipeline operator

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f9e7d583fbae2599c972ea76b464f6c45c9e57b8
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 4 12:58:12 2016 -0700

    CDRIVER-1575 create checks for wrong option name

 src/mongoc/mongoc-database.c | 10 +++++-----
 tests/test-mongoc-database.c |  4 ++--
 2 files changed, 7 insertions(+), 7 deletions(-)

commit f6bf9c9b7568997feb1537a71390d1f9e5f4e9a3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 3 13:18:33 2016 -0700

    Revert "Improve ping example": getopt() is not supported on Windows
    
    This reverts commit dd92ae264df0764a9d31b6baec385bf94a01353b.

 examples/mongoc-ping.c | 86 +++++++-------------------------------------------
 1 file changed, 12 insertions(+), 74 deletions(-)

commit a426899762940a2630116dbd1b7f932cb6e799f6
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 3 13:15:27 2016 -0700

    Safe few keystrokes when debugging

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd92ae264df0764a9d31b6baec385bf94a01353b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 29 13:49:57 2016 -0700

    Improve ping example

 examples/mongoc-ping.c | 86 +++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 74 insertions(+), 12 deletions(-)

commit 1cef3904110fc091f4b275f9cbf5d6f873491d50
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 29 22:38:54 2016 -0400

    CDRIVER-1567 disable connection err test on windows

 tests/test-mongoc-topology-scanner.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 29ce9f068f90e75761c42e1c790f3bbee5dda11a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 29 11:21:19 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c36aa4bdda3767628bcdcbdb16f5dec6bff05b52
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 29 11:05:33 2016 -0700

    Fix error message on certificate failure pre OpenSSL 1.0.2

 src/mongoc/mongoc-stream-tls-openssl.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 3f7c52e1ad550ce6eede9d00d859a5c33d1ee94f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 29 09:27:41 2016 -0400

    CDRIVER-1205 count_with_opts uses collection read pref
    
    If no read preference is passed in, mongoc_collection_count_with_opts
    should default to the collection's read preference.

 NEWS                                       |  3 ++-
 doc/mongoc_collection_count_with_opts.page |  2 +-
 src/mongoc/mongoc-collection.c             | 20 +++++++++++---------
 src/mongoc/mongoc-server-stream.c          |  3 +--
 src/mongoc/mongoc-util-private.h           |  1 +
 5 files changed, 16 insertions(+), 13 deletions(-)

commit 46684e9d5bebb2c3992df3ce0215c1577b7a01b0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 29 08:51:01 2016 -0400

    CDRIVER-1567 swap connection err / timeout msgs

 src/mongoc/mongoc-topology-scanner.c |  9 ++++--
 tests/test-mongoc-topology-scanner.c | 62 ++++++++++++++++++++++++++++++++++++
 2 files changed, 68 insertions(+), 3 deletions(-)

commit 33d970f6a7671067ea70ac12ef299ff01c00023c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 28 15:21:03 2016 -0400

    remove redundant topology code

 src/mongoc/mongoc-topology.c | 2 --
 1 file changed, 2 deletions(-)

commit 00f5185076445336c8c7ac599114bdce8cceb251
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 28 13:47:55 2016 -0700

    It was only early betas of 1.0.2 that didn't have this flag
    
    Also, actually include the header file that defines it.

 src/mongoc/mongoc-stream-tls-openssl.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 88f96551c12920cb199a74454fb22feb5d534f6b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 28 09:52:42 2016 -0700

    Fix build on RHEL 5.5

 src/mongoc/mongoc-stream-tls-openssl.c | 3 +++
 1 file changed, 3 insertions(+)

commit 74409db4742c72c77fd5a4630521e95ef40cf2ef
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 28 09:07:45 2016 -0700

    Fix readConcern against legacy servers

 src/mongoc/mongoc-collection.c | 28 +++++++++++++++++-----------
 1 file changed, 17 insertions(+), 11 deletions(-)

commit e2011ceb5fc7dfee474ea74cc4e8fb0be8958d79
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 28 08:35:46 2016 -0700

    Fix no newline at end of file warning

 src/mongoc/mongoc-server-stream.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 8fb2f193051ad148cb14927e984b30b467236abb
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 16:28:10 2016 -0700

    CDRIVER-989 These files still need to be in the release archive

 src/mongoc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b2d6bbbb44c80dfb2caebce5dd38dbd50c0777b0
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 15:30:53 2016 -0700

    CDRIVER-1561 Fix compiler warning on mingw-w64

 src/mongoc/mongoc-openssl.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3c2c78b5e0e2c5b7ed257c2b323c38ccd90aa750
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 14:51:54 2016 -0700

    seems to be more elements we ignore then I expected

 doc/mallard2man.py | 1 -
 1 file changed, 1 deletion(-)

commit 25eb57d3e5097b743bdf79cd6c87d14983ae9ee0
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 14:25:49 2016 -0700

    Add support for <sys>

 doc/mallard2man.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 91c372d7bd8f775b97db028e48102f2153e74b0c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 14:19:25 2016 -0700

    Fix pedantic compiler warning

 src/mongoc/mongoc-write-command.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 040d23c403cb45c9ce2c779735dfdc978f6a1b80
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 14:15:56 2016 -0700

    fix markup

 doc/mongoc_cursor_more.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4d86981dd67575337edf0e22322d583f5a18cbc6
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 27 13:00:23 2016 -0700

    Have consistent location for the latest snapshot

 .evergreen/config.yml | 34 +++++++++++++++++-----------------
 1 file changed, 17 insertions(+), 17 deletions(-)

commit 374198650e0ad3ab6c46de601113b88ede4a17ba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 27 17:18:58 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8e5d2c66e4e92c769d61edf8e0a6dcd8d6ef0da1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 27 17:18:47 2016 -0400

    1.5.0-rc1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2066dac8bb567974a7b2245d85611d3266e6f9a8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 27 17:12:24 2016 -0400

    bump libbson to 1.5.0-rc1

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f930d692f94853c1ca97ba9ea6254e71f130b931
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 27 09:13:32 2016 -0400

    sync server discovery tests from specs repo

 .../rs/new_primary_new_setversion.json             | 123 ++++++++++
 .../rs/null_election_id.json                       | 246 +++++++++----------
 .../rs/primary_disconnect_electionid.json          | 266 ++++++++++-----------
 .../rs/primary_disconnect_setversion.json          | 195 +++++++++++++++
 .../rs/primary_reports_new_member.json             | 139 +++++++++++
 .../rs/setversion_without_electionid.json          |  74 ++++++
 .../rs/use_setversion_without_electionid.json      | 114 +++++++++
 .../single/direct_connection_rsarbiter.json        |  43 ++--
 .../single/direct_connection_rsprimary.json        |  41 ++--
 .../single/direct_connection_rssecondary.json      |  43 ++--
 10 files changed, 965 insertions(+), 319 deletions(-)

commit 7d884dab232da1681a756377f7bc0ec217d20d78
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 23 16:46:20 2016 -0400

    CDRIVER-1558 fix minPoolSize logic

 src/mongoc/mongoc-client-pool-private.h |  2 +
 src/mongoc/mongoc-client-pool.c         | 25 +++++++++--
 src/mongoc/mongoc-queue-private.h       |  2 +
 src/mongoc/mongoc-queue.c               | 44 ++++++++++++++++---
 tests/TestSuite.h                       |  1 +
 tests/test-mongoc-client-pool.c         | 76 +++++++++++++++++++--------------
 tests/test-mongoc-queue.c               | 24 +++++++++++
 7 files changed, 132 insertions(+), 42 deletions(-)

commit e83023a39cf5351282a621e3d58042e8896ab032
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 21 18:25:05 2016 -0400

    CDRIVER-1554 redundant check for "$query"

 src/mongoc/mongoc-cursor.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit e40a364db757614f08f1dc9b4edb52d877ea7c5b
Merge: f015801 72af640
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Mon Sep 26 07:40:35 2016 -0700

    Merge pull request #397 from jeroenooms/typo
    
    fix typo in mongoc_ssl_opt_t

commit 72af640eaa26407dd225327d86ad1c85782a7274
Author: Jeroen Ooms <jeroenooms@gmail.com>
Date:   Mon Sep 26 16:14:44 2016 +0200

    fix typo in mongoc_ssl_opt_t

 doc/mongoc_advanced_connections.page | 2 +-
 doc/mongoc_ssl_opt_t.page            | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f015801dd96594ff9067e7ce3ea0d64ce85e1938
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 23 11:55:20 2016 -0400

    unused field mongoc_client_t.conns

 src/mongoc/mongoc-client-private.h | 1 -
 1 file changed, 1 deletion(-)

commit 90fa9baafca556caa21b34d8b3de07a6816960ea
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 22 14:56:57 2016 -0700

    CDRIVER-1555: SSL connections can leak sockets

 src/mongoc/mongoc-client.c           | 3 +++
 src/mongoc/mongoc-topology-scanner.c | 5 +++++
 2 files changed, 8 insertions(+)

commit 2f170d147520758fed1d66dd6a286fbf809fefa3
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 22 14:55:51 2016 -0700

    cleanup client

 tests/test-mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit 5263a2b07823f565e1a122da116df94720020a9f
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 20 14:57:02 2016 -0700

    CDRIVER-1551 Add collation support for index creation and aggregate
    
    Also raise error when the server doesn't support collation

 build/generate-future-functions.py   |  10 ++
 src/mongoc/mongoc-client-private.h   |   1 +
 src/mongoc/mongoc-client.c           |  61 +++++++---
 src/mongoc/mongoc-collection.c       | 133 +++++++++++++--------
 src/mongoc/mongoc-database.c         |   2 +
 src/mongoc/mongoc-index.c            |   1 +
 src/mongoc/mongoc-index.h            |   3 +-
 src/mongoc/mongoc-write-command.c    |   2 +-
 tests/mock_server/future-functions.c |  58 ++++++++++
 tests/mock_server/future-functions.h |  12 ++
 tests/mock_server/future-value.c     |  14 +++
 tests/mock_server/future-value.h     |  12 ++
 tests/mock_server/future.c           |  12 ++
 tests/mock_server/future.h           |   3 +
 tests/test-bulk.c                    |  30 +++--
 tests/test-mongoc-client.c           |   3 +
 tests/test-mongoc-collection.c       | 219 +++++++++++++++++++++++++++++++++++
 17 files changed, 501 insertions(+), 75 deletions(-)

commit 2dce3cd32cd7e19a384c295a26341157a4cad6e0
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 23 13:01:30 2016 -0700

    Ubuntu ppc64le builds are now available in standard paths

 .evergreen/download-mongodb.sh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 5b49ffdfe3f8a04e39cd8bc2240193c5e6834bf7
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 22 11:28:38 2016 -0700

    CDRIVER-1556: Crash when multi bulk write fails with stream failure

 build/future_function_templates/future.c.template | 11 +++-
 build/future_function_templates/future.h.template |  2 +
 src/mongoc/mongoc-bulk-operation.c                |  2 +-
 src/mongoc/mongoc-write-command-private.h         |  3 +-
 src/mongoc/mongoc-write-command.c                 |  7 +-
 tests/mock_server/future.c                        | 11 +++-
 tests/mock_server/future.h                        |  3 +-
 tests/test-bulk.c                                 | 78 +++++++++++++++++++++--
 8 files changed, 105 insertions(+), 12 deletions(-)

commit 9b25ef417e290451221958a904f2b2d0fdce927b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 22 21:30:25 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9d16fad50f941d1480d530f56c3c54109242db19
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 21 11:47:00 2016 -0400

    CDRIVER-1522 thoroughly test cursor n_return

 tests/test-mongoc-cursor.c | 349 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 349 insertions(+)

commit 70337e2c92d0da276b3728fec96521793c0bd8ef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 22:19:10 2016 -0400

    CDRIVER-1522 use cursor_new_with_opts internally

 src/mongoc/mongoc-client.c         | 10 ++++++----
 src/mongoc/mongoc-cursor-private.h |  3 +--
 src/mongoc/mongoc-cursor.c         |  4 ++--
 src/mongoc/mongoc-database.c       |  6 +++---
 4 files changed, 12 insertions(+), 11 deletions(-)

commit aeb2c78d57cb85fa5f0799b858a2d2da781d533d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 19 13:33:59 2016 -0700

    CDRIVER-1536 Document new bulk_operation methods

 doc/mongoc_bulk.page                               |  8 +++-
 doc/mongoc_bulk_operation_delete.page              |  8 +++-
 doc/mongoc_bulk_operation_delete_one.page          |  8 +++-
 doc/mongoc_bulk_operation_execute.page             |  5 ++
 doc/mongoc_bulk_operation_insert.page              |  5 ++
 doc/mongoc_bulk_operation_remove.page              |  9 +++-
 doc/mongoc_bulk_operation_remove_one.page          | 10 +++-
 ...mongoc_bulk_operation_remove_one_with_opts.page | 50 +++++++++++++++++++
 doc/mongoc_bulk_operation_remove_with_opts.page    | 50 +++++++++++++++++++
 doc/mongoc_bulk_operation_replace_one.page         |  7 ++-
 ...ongoc_bulk_operation_replace_one_with_opts.page | 56 ++++++++++++++++++++++
 ...k_operation_set_bypass_document_validation.page |  5 ++
 doc/mongoc_bulk_operation_t.page                   |  5 ++
 doc/mongoc_bulk_operation_update.page              | 13 ++---
 doc/mongoc_bulk_operation_update_one.page          |  5 +-
 ...mongoc_bulk_operation_update_one_with_opts.page | 55 +++++++++++++++++++++
 doc/mongoc_bulk_operation_update_with_opts.page    | 53 ++++++++++++++++++++
 doc/mongoc_collection_create_bulk_operation.page   |  6 +++
 doc/mongoc_index_opt_t.page                        |  3 +-
 19 files changed, 345 insertions(+), 16 deletions(-)

commit e76f3d9820ac57742b422a2cb3022a412e0c1c01
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 21 09:11:06 2016 -0700

    typo

 src/mongoc/mongoc-openssl.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 623189bbbcf2cecf72b7c4137f4cb1dca0677042
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 21 11:46:22 2016 -0400

    mock server output bugfixes

 tests/mock_server/request.c | 21 ++++++++++++++++-----
 tests/test-conveniences.c   |  8 ++++----
 2 files changed, 20 insertions(+), 9 deletions(-)

commit d2712d2885bc66842688d605d805bef22afac6d0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 19 16:55:55 2016 -0400

    CDRIVER-1548 leak in find_with_opts

 src/mongoc/mongoc-cursor.c                    |  2 ++
 tests/test-mongoc-collection-find-with-opts.c | 30 ++++++++++++++++++++++++---
 2 files changed, 29 insertions(+), 3 deletions(-)

commit ad47d5c19b852ac9c4d4e82618d64552ac7600f7
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 13 15:01:55 2016 -0700

    Check the correct iterator for the 'limit' field

 src/mongoc/mongoc-write-command.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 7f6ae5b5f36fb55959e8137efb5c07fef472e26a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 23:08:22 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d4db6965d4df28ea1e066d2208844dddfc18fb70
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 22:54:08 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d5a69c244c48d0a06e72248d2211c65fd8a74d17
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 22:51:12 2016 -0400

    1.5.0-rc0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d2af4ef4838aa9a0b21e1ed13b597251d6d20748
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 22:46:51 2016 -0400

    bump libbson to 1.5.0-rc0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a8357475f52eb8983a762f2e7ba180868830f4f3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 14:57:07 2016 -0400

    CDRIVER-1522 don't send maxAwaitTimeMS to server

 src/mongoc/mongoc-cursor.c                    | 19 +++++++++++++++++--
 tests/test-mongoc-collection-find-with-opts.c |  6 +++++-
 tests/test-mongoc-collection-find.c           | 10 +++++++---
 3 files changed, 29 insertions(+), 6 deletions(-)

commit b14c511dbb756ecb19f2decb59f59fbe7541d863
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 13:00:44 2016 -0400

    CDRIVER-1522 define constants for "find" opts

 src/mongoc/mongoc-cursor-cursorid.c |   9 +-
 src/mongoc/mongoc-cursor-private.h  |  56 ++++++++++++
 src/mongoc/mongoc-cursor.c          | 178 ++++++++++++++++++------------------
 3 files changed, 151 insertions(+), 92 deletions(-)

commit c7153978ba52e026fe777355cae139c01ba61761
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 11:39:38 2016 -0400

    CDRIVER-1522 reorder cursor_new_with_opts signature
    
    Update signature for consistency with mongoc_collection_count_with_opts:
    (collection, filter, opts, read_prefs)

 src/mongoc/mongoc-collection.c     |  5 ++---
 src/mongoc/mongoc-cursor-private.h |  7 ++++---
 src/mongoc/mongoc-cursor.c         | 16 +++++++++-------
 3 files changed, 15 insertions(+), 13 deletions(-)

commit 279c7fe7fbc4309d727d9762014e6aa49483d19e
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 12 13:49:04 2016 -0700

    CDRIVER-1526 Rewrite "_with_write_concern" functions to "_with_opts"
    
    These function now take a generic bson_t options, which can contain
    whichever options or arguments to the command.
    
    To add write_concern to the these commands, add it to the generic opts
    with:
    mongoc_write_concern_append (wc, opts);
    And pass opts to the function.
    
    Removed
    - mongoc_collection_aggregate_with_opts
    - mongoc_database_create_collection_with_opts
    
    Their respective function without _with_opts had opts parameter that
    was retrofitted to support writeConcern and other arbitrary options

 build/autotools/versions.ldscript                  |  12 +-
 build/cmake/libmongoc-ssl.def                      |  12 +-
 build/cmake/libmongoc.def                          |  12 +-
 doc/mongoc_collection_aggregate.page               |  86 ++++++++-
 ...oc_collection_aggregate_with_write_concern.page | 117 ------------
 doc/mongoc_collection_create_index.page            |   2 +-
 doc/mongoc_collection_create_index_with_opts.page  |  62 ++++++
 ...collection_create_index_with_write_concern.page |  62 ------
 doc/mongoc_collection_drop.page                    |   2 +-
 doc/mongoc_collection_drop_index.page              |   2 +-
 doc/mongoc_collection_drop_index_with_opts.page    |  50 +++++
 ...c_collection_drop_index_with_write_concern.page |  50 -----
 doc/mongoc_collection_drop_with_opts.page          |  53 ++++++
 doc/mongoc_collection_drop_with_write_concern.page |  53 ------
 doc/mongoc_collection_rename.page                  |   2 +-
 doc/mongoc_collection_rename_with_opts.page        |  54 ++++++
 ...ongoc_collection_rename_with_write_concern.page |  54 ------
 doc/mongoc_database_create_collection.page         |  27 ++-
 ...abase_create_collection_with_write_concern.page |  55 ------
 doc/mongoc_database_drop.page                      |   2 +-
 doc/mongoc_database_drop_with_opts.page            |  50 +++++
 doc/mongoc_database_drop_with_write_concern.page   |  50 -----
 src/libmongoc.symbols                              |  12 +-
 src/mongoc/mongoc-client-private.h                 |  14 +-
 src/mongoc/mongoc-client.c                         |  79 ++++----
 src/mongoc/mongoc-collection.c                     | 139 +++++++-------
 src/mongoc/mongoc-collection.h                     |  28 +--
 src/mongoc/mongoc-database.c                       |  85 +++------
 src/mongoc/mongoc-database.h                       |  11 +-
 src/mongoc/mongoc-write-concern-private.h          |   2 +
 src/mongoc/mongoc-write-concern.c                  | 103 ++++++++++
 tests/test-conveniences.c                          |  20 ++
 tests/test-conveniences.h                          |   3 +
 tests/test-mongoc-client.c                         |  65 ++++---
 tests/test-mongoc-collection.c                     | 208 +++++++++++----------
 tests/test-mongoc-database.c                       |  54 ++++--
 36 files changed, 859 insertions(+), 833 deletions(-)

commit 123204602b411152a3a4a979ab705494acc89dd3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 12 15:54:50 2016 -0700

    These tests are slow live tests

 tests/test-bulk.c              | 8 ++++----
 tests/test-mongoc-collection.c | 4 ++--
 tests/test-mongoc-gridfs.c     | 4 ++--
 3 files changed, 8 insertions(+), 8 deletions(-)

commit e4aa62001d3f6848acb9bf0229a9f2eed0bee7d9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 13:23:18 2016 -0400

    CDRIVER-1517 const-correct server description getters

 NEWS                                    |  6 ++++++
 doc/mongoc_server_description_host.page |  2 +-
 examples/example-sdam-monitoring.c      |  4 ++--
 src/mongoc/mongoc-server-description.c  | 16 +++++++++-------
 src/mongoc/mongoc-server-description.h  | 10 +++++-----
 tests/test-mongoc-sdam-monitoring.c     |  7 +++----
 6 files changed, 26 insertions(+), 19 deletions(-)

commit bc1163ad6b01bfb6a2f332d17acd96c823818622
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 11:36:56 2016 -0400

    CDRIVER-1522 reorder find_with_opts signature
    
    Update signature for consistency with mongoc_collection_count_with_opts:
    (collection, filter, opts, read_prefs)

 doc/mongoc_collection_find_with_opts.page     | 10 +++++-----
 src/mongoc/mongoc-collection.c                |  6 +++---
 src/mongoc/mongoc-collection.h                |  4 ++--
 tests/test-mongoc-collection-find-with-opts.c | 15 +++++++--------
 tests/test-mongoc-collection.c                | 16 ++++++++--------
 tests/test-mongoc-cursor.c                    |  6 +++---
 6 files changed, 28 insertions(+), 29 deletions(-)

commit 43277d3b7fde85585d17f2335ef5630ae879d5e9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 13 14:57:24 2016 -0400

    fix a mock server error message

 tests/test-conveniences.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 27cad5c3cf6b3df60e579e20939d76242a780e23
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 10 17:19:45 2016 -0400

    CDRIVER-1522 update find docs
    
    Two changes in particular. First, $-modifiers once again have the "$"
    stripped for "find" commands, and added for OP_QUERY messages. I'd
    removed this behavior a few commits ago and restored it in 63a9d42e.
    
    Second, "filter" is no longer treated specially by the old "find()", so
    you don't have to do special things to query on a "filter" field.

 NEWS                                      |  3 +++
 doc/mongoc_collection_find.page           | 37 ++++++-------------------------
 doc/mongoc_collection_find_with_opts.page | 13 +++++++----
 3 files changed, 19 insertions(+), 34 deletions(-)

commit 0c12cc6e3f9e109ec118e143dbde688f58585dca
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 10 17:05:23 2016 -0400

    CDRIVER-1522 test & fix query and flags edge cases

 src/mongoc/mongoc-cursor.c                    |   6 +-
 tests/test-mongoc-collection-find-with-opts.c |  44 ++++++---
 tests/test-mongoc-collection-find.c           | 134 +++++++++++++++++++++-----
 3 files changed, 143 insertions(+), 41 deletions(-)

commit f42cb2694863b041cdc033101161b192493bd34c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 10 09:35:09 2016 -0400

    CDRIVER-1522 fix slave_ok flag logic

 src/mongoc/mongoc-cursor.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit f066f14e7c9862a843f54700c3f3f36fe11fba80
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 9 23:50:18 2016 -0400

    CDRIVER-1522 remove mongoc_cursor_t's old fields

 src/mongoc/mongoc-cursor-array.c    |   8 +-
 src/mongoc/mongoc-cursor-cursorid.c |  18 +-
 src/mongoc/mongoc-cursor-private.h  |   9 -
 src/mongoc/mongoc-cursor.c          | 465 +++++++-----------------------------
 4 files changed, 99 insertions(+), 401 deletions(-)

commit f6c6085076415150ad97fa4d0950ea991d420971
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 9 22:55:52 2016 -0400

    CDRIVER-1522 always init cursor with "opts"

 src/mongoc/mongoc-client.c                    |   4 +-
 src/mongoc/mongoc-collection.c                |   6 +-
 src/mongoc/mongoc-cursor-private.h            |   3 +-
 src/mongoc/mongoc-cursor.c                    | 447 +++++++++++++++++---------
 src/mongoc/mongoc-database.c                  |   2 +-
 tests/test-mongoc-collection-find-with-opts.c |   6 +-
 tests/test-mongoc-collection-find.c           |  40 +--
 tests/test-mongoc-cursor.c                    |   8 +-
 8 files changed, 319 insertions(+), 197 deletions(-)

commit f4cfb6eb708913a1795090faecbe3196fb7b5c58
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 9 22:46:24 2016 -0400

    CDRIVER-1522 add topology-type getter

 src/mongoc/mongoc-topology-private.h |  3 +++
 src/mongoc/mongoc-topology.c         | 28 ++++++++++++++++++++++++++++
 2 files changed, 31 insertions(+)

commit 08e5cf4acaa694e682a7c9979657532435d722c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 12 14:02:38 2016 -0400

    CDRIVER-1530 mention ticket number in test code

 tests/test-mongoc-cursor.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7d0b38206efb4c46bf344a265a2f1bf70c703473
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Sep 12 08:55:09 2016 -0400

    CDRIVER-1530 test tailable mongoc_cursor_more

 tests/test-mongoc-cursor.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 14b72bfe0f299d783d59ea0bb6cca15bebe84b2d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 10 22:24:49 2016 -0400

    CDRIVER-1530 fix cursor_next and tailable find cmd

 src/mongoc/mongoc-cursor-cursorid.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit fa65f58800ec6528c8b105387b2b9689e5e60710
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 9 11:02:25 2016 -0700

    CDRIVER-1525: Update examples with error argument

 examples/bulk/bulk-collation.c | 3 ++-
 examples/bulk/bulk2.c          | 6 +++---
 2 files changed, 5 insertions(+), 4 deletions(-)

commit 2115e6dc3ef927a2cbe8c598471210100841335a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 9 10:24:31 2016 -0700

    Revert "CDRIVER-1522 del example code that won't build yet"
    
    This reverts commit a497587867fe28dac954d0244ca6fb4bfc5e4a38.

 examples/Makefile.am  | 5 +++++
 examples/bulk/bulk2.c | 9 ++++++---
 2 files changed, 11 insertions(+), 3 deletions(-)

commit 2c563a5f7bae2bc3cf30d0ea815b16776451070a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 8 17:12:05 2016 -0700

    CDRIVER-1525 Flexible opts for bulk operations

 .gitignore                                |   1 +
 build/autotools/versions.ldscript         |   5 +
 build/cmake/libmongoc-ssl.def             |   5 +
 build/cmake/libmongoc.def                 |   5 +
 src/libmongoc.symbols                     |   5 +
 src/mongoc/mongoc-bulk-operation.c        | 262 +++++++++++++++++++----------
 src/mongoc/mongoc-bulk-operation.h        |  29 ++--
 src/mongoc/mongoc-client-private.h        |   2 +
 src/mongoc/mongoc-collection.c            |  18 +-
 src/mongoc/mongoc-write-command-private.h |  15 +-
 src/mongoc/mongoc-write-command.c         |  68 ++++++--
 tests/test-bulk.c                         | 265 ++++++++++++++++++++++++++++++
 12 files changed, 553 insertions(+), 127 deletions(-)

commit 6f8545006dfd11223972b5be4a841097b2b9828c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 9 22:33:22 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5358a712c95368eb86871a34567a9e8b8ae19694
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 9 10:25:26 2016 -0400

    CDRIVER-1522 support maxAwaitTimeMS in "opts"

 src/mongoc/mongoc-cursor-cursorid.c           | 20 ++++++--
 tests/test-mongoc-collection-find-with-opts.c | 72 +++++++++++++++++++++++++++
 2 files changed, 88 insertions(+), 4 deletions(-)

commit b81f1b196fb822d5c104ecc42b01ab6e2ceec56f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 8 12:05:47 2016 -0400

    CDRIVER-1522 use filter and opts for OP_QUERY

 src/mongoc/mongoc-cursor.c | 534 +++++++++++++++++++++++++++++----------------
 1 file changed, 340 insertions(+), 194 deletions(-)

commit 1d7fd846c8963ed395da187c656357c3c451b487
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 8 11:26:57 2016 -0400

    CDRIVER-1522 update find_with_opts tests

 tests/test-mongoc-collection-find-with-opts.c | 72 ++++++++++++++++++++-------
 1 file changed, 53 insertions(+), 19 deletions(-)

commit f1bd2107dd76022e06d97372718466aeb4fa2e62
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 8 11:20:11 2016 -0400

    CDRIVER-1522 update mongoc_collection_find_with_opts doc

 doc/mongoc_collection_find_with_opts.page | 21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

commit fe43fddd14ef87c289cc49ba513a3445ef8f3920
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 23:03:10 2016 -0400

    CDRIVER-1522 make cursor getters/setters use opts

 src/mongoc/mongoc-cursor-cursorid.c |   9 ++-
 src/mongoc/mongoc-cursor-private.h  |   2 +
 src/mongoc/mongoc-cursor.c          | 142 ++++++++++++++++++++++++++++++++----
 tests/test-mongoc-cursor.c          |  14 +++-
 4 files changed, 149 insertions(+), 18 deletions(-)

commit 867fe6c8d52060e5e32bffefacccdd0efe2b67fa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 18:49:21 2016 -0400

    CDRIVER-1522 use filter and opts for "find" cmd

 src/mongoc/mongoc-client.c         |  6 +--
 src/mongoc/mongoc-collection.c     |  6 ++-
 src/mongoc/mongoc-cursor-private.h |  6 +++
 src/mongoc/mongoc-cursor.c         | 81 +++++++++++++++++++++++++++++---------
 src/mongoc/mongoc-database.c       |  4 +-
 tests/test-mongoc-cursor.c         | 15 ++++---
 6 files changed, 85 insertions(+), 33 deletions(-)

commit a4bcfffa9c7ffa2e541a3351ec26cfad417cbdcf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 8 16:28:30 2016 -0400

    CDRIVER-1533 omit NULLs from mongoc_topology_description_get_servers

 src/mongoc/mongoc-topology-description.c |  2 +-
 tests/test-mongoc-topology-description.c | 65 ++++++++++++++++++++++++++++++++
 2 files changed, 66 insertions(+), 1 deletion(-)

commit 35adb389e54bf37bfaac416a1bd5afe5f6a0c92d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 8 15:34:59 2016 -0400

    CDRIVER-1129 error if hostname too long

 src/mongoc/mongoc-uri-private.h |  2 +-
 src/mongoc/mongoc-uri.c         | 25 +++++++++++++++------
 tests/test-mongoc-uri.c         | 48 +++++++++++++++++++++++++++++++++++++++++
 3 files changed, 68 insertions(+), 7 deletions(-)

commit 74ead47deb554e3e161e38a6e8d2607659bb8494
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 8 13:26:55 2016 -0700

    CDRIVER-1532 Return false when raising MONGOC_ERROR

 src/mongoc/mongoc-libressl.c                    |  1 +
 src/mongoc/mongoc-stream-tls-libressl.c         |  6 +++++-
 src/mongoc/mongoc-stream-tls-secure-transport.c | 20 +++++++++++---------
 3 files changed, 17 insertions(+), 10 deletions(-)

commit c4d9ae5a98a5eeb540d5d1815f5cea52519ee02a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 16:00:36 2016 -0400

    CDRIVER-516 improve mongoc_cursor_more docs

 doc/mongoc_collection_find.page |  2 +-
 doc/mongoc_cursor_more.page     | 11 +++++++++--
 doc/mongoc_cursor_t.page        |  1 -
 doc/mongoc_cursors.page         |  2 +-
 4 files changed, 11 insertions(+), 5 deletions(-)

commit 18cb2ba7a456b3320758c4a6b53a924b510ec691
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 01:56:24 2016 -0400

    CDRIVER-1522 test unknown $-modifier with OP_QUERY

 tests/test-mongoc-collection-find.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69ab5ff18a770568e15af0f6bbacbcd58f8891ac
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 01:52:44 2016 -0400

    CDRIVER-1522 add mongoc_collection_find_with_opts

 CMakeLists.txt                                |   1 +
 build/autotools/versions.ldscript             |   1 +
 build/cmake/libmongoc-ssl.def                 |   1 +
 build/cmake/libmongoc.def                     |   1 +
 src/libmongoc.symbols                         |   1 +
 src/mongoc/mongoc-collection.c                |  49 ++
 src/mongoc/mongoc-cursor-private.h            |  13 +-
 src/mongoc/mongoc-cursor.c                    | 208 +++++++++
 tests/Makefile.am                             |   1 +
 tests/test-libmongoc.c                        |  96 ++--
 tests/test-mongoc-collection-find-with-opts.c | 615 ++++++++++++++++++++++++++
 tests/test-mongoc-collection.c                |  66 ++-
 tests/test-mongoc-cursor.c                    |  27 ++
 13 files changed, 1027 insertions(+), 53 deletions(-)

commit bb9d1ccb2f42cafdd552ecac49257f51be7a8f3e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 6 10:15:02 2016 -0400

    CDRIVER-1522 check read prefs in _mongoc_cursor_new

 src/mongoc/mongoc-client.c     |  3 ---
 src/mongoc/mongoc-collection.c | 12 +++---------
 src/mongoc/mongoc-cursor.c     |  1 +
 3 files changed, 4 insertions(+), 12 deletions(-)

commit 13ce2f7f269bccb1e5bff69ab24333f343c5026f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 15:46:29 2016 -0400

    del old version info from bulk-ops guide

 doc/mongoc_bulk.page | 2 --
 1 file changed, 2 deletions(-)

commit a24d78b61407c6d55cbe3a67ae68a913252c455e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 15:44:22 2016 -0400

    del unused field mongoc_topology_scanner.seq

 src/mongoc/mongoc-topology-scanner-private.h | 1 -
 1 file changed, 1 deletion(-)

commit e15ff9fa69fb3c430c15e8b674a10f8af7aa7990
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 01:50:31 2016 -0400

    support negative nToReturn in mock server
    
    This will help test mongoc_collection_find_with_opts, CDRIVER-1522.

 tests/mock_server/mock-rs.c     | 4 ++--
 tests/mock_server/mock-rs.h     | 4 ++--
 tests/mock_server/mock-server.c | 4 ++--
 tests/mock_server/mock-server.h | 4 ++--
 tests/mock_server/request.c     | 4 ++--
 tests/mock_server/request.h     | 4 ++--
 6 files changed, 12 insertions(+), 12 deletions(-)

commit 00c64c0a498ac29f74149f105726133a3413fddd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 01:55:23 2016 -0400

    tmp_bson() test helper accepts varargs

 tests/test-conveniences.c | 12 ++++++++++--
 tests/test-conveniences.h |  3 ++-
 2 files changed, 12 insertions(+), 3 deletions(-)

commit a497587867fe28dac954d0244ca6fb4bfc5e4a38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 14:03:51 2016 -0400

    CDRIVER-1522 del example code that won't build yet

 examples/Makefile.am  | 5 -----
 examples/bulk/bulk2.c | 9 +++------
 2 files changed, 3 insertions(+), 11 deletions(-)

commit 37719eef990b0a191cdeff8cc161e585e6e52133
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 3 16:29:03 2016 -0400

    CDRIVER-1522 declare fns taking flexible BSON opts

 doc/mongoc_bulk.page                       |   9 ++
 doc/mongoc_collection_count_with_opts.page |  43 +++++++-
 doc/mongoc_collection_find_with_opts.page  | 166 +++++++++++++++++++++++++++++
 doc/mongoc_tutorial.page                   |   4 +-
 examples/Makefile.am                       |   5 +
 examples/bulk/bulk-collation.c             |  80 ++++++++++++++
 examples/bulk/bulk2.c                      |   9 +-
 src/mongoc/mongoc-bulk-operation.h         |  74 ++++++++-----
 src/mongoc/mongoc-collection.h             |   4 +
 9 files changed, 358 insertions(+), 36 deletions(-)

commit d0b62e18ed59fa5ea6d3126959fadf3479316abd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 18:55:06 2016 -0400

    CDRIVER-1518 crash in mongoc_topology_invalidate_server

 src/mongoc/mongoc-topology-description.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit f1f4b9f2b39c2dbad2a2f163c707a2ed36510249
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 7 07:54:01 2016 -0400

    test_error() and test_msg() always add newlines

 tests/TestSuite.c                      | 26 +++++++++++++-------------
 tests/json-test.c                      |  4 ++--
 tests/test-bulk.c                      |  2 +-
 tests/test-mongoc-client.c             |  2 +-
 tests/test-mongoc-command-monitoring.c |  4 ++--
 5 files changed, 19 insertions(+), 19 deletions(-)

commit 451226972d66b0f79ef290dfda50908661aaa156
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 6 13:04:10 2016 -0700

    Rename the evergreen config file out of the root dir

 .evergreen/config.yml | 5464 +++++++++++++++++++++++++++++++++++++++++++++++++
 .mci.yml              | 5464 -------------------------------------------------
 2 files changed, 5464 insertions(+), 5464 deletions(-)

commit 9e044f1ccc85bdb1587909b20c82b7ad845f6253
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 6 13:02:44 2016 -0700

    Install dependencies pending BUILD tickets in centralized location

 .evergreen/compile-unix.sh |  4 +---
 .evergreen/run-tests.sh    |  1 -
 .mci.yml                   | 10 +++++++++-
 3 files changed, 10 insertions(+), 5 deletions(-)

commit ff1684ca32a18f7a560db3dd5766840ce1e128ef
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 20:19:15 2016 -0700

    Use tabs in makefiles

 Makefile.am          | 16 ++++++++--------
 doc/man/Makefile.am  |  2 +-
 examples/Makefile.am | 12 ++++++------
 tests/Makefile.am    |  2 +-
 4 files changed, 16 insertions(+), 16 deletions(-)

commit 76bcb7a2a7c22a9f9136608499bf492bd276a420
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 20:43:36 2016 -0400

    fix SASL and non-SASL Solaris builds

 .evergreen/compile-unix.sh | 4 ++--
 .evergreen/run-tests.sh    | 4 +---
 2 files changed, 3 insertions(+), 5 deletions(-)

commit 7a322db1d06d04cd67a9c21ccfa4b0e408d24d85
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 19:33:57 2016 -0400

    adjust makefile whitespace

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0692d67bf4311f6ba5e89fad6c443ad85243ef1e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 21:02:03 2016 -0400

    CDRIVER-1506 fix MSVC build of test suite

 tests/TestSuite.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit e86def4546edc5aede9dfedade4e10961caa7093
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 20:50:21 2016 -0400

    MSVC warnings in topology tests

 tests/test-mongoc-topology-scanner.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 6cf4d06f3b1b58bcf66c053c0ac68e7057666d19
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 17:04:53 2016 -0700

    Remove the address sanitizer, the build isn't working properly

 .mci.yml | 13 -------------
 1 file changed, 13 deletions(-)

commit 404f4ef537b4e553f0d905172358fdc27353e18e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 18:38:10 2016 -0400

    CDRIVER-644 prevent setting Error API version twice

 src/mongoc/mongoc-client-pool.c | 7 +++++++
 src/mongoc/mongoc-client.c      | 6 ++++++
 2 files changed, 13 insertions(+)

commit c946e2fc86e6b4219da72f1de24d63c769625811
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 18:34:54 2016 -0400

    remove unused write_command.server_id

 src/mongoc/mongoc-bulk-operation.c        | 2 +-
 src/mongoc/mongoc-write-command-private.h | 1 -
 src/mongoc/mongoc-write-command.c         | 9 ---------
 3 files changed, 1 insertion(+), 11 deletions(-)

commit ccbf662a2317d2651034b6caefdf8ba5a38b9e88
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 17:57:17 2016 -0400

    remove unused _mongoc_topology_is_scanner_active()

 src/mongoc/mongoc-topology.c | 11 -----------
 1 file changed, 11 deletions(-)

commit 1e60b28923d9cca888d97c8e15a18a54bb49d609
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 10:57:13 2016 -0700

    CDRIVER-989 Do not include private header in public header

 src/mongoc/mongoc-libressl.c                    | 1 +
 src/mongoc/mongoc-secure-channel.c              | 1 +
 src/mongoc/mongoc-secure-transport.c            | 1 +
 src/mongoc/mongoc-stream-tls-libressl.c         | 1 +
 src/mongoc/mongoc-stream-tls-openssl-bio.c      | 1 +
 src/mongoc/mongoc-stream-tls-openssl.c          | 1 +
 src/mongoc/mongoc-stream-tls-secure-channel.c   | 1 +
 src/mongoc/mongoc-stream-tls-secure-transport.c | 1 +
 src/mongoc/mongoc-stream-tls.h                  | 1 -
 9 files changed, 8 insertions(+), 1 deletion(-)

commit 8254e8e5f18827c27b7ad02008e76350ab91fe30
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 10:49:45 2016 -0700

    CDRIVER-989 "make install" installs private headers

 CMakeLists.txt         | 15 --------
 src/mongoc/Makefile.am | 93 ++++++++++++++++++++++++++------------------------
 2 files changed, 49 insertions(+), 59 deletions(-)

commit 3513cca2bc52bc443b7e8c9c547ab89b93b67ed4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 16:15:46 2016 -0400

    CDRIVER-1333 del unused mock server from handshake test

 tests/test-mongoc-client.c | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

commit 43443420abe17c4d4b90eb719f0c62b7f8a0a7df
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 2 13:20:56 2016 -0400

    CDRIVER-1506 improve mock server logging

 .evergreen/run-tests.sh         |   1 +
 CONTRIBUTING.md                 |   6 +-
 tests/TestSuite.c               | 239 +++++++++++++++++++++++++++++++++-------
 tests/TestSuite.h               |   4 +
 tests/mock_server/mock-rs.c     |  30 -----
 tests/mock_server/mock-rs.h     |   2 -
 tests/mock_server/mock-server.c | 108 ++++--------------
 tests/mock_server/mock-server.h |   5 -
 tests/test-mongoc-topology.c    |   4 -
 9 files changed, 229 insertions(+), 170 deletions(-)

commit 313820492db4725dd5d9c7cbe0698f789a350a15
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 11:23:20 2016 -0700

    Gather the correct march to install cyrus on solaris

 .evergreen/run-tests.sh | 1 +
 1 file changed, 1 insertion(+)

commit 0348ce7de953507ac66c5c3b36419d5fb81ac880
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 10:03:35 2016 -0700

    Whops, not supposed to be here

 build/cmake/libmongoc-ssl.def | 1 -
 build/cmake/libmongoc.def     | 1 -
 src/libmongoc.symbols         | 1 -
 3 files changed, 3 deletions(-)

commit e5d688cc91a8f7858c8de15be3469c71d4cb711d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 09:48:53 2016 -0700

    CDRIVER-1144 ignore new example program

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit d4ac73aedb56d35c476711425ba0ad0cae5963aa
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 2 09:47:32 2016 -0700

    CDRIVER-1144 Export new APM symbols

 build/autotools/versions.ldscript | 18 ++++++++++++++++++
 build/cmake/libmongoc-ssl.def     | 21 ++++++++++++++++++++-
 build/cmake/libmongoc.def         | 21 ++++++++++++++++++++-
 src/libmongoc.symbols             | 21 ++++++++++++++++++++-
 4 files changed, 78 insertions(+), 3 deletions(-)

commit f80882af4dc13018015995ff017bcda284541065
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 17:48:40 2016 -0700

    CDRIVER-1452 Remove quotes around values
    
    And use the distro name, not its ID.
    This makes for more human readable value

 src/mongoc/mongoc-linux-distro-scanner.c           | 12 ++++++++---
 .../example-etc-os-release-ubuntu1604.txt          | 10 +++++++++
 tests/test-mongoc-linux-distro-scanner.c           | 24 ++++++++++++++++------
 3 files changed, 37 insertions(+), 9 deletions(-)

commit 89124a4203f2322986d9f42677269d9c8a0a3738
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 16:22:17 2016 -0700

    Remove experimental note

 doc/mongoc_client_pool_set_appname.page | 5 -----
 doc/mongoc_client_set_appname.page      | 4 ----
 doc/mongoc_handshake_data_append.page   | 5 -----
 3 files changed, 14 deletions(-)

commit 2c6d63e78022ec60a03f086a58c2fac87d215872
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 16:04:40 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f9a7bdbc2cceb32b2bc093d56661602d1d360ed
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 13:56:32 2016 -0700

    Fix scan-build when nothing is found

 .mci.yml | 2 ++
 1 file changed, 2 insertions(+)

commit faf67bd37c8fd7d7af3e11adc1c183cdd77bae3b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 13:56:17 2016 -0700

    CDRIVER-1516 Uninitialized argument value in mongoc_socket_accept_ex

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ef910b00f7558e7220a968d37975ab51d117e422
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 11:23:37 2016 -0700

    Mark this test as live

 tests/test-libmongoc.c       | 6 ++++++
 tests/test-libmongoc.h       | 1 +
 tests/test-mongoc-topology.c | 2 +-
 3 files changed, 8 insertions(+), 1 deletion(-)

commit 973bab67b7125418a0bf62e839855be8126030cb
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 10:56:02 2016 -0700

    We need cyrus-sasl also when running the tests

 .evergreen/run-tests.sh | 4 ++++
 1 file changed, 4 insertions(+)

commit 273e007923f031d210b208fbea8f676ec26ffdcf
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 10:48:35 2016 -0700

    Example to skip tests requiring MongoDB server

 CONTRIBUTING.md | 4 ++++
 1 file changed, 4 insertions(+)

commit ba02534c5c7db7706d70e3ce16974d8487573668
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 14:52:54 2016 -0400

    CDRIVER-1144 add SDAM monitoring example

 .gitignore                                         |   2 +-
 CMakeLists.txt                                     |   7 +-
 doc/mongoc_application_performance_monitoring.page |  68 +++++-
 examples/Makefile.am                               |  13 +-
 .../example-application-performance-monitoring.c   | 118 ---------
 examples/example-command-monitoring.c              | 118 +++++++++
 examples/example-sdam-monitoring.c                 | 267 +++++++++++++++++++++
 7 files changed, 463 insertions(+), 130 deletions(-)

commit fa79b2d147839131ef356b43b322d8539ee61b46
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 14:52:32 2016 -0400

    CDRIVER-1144 complete the heartbeat events

 src/mongoc/mongoc-apm-private.h      |  2 +-
 src/mongoc/mongoc-topology-scanner.c | 23 ++++++++++++++++-------
 2 files changed, 17 insertions(+), 8 deletions(-)

commit 9cec261599ce928e1151fd5dbf7360fe96265b85
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 12:08:40 2016 -0400

    CDRIVER-541 start connectTimeoutMS after getaddrinfo
    
    Also restart the timer for each interface attempted, e.g. if the driver
    attempts IPv6, then IPv4.

 NEWS                       | 3 +++
 src/mongoc/mongoc-client.c | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

commit e5f5551411f9b0f98f7246aee7ccbf4a61068a5e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 12:03:52 2016 -0400

    CDRIVER-1144 add topology description getters

 build/autotools/versions.ldscript                |  2 +
 build/cmake/libmongoc-ssl.def                    |  2 +
 build/cmake/libmongoc.def                        |  2 +
 doc/mongoc_topology_description_get_servers.page | 37 ++++++++++
 doc/mongoc_topology_description_type.page        | 38 +++++++++++
 src/libmongoc.symbols                            |  2 +
 src/mongoc/mongoc-client.c                       | 18 +----
 src/mongoc/mongoc-topology-description.c         | 86 ++++++++++++++++++++++++
 src/mongoc/mongoc-topology-description.h         |  9 ++-
 tests/json-test.c                                | 23 -------
 tests/json-test.h                                |  3 -
 tests/test-mongoc-sdam-monitoring.c              |  3 +-
 tests/test-mongoc-sdam.c                         |  2 +-
 13 files changed, 179 insertions(+), 48 deletions(-)

commit 8b6c9380ab86ebd4d519640fd94bfddc6e2150cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 21 19:12:13 2016 -0400

    CDRIVER-1144 heartbeat events

 src/mongoc/mongoc-topology-scanner.c |  67 +++++++++-
 tests/test-mongoc-sdam-monitoring.c  | 229 +++++++++++++++++++++++++++++++++--
 2 files changed, 280 insertions(+), 16 deletions(-)

commit 52fbb14e13cc90523c004b3c38746b84ec53bb7e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 22:58:15 2016 -0400

    CDRIVER-1144 move topology-closed event trigger

 src/mongoc/mongoc-topology-description.c | 2 --
 src/mongoc/mongoc-topology.c             | 1 +
 2 files changed, 1 insertion(+), 2 deletions(-)

commit 328dd351176e2c29b772904ed65b092b0916ae7e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:36:02 2016 -0400

    CDRIVER-1144 add mongoc_topology_set_apm_callbacks

 src/mongoc/mongoc-client-pool.c              |  1 +
 src/mongoc/mongoc-client.c                   |  4 +---
 src/mongoc/mongoc-topology-private.h         |  5 +++++
 src/mongoc/mongoc-topology-scanner-private.h |  4 ++++
 src/mongoc/mongoc-topology.c                 | 24 ++++++++++++++++++++++++
 5 files changed, 35 insertions(+), 3 deletions(-)

commit 896309075fadbff52eb0d4cbc0b1785276951803
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 08:53:10 2016 -0400

    better error output for JSON tests

 tests/json-test.c | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

commit fea9bd60a9bce553aac4028bf878736fd1a4e84e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 30 12:44:22 2016 -0400

    CDRIVER-1144 unused variables in test

 tests/test-mongoc-sdam-monitoring.c | 10 ----------
 1 file changed, 10 deletions(-)

commit 8d90867ef523ae644e6105380c68760da13cdb47
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 30 11:11:37 2016 -0400

    CDRIVER-1144 monitoring tests require live server

 tests/test-mongoc-sdam-monitoring.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3ce004f354b2873f54758811bd4233f9980af875
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:40:47 2016 -0400

    CDRIVER-1144 fix SDAM Monitoring JSON tests
    
    Same as:
    https://github.com/mongodb/specifications/pull/106

 .../monitoring/replica_set_with_no_primary.json                         | 2 +-
 .../monitoring/replica_set_with_primary.json                            | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit ca0c651e2379ed30c527a4bd4f16c0fc150a55ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:39:55 2016 -0400

    CDRIVER-1144 SDAM monitoring, part 1
    
    Server and Topology events, but not yet heartbeat events.

 CMakeLists.txt                                     |   4 +
 src/mongoc/Makefile.am                             |   2 +
 src/mongoc/mongoc-apm-private.h                    |   1 -
 src/mongoc/mongoc-set-private.h                    |   5 +
 src/mongoc/mongoc-set.c                            |  15 +
 .../mongoc-topology-description-apm-private.h      |  54 +++
 src/mongoc/mongoc-topology-description-apm.c       | 160 +++++++
 src/mongoc/mongoc-topology-description-private.h   |   4 +
 src/mongoc/mongoc-topology-description.c           |  93 ++++-
 src/mongoc/mongoc-topology.c                       |   4 +
 tests/test-mongoc-sdam-monitoring.c                | 458 +++++++++++++++++++--
 11 files changed, 754 insertions(+), 46 deletions(-)

commit 9af7390a02925aa7557e67b8e87f1f0fe6c3fca5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:37:32 2016 -0400

    CDRIVER-1144 refactor APM tests

 tests/json-test.c                      | 52 ++++++++++++++++++++++++++++++++++
 tests/json-test.h                      |  4 +++
 tests/test-mongoc-command-monitoring.c | 30 +-------------------
 3 files changed, 57 insertions(+), 29 deletions(-)

commit b49a05d520be2d2e832023e4a70fe3c3350ccbff
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:36:43 2016 -0400

    fix comment in mongoc-topology-description-private.h

 src/mongoc/mongoc-topology-description-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 98d013e4841436324441a4aecfde0d0a1da51416
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:36:02 2016 -0400

    CDRIVER-1144 topology fields for monitoring

 src/mongoc/mongoc-client-pool.c                  | 13 ++++++++++++-
 src/mongoc/mongoc-client.c                       |  5 ++++-
 src/mongoc/mongoc-topology-description-private.h |  6 ++++++
 src/mongoc/mongoc-topology-description.c         |  2 ++
 4 files changed, 24 insertions(+), 2 deletions(-)

commit 641d3607e2b97f4b472fbcf886fd2b0e48b3b906
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 09:33:22 2016 -0400

    CDRIVER-1144 refactor set_apm_callbacks

 src/mongoc/mongoc-client-pool.c    | 7 +++----
 src/mongoc/mongoc-client-private.h | 1 +
 src/mongoc/mongoc-client.c         | 6 ++----
 3 files changed, 6 insertions(+), 8 deletions(-)

commit 60346c60f08f17017b81ab6bf77a3a475f79d99b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 30 09:37:36 2016 -0400

    CDRIVER-1144 context pointer for SDAM events

 src/mongoc/mongoc-apm-private.h | 13 ++++++--
 src/mongoc/mongoc-apm.c         | 71 +++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-apm.h         | 18 +++++++++++
 3 files changed, 100 insertions(+), 2 deletions(-)

commit f2a1067221eb047b151f22a9fadd6a1325d278f8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 26 09:11:59 2016 -0400

    CDRIVER-1144 SDAM monitoring spec tests

 CMakeLists.txt                                     |   1 +
 tests/Makefile.am                                  |   1 +
 .../monitoring/replica_set_with_no_primary.json    | 147 ++++++++++++++++++++
 .../monitoring/replica_set_with_primary.json       | 146 ++++++++++++++++++++
 .../monitoring/replica_set_with_removal.json       | 152 +++++++++++++++++++++
 .../monitoring/required_replica_set.json           | 149 ++++++++++++++++++++
 .../monitoring/standalone.json                     | 104 ++++++++++++++
 tests/test-libmongoc.c                             |   2 +
 tests/test-mongoc-sdam-monitoring.c                | 118 ++++++++++++++++
 9 files changed, 820 insertions(+)

commit a782bfd97f3981e00a8813f46008dc7435cfdfd9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 26 09:11:59 2016 -0400

    CDRIVER-1144 factor SDAM spec tests

 tests/json-test.c        | 97 ++++++++++++++++++++++++++++++++++++++++++++++++
 tests/json-test.h        |  8 ++++
 tests/test-mongoc-sdam.c | 67 ++-------------------------------
 3 files changed, 108 insertions(+), 64 deletions(-)

commit 4ed64bcc495b0ace7563153ddb4198f2551b08eb
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 1 10:21:12 2016 -0700

    Make sure our scripts are executable
    
    should fix code coverage on llvm

 .evergreen/compile-unix.sh      |  0
 .evergreen/compile-windows.sh   |  0
 .evergreen/compile.sh           |  0
 .evergreen/download-mongodb.sh  |  0
 .evergreen/integration-tests.sh |  0
 .evergreen/run-tests.sh         |  0
 .mci.yml                        | 10 ++++++++++
 7 files changed, 10 insertions(+)

commit 1fed4c9b16e2bdb63de803bacc521759dbf715b9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 31 14:43:54 2016 -0700

    CDRIVER-1463: Less frequent ZAP and Solaris builds

 .mci.yml | 8 ++++++++
 1 file changed, 8 insertions(+)

commit da04747925a13e384ab196c6008f0014c6887496
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 12:21:27 2016 -0400

    CDRIVER-1144 make APM docs consistent

 doc/mongoc_apm_callbacks_destroy.page                    | 5 ++++-
 doc/mongoc_apm_callbacks_new.page                        | 5 ++++-
 doc/mongoc_apm_callbacks_t.page                          | 6 +++++-
 doc/mongoc_apm_command_failed_get_hint.page              | 7 +++++--
 doc/mongoc_apm_command_failed_t.page                     | 7 ++++++-
 doc/mongoc_apm_command_started_get_hint.page             | 7 +++++--
 doc/mongoc_apm_command_started_t.page                    | 6 +++++-
 doc/mongoc_apm_command_succeeded_get_hint.page           | 7 +++++--
 doc/mongoc_apm_command_succeeded_t.page                  | 8 ++++++--
 doc/mongoc_apm_server_changed_t.page                     | 8 ++++++--
 doc/mongoc_apm_server_closed_t.page                      | 8 ++++++--
 doc/mongoc_apm_server_heartbeat_failed_t.page            | 8 ++++++--
 doc/mongoc_apm_server_heartbeat_started_t.page           | 8 ++++++--
 doc/mongoc_apm_server_heartbeat_succeeded_t.page         | 8 ++++++--
 doc/mongoc_apm_server_opening_t.page                     | 8 ++++++--
 doc/mongoc_apm_set_command_failed_cb.page                | 7 +++++--
 doc/mongoc_apm_set_command_started_cb.page               | 5 ++++-
 doc/mongoc_apm_set_command_succeeded_cb.page             | 5 ++++-
 doc/mongoc_apm_topology_changed_t.page                   | 8 ++++++--
 doc/mongoc_apm_topology_closed_t.page                    | 8 ++++++--
 doc/mongoc_apm_topology_opening_t.page                   | 8 ++++++--
 doc/mongoc_client_pool_set_apm_callbacks.page            | 5 ++++-
 doc/mongoc_client_set_apm_callbacks.page                 | 5 ++++-
 doc/mongoc_topology_description_has_readable_server.page | 5 ++++-
 doc/mongoc_topology_description_has_writable_server.page | 5 ++++-
 25 files changed, 128 insertions(+), 39 deletions(-)

commit 3e612b59108092bc43c0298a71f98b78a71c8d93
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 12:07:43 2016 -0400

    clean up mongoc_server_description_type.page

 doc/mongoc_server_description_type.page | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 66b2ec6a48decc05db5a925577ead99250d15fae
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 1 08:26:27 2016 -0400

    CDRIVER-1508 fix multiple_selection_errors test

 tests/test-mongoc-topology.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 1f01f44ef2d512ac0adb40ca477f62dc7ac06f25
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 29 22:37:34 2016 -0400

    CDRIVER-769 update APM command-monitoring docs

 doc/mongoc_apm_callbacks_t.page                    |  2 +-
 ...mongoc_apm_command_failed_get_command_name.page |  6 +++-
 doc/mongoc_apm_command_failed_get_context.page     |  6 +++-
 doc/mongoc_apm_command_failed_get_duration.page    |  6 +++-
 doc/mongoc_apm_command_failed_get_error.page       | 10 ++++--
 doc/mongoc_apm_command_failed_get_host.page        |  8 +++--
 ...mongoc_apm_command_failed_get_operation_id.page |  6 +++-
 doc/mongoc_apm_command_failed_get_request_id.page  |  6 +++-
 doc/mongoc_apm_command_failed_get_server_id.page   | 40 ++++++++++++++++++++++
 doc/mongoc_apm_command_failed_t.page               |  2 +-
 doc/mongoc_apm_command_started_get_command.page    |  6 +++-
 ...ongoc_apm_command_started_get_command_name.page |  6 +++-
 doc/mongoc_apm_command_started_get_context.page    |  6 +++-
 ...ngoc_apm_command_started_get_database_name.page |  6 +++-
 doc/mongoc_apm_command_started_get_host.page       |  8 +++--
 ...ongoc_apm_command_started_get_operation_id.page |  6 +++-
 doc/mongoc_apm_command_started_get_request_id.page |  6 +++-
 doc/mongoc_apm_command_started_get_server_id.page  | 40 ++++++++++++++++++++++
 doc/mongoc_apm_command_started_t.page              |  2 +-
 ...goc_apm_command_succeeded_get_command_name.page |  6 +++-
 doc/mongoc_apm_command_succeeded_get_context.page  |  6 +++-
 doc/mongoc_apm_command_succeeded_get_duration.page |  6 +++-
 doc/mongoc_apm_command_succeeded_get_host.page     |  8 +++--
 ...goc_apm_command_succeeded_get_operation_id.page |  6 +++-
 doc/mongoc_apm_command_succeeded_get_reply.page    |  6 +++-
 ...ongoc_apm_command_succeeded_get_request_id.page |  6 +++-
 ...mongoc_apm_command_succeeded_get_server_id.page | 40 ++++++++++++++++++++++
 doc/mongoc_apm_command_succeeded_t.page            |  2 +-
 doc/mongoc_apm_server_changed_t.page               |  2 +-
 doc/mongoc_apm_server_closed_t.page                |  2 +-
 ...ngoc_apm_server_heartbeat_failed_get_error.page |  9 ++---
 doc/mongoc_apm_server_heartbeat_failed_t.page      |  2 +-
 doc/mongoc_apm_server_heartbeat_started_t.page     |  2 +-
 doc/mongoc_apm_server_heartbeat_succeeded_t.page   |  2 +-
 doc/mongoc_apm_server_opening_t.page               |  2 +-
 doc/mongoc_apm_topology_changed_t.page             |  4 +--
 doc/mongoc_apm_topology_closed_t.page              |  2 +-
 doc/mongoc_apm_topology_opening_t.page             |  2 +-
 38 files changed, 246 insertions(+), 47 deletions(-)

commit 9ad8cabe4c19545b827ea05eccf51d93427183a5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 13:20:19 2016 -0400

    fix serverSelectionTryOnce test

 tests/test-mongoc-topology.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit d8bb1d9ddb439ff35867a63ad3818b87e89797b9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 21:31:25 2016 -0400

    only run max staleness tests if JSON files available
    
    Work around difficulties with make distcheck.

 tests/test-mongoc-max-staleness.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit ee1246a49073b105f7ed33c980b30cea290aa9c0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 21:25:17 2016 -0400

    CDRIVER-1363 distribute max staleness JSON tests

 tests/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6cf908d6f8f594e8b1de3fb7d4a7b1f5c5bd367e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 21:24:43 2016 -0400

    CDRIVER-1144 distribute mongoc-topology-description.h

 src/mongoc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit ae871e7664fdec721030c41752e8aaad9b49b23e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 31 12:46:55 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 645779fb8c67add0706427897e34b39bbad7b136
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 31 09:18:29 2016 -0700

    CDRIVER-1507: Secure Channel doesn't compile on VS 2010

 src/mongoc/mongoc-secure-channel.c            |  3 +++
 src/mongoc/mongoc-stream-tls-secure-channel.c | 10 ++++++----
 2 files changed, 9 insertions(+), 4 deletions(-)

commit 3ce74ad499c705cdb7043fa1b19bb847fe948974
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 31 09:14:52 2016 -0700

    This is a 10second testcase

 tests/test-mongoc-client.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 48c4bd710db66a5232e3b7ad4c76f45a42e47dfd
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 31 11:56:43 2016 -0700

    CDRIVER-1504 Don't warn when intentionally disabled

 src/mongoc/mongoc-counters.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 8fd25223acba9e63fe81c1d4712890cad96163b8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 13 12:17:23 2016 -0400

    CDRIVER-748 thread-sanitize the mock server
    
    It had been reading client requests on a worker thread, then passing the
    client stream to the main thread to right the server reply. Don't share
    the stream object between threads: enqueue the main thread's reply and
    actually send it on the worker thread.

 tests/mock_server/mock-server.c        | 242 ++++++++++++++++++++++-----------
 tests/mock_server/request.c            |   4 +-
 tests/mock_server/request.h            |   5 +-
 tests/test-mongoc-topology-reconcile.c |   4 +
 4 files changed, 173 insertions(+), 82 deletions(-)

commit 63ce66dd5df8cd91ee31f27268a129cfbdbfec5d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 13 12:15:23 2016 -0400

    CDRIVER-748 thread-sanitize the topology tests
    
    Valgrind's DRD rightly warns that future_topology_select and the main
    thread have conflicting loads of "scanner->async->ncmds".

 tests/TestSuite.h                    | 13 -------------
 tests/test-mongoc-topology-scanner.c |  9 +--------
 2 files changed, 1 insertion(+), 21 deletions(-)

commit 7a29dff906ff574fb5b6f60743826b6a0ab32335
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 13 11:54:49 2016 -0400

    mock server code style

 tests/mock_server/mock-server.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit af645b5b85d8d84b969ce6937fa45bfd80933b09
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 12:03:23 2016 -0400

    break long lines in bulk tutorial

 doc/mongoc_bulk.page | 20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)

commit bc116fe08857837980a64b36bce8beac7d9c4874
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 31 09:28:06 2016 -0400

    typo in mongoc_collection_find.page

 doc/mongoc_collection_find.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0bb66a19629e52c061f1d63f72298e396eca8466
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 30 14:48:39 2016 -0700

    This file was originally created in 2013, only renamed in 2016

 src/mongoc/mongoc-trace-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 029d2202f054ce9ac26ed01eab736267e7aa4ed0
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 30 14:39:06 2016 -0700

    No need to cat these things, they are attached to the task

 .evergreen/integration-tests.sh | 5 -----
 1 file changed, 5 deletions(-)

commit 8e209e4af5ccff3920a012dd1da8ee8048197806
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 30 14:12:37 2016 -0700

    CDRIVER-1486: Rename mongoc-trace.h -> mongoc-trace-private.h

 src/mongoc/Makefile.am                          |  2 +-
 src/mongoc/mongoc-buffer.c                      |  2 +-
 src/mongoc/mongoc-bulk-operation.c              |  2 +-
 src/mongoc/mongoc-client-pool.c                 |  2 +-
 src/mongoc/mongoc-client.c                      |  2 +-
 src/mongoc/mongoc-cluster.c                     |  2 +-
 src/mongoc/mongoc-collection.c                  |  2 +-
 src/mongoc/mongoc-cursor-array.c                |  2 +-
 src/mongoc/mongoc-cursor-cursorid.c             |  2 +-
 src/mongoc/mongoc-cursor-transform.c            |  2 +-
 src/mongoc/mongoc-cursor.c                      |  2 +-
 src/mongoc/mongoc-database.c                    |  2 +-
 src/mongoc/mongoc-gridfs-file-list.c            |  2 +-
 src/mongoc/mongoc-gridfs-file-page.c            |  2 +-
 src/mongoc/mongoc-gridfs-file.c                 |  2 +-
 src/mongoc/mongoc-gridfs.c                      |  2 +-
 src/mongoc/mongoc-index.c                       |  2 +-
 src/mongoc/mongoc-init.c                        |  2 +-
 src/mongoc/mongoc-libressl.c                    |  2 +-
 src/mongoc/mongoc-linux-distro-scanner.c        |  2 +-
 src/mongoc/mongoc-openssl.c                     |  2 +-
 src/mongoc/mongoc-read-prefs.c                  |  2 +-
 src/mongoc/mongoc-rpc.c                         |  2 +-
 src/mongoc/mongoc-secure-channel.c              |  2 +-
 src/mongoc/mongoc-secure-transport.c            |  2 +-
 src/mongoc/mongoc-server-description.c          |  2 +-
 src/mongoc/mongoc-socket.c                      |  2 +-
 src/mongoc/mongoc-stream-buffered.c             |  2 +-
 src/mongoc/mongoc-stream-file.c                 |  2 +-
 src/mongoc/mongoc-stream-gridfs.c               |  2 +-
 src/mongoc/mongoc-stream-socket.c               |  2 +-
 src/mongoc/mongoc-stream-tls-libressl.c         |  2 +-
 src/mongoc/mongoc-stream-tls-openssl-bio.c      |  2 +-
 src/mongoc/mongoc-stream-tls-openssl.c          |  2 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c   |  2 +-
 src/mongoc/mongoc-stream-tls-secure-transport.c |  2 +-
 src/mongoc/mongoc-stream-tls.c                  |  2 +-
 src/mongoc/mongoc-stream.c                      |  2 +-
 src/mongoc/mongoc-topology-description.c        |  2 +-
 src/mongoc/mongoc-topology-scanner.c            |  2 +-
 src/mongoc/mongoc-trace-private.h               | 61 +++++++++++++++++++++++++
 src/mongoc/mongoc-trace.h                       | 61 -------------------------
 src/mongoc/mongoc-write-command.c               |  2 +-
 tests/mock_server/mock-server.c                 |  1 +
 tests/test-mongoc-log.c                         |  2 +-
 45 files changed, 104 insertions(+), 103 deletions(-)

commit 0fc6ab2cc90fc56210adee926b071d17578d9b39
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 30 14:04:44 2016 -0700

    Revert "CDRIVER-1408 making mongoc-trace.h public"
    
    This reverts commit 110e5e7b75e38c956ae6b114c3dd49aa2029e497.

 CMakeLists.txt                    |  2 --
 src/mongoc/Makefile.am            |  1 -
 src/mongoc/mongoc-socket.c        |  1 -
 src/mongoc/mongoc-stream.c        |  1 -
 src/mongoc/mongoc-trace-private.h | 54 ---------------------------------------
 src/mongoc/mongoc-trace.h         | 20 ++++++++++-----
 src/mongoc/mongoc.h               |  1 -
 7 files changed, 14 insertions(+), 66 deletions(-)

commit fdf59df13452271dae9ac26751ae2d4aab698ea5
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 29 11:02:43 2016 -0700

    CDRIVER-1467: Rename to MongoDB Handshake Protocol

 CMakeLists.txt                                   |  12 +-
 doc/mongoc_client_pool_set_appname.page          |   2 +-
 doc/mongoc_client_set_appname.page               |   6 +-
 examples/parse_handshake_cfg.py                  |  41 ++
 metadata_script.py                               |  41 --
 src/mongoc/Makefile.am                           |  10 +-
 src/mongoc/mongoc-config.h.in                    |   6 +-
 src/mongoc/mongoc-handshake-compiler-private.h   |  63 +++
 src/mongoc/mongoc-handshake-os-private.h         |  90 ++++
 src/mongoc/mongoc-handshake-private.h            |  98 +++++
 src/mongoc/mongoc-handshake.c                    | 513 +++++++++++++++++++++++
 src/mongoc/mongoc-handshake.h                    |  38 ++
 src/mongoc/mongoc-init.c                         |  14 +-
 src/mongoc/mongoc-linux-distro-scanner-private.h |  34 +-
 src/mongoc/mongoc-linux-distro-scanner.c         |  16 +-
 src/mongoc/mongoc-metadata-compiler-private.h    |  63 ---
 src/mongoc/mongoc-metadata-os-private.h          |  90 ----
 src/mongoc/mongoc-metadata-private.h             |  87 ----
 src/mongoc/mongoc-metadata.c                     | 510 ----------------------
 src/mongoc/mongoc-metadata.h                     |  37 --
 src/mongoc/mongoc-topology-scanner-private.h     |   4 +-
 src/mongoc/mongoc-topology-scanner.c             |  42 +-
 src/mongoc/mongoc-topology.c                     |   8 +-
 src/mongoc/mongoc-uri.c                          |   4 +-
 src/mongoc/mongoc.h                              |   2 +-
 tests/Makefile.am                                |   2 +-
 tests/test-libmongoc.c                           |   4 +-
 tests/test-mongoc-client-pool.c                  |   8 +-
 tests/test-mongoc-client.c                       |  28 +-
 tests/test-mongoc-handshake.c                    | 481 +++++++++++++++++++++
 tests/test-mongoc-linux-distro-scanner.c         |   2 +-
 tests/test-mongoc-metadata.c                     | 481 ---------------------
 32 files changed, 1427 insertions(+), 1410 deletions(-)

commit 54fe15f2813cfc66d6031650b8b0d074c24651e7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 21 19:12:13 2016 -0400

    CDRIVER-1144 declare SDAM monitoring events

 build/autotools/versions.ldscript                  |  20 ++
 build/cmake/libmongoc-ssl.def                      |  20 ++
 build/cmake/libmongoc.def                          |  20 ++
 doc/mongoc_apm_server_changed_get_context.page     |  41 ++++
 doc/mongoc_apm_server_changed_get_host.page        |  42 ++++
 ...goc_apm_server_changed_get_new_description.page |  42 ++++
 ...pm_server_changed_get_previous_description.page |  42 ++++
 doc/mongoc_apm_server_changed_get_topology_id.page |  42 ++++
 doc/mongoc_apm_server_changed_t.page               |  22 ++
 doc/mongoc_apm_server_closed_get_context.page      |  41 ++++
 doc/mongoc_apm_server_closed_get_host.page         |  42 ++++
 doc/mongoc_apm_server_closed_get_topology_id.page  |  42 ++++
 doc/mongoc_apm_server_closed_t.page                |  22 ++
 ...oc_apm_server_heartbeat_failed_get_context.page |  41 ++++
 ...c_apm_server_heartbeat_failed_get_duration.page |  41 ++++
 ...ngoc_apm_server_heartbeat_failed_get_error.page |  42 ++++
 ...ongoc_apm_server_heartbeat_failed_get_host.page |  42 ++++
 doc/mongoc_apm_server_heartbeat_failed_t.page      |  22 ++
 ...c_apm_server_heartbeat_started_get_context.page |  41 ++++
 ...ngoc_apm_server_heartbeat_started_get_host.page |  42 ++++
 doc/mongoc_apm_server_heartbeat_started_t.page     |  22 ++
 ...apm_server_heartbeat_succeeded_get_context.page |  41 ++++
 ...pm_server_heartbeat_succeeded_get_duration.page |  41 ++++
 ...oc_apm_server_heartbeat_succeeded_get_host.page |  42 ++++
 ...c_apm_server_heartbeat_succeeded_get_reply.page |  42 ++++
 doc/mongoc_apm_server_heartbeat_succeeded_t.page   |  22 ++
 doc/mongoc_apm_server_opening_get_context.page     |  41 ++++
 doc/mongoc_apm_server_opening_get_host.page        |  42 ++++
 doc/mongoc_apm_server_opening_get_topology_id.page |  42 ++++
 doc/mongoc_apm_server_opening_t.page               |  22 ++
 doc/mongoc_apm_topology_changed_get_context.page   |  41 ++++
 ...c_apm_topology_changed_get_new_description.page |  42 ++++
 ..._topology_changed_get_previous_description.page |  42 ++++
 ...ongoc_apm_topology_changed_get_topology_id.page |  42 ++++
 doc/mongoc_apm_topology_changed_t.page             |  22 ++
 doc/mongoc_apm_topology_closed_get_context.page    |  41 ++++
 ...mongoc_apm_topology_closed_get_topology_id.page |  42 ++++
 doc/mongoc_apm_topology_closed_t.page              |  22 ++
 doc/mongoc_apm_topology_opening_get_context.page   |  41 ++++
 ...ongoc_apm_topology_opening_get_topology_id.page |  42 ++++
 doc/mongoc_apm_topology_opening_t.page             |  22 ++
 src/libmongoc.symbols                              |  20 ++
 src/mongoc/mongoc-apm-private.h                    |  80 ++++++-
 src/mongoc/mongoc-apm.c                            | 262 +++++++++++++++++++++
 src/mongoc/mongoc-apm.h                            | 218 ++++++++++++++---
 45 files changed, 2003 insertions(+), 42 deletions(-)

commit 023f38b0f5a54022b761a8af85f7572922846e74
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 24 14:57:01 2016 -0400

    CDRIVER-1144 public topology description functions

 CMakeLists.txt                                     |  1 +
 NEWS                                               |  4 +-
 build/autotools/versions.ldscript                  |  2 +
 build/cmake/libmongoc-ssl.def                      |  2 +
 build/cmake/libmongoc.def                          |  2 +
 ...c_topology_description_has_readable_server.page | 40 ++++++++++
 ...c_topology_description_has_writable_server.page | 35 +++++++++
 doc/mongoc_topology_description_t.page             | 32 ++++++++
 src/libmongoc.symbols                              |  2 +
 src/mongoc/mongoc-client-pool-private.h            | 11 ++-
 src/mongoc/mongoc-client-pool.c                    |  8 ++
 src/mongoc/mongoc-topology-description-private.h   | 31 ++++----
 src/mongoc/mongoc-topology-description.c           | 47 +++++++++++-
 src/mongoc/mongoc-topology-description.h           | 30 ++++++++
 tests/Makefile.am                                  |  1 +
 tests/test-libmongoc.c                             |  2 +
 tests/test-mongoc-topology-description.c           | 87 ++++++++++++++++++++++
 17 files changed, 316 insertions(+), 21 deletions(-)

commit acdb80f563415c5a7140e531f62bfffba194d396
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 28 23:02:32 2016 -0400

    CDRIVER-1495 leak in handshake data

 src/mongoc/mongoc-topology-scanner.c | 1 +
 1 file changed, 1 insertion(+)

commit 96354df77aeddb276712332e38030d569710908f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 19 14:13:56 2016 -0700

    Workaround BUILD-1998

 orchestration_configs/sharded_clusters/auth-ssl.json  | 2 ++
 orchestration_configs/sharded_clusters/auth.json      | 2 ++
 orchestration_configs/sharded_clusters/basic-ssl.json | 2 ++
 orchestration_configs/sharded_clusters/basic.json     | 2 ++
 4 files changed, 8 insertions(+)

commit 776a49fad683501d2934cd8b16d887d0d7bba43a
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 11 13:50:29 2016 -0700

    Rewrite Evergreen config to use shell scripts
    
    Avoid the YML programming this had turned into and fixes:
    - CDRIVER-663 i386, i686, and x86_64 build & test in Evergreen
    - CDRIVER-673 Test with and without SSL
    - CDRIVER-874 Mark bootstrapping failure as system failure, not tests
      failed
    - CDRIVER-1109 Improve SSL test matrix
    - CDRIVER-1371 Add SLES zSeries buildvariant to evergreen
    - CDRIVER-1382 Add ARM64 builds to evergreen (mongoc)
    - CDRIVER-1390 Add POWER8 Ubuntu builds to evergreen (mongoc)

 .evergreen/compile-unix.sh                         |  174 +
 .evergreen/compile-windows.sh                      |   89 +
 .evergreen/compile.sh                              |   17 +
 .evergreen/download-mongodb.sh                     |  223 +
 .evergreen/integration-tests.sh                    |   87 +
 .evergreen/llvm-gcov.sh                            |    2 +
 .evergreen/run-tests.sh                            |   68 +
 .mci.yml                                           | 6788 +++++++++++++++-----
 orchestration_configs/replica_sets/auth-ssl.json   |   63 +
 orchestration_configs/replica_sets/auth.json       |    3 -
 orchestration_configs/replica_sets/basic-ssl.json  |   60 +
 orchestration_configs/replica_sets/basic.json      |    3 -
 orchestration_configs/servers/auth-ssl.json        |    9 +-
 orchestration_configs/servers/auth.json            |    1 -
 orchestration_configs/servers/basic-ssl.json       |   29 +-
 orchestration_configs/servers/basic.json           |    1 -
 orchestration_configs/servers/mmapv1.json          |    1 -
 orchestration_configs/servers/wiredtiger.json      |    1 -
 .../sharded_clusters/auth-ssl.json                 |   43 +
 orchestration_configs/sharded_clusters/auth.json   |   12 +-
 .../sharded_clusters/basic-ssl.json                |   36 +
 orchestration_configs/sharded_clusters/basic.json  |   12 +-
 php.php                                            |  267 +
 tests/test-libmongoc.c                             |    4 +
 24 files changed, 6352 insertions(+), 1641 deletions(-)

commit 17dce792363c69b2dae4e062eb6f3cc6c5360aeb
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 9 11:12:26 2016 -0700

    CDRIVER-1442 Skip flaky tests

 tests/test-mongoc-cursor.c | 4 ++++
 1 file changed, 4 insertions(+)

commit f2a01fde35a04164ee37b46cd528415c2d9d8fbf
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 24 10:26:20 2016 -0700

    CDRIVER-1490 Certificate SAN ipAddress for IPv6 fails

 src/mongoc/mongoc-openssl.c            | 19 +++++++++++++------
 src/mongoc/mongoc-stream-tls-openssl.c |  3 ++-
 2 files changed, 15 insertions(+), 7 deletions(-)

commit 771ca075fb9ea6b73674939ee7f6c69225a88b97
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 23 13:29:39 2016 -0400

    CDRIVER-1144 add heartbeat to topology description

 src/mongoc/mongoc-client.c                       |  3 +-
 src/mongoc/mongoc-topology-description-private.h | 12 +++---
 src/mongoc/mongoc-topology-description.c         | 26 ++++++-------
 src/mongoc/mongoc-topology-private.h             |  2 -
 src/mongoc/mongoc-topology.c                     | 47 +++++++++++++-----------
 tests/json-test.c                                | 19 ++++------
 6 files changed, 50 insertions(+), 59 deletions(-)

commit c59c62859dcdcefa1ab4de638e286c3cff3de71a
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 23 13:18:16 2016 -0700

    CDRIVER-1484: Add SNI Support for OpenSSL

 src/mongoc/mongoc-stream-tls-openssl.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 21b2a5823019cdd047111007541c1eb43e7da4b7
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 23 14:57:17 2016 -0700

    Add news

 NEWS | 3 +++
 1 file changed, 3 insertions(+)

commit 98cd50989181f65a5cdcbb9a5d806338d54c93e3
Merge: 0b7c294 c9d39dd
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 23 14:49:38 2016 -0700

    Merge branch 'CDRIVER-1483-libtls'
    
    * CDRIVER-1483-libtls:
      Unconditionally install all header files
      CDRIVER-1483: Add support for native TLS on OpenBSD (LibreSSL, libtls)

commit c9d39dd8a6ca2fb499d28b0a7c82e1ba00d9d0d0
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 23 14:48:57 2016 -0700

    Unconditionally install all header files

 CMakeLists.txt | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit 1c37511645a79acfd0ecf8f9050e5746af89b704
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 18 14:29:35 2016 -0700

    CDRIVER-1483: Add support for native TLS on OpenBSD (LibreSSL, libtls)

 CMakeLists.txt                                  |  22 +-
 build/autotools/CheckSSL.m4                     |  27 +-
 metadata_script.py                              |   1 +
 src/mongoc/Makefile.am                          |   8 +
 src/mongoc/mongoc-async-cmd.c                   |   1 +
 src/mongoc/mongoc-config.h.in                   |  11 +
 src/mongoc/mongoc-crypto-openssl.c              |   2 +-
 src/mongoc/mongoc-init.c                        |   2 +
 src/mongoc/mongoc-libressl-private.h            |  45 +++
 src/mongoc/mongoc-libressl.c                    |  74 ++++
 src/mongoc/mongoc-metadata-private.h            |   3 +-
 src/mongoc/mongoc-metadata.c                    |   4 +
 src/mongoc/mongoc-rand-openssl.c                |   2 +-
 src/mongoc/mongoc-ssl.c                         |   5 +
 src/mongoc/mongoc-stream-tls-libressl-private.h |  48 +++
 src/mongoc/mongoc-stream-tls-libressl.c         | 504 ++++++++++++++++++++++++
 src/mongoc/mongoc-stream-tls-libressl.h         |  39 ++
 src/mongoc/mongoc-stream-tls-openssl-bio.c      |   2 +-
 src/mongoc/mongoc-stream-tls-openssl.c          |   2 +-
 src/mongoc/mongoc-stream-tls.c                  |   5 +
 tests/test-mongoc-stream-tls-error.c            |   2 +-
 tests/test-mongoc-stream-tls.c                  |   2 +-
 tests/test-x509.c                               |   4 +-
 23 files changed, 800 insertions(+), 15 deletions(-)

commit 0b7c29404909d288ab50c798cf2cf29cdeb5d959
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 12 15:01:42 2016 -0400

    CDRIVER-1426 fix locking around scanner-finish

 src/mongoc/mongoc-topology-scanner-private.h | 3 +++
 src/mongoc/mongoc-topology-scanner.c         | 5 ++---
 src/mongoc/mongoc-topology.c                 | 4 ++++
 3 files changed, 9 insertions(+), 3 deletions(-)

commit 02175a0fc597b59743e1fa967d21990721ef27af
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 12 12:46:26 2016 -0400

    CDRIVER-1480 race in logging system initialization

 src/mongoc/mongoc-log.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 5026d505acdf7627c94be4e8fd34dcbcf5f0102a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 13 15:47:18 2016 -0400

    link to libbson docs on new site mongoc.org

 build/libbson.xsl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0402b055070d76b6ffe830dd26a1c4b4299085e4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 12 12:46:00 2016 -0400

    CDRIVER-1473 delete flakey timeout test
    
    This test was to prove the scanner obeys connectTimeoutMS (CDRIVER-799),
    but test_select_after_try_once does that more simply and reliably.
    
    Also deals with CDRIVER-1305.

 tests/test-mongoc-topology.c | 225 +++----------------------------------------
 1 file changed, 13 insertions(+), 212 deletions(-)

commit 71c91060ffc3b8af2c984ac0622bc4d36e8663c7
Author: Alexey Vorobeyev <alexeyvo@softwareplanetgroup.com>
Date:   Sun Aug 21 00:58:11 2016 +0300

    Add declaration of secure_channel functions in .h file
    
    They are used in mongoc-stream-tls-secure-channel.c without declaration in header

 src/mongoc/mongoc-secure-channel-private.h | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 8b8b48da59dff9080ecef326aa504ce089a16da6
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 17 09:57:30 2016 -0700

    The package is called cyrus-sasl on FreeBSD

 doc/mongoc_installing.page.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e7a750fbedb4bbfc9ae45e36be3bc5628e0e3079
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 9 11:12:00 2016 -0700

    Extract the username+password from MONGOC_TEST_URI if used

 tests/test-libmongoc.c | 36 ++++++++++++++++++++++++++++++++++--
 1 file changed, 34 insertions(+), 2 deletions(-)

commit 0020af80d7ce8382b1b85e6f54d049c284c300d4
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 9 11:11:34 2016 -0700

    Print out the skipLive status in the info

 tests/TestSuite.c | 2 ++
 1 file changed, 2 insertions(+)

commit 5efd23f80c8e18862663b36e8c205854594fdf9a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 12 14:59:09 2016 -0700

    CDRIVER-1479 Use monotonic time for collection name generation

 tests/test-libmongoc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 64f0c6b46f925492febd0f15011c86f3716a311b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 13 14:32:26 2016 -0400

    make tests resilient to brief outages

 tests/test-libmongoc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9c58b553239cec67c866d5685b869bfe7059ee67
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 13 14:53:42 2016 -0400

    CDRIVER-1460 update dropDatabase writeConcern test
    
    Work around SERVER-25601.

 tests/test-mongoc-database.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit dde593cbe7a000999f5357dd7c3196b73e3794ae
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Mon Aug 8 17:01:20 2016 -0400

    CDRIVER-1460: database_drop, parse wc err and return false

 src/mongoc/mongoc-database.c | 18 +++++++---------
 tests/test-mongoc-database.c | 50 +++++++++++++++++++++++++++++++++++++-------
 2 files changed, 49 insertions(+), 19 deletions(-)

commit 52c51669bb2a77eb48dd0a29e419725d248cb1d4
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 12 11:13:50 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1d39a06ef0228b36846963d71376fdd19089cefe
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 12 11:13:28 2016 -0700

    CDRIVER-1432 Remove the experimental symbol files

 build/cmake/libmongoc-experimental.def     | 351 ----------------------------
 build/cmake/libmongoc-ssl-experimental.def | 359 -----------------------------
 build/cmake/libmongoc-ssl.def              |  12 +-
 build/cmake/libmongoc.def                  |  12 +-
 4 files changed, 18 insertions(+), 716 deletions(-)

commit f0b0322f56b2881952988e08734e6847ecd5e8e6
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 11 16:30:18 2016 -0700

    CDRIVER-1432 Enable MongoDB 3.4 features

 .mci.yml                                    | 57 ++++++++---------------------
 CMakeLists.txt                              | 53 ++++++---------------------
 NEWS                                        | 27 ++++++++++++--
 build/autotools/PrintBuildConfiguration.m4  |  9 +----
 build/autotools/ReadCommandLineArguments.m4 | 10 -----
 build/autotools/SetupAutomake.m4            |  2 -
 src/libbson                                 |  2 +-
 src/mongoc/Makefile.am                      | 22 ++++-------
 src/mongoc/mongoc-client-pool.c             |  6 ---
 src/mongoc/mongoc-client-pool.h             |  2 -
 src/mongoc/mongoc-client.c                  |  6 ---
 src/mongoc/mongoc-client.h                  |  2 -
 src/mongoc/mongoc-config.h.in               | 10 -----
 src/mongoc/mongoc-init.c                    |  6 ---
 src/mongoc/mongoc-read-prefs.c              |  6 ---
 src/mongoc/mongoc-read-prefs.h              |  2 -
 src/mongoc/mongoc-server-description.c      |  6 ---
 src/mongoc/mongoc-topology-scanner.c        | 10 -----
 src/mongoc/mongoc-topology.c                | 10 -----
 src/mongoc/mongoc-uri.c                     | 10 -----
 src/mongoc/mongoc-uri.h                     |  2 -
 src/mongoc/mongoc.h                         |  2 -
 tests/Makefile.am                           | 10 ++---
 tests/json-test.c                           |  2 -
 tests/test-conveniences.c                   |  4 --
 tests/test-libmongoc.c                      | 12 ------
 tests/test-mongoc-client-pool.c             |  4 --
 tests/test-mongoc-client.c                  |  6 ---
 tests/test-mongoc-collection.c              |  4 --
 29 files changed, 63 insertions(+), 241 deletions(-)

commit 38bcdf936c66ced11b748cb9daf974af0dc86afa
Merge: 0a1ed8f 69428d0
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Thu Aug 11 15:29:29 2016 -0700

    Merge pull request #393 from puppyofkosh/CDRIVER-1398-real
    
    CDRIVER-1398 metadata platform field

commit 69428d095b897cfdede1a3ddbff257528b67ccb7
Author: ian boros <ian.boros@10gen.com>
Date:   Tue Aug 9 14:24:17 2016 -0400

    CDRIVER-1398 metadata platform field

 CMakeLists.txt                                |  5 ++
 configure.ac                                  | 16 +++++
 metadata_script.py                            | 40 +++++++++++
 src/mongoc/Makefile.am                        |  1 +
 src/mongoc/mongoc-config.h.in                 | 18 +++++
 src/mongoc/mongoc-metadata-compiler-private.h | 63 ++++++++++++++++++
 src/mongoc/mongoc-metadata-private.h          | 20 ++++++
 src/mongoc/mongoc-metadata.c                  | 95 ++++++++++++++++++++++++++-
 8 files changed, 257 insertions(+), 1 deletion(-)

commit 0a1ed8f93c1a6a03c4cb042bd6cbc162cf3c14a5
Merge: c76a75e d543c7a
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Thu Aug 11 13:43:51 2016 -0700

    Merge pull request #392 from puppyofkosh/CDRIVER-1464
    
    CDRIVER-1464 use linux distro scanner in metadata

commit d543c7a904114b12238028b27820b56da391228f
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Aug 11 12:07:17 2016 -0400

    CDRIVER-1464 use linux distro scanner in metadata

 src/mongoc/mongoc-linux-distro-scanner.c |  3 ++
 src/mongoc/mongoc-metadata.c             | 56 +++++++++++++++-----------------
 2 files changed, 30 insertions(+), 29 deletions(-)

commit c76a75e39640a69302df8d0af8d4f2bf55e9eccb
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 10 15:29:10 2016 -0700

    CDRIVER-1342 Support new readConcern level "linearizable"

 doc/mongoc_read_concern_set_level.page |  2 +-
 doc/mongoc_read_concern_t.page         | 13 +++++++++----
 src/mongoc/mongoc-read-concern.c       |  4 +++-
 src/mongoc/mongoc-read-concern.h       |  5 +++--
 tests/test-mongoc-uri.c                |  5 +++++
 5 files changed, 21 insertions(+), 8 deletions(-)

commit bf6ca72e84828a9e139819dcf836131b82f95001
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 9 13:42:55 2016 -0700

    CDRIVER-1327 "make html" unnecessarily slow

 doc/html/Makefile.am | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 36538874cb7245eaa028d079f88ad180b574276d
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 10 15:08:19 2016 -0700

    Fix doc build due to recursive linking

 doc/mongoc_handshake_data_append.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9751e6bb7c5401982599f1da8e233bb29ebd4e2a
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 10 14:30:16 2016 -0700

    CDRIVER-1454 Upload built HTML docs from Evergreen builds

 .mci.yml | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 2dee16ff3b4bb292ca1ea761f1348b8f050cc61e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 10 14:26:35 2016 -0700

    CDRIVER-1470 make a home for mongoc_[init|cleanup]()

 doc/mongoc_cleanup.page      |  2 +-
 doc/mongoc_init.page         |  2 +-
 doc/mongoc_init_cleanup.page | 23 +++++++++++++++++++++++
 3 files changed, 25 insertions(+), 2 deletions(-)

commit e289a73426af8255724889daa3e16f114668cf6b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 10 14:25:51 2016 -0700

    CDRIVER-1470 List this page with its brethren

 doc/mongoc_stream_buffered_new.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 461ba4693ff7c6b267633628af6960a3774d8369
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 10 14:24:04 2016 -0700

    CDRIVER-1470 Remove doc pages that aren't visible

 doc/mongoc_stream_tls_check_cert.page   | 42 --------------------------------
 doc/mongoc_stream_tls_do_handshake.page | 41 -------------------------------
 doc/mongoc_stream_tls_new.page          | 43 ---------------------------------
 3 files changed, 126 deletions(-)

commit b746329231895e6b724b6c533876a84192642253
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 11 12:58:54 2016 -0400

    output to debug mock-server test failures

 build/future_function_templates/future.c.template |  2 +
 tests/mock_server/future.c                        | 30 +++++++++
 tests/mock_server/mock-server.c                   | 82 ++++++++++++-----------
 3 files changed, 75 insertions(+), 39 deletions(-)

commit b0948a6014e3956d44b960ad5ed05c1346fe4bae
Merge: 3debe03 b7f7acb
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Aug 11 11:50:08 2016 -0400

    Merge pull request #391 from fionaRowan/drop-index
    
    CDRIVER-1460: drop_index, parse wc err and return false

commit b7f7acb230a4896fb5afd18cc19f3f88c991531f
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Wed Aug 10 16:50:41 2016 -0400

    CDRIVER-1460: drop_index, parse wc err and return false

 src/mongoc/mongoc-collection.c | 15 +++-------
 tests/test-mongoc-collection.c | 63 ++++++++++++++++++++++++++++++++++--------
 2 files changed, 55 insertions(+), 23 deletions(-)

commit 3debe03d64395fe534fbd1550fd5b737aa9cc470
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 11 09:10:57 2016 -0400

    a couple bad links in docs

 doc/mongoc_collection_copy.page      | 2 +-
 doc/mongoc_collection_validate.page  | 2 +-
 doc/mongoc_database_copy.page        | 2 +-
 doc/mongoc_uri_set_read_prefs_t.page | 6 +++---
 4 files changed, 6 insertions(+), 6 deletions(-)

commit b0b36419d866dd9579431f6c0fee2ab4342a0c29
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 10 18:15:22 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d9abf9a7003e347bc9246d00ab8b7459c56cd408
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 10 17:00:07 2016 -0400

    1.4.0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>
    
    # Conflicts:
    #	VERSION_CURRENT

 VERSION_CURRENT  | 2 +-
 VERSION_RELEASED | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 7ad5b8da2cf61d5e85e00aefe7eb7b9072cd699d
Merge: 6c5ed13 93072e9
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Aug 10 16:16:06 2016 -0400

    Merge pull request #390 from puppyofkosh/CDRIVER-1396
    
    CDRIVER-1396 os version

commit 6c5ed136f9671fa3c137790a8da1ccce1352f358
Merge: 757eea8 333a129
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Aug 10 16:14:48 2016 -0400

    Merge pull request #389 from fionaRowan/rename
    
    CDRIVER-1322: mongoc_collection_rename_with_write_concern

commit 333a129d3131e128f0063bd2d5ba615f151346bd
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Sat Jul 30 13:31:40 2016 -0400

    CDRIVER-1322: mongoc_collection_rename_with_write_concern

 build/autotools/versions.ldscript          |  1 +
 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-collection.c             | 24 ++++++++-
 src/mongoc/mongoc-collection.h             |  7 +++
 tests/test-mongoc-collection.c             | 79 +++++++++++++++++++++++++++++-
 9 files changed, 113 insertions(+), 3 deletions(-)

commit 93072e9b377bdc0e302613d9f0566bb50d2ad663
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Aug 4 13:31:48 2016 -0400

    CDRIVER-1396 os version

 src/mongoc/mongoc-metadata.c | 50 ++++++++++++++++++++++++++++++++++++++++----
 tests/test-mongoc-metadata.c | 24 +++++++++++++++++++++
 2 files changed, 70 insertions(+), 4 deletions(-)

commit 757eea8db4b5f91dfe2bd531a5b957a7f3f93bae
Merge: c2a0e1c 7c813d4
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Aug 10 15:13:23 2016 -0400

    Merge pull request #388 from fionaRowan/CDRIVER-1322-create
    
    CDRIVER-1460: database_create_collection, parse wc err and return false

commit 7c813d45cdaca258469b61af57bdd328543d233f
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Aug 9 12:25:30 2016 -0400

    CDRIVER-1460: database_create_collection, parse wc err and return false

 src/mongoc/mongoc-database.c | 15 +++++--------
 tests/test-mongoc-database.c | 53 ++++++++++++++++++++++++++++++++++++++++----
 2 files changed, 54 insertions(+), 14 deletions(-)

commit c2a0e1cbfa3224384369f09b09c23ed141fe5b7e
Merge: 8e8a296 07f0526
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Aug 10 12:08:38 2016 -0400

    Merge pull request #387 from fionaRowan/coll-drop
    
    CDRIVER-1460: collection_drop, parse wc err and return false

commit 07f05266cfb4a9ea61fe71fd02a4f77fc1604dd5
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Mon Aug 8 16:45:10 2016 -0400

    CDRIVER-1460: collection_drop, parse wc err and return false

 src/mongoc/mongoc-client.c     | 12 +++++++--
 src/mongoc/mongoc-collection.c | 24 ++++++-----------
 tests/test-mongoc-collection.c | 58 ++++++++++++++++++++++++++++++++++++------
 3 files changed, 68 insertions(+), 26 deletions(-)

commit 8e8a296812268775129d394461ec81adb843cf0f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 9 15:46:56 2016 -0400

    CDRIVER-1446 rename "metadata" to "handshake" in public API

 build/autotools/versions.ldscript          |  3 +-
 build/cmake/libmongoc-experimental.def     |  8 ++--
 build/cmake/libmongoc-ssl-experimental.def |  8 ++--
 doc/mongoc_handshake_data_append.page      | 75 ++++++++++++++++++++++++++++++
 doc/mongoc_metadata_append.page            | 75 ------------------------------
 src/libmongoc.symbols                      |  4 +-
 src/mongoc/mongoc-metadata.c               |  6 +--
 src/mongoc/mongoc-metadata.h               |  6 +--
 tests/test-mongoc-metadata.c               | 18 +++----
 9 files changed, 101 insertions(+), 102 deletions(-)

commit b1a5d8f765278bc23e3de9f4134cf99563204ffc
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 8 13:57:09 2016 -0700

    Remove duplicated todo for CDRIVER-689

 tests/test-mongoc-client.c | 3 ---
 1 file changed, 3 deletions(-)

commit cde1954eaefb53c6397a152784e9281e796236b1
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 8 13:56:19 2016 -0700

    During testing, this is not an error
    
    Used by test_ssl_reconnect_pooled for example

 tests/mock_server/mock-server.c | 1 -
 1 file changed, 1 deletion(-)

commit c7cf601c7942ebd48bc1b607b459d17c71b98e43
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 9 08:18:52 2016 -0400

    CDRIVER-1457 update public symbols in 1.5

 build/autotools/versions.ldscript          | 24 ++++++++++++++++--------
 build/cmake/libmongoc-experimental.def     |  3 +++
 build/cmake/libmongoc-ssl-experimental.def |  3 +++
 build/cmake/libmongoc-ssl.def              |  3 +++
 build/cmake/libmongoc.def                  |  3 +++
 src/libmongoc.symbols                      |  4 ++++
 6 files changed, 32 insertions(+), 8 deletions(-)

commit a36d855160a6da7cdc045b904fa836e3b59fda5f
Merge: ded4667 0024235
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Aug 9 12:00:26 2016 -0400

    Merge pull request #386 from puppyofkosh/CDRIVER-1395-squished
    
    CDRIVER-1395 client metadata linux distro scanner

commit 0024235dc55835da0c6af12859cdafb07c6bde38
Author: ian boros <ian.boros@10gen.com>
Date:   Sun Jul 17 20:13:46 2016 -0400

    CDRIVER-1395 client metadata linux distro scanner

 CMakeLists.txt                                     |   3 +
 src/mongoc/Makefile.am                             |   2 +
 src/mongoc/mongoc-linux-distro-scanner-private.h   |  53 +++
 src/mongoc/mongoc-linux-distro-scanner.c           | 431 +++++++++++++++++++++
 tests/Makefile.am                                  |   1 +
 tests/TestSuite.h                                  |   2 +
 tests/release_files/empty-file.txt                 |   0
 tests/release_files/example-etc-fedora-release.txt |   1 +
 tests/release_files/example-etc-os-release.txt     |   9 +
 .../example-etc-xyz-release-no-delimiter.txt       |   1 +
 tests/release_files/example-key-value-file.txt     | 101 +++++
 .../example-lsb-file-with-super-long-line.txt      |   3 +
 tests/release_files/example-lsb-file.txt           |   6 +
 tests/test-libmongoc.c                             |   6 +
 tests/test-mongoc-linux-distro-scanner.c           | 240 ++++++++++++
 15 files changed, 859 insertions(+)

commit ded4667adf36b003b998d2795412fc7c034af255
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 8 22:15:51 2016 -0400

    Revert "CDRIVER-1409 test that TLS scanner is async"
    
    This reverts commit 8642ac1a6dd26cc265fbd25c35d7134a21deb0ae.

 src/mongoc/mongoc-stream-tls-secure-channel.c   |   4 -
 src/mongoc/mongoc-stream-tls-secure-transport.c |   6 -
 tests/mock_server/mock-server.c                 |   4 -
 tests/test-mongoc-async.c                       | 221 ++++++++++--------------
 tests/test-mongoc-cluster.c                     |   2 +
 5 files changed, 96 insertions(+), 141 deletions(-)

commit cb70003e400448b24d3396fd57d958da3e24d78d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 8 22:06:28 2016 -0400

    Revert "CDRIVER-1423 skip large msg tests w/ OpenSSL on Win"
    
    This reverts commit d9b55e6ca8406544a3a13f3ee6dbf5409fec81d8.

 tests/test-bulk.c              | 4 ----
 tests/test-mongoc-collection.c | 4 ----
 2 files changed, 8 deletions(-)

commit 54078d5fbb42ee83f5a63c8489e49b9c6c4c48b7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 8 22:05:19 2016 -0400

    Revert "Mark these as slow, they take forever"
    
    This reverts commit 6c1dad913b404c560b75e7edf478586d9d7d6270.

 tests/test-mongoc-async.c | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit a09c979e5138b81526a5c1581fdb2add814c0b78
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 8 22:02:55 2016 -0400

    Revert "CDRIVER-1147: Let the other end know we are about to shutdown"
    
    This reverts commit 12120ec1cada09283ed7f40ac175f664d356e40f.

 src/mongoc/mongoc-stream-tls-openssl.c | 3 ---
 1 file changed, 3 deletions(-)

commit bed373fc4f353220121ff989e8cf9c596bf53701
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 16:47:51 2016 -0400

    CDRIVER-1426 reliably test DNS error messages

 src/mongoc/mongoc-client-pool-private.h     |  8 ++++-
 src/mongoc/mongoc-client-pool.c             | 19 ++++++++++++
 tests/test-mongoc-server-selection-errors.c | 45 +++++++++++++++++++++++------
 3 files changed, 62 insertions(+), 10 deletions(-)

commit b10c42e3c9fcf3f8a32b0f80b68c8f4c5be69424
Merge: 5ccab0d 4adcf29
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 8 15:35:33 2016 -0700

    Merge branch 'drop-index' of https://github.com/fionaRowan/mongo-c-driver into fionaRowan-drop-index
    
    * 'drop-index' of https://github.com/fionaRowan/mongo-c-driver:
      CDRIVER-1322: mongoc_collection_drop_index_with_write_concern
    
    Conflicts:
    	build/autotools/versions.ldscript

commit 5ccab0d4d7fee8a91570fe61a23231782f3d929e
Merge: 4ca51b9 24158ae
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Mon Aug 8 15:32:14 2016 -0700

    Merge pull request #383 from puppyofkosh/CDRIVER-1397
    
    CDRIVER-1397 client metadata os architecture

commit 4ca51b9bff61e7c3854ed1f65abdcb74778b7ab0
Merge: a6baaf8 259244e
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Mon Aug 8 15:30:52 2016 -0700

    Merge pull request #384 from fionaRowan/index-2
    
    CDRIVER-1322: mongoc_collection_create_index_with_write_concern

commit a6baaf809f631f662b2a9b0a63c7e02bbfd7dd25
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 5 12:44:19 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 12df038bd2d2577313ac03a4a467fa696bba1117
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 5 12:43:42 2016 -0700

    CDRIVER-1443 Code Coverage Build broken with clang

 build/autotools/Coverage.m4 | 2 +-
 tests/Makefile.am           | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 6c1dad913b404c560b75e7edf478586d9d7d6270
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 5 12:43:24 2016 -0700

    Mark these as slow, they take forever

 tests/test-mongoc-async.c | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 0e082ac4b635d5d71a96363f48532f2fa6a6c3ed
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 8 15:51:16 2016 -0400

    enable verbose mock server logging in evergreen

 .mci.yml | 5 +++++
 1 file changed, 5 insertions(+)

commit 259244edacc22a983147462d5fa0aa8060dc2753
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Sat Jul 30 15:03:06 2016 -0400

    CDRIVER-1322: mongoc_collection_create_index_with_write_concern

 build/autotools/versions.ldscript          |   2 +-
 build/cmake/libmongoc-experimental.def     |   2 +-
 build/cmake/libmongoc-ssl-experimental.def |   2 +-
 build/cmake/libmongoc-ssl.def              |   2 +-
 build/cmake/libmongoc.def                  |   2 +-
 src/libmongoc.symbols                      |   2 +-
 src/mongoc/mongoc-collection.c             |  26 ++++---
 src/mongoc/mongoc-collection.h             |   4 +-
 tests/test-mongoc-collection.c             | 118 +++++++++++++++++++++++++----
 9 files changed, 129 insertions(+), 31 deletions(-)

commit 24158aefcd04acc8e323264cb78837be95269cc4
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Aug 4 10:52:30 2016 -0400

    CDRIVER-1397 client metadata os architecture

 src/mongoc/mongoc-metadata.c | 56 +++++++++++++++++++++++++++++++++++++++++---
 tests/test-mongoc-metadata.c | 23 ++++++++++++++++++
 2 files changed, 76 insertions(+), 3 deletions(-)

commit 92b64bff900a4dab6aa81a7ff13ec521c1485190
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 6 11:14:59 2016 -0400

    2-minute timeout for orchestration to start topology

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fb4f4320b510909d80a3fe12297da82685088d84
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 6 09:01:54 2016 -0400

    style in TLS test

 tests/test-mongoc-client.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 077f74e69306f46725cb5d263945c63ab07890f4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 6 08:38:09 2016 -0400

    useless assert in mock server

 tests/mock_server/mock-server.c | 2 --
 1 file changed, 2 deletions(-)

commit 034a188f43af6586e99b47f81bf3e88db5b8d2db
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 6 08:37:33 2016 -0400

    obsolete TODOs in mock server

 tests/mock_server/mock-server.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 1492cab7d4a099c97fb931635c66e0722d147081
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 6 08:36:11 2016 -0400

    distinguish mock server TLS err messages

 tests/mock_server/mock-server.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 35b5749edb2758c2a38839cd8e0da55b45c8f423
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 6 08:19:32 2016 -0400

    suppress messages from TLS tests
    
    Added output by mistaked in #0b767d31.

 tests/ssl-test.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit dd6b5450344cf812bb4c801f5e5d5caa9094327c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 18:15:40 2016 -0400

    capture_logs mustn't catch test messages
    
    We want to stop MONGOC_ERROR-type logging from being printed in certain
    tests, but for the sake of debugging we must print messages from tests.

 tests/TestSuite.c                      | 30 +++++------
 tests/TestSuite.h                      |  2 +
 tests/json-test.c                      | 10 ++--
 tests/mock_server/mock-server.c        |  7 +--
 tests/mock_server/request.c            | 96 +++++++++++++++++-----------------
 tests/ssl-test.c                       | 15 +++---
 tests/test-bulk.c                      |  2 +-
 tests/test-conveniences.c              | 17 +++---
 tests/test-mongoc-client.c             |  2 +-
 tests/test-mongoc-command-monitoring.c | 16 +++---
 tests/test-mongoc-cursor.c             | 10 ++--
 11 files changed, 106 insertions(+), 101 deletions(-)

commit 0b767d31b98e42b7de16d5277262939fc324034f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 09:38:13 2016 -0400

    CDRIVER-1421 unused function warning on big-endian

 src/mongoc/mongoc-rpc.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit c37e4598ab5a058a1c85c42e0fb6c0592d500fff
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 09:38:13 2016 -0400

    CDRIVER-1434 show set_error_api in examples

 examples/aggregation/aggregation1.c                   | 1 +
 examples/basic_aggregation/basic-aggregation.c        | 1 +
 examples/bulk/bulk1.c                                 | 1 +
 examples/bulk/bulk2.c                                 | 1 +
 examples/bulk/bulk3.c                                 | 1 +
 examples/bulk/bulk4.c                                 | 1 +
 examples/bulk/bulk5.c                                 | 1 +
 examples/bulk/bulk6.c                                 | 1 +
 examples/common_operations/common-operations.c        | 1 +
 examples/example-application-performance-monitoring.c | 1 +
 examples/example-client.c                             | 2 ++
 examples/example-gridfs.c                             | 1 +
 examples/example-scram.c                              | 5 ++++-
 examples/find-and-modify.c                            | 1 +
 examples/find_and_modify_with_opts/fam.c              | 1 +
 examples/mongoc-dump.c                                | 2 ++
 examples/mongoc-ping.c                                | 2 ++
 examples/mongoc-tail.c                                | 6 ++++--
 18 files changed, 27 insertions(+), 3 deletions(-)

commit 5662841c60072b35b299c7e9275ef0dc1dbf7f60
Merge: 77b989b 37ff60f
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Aug 5 15:34:52 2016 -0400

    Merge pull request #382 from fionaRowan/CDRIVER-1448
    
    CDRIVER-1448: _mongoc_client_command_with_write_concern

commit 37ff60fc7103748cc3e4de28cd88f98aafd8c8c8
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Thu Aug 4 16:21:42 2016 -0400

    CDRIVER-1448: _mongoc_client_command_with_write_concern

 src/mongoc/mongoc-client-private.h |  8 ++++
 src/mongoc/mongoc-client.c         | 77 ++++++++++++++++++++++++++++++++
 tests/test-mongoc-client.c         | 90 +++++++++++++++++++++++++++++++++++++-
 3 files changed, 174 insertions(+), 1 deletion(-)

commit 77b989b97a93891c6b6e9877595a8ffc8c194e75
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 10:00:48 2016 -0400

    unset serverSelectionTryOnce for most tests
    
    Make tests a little more resilient to transient errors.

 tests/test-libmongoc.c | 28 +++++++++++++++++++---------
 1 file changed, 19 insertions(+), 9 deletions(-)

commit be06ff243d7b79f3568eb6f351281cc70c6f954c
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Aug 2 16:44:51 2016 -0700

    CDRIVER-1444 --enable-ssl and --enable-sasl autodetection broken

 build/autotools/CheckSSL.m4  |  1 +
 build/autotools/CheckSasl.m4 | 11 +++++++++++
 2 files changed, 12 insertions(+)

commit 6de9cd7fdd877e6d45a51cbcbd852a8290b337d4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 10:12:21 2016 -0400

    cat logs if orchestration can't start itself or topology

 .mci.yml                                          | 21 ++++++++++++---------
 orchestration_configs/replica_sets/auth.json      |  3 +++
 orchestration_configs/replica_sets/basic.json     |  3 +++
 orchestration_configs/servers/auth-ssl.json       |  1 +
 orchestration_configs/servers/auth.json           |  1 +
 orchestration_configs/servers/basic-ssl.json      |  1 +
 orchestration_configs/servers/basic.json          |  1 +
 orchestration_configs/servers/mmapv1.json         |  1 +
 orchestration_configs/servers/wiredtiger.json     |  1 +
 orchestration_configs/sharded_clusters/auth.json  | 12 ++++++++----
 orchestration_configs/sharded_clusters/basic.json | 12 ++++++++----
 11 files changed, 40 insertions(+), 17 deletions(-)

commit 0fe818d046886f4facd2c2ef82a879230e76cf42
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 4 16:40:46 2016 -0400

    CDRIVER-1439 handle spurious wakeup in mock server
    
    Not a verified bug, but for correctness, re-check the condition after
    cond_wait when starting a mock server's background thread.

 tests/mock_server/mock-server.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit aeb423474db0c7fcb0a2c9a22de441b24f8b7054
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 5 07:10:49 2016 -0400

    CDRIVER-1406 remove new err msg from mongoc_async_run

 src/mongoc/mongoc-async.c | 1 -
 1 file changed, 1 deletion(-)

commit adf3a9a1ae2cd220cbae36cd524056c1f20fb15f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 4 17:07:32 2016 -0400

    CDRIVER-1406 clang warnings

 src/mongoc/mongoc-async.c       |  8 +++++++-
 src/mongoc/mongoc-gridfs-file.c | 11 ++++++++++-
 src/mongoc/mongoc-openssl.c     |  1 -
 tests/mock_server/mock-server.c | 10 +++++-----
 tests/test-mongoc-metadata.c    |  1 -
 5 files changed, 22 insertions(+), 9 deletions(-)

commit ff3d5eaf2db4270f881157a518d16eee09c4f21f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 4 14:59:20 2016 -0400

    CDRIVER-1066 bump OpenSSL 1.1 pre5 to pre6

 .mci.yml | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit cd4c2b4f636baca5719614fe9e82ff37a336090b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 4 09:16:19 2016 -0400

    CDRIVER-1447 logic bug with tag_sets - fixup

 src/mongoc/mongoc-server-description.c | 1 -
 1 file changed, 1 deletion(-)

commit ce46fa29643e2416aff6f1f4c995029bb7200bb3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 4 09:15:48 2016 -0400

    Update selection tests from spec.

 .../read/Secondary_multi_tags2.json                | 60 ++++++++++++++++
 .../read/Nearest_multiple.json                     | 84 ++++++++++++++++++++++
 2 files changed, 144 insertions(+)

commit ebbcbb107752f9338269ef65a6b1f1dfa5b44748
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 4 09:14:55 2016 -0400

    Update staleness tests from spec.

 .../SecondaryPreferred_tags2.json                  | 33 ++++++++++++++++++----
 .../ReplicaSetWithPrimary/Secondary_tags2.json     |  2 +-
 2 files changed, 28 insertions(+), 7 deletions(-)

commit 17277906e9dfe1db7d7632bdb1082b0f7b1f4932
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 21:22:21 2016 -0400

    CDRIVER-1447 update NEWS

 NEWS | 1 +
 1 file changed, 1 insertion(+)

commit 3bd04d8c325f239cdf0cee7bf85cafff4d0e0cb0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 17:19:17 2016 -0400

    CDRIVER-1447 logic bug with tag_sets

 src/mongoc/mongoc-server-description.c             | 93 ++++++++++++++--------
 .../read/Secondary_multi_tags.json                 | 60 ++++++++++++++
 .../read/Secondary_multi_tags.yml                  | 29 +++++++
 3 files changed, 147 insertions(+), 35 deletions(-)

commit fd5553095ce3936c394b6103478a20113a555726
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 21:10:13 2016 -0400

    leak in cursor getmore test

 tests/test-mongoc-cursor.c | 1 +
 1 file changed, 1 insertion(+)

commit 14b98318cdc876cf347e59d99a525462c725a070
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 15:24:25 2016 -0400

    update staleness tests from spec repo

 .../ReplicaSetNoPrimary/PrimaryPreferred_tags.json | 84 +++++++++++++++++++
 .../ReplicaSetWithPrimary/Nearest_tags.json        | 84 +++++++++++++++++++
 .../SecondaryPreferred_tags2.json                  | 75 +++++++++++++++++
 .../ReplicaSetWithPrimary/Secondary_tags2.json     | 96 ++++++++++++++++++++++
 4 files changed, 339 insertions(+)

commit 2b06fb88b5a6d6ee30e01451af89ad199ccb5b62
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 11:21:28 2016 -0400

    CDRIVER-1363 bug in tag_sets filter.
    
    Servers already excluded for being too stale mustn't be counted as
    matching the tag_sets.

 src/mongoc/mongoc-server-description.c | 1 +
 1 file changed, 1 insertion(+)

commit 711e568cb7f6db327a94dad313cf1d3bdba817f7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 16:16:03 2016 -0400

    CDRIVER-1425 silence warning from handshake test

 tests/test-mongoc-metadata.c | 1 +
 1 file changed, 1 insertion(+)

commit ee7b7e1353c37ca78c1942b933c958d456d5a8b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 16:14:48 2016 -0400

    document MONGOC_TEST_MONITORING_VERBOSE env var

 CONTRIBUTING.md | 2 ++
 1 file changed, 2 insertions(+)

commit df8ec527e22493e46f9bde33699caa408b58f7fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 08:43:36 2016 -0400

    optionally skip slow DNS error tests

 tests/test-mongoc-server-selection-errors.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 2369196ea529a9cc87619562382d0bc16a260b71
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 3 09:52:25 2016 -0400

    cross-platform killall in .mci.yml

 .mci.yml | 46 +++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 39 insertions(+), 7 deletions(-)

commit 93e9bb0a0c03694bc457c0bdf9b4cb40e9358ee2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 2 10:39:11 2016 -0400

    CDRIVER-1426 don't clear error when scan starts

 src/mongoc/mongoc-topology-scanner.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit b6744aa68c77755d5bb53294110ba244d21b39c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 12:56:46 2016 -0400

    CDRIVER-1216 live tests on zSeries

 .mci.yml | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit f2578af5bf098890a9b8286c151be36b4482b7c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 31 21:06:14 2016 -0400

    CDRIVER-1216 test shouldn't rely on getaddrinfo timing

 tests/test-mongoc-client.c | 14 --------------
 1 file changed, 14 deletions(-)

commit 55d2f03a3d1a9fa2a7c2fa3259af02b1c9d3f500
Merge: 98713fe 6de567d
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Aug 3 15:04:07 2016 -0400

    Merge pull request #381 from fionaRowan/index-2-doc
    
    CDRIVER-1322: doc for mongoc_collection_create_index_with_write_concern

commit 6de567df424654b69f83ffddcc87bcd5d5d82c68
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Wed Aug 3 11:05:47 2016 -0400

    CDRIVER-1322: doc for mongoc_collection_create_index_with_write_concern

 doc/mongoc_collection_create_index.page            | 14 +----
 doc/mongoc_collection_create_index_2.page          | 55 -------------------
 ...collection_create_index_with_write_concern.page | 62 ++++++++++++++++++++++
 3 files changed, 63 insertions(+), 68 deletions(-)

commit 98713feddcc334e667c0f7a0cff82c4f5a900dcd
Merge: 14e685e 954b787
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Aug 2 10:24:16 2016 -0400

    Merge pull request #380 from fionaRowan/C-1414
    
    CDRIVER-1414: parse writeConcernErrors in command helper

commit 954b787f6217b69c2a6b7dee432654d27a5f741c
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Mon Aug 1 14:12:42 2016 -0400

    CDRIVER-1414: parse writeConcernErrors in command helper

 src/mongoc/mongoc-cursor.c        | 12 ++++++++++++
 src/mongoc/mongoc-write-concern.c |  1 +
 tests/test-mongoc-collection.c    |  8 +++-----
 3 files changed, 16 insertions(+), 5 deletions(-)

commit 14e685e8a5ccaec524f1e0be2c2751bd50cebfa8
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 28 17:53:16 2016 -0700

    Improve TLS documentations

 doc/mongoc_advanced_connections.page     | 16 ++++----
 doc/mongoc_client_pool_set_ssl_opts.page |  2 +-
 doc/mongoc_client_set_ssl_opts.page      |  2 +-
 doc/mongoc_installing.page.in            | 49 +++++++++++++++++++++---
 doc/mongoc_ssl_opt_t.page                | 65 +++++++++++++++++++++++++++++++-
 5 files changed, 116 insertions(+), 18 deletions(-)

commit e8c5e929bcf3920112bc59dc0aafdcfb70032cae
Merge: 29360dd 0b2a06a
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Aug 1 17:06:35 2016 -0400

    Merge pull request #379 from puppyofkosh/CDRIVER-1419
    
    CDRIVER-1419 metadata functions now log errors

commit 29360dd2bbdb182a2d62cef5028dabf6981157f3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 16:18:53 2016 -0400

    CDRIVER-1417 compile with -Werror on Ubuntu 32

 .mci.yml | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 5c1865fbd34a77917814344f87db72f233b26425
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 16:17:13 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0b2a06a4e329576c6aee37922c92a9362cc449a9
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Jul 28 11:28:12 2016 -0400

    CDRIVER-1419 metadata functions now log errors

 doc/mongoc_client_set_appname.page   |  2 +-
 doc/mongoc_metadata_append.page      |  2 +-
 src/mongoc/mongoc-client.c           |  1 +
 src/mongoc/mongoc-metadata.c         |  1 +
 src/mongoc/mongoc-topology-scanner.c |  3 ++-
 src/mongoc/mongoc-topology.c         |  3 +++
 src/mongoc/mongoc-uri.c              |  2 +-
 tests/test-mongoc-client-pool.c      | 18 +++++++++++++++++-
 tests/test-mongoc-client.c           |  9 +++++++++
 tests/test-mongoc-metadata.c         | 33 ++++++++++++++++++++++++++-------
 10 files changed, 62 insertions(+), 12 deletions(-)

commit 16240ac0c170ca04ca1c368a426db82e8bb905d4
Merge: b395f6a 6efb89c
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Aug 1 16:38:45 2016 -0400

    Merge pull request #378 from fionaRowan/CDRIVER-1322-create
    
    CDRIVER-1322: capture error logs in test_create_with_write_concern

commit 6efb89ccce1d1938c19495d8d44b1fbe3a903ab3
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Sat Jul 30 16:20:08 2016 -0400

    CDRIVER-1322: capture error logs in test_create_with_write_concern

 tests/test-mongoc-database.c | 2 ++
 1 file changed, 2 insertions(+)

commit b395f6add98c1869f63951b09c1bdb38c71db07e
Merge: 23d1f62 8048d62
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Aug 1 15:59:10 2016 -0400

    Merge pull request #377 from fionaRowan/rename-doc
    
    CDRIVER-1322: doc for mongoc_collection_rename_with_write_concern

commit 8048d62b8c46fb887e7507974ea565d56988b8b4
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Sat Jul 30 17:17:31 2016 -0400

    CDRIVER-1322: doc for mongoc_collection_rename_with_write_concern

 doc/mongoc_collection_rename.page                  | 13 +-----
 ...ongoc_collection_rename_with_write_concern.page | 54 ++++++++++++++++++++++
 2 files changed, 55 insertions(+), 12 deletions(-)

commit 23d1f623d2c411b6d983d0cf01a80f36088565ee
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 08:45:28 2016 -0400

    document MONGOC_TEST_SKIP_SLOW env var

 CONTRIBUTING.md | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 2b182610cebc271794341c430663cb53da91e2a2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 00:44:04 2016 -0400

    unused topology_t fields

 src/mongoc/mongoc-topology-private.h | 2 --
 src/mongoc/mongoc-topology.c         | 2 --
 2 files changed, 4 deletions(-)

commit 242d6207853cda8c5c1db85e9789130d2534d515
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 1 00:39:07 2016 -0400

    obsolete comment

 src/mongoc/mongoc-topology-scanner.c | 2 --
 1 file changed, 2 deletions(-)

commit fc44e53705231bce0dd31fcf934ab4330d1007b0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 31 17:26:10 2016 -0400

    better output from getmore error test

 tests/test-mongoc-cursor.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 2993d9d7b95844f5cf70a3778e4571e91f1b3e88
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 31 15:54:53 2016 -0400

    better output from bulk error test

 tests/test-bulk.c | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit f8d7f2bec7769382787ade37c05e07a86db9d0a2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 31 15:44:10 2016 -0400

    32-bit overflow in timeout test

 tests/test-mongoc-topology.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit a9739598717eb82a214b7d3fbf922b666f7b345e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 31 14:12:26 2016 -0400

    CDRIVER-1409 openssl_check_closed was always true
    
    BIO_get_shutdown doesn't do what I thought: it doesn't check whether the
    socket has been closed, it returns the state of a config flag, which
    was always true. Caused /Client/exhaust_cursor/single tests to fail
    with "error: connection closed".
    
    It was only this test that failed because the driver only calls
    check_closed in single-client mode on a socket idle for 1 second, and
    only since #3c81f4f6 does this test pause a full second.

 src/mongoc/mongoc-stream-tls-openssl.c | 21 ++-------------------
 1 file changed, 2 insertions(+), 19 deletions(-)

commit b9a04a2369bfbc46c4bffa688f2b3deeca46bfe0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 31 12:22:48 2016 -0400

    CDRIVER-1322 disable test_aggregate_w_write_concern

 tests/test-mongoc-collection.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 3c81f4f67f83e7fbbc675b0d3aa5f3e37a870cbc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 30 12:59:27 2016 -0400

    CDRIVER-1427 fix test_exhaust_cursor

 tests/test-mongoc-exhaust.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b75d7220cc897a7b8a02cbef50d4a579b6415841
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 30 10:32:56 2016 -0400

    debug test_exhaust_cursor failure

 tests/test-mongoc-exhaust.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a772c8cb2be11307b7287f9c7e13fd9cfdfb2cdc
Merge: 923c866 adf3c43
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Jul 30 14:02:24 2016 -0400

    Merge pull request #375 from fionaRowan/drop-index-doc
    
    CDRIVER-1322: doc for mongoc_collection_drop_index_with_write_concern

commit 4adcf29d9a285386ae1b0c5d264a871fcfdc5246
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 29 17:01:44 2016 -0400

    CDRIVER-1322: mongoc_collection_drop_index_with_write_concern

 build/autotools/versions.ldscript          |  1 +
 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-collection.c             | 22 ++++++++++++++++++++++
 src/mongoc/mongoc-collection.h             |  5 +++++
 tests/test-mongoc-collection.c             | 29 +++++++++++++++++++++++++++++
 9 files changed, 62 insertions(+)

commit adf3c434bede46e18094190c9a8ad9aa4c605073
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 29 18:20:00 2016 -0400

    CDRIVER-1322: doc for mongoc_collection_drop_index_with_write_concern

 doc/mongoc_collection_drop_index.page              | 12 +-----
 ...c_collection_drop_index_with_write_concern.page | 50 ++++++++++++++++++++++
 2 files changed, 51 insertions(+), 11 deletions(-)

commit 923c866d7e38eeee3ce1a8ff01699519913448d9
Merge: 9c53cca 8ef5a50
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Jul 30 08:54:19 2016 -0400

    Merge pull request #374 from fionaRowan/db-drop-doc
    
    CDRIVER-1322: doc for mongoc_database_drop_with_write_concern

commit 9c53cca06a839b7bd4de3faecf8c0dd7e453269c
Merge: 6fcafbe 014b661
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Jul 30 08:54:03 2016 -0400

    Merge pull request #373 from fionaRowan/db-drop
    
    CDRIVER-1322: mongoc_database_drop_with_write_concern

commit 6fcafbec048982eaf2f622178c366d53d25fcf75
Merge: 9ca96f5 b0a6960
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Jul 30 08:53:38 2016 -0400

    Merge pull request #372 from fionaRowan/CDRIVER-1414
    
    CDRIVER-1414: add mongoc_write_concern_t to mongoc_cursor_t

commit 9ca96f591c8caed607c5efb0450d35106844a6e9
Merge: 2d9f472 6ba2cd9
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Jul 30 08:52:55 2016 -0400

    Merge pull request #371 from fionaRowan/drop-doc
    
    CDRIVER-1322: doc for mongoc_collection_drop_with_write_concern

commit 2d9f4729c6e9da6c30adec432f391359f68cea85
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 29 22:41:07 2016 -0400

    fix mock_server_t race

 tests/mock_server/mock-server.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8ef5a50ba8aea8778c1917db9229a6c447838cae
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 29 15:05:38 2016 -0400

    CDRIVER-1322: doc for mongoc_database_drop_with_write_concern

 doc/mongoc_database_drop.page                    | 15 ++-----
 doc/mongoc_database_drop_with_write_concern.page | 50 ++++++++++++++++++++++++
 2 files changed, 54 insertions(+), 11 deletions(-)

commit 014b66128f0af431a2b4ce55acea4bb0e9abfb0c
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 29 14:21:02 2016 -0400

    CDRIVER-1322: mongoc_database_drop_with_write_concern

 build/autotools/versions.ldscript          |  1 +
 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-database.c               | 22 ++++++++++++++++++++++
 src/mongoc/mongoc-database.h               |  4 ++++
 tests/test-mongoc-database.c               | 30 +++++++++++++++++++++++++++++-
 9 files changed, 61 insertions(+), 1 deletion(-)

commit b0a696036d40e526d1ef9c9f8512361b398f8308
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jul 26 10:27:48 2016 -0400

    CDRIVER-1414: add mongoc_write_concern_t to mongoc_cursor_t

 src/mongoc/mongoc-collection.c     | 6 ++----
 src/mongoc/mongoc-cursor-private.h | 2 ++
 src/mongoc/mongoc-cursor.c         | 9 +++++++++
 3 files changed, 13 insertions(+), 4 deletions(-)

commit c6832a2086fa192f6242ab2f8dc417aa32a2fe2c
Merge: 4b3cc1f a980214
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 29 17:35:46 2016 -0400

    Merge pull request #370 from fionaRowan/create-doc
    
    CDRIVER-1322: doc for mongoc_database_create_collection_with_write_co

commit 4b3cc1f39a9836b4479d37761d64a3542590bf63
Merge: 0e0ae00 59c6bed
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 29 17:06:32 2016 -0400

    Merge pull request #369 from fionaRowan/coll-drop
    
    CDRIVER-1322: mongoc_collection_drop_with_write_concern

commit 6ba2cd906d7ad741ec88325518cf95fb9ea45354
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 29 11:46:37 2016 -0400

    CDRIVER-1322: doc for mongoc_collection_drop_with_write_concern

 doc/mongoc_collection_drop.page                    | 13 +-----
 doc/mongoc_collection_drop_with_write_concern.page | 53 ++++++++++++++++++++++
 2 files changed, 54 insertions(+), 12 deletions(-)

commit 59c6bed61679beaf0be8f6d0a3ace206bcb8266b
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Thu Jul 28 11:47:34 2016 -0400

    CDRIVER-1322: mongoc_collection_drop_with_write_concern

 build/autotools/versions.ldscript          |  1 +
 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-collection.c             | 32 +++++++++++++++++++++++++++---
 src/mongoc/mongoc-collection.h             |  4 ++++
 tests/test-mongoc-collection.c             | 22 +++++++++++++++++++-
 9 files changed, 60 insertions(+), 4 deletions(-)

commit 0e0ae00cffdccaa7e3436f40a39bad61eae1e3a4
Author: Christoph Schwarz <cschwarz@incognito.com>
Date:   Wed Jul 27 09:44:08 2016 -0700

    ensure reply is initialized before returning
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 doc/mongoc_bulk_operation_execute.page | 2 +-
 src/mongoc/mongoc-bulk-operation.c     | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 42cb0e6e82fa326cb22c49cc4bbcb977be3882f0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 29 08:25:03 2016 -0400

    CDRIVER-1433 test that bulk op always inits "reply"

 tests/test-bulk.c | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 0f6ce6e6d6072f5f5ca30c061e57d783b8569dcb
Merge: e246d62 65ebe11
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 29 08:09:11 2016 -0400

    Merge pull request #368 from fionaRowan/CDRIVER-1322-create
    
    CDRIVER-1322: mongoc_database_create_collection_with_write_concern

commit e246d624fca2ab96ef12c7c5405df056c4d7be61
Merge: 929a63a bae3648
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 29 08:08:53 2016 -0400

    Merge pull request #367 from fionaRowan/CDRIVER-1322-agg
    
    CDRIVER-1322: doc for mongoc_collection_aggregate_with_write_concern

commit 929a63a24a35b4241c09bd5822fa891a66a71e22
Merge: 38c329f 39f0c35
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 29 08:08:40 2016 -0400

    Merge pull request #366 from puppyofkosh/CDRIVER-1392
    
    CDRIVER-1392 appname in connection string

commit 38c329f3d29500b2a3ad2e4286afebfd72a71c53
Merge: d87f4c4 3ff4d1c
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 29 08:08:11 2016 -0400

    Merge pull request #365 from puppyofkosh/CDRIVER-1418-off-master
    
    CDRIVER-1418 updated tutorial doc/examples to use appname

commit d87f4c40c41405ce769c46cb1cb31932334e242e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 29 08:07:22 2016 -0400

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a980214183c8654d038ee4f6416585ffd63a0ed0
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Thu Jul 28 16:46:59 2016 -0400

    CDRIVER-1322: doc for mongoc_database_create_collection_with_write_concern

 doc/mongoc_database_create_collection.page         | 12 ++---
 ...abase_create_collection_with_write_concern.page | 55 ++++++++++++++++++++++
 2 files changed, 58 insertions(+), 9 deletions(-)

commit 65ebe110dae80334c520bbc7f3e422a6d9add21b
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Mon Jul 25 16:36:04 2016 -0400

    CDRIVER-1322: mongoc_database_create_collection_with_write_concern

 build/autotools/versions.ldscript          |  1 +
 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-database.c               | 22 ++++++++++++++++
 src/mongoc/mongoc-database.h               |  6 +++++
 tests/test-mongoc-database.c               | 42 ++++++++++++++++++++++++++++++
 9 files changed, 76 insertions(+)

commit 7a2ec5cc6f8b85cd59276ce883f59d4d51e14310
Merge: 962dad6 1ac7d8c
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jul 28 15:17:57 2016 -0400

    Merge pull request #364 from puppyofkosh/CDRIVER-1391
    
    CDRIVER-1391 metadata docs

commit bae364816391f52afb82fa367cd8867527dff717
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jul 26 17:42:13 2016 -0400

    CDRIVER-1322: doc for mongoc_collection_aggregate_with_write_concern

 doc/mongoc_collection_aggregate.page               |  66 +-----------
 ...oc_collection_aggregate_with_write_concern.page | 117 +++++++++++++++++++++
 2 files changed, 118 insertions(+), 65 deletions(-)

commit 39f0c357dea4023f1abe547b71cbfbf7704ab0ce
Author: ian boros <ian.boros@10gen.com>
Date:   Wed Jul 27 09:31:56 2016 -0400

    CDRIVER-1392 appname in connection string

 src/mongoc/mongoc-client-pool.c      | 12 +++++
 src/mongoc/mongoc-client.c           | 11 +++++
 src/mongoc/mongoc-metadata-private.h |  1 +
 src/mongoc/mongoc-metadata.c         |  6 +++
 src/mongoc/mongoc-topology-scanner.c |  2 +-
 src/mongoc/mongoc-uri.c              | 43 ++++++++++++++--
 src/mongoc/mongoc-uri.h              |  6 +++
 tests/test-mongoc-client.c           | 95 ++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-metadata.c         | 83 +++++++++++++++++++++++++++++++
 9 files changed, 255 insertions(+), 4 deletions(-)

commit 3ff4d1c2d0c27b32fa14c7509c06212b8ca79b80
Author: ian boros <ian.boros@10gen.com>
Date:   Wed Jul 27 17:23:32 2016 -0400

    CDRIVER-1418 updated tutorial doc/examples to use appname

 doc/mongoc_tutorial.page                           | 25 ++++++++++++++--------
 examples/aggregation/aggregation1.c                |  2 +-
 examples/bulk/bulk1.c                              |  2 +-
 examples/bulk/bulk2.c                              |  2 +-
 examples/bulk/bulk3.c                              |  2 +-
 examples/bulk/bulk4.c                              |  2 +-
 examples/bulk/bulk5.c                              |  2 +-
 examples/bulk/bulk6.c                              |  2 +-
 .../example-application-performance-monitoring.c   |  2 +-
 examples/example-client.c                          |  2 +-
 examples/example-gridfs.c                          |  2 +-
 examples/example-scram.c                           |  6 +++---
 examples/find-and-modify.c                         |  2 +-
 examples/find_and_modify_with_opts/fam.c           |  2 +-
 examples/mongoc-dump.c                             |  2 +-
 15 files changed, 32 insertions(+), 25 deletions(-)

commit 962dad6707fbeeb6f7f3536c325dc86205373d7f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 21:39:19 2016 -0400

    1.4.0-beta1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS            | 139 ++++++++++++++++++++++++++++++++++++++++++++++++++++----
 VERSION_CURRENT |   2 +-
 2 files changed, 132 insertions(+), 9 deletions(-)

commit b11dc406b4aca865c94d1677198b09227c69b0b3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 18:29:59 2016 -0400

    bump libbson to 1.4.0-beta1

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69575301965779f37f7b0372608cea5649a2e81f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 18:18:09 2016 -0400

    CDRIVER-1410 test with "experimental" off

 .mci.yml | 42 ++++++++++++++++++++++++++++++++++--------
 1 file changed, 34 insertions(+), 8 deletions(-)

commit a2cb0514e343a80e4a4bed5c57a8e50d20adb5be
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 17:56:48 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a517595bc14730b1e1297c21de4ebcd21e094bf4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 17:46:24 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6de38dd0963dbe99fa594ca25d5a2d4ce3eca12f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 14:56:51 2016 -0400

    CDRIVER-1305 disable timeout tests on all 32-bit Unix

 tests/test-mongoc-topology.c | 53 +++++++++++++++++++++++++++-----------------
 1 file changed, 33 insertions(+), 20 deletions(-)

commit 3913e40b1dde420906c01df0f64a6e18e6088218
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 14:37:00 2016 -0400

    CDRIVER-1426 longer timeout in DNS tests

 tests/test-mongoc-server-selection-errors.c | 5 -----
 1 file changed, 5 deletions(-)

commit d9b55e6ca8406544a3a13f3ee6dbf5409fec81d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 14:36:35 2016 -0400

    CDRIVER-1423 skip large msg tests w/ OpenSSL on Win

 tests/test-bulk.c              | 4 ++++
 tests/test-mongoc-collection.c | 4 ++++
 2 files changed, 8 insertions(+)

commit 1ac7d8cb86eba58034cbaadde9e6358d547f1d9f
Author: ian boros <ian.boros@10gen.com>
Date:   Tue Jul 26 13:30:12 2016 -0400

    CDRIVER-1391 metadata docs

 doc/mongoc_client_pool_set_appname.page | 42 ++++++++++++++++++
 doc/mongoc_client_set_appname.page      | 46 ++++++++++++++++++++
 doc/mongoc_metadata_append.page         | 75 +++++++++++++++++++++++++++++++++
 3 files changed, 163 insertions(+)

commit 8204eb83a3e792cb71c74db971ea76692812657c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 12:50:51 2016 -0400

    bump libbson to 1.4.0-beta0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 848f68cb465c3e7c939e58a62c3fe873b9b74dc9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 11:43:15 2016 -0400

    CDRIVER-1318 debug failures in timeout tests

 tests/test-mongoc-topology.c | 2 ++
 1 file changed, 2 insertions(+)

commit 3b72ea98e1d3eb0f7457951757a6aaeea49d367e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 08:55:29 2016 -0400

    CDRIVER-1318 re-disable async SSL tests on Darwin

 tests/test-mongoc-async.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2dc31def7db48295726483640feecdc46280b68f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 08:41:46 2016 -0400

    test conveniences ASSERT_CURSOR_NEXT/DONE

 tests/TestSuite.h              | 39 +++++++++++++++++++++++++++++
 tests/test-bulk.c              | 56 ++++++------------------------------------
 tests/test-mongoc-collection.c |  2 +-
 3 files changed, 48 insertions(+), 49 deletions(-)

commit f9425f38e4acfb50c470a8605b655d83af5c0d7e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 08:41:13 2016 -0400

    CDRIVER-1337 disable aggregate_with_write_concern

 build/cmake/libmongoc-ssl.def | 1 -
 build/cmake/libmongoc.def     | 1 -
 2 files changed, 2 deletions(-)

commit 0005dfce0f7b6f17b53f35aaf51151ee8b8fdf4f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 04:47:51 2016 -0400

    more reliable bulk test

 tests/test-bulk.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit e26a77032da70fa5c5033a37ce46f6edb47c7046
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 26 18:23:54 2016 -0400

    CDRIVER-663 test 32-bit Ubuntu

 .mci.yml | 28 +++++++++++++++++++++++++++-
 1 file changed, 27 insertions(+), 1 deletion(-)

commit 88d16a7f3aec738e41cab92f76be8bd805b13aab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 15:31:48 2016 -0400

    CDRIVER-1318 enable reconnect tests for Darwin TLS

 src/mongoc/mongoc-stream-tls-secure-transport.c |  5 +++--
 tests/test-mongoc-async.c                       |  4 ++--
 tests/test-mongoc-client.c                      | 11 ++++-------
 3 files changed, 9 insertions(+), 11 deletions(-)

commit 1400057ebc1dec21419314a3f4af8bb03ce6298b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 15:31:48 2016 -0400

    CDRIVER-1409 better style in test

 tests/test-mongoc-async.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit b9f5cb78c0acfd032f671816f6d485fd92fa6846
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 27 04:29:31 2016 -0400

    error output from bulk test

 tests/test-bulk.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 89b14181000c15a8df66c9ef10eebeecc6658ff2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 26 22:20:57 2016 -0400

    CDRIVER-1420 test find_indexes errors

 build/generate-future-functions.py   |  5 +++++
 tests/mock_server/future-functions.c | 38 ++++++++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h |  8 ++++++++
 tests/test-mongoc-collection.c       | 32 ++++++++++++++++++++++++++++++
 4 files changed, 83 insertions(+)

commit a096e1996aedb9a1467a2223e5e07d75e06d09ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 26 21:59:18 2016 -0400

    CDRIVER-1420 find_indexes can return NULL

 doc/mongoc_collection_find_indexes.page | 1 +
 1 file changed, 1 insertion(+)

commit 542c42d535b17ec406c97a04a5ade4633ef81ceb
Author: Christoph Schwarz <cschwarz@incognito.com>
Date:   Mon Jul 25 16:41:33 2016 -0700

    fixed handling of other cursor errors in mongoc_collection_find_indexes

 src/mongoc/mongoc-collection.c | 3 +++
 1 file changed, 3 insertions(+)

commit 457a3d5e8ceeba5794e759914ca36c35bae90207
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 26 21:21:03 2016 -0400

    CDRIVER-1416 fix lastWriteDate tests

 tests/test-libmongoc.c            | 18 ++++++++++++++++++
 tests/test-libmongoc.h            |  2 ++
 tests/test-mongoc-max-staleness.c | 13 +++++--------
 3 files changed, 25 insertions(+), 8 deletions(-)

commit 7fdcf9077bd10a0b98a962b7cba3c99170c0b020
Merge: 029e21d 0560ff8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 26 17:38:16 2016 -0400

    git push origin masterMerge branch 'fionaRowan-1322-agg-improve'
    
    * fionaRowan-1322-agg-improve:
      CDRIVER-1322: improve test for aggregate_w_write_concern

commit 0560ff8eb4f2beac1ca42e508492fa311f753014
Merge: 029e21d 461a7fb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 26 17:36:35 2016 -0400

    Merge branch '1322-agg-improve' of https://github.com/fionaRowan/mongo-c-driver into fionaRowan-1322-agg-improve
    
    * '1322-agg-improve' of https://github.com/fionaRowan/mongo-c-driver:
      CDRIVER-1322: improve test for aggregate_w_write_concern

commit 029e21d43a14321db0ce081384a5955f20883343
Merge: 4ea9bcd 7e8fa65
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Jul 26 17:33:09 2016 -0400

    Merge pull request #361 from fionaRowan/C-1415
    
    CDRIVER-1415: enable test for wire version 2+ only

commit 461a7fb91ae69eea902cce2fec40709960b78f58
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jul 26 14:50:24 2016 -0400

    CDRIVER-1322: improve test for aggregate_w_write_concern

 tests/test-mongoc-collection.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 7e8fa65c2cc80f2003935ec42322a8bb30638bf0
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jul 26 14:41:52 2016 -0400

    CDRIVER-1415: enable test for wire version 2+

 tests/test-mongoc-collection.c | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 4ea9bcd961df939b58a6e5db017a3fd13425a34a
Merge: a5111f7 a06e908
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Tue Jul 26 07:29:55 2016 -0700

    Merge pull request #360 from puppyofkosh/CDRIVER-1333-bug-fix
    
    CDRIVER-1411 metadata size check too strict

commit a06e9087d32c6b4f6007f83cd6acf677c44da1f9
Author: ian boros <ian.boros@10gen.com>
Date:   Mon Jul 18 11:18:48 2016 -0400

    CDRIVER-1411 metadata size check too strict

 src/mongoc/mongoc-topology-scanner-private.h |  1 +
 src/mongoc/mongoc-topology-scanner.c         | 16 +++++++--------
 tests/test-mongoc-metadata.c                 | 30 ++++++++++++++++++----------
 3 files changed, 29 insertions(+), 18 deletions(-)

commit a5111f7ec057e9cf95fdb6c70161497bfdd704b6
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 26 06:41:39 2016 -0700

    CDRIVER-1416: Disable tests for now

 tests/test-mongoc-max-staleness.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 504147382cd709d3004ceb3f408d30f28de83a0a
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 26 06:41:16 2016 -0700

    CDRIVER-1415: Disable tests for now

 tests/test-mongoc-collection.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 1df2779bc6048a04a657fcf8790d5304031ca863
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 25 20:56:49 2016 -0700

    Fix add the requested database_name to the auth uri
    
    Fixes /Client/authenticate

 tests/test-libmongoc.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit f4d4b761e9d899193f5d4ade8945cc8e2075237b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 25 19:34:04 2016 -0700

    Fix tests when running against mongod+ssl

 tests/test-mongoc-max-staleness.c | 2 ++
 1 file changed, 2 insertions(+)

commit e5adff8ddbb1ba81cd64058be78d1d83c8601fae
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 25 19:06:21 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 871238d496139b5e6d417fdd814de21a75a75c3d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 25 18:49:31 2016 -0700

    Fix unused-function

 tests/test-mongoc-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit b477d9c0746ed86d98637a4eeda2df058d9883e3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 25 18:48:42 2016 -0700

    Fix unused-variable

 src/mongoc/mongoc-uri.c | 2 ++
 1 file changed, 2 insertions(+)

commit 46e3cc6aba44a9eaa57b1056181365a56ab1c4a7
Merge: 05700dd 2ba99c4
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Jul 25 21:27:49 2016 -0400

    Merge pull request #358 from fionaRowan/CDRIVER-1322-agg
    
    CDRIVER-1322: mongoc_collection_aggregate_with_write_concern

commit 2ba99c4f57d97616c12195de3ff7f8cc607c57a3
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 22 11:45:31 2016 -0400

    CDRIVER-1322: mongoc_collection_aggregate_with_write_concern

 build/autotools/versions.ldscript          |  1 +
 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-collection.c             | 27 +++++++++
 src/mongoc/mongoc-collection.h             |  7 +++
 tests/test-mongoc-collection.c             | 89 ++++++++++++++++++++++++++++++
 9 files changed, 129 insertions(+)

commit 05700dd78903e1de8c53eea7097f27ebf2f354ba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 25 16:25:04 2016 -0400

    fix error-reporting in evergreen

 .mci.yml | 4 ++++
 1 file changed, 4 insertions(+)

commit 6dd2af88b2fb705717b8eb3516f5414c9f239289
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 25 16:23:19 2016 -0400

    spelling: "TLS handshake timed out"

 src/mongoc/mongoc-stream-tls.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3dc9d484d97294281ea4217cffe482e716d4aebd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 23 17:06:44 2016 -0400

    CDRIVER-1305 fix build on Solaris

 tests/test-mongoc-topology.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit e483e91f7e03fbfbd404472efcf899597c49b283
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 23 16:17:57 2016 -0400

    Revert "CDRIVER-1305 enable timeout tests on Solaris"

 tests/test-mongoc-topology.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 2e5e590efacc17c341a15ed48927ee2d28a1d319
Merge: 8642ac1 0e6c364
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 22 17:49:35 2016 -0400

    Merge pull request #357 from puppyofkosh/CDRIVER-1394
    
    Cdriver 1394

commit 0e6c364792f63bdb605b3044cf85b2c3005aaae6
Author: ian boros <ian.boros@10gen.com>
Date:   Fri Jul 22 17:24:05 2016 -0400

    Fixed cmake build with experimental=off

 CMakeLists.txt | 1 -
 1 file changed, 1 deletion(-)

commit 17878256bf515726fe943037861aa219a4bd55c6
Author: ian boros <ian.boros@10gen.com>
Date:   Sun Jul 17 20:13:46 2016 -0400

    CDRIVER-1394 fill out os_type and os_name on non-linux systems

 CMakeLists.txt                          | 16 ++++--
 src/mongoc/Makefile.am                  |  1 +
 src/mongoc/mongoc-metadata-os-private.h | 90 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-metadata.c            | 47 ++++++++++++++++-
 tests/test-mongoc-metadata.c            | 87 ++++++++++++++++++++++++++++---
 5 files changed, 228 insertions(+), 13 deletions(-)

commit 8642ac1a6dd26cc265fbd25c35d7134a21deb0ae
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 06:26:14 2016 -0400

    CDRIVER-1409 test that TLS scanner is async
    
    Also detect remote TLS shutdown: Only matters for the server sockets we
    use in TLS tests; in production it is the driver that shuts down TLS
    connections.

 src/mongoc/mongoc-stream-tls-openssl.c          |  21 ++-
 src/mongoc/mongoc-stream-tls-secure-channel.c   |   4 +
 src/mongoc/mongoc-stream-tls-secure-transport.c |   6 +
 tests/mock_server/mock-server.c                 |   4 +
 tests/test-mongoc-async.c                       | 220 ++++++++++++++----------
 tests/test-mongoc-cluster.c                     |   2 -
 6 files changed, 159 insertions(+), 98 deletions(-)

commit 80644b29cba1ab40fe0bab929720e1579a64d728
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 03:44:41 2016 -0400

    configurable mock server request timeout

 tests/mock_server/mock-server.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6161bae7c35dd810dbf4af93c465f31451edef66
Merge: d4608fa fd6ad9e
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Fri Jul 22 09:58:48 2016 -0700

    Merge pull request #356 from fionaRowan/CDRIVER-1384
    
    CDRIVER-1384: add symbol to doc, *experimental.def

commit d4608fa2687b198edbbcb82e3fa86e7b49cacff8
Merge: c3f9e11 bab6f60
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Fri Jul 22 09:58:17 2016 -0700

    Merge pull request #355 from fionaRowan/CDRIVER-1381
    
    CDRIVER-1381: small optimization in reply_local

commit fd6ad9eb138b316b9ff467c4530d0ae69ea401c6
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 22 09:48:59 2016 -0400

    CDRIVER-1384: add symbol to doc, *experimental.def

 build/cmake/libmongoc-experimental.def     |  1 +
 build/cmake/libmongoc-ssl-experimental.def |  1 +
 doc/mongoc_write_concern_append.page       | 41 ++++++++++++++++++++++++++++++
 3 files changed, 43 insertions(+)

commit c3f9e110df03d3b021d738bf810923ab003ab819
Merge: bfda28a 110e5e7
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 22 11:49:44 2016 -0400

    Merge pull request #354 from puppyofkosh/CDRIVER-1408
    
    CDRIVER-1408 making mongoc-trace.h public

commit bfda28a326bba640d3f32fe3bad06cf97504600e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 11:37:26 2016 -0400

    verbose output for all evergreen tests

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c24d78360d26495c7bd03399cbc59e26a3a29ece
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 11:23:19 2016 -0400

    CDRIVER-1305 enable timeout tests on Solaris
    
    These tests appear to have been fixed by recent improvements in the
    topology scanner.

 tests/test-mongoc-topology.c | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

commit 110e5e7b75e38c956ae6b114c3dd49aa2029e497
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Jul 21 14:32:23 2016 -0400

    CDRIVER-1408 making mongoc-trace.h public

 CMakeLists.txt                    |  2 ++
 src/mongoc/Makefile.am            |  1 +
 src/mongoc/mongoc-socket.c        |  1 +
 src/mongoc/mongoc-stream.c        |  1 +
 src/mongoc/mongoc-trace-private.h | 54 +++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-trace.h         | 20 +++++----------
 src/mongoc/mongoc.h               |  1 +
 7 files changed, 66 insertions(+), 14 deletions(-)

commit bab6f60d2f604357173d6ad40cf40c02a1b04163
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 22 10:03:14 2016 -0400

    CDRIVER-1381: small optimization in reply_local

 src/mongoc/mongoc-collection.c | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 8364c3009721523243c8cf3d894272bb97186d58
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 06:40:26 2016 -0400

    CDRIVER-1219 reenable timeout tests on windows

 tests/test-mongoc-topology.c | 2 --
 1 file changed, 2 deletions(-)

commit 8db650a7bdf1ca41af96d7a4345e8fd31fbbaa0a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 06:27:37 2016 -0400

    add PrimaryPreferred_incompatible.json test

 .../PrimaryPreferred_incompatible.json             | 36 ++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit 2869e2bf640d8ba31972ae3bd84991e7b001b269
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 22 06:27:10 2016 -0400

    fix server selection test for sharded topology

 tests/test-mongoc-client.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 9de3368546c9801fd1eb59552d8f649738dee583
Merge: 3536fe4 0ae27a0
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jul 21 20:44:36 2016 -0400

    Merge pull request #353 from fionaRowan/CDRIVER-1384
    
    CDRIVER-1384: added mongoc_write_concern_append

commit 0ae27a053b9efc22c173b1ecde85c3cb61ce7128
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jul 19 16:06:08 2016 -0400

    CDRIVER-1384: added mongoc_write_concern_append

 build/autotools/versions.ldscript |  1 +
 build/cmake/libmongoc-ssl.def     |  1 +
 build/cmake/libmongoc.def         |  1 +
 src/libmongoc.symbols             |  1 +
 src/mongoc/mongoc-write-concern.c | 31 ++++++++++++++++++++++++++++++-
 src/mongoc/mongoc-write-concern.h |  3 ++-
 tests/test-mongoc-write-concern.c | 28 ++++++++++++++++++++++++++++
 7 files changed, 64 insertions(+), 2 deletions(-)

commit 3536fe485a0f3fe74aeb80181a07fa58f108464b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 21 10:48:55 2016 -0400

    CDRIVER-1363 update max staleness tests

 .mci.yml                                           |  1 +
 tests/json-test.c                                  |  9 +++-
 .../ReplicaSetNoPrimary/DefaultNoMaxStaleness.json | 30 +++++++++++---
 .../ReplicaSetNoPrimary/Incompatible.json          | 12 +++++-
 .../ReplicaSetNoPrimary/LastUpdateTime.json        | 36 +++++++++++++---
 .../max_staleness/ReplicaSetNoPrimary/Nearest.json | 36 +++++++++++++---
 .../ReplicaSetNoPrimary/Nearest2.json              | 36 +++++++++++++---
 .../ReplicaSetNoPrimary/PrimaryPreferred.json      | 24 +++++++++--
 .../ReplicaSetNoPrimary/Secondary.json             | 36 +++++++++++++---
 .../ReplicaSetNoPrimary/SecondaryPreferred.json    | 24 +++++++++--
 .../SecondaryPreferred_tags.json                   | 36 +++++++++++++---
 .../DefaultNoMaxStaleness.json                     | 30 +++++++++++---
 .../ReplicaSetWithPrimary/Incompatible.json        | 12 +++++-
 .../ReplicaSetWithPrimary/LastUpdateTime.json      | 36 +++++++++++++---
 .../MaxStalenessTooSmall.json                      | 12 +++++-
 .../MaxStalenessWithModePrimary.json               | 12 +++++-
 .../ReplicaSetWithPrimary/Nearest.json             | 36 +++++++++++++---
 .../ReplicaSetWithPrimary/Nearest2.json            | 36 +++++++++++++---
 .../ReplicaSetWithPrimary/PrimaryPreferred.json    | 24 +++++++++--
 .../ReplicaSetWithPrimary/SecondaryPreferred.json  | 24 +++++++++--
 .../SecondaryPreferred_tags.json                   | 48 ++++++++++++++++++----
 .../ReplicaSetWithPrimary/Secondary_tags.json      | 48 ++++++++++++++++++----
 .../ShortHeartbeartShortMaxStaleness.json          | 30 +++++++++++---
 .../ShortHeartbeartShortMaxStaleness2.json         | 30 +++++++++++---
 .../ReplicaSetWithPrimary/ZeroMaxStaleness.json    | 30 +++++++++++---
 tests/json/max_staleness/Sharded/Incompatible.json | 12 +++++-
 .../max_staleness/Sharded/SmallMaxStaleness.json   | 18 ++++++--
 tests/json/max_staleness/Single/Incompatible.json  |  6 ++-
 .../max_staleness/Single/SmallMaxStaleness.json    | 18 ++++++--
 29 files changed, 618 insertions(+), 124 deletions(-)

commit 5cbbd392d27abe53842c85d1258c9559c3c17e16
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 20 23:17:23 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 16f0c860f28545516f109885991b10dd0e7f401c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 20 19:42:48 2016 -0400

    CDRIVER-449 rename column from "error type" to "source"

 doc/mongoc_errors.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 175bdecc08f548f71ff1f6f8b0b7259a2c2fa64c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 20 17:57:31 2016 -0400

    fix test function's comment

 tests/test-conveniences.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit db2f2d278b849ab0490e81e6a4b7e5beb86ffb33
Merge: 13b463c c6a019e
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Jul 20 16:06:20 2016 -0400

    Merge pull request #352 from fionaRowan/C-1322-wc-support
    
    CDRIVER-1322: internal helper functions and values

commit c6a019ef184862f2609080e747bc54419dbec03b
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jul 19 15:13:18 2016 -0400

    CDRIVER-1322: internal helper functions and values

 src/mongoc/mongoc-client-private.h        |  2 +
 src/mongoc/mongoc-write-concern-private.h |  6 +++
 src/mongoc/mongoc-write-concern.c         | 75 +++++++++++++++++++++++++++++++
 3 files changed, 83 insertions(+)

commit 13b463c4e75228fa2f93ee6ee6171605a7309a89
Merge: c8b92ec 4f05f26
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Jul 20 12:30:48 2016 -0400

    Merge pull request #351 from puppyofkosh/CDRIVER-1393
    
    CDRIVER-1393 put metadata and max_staleness behind MONGOC_EXPERIMENTAL_FEATURE

commit 4f05f26f4d7214bebb23741573da0bbc0d38b4b5
Author: ian boros <ian.boros@10gen.com>
Date:   Mon Jul 18 17:51:10 2016 -0400

    CDRIVER-1393 put metadata and max_staleness behind MONGOC_EXPERIMENTAL_FEATURE

 CMakeLists.txt                              |  6 ++++++
 build/autotools/ReadCommandLineArguments.m4 |  4 ++++
 build/cmake/libmongoc-experimental.def      |  3 +++
 build/cmake/libmongoc-ssl-experimental.def  |  3 +++
 build/cmake/libmongoc-ssl.def               |  3 ---
 build/cmake/libmongoc.def                   |  3 ---
 src/mongoc/Makefile.am                      | 14 +++++++++++---
 src/mongoc/mongoc-client-pool.c             |  2 ++
 src/mongoc/mongoc-client-pool.h             |  2 ++
 src/mongoc/mongoc-client.c                  |  2 ++
 src/mongoc/mongoc-client.h                  |  2 ++
 src/mongoc/mongoc-config.h.in               |  9 +++++++++
 src/mongoc/mongoc-init.c                    |  8 ++++++++
 src/mongoc/mongoc-read-prefs.c              |  7 ++++---
 src/mongoc/mongoc-read-prefs.h              |  3 ++-
 src/mongoc/mongoc-server-description.c      |  7 ++++---
 src/mongoc/mongoc-topology-scanner.c        | 16 ++++++++++++++--
 src/mongoc/mongoc-topology.c                | 15 ++++++++++++++-
 src/mongoc/mongoc-uri.c                     |  5 +++--
 src/mongoc/mongoc.h                         |  2 ++
 tests/Makefile.am                           |  4 ++--
 tests/json-test.c                           |  3 ++-
 tests/test-conveniences.c                   |  4 ++--
 tests/test-libmongoc.c                      |  8 ++++++--
 tests/test-mongoc-client-pool.c             |  5 +++++
 tests/test-mongoc-client.c                  | 10 +++++++++-
 tests/test-mongoc-collection.c              |  4 ++--
 27 files changed, 123 insertions(+), 31 deletions(-)

commit c8b92ecc820596888b72d96f084bdb4d99a618fc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 18 08:55:16 2016 -0400

    CDRIVER-1399 reproducible Debian build

 doc/mallard2man.py | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit e868a1136d1dac024b00e80a7945bb119253b7c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 19 13:56:19 2016 -0400

    CDRIVER-962 test with multiple mongos

 .mci.yml               |  75 ++++++++++++++++++++++++
 CONTRIBUTING.md        |   4 +-
 tests/TestSuite.c      |   4 +-
 tests/test-libmongoc.c | 155 +++++++++++++++++++++++++++++++++----------------
 4 files changed, 186 insertions(+), 52 deletions(-)

commit 52ff9bf551192d607b52d9ef2ec811af429a75e7
Merge: fac8ae4 b97a2dc
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Jul 19 13:45:19 2016 -0400

    Merge pull request #350 from fionaRowan/C-1322
    
    CDRIVER-1322: test for generic command functions

commit b97a2dc1574b2e4c3ea45a607154601a128af4b3
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 15 12:48:36 2016 -0400

    CDRIVER-1322: test for generic command functions

 tests/test-mongoc-client.c | 89 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 89 insertions(+)

commit fac8ae49eb7ad3ce8fedada402dd4f414989d46b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 18 20:44:43 2016 -0700

    CDRIVER-1385: Fix comma placement

 src/mongoc/mongoc-secure-transport.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f952591a1aaecd0a554521900ed183fae14db8e3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 18 16:59:58 2016 -0700

    Fix build with --enable-experimental-features=no

 tests/Makefile.am | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 0b87d8997b2d320499057367d77618acc0fba098
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 15 11:23:46 2016 -0700

    CDRIVER-1385: Reverse the order to match OpenSSL

 src/mongoc/mongoc-secure-transport.c | 27 +++++++++++++--------------
 tests/test-x509.c                    |  4 ++--
 2 files changed, 15 insertions(+), 16 deletions(-)

commit 1541488aca9b4936744e6bf5f65b3250d01d8472
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 14 17:51:47 2016 -0700

    CDRIVER-1308: Extract subject from X.509 certificates

 src/mongoc/mongoc-secure-channel.c | 81 +++++++++++++++++++++++++++-----------
 tests/test-x509.c                  |  4 +-
 2 files changed, 60 insertions(+), 25 deletions(-)

commit ba6c17e32e4fe419eaccd1f76abfea7f6208d6e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 18 16:45:04 2016 -0400

    CDRIVER-1337 disable additional maxStalenessMS features

 src/mongoc/mongoc-read-prefs.c         | 4 ++++
 src/mongoc/mongoc-server-description.c | 4 ++++
 2 files changed, 8 insertions(+)

commit 5f2fad1d816f1ee6ba2adc0f232e39106efd9eb4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 16 11:40:30 2016 -0400

    CDRIVER-1363 send maxStalenessMS to mongos

 src/mongoc/mongoc-read-prefs.c    |  6 ++++
 tests/test-mongoc-max-staleness.c | 61 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 67 insertions(+)

commit 00b179d65bf4d9bff4590aca6a467585eab2a492
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 16 11:25:52 2016 -0400

    CDRIVER-1363 no lastWriteDate=0 in staleness tests
    
    Updated JSON tests from the Max Staleness Spec.

 .../json/max_staleness/ReplicaSetNoPrimary/Incompatible.json |  2 +-
 .../max_staleness/ReplicaSetNoPrimary/LastUpdateTime.json    | 12 ++++++------
 tests/json/max_staleness/ReplicaSetNoPrimary/Nearest.json    | 12 ++++++------
 tests/json/max_staleness/ReplicaSetNoPrimary/Nearest2.json   | 12 ++++++------
 tests/json/max_staleness/ReplicaSetNoPrimary/Secondary.json  | 12 ++++++------
 .../ReplicaSetNoPrimary/SecondaryPreferred_tags.json         | 12 ++++++------
 .../max_staleness/ReplicaSetWithPrimary/LastUpdateTime.json  | 12 ++++++------
 tests/json/max_staleness/ReplicaSetWithPrimary/Nearest.json  | 12 ++++++------
 tests/json/max_staleness/ReplicaSetWithPrimary/Nearest2.json | 12 ++++++------
 .../ReplicaSetWithPrimary/SecondaryPreferred_tags.json       | 12 ++++++------
 .../max_staleness/ReplicaSetWithPrimary/Secondary_tags.json  | 12 ++++++------
 11 files changed, 61 insertions(+), 61 deletions(-)

commit 66d0a722419c7f057adcb7255ca56170e523a420
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 16 11:24:56 2016 -0400

    CDRIVER-1363 ensure lastWriteDate is set

 src/mongoc/mongoc-topology-description-private.h   |  4 +++
 src/mongoc/mongoc-topology-description.c           | 33 ++++++++++++++++++++++
 src/mongoc/mongoc-topology.c                       |  8 ++++++
 .../supplemental/MissingLastWriteDate.json         | 19 +++++++++++++
 .../supplemental/MissingLastWriteDate.yml          | 16 +++++++++++
 5 files changed, 80 insertions(+)

commit 94a671ac37cb883dd28c432e0ce5d58628e708d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 16 11:24:25 2016 -0400

    CDRIVER-1363 parse lastWriteDate from ismaster

 src/mongoc/mongoc-server-description.c |  12 ++-
 tests/test-libmongoc.c                 |  16 ++++
 tests/test-libmongoc.h                 |   2 +
 tests/test-mongoc-max-staleness.c      | 134 ++++++++++++++++++++++++++++++++-
 4 files changed, 160 insertions(+), 4 deletions(-)

commit afe224c16b4e0cf43e1b1fb0b1c09fef9ac6b42c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 18 11:18:07 2016 -0700

    CDRIVER-841: Don't overwrite the connection error

 src/mongoc/mongoc-topology-scanner.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit dba96fbdf9a0008eaa978f72650a6845adc4dab0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 13 23:39:53 2016 -0400

    CDRIVER-1337 disable maxStalenessMS by default

 CMakeLists.txt                              | 6 ++++++
 build/autotools/ReadCommandLineArguments.m4 | 5 +++++
 build/autotools/SetupAutomake.m4            | 2 ++
 build/cmake/libmongoc-experimental.def      | 2 ++
 build/cmake/libmongoc-ssl-experimental.def  | 2 ++
 src/mongoc/mongoc-read-prefs.c              | 2 ++
 src/mongoc/mongoc-read-prefs.h              | 2 ++
 src/mongoc/mongoc-server-description.c      | 2 ++
 src/mongoc/mongoc-topology.c                | 2 ++
 src/mongoc/mongoc-uri.c                     | 8 ++++++--
 tests/json-test.c                           | 2 ++
 tests/test-libmongoc.c                      | 4 ++++
 12 files changed, 37 insertions(+), 2 deletions(-)

commit 0cffbcfea38c76e471a00419cbfe459443ef8cbf
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 15 16:03:49 2016 -0700

    bump libbson to fix build

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 299063c6252bf92ced3bdf54649684436382ffee
Author: puppyofkosh <puppyofkosh@gmail.com>
Date:   Fri Jul 15 18:14:11 2016 -0400

    CDRIVER-1333: client metadata capture design, without the capture (#349)

 CMakeLists.txt                               |   4 +
 build/autotools/versions.ldscript            |   3 +
 build/cmake/libmongoc-ssl.def                |   3 +
 build/cmake/libmongoc.def                    |   3 +
 src/libbson                                  |   2 +-
 src/libmongoc.symbols                        |   3 +
 src/mongoc/Makefile.am                       |   3 +
 src/mongoc/mongoc-client-pool.c              |  33 +++-
 src/mongoc/mongoc-client-pool.h              |   4 +-
 src/mongoc/mongoc-client.c                   |  12 ++
 src/mongoc/mongoc-client.h                   |   2 +
 src/mongoc/mongoc-init.c                     |   5 +
 src/mongoc/mongoc-metadata-private.h         |  65 +++++++
 src/mongoc/mongoc-metadata.c                 | 273 +++++++++++++++++++++++++++
 src/mongoc/mongoc-metadata.h                 |  37 ++++
 src/mongoc/mongoc-topology-private.h         |   8 +-
 src/mongoc/mongoc-topology-scanner-private.h |   8 +
 src/mongoc/mongoc-topology-scanner.c         | 113 +++++++++--
 src/mongoc/mongoc-topology.c                 |  36 ++--
 src/mongoc/mongoc-util-private.h             |   3 +
 src/mongoc/mongoc-util.c                     |   6 +
 src/mongoc/mongoc.h                          |   1 +
 tests/Makefile.am                            |   1 +
 tests/test-libmongoc.c                       |   2 +
 tests/test-mongoc-client-pool.c              |  35 ++++
 tests/test-mongoc-client.c                   | 201 ++++++++++++++++++++
 tests/test-mongoc-metadata.c                 | 249 ++++++++++++++++++++++++
 27 files changed, 1074 insertions(+), 41 deletions(-)

commit 4f8f00751d372f4c3ecf351b68eacc7a157d0041
Merge: b89ca61 25e32c4
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 15 16:32:11 2016 -0400

    Merge pull request #348 from derickr/generated-files-in-gitignore
    
    Add generated file to .gitignore

commit 25e32c4e2137a164abbe33b7c89488b635b9eba1
Author: Derick Rethans <github@derickrethans.nl>
Date:   Fri Jul 15 10:47:48 2016 +0100

    Add generated files to .gitignore

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit b89ca61924f0685ece2c8678600eacd855e8b85d
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 14 14:31:12 2016 -0700

    CDRIVER-1380: Don't verify certificate hostname for UDS

 src/mongoc/mongoc-stream-tls-openssl.c          | 2 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c   | 1 -
 src/mongoc/mongoc-stream-tls-secure-transport.c | 6 +-----
 src/mongoc/mongoc-stream-tls.c                  | 7 +++++++
 4 files changed, 9 insertions(+), 7 deletions(-)

commit 221db4eb767cb8b2691d96cb52fa6fad62d47a5a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 14 14:48:56 2016 -0700

    Fix logic before anyone sees it! whooops!

 src/mongoc/mongoc-ssl.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 277a3134f70d1a79b64297b16f5fe793a41692d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 14 11:28:45 2016 -0700

    CDRIVER-1376: Consistently report file not found when extracting subject

 src/mongoc/mongoc-secure-transport.c |  6 ------
 src/mongoc/mongoc-ssl.c              | 29 ++++++++++++++++++++++++++---
 2 files changed, 26 insertions(+), 9 deletions(-)

commit e7ac00cde2034d3df786e7e262bb6551a639754a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 14 10:52:45 2016 -0700

    CDRIVER-1108: Windows + OpenSSL Build variant in Evergreen

 .mci.yml | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 7857d6c486c44eb0355a907ee52f9cb9d860587d
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 13 17:31:55 2016 -0700

    CDRIVER-1182: Import CAs from the Windows Cert store to OpenSSL

 CMakeLists.txt              |  3 +++
 src/mongoc/mongoc-openssl.c | 60 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 63 insertions(+)

commit c8647b682a054c4e78451135fe8c3d8dc51c71a8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 13 17:33:07 2016 -0700

    Remove couple of REMOVEMEs

 src/mongoc/mongoc-stream-tls-secure-channel.c | 3 ---
 1 file changed, 3 deletions(-)

commit fb87de5be793c971c983a96b9a6c1ebd42187cb3
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 13 13:35:25 2016 -0700

    CDRIVER-1155: Use OpenSSL to verify the certificate hostname

 build/autotools/versions.ldscript               |  1 +
 build/cmake/libmongoc-ssl.def                   |  1 +
 src/libmongoc.symbols                           |  1 +
 src/mongoc/mongoc-client.c                      |  4 ++--
 src/mongoc/mongoc-stream-tls-openssl.c          | 24 +++++++++++++++----
 src/mongoc/mongoc-stream-tls-openssl.h          |  1 +
 src/mongoc/mongoc-stream-tls-secure-channel.c   |  2 +-
 src/mongoc/mongoc-stream-tls-secure-channel.h   |  1 +
 src/mongoc/mongoc-stream-tls-secure-transport.c | 16 +++++++------
 src/mongoc/mongoc-stream-tls-secure-transport.h |  1 +
 src/mongoc/mongoc-stream-tls.c                  | 32 +++++++++++++++++++------
 src/mongoc/mongoc-stream-tls.h                  |  6 ++++-
 src/mongoc/mongoc-topology-scanner.c            |  4 +++-
 tests/mock_server/mock-server.c                 |  6 ++---
 tests/ssl-test.c                                |  4 ++--
 tests/test-mongoc-async.c                       |  2 +-
 tests/test-mongoc-stream-tls-error.c            |  4 ++--
 17 files changed, 78 insertions(+), 32 deletions(-)

commit 7e0105c26ef1b295739465afc8d4dac6218f0ea5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 14 11:17:44 2016 -0400

    CDRIVER-1305 more tests that time out on Sun

 tests/test-mongoc-topology.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 07ea2e3d22ac19907e1cf83838eefda4411ae8bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 13 21:33:09 2016 -0400

    symbols missing from libmongoc-ssl.def

 build/cmake/libmongoc-ssl-experimental.def | 8 +++++++-
 build/cmake/libmongoc-ssl.def              | 8 +++++++-
 2 files changed, 14 insertions(+), 2 deletions(-)

commit 34284e02c13baa093748ecc23aa7886823d58b45
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 13 16:07:25 2016 -0400

    killall mongod in .mci.yml

 .mci.yml | 3 +++
 1 file changed, 3 insertions(+)

commit 887ed7e05e6cd23991e55382a8a2a4e2c96b0676
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 12 22:46:44 2016 -0400

    CDRIVER-1337 disable experimental features by default

 .mci.yml                                   |   2 +-
 CMakeLists.txt                             |  20 +-
 CONTRIBUTING.md                            |   3 +-
 build/autotools/PrintBuildConfiguration.m4 |   9 +-
 build/cmake/libmongoc-experimental.def     | 336 ++++++++++++++++++++++++++++
 build/cmake/libmongoc-ssl-experimental.def | 338 +++++++++++++++++++++++++++++
 tests/test-conveniences.c                  |   5 +-
 tests/test-mongoc-collection.c             |   4 +
 8 files changed, 709 insertions(+), 8 deletions(-)

commit d46d6e039240a341a03579acab8d63497594e22e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 12 22:03:06 2016 -0400

    CDRIVER-1363 update max_staleness tests

 .../ReplicaSetNoPrimary/Secondary.json             |  87 +++++++++++++++++
 .../ReplicaSetNoPrimary/SecondaryPreferred.json    |  47 +++++++++
 .../SecondaryPreferred_tags.json                   |  87 +++++++++++++++++
 .../max_staleness/ReplicaSetNoPrimary/Tags.json    |  87 -----------------
 .../ReplicaSetWithPrimary/PrimaryPreferred.json    |  48 ++++++++++
 .../SecondaryPreferred_tags.json                   | 106 +++++++++++++++++++++
 .../ReplicaSetWithPrimary/Secondary_tags.json      | 106 +++++++++++++++++++++
 .../max_staleness/ReplicaSetWithPrimary/Tags.json  | 106 ---------------------
 8 files changed, 481 insertions(+), 193 deletions(-)

commit 222818d5948a6cf0fca0cc9f12bd4339e18f5115
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 12 16:10:35 2016 -0700

    CDRIVER-1369: Disable TLS compression by default
    
    Darwin TLS & Windows TLS do not support compression

 src/mongoc/mongoc-openssl.c | 20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)

commit 12120ec1cada09283ed7f40ac175f664d356e40f
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 12 16:33:15 2016 -0700

    CDRIVER-1147: Let the other end know we are about to shutdown

 src/mongoc/mongoc-stream-tls-openssl.c | 3 +++
 1 file changed, 3 insertions(+)

commit 88a84e529a9e53335d82611832547302214ffc15
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 12 15:52:16 2016 -0700

    CDRIVER-1066: value computed is not used [-Wunused-value]

 src/mongoc/mongoc-openssl.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c9752448a91779de7457fd610dfa930fbac02641
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 12 13:35:54 2016 -0700

    CDRIVER-1066: Add OpenSSL 1.1 build variant

 .mci.yml | 57 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)

commit 61ab746adaf7e008ea055b2429fc5c96ce1d49c4
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 12 12:42:00 2016 -0700

    CDRIVER-1066: Allow compiling against OpenSSL 1.1

 build/autotools/CheckSSL.m4                        |  2 +-
 src/mongoc/mongoc-crypto-openssl.c                 | 29 ++++---
 src/mongoc/mongoc-openssl.c                        |  8 ++
 src/mongoc/mongoc-stream-tls-openssl-bio-private.h |  6 ++
 src/mongoc/mongoc-stream-tls-openssl-bio.c         | 92 +++++++++++++++++++---
 src/mongoc/mongoc-stream-tls-openssl-private.h     |  1 +
 src/mongoc/mongoc-stream-tls-openssl.c             | 33 ++++----
 7 files changed, 135 insertions(+), 36 deletions(-)

commit ba4b50a32e55282afb849da0d0d2129573e81bb1
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 12 11:59:03 2016 -0700

    CDRIVER-1066: RAND_pseudo_bytes is deprecated in OpenSSL 1.1.0
    
    -- And turns out, we never use it anyway

 src/mongoc/mongoc-rand-cng.c           | 5 -----
 src/mongoc/mongoc-rand-common-crypto.c | 4 ----
 src/mongoc/mongoc-rand-openssl.c       | 4 ----
 src/mongoc/mongoc-rand-private.h       | 1 -
 4 files changed, 14 deletions(-)

commit e73221ca19d0c6a4990ec86be77e04ffdc4f6e4f
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 13 11:01:43 2016 -0700

    Fix pymongo/mongo-orchestration install on Windows

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cf91426f5c26544c8c3801dbf8b30c29445eef1a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 8 18:05:42 2016 -0400

    CDRIVER-1363 mongoc-server-description-private.h layout, again.

 src/mongoc/mongoc-server-description-private.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 85ba8640eacfdd8450f9a963315adcd261b6fcb4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 8 17:54:06 2016 -0400

    CDRIVER-1363 mongoc-server-description-private.h layout.

 src/mongoc/mongoc-server-description-private.h | 27 ++++++++++++--------------
 1 file changed, 12 insertions(+), 15 deletions(-)

commit 0cc10859a83241efd9001e3f485299b24a7c2d48
Merge: 7819e3e 2db2033
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jul 8 17:10:24 2016 -0400

    Merge pull request #344 from fionaRowan/CDRIVER-1350
    
    CDRIVER-1350 collection_find_and_modify_with_opts false on writeConce

commit 7819e3e085ee60c99563e52a863ef059c7d57377
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 6 14:33:46 2016 -0400

    CDRIVER-1363 implement maxStalenessMS

 src/mongoc/mongoc-client-private.h                 |   2 +
 src/mongoc/mongoc-client.c                         |   3 +-
 src/mongoc/mongoc-server-description-private.h     |  14 +-
 src/mongoc/mongoc-server-description.c             | 122 ++++++++--
 src/mongoc/mongoc-topology-description-private.h   |  10 +-
 src/mongoc/mongoc-topology-description.c           |  94 +++++--
 src/mongoc/mongoc-topology-private.h               |   6 +
 src/mongoc/mongoc-topology.c                       | 101 ++++++--
 tests/json-test.c                                  | 271 +++++++++++++++++++++
 tests/json-test.h                                  |   5 +
 .../ReplicaSetNoPrimary/DefaultNoMaxStaleness.json |  54 ++++
 .../ReplicaSetNoPrimary/Incompatible.json          |  28 +++
 .../ReplicaSetNoPrimary/LastUpdateTime.json        |  64 +++++
 .../max_staleness/ReplicaSetNoPrimary/Nearest.json |  64 +++++
 .../ReplicaSetNoPrimary/Nearest2.json              |  64 +++++
 .../ReplicaSetNoPrimary/PrimaryPreferred.json      |  48 ++++
 .../max_staleness/ReplicaSetNoPrimary/Tags.json    |  87 +++++++
 .../DefaultNoMaxStaleness.json                     |  54 ++++
 .../ReplicaSetWithPrimary/Incompatible.json        |  28 +++
 .../ReplicaSetWithPrimary/LastUpdateTime.json      |  64 +++++
 .../MaxStalenessTooSmall.json                      |  28 +++
 .../MaxStalenessWithModePrimary.json               |  27 ++
 .../ReplicaSetWithPrimary/Nearest.json             |  64 +++++
 .../ReplicaSetWithPrimary/Nearest2.json            |  64 +++++
 .../ReplicaSetWithPrimary/SecondaryPreferred.json  |  47 ++++
 .../ShortHeartbeartShortMaxStaleness.json          |  56 +++++
 .../ShortHeartbeartShortMaxStaleness2.json         |  56 +++++
 .../max_staleness/ReplicaSetWithPrimary/Tags.json  | 106 ++++++++
 .../ReplicaSetWithPrimary/ZeroMaxStaleness.json    |  55 +++++
 tests/json/max_staleness/Sharded/Incompatible.json |  28 +++
 .../max_staleness/Sharded/SmallMaxStaleness.json   |  40 +++
 tests/json/max_staleness/Single/Incompatible.json  |  20 ++
 .../max_staleness/Single/SmallMaxStaleness.json    |  40 +++
 .../max_staleness/Unknown/SmallMaxStaleness.json   |  18 ++
 .../ReplicaSetNoPrimary/read/Nearest_multiple.json |  68 ++++++
 tests/test-mongoc-max-staleness.c                  |  11 +
 tests/test-mongoc-server-selection.c               | 175 -------------
 37 files changed, 1851 insertions(+), 235 deletions(-)

commit cde4a5c5d5709afce067a26c6d733448788aa916
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 1 23:12:35 2016 -0400

    CDRIVER-1363 maxStalenessMS URI option

 CMakeLists.txt                                  |  1 +
 doc/mongoc_read_prefs_get_max_staleness_ms.page | 32 ++++++++++++++++++
 doc/mongoc_read_prefs_set_max_staleness_ms.page | 33 +++++++++++++++++++
 src/mongoc/mongoc-read-prefs-private.h          |  1 +
 src/mongoc/mongoc-read-prefs.c                  | 29 ++++++++++++++--
 src/mongoc/mongoc-read-prefs.h                  | 25 +++++++-------
 src/mongoc/mongoc-uri.c                         |  6 +++-
 tests/Makefile.am                               |  1 +
 tests/test-libmongoc.c                          |  2 ++
 tests/test-mongoc-max-staleness.c               | 44 +++++++++++++++++++++++++
 10 files changed, 160 insertions(+), 14 deletions(-)

commit 3fb2dc4feedb36ea2f5980ebf675c82603075995
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 7 12:01:00 2016 -0400

    CDRIVER-1337 build libbson with experimental features

 .mci.yml | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 0c347724b1b4dad5f8b0e9cbeb2683e8015be54c
Merge: 58c9bbb 4bdb06d
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jul 7 11:48:30 2016 -0400

    Merge pull request #347 from mynameismevin/master
    
    Updated readme

commit 58c9bbb4a53dad16ca4dc9d5cc7685556f22e852
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 7 11:33:07 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4bdb06d588bff11981b65c6c8032970a5348b21a
Author: Mike Lloyd <kevin.michael.lloyd@gmail.com>
Date:   Wed Jul 6 21:10:05 2016 -0700

    updated readme to include build from git instructions for windows and updated information for VS2015.
    
    Signed-off-by: Mike Lloyd <kevin.michael.lloyd@gmail.com>

 README.rst | 22 +++++++++++++++++++---
 1 file changed, 19 insertions(+), 3 deletions(-)

commit 0a82a69f46c48668864fc8a67538b2573f769a37
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 6 14:17:59 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 74a016832adf2ac2998fbc330fff5936f3ec66be
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 6 16:53:14 2016 -0400

    fix mock server log of SSL error

 tests/ssl-test.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 9f5c1b90ef979272011518c5cf37e96c15f05edd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 6 16:52:48 2016 -0400

    leaks in tests

 tests/test-bulk.c              | 1 +
 tests/test-mongoc-collection.c | 1 +
 tests/test-mongoc-cursor.c     | 7 ++++++-
 tests/test-mongoc-error.c      | 5 +++++
 4 files changed, 13 insertions(+), 1 deletion(-)

commit d974e86724137c8ddc9a1fd1572d60290495e621
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 6 16:52:26 2016 -0400

    CDRIVER-1092 leak in command_simple_with_server_id
    
    Leak found in unreleased code.

 src/mongoc/mongoc-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit d284ca9972f710cf66a3ed8fb89ad414f6f33ccc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 6 15:37:03 2016 -0400

    CDRIVER-592 fix automatic-init warning text

 build/autotools/PrintBuildConfiguration.m4 | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 64233d018a22a8df9d05d2e38fed40e95438f356
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 6 13:36:57 2016 -0700

    Disable/remove certain build types while they don't compile properly

 .mci.yml | 30 +++++++++---------------------
 1 file changed, 9 insertions(+), 21 deletions(-)

commit 774335277d2683ca69a0fd6f5d3b0fe33829f436
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 6 13:32:02 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cf8910cbcdf0a497d8602390fece92b6fffca018
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 6 14:06:19 2016 -0400

    CDRIVER-1333 delete old function declarations

 src/mongoc/mongoc-client-private.h | 6 ------
 1 file changed, 6 deletions(-)

commit 03642b4736a99beba2975a269435c11de09cee82
Merge: 0e2a453 0226c6d
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Jul 5 15:48:34 2016 -0400

    Merge pull request #346 from puppyofkosh/CDRIVER-1333-topology
    
    CDRIVER-1333 client pool starts scanner only once client is popped

commit 0226c6da58573a25c17e05f55c7fe77a6475349a
Author: ian boros <ian.boros@10gen.com>
Date:   Mon Jun 27 17:43:35 2016 -0400

    CDRIVER-1333 client pool starts scanner only once client is popped

 src/mongoc/mongoc-client-pool.c      | 19 ++++++++++++
 src/mongoc/mongoc-topology-private.h | 57 +++++++++++++++++++-----------------
 src/mongoc/mongoc-topology.c         | 46 ++++++++++++++++++-----------
 tests/test-mongoc-topology.c         |  4 +--
 4 files changed, 80 insertions(+), 46 deletions(-)

commit 0e2a45372a579d9d50424e814021c21877d0acb3
Merge: ac753d9 356f507
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Jul 5 15:19:58 2016 -0400

    Merge pull request #345 from puppyofkosh/CDRIVER-1328
    
    CDRIVER-1328 reply is always initialized in mongoc_collection_validate

commit 356f507bc72424d42474f88dbb0b988b291efb72
Author: ian boros <ian.boros@10gen.com>
Date:   Wed Jun 15 16:45:44 2016 -0400

    CDRIVER-1328 reply is always initialized in mongoc_collection_validate

 doc/mongoc_collection_validate.page |  4 ++--
 src/mongoc/mongoc-collection.c      | 11 +++++++++--
 tests/test-mongoc-collection.c      | 24 ++++++++++++++++++++++--
 3 files changed, 33 insertions(+), 6 deletions(-)

commit ac753d9913fa48a974de4e8dc71916db01dd0067
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 5 14:18:24 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 89e1f9898200e52888f0b5b3b5a4a0ecceb73f6f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 3 20:58:44 2016 -0400

    CDRIVER-1353 SecondaryPreferred can fail if primary matches

 src/mongoc/mongoc-topology-description.c           | 72 ++++++++++++++++------
 .../read/SecondaryPreferred_tags.json              | 52 ++++++++++++++++
 2 files changed, 105 insertions(+), 19 deletions(-)

commit 2db203354d46426260048b542c584310f2adb56f
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Fri Jul 1 12:59:22 2016 -0400

    CDRIVER-1350 collection_find_and_modify_with_opts false on writeConcernError

 src/mongoc/mongoc-collection.c      | 1 +
 tests/test-mongoc-find-and-modify.c | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit dfbd3c21bb4f6303cf5e9daa48d520602962012e
Merge: b1c23f6 341c267
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Jul 5 09:54:00 2016 -0400

    Merge pull request #343 from puppyofkosh/CDRIVER-1331
    
    CDRIVER-1331 minor optimization to write_command

commit 341c26742bd31adb82ae4189160823f048a51d23
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Jun 30 10:15:54 2016 -0400

    CDRIVER-1331 minor optimization to write_command

 src/mongoc/mongoc-write-command.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit b1c23f6309e95639d4a1ba9e3082c8f36e187d93
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 3 21:48:20 2016 -0400

    skip domain socket tests with other "live" tests

 tests/test-libmongoc.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 59a32daaf980bb6710a99b769e26e3be6a041341
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 3 18:42:52 2016 -0400

    fix //-style comments

 src/mongoc/mongoc-init.c        | 2 +-
 tests/mock_server/mock-rs.h     | 2 +-
 tests/mock_server/mock-server.h | 2 +-
 tests/mock_server/request.h     | 2 +-
 tests/mock_server/sync-queue.h  | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

commit 8e325604fcc01d0075055015a94c0d527e210d78
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 3 10:23:44 2016 -0400

    update Server Selection Spec tests

 .../ReplicaSetNoPrimary/read/Nearest.json          |  86 +++------------
 .../read/Nearest_non_matching.json                 |  41 ++-----
 .../ReplicaSetNoPrimary/read/Primary.json          |  20 ++--
 .../ReplicaSetNoPrimary/read/PrimaryPreferred.json |  86 +++------------
 .../read/PrimaryPreferred_non_matching.json        |  41 ++-----
 .../ReplicaSetNoPrimary/read/Secondary.json        |  86 +++------------
 .../read/SecondaryPreferred.json                   |  86 +++------------
 .../read/SecondaryPreferred_non_matching.json      |  41 ++-----
 .../read/Secondary_non_matching.json               |  41 ++-----
 .../write/SecondaryPreferred.json                  |  20 ++--
 .../ReplicaSetWithPrimary/read/Nearest.json        | 122 ++++-----------------
 .../read/Nearest_non_matching.json                 |  59 ++--------
 .../ReplicaSetWithPrimary/read/Primary.json        |  66 +++--------
 .../read/PrimaryPreferred.json                     | 106 +++---------------
 .../read/PrimaryPreferred_non_matching.json        |  75 +++----------
 .../ReplicaSetWithPrimary/read/Secondary.json      |  94 ++++------------
 .../read/SecondaryPreferred.json                   | 114 ++++---------------
 .../read/SecondaryPreferred_non_matching.json      |  75 +++----------
 .../read/Secondary_non_matching.json               |  49 ++-------
 .../write/SecondaryPreferred.json                  |  66 +++--------
 .../Sharded/read/SecondaryPreferred.json           |  86 +++------------
 .../Sharded/write/SecondaryPreferred.json          |  86 +++------------
 .../Single/read/SecondaryPreferred.json            |  50 ++-------
 .../Single/write/SecondaryPreferred.json           |  50 ++-------
 .../Unknown/read/SecondaryPreferred.json           |   4 +-
 .../Unknown/write/SecondaryPreferred.json          |   4 +-
 tests/test-mongoc-server-selection.c               |  18 +--
 27 files changed, 322 insertions(+), 1350 deletions(-)

commit fb7576ec90fd9e2ac51982a4bdeb8dde4482ddf5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 2 12:54:06 2016 -0400

    CDRIVER-1352 server selection tests were wrongly skipped

 tests/json-test.c                    | 17 +++++++++--------
 tests/test-mongoc-server-selection.c |  1 -
 2 files changed, 9 insertions(+), 9 deletions(-)

commit 4bfad07a8b6819041fb53dba4fdbdb0e1aa5575d
Merge: da098a6 e392d07
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Jun 27 11:32:55 2016 -0400

    Merge pull request #341 from fionaRowan/CDRIVER-1320
    
    CDRIVER-1320 move SSL instructions

commit da098a6fc30ef670e935a4465758417068733dbc
Merge: 042833b b95abb9
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Jun 27 11:23:49 2016 -0400

    Merge pull request #342 from puppyofkosh/CDRIVER-1201-fix-man
    
    CDRIVER-1201 fix man

commit e392d078a502cdf3c447fdd3d49f91de474aec6e
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jun 21 17:09:09 2016 -0400

    CDRIVER-1320 move SSL instructions

 doc/mongoc_advanced_connections.page | 27 +++++++++++++++++++++++++++
 doc/mongoc_authentication.page       | 22 ++++------------------
 2 files changed, 31 insertions(+), 18 deletions(-)

commit 042833bf9605758c53a72b40011bd26e2893f9ff
Merge: 21f3e12 29bef1a
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Jun 22 08:51:25 2016 -0700

    Merge pull request #340 from fionaRowan/C-608
    
    CDRIVER-608 validate mongoc_read_prefs_t's

commit 29bef1aa57f98c411810949d172a333c207cf817
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Tue Jun 21 10:37:07 2016 -0400

    CDRIVER-608 validate mongoc_read_prefs_t's

 src/mongoc/mongoc-client.c             |  19 +++++-
 src/mongoc/mongoc-collection.c         |  27 ++++++--
 src/mongoc/mongoc-read-prefs-private.h |   4 ++
 src/mongoc/mongoc-read-prefs.c         |  14 +++++
 tests/test-mongoc-collection.c         | 109 +++++++++++++++++++++++++++++++++
 5 files changed, 165 insertions(+), 8 deletions(-)

commit 21f3e12ebbdb514ee894add14242edf3ab28b42e
Merge: b6c9403 dc78442
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Jun 20 16:09:38 2016 -0700

    Merge pull request #339 from puppyofkosh/ssl-const
    
    re-consted ssl_opts strings

commit b95abb97e891dbad46893c92b8ad2a1060950c35
Author: ian boros <ian.boros@10gen.com>
Date:   Mon Jun 20 10:04:23 2016 -0400

    Added warning message to build script

 doc/mallard2man.py | 2 ++
 1 file changed, 2 insertions(+)

commit 92d672bb86a27375c265a62df10a4543c044dc51
Author: ian boros <ian.boros@10gen.com>
Date:   Sat Jun 18 11:35:33 2016 -0400

    Fixed man page docs by removing <code> tags

 doc/mongoc_basic_aggregate.page      | 11 +++++------
 doc/mongoc_common_task_examples.page |  6 +++---
 2 files changed, 8 insertions(+), 9 deletions(-)

commit dc78442ac79274326f0bc24cb24aad246d377748
Author: ian boros <ian.boros@10gen.com>
Date:   Sat Jun 18 10:56:54 2016 -0400

    re-consted ssl_opts strings

 src/mongoc/mongoc-ssl.c | 10 +++++-----
 src/mongoc/mongoc-ssl.h | 16 ++++++++--------
 2 files changed, 13 insertions(+), 13 deletions(-)

commit b6c9403335656dccc66051faf43bc80e9d633f4d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 17 13:15:23 2016 -0400

    CDRIVER-1201 common-operations doc layout

 doc/mongoc_common_task_examples.page | 67 ++++++++++++++++++++++++++++++++++--
 1 file changed, 64 insertions(+), 3 deletions(-)

commit 943de1b9bfae62ab2c8485f57c29a09c268d191e
Merge: 02f7510 5c17557
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jun 17 12:48:06 2016 -0400

    Merge pull request #337 from puppyofkosh/CDRIVER-1201
    
    CDRIVER-1201 added documentation for common operations

commit 5c17557e9146058aa4c3d83d315da41eb4bac5fb
Author: ian boros <ian.boros@10gen.com>
Date:   Mon Jun 13 15:37:24 2016 -0400

    CDRIVER-1201 added documentation for common operations

 doc/mongoc_basic_aggregate.page                  |  69 +++++++++++++
 doc/mongoc_collection_copy.page                  |   3 +-
 doc/mongoc_common_task_examples.page             |  65 +++++++++++++
 doc/mongoc_database_copy.page                    |   2 +-
 examples/basic_aggregation/basic-aggregation.c   | 116 ++++++++++++++++++++++
 examples/basic_aggregation/constants.c           |  24 +++++
 examples/basic_aggregation/distinct.c            |  44 +++++++++
 examples/basic_aggregation/map-reduce-advanced.c |  39 ++++++++
 examples/basic_aggregation/map-reduce-basic.c    |  70 +++++++++++++
 examples/common_operations/clone-collection.c    |  28 ++++++
 examples/common_operations/common-operations.c   | 119 +++++++++++++++++++++++
 examples/common_operations/copydb.c              |  35 +++++++
 examples/common_operations/explain.c             |  26 +++++
 examples/doc-common-insert.c                     |  45 +++++++++
 14 files changed, 682 insertions(+), 3 deletions(-)

commit 02f7510d4a8fe67a188ecbdf8292d3b44c5b95a7
Merge: 14ef932 0410212
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Jun 17 10:45:56 2016 -0400

    Merge pull request #336 from fionaRowan/CDRIVER-1334
    
    CDRIVER-1334 fixed function signature in documentation

commit 04102126f2c14dfef1dc8e8bc8e126dd5fd80161
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Thu Jun 16 18:58:45 2016 -0400

    CDRIVER-1334 fixed signature in documentation

 ...ongoc_client_command_simple_with_server_id.page | 26 +++++++++-------------
 1 file changed, 10 insertions(+), 16 deletions(-)

commit 14ef93267b82762a64437fbe323788237d787c1d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 16 19:42:08 2016 -0400

    layout in CONTRIBUTING.md

 CONTRIBUTING.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 064c79dd5aac9df48dd18c0fb1e5b7ed77e34317
Merge: 0200573 1f94a30
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 16 19:40:20 2016 -0400

    Merge branch 'master' of github.com:mongodb/mongo-c-driver
    
    * 'master' of github.com:mongodb/mongo-c-driver:
      CDRIVER-1321 instructions about adding error codes / domains

commit 0200573569b99e94b55d2a8c2e2395a8d8136f16
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 16 19:40:11 2016 -0400

    comment that "fsync" write concern is deprecated

 src/mongoc/mongoc-write-concern-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1f94a3069ad497b9f9091b3a55dc7bc1465458c2
Merge: d72ba84 4529e44
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jun 16 19:37:41 2016 -0400

    Merge pull request #335 from fionaRowan/C-1321
    
    CDRIVER-1321 instructions about adding error codes / domains

commit 4529e443fa37c315e390bdbbd9d4aa370975bdda
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Thu Jun 16 17:52:38 2016 -0400

    CDRIVER-1321 instructions about adding error codes / domains

 CONTRIBUTING.md | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit d72ba84d480683a9f276f693aea39d422b1c7a6f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 16 11:31:53 2016 -0400

    unused topology functions

 src/mongoc/mongoc-topology-private.h |  9 -----
 src/mongoc/mongoc-topology.c         | 74 ------------------------------------
 2 files changed, 83 deletions(-)

commit 2e8a8ec6ab4cf374916983c4ac5e6e6afc7d657e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 16 07:38:40 2016 -0700

    Revert accidental change to stdout for certain log levels

 src/mongoc/mongoc-log.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit f9c646fbc01fe0eb73cc714e6583a6d458dbd5d0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 7 16:52:30 2016 -0400

    CDRIVER-592 deprecate automatic init/cleanup

 .mci.yml                                   | 2 +-
 build/autotools/PrintBuildConfiguration.m4 | 7 ++++++-
 src/mongoc/mongoc-init.c                   | 6 ++++++
 3 files changed, 13 insertions(+), 2 deletions(-)

commit 92a91cac824db5480f1c2a284bc2f0a259e52106
Merge: 6bb2233 dc9fd22
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Jun 15 15:55:45 2016 -0400

    Merge pull request #334 from puppyofkosh/CDRIVER-725
    
    CDRIVER-725 added mongoc_collection_create_index_2 function

commit 6bb223312370de2e4ebd173c9258a9ffacffbd6b
Merge: 6bb2fcf 3043966
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Jun 15 15:54:41 2016 -0400

    Merge pull request #333 from fionaRowan/C-1306
    
    CDRIVER-1306 implemented mongoc_gridfs_file_set_id

commit 304396691bd533183a8dc9668f2be07b0314344c
Author: Fiona Rowan <fiona.rowan@10gen.com>
Date:   Wed Jun 15 11:46:20 2016 -0400

    C-DRIVER implemented mongoc_gridfs_file_set_id

 build/autotools/versions.ldscript  |  1 +
 build/cmake/libmongoc-ssl.def      |  1 +
 build/cmake/libmongoc.def          |  1 +
 doc/mongoc_errors.page             | 10 +++++++++
 doc/mongoc_gridfs_file_set_id.page | 45 ++++++++++++++++++++++++++++++++++++++
 examples/example-gridfs.c          | 18 ++++++++++++---
 src/libmongoc.symbols              |  1 +
 src/mongoc/mongoc-error.h          |  1 +
 src/mongoc/mongoc-gridfs-file.c    | 22 +++++++++++++++++++
 src/mongoc/mongoc-gridfs-file.h    |  5 +++++
 tests/test-mongoc-gridfs.c         | 44 +++++++++++++++++++++++++++++++++++++
 11 files changed, 146 insertions(+), 3 deletions(-)

commit 6bb2fcf78070384e22f4736d95f649ca5e573455
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 15 09:54:50 2016 -0700

    bumpb libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dc9fd22d7d2a4524962bc9fda8dfddd69c8dc7c8
Author: ian boros <ian.boros@10gen.com>
Date:   Thu Jun 9 15:55:59 2016 -0400

    CDRIVER-725 added mongoc_collection_create_index_2 function

 build/autotools/versions.ldscript         |  1 +
 build/cmake/libmongoc-ssl.def             |  1 +
 build/cmake/libmongoc.def                 |  1 +
 doc/mongoc_collection_create_index_2.page | 55 +++++++++++++++++++++
 src/libmongoc.symbols                     |  1 +
 src/mongoc/mongoc-collection.c            | 38 +++++++++++++--
 src/mongoc/mongoc-collection.h            |  5 ++
 tests/test-mongoc-collection.c            | 81 +++++++++++++++++++++++++++++++
 8 files changed, 178 insertions(+), 5 deletions(-)

commit 08ae3dd43ac49f30114345497db07588f3369fe6
Author: puppyofkosh <puppyofkosh@gmail.com>
Date:   Thu Jun 9 14:26:09 2016 -0400

    CDRIVER-1316 Fixed ENABLE_SSL compile issue (#331)

 src/mongoc/mongoc-client-pool.c | 8 +++++++-
 src/mongoc/mongoc-client.c      | 4 +++-
 2 files changed, 10 insertions(+), 2 deletions(-)

commit b9e556ea2cd5b58718394f4048591d44f746b821
Merge: 0cb32db 32c6ed4
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jun 9 13:53:48 2016 -0400

    Merge pull request #330 from puppyofkosh/CDRIVER-776
    
    CDRIVER-776 fixed test duration formatting on Windows

commit 0cb32db8811d3223b4291f59207010b4f17487c8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 8 15:50:56 2016 -0700

    CDRIVER-1314: Check for strings.h before including it

 CMakeLists.txt                  | 2 ++
 build/autotools/CheckProgs.m4   | 2 ++
 tests/mock_server/mock-server.c | 4 +++-
 tests/test-conveniences.c       | 3 +++
 tests/test-libmongoc.c          | 4 +++-
 tests/test-mongoc-client.c      | 4 +++-
 tests/test-mongoc-sdam.c        | 2 ++
 7 files changed, 18 insertions(+), 3 deletions(-)

commit 32c6ed438bb633b7b3d50ff4917ab97488f2486c
Author: ian boros <ian.boros@10gen.com>
Date:   Wed Jun 8 22:23:49 2016 +0100

    CDRIVER-776 fixed test duration formatting on Windows

 tests/TestSuite.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit d6d81cb6e71e4cf390882c8153aec7c00f1836a8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 8 10:42:47 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6cbb6c06fca1c1bcd4b6cdd9ee7b9f47419854f4
Merge: c5a855d 15c9554
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Jun 8 11:12:55 2016 -0400

    Merge pull request #329 from puppyofkosh/CDRIVER-1316
    
    CDRIVER-1316: copy strings from mongoc_ssl_opt_t

commit 15c95548259e31b5cf4adc84d1f761e48e2bccc7
Author: ian boros <iboros@MacBook-Pro-57.local>
Date:   Mon Jun 6 15:47:47 2016 -0400

    CDRIVER-1316: copy strings from mongoc_ssl_opt_t

 doc/mongoc_client_set_ssl_opts.page |  2 +-
 src/mongoc/mongoc-client-pool.c     |  7 +++-
 src/mongoc/mongoc-client.c          |  8 +++-
 src/mongoc/mongoc-ssl-private.h     |  5 ++-
 src/mongoc/mongoc-ssl.c             | 26 +++++++++++++
 src/mongoc/mongoc-ssl.h             | 16 ++++----
 tests/test-mongoc-client.c          | 76 +++++++++++++++++++++++++++++++++++++
 7 files changed, 127 insertions(+), 13 deletions(-)

commit c5a855d359d3541e2c068ea937d9c8401ef5334d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 6 16:28:16 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 33254fd6402904ad7cee3edd027320f3c6b5d22d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 6 16:12:41 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9e0ae20d6ad4328da2000b1fcf9ae1cfa7be2aff
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 6 15:52:50 2016 -0700

    fix yaml magic

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a1cf016ed153649b4c8a59a45cb8395f9cacf4e2
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 6 15:46:53 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 85711e9a73b63f4394fde1ed307e80cc0821a4d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jun 6 15:46:00 2016 -0700

    Use YAML magic to simplify the variants

 .mci.yml | 117 ++++++++++++---------------------------------------------------
 1 file changed, 21 insertions(+), 96 deletions(-)

commit 4d512851aa46fde3f730d7aacc585e034412d322
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 2 13:40:22 2016 -0700

    CDRIVER-681 & CDRIVER-439 & CDRIVER-1315: c89 & c99 & c11
    
    Also variants for
    CDRIVER-673 & CDRIVER-677: w/wo OpenSSL & w/wo SASL

 .mci.yml               | 172 +++++++++++++++++++++++++++++++++++++++++++++----
 tests/test-libmongoc.c |   9 +--
 2 files changed, 163 insertions(+), 18 deletions(-)

commit 6fab29cc6c4f6c50c13e93380ca293a3e00b877c
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 2 13:35:23 2016 -0700

    CDRIVER-1314: Missing includes for strcasecmp

 tests/mock_server/mock-server.c | 1 +
 tests/test-conveniences.c       | 2 ++
 tests/test-libmongoc.c          | 1 +
 tests/test-mongoc-client.c      | 1 +
 tests/test-mongoc-sdam.c        | 1 +
 5 files changed, 6 insertions(+)

commit 34af62a1364f91c2b9e1ed5ef9f60b5a199f1f5a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jun 2 09:46:43 2016 -0700

    Run local tests after successful compile

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit f661990db6c5d0c812c2eb9fd8cc0f735c4957ba
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 1 11:26:48 2016 -0700

    CDRIVER-664 & CDRIVER-665: GCC5 & clang builds in Evergreen
    
    Also added several distros for completeness

 .mci.yml | 189 +++++++++++++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 161 insertions(+), 28 deletions(-)

commit 01e460f03e80f7db7cb27847e15bde70eceea6a9
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 11:09:13 2016 -0700

    CDRIVER-1313: Add MONGOC_TEST_SKIP_LIVE environment variable
    
    Setting MONGOC_TEST_SKIP_LIVE=on will skip tests that require
    MongoDB environment (e.g. mongod or mongos)

 tests/TestSuite.c                      |  15 ++++
 tests/TestSuite.h                      |   4 +
 tests/json-test.c                      |   2 +-
 tests/test-bulk.c                      | 136 ++++++++++++++++-----------------
 tests/test-libmongoc.c                 |  28 +++++++
 tests/test-mongoc-client.c             |  28 +++----
 tests/test-mongoc-cluster.c            |   4 +-
 tests/test-mongoc-collection-find.c    |  98 ++++++++++++------------
 tests/test-mongoc-collection.c         |  51 +++++++------
 tests/test-mongoc-command-monitoring.c |  12 +--
 tests/test-mongoc-cursor.c             |  16 ++--
 tests/test-mongoc-database.c           |  18 ++---
 tests/test-mongoc-error.c              |   4 +-
 tests/test-mongoc-exhaust.c            |   5 +-
 tests/test-mongoc-find-and-modify.c    |   5 +-
 tests/test-mongoc-gridfs.c             |  22 +++---
 tests/test-mongoc-topology.c           |  10 +--
 tests/test-write-commands.c            |   4 +-
 18 files changed, 259 insertions(+), 203 deletions(-)

commit e9d0dbd61ea65e4ba9fcb301a545ddb1883fc711
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Jun 2 14:37:28 2016 -0400

    TRACE() macro requires var args (#328)
    
    This fixes calls introduced in e8f031a6deb7d0fdea10ba2161d9fb5b56fa6e8e.

 src/mongoc/mongoc-cluster.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit da61533a556b8812e61b569d710b7261198badb5
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 31 15:49:44 2016 -0700

    There is no dumpbin on evergreen anymore

 .mci.yml | 3 ---
 1 file changed, 3 deletions(-)

commit 4658cb3f40a7523133a6260cb6212296dc2536a2
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 31 15:47:00 2016 -0700

    Don't be blocked waiting on the release archive task for all variants

 .mci.yml | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 95e8c8d5961c9cd49d426379d5a6700b4f8a5bbd
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 31 15:46:39 2016 -0700

    Fix reading files on windows

 src/mongoc/mongoc-secure-channel.c | 4 ++--
 tests/json-test.c                  | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit b873c83448b76ea5f71f3961f2d83fcc7bf115f4
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 31 13:00:38 2016 -0700

    CDRIVER-1312: Split out the SSL Power8 tests into its own variant

 .mci.yml | 20 ++++++++++++++------
 1 file changed, 14 insertions(+), 6 deletions(-)

commit 86bc43e4ede4ec040d3caf0638a643632ddd809c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri May 27 11:25:11 2016 -0700

    Use MongoDB Enterprise on Windows

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 63246d7d8d3d029fd8c3cc9862574942d09c65ae
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 31 22:31:55 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 028fe4d2b2911886d302b5f2b26ace5aa050ca1b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu May 26 13:32:03 2016 -0700

    CDRIVER-1307: Enforce client certificate in evergreen

 .mci.yml                                     | 2 +-
 orchestration_configs/servers/auth-ssl.json  | 3 +--
 orchestration_configs/servers/basic-ssl.json | 3 +--
 3 files changed, 3 insertions(+), 5 deletions(-)

commit 251f62eff0921de13b44790383e522ed9ecd0261
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu May 26 13:31:34 2016 -0700

    CDRIVER-744: Run the dedicated SSL tests on Windows

 .mci.yml | 32 +++++++++++++++++++++++++-------
 1 file changed, 25 insertions(+), 7 deletions(-)

commit bfee60f4dfea262a5e86aa10d00ccc8d4f513bd8
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu May 26 13:27:25 2016 -0700

    CDRIVER-744: Remove unused variables, and fix missing format character

 src/mongoc/mongoc-secure-channel.c            | 6 ++----
 src/mongoc/mongoc-stream-tls-secure-channel.c | 3 +--
 2 files changed, 3 insertions(+), 6 deletions(-)

commit 2128e4579406cee17b0081e445f90b09bcfbc831
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu May 26 13:26:40 2016 -0700

    CDRIVER-744: Add support for ssl_opts.crl_file and ssl_opts.pem_file

 src/mongoc/mongoc-secure-channel.c            | 278 +++++++++++++++++++++++---
 src/mongoc/mongoc-stream-tls-secure-channel.c |  16 +-
 2 files changed, 258 insertions(+), 36 deletions(-)

commit d2bb43f4b3c64a740448da90c9e174c8955a6cf4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 26 21:13:03 2016 -0400

    reinstall orchestration on each windows build

 .mci.yml | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 67fd63af9a85dc9898022ee708074b6aa1816ffe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 26 13:36:26 2016 -0400

    make orchestration home dir earlier

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d7aa4cc56d3d10396ab9b13899bca2f55c5e823
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 26 11:13:45 2016 -0400

    CDRIVER-1305 skip timing test on Solaris

 tests/test-mongoc-topology.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 245f398e5b6d6ab6aa0013f28a7de632f367081e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 24 15:56:29 2016 -0400

    update uncrustify.cfg

 .mci.yml                  | 1 +
 src/mongoc/uncrustify.cfg | 4 ++--
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 504d9db956ca83cdb49715df960606db2de1c347
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 24 13:28:52 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ac57f48a0a266138bf5c3ef74e805fcd87d0b68f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 24 12:07:30 2016 -0400

    CDRIVER-1215 unused-function warnings

 src/mongoc/mongoc-rpc.c | 2 --
 1 file changed, 2 deletions(-)

commit aacd87016aab15c96c43b7dbecb827b2011306b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 24 12:00:28 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bfe20ae7e9b75894a4bd063e8575414b6611bd15
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 24 11:39:02 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2a7e528694572c43e18238f7aa80172f86201d41
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 24 09:47:29 2016 -0400

    CDRIVER-1215 distribute op-reply-header.def

 src/mongoc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit c03fde8afdae869a982bd9f0120ebf3cee302fc5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 18 09:20:13 2016 -0400

    CDRIVER-1234 always an err to iterate done cursor

 src/mongoc/mongoc-cursor.c     | 16 ++++++++--------
 tests/test-mongoc-collection.c |  7 +++++++
 2 files changed, 15 insertions(+), 8 deletions(-)

commit 11555f94d2892efd149da22994e097a90b758032
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 29 17:24:02 2016 -0400

    CDRIVER-1215 don't copy command reply

 src/mongoc/mongoc-cluster.c     | 107 ++++++++++++++++++++++--------------
 src/mongoc/mongoc-rpc-private.h |  57 +++++++++++--------
 src/mongoc/mongoc-rpc.c         | 118 +++++++++++++++++++++++++++-------------
 src/mongoc/op-reply-header.def  |  11 ++++
 tests/test-mongoc-client.c      |   8 ++-
 tests/test-mongoc-read-prefs.c  |   2 +-
 6 files changed, 197 insertions(+), 106 deletions(-)

commit e8f031a6deb7d0fdea10ba2161d9fb5b56fa6e8e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 18 21:20:18 2016 -0400

    CDRIVER-1235 don't log username
    
    Remove username from log messages, lower auth error messages from
    INFO to DEBUG level, lower auth success messages from INFO to TRACE.

 src/mongoc/mongoc-cluster.c | 24 ++++++++----------------
 1 file changed, 8 insertions(+), 16 deletions(-)

commit 475c688b0e3b8d278cd46abb0c7828ffc409eb17
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 18 21:15:34 2016 -0400

    instructions for setting log level

 doc/mongoc_logging.page | 48 ++++++++++++++++++++++++++++++++++++------------
 1 file changed, 36 insertions(+), 12 deletions(-)

commit 0dc5bc0a5199fc3c36efa4644cc1a48f631727a5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 18 21:05:56 2016 -0400

    clean up prior orchestration servers

 .mci.yml | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit cf53704893f4938504f1205bebc93514191e644e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 17 22:22:53 2016 -0400

    CDRIVER-1232 more links to libbson docs

 doc/mongoc_collection_get_last_error.page |  2 +-
 doc/mongoc_collection_validate.page       |  2 +-
 doc/mongoc_index.page                     |  5 ++
 doc/mongoc_tutorial.page                  | 79 +++++++++++++++----------------
 4 files changed, 46 insertions(+), 42 deletions(-)

commit ebbb535ab3edfdd0f67a6d0d43848fe99b54b62e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 18 19:10:33 2016 -0400

    CDRIVER-449 link from mongoc to libbson errors page

 doc/mongoc_errors.page | 1 +
 1 file changed, 1 insertion(+)

commit d82f052e86fcab9d162980ed8e63ac53daf1ec38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 18 08:52:51 2016 -0400

    properly cat mongo orchestration log

 .mci.yml | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 5b00c86a795d0d1b416ab42b8871ae981853ace4
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 17 10:59:12 2016 -0700

    CDRIVER-1104: Remove no-longer-used MONGOC_I_AM_A_DRIVER

 src/mongoc/mongoc-crypto-cng-private.h     | 2 +-
 src/mongoc/mongoc-crypto-cng.h             | 2 +-
 src/mongoc/mongoc-secure-channel-private.h | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit e1669db76d06a9ba55bc649314763332316cb2d7
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 17 17:21:23 2016 -0700

    CDRIVER-744: Import ca_file into the CA Certificate Store

 src/mongoc/mongoc-secure-channel.c | 74 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 74 insertions(+)

commit b163c93ea2278587fbabf08c8f656ba644758e39
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 9 15:24:21 2016 -0700

    CDRIVER-744: Secure Channel Support

 src/mongoc/mongoc-log.c                            |   3 +-
 src/mongoc/mongoc-secure-channel-private.h         |  38 +-
 src/mongoc/mongoc-secure-channel.c                 | 471 +++++++++++-
 .../mongoc-stream-tls-secure-channel-private.h     |  38 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c      | 849 ++++++++++++++++++++-
 tests/test-mongoc-collection-find.c                |   2 +
 6 files changed, 1358 insertions(+), 43 deletions(-)

commit 3f084597be9e6c2b46938ef2d34c5e97edb1c6fb
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 17 10:54:37 2016 -0700

    CDRIVER-1156: Improve OpenSSL messaging on peer verification failure

 src/mongoc/mongoc-openssl.c            | 1 +
 src/mongoc/mongoc-stream-tls-openssl.c | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 7bd6891aa14a6f0e8811b0caf2de3ca0cbf843ef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 17 19:03:10 2016 -0400

    CDRIVER-1226 fix cmake arg in install guide

 doc/mongoc_installing.page.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 63a1342e468a487814bde2772b5e6e68455fc91f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 12 14:44:26 2016 -0400

    CDRIVER-1122 exec or CreateProcess for each test
    
    On Mac with native TLS we must exec() to reseed the RNG, otherwise it
    aborts. For consistency, exec() on all Unix. On Windows, CreateProcess.

 .mci.yml               |   2 +-
 CONTRIBUTING.md        |  20 +++++---
 tests/TestSuite.c      | 134 ++++++++++++++++++++++++++++++++++++++++---------
 tests/TestSuite.h      |   1 +
 tests/test-libmongoc.c |   9 +++-
 5 files changed, 131 insertions(+), 35 deletions(-)

commit 0bb441de34d3279ca9f89680ab74eb5b2519afe1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 17 11:58:03 2016 -0400

    use relative path in test-libmongoc libtool script

 .mci.yml | 5 +++++
 1 file changed, 5 insertions(+)

commit 5b0ed27c9a9ddc4f39fcafa97e1d52228752d7ca
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 1 16:50:40 2016 -0500

    CDRIVER-1104 remove MONGOC_I_AM_A_DRIVER and libmongoc-priv
    
    PHP drivers need no longer define the MONGOC_I_AM_A_DRIVER preprocessor
    symbol or access private APIs. The check is removed from headers, and
    libmongoc-priv.so is no longer installed.

 CMakeLists.txt                                   |  6 +-----
 NEWS                                             |  4 ++++
 configure.ac                                     |  1 -
 src/Makefile.am                                  |  8 ++++----
 src/libmongoc-priv.pc.in                         | 11 -----------
 src/mongoc/mongoc-array-private.h                |  2 +-
 src/mongoc/mongoc-async-cmd-private.h            |  2 +-
 src/mongoc/mongoc-async-private.h                |  2 +-
 src/mongoc/mongoc-b64-private.h                  |  2 +-
 src/mongoc/mongoc-buffer-private.h               |  2 +-
 src/mongoc/mongoc-bulk-operation-private.h       |  2 +-
 src/mongoc/mongoc-client-pool-private.h          |  2 +-
 src/mongoc/mongoc-client-private.h               |  2 +-
 src/mongoc/mongoc-cluster-private.h              |  2 +-
 src/mongoc/mongoc-collection-private.h           |  2 +-
 src/mongoc/mongoc-counters-private.h             |  2 +-
 src/mongoc/mongoc-crypto-common-crypto-private.h |  2 +-
 src/mongoc/mongoc-crypto-openssl-private.h       |  2 +-
 src/mongoc/mongoc-crypto-private.h               |  2 +-
 src/mongoc/mongoc-cursor-array-private.h         |  2 +-
 src/mongoc/mongoc-cursor-cursorid-private.h      |  2 +-
 src/mongoc/mongoc-cursor-private.h               |  2 +-
 src/mongoc/mongoc-cursor-transform-private.h     |  2 +-
 src/mongoc/mongoc-database-private.h             |  2 +-
 src/mongoc/mongoc-errno-private.h                |  2 +-
 src/mongoc/mongoc-gridfs-file-list-private.h     |  2 +-
 src/mongoc/mongoc-gridfs-file-page-private.h     |  2 +-
 src/mongoc/mongoc-gridfs-file-private.h          |  2 +-
 src/mongoc/mongoc-gridfs-private.h               |  2 +-
 src/mongoc/mongoc-host-list-private.h            |  2 +-
 src/mongoc/mongoc-list-private.h                 |  2 +-
 src/mongoc/mongoc-log-private.h                  |  2 +-
 src/mongoc/mongoc-matcher-op-private.h           |  2 +-
 src/mongoc/mongoc-matcher-private.h              |  2 +-
 src/mongoc/mongoc-memcmp-private.h               |  2 +-
 src/mongoc/mongoc-openssl-private.h              |  2 +-
 src/mongoc/mongoc-queue-private.h                |  2 +-
 src/mongoc/mongoc-rand-private.h                 |  2 +-
 src/mongoc/mongoc-read-concern-private.h         |  2 +-
 src/mongoc/mongoc-read-prefs-private.h           |  2 +-
 src/mongoc/mongoc-rpc-private.h                  |  2 +-
 src/mongoc/mongoc-sasl-private.h                 |  2 +-
 src/mongoc/mongoc-scram-private.h                |  2 +-
 src/mongoc/mongoc-secure-transport-private.h     |  2 +-
 src/mongoc/mongoc-server-stream-private.h        |  2 +-
 src/mongoc/mongoc-set-private.h                  |  2 +-
 src/mongoc/mongoc-stream-private.h               |  2 +-
 src/mongoc/mongoc-thread-private.h               |  2 +-
 src/mongoc/mongoc-topology-scanner-private.h     |  2 +-
 src/mongoc/mongoc-uri-private.h                  |  2 +-
 src/mongoc/mongoc-util-private.h                 |  2 +-
 src/mongoc/mongoc-write-command-private.h        |  2 +-
 src/mongoc/mongoc-write-concern-private.h        |  2 +-
 53 files changed, 57 insertions(+), 69 deletions(-)

commit 7a400add1d9c7e7e92b58efad662b1bc731b0e63
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 1 16:50:40 2016 -0500

    remove mongoc-rpc-validate tool

 .gitignore                     |   1 -
 CMakeLists.txt                 |   1 -
 examples/Makefile.am           |   8 ---
 examples/mongoc-rpc-validate.c | 119 -----------------------------------------
 4 files changed, 129 deletions(-)

commit 036d9ac767f4ce6019cba7d544b7a4e9bbc059ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 10 17:30:48 2016 -0400

    CDRIVER-449 links to "errors" page
    
    Everywhere we'd linked to libbson's bson_error_t page, link to the C
    Driver's more useful error-handling guide. The error-handling guide
    itself still links to libbson's bson_error_t page if you need to see the
    actual struct declaration.

 doc/mongoc_apm_command_failed_get_error.page         | 2 +-
 doc/mongoc_bulk.page                                 | 6 +++---
 doc/mongoc_bulk_operation_execute.page               | 2 +-
 doc/mongoc_client_command_simple.page                | 2 +-
 doc/mongoc_client_get_database_names.page            | 2 +-
 doc/mongoc_client_get_gridfs.page                    | 2 +-
 doc/mongoc_client_get_server_status.page             | 2 +-
 doc/mongoc_client_select_server.page                 | 2 +-
 doc/mongoc_collection_command_simple.page            | 2 +-
 doc/mongoc_collection_count.page                     | 2 +-
 doc/mongoc_collection_count_with_opts.page           | 2 +-
 doc/mongoc_collection_create_index.page              | 2 +-
 doc/mongoc_collection_delete.page                    | 2 +-
 doc/mongoc_collection_drop.page                      | 2 +-
 doc/mongoc_collection_drop_index.page                | 2 +-
 doc/mongoc_collection_ensure_index.page              | 2 +-
 doc/mongoc_collection_find_and_modify.page           | 2 +-
 doc/mongoc_collection_find_and_modify_with_opts.page | 2 +-
 doc/mongoc_collection_find_indexes.page              | 2 +-
 doc/mongoc_collection_insert.page                    | 2 +-
 doc/mongoc_collection_insert_bulk.page               | 2 +-
 doc/mongoc_collection_remove.page                    | 2 +-
 doc/mongoc_collection_rename.page                    | 2 +-
 doc/mongoc_collection_save.page                      | 2 +-
 doc/mongoc_collection_stats.page                     | 2 +-
 doc/mongoc_collection_update.page                    | 2 +-
 doc/mongoc_collection_validate.page                  | 2 +-
 doc/mongoc_cursor_error.page                         | 2 +-
 doc/mongoc_database_add_user.page                    | 2 +-
 doc/mongoc_database_command_simple.page              | 2 +-
 doc/mongoc_database_create_collection.page           | 2 +-
 doc/mongoc_database_drop.page                        | 2 +-
 doc/mongoc_database_find_collections.page            | 2 +-
 doc/mongoc_database_get_collection_names.page        | 2 +-
 doc/mongoc_database_has_collection.page              | 2 +-
 doc/mongoc_database_remove_all_users.page            | 2 +-
 doc/mongoc_database_remove_user.page                 | 2 +-
 doc/mongoc_gridfs_drop.page                          | 2 +-
 doc/mongoc_gridfs_file_error.page                    | 2 +-
 doc/mongoc_gridfs_file_list_error.page               | 2 +-
 doc/mongoc_gridfs_file_remove.page                   | 2 +-
 doc/mongoc_gridfs_find_one.page                      | 2 +-
 doc/mongoc_gridfs_find_one_by_filename.page          | 2 +-
 doc/mongoc_gridfs_remove_by_filename.page            | 2 +-
 doc/mongoc_matcher_new.page                          | 2 +-
 45 files changed, 47 insertions(+), 47 deletions(-)

commit 60e60a432909e268496ebea8122fa1340426f456
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 15 11:25:04 2016 -0400

    CDRIVER-769 uninit'ed free in APM

 src/mongoc/mongoc-client.c | 2 --
 1 file changed, 2 deletions(-)

commit 212adb9cdee548e88796afcec997178083ab4aaf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 15 11:24:03 2016 -0400

    unused include in mock server

 tests/mock_server/mock-server.c | 1 -
 1 file changed, 1 deletion(-)

commit 43a739c8941c1609cd506aab4662c2be99c8bc61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 15 11:23:51 2016 -0400

    longer TLS handshake timeout in mock server

 tests/mock_server/mock-server.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit ca0cb02fb400df00e27887b359bfe89ff9357eb6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 15 08:48:38 2016 -0400

    fix comment in mock server code

 tests/mock_server/mock-server.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 90a56a4dd7f40cd6c7025d3b1fc27faccbd8b612
Author: Remi Collet <remi@famillecollet.com>
Date:   Mon May 16 22:13:09 2016 +0200

    CDRIVER-1231 Allow to use system crypto policies (#326)

 CMakeLists.txt                | 11 +++++++++++
 build/autotools/CheckSSL.m4   | 16 ++++++++++++++++
 src/mongoc/mongoc-config.h.in | 11 ++++++++++-
 src/mongoc/mongoc-openssl.c   |  5 +++++
 4 files changed, 42 insertions(+), 1 deletion(-)

commit 460278b7e177fd6114252730dd509bd43f16836a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 15 08:44:40 2016 -0400

    avoid DNS test failures
    
    To cause the expected error message, allow enough time for DNS to fail
    instead of canceling.

 tests/test-mongoc-server-selection-errors.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 065081ae5b4f8149fb90017000e28b8f2eeaa186
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 12 21:40:22 2016 -0400

    avoid warning at end of evergreen task
    
    Don't try to stop mongo-orchestration and print its log unless task
    setup has failed.

 .mci.yml | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit 4b87a90a5f0d57da8c50d221746ecad60380a304
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 14 15:09:54 2016 -0400

    small .mci.yml improvements

 .mci.yml | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit b19cb5f6e000f1c9039a88a4007c7410c249fbc7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 14 15:09:38 2016 -0400

    CDRIVER-1219 disable timeout tests on Windows

 tests/test-mongoc-topology.c | 2 ++
 1 file changed, 2 insertions(+)

commit 86dfb4e792303122c9555c692e6c624fdc47e50c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 4 21:14:58 2016 -0400

    reliably start Mongo Orchestration
    
    There appeared to be interference between our custom commands to stop or
    kill Orchestration and MongoDB, and Evergreen's automatic cleanup logic.
    Deleting most of our own cleanup logic makes tasks more reliable.

 .mci.yml                                     | 82 +++++++---------------------
 orchestration_configs/servers/auth-ssl.json  |  4 +-
 orchestration_configs/servers/basic-ssl.json |  4 +-
 3 files changed, 23 insertions(+), 67 deletions(-)

commit 280a6be5ed5ad795257c7f134c85f0a72daac8c9
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 10 10:32:16 2016 -0700

    Only compile sasl tests when compiling with sasl enabled

 tests/Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 7bb8c54840da8d8f969eb4f8d1bd06df651bcd5c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 9 13:38:50 2016 -0700

    CDRIVER-1156: Organize our defines a bit better
    
    MONGOC_ENABLE_SSL[_OPENSSL|_SECURE_CHANNEL|_SECURE_TRANSPORT]
    MONGOC_ENABLE_CRYPTO[_LIBCRYPTO|_CNG|_COMMON_CRYPTO]

 CMakeLists.txt                                     | 20 ++++----
 build/autotools/CheckSSL.m4                        | 53 +++++++++++-----------
 src/mongoc/Makefile.am                             | 10 ++--
 src/mongoc/mongoc-config.h.in                      | 40 ++++++++--------
 src/mongoc/mongoc-crypto-common-crypto-private.h   |  4 +-
 src/mongoc/mongoc-crypto-common-crypto.c           |  2 +-
 src/mongoc/mongoc-crypto-openssl-private.h         |  4 +-
 src/mongoc/mongoc-crypto-openssl.c                 |  2 +-
 src/mongoc/mongoc-crypto.c                         |  8 ++--
 src/mongoc/mongoc-init.c                           |  6 +--
 src/mongoc/mongoc-openssl.c                        |  2 +-
 src/mongoc/mongoc-rand-cng.c                       |  2 +-
 src/mongoc/mongoc-rand-common-crypto.c             |  2 +-
 src/mongoc/mongoc-rand-openssl.c                   |  2 +-
 src/mongoc/mongoc-secure-channel.c                 |  2 +-
 src/mongoc/mongoc-secure-transport.c               |  2 +-
 src/mongoc/mongoc-ssl.c                            | 12 ++---
 src/mongoc/mongoc-stream-tls-openssl-bio-private.h |  4 +-
 src/mongoc/mongoc-stream-tls-openssl-bio.c         |  4 +-
 src/mongoc/mongoc-stream-tls-openssl-private.h     |  4 +-
 src/mongoc/mongoc-stream-tls-openssl.c             |  4 +-
 src/mongoc/mongoc-stream-tls-openssl.h             |  4 +-
 .../mongoc-stream-tls-secure-channel-private.h     |  4 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c      |  4 +-
 src/mongoc/mongoc-stream-tls-secure-channel.h      |  4 +-
 .../mongoc-stream-tls-secure-transport-private.h   |  4 +-
 src/mongoc/mongoc-stream-tls-secure-transport.c    |  4 +-
 src/mongoc/mongoc-stream-tls-secure-transport.h    |  4 +-
 src/mongoc/mongoc-stream-tls.c                     | 12 ++---
 tests/ssl-test.c                                   |  8 ++--
 tests/test-libmongoc.c                             |  2 +-
 tests/test-mongoc-async.c                          |  4 +-
 tests/test-mongoc-client.c                         |  4 +-
 tests/test-mongoc-collection-find.c                |  4 +-
 tests/test-mongoc-stream-tls-error.c               |  4 +-
 tests/test-mongoc-stream-tls.c                     | 12 ++---
 tests/test-mongoc-topology-scanner.c               |  4 +-
 tests/test-x509.c                                  |  4 +-
 38 files changed, 138 insertions(+), 137 deletions(-)

commit d6731fb93d8121b9ff36182f227621c10d996c5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 6 14:45:03 2016 -0400

    CDRIVER-1221 fix mongoc_cursor_is_alive

 src/mongoc/mongoc-cursor-cursorid.c |  3 ++-
 src/mongoc/mongoc-cursor.c          |  6 +----
 tests/test-mongoc-collection-find.c |  5 ++++
 tests/test-mongoc-collection.c      |  3 +++
 tests/test-mongoc-cursor.c          | 50 +++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-exhaust.c         |  2 ++
 6 files changed, 63 insertions(+), 6 deletions(-)

commit ef2e8aa28b9a7d66d05ea518c8fb604035e70f61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 4 16:27:29 2016 -0400

    CDRIVER-449 document error domains and codes

 doc/mongoc_client_pool_set_error_api.page  |   2 +-
 doc/mongoc_client_set_error_api.page       |   2 +-
 doc/mongoc_error_api.page                  | 149 ----------
 doc/mongoc_errors.page                     | 448 +++++++++++++++++++++++++++++
 doc/mongoc_index.page                      |   4 +-
 doc/mongoc_write_concern_get_wtimeout.page |   2 +-
 doc/mongoc_write_concern_set_wtimeout.page |   2 +-
 7 files changed, 454 insertions(+), 155 deletions(-)

commit 5634831ce108cd7851ae9257a5056eb96c2b1a32
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 6 16:50:08 2016 -0400

    CDRIVER-1179 don't disable flags g++ rejects
    
    In ./autogen.sh --enable-maintainer-flags, for some reason we check if
    both gcc and g++ accept each flag, and disable the flag if not. Thus we
    disabled -Wdeclaration-after-statement, which is a useful flag to have
    turned on when compiling C.
    
    We don't use g++, so don't check flags for g++ compatibility.

 build/autotools/AutoHarden.m4      | 22 ++++++---------------
 build/autotools/MaintainerFlags.m4 | 40 +++++++++++++++++++-------------------
 build/autotools/PlatformFlags.m4   |  9 ++++-----
 3 files changed, 30 insertions(+), 41 deletions(-)

commit e38cada1ce5cedeb464c7c611e0506a66bcb1003
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 7 16:36:28 2016 -0400

    merge r1.3 branch

 NEWS             | 39 +++++++++++++++++++++++++++++++++++++++
 VERSION_RELEASED |  2 +-
 2 files changed, 40 insertions(+), 1 deletion(-)

commit 876f5e341a4fca91957d84d5f944deb13bdebe9f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 7 16:35:06 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 23e2b6cace986621006427523f88ace3eaba1b3b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 4 10:19:16 2016 -0400

    test code layout

 tests/test-mongoc-topology.c | 27 ++++++++++++++++++---------
 1 file changed, 18 insertions(+), 9 deletions(-)

commit 28ff626ff360b81e503b155510412cedea40152c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 3 16:38:27 2016 -0400

    CDRIVER-1219 single-thread timeout bugs
    
    If serverSelectionTryOnce is false, selection should time out with
    "serverselectiontimeoutms timed out", not "minheartbeatfrequencyms not
    reached yet".
    
    Fix timing logic to rescan every 500ms while selection fails.

 src/mongoc/mongoc-topology.c |  5 +++--
 tests/test-mongoc-topology.c | 30 ++++++++++++++++++++++--------
 2 files changed, 25 insertions(+), 10 deletions(-)

commit 1808e2f4d07148921a230181c04e533cd448f242
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 4 09:54:49 2016 -0400

    CDRIVER-1219 test selection with a down secondary

 tests/test-mongoc-topology.c | 31 ++++++++++++++++++-------------
 1 file changed, 18 insertions(+), 13 deletions(-)

commit ba27f22122b368ead126ca0cca3d5a8e0e1f9fe8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 3 16:08:59 2016 -0400

    CDRIVER-1219 test selection with a down secondary

 tests/test-mongoc-topology.c | 130 +++++++++++++++++++++++++++++++++++++------
 1 file changed, 113 insertions(+), 17 deletions(-)

commit 7b605da208c99b14ad208291d8618233117cd018
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 3 14:22:23 2016 -0400

    use relative lib and data paths in tests
    
    After recent Evergreen changes, the source dir when autogen or cmake
    runs isn't the same as the working dir when the tests run.

 .mci.yml          | 4 +++-
 CMakeLists.txt    | 1 -
 tests/Makefile.am | 2 --
 3 files changed, 3 insertions(+), 4 deletions(-)

commit 7aefffbdad9cf9cdbc9283c64e5f8b9a1ae54bf8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 3 19:10:21 2016 -0400

    CDRIVER-807 docs for command funcs and read prefs

 doc/mongoc_client_command.page            | 2 +-
 doc/mongoc_client_command_simple.page     | 2 +-
 doc/mongoc_collection_command.page        | 2 +-
 doc/mongoc_collection_command_simple.page | 2 +-
 doc/mongoc_database_command.page          | 2 +-
 doc/mongoc_database_command_simple.page   | 2 +-
 6 files changed, 6 insertions(+), 6 deletions(-)

commit 51e966afe10d54318ba727359db100f78cca98c5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 28 09:17:21 2016 -0400

    CDRIVER-1213 pre-split bulk ops every 1000 docs
    
    Speeds up mongoc_bulk_operation_execute when it has large numbers of
    small documents, by avoiding the need to split and copy batches of
    documents.

 src/mongoc/mongoc-bulk-operation.c | 28 +++++++++++++++++++---------
 1 file changed, 19 insertions(+), 9 deletions(-)

commit c8a9902fc58dbf63a6e3f7c8dbfc2e0cbedbc9d0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 2 13:05:10 2016 -0400

    CDRIVER-1217 package-manager install steps

 doc/mongoc_installing.page.in | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit d51678c5879ff9a57c973ed9d3fdedd1158e64fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 30 10:16:29 2016 -0400

    CDRIVER-1217 remove spec files
    
    Remi Collet's third-party RPM packaging for libbson and libmongoc is
    published and high-quality.

 Makefile.am                   |   4 -
 build/rpm/mongo-c-driver.spec | 270 ------------------------------------------
 2 files changed, 274 deletions(-)

commit 4ea3cfafbc356ac6ca4876f757025fa62960fc74
Merge: 9a31e4c 88c6375
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Apr 28 09:44:43 2016 -0400

    Merge pull request #324 from jmikola/cursor-stamp
    
    Remove unused stamp field on _mongoc_cursor_t struct

commit 88c63751dd9dce2e373c4a3b6e04c51c2f210a89
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Apr 27 23:23:16 2016 -0400

    Remove unused stamp field on _mongoc_cursor_t struct

 src/mongoc/mongoc-cursor-private.h | 1 -
 1 file changed, 1 deletion(-)

commit 9a31e4c9adc8159ce64d43942b86999eab0eb940
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 27 15:55:11 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 575288df3ad220a9a8f55f90413e8043723ebd79
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 27 15:41:08 2016 -0700

    CDRIVER-1209: segfault when failing to find username

 src/mongoc/mongoc-cluster.c | 28 +++++++++++++++++++---------
 src/mongoc/mongoc-openssl.c |  4 ++++
 2 files changed, 23 insertions(+), 9 deletions(-)

commit d71d82bf5a79bf4b0e12cd5171302e04d499d291
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 21 23:00:42 2016 -0400

    mallard2man fixes
    
    CDRIVER-976 stray ampersands in man pages, and CDRIVER-967, badly
    rendered bullet points, and CDRIVER-1077 rename error-api.3 to
    mongoc-error-api.3.
    
    Silence warnings about <info>, <steps>, <desc>, <links>, and <thead>
    elements. Handle <example>. Remove extra indentation from paragraphs,
    and fix rendering of titles that contain double quotes.

 doc/error-api.page                    | 148 ---------------------------------
 doc/mallard2man.py                    |  34 +++++---
 doc/mongoc_basic_troubleshooting.page |   6 +-
 doc/mongoc_error_api.page             | 149 ++++++++++++++++++++++++++++++++++
 doc/mongoc_matcher.page               |   3 +-
 doc/mongoc_version.page.in            |  26 +++---
 6 files changed, 189 insertions(+), 177 deletions(-)

commit 794d247328f70ff2c9e56d6e6d1864f08a5e5eec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 22 01:35:12 2016 -0400

    CDRIVER-741 minimal collection name checking

 src/mongoc/mongoc-collection.c | 31 +------------------------------
 tests/test-mongoc-collection.c | 31 +++++++++++++++++++++++++++----
 2 files changed, 28 insertions(+), 34 deletions(-)

commit 4db1f2113351b403343d94236167233ae35bc391
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 22 01:17:04 2016 -0400

    CDRIVER-1159 test empty aggregate

 tests/test-mongoc-collection.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 4207c88847fcfa664616d9f03cbacfa8d63a0376
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 25 12:44:33 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8150fbb147daf9c632366d521cf1751c6bddf190
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 19 12:05:04 2016 -0400

    new test method mock_mongos_new

 tests/mock_server/mock-server.c | 37 +++++++++++++++++++++++++++++++++++++
 tests/mock_server/mock-server.h |  2 ++
 tests/test-mongoc-client.c      |  8 +-------
 tests/test-mongoc-database.c    |  7 +------
 tests/test-mongoc-gridfs.c      |  8 +-------
 5 files changed, 42 insertions(+), 20 deletions(-)

commit 3c507b0f7468e90979d5ecba3ba269e55cc58f1b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 21 08:15:07 2016 -0400

    fix json format when last test is skipped
    
    Now that /SASL/gssapi_kerberos has been moved to last place, it shows a
    bug where the suite prints a stray comma if the final test is skipped.

 tests/TestSuite.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 49b7b6dbbe8c187fdd3f2de2a18742392b467ba2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 20 18:14:36 2016 -0400

    CDRIVER-1174 skip SASL test if SASL not configured

 CMakeLists.txt         | 7 ++++++-
 tests/test-libmongoc.c | 8 ++++++--
 tests/test-sasl.c      | 1 -
 3 files changed, 12 insertions(+), 4 deletions(-)

commit 268fbe66479f4b981d24d328c9b050aded1bd3cb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 20 17:12:17 2016 -0400

    CDRIVER-1174 parse SERVICE_NAME and CANONICALIZE_HOST_NAME
    
    The GSSAPI properties SERVICE_NAME and CANONICALIZE_HOST_NAME are now
    properly parsed from the URI.

 NEWS                             |  3 ++
 doc/mongoc_authentication.page   | 19 +++++++------
 src/mongoc/mongoc-cluster.c      | 23 ++++------------
 src/mongoc/mongoc-sasl-private.h |  4 +++
 src/mongoc/mongoc-sasl.c         | 59 ++++++++++++++++++++++++++++++++++++++++
 tests/test-sasl.c                | 39 ++++++++++++++++++++++++++
 6 files changed, 120 insertions(+), 27 deletions(-)

commit ed4d53ec873952ac929bc3f4467a935dde2a0681
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 21 19:41:02 2016 -0400

    CDRIVER-1203 improve server-selection errors
    
    Include each server's ismaster error in the server-selection error from
    a pooled client.

 src/mongoc/mongoc-topology-scanner-private.h |   5 +-
 src/mongoc/mongoc-topology-scanner.c         |  76 ++++++----
 src/mongoc/mongoc-topology.c                 |  92 +++++++-----
 tests/test-mongoc-server-selection-errors.c  | 216 ++++++++++++++++++++++-----
 tests/test-mongoc-topology.c                 |   5 +-
 5 files changed, 285 insertions(+), 109 deletions(-)

commit 723d5b6784b83c4ea75fa5bafb4d74827dc78860
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 19 14:51:23 2016 -0400

    CDRIVER-1137 use read pref for count and collStats
    
    mongoc_collection_count and mongoc_collection_stats now default to the
    collection's read preference.

 NEWS                                 |   6 ++
 build/generate-future-functions.py   |  18 ++++++
 doc/mongoc_collection_count.page     |   2 +-
 doc/mongoc_collection_stats.page     |   9 +--
 src/mongoc/mongoc-collection.c       |  40 +++++++-----
 tests/mock_server/future-functions.c | 116 +++++++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h |  24 ++++++++
 tests/test-mongoc-collection.c       | 111 ++++++++++++++++++++++++++-------
 8 files changed, 285 insertions(+), 41 deletions(-)

commit 032b66fbc00698db5587f799ff70bce7e89f1df4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 22 01:17:04 2016 -0400

    CDRIVER-1159 test empty aggregate

 tests/test-mongoc-collection.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 18d66c10df797ec458241e8c622e8d0081a1feb0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 21 15:12:34 2016 -0400

    CDRIVER-696 test-code style

 tests/test-mongoc-server-selection-errors.c | 40 +++++++++++++++++++----------
 1 file changed, 27 insertions(+), 13 deletions(-)

commit caff0417650fa120a387687c6c6bd6e965b05afa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 20 11:43:02 2016 -0400

    CDRIVER-1204 mongoc_write_concern_is_acknowledged (NULL) is true

 doc/mongoc_write_concern_is_acknowledged.page | 1 +
 src/mongoc/mongoc-write-command.c             | 6 +-----
 src/mongoc/mongoc-write-concern.c             | 2 +-
 tests/test-mongoc-write-concern.c             | 4 ++++
 4 files changed, 7 insertions(+), 6 deletions(-)

commit 27b7f34b20c08e0a429fa32cc9daeb9f151f5380
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 15 13:07:51 2016 -0400

    CDRIVER-1194 unack'ed write replies should be empty

 .gitignore                                |  1 +
 NEWS                                      |  4 ++
 doc/mongoc_bulk.page                      | 11 ++++-
 examples/Makefile.am                      |  5 ++
 examples/bulk/bulk6.c                     | 65 ++++++++++++++++++++++++++
 src/mongoc/mongoc-bulk-operation.c        |  3 +-
 src/mongoc/mongoc-collection.c            | 14 ++++--
 src/mongoc/mongoc-write-command-private.h |  3 +-
 src/mongoc/mongoc-write-command.c         | 15 ++++--
 tests/test-bulk.c                         | 36 +++++++++++++++
 tests/test-mongoc-collection.c            | 76 +++++++++++++++++++++++++++++++
 tests/test-write-commands.c               |  9 ++--
 12 files changed, 227 insertions(+), 15 deletions(-)

commit 28475f388bc155bf97801bfae434c5c1fcd63ef4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 15 08:46:46 2016 -0400

    spelling in mongoc_bulk.page

 doc/mongoc_bulk.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 57d15b1093c50e73e2da7d5847e80e7d41e8e50b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 19 11:27:38 2016 -0400

    CDRIVER-1204 APM for mongoc_client_command

 src/mongoc/mongoc-cursor.c             | 103 ++++++++++++--------
 tests/test-mongoc-command-monitoring.c | 170 +++++++++++++++++++++++++++++++++
 2 files changed, 234 insertions(+), 39 deletions(-)

commit 4bdcec457cf995ad8e2776b5e64a4190c46197e3
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 20 10:13:19 2016 -0700

    Printout the test that is being executed

 .mci.yml | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 3eb184cf14ad82924a14f0bd12e906e52ff82fe5
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 20 10:05:50 2016 -0700

    Regenerate the commonName certificate without SAN and enable test

 tests/test-mongoc-stream-tls.c |  2 -
 tests/x509gen/commonName.pem   | 89 +++++++++++++++++++++---------------------
 2 files changed, 44 insertions(+), 47 deletions(-)

commit f098df34629f134abcbbd0838ba1b77379e85929
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 20 10:09:35 2016 -0400

    typos in "flags" docs

 doc/mongoc_insert_flags_t.page | 2 +-
 doc/mongoc_query_flags_t.page  | 2 +-
 doc/mongoc_reply_flags_t.page  | 2 +-
 doc/mongoc_update_flags_t.page | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit bc6f7e8d84b7ef7d1fc3dd4b3937655ca206019e
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 18 19:54:58 2016 -0700

    Fix -Werror=unused-function build
    
    Its only ever used for one TRACE() instance

 src/mongoc/mongoc-topology-description.c | 2 ++
 1 file changed, 2 insertions(+)

commit 75b08be22edcc36c7e8c16903d665cd60dfd43b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 18 18:23:33 2016 -0400

    CDRIVER-1190 update GridFS tests
    
    Now that indexes are properly ensured, two tests require adaptation.

 tests/test-mongoc-gridfs.c | 30 ++++++++++++++++++------------
 1 file changed, 18 insertions(+), 12 deletions(-)

commit 5a1fe0548795847119503404a92e3dea01e21463
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 18 18:41:42 2016 -0400

    CDRIVER-1114 remove threaded test option
    
    The "parallel" option to run tests in multi-threaded mode hasn't worked
    in recent memory. Rely on the default "forked" mode, which does work.

 tests/TestSuite.c | 173 ++++++------------------------------------------------
 1 file changed, 17 insertions(+), 156 deletions(-)

commit 6ecf6d2c83850ac24c9b662f41c2da4927469fcb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 18 14:40:27 2016 -0400

    CDRIVER-1130 docs missing for 3 cursor functions
    
    Document mongoc_cursor_set_batch_size, mongoc_cursor_get_batch_size, and
    mongoc_cursor_get_id.

 doc/mongoc_cursor_get_batch_size.page | 33 +++++++++++++++++++++++++++++++++
 doc/mongoc_cursor_get_id.page         | 33 +++++++++++++++++++++++++++++++++
 doc/mongoc_cursor_set_batch_size.page | 35 +++++++++++++++++++++++++++++++++++
 3 files changed, 101 insertions(+)

commit b18a973c037a2a9510142f8782cd4b05c9b96d3d
Merge: 62e680a f3fb5c1
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Mon Apr 18 14:18:52 2016 -0700

    Merge pull request #323 from jmikola/cdriver-1198
    
    CDRIVER-1198: Use strings for server and topology types in SDAM transition logs

commit f3fb5c13406121ec85f49a71cd29907ba0ad6785
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Apr 18 17:02:17 2016 -0400

    Remove trailing newline from mongoc_server_description_type() error

 src/mongoc/mongoc-server-description.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 20a3a0e07a7d747ff54e2b0e1a6414a58b1d1143
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Apr 11 21:58:16 2016 -0400

    CDRIVER-1198: Use strings for server and topology types in SDAM transition logs

 src/mongoc/mongoc-topology-description.c | 44 ++++++++++++++++++++++++++++++--
 1 file changed, 42 insertions(+), 2 deletions(-)

commit 62e680aa26754ef8dbdb2709aac4d2488507872a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 15 16:05:46 2016 -0400

    CDRIVER-1190 ensure proper GridFS indexes

 NEWS                       |  3 +++
 src/mongoc/mongoc-gridfs.c |  3 ++-
 tests/test-mongoc-gridfs.c | 52 ++++++++++++++++++++++++++++++++++++++++++++--
 3 files changed, 55 insertions(+), 3 deletions(-)

commit 0e76d9b6902d79248a37023085059faca6347fe7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 14 16:49:29 2016 -0400

    CDRIVER-1192 command cursor leaks reply

 doc/mongoc_cursor_new_from_command_reply.page |  2 +-
 src/mongoc/mongoc-cursor-cursorid-private.h   |  2 +-
 src/mongoc/mongoc-cursor-cursorid.c           | 27 ++++++++-------------------
 tests/test-mongoc-cursor.c                    | 11 +++++------
 4 files changed, 15 insertions(+), 27 deletions(-)

commit 898ad602ce0aa13f33af0f086576ac7b5fa07b86
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 17 21:39:42 2016 -0400

    CDRIVER-1171 order of libraries in libmongoc-1.0.pc

 src/libmongoc-1.0.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e9353e5ee5cee7d36486c567a59a1ec4aa39b352
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 18 09:19:22 2016 -0400

    Revert "CDRIVER-877 test libbson on Windows in Evergreen"
    
    This reverts commit 626319b0f02b84933a88a86bb13db07dfbc38d37.

 .mci.yml | 1 -
 1 file changed, 1 deletion(-)

commit 626319b0f02b84933a88a86bb13db07dfbc38d37
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 17 21:05:50 2016 -0400

    CDRIVER-877 test libbson on Windows in Evergreen

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit 3f42356d7149f554506f835c1d858f0608a92412
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 17 17:24:26 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5430584f44d83c09d7c63d398118b79de2d613b8
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 15 11:07:10 2016 -0700

    Fix build on VS2010

 tests/test-mongoc-collection.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit aa1a7a8b481411f027d3931a2d52382398345ac1
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 15 10:33:31 2016 -0700

    Fix last-minute certificate subject changes

 tests/test-x509.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit dc28c2441b80d6e087f3619ec67b17d849fcaed5
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 15 09:26:59 2016 -0700

    bump libbson after test/leak fixes

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bb8b065ccbf41fa88dc690c49a0e3a12a81989c0
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Apr 14 13:59:52 2016 -0700

    Disable the common name test
    
    Will enable it again when we've reissued the certificate without SAN

 tests/test-mongoc-stream-tls.c | 2 ++
 1 file changed, 2 insertions(+)

commit b62802de023d97234b68e38f669055c9c6ecefff
Author: Brian Samek <brian.samek@mongodb.com>
Date:   Thu Mar 31 14:40:39 2016 -0400

    BUILD-893 Upgrade OS X builders to OS X 10.10

 .mci.yml | 36 ++++++++++++++++++------------------
 1 file changed, 18 insertions(+), 18 deletions(-)

commit c86657716f9ed6da0e84928b930f484628b96d63
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 13 11:34:02 2016 -0700

    Improve debugging

 src/mongoc/mongoc-secure-transport.c | 30 +++++++++++++++++++-----------
 src/mongoc/mongoc-stream-tls.c       | 19 +++++++++++++++----
 tests/mock_server/mock-server.c      |  3 ++-
 tests/ssl-test.c                     |  8 ++++++++
 tests/test-mongoc-async.c            |  2 +-
 tests/test-mongoc-stream-tls.c       | 11 +++++++++--
 tests/test-mongoc-topology-scanner.c |  2 +-
 7 files changed, 55 insertions(+), 20 deletions(-)

commit c1fa41f9ed8b43a1931bfa6f2d166cd5aa71a660
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 11 16:49:46 2016 -0700

    CDRIVER-842: Add mongoc_ssl_opt_t.allow_invalid_hostname

 src/mongoc/mongoc-openssl-private.h             |  2 +-
 src/mongoc/mongoc-openssl.c                     |  4 ++--
 src/mongoc/mongoc-ssl.h                         |  3 ++-
 src/mongoc/mongoc-stream-tls-openssl.c          |  9 +++++++--
 src/mongoc/mongoc-stream-tls-private.h          |  2 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c   |  2 +-
 src/mongoc/mongoc-stream-tls-secure-transport.c |  4 ++--
 tests/test-mongoc-stream-tls.c                  | 24 ++++++++++++++++++++++++
 8 files changed, 40 insertions(+), 10 deletions(-)

commit 78048bb9cd88984b82e8ef274f3b06f3bf9c0f6c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 11 16:24:57 2016 -0700

    CDRIVER-1143: Replace manually generated certificates with pregenerated ones

 .mci.yml                             |  22 +--
 CMakeLists.txt                       |   2 +-
 tests/.gitignore                     |   1 -
 tests/Makefile.am                    |  64 +-------
 tests/TestSuite.h                    |  15 ++
 tests/c_rehash                       | 180 ----------------------
 tests/certificates/ca.pem            |  18 ---
 tests/certificates/client.pem        | 101 ------------
 tests/make_ca.pl                     | 128 ----------------
 tests/test-mongoc-async.c            |  11 +-
 tests/test-mongoc-client.c           |  17 +--
 tests/test-mongoc-stream-tls-error.c |  11 +-
 tests/test-mongoc-stream-tls.c       | 289 +++++++++++++++++++++++------------
 tests/test-mongoc-topology-scanner.c |  10 +-
 tests/test-replica-set-ssl.c         |   8 +-
 tests/test-x509.c                    |  51 +------
 tests/trust_dir.cnf                  |  84 ----------
 tests/x509gen/7750279a.0             |   1 +
 tests/x509gen/altname.pem            |  49 ++++++
 tests/x509gen/ca.pem                 |  48 ++++++
 tests/x509gen/client.pem             |  48 ++++++
 tests/x509gen/commonName.pem         |  49 ++++++
 tests/x509gen/crl.pem                |  41 +++++
 tests/x509gen/expired.pem            |  49 ++++++
 tests/x509gen/password_protected.pem |  52 +++++++
 tests/x509gen/server.pem             |  48 ++++++
 tests/x509gen/wild.pem               |  49 ++++++
 27 files changed, 686 insertions(+), 760 deletions(-)

commit 292ceeaae06844f3d759e4a05e9b9cb7be97171e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 14 16:49:29 2016 -0400

    leaks in collection and bulk tests

 tests/test-bulk.c              |  2 ++
 tests/test-mongoc-collection.c | 36 ++++++++++++++++++++++--------------
 2 files changed, 24 insertions(+), 14 deletions(-)

commit e78c69b3456cf17f3fed180ac8b33ad56a98fadd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 14 16:05:14 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eb347094416b033d8e651371ff2aaa4dd281d2bc
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 13 15:36:54 2016 -0700

    CDRIVER-1080: Warn when downloading non-releases from Github

 autogen.sh | 4 ++++
 1 file changed, 4 insertions(+)

commit 0c8d66e321a174354d3e5bbc98f129dfa32be68a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 8 14:02:34 2016 -0400

    CDRIVER-1196 make pool a LIFO.
    
    For cache coherence, mongoc_client_pool_pop returns the most recently
    used client, not the least recently used.

 src/mongoc/mongoc-client-pool.c | 2 +-
 tests/test-mongoc-client-pool.c | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 5a93cca04bab99e740b183d617aa40d6997c244e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 8 14:00:16 2016 -0400

    don't unlock and lock the pool in push()
    
    mongoc_client_pool_push wasted time unnecessarily unlocking and locking
    the pool.

 src/mongoc/mongoc-client-pool.c | 2 --
 1 file changed, 2 deletions(-)

commit 052820ba52717f41896c5810ab9c76bfb099cf46
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 8 13:56:05 2016 -0400

    CDRIVER-1149 minPoolSize=0 means "no minimum"

 doc/mongoc_uri_t.page           |  5 +++--
 src/mongoc/mongoc-client-pool.c |  2 +-
 tests/test-mongoc-client-pool.c | 32 ++++++++++++++++++++++++++++++++
 3 files changed, 36 insertions(+), 3 deletions(-)

commit 70ad42bb8aa15769437b7cb16b8963c600dd0e78
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 8 13:51:25 2016 -0400

    test pool order

 tests/test-mongoc-client-pool.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit cb52969bcd0a8baf6af14c2336cd184b1b398e7d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Apr 14 11:29:33 2016 -0400

    CDRIVER-1200 fix explain-command example

 doc/mongoc_collection_find.page | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

commit c388423ef0099dc0c01aba33fde1356b3212e367
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Apr 11 16:27:29 2016 -0700

    Fix loading order
    
    We have to load the platform specific flags after the normal
    maintainer flags, or else they might get overwritten by the maintainer
    flags, defeating the purpose

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c2fe59accb7ae822dd6f2681839de065a8b9bbd4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 13 11:09:21 2016 -0700

    CDRIVER-1195: Add missing symbol

 src/libmongoc.symbols | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 44e80dae4a02a2011e5a8ac451beab7a72459a50
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Apr 12 15:31:56 2016 -0500

    CDRIVER-1195: Implement mongoc_server_description_round_trip_time() (#321)

 build/autotools/versions.ldscript                  |  1 +
 build/cmake/libmongoc-ssl.def                      |  1 +
 build/cmake/libmongoc.def                          |  1 +
 doc/mongoc_server_description_round_trip_time.page | 32 ++++++++++++++++++++++
 src/mongoc/mongoc-server-description.c             | 20 ++++++++++++++
 src/mongoc/mongoc-server-description.h             |  3 ++
 6 files changed, 58 insertions(+)

commit 8c1f216af5d9e830a32f8dfc897a500212b2d8b8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 8 21:38:53 2016 -0400

    CDRIVER-1185 fix command-monitoring test

 tests/test-mongoc-command-monitoring.c | 35 +++++++++++++++++++++++++++++++++-
 1 file changed, 34 insertions(+), 1 deletion(-)

commit 840c4a5ac7accd5bbc180175f93a8d6d425cdc2c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 8 14:33:04 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f162bb7545700cb9b29b1d0c9a0d9579213e9b68
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 8 13:58:03 2016 -0700

    Revert "Make the Release Archive task a standalone thing"
    
    This reverts commit 351a07092db331495283fe149b6bf45d42781286.
    
    I have no idea why, but the Windows servers consistently
    fail with exit code 3 now when trying to execute test-libbson.exe,
    even though the file is there and seems to have been produced correctly

 .mci.yml | 70 ++++++++++++++++++++++++++++++++++++++++++++--------------------
 1 file changed, 48 insertions(+), 22 deletions(-)

commit 351a07092db331495283fe149b6bf45d42781286
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 8 10:29:03 2016 -0700

    Make the Release Archive task a standalone thing
    
    Don't make compile tasks depend on the Release Archive
    make them build from git again, and have the release
    archive be a standalone seperate variant.
    Same benefits, less latency

 .mci.yml | 70 ++++++++++++++++++++--------------------------------------------
 1 file changed, 22 insertions(+), 48 deletions(-)

commit e5155274f69e15be055043ae1aeae679649b0d7a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 8 10:28:48 2016 -0700

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 76f9e748760c4c4903ddca0e9972373a537539f2
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 5 14:55:33 2016 -0700

    Didn't make it into the 3.3.4 release :(

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d8a1fa7ad658a5491d1e5b00028e99e2115a0bce
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 5 14:48:31 2016 -0700

    Add mongoc_cursor_set_hint and realphabetaize

 src/libmongoc.symbols | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 2406431bca92b16209004a2a566bf5b9a8ca8d34
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 5 14:51:39 2016 -0700

    Fix make install refusing to overwrite previously installed file

 src/mongoc/Makefile.am | 1 -
 1 file changed, 1 deletion(-)

commit 653c3c15b2f517389659906248505a00e1279eb3
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 1 13:09:38 2016 -0700

    Fix unused variables warnings

 src/mongoc/mongoc-stream-tls-secure-transport.c | 2 --
 1 file changed, 2 deletions(-)

commit eafeeee0ac75692911dbc4a5384fd0e2849e7cd4
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 31 11:44:58 2016 -0700

    Fix the assert to.. assert, not assign

 tests/test-mongoc-gridfs-file-page.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dba2ce10b3a61c689f85c1f4534b8b952a838fd9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 4 16:48:45 2016 -0400

    CDRIVER-903 mongoc_cursor_hint sets slaveOk

 doc/mongoc_cursor_set_hint.page |  7 ++++++-
 src/mongoc/mongoc-cursor.c      | 11 ++++++++---
 src/mongoc/mongoc-cursor.h      |  2 +-
 tests/test-mongoc-cursor.c      |  8 ++++----
 4 files changed, 19 insertions(+), 9 deletions(-)

commit 2d0f9137acf2a2e684891e8bb5889c5d81858059
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 4 16:10:27 2016 -0400

    CDRIVER-1188 cannot set cursor hint twice

 src/mongoc/mongoc-cursor.c | 10 ++++++++++
 tests/test-mongoc-cursor.c | 32 ++++++++++++++++++++++++++++++++
 2 files changed, 42 insertions(+)

commit 9dbbf739476f2ac5adab1d89d9fffc2ad49646cf
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 1 10:40:21 2016 -0700

    CDRIVER-1107: Add VS2013 and VS2015 + NativeSSL builds

 .mci.yml | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)

commit 00dd9a4d27e69c2da5c2c8d686b7ce248c2fc279
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 31 17:23:12 2016 -0700

    CDRIVER-744: Native SCRAM-SHA-1 authentication on Windows
    
    Enable with cmake -DENABLE_SSL=WINDOWS.
    The default is still to build against OpenSSL, if available.

 build/autotools/CheckSSL.m4                   |   2 +
 src/mongoc/Makefile.am                        |  37 +++++---
 src/mongoc/mongoc-crypto-cng.c                | 117 +++++++++++++++++++++++++-
 src/mongoc/mongoc-rand-cng.c                  |  44 +++++-----
 src/mongoc/mongoc-secure-channel.c            |   2 +-
 src/mongoc/mongoc-stream-tls-secure-channel.c |  62 +++-----------
 tests/test-mongoc-stream-tls-error.c          |   2 +
 tests/test-mongoc-stream-tls.c                |   2 +
 tests/test-mongoc-topology-scanner.c          |   4 +-
 tests/test-x509.c                             |   2 +
 10 files changed, 187 insertions(+), 87 deletions(-)

commit e73c3c25d806e8fe3a042b79ec7bd8f0faa6521b
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 17:05:30 2016 -0700

    CDRIVER-744: Initial skeleton

 CMakeLists.txt                                     |  41 ++-
 build/autotools/CheckSSL.m4                        |   3 +
 src/mongoc/mongoc-config.h.in                      |  22 ++
 src/mongoc/mongoc-crypto-cng-private.h             |  52 ++++
 src/mongoc/mongoc-crypto-cng.c                     |  44 ++++
 src/mongoc/mongoc-crypto-cng.h                     |  51 ++++
 src/mongoc/mongoc-crypto.c                         |   5 +
 src/mongoc/mongoc-rand-cng.c                       |  70 +++++
 src/mongoc/mongoc-secure-channel-private.h         |  48 ++++
 src/mongoc/mongoc-secure-channel.c                 |  55 ++++
 src/mongoc/mongoc-ssl.c                            |   4 +
 .../mongoc-stream-tls-secure-channel-private.h     |  45 ++++
 src/mongoc/mongoc-stream-tls-secure-channel.c      | 283 +++++++++++++++++++++
 src/mongoc/mongoc-stream-tls-secure-channel.h      |  38 +++
 src/mongoc/mongoc-stream-tls.c                     |   5 +
 tests/test-mongoc-async.c                          |   6 +-
 16 files changed, 762 insertions(+), 10 deletions(-)

commit 9d0b137a933759f0817d629575fe1c6a065efa23
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 14:12:12 2016 -0700

    Add Windows ignored files

 .gitignore | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 3f078e42f6fedbcc4f6efe33df99bc7e348b9d0c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 4 17:08:25 2016 -0400

    CDRIVER-644 no file mongoc-error.c

 src/mongoc/Makefile.am | 1 -
 1 file changed, 1 deletion(-)

commit 5418a92dafdfbf8e57d75f0c7415de6b0714dc42
Merge: 1709fd5 6c46c19
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Apr 4 16:07:55 2016 -0400

    Merge pull request #319 from jmikola/cdriver-1188
    
    CDRIVER-1188: Implement mongoc_cursor_set_hint()

commit 1709fd591495a87c6238f75b619033e3890459d7
Merge: ad13ad1 5774ab0
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Apr 4 16:06:22 2016 -0400

    Merge pull request #318 from jmikola/cdriver-1189
    
    CDRIVER-1189: Document mongoc_cursor_get_hint

commit 5774ab0a083675c784e653216ed769d40078d8cf
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Apr 1 11:59:55 2016 -0400

    CDRIVER-1189: Document mongoc_cursor_get_hint

 doc/mongoc_cursor_get_hint.page | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)

commit ad13ad1769db03d5f019e9b050ef11b3a44d7901
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Apr 4 13:37:20 2016 -0400

    Rewrite comment to avoid -Wcomment warning
    
    Fixes a compiler warning for "/* within comment"

 src/mongoc/mongoc-secure-transport.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d45c768682634ab7779bbde9695fef925fa49383
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 22 22:50:10 2016 -0400

    CDRIVER-644 new error API

 CMakeLists.txt                            |   1 +
 build/autotools/versions.ldscript         |   2 +
 build/cmake/libmongoc-ssl.def             |   2 +
 build/cmake/libmongoc.def                 |   2 +
 doc/error-api.page                        | 148 +++++++++++++++++
 doc/mongoc_client_pool_set_error_api.page |  35 ++++
 doc/mongoc_client_set_error_api.page      |  36 +++++
 doc/mongoc_index.page                     |   5 +
 src/libmongoc.symbols                     |   2 +
 src/mongoc/Makefile.am                    |   1 +
 src/mongoc/mongoc-bulk-operation.c        |   5 +-
 src/mongoc/mongoc-client-pool.c           |  19 +++
 src/mongoc/mongoc-client-pool.h           |   2 +
 src/mongoc/mongoc-client-private.h        |   3 +
 src/mongoc/mongoc-client.c                |  37 ++++-
 src/mongoc/mongoc-client.h                |   2 +
 src/mongoc/mongoc-cluster.c               |   4 +-
 src/mongoc/mongoc-collection.c            |  24 ++-
 src/mongoc/mongoc-cursor.c                |   3 +
 src/mongoc/mongoc-error.h                 |   3 +
 src/mongoc/mongoc-rpc-private.h           |   2 +
 src/mongoc/mongoc-rpc.c                   |  23 ++-
 src/mongoc/mongoc-write-command-private.h |   2 +
 src/mongoc/mongoc-write-command.c         |  33 ++--
 tests/Makefile.am                         |   1 +
 tests/test-bulk.c                         | 256 ++++++++++++++++++++++++++----
 tests/test-libmongoc.c                    |   2 +
 tests/test-mongoc-error.c                 | 130 +++++++++++++++
 tests/test-write-commands.c               |   4 +-
 29 files changed, 725 insertions(+), 64 deletions(-)

commit 1594ce1fc01df49e574fa5190d5f122d46d7aded
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 30 22:22:48 2016 -0400

    whitespace

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6c46c1929a673a1b363b1e659a0d1496b29d4de6
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Apr 1 12:02:37 2016 -0400

    CDRIVER-1188: Implement mongoc_cursor_set_hint()

 build/autotools/versions.ldscript |   1 +
 build/cmake/libmongoc-ssl.def     |   1 +
 build/cmake/libmongoc.def         |   1 +
 doc/mongoc_cursor_set_hint.page   |  36 +++++++++++
 src/mongoc/mongoc-cursor.c        |   9 +++
 src/mongoc/mongoc-cursor.h        |   4 ++
 tests/test-mongoc-cursor.c        | 124 ++++++++++++++++++++++++++++++++++++++
 7 files changed, 176 insertions(+)

commit 8e936d89688eeb1572d7d684f90e9e0fdcd9ea01
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 31 10:30:49 2016 -0700

    Don't start configservers manually, MO handles it automatically

 orchestration_configs/sharded_clusters/auth.json  | 11 -----------
 orchestration_configs/sharded_clusters/basic.json | 11 -----------
 2 files changed, 22 deletions(-)

commit 4373b9149d5eeffa340e6f3edb2509485a342b67
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 31 11:24:21 2016 -0700

    The return value should be bool

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cfbe3e2dd49202c10d16f822de6b86ee278d2217
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 31 11:35:02 2016 -0700

    Run the test suite on -latest on Power8

 .mci.yml | 22 +++++++++++++++++++++-
 1 file changed, 21 insertions(+), 1 deletion(-)

commit 94532aec1e6529dc68ef4181e95226ae28767824
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 14:34:21 2016 -0700

    Compile and run the libbson tests on POWER8

 .mci.yml | 8 ++++++++
 1 file changed, 8 insertions(+)

commit b14a2fe503e727a33140c22ca6f73c0429ab63e3
Merge: 5f8342de 8fb252e
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Mar 30 11:37:09 2016 -0400

    Merge pull request #315 from jmikola/cdriver-1096
    
    CDRIVER-1096: Use const for mongoc_client_select_server() read prefs

commit 8fb252e54f6a9711095ef638f59f501c0cc5d7fc
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Mar 29 16:50:10 2016 -0400

    CDRIVER-1096: Use const for mongoc_client_select_server() read prefs

 doc/mongoc_client_select_server.page | 8 ++++----
 src/mongoc/mongoc-client.c           | 8 ++++----
 src/mongoc/mongoc-client.h           | 2 +-
 3 files changed, 9 insertions(+), 9 deletions(-)

commit 5f8342de7f40e85ac803edd85ecbf49715aada73
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 13:18:33 2016 -0700

    CDRIVER-996 & CDRIVER-1181: Run libbson tests & abicheck as part of compile step

 .mci.yml | 19 ++++++++++++++++---
 1 file changed, 16 insertions(+), 3 deletions(-)

commit 05e7a6ac17ae73ac534b3d101b181099e7506185
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 10:03:04 2016 -0700

    CDRIVER-1065: Test on RHEL
    
    - RHEL 6.2
    - RHEL 7.0

 .mci.yml | 30 +++++++++++++++++++++++++++++-
 1 file changed, 29 insertions(+), 1 deletion(-)

commit bf53e47544b6932a404e33e3cb7297107c6c6af1
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 29 10:01:20 2016 -0700

    CDRIVER-1180: Test build on zSeries
    
    Note that his is only a compile test.
    We can't run the test suite (yet) because the suite expects
    mongo-orchestration to be running on localhost, which mongod doesn't
    quite support yet

 .mci.yml | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 35d5af9696ea731a049c774cca8194b573ddd199
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 28 09:59:54 2016 -0700

    Bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aa403eb5aa85f9f68f02f5dddbacbf0dc54fbfee
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 28 15:02:15 2016 -0400

    Revert "add forward decl of mongoc_collection_t"
    
    This reverts commit 1c6c3780955b2bc101fa8ccca5b90d235ae1a63f.
    
    It caused clang warnings, "redefinition of typedef".

 src/mongoc/mongoc-database.h | 1 -
 1 file changed, 1 deletion(-)

commit 379eed2c7eb383bb9c4fbe6f3ab0e1ab26a0b88d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 26 09:39:08 2016 -0400

    CDRIVER-769 fix request_id for legacy writes

 src/mongoc/mongoc-write-command.c      |  30 ++++--
 tests/mock_server/mock-server.h        |   2 +
 tests/test-mongoc-command-monitoring.c | 184 ++++++++++++++++++++++++++++++---
 3 files changed, 192 insertions(+), 24 deletions(-)

commit df2fcb00bf151dd765c881bceba1f642f65e3fc8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 25 22:32:03 2016 -0400

    CDRIVER-769 test operation_id

 tests/test-mongoc-command-monitoring.c | 171 +++++++++++++++++++++++++++++++++
 1 file changed, 171 insertions(+)

commit 49915d48ddaa4ac6211cab3aaa120a5431c45dfb
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 28 09:59:54 2016 -0700

    Bump libbson with -Wdeclaration-after-statement fixes

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c8a078b1371f0e8e72b49a2cdb115220046308e9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 25 17:45:05 2016 -0400

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a7e41b2772f159993123cdd3d5f34de34446b950
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 25 17:27:37 2016 -0400

    CDRIVER-1077 prefix all man pages with "mongoc_"

 configure.ac                                       |   2 +-
 doc/.gitignore                                     |   2 +-
 doc/advanced-connections.page                      | 104 ---
 doc/aggregate.page                                 | 122 ---
 doc/application-performance-monitoring.page        |  47 --
 doc/authentication.page                            | 109 ---
 doc/basic-troubleshooting.page                     | 108 ---
 doc/bulk.page                                      | 122 ---
 doc/cursors.page                                   |  71 --
 doc/deleting-document.page                         |  80 --
 doc/executing-command.page                         |  65 --
 doc/finding-document.page                          | 121 ---
 doc/index.page                                     |  65 --
 doc/inserting-document.page                        |  71 --
 doc/installing.page.in                             | 209 -----
 doc/logging.page                                   |  93 ---
 doc/matcher.page                                   |  41 -
 doc/mongoc_advanced_connections.page               | 104 +++
 doc/mongoc_aggregate.page                          | 122 +++
 doc/mongoc_application_performance_monitoring.page |  47 ++
 doc/mongoc_authentication.page                     | 109 +++
 doc/mongoc_basic_troubleshooting.page              | 108 +++
 doc/mongoc_bulk.page                               | 122 +++
 doc/mongoc_cursors.page                            |  71 ++
 doc/mongoc_deleting_document.page                  |  80 ++
 doc/mongoc_executing_command.page                  |  65 ++
 doc/mongoc_finding_document.page                   | 121 +++
 doc/mongoc_index.page                              |  65 ++
 doc/mongoc_inserting_document.page                 |  71 ++
 doc/mongoc_installing.page.in                      | 209 +++++
 doc/mongoc_logging.page                            |  93 +++
 doc/mongoc_matcher.page                            |  41 +
 doc/mongoc_tutorial.page                           | 916 +++++++++++++++++++++
 doc/mongoc_updating_document.page                  |  92 +++
 doc/tutorial.page                                  | 916 ---------------------
 doc/updating-document.page                         |  92 ---
 36 files changed, 2438 insertions(+), 2438 deletions(-)

commit 89f82a7b4d768aeefb4d9a2eb93d13e69a297b2d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 25 14:17:04 2016 -0700

    CDRIVER-1178: Reduce Warnings on Windows
    
    182 warnings -> 98 warnings

 CMakeLists.txt                     | 5 +++++
 src/mongoc/mongoc-thread-private.h | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit fb5a21bf3d398711ddd7f56070343e78609d1d64
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 25 13:16:01 2016 -0400

    "could not find BSON" err message for CMake

 build/cmake/FindBSON.cmake | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e8064fac62c71d79fd343eef8e779e58eb24c506
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 25 13:21:53 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ccd391f7aefe9a5abb81be44a1db0d6e7d57b261
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 25 13:21:19 2016 -0700

    Fix skipif -- should run on 3.3.4 or later

 tests/test-mongoc-collection.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 4778ce98181816d1d9c2d13bcbb4278a91f0394e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 25 08:32:52 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b2eb96dc1e73b303a84a7d3fd648e9697fe0e77b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 21 21:29:39 2016 -0400

    CDRIVER-1161 update CMakeLists for Secure Transport
    
    Allows CMake users to choose Apple's Secure Transport or OpenSSL as
    their TLS and crypto implementation, the same as Autotools users.

 CMakeLists.txt | 118 ++++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 87 insertions(+), 31 deletions(-)

commit 9711fc6923d64a4dd12ec07712c094315852a6f2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 24 16:30:48 2016 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 92bb8b30c68fcc536de35d77525984755a48d87e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 24 16:16:39 2016 -0700

    Quick Werror build fix

 tests/test-conveniences.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 38e237754bf966f28d0362f260a8419ba53fc5ac
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 24 14:29:55 2016 -0700

    CDRIVER-1145: Bump libbson for Decimal128 support

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 66956c25825186b45b57ef057ecf45c8359423c1
Author: David Hatch <david.hatch@mongodb.com>
Date:   Mon Jun 22 14:05:05 2015 -0400

    Add dec128 test.

 tests/test-mongoc-collection.c | 77 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 77 insertions(+)

commit 31bd7e5fbc417aa36646d9b6e53c211281bbb9c4
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 24 11:51:39 2016 -0700

    CDRIVER-1175: Static compilation fails

 examples/find_and_modify_with_opts/fam.c | 2 ++
 1 file changed, 2 insertions(+)

commit 8e0a6f53e3443259264ef5034ad40139afaace10
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 16 17:47:06 2016 -0700

    CDRIVER-1157: Verify certificates during handshake
    
    This simplifies the OpenSSL code a lot, while this was already
    the case in Secure Transport
    
    Note that the previous functions have been deprecated and
    always return false now.
    We cannot remove them due to ABI, but there is no chance
    a user of the driver would have been calling them intentionally
    since he would have to get a hold of the stream between
    us creating it, and before we even run ismaster on it.

 src/mongoc/mongoc-async-cmd.c                   |  32 +++-----
 src/mongoc/mongoc-client.c                      |  14 +---
 src/mongoc/mongoc-cluster.c                     |  12 +--
 src/mongoc/mongoc-openssl.c                     |   2 +-
 src/mongoc/mongoc-secure-transport.c            |   3 +-
 src/mongoc/mongoc-stream-tls-openssl.c          |  99 ++++++----------------
 src/mongoc/mongoc-stream-tls-private.h          |   8 +-
 src/mongoc/mongoc-stream-tls-secure-transport.c |  68 +++++++---------
 src/mongoc/mongoc-stream-tls.c                  | 104 +++++++++++++++---------
 src/mongoc/mongoc-stream-tls.h                  |  15 +++-
 tests/mock_server/mock-server.c                 |  10 ++-
 tests/ssl-test.c                                |  12 +--
 tests/test-mongoc-async.c                       |   1 +
 tests/test-mongoc-client.c                      |   5 +-
 tests/test-mongoc-stream-tls-error.c            |   8 +-
 15 files changed, 175 insertions(+), 218 deletions(-)

commit 072ee2270a15df5c014f098fd3baae620a132645
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 16 17:21:23 2016 -0700

    Add newline after each log message

 tests/test-libmongoc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b4279a9d87c8d53371dbe51920460380b93bc5e8
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 22 09:39:33 2016 -0700

    CDRIVER-1168: Skip slow tests when MONGOC_TEST_SKIP_SLOW is set

 tests/test-bulk.c                      | 24 +++++++++++------------
 tests/test-libmongoc.c                 |  7 +++++++
 tests/test-libmongoc.h                 |  1 +
 tests/test-mongoc-client.c             |  4 ++--
 tests/test-mongoc-cluster.c            | 16 +++++++--------
 tests/test-mongoc-collection-find.c    |  6 +++---
 tests/test-mongoc-collection.c         |  8 ++++----
 tests/test-mongoc-gridfs.c             |  8 ++++----
 tests/test-mongoc-socket.c             |  4 ++--
 tests/test-mongoc-topology-reconcile.c | 12 ++++++------
 tests/test-mongoc-topology.c           | 36 +++++++++++++++++-----------------
 11 files changed, 67 insertions(+), 59 deletions(-)

commit 4f36552162737bd44a343670a474e5f2e764a0f8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 16 21:48:47 2016 -0400

    more findAndModify option setters
    
    CDRIVER-1047 and CDRIVER-1048. Also improve layout of doc generated from
    fam.c example.

 NEWS                                               |  5 +++
 build/autotools/versions.ldscript                  |  2 +
 build/cmake/libmongoc-ssl.def                      |  2 +
 build/cmake/libmongoc.def                          |  2 +
 doc/mongoc_collection_find_and_modify.page         |  1 +
 doc/mongoc_find_and_modify_opts_append.page        | 42 ++++++++++++++++++
 ...ongoc_find_and_modify_opts_set_max_time_ms.page | 42 ++++++++++++++++++
 doc/mongoc_find_and_modify_opts_t.page             |  1 +
 examples/Makefile.am                               |  1 +
 examples/find_and_modify_with_opts/bypass.c        |  1 +
 examples/find_and_modify_with_opts/fam.c           | 11 ++++-
 examples/find_and_modify_with_opts/fields.c        |  1 +
 examples/find_and_modify_with_opts/flags.c         |  1 +
 examples/find_and_modify_with_opts/opts.c          | 51 ++++++++++++++++++++++
 examples/find_and_modify_with_opts/sort.c          |  1 +
 examples/find_and_modify_with_opts/update.c        |  1 +
 src/libmongoc.symbols                              |  2 +
 src/mongoc/mongoc-collection.c                     | 15 ++++++-
 src/mongoc/mongoc-find-and-modify-private.h        |  2 +
 src/mongoc/mongoc-find-and-modify.c                | 22 ++++++++++
 src/mongoc/mongoc-find-and-modify.h                |  8 +++-
 tests/test-mongoc-find-and-modify.c                | 36 +++++++++++++++
 22 files changed, 246 insertions(+), 4 deletions(-)

commit 26494954a150e3b35870f68a71e3101e8dccda17
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 22 16:26:02 2016 -0400

    CDRIVER-769 update APM callback tests

 tests/test-mongoc-command-monitoring.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 82947b8ed21991591d2c92c2e6dc00ccbcbe106f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 22 16:23:37 2016 -0400

    leaks in tests, 2

 tests/mock_server/mock-rs.c  | 2 ++
 tests/test-mongoc-database.c | 1 +
 2 files changed, 3 insertions(+)

commit 820b5f9603f5db83f6e23ba03d5d203cbcfd202e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 22 16:23:26 2016 -0400

    skip more timing tests with valgrind

 tests/test-mongoc-topology.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit e0eed4a2d1d72d99213db049488703b79a379e94
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 16 03:36:10 2016 -0400

    CDRIVER-769 callbacks can be set only once

 doc/mongoc_client_pool_set_apm_callbacks.page |   8 +-
 doc/mongoc_client_set_apm_callbacks.page      |   9 ++-
 src/mongoc/mongoc-client-pool.c               |  18 ++++-
 src/mongoc/mongoc-client-pool.h               |   2 +-
 src/mongoc/mongoc-client-private.h            |   5 ++
 src/mongoc/mongoc-client.c                    |  35 +++++++--
 src/mongoc/mongoc-client.h                    |   2 +-
 tests/test-mongoc-command-monitoring.c        | 104 ++++++++++++++++++++++++--
 8 files changed, 163 insertions(+), 20 deletions(-)

commit c70c654d966c5db373d28ad476709694caec28c8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 21 21:46:00 2016 -0400

    compiler warning in _bson_to_error

 src/mongoc/mongoc-client.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5cf6b828dc74ab5395ebb15be4d2e160a3b89dcb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 21 21:45:35 2016 -0400

    spelling in err messages

 src/mongoc/mongoc-client.c  | 2 +-
 src/mongoc/mongoc-cluster.c | 2 +-
 src/mongoc/mongoc-sasl.c    | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 60617779039ac323012c9e767abf864f553c63b3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 21 10:59:19 2016 -0700

    CDRIVER-1165: _mongoc_init_dtor() should restore its memory vtable before cleanup

 src/mongoc/mongoc-init.c | 1 +
 1 file changed, 1 insertion(+)

commit 4c7633683b95c212637bb32d431becc358bcf036
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 21 10:58:32 2016 -0700

    CDRIVER-1160: configure flag for MONGOC_NO_AUTOMATIC_GLOBALS

 CMakeLists.txt                              |  7 +++++++
 build/autotools/AutomaticInitAndCleanup.m4  |  6 ++++++
 build/autotools/PrintBuildConfiguration.m4  |  1 +
 build/autotools/ReadCommandLineArguments.m4 |  6 ++++++
 configure.ac                                |  1 +
 src/mongoc/mongoc-config.h.in               | 11 +++++++++++
 6 files changed, 32 insertions(+)

commit 1c6c3780955b2bc101fa8ccca5b90d235ae1a63f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 18 20:45:22 2016 -0400

    add forward decl of mongoc_collection_t
    
    Needed for a D-lang driver project's static header parser.

 src/mongoc/mongoc-database.h | 1 +
 1 file changed, 1 insertion(+)

commit f0c92e039bc7ad08367a545b9f3fa510e8862e1a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 16:41:00 2016 -0400

    CDRIVER-769 legacy write err isn't failure

 src/mongoc/mongoc-write-command.c      | 66 +++-------------------------------
 tests/test-mongoc-command-monitoring.c |  3 +-
 2 files changed, 6 insertions(+), 63 deletions(-)

commit b06a51720c4d5dbeafaffefe37236aee71be22af
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 16 08:34:19 2016 -0400

    CDRIVER-769 reenable APM example
    
    reverts d0f37f3bba2188c4c1abe5972fc996810624ec4e

 examples/Makefile.am | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit d1bc88de6b40bbfba26f0d0ab891d4df425e7586
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 20:49:28 2016 -0400

    git-ignore APM example program

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit e7206969625b4e89b2de1690361471e9a85994a9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 17:40:06 2016 -0400

    CDRIVER-769 new symbols for command monitoring

 build/autotools/versions.ldscript | 33 ++++++++++++++++++++++++++++++++-
 build/cmake/libmongoc-ssl.def     | 31 +++++++++++++++++++++++++++++++
 build/cmake/libmongoc.def         | 31 +++++++++++++++++++++++++++++++
 src/libmongoc.symbols             | 31 +++++++++++++++++++++++++++++++
 4 files changed, 125 insertions(+), 1 deletion(-)

commit a1ccc4cbca07d083a6721cd4da50d477db7c3fa1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 16 08:30:26 2016 -0400

    don't untar -v on evergreen
    
    Reduce distracting logging.

 .mci.yml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit ae0fafd10b65d9c9aaff79d455ebff0e3b31453a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 16 03:37:36 2016 -0400

    log verbose test output to stdout, not stderr

 tests/test-mongoc-command-monitoring.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0c56291de85272d2f7a943a2e18e608e29623372
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 17:08:59 2016 -0400

    CDRIVER-769 test apm_command_failed_get_error

 tests/test-mongoc-command-monitoring.c | 50 ++++++++++++++++++++++++++++++++++
 1 file changed, 50 insertions(+)

commit 4032753b3c0d3021fc1c02e68e688889e5c334dd
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 16 15:59:04 2016 -0700

    A handshake without a cert verification is dangerous
    
    This fixes the tests on Darwin TLS

 tests/ssl-test.c                     | 33 +++++----------------------------
 tests/ssl-test.h                     |  1 -
 tests/test-mongoc-stream-tls-error.c |  4 ++--
 tests/test-mongoc-stream-tls.c       | 10 +++++++++-
 4 files changed, 16 insertions(+), 32 deletions(-)

commit f2fe1e4391ba469b8954872f1d8638485c287404
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 16 15:58:05 2016 -0700

    Only run on OpenSSL, these tests rely on korky OpenSSL behaviour

 tests/test-mongoc-client.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit a3a6174b969cf8dd85e716c1bb24a377114043c4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 16 15:56:59 2016 -0700

    Fix encoding issues resulting in encoding errors and NULL being returned

 src/mongoc/mongoc-secure-transport.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1657e55ffa9832557cdfba888756ff34c5d6bcb4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 16 12:30:48 2016 -0700

    CDRIVER-1162: Add missing BSON-BEGIN_DECLS

 src/mongoc/mongoc-stream-tls-private.h | 2 ++
 1 file changed, 2 insertions(+)

commit c8ee769c517d1b39da34fa35b1f15e0b51b893d2
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 15 14:38:14 2016 -0700

    A ticket for this is enough

 CMakeLists.txt | 1 -
 1 file changed, 1 deletion(-)

commit e250c0360af28b3f3d0fc54013ab7d9057be54ae
Merge: 03dec07 3d8cf86
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 15 14:28:15 2016 -0700

    Merge branch 'CDRIVER-520'
    
    * CDRIVER-520:
      CDRIVER-520: Simplify a little
      CDRIVER-520: Resolve ENABLE_OPENSSL to work on Darwin too
      CDRIVER-520: We are supposed to resume the handshake having done our "verification"
      CDRIVER-520: Simplify trust evaluation, remove copies, issue warnings on unsupported items
      CDRIVER-520: Don't verify hostname for UDS
      CDRIVER-520: Make --enable-ssl autodetect OpenSSL/darwin
      CDRIVER-520: Add support for native TLS on OSX (Secure Transport)
      Don't run auth tests when we don't have crypto lib
      Don't fork on OSX
      Improve error on failure

commit 03dec07650c0ffac5dcd4f6ca5a179a7f8edc953
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 15 14:21:25 2016 -0700

    Update test for log capturing changes

 tests/test-mongoc-client.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit d0f37f3bba2188c4c1abe5972fc996810624ec4e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 15 14:20:34 2016 -0700

    CDRIVER-769: Temporarly disable the example

 examples/Makefile.am | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 62247e71564b4f06c4bc0fc4932a98dfe8317a49
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 14:04:58 2016 -0700

    CDRIVER-1154: Add test

 tests/mock_server/mock-server.c |  31 ++++++++--
 tests/test-mongoc-client.c      | 131 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 156 insertions(+), 6 deletions(-)

commit b7ae105d37c36d575bf1cd7d88de041c6f6e9ce0
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 11 21:11:17 2016 -0800

    CDRIVER-1154: Missing certificate & hostname verification on reconnect

 src/mongoc/mongoc-async-cmd.c |  2 +-
 src/mongoc/mongoc-client.c    | 13 ++++++++++---
 src/mongoc/mongoc-cluster.c   | 27 +++++++++++++++++++++++++++
 3 files changed, 38 insertions(+), 4 deletions(-)

commit a3a6f5418af66045095c84569b17598d4b093911
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 11 16:27:28 2016 -0800

    CDRIVER-1154: Let OpenSSL verify the peer during handshake

 src/mongoc/mongoc-stream-tls-openssl.c | 6 ++++++
 tests/test-mongoc-stream-tls.c         | 4 ++--
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 198c59846a55dff3d4b5df8b22dd1ef9ad0d40d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 11 16:26:44 2016 -0800

    CDRIVER-1156: Remove bad TODO, and misinformed session caching disabling

 src/mongoc/mongoc-openssl.c | 6 ------
 1 file changed, 6 deletions(-)

commit 3d8cf8617b87ddb9b47fd1461fb6baeba6e1fbf9
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 4 11:00:34 2016 -0800

    CDRIVER-520: Simplify a little

 .mci.yml                                        |  2 +-
 CMakeLists.txt                                  |  3 +-
 build/autotools/CheckSSL.m4                     | 10 +++++--
 src/mongoc/Makefile.am                          |  3 +-
 src/mongoc/mongoc-cluster.c                     |  1 +
 src/mongoc/mongoc-crypto-private.h              | 12 --------
 src/mongoc/mongoc-crypto.c                      | 26 ++++++-----------
 src/mongoc/mongoc-secure-transport-private.h    |  4 ---
 src/mongoc/mongoc-secure-transport.c            |  5 +++-
 src/mongoc/mongoc-ssl-private.h                 | 37 +++++++++++++++++++++++++
 src/mongoc/mongoc-ssl.c                         |  7 ++---
 src/mongoc/mongoc-ssl.h                         |  1 -
 src/mongoc/mongoc-stream-tls-openssl.c          |  3 ++
 src/mongoc/mongoc-stream-tls-private.h          | 15 ----------
 src/mongoc/mongoc-stream-tls-secure-transport.c |  9 ++++--
 src/mongoc/mongoc-stream-tls.c                  | 25 +++++------------
 src/mongoc/mongoc-topology-scanner.c            |  2 +-
 tests/test-libmongoc.h                          |  2 +-
 tests/test-x509.c                               |  1 +
 19 files changed, 85 insertions(+), 83 deletions(-)

commit 4cd623c4318107a2c0ccb122e393fc990e32d48e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 15 13:55:22 2016 -0700

    CDRIVER-520: Resolve ENABLE_OPENSSL to work on Darwin too

 src/mongoc/Makefile.am                          | 26 +++++++++++++------------
 src/mongoc/mongoc-init.c                        |  3 +++
 src/mongoc/mongoc-stream-tls-private.h          |  8 ++++----
 src/mongoc/mongoc-stream-tls-secure-transport.c |  1 +
 src/mongoc/mongoc-stream-tls.c                  |  2 +-
 tests/test-libmongoc.c                          |  4 ----
 tests/test-mongoc-async.c                       | 12 +++++++-----
 tests/test-mongoc-client.c                      |  8 +++-----
 tests/test-mongoc-stream-tls-error.c            |  6 ++++--
 tests/test-mongoc-topology-scanner.c            | 12 +++++++-----
 10 files changed, 44 insertions(+), 38 deletions(-)

commit 9bc504358d209cd5e76330d60b0752c8ccd813d6
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 3 13:43:44 2016 -0800

    CDRIVER-520: We are supposed to resume the handshake having done our "verification"

 src/mongoc/mongoc-stream-tls-secure-transport.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit f4aee802136655ec651d1678bff88f22a16c45ed
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Mar 3 12:33:04 2016 -0800

    CDRIVER-520: Simplify trust evaluation, remove copies, issue warnings on unsupported items

 src/mongoc/mongoc-secure-transport.c            | 124 ++----------------------
 src/mongoc/mongoc-stream-tls-secure-transport.c |  39 +++-----
 2 files changed, 24 insertions(+), 139 deletions(-)

commit cdf379bb9d4a3a9a842860fe9d8360ba6742d7b4
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 29 22:44:50 2016 -0800

    CDRIVER-520: Don't verify hostname for UDS

 src/mongoc/mongoc-stream-tls-secure-transport.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit bef08f4561afd926b77192299ce3ff514687631b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 29 19:53:08 2016 -0800

    CDRIVER-520: Make --enable-ssl autodetect OpenSSL/darwin
    
    Currently the default is OpenSSL for BC
    
    To explicitly use NativeTLS on OSX, do --enable-ssl=darwin

 build/autotools/CheckOpenSSL.m4            |  50 -------------
 build/autotools/CheckSSL.m4                | 108 +++++++++++++++++++++--------
 build/autotools/CheckSecureTransport.m4    |  30 --------
 build/autotools/PrintBuildConfiguration.m4 |   2 -
 configure.ac                               |   2 -
 5 files changed, 81 insertions(+), 111 deletions(-)

commit b6846cb26d9f80390a5761d2acc3d406238b8bcd
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 17 13:36:47 2016 -0800

    CDRIVER-520: Add support for native TLS on OSX (Secure Transport)
    
    This implementation uses the OpenSSL traditional PEM file, and
    implements all the currently supported mongoc_ssl_opt_t options.
    The certificates are never imported or loaded into the the keychain.
    They are simply read on-demand and transformed into Secure Transport
    supported format using SecItemImport.
    
    Note that the configured certificates are expected to be available
    and valid during the lifetime of the session. This is consistent
    with the OpenSSL implementation and expectations.
    
    - Certificate Authority checks:
      If mongoc_ssl_opt_t.ca_file is provided the server certificate
      MUST be issued by that Certificate Authority.  When no .ca_file
      is provided, we'll verify the server certificate against the
      default (and additionally currently open) keychains.  This makes
      it unnecessary to provide the .ca_file for commercially bought
      certificates, while at the same time - if you do want to
      guarantee that the certificate is only issued by that specific
      CA you can do so.
    
    - Providing client certificates:
      mongoc_ssl_opt_t.pem_file can be configured to point at a client
      PEM file, containing both the private key and public key
      certificates.  Optionally, mongoc_ssl_opt_t.pem_pwd can be
      configured with the passphrase if the private key is passphrase
      protected.
    
    - X.509 Authentication username extraction:
      As with the OpenSSL implementation, the RFC2253 formatted
      certificate subject name is extracted from the certificate.
      This makes providing the username for X.509 authentication
      optional.

 .mci.yml                                           |   8 +-
 src/mongoc/mongoc-client.c                         |   4 +-
 src/mongoc/mongoc-cluster.c                        |  31 +-
 src/mongoc/mongoc-init.c                           |   4 +-
 src/mongoc/mongoc-openssl-private.h                |   3 +-
 src/mongoc/mongoc-openssl.c                        |   2 +-
 src/mongoc/mongoc-secure-transport-private.h       |  26 +-
 src/mongoc/mongoc-secure-transport.c               | 488 ++++++++++++++++++---
 src/mongoc/mongoc-ssl.c                            |   6 +-
 src/mongoc/mongoc-ssl.h                            |   2 +-
 src/mongoc/mongoc-stream-tls-openssl.c             |  19 -
 src/mongoc/mongoc-stream-tls-private.h             |   1 -
 .../mongoc-stream-tls-secure-transport-private.h   |   5 +
 src/mongoc/mongoc-stream-tls-secure-transport.c    | 371 +++++++++++++---
 src/mongoc/mongoc-stream-tls.c                     |  37 +-
 src/mongoc/mongoc-stream-tls.h                     |   1 -
 src/mongoc/mongoc-topology-scanner.c               |   2 +-
 src/mongoc/mongoc.h                                |   2 +-
 tests/mock_server/mock-server.c                    |   7 +-
 tests/mock_server/mock-server.h                    |   6 +-
 tests/ssl-test.c                                   |   6 +-
 tests/test-libmongoc.c                             |  20 +-
 tests/test-libmongoc.h                             |   4 +-
 tests/test-mongoc-cluster.c                        |   1 +
 tests/test-mongoc-collection-find.c                |   4 +
 tests/test-mongoc-server-selection-errors.c        |   4 +
 tests/test-mongoc-stream-tls-error.c               |   6 +-
 tests/test-mongoc-stream-tls.c                     |  30 +-
 tests/test-mongoc-topology.c                       |   2 +
 tests/test-x509.c                                  |  45 +-
 30 files changed, 929 insertions(+), 218 deletions(-)

commit 850fbcaf06c016e0c183f5263e5913c4ec9f9409
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 1 11:16:33 2016 -0800

    Don't run auth tests when we don't have crypto lib

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6194418baf5ea48332de74261ace4bf91d10e264
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 18 20:39:33 2016 -0800

    Don't fork on OSX

 .mci.yml          | 12 +++++++++---
 tests/Makefile.am |  2 +-
 2 files changed, 10 insertions(+), 4 deletions(-)

commit db87aca7c305f941abebeeaa47e34ed4a48f70c8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 17 13:33:54 2016 -0800

    Improve error on failure

 tests/TestSuite.h          | 12 ++++++++++++
 tests/test-mongoc-gridfs.c |  3 +++
 2 files changed, 15 insertions(+)

commit d538a9c6fcd44b4fdf8e112b9223362a32e6e168
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 14 14:51:14 2016 -0400

    capture logs during tests

 src/mongoc/mongoc-log.c             |   2 +-
 tests/TestSuite.c                   |   2 +
 tests/TestSuite.h                   |  22 +++++++
 tests/test-bulk.c                   |   5 +-
 tests/test-libmongoc.c              | 127 ++++++++++++++++++++++++++++++++++--
 tests/test-libmongoc.h              |   7 +-
 tests/test-mongoc-client-pool.c     |   2 +-
 tests/test-mongoc-client.c          |  15 ++---
 tests/test-mongoc-cluster.c         |   8 +--
 tests/test-mongoc-collection-find.c |   5 +-
 tests/test-mongoc-cursor.c          |   3 +-
 tests/test-mongoc-database.c        |   4 +-
 tests/test-mongoc-exhaust.c         |   3 +-
 tests/test-mongoc-topology.c        |   2 +-
 tests/test-mongoc-uri.c             |  69 ++++++++++++--------
 15 files changed, 218 insertions(+), 58 deletions(-)

commit cb92538397456762e13efa4e56c76cd5cd8f3f30
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 13:51:50 2016 -0400

    fix breadcrumbs in docs

 doc/advanced-connections.page   |  2 +-
 doc/authentication.page         |  2 +-
 doc/bulk.page                   |  1 +
 doc/index.page                  | 31 +++++++++++++++++++++----------
 doc/installing.page.in          |  1 +
 doc/matcher.page                |  2 +-
 doc/mongoc_apm_callbacks_t.page |  4 +---
 doc/tutorial.page               |  1 -
 8 files changed, 27 insertions(+), 17 deletions(-)

commit 0c0a1662ca32815c59edb4d31f50c248c04ae7fe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Mar 15 12:26:33 2016 -0400

    properly bold a word in find_and_modify doc

 doc/mongoc_collection_find_and_modify.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4e64efdaa72745056425766d7aee88f46b91f9b7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 15:04:22 2016 -0400

    CDRIVER-769 application performance monitoring docs

 CMakeLists.txt                                     |   3 +
 doc/application-performance-monitoring.page        |  47 +++++++++
 doc/index.page                                     |   4 +
 doc/mongoc_apm_callbacks_destroy.page              |  23 ++++
 doc/mongoc_apm_callbacks_new.page                  |  28 +++++
 doc/mongoc_apm_callbacks_t.page                    |  25 +++++
 ...mongoc_apm_command_failed_get_command_name.page |  37 +++++++
 doc/mongoc_apm_command_failed_get_context.page     |  36 +++++++
 doc/mongoc_apm_command_failed_get_duration.page    |  36 +++++++
 doc/mongoc_apm_command_failed_get_error.page       |  33 ++++++
 doc/mongoc_apm_command_failed_get_hint.page        |  36 +++++++
 doc/mongoc_apm_command_failed_get_host.page        |  37 +++++++
 ...mongoc_apm_command_failed_get_operation_id.page |  36 +++++++
 doc/mongoc_apm_command_failed_get_request_id.page  |  36 +++++++
 doc/mongoc_apm_command_failed_t.page               |  22 ++++
 doc/mongoc_apm_command_started_get_command.page    |  37 +++++++
 ...ongoc_apm_command_started_get_command_name.page |  37 +++++++
 doc/mongoc_apm_command_started_get_context.page    |  36 +++++++
 ...ngoc_apm_command_started_get_database_name.page |  37 +++++++
 doc/mongoc_apm_command_started_get_hint.page       |  36 +++++++
 doc/mongoc_apm_command_started_get_host.page       |  37 +++++++
 ...ongoc_apm_command_started_get_operation_id.page |  36 +++++++
 doc/mongoc_apm_command_started_get_request_id.page |  36 +++++++
 doc/mongoc_apm_command_started_t.page              |  22 ++++
 ...goc_apm_command_succeeded_get_command_name.page |  37 +++++++
 doc/mongoc_apm_command_succeeded_get_context.page  |  36 +++++++
 doc/mongoc_apm_command_succeeded_get_duration.page |  36 +++++++
 doc/mongoc_apm_command_succeeded_get_hint.page     |  36 +++++++
 doc/mongoc_apm_command_succeeded_get_host.page     |  37 +++++++
 ...goc_apm_command_succeeded_get_operation_id.page |  36 +++++++
 doc/mongoc_apm_command_succeeded_get_reply.page    |  37 +++++++
 ...ongoc_apm_command_succeeded_get_request_id.page |  36 +++++++
 doc/mongoc_apm_command_succeeded_t.page            |  22 ++++
 doc/mongoc_apm_set_command_failed_cb.page          |  35 ++++++
 doc/mongoc_apm_set_command_started_cb.page         |  35 ++++++
 doc/mongoc_apm_set_command_succeeded_cb.page       |  35 ++++++
 doc/mongoc_client_pool_set_apm_callbacks.page      |  33 ++++++
 doc/mongoc_client_set_apm_callbacks.page           |  32 ++++++
 examples/Makefile.am                               |   5 +
 .../example-application-performance-monitoring.c   | 117 +++++++++++++++++++++
 40 files changed, 1358 insertions(+)

commit d29ca371fc30d64395a0c7be5fcb69f7becc4f7d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Mar 12 08:19:46 2016 -0500

    CDRIVER-769 use cluster.request_id instead of extra param

 src/mongoc/mongoc-client.c        | 19 ++++++-------------
 src/mongoc/mongoc-cursor.c        | 24 ++++++------------------
 src/mongoc/mongoc-write-command.c | 30 +++++++++---------------------
 3 files changed, 21 insertions(+), 52 deletions(-)

commit 28bfda2555ee208d7c2363d6c330d456267523a9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 10 15:44:59 2016 -0500

    CDRIVER-769 command-failed events

 src/mongoc/mongoc-apm-private.h            |  2 +-
 src/mongoc/mongoc-apm.c                    |  4 +-
 src/mongoc/mongoc-client.c                 | 67 ++++++++++++++++++---
 src/mongoc/mongoc-cluster.c                | 25 ++++++--
 src/mongoc/mongoc-cursor.c                 | 83 ++++++++++++++++++++------
 src/mongoc/mongoc-write-command.c          | 95 ++++++++++++++++++++++++++----
 tests/json/command_monitoring/command.json |  5 ++
 tests/json/command_monitoring/find.json    |  5 ++
 tests/test-mongoc-command-monitoring.c     | 47 +++++++++++++++
 9 files changed, 286 insertions(+), 47 deletions(-)

commit e4f4f89bd275e43d81c66c730254fbe0ec13829e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Mar 10 16:46:40 2016 -0500

    CDRIVER-1153 wrong batchSize with getMore cmd

 src/mongoc/mongoc-cursor-cursorid.c     | 2 +-
 src/mongoc/mongoc-cursor-private.h      | 1 +
 src/mongoc/mongoc-cursor.c              | 2 +-
 tests/json/command_monitoring/find.json | 4 ++--
 4 files changed, 5 insertions(+), 4 deletions(-)

commit e79e2b9f13251ee74a4db60e97e03ac2d4711cae
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Mar 14 01:56:52 2016 -0400

    unused automake definition DOC_EXAMPLES

 examples/Makefile.am | 2 --
 1 file changed, 2 deletions(-)

commit 2931d44ca8bcd5b03dd5c5abb5ea4278e8711dc2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 20:38:46 2016 -0400

    don't include mongoc-tests.h for typical tests

 tests/TestSuite.h                    | 24 +++++++++++++++++
 tests/mongoc-tests.h                 | 52 ------------------------------------
 tests/test-bulk.c                    |  1 -
 tests/test-libmongoc.c               |  1 -
 tests/test-mongoc-async.c            |  1 -
 tests/test-mongoc-client.c           |  1 -
 tests/test-mongoc-cluster.c          |  1 -
 tests/test-mongoc-collection.c       |  1 -
 tests/test-mongoc-database.c         |  1 -
 tests/test-mongoc-exhaust.c          |  1 -
 tests/test-mongoc-find-and-modify.c  |  1 -
 tests/test-mongoc-gridfs.c           |  1 -
 tests/test-mongoc-matcher.c          |  1 -
 tests/test-mongoc-socket.c           |  1 -
 tests/test-mongoc-stream.c           |  1 -
 tests/test-mongoc-topology-scanner.c |  1 -
 tests/test-mongoc-topology.c         |  1 -
 tests/test-mongoc-write-concern.c    |  1 -
 tests/test-write-commands.c          |  1 -
 19 files changed, 24 insertions(+), 69 deletions(-)

commit ecde1293bae621d6f0c0dfd98d416b1a5255568f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 19:25:46 2016 -0400

    whitespace

 tests/test-bulk.c | 1 -
 1 file changed, 1 deletion(-)

commit 734ec022731e1c1f6c19e8065c84d668f2a66319
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 19:23:38 2016 -0400

    git's not needed to build from tarball

 doc/installing.page.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f0056c629f0771d27bb752d9b70f93392389815
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 19:17:56 2016 -0400

    unused fn mongoc_cluster_node_min_wire_version

 src/mongoc/mongoc-cluster-private.h |  4 ----
 src/mongoc/mongoc-cluster.c         | 35 -----------------------------------
 2 files changed, 39 deletions(-)

commit 7f7d879ab4b74c85ec181f60cb29c2d52c0c299d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 19:15:06 2016 -0400

    update Visual Studio compatibility

 doc/installing.page.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f26a96c74c01219c9a2afbeb56ca65fd444927c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 13 19:10:44 2016 -0400

    remove old TODO

 src/mongoc/mongoc-server-description.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit e464c18ef7ea49db73753e66f3b6e994c806599b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 11 21:14:29 2016 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b4b63814dc948d5146f52da839e80ddcc7c7416b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 11 15:20:10 2016 -0800

    CDRIVER-1142: Use distro trusted CAs as defaults if no CA explicitly provided

 src/mongoc/mongoc-openssl.c | 31 ++++++++++++++++++++++---------
 1 file changed, 22 insertions(+), 9 deletions(-)

commit 20340b9c4a57cdbe89aacc0a94e80a36bf7a4654
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Mar 11 11:51:13 2016 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 src/libbson     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0d811db37241a2d7535b72e114f05d0269937583
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 6 05:06:39 2016 -0500

    CDRIVER-1139 require auth for a topology test

 tests/test-libmongoc.c       | 17 +++++++++++++++++
 tests/test-libmongoc.h       |  1 +
 tests/test-mongoc-client.c   | 29 +++++++++--------------------
 tests/test-mongoc-topology.c |  6 ++++--
 4 files changed, 31 insertions(+), 22 deletions(-)

commit f41dcc5ae133d6f0a55583c927892ea0e5384298
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 6 05:06:04 2016 -0500

    test code layout

 tests/test-mongoc-topology.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e103eb3274763aea11bc689b328d120798b63dfe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 2 10:00:59 2016 -0500

    CDRIVER-1139 net err invalidates server description

 src/mongoc/mongoc-client.c                       |  4 ++--
 src/mongoc/mongoc-cluster.c                      | 28 ++++++++++++++++++------
 src/mongoc/mongoc-topology-description-private.h |  3 ++-
 src/mongoc/mongoc-topology-description.c         | 21 +++++++++++++-----
 src/mongoc/mongoc-topology-private.h             |  5 +++--
 src/mongoc/mongoc-topology.c                     |  8 ++++---
 tests/test-mongoc-client.c                       |  2 +-
 tests/test-mongoc-exhaust.c                      |  9 +++-----
 tests/test-mongoc-topology.c                     | 11 +++++-----
 9 files changed, 57 insertions(+), 34 deletions(-)

commit 7ff234f91da0ebb361bae0393b51cb473a38b8a9
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 29 16:54:30 2016 -0800

    Revert "CDRIVER-1139 net err invalidates server description"
    
    This reverts commit 9e073448acdec96d75b185e44d5855ebbd78f764.

 src/mongoc/mongoc-client.c                       |  4 ++--
 src/mongoc/mongoc-cluster.c                      | 19 +++++++------------
 src/mongoc/mongoc-topology-description-private.h |  3 +--
 src/mongoc/mongoc-topology-description.c         | 21 ++++++---------------
 src/mongoc/mongoc-topology-private.h             |  5 ++---
 src/mongoc/mongoc-topology.c                     |  8 +++-----
 tests/test-mongoc-client.c                       |  2 +-
 tests/test-mongoc-topology.c                     | 11 ++++++-----
 8 files changed, 28 insertions(+), 45 deletions(-)

commit 662f04ef7d6f48340d6ec60c7632e771c3f23a1e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 24 21:44:25 2016 -0500

    CDRIVER-1078 show more bson types in tutorial

 doc/tutorial.page | 151 +++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 111 insertions(+), 40 deletions(-)

commit a1dfe96f351f1a55fa10139a46e206b9eb7e5e56
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 29 16:16:34 2016 -0800

    Fix recently renamed function name

 tests/TestSuite.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 82a445e2bd62582e92d8fafbb8807b3f9de726da
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 26 11:03:18 2016 -0800

    Make the default test suite run known-to-work arguments
    
    forks() by default, with no threading
    use --no-fork to disable forking
    use --threads to enable threading

 .mci.yml          |  6 +++---
 tests/Makefile.am |  4 ++--
 tests/TestSuite.c | 17 +++++++++--------
 3 files changed, 14 insertions(+), 13 deletions(-)

commit 75f5a0113826bb7710aa0172634b85876164d2f8
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 26 10:48:59 2016 -0800

    Print out the full configuration -- without connecting to MongoDB

 build/future_function_templates/future.c.template |   9 --
 tests/TestSuite.c                                 | 132 ++++++++++++++--------
 tests/mock_server/future.c                        |   9 --
 tests/test-libmongoc.c                            |   9 ++
 tests/test-libmongoc.h                            |   1 +
 5 files changed, 93 insertions(+), 67 deletions(-)

commit ebb510262b7bb77eda1003715b59e4c4b16387a4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 29 15:59:12 2016 -0500

    Merge pull request #314 from remicollet/issue-online
    
    allow to skip online tests

 CONTRIBUTING.md              | 5 +++++
 tests/test-libmongoc.c       | 6 ++++++
 tests/test-libmongoc.h       | 1 +
 tests/test-mongoc-topology.c | 4 ++--
 4 files changed, 14 insertions(+), 2 deletions(-)

commit 996f304a18df61772f9b82977488b16a381941c4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Feb 28 11:36:17 2016 -0500

    CDRIVER-1139 pooled version of invalidate() test

 tests/test-mongoc-topology.c | 38 ++++++++++++++++++++++++++++++++------
 1 file changed, 32 insertions(+), 6 deletions(-)

commit 9e073448acdec96d75b185e44d5855ebbd78f764
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 26 07:15:31 2016 -0500

    CDRIVER-1139 net err invalidates server description

 src/mongoc/mongoc-client.c                       |  4 ++--
 src/mongoc/mongoc-cluster.c                      | 19 ++++++++++++-------
 src/mongoc/mongoc-topology-description-private.h |  3 ++-
 src/mongoc/mongoc-topology-description.c         | 21 +++++++++++++++------
 src/mongoc/mongoc-topology-private.h             |  5 +++--
 src/mongoc/mongoc-topology.c                     |  8 +++++---
 tests/test-mongoc-client.c                       |  2 +-
 tests/test-mongoc-topology.c                     | 11 +++++------
 8 files changed, 45 insertions(+), 28 deletions(-)

commit 277bf20dab502e3aa2c5b9e8afb2fd0b061f6bb1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 26 17:39:12 2016 -0500

    CDRIVER-1037 maybe skip unix domain socket tests

 tests/test-libmongoc.c                      | 74 +++++++++++++++++++++++++----
 tests/test-libmongoc.h                      |  3 +-
 tests/test-mongoc-client.c                  |  2 +-
 tests/test-mongoc-server-selection-errors.c |  4 +-
 4 files changed, 69 insertions(+), 14 deletions(-)

commit 224de15d8e7679ad35898fb7080d17629a1bb38a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 14:42:10 2016 -0500

    CDRIVER-1131 rename "hint" to "server id"

 NEWS                                               |   2 +-
 build/autotools/versions.ldscript                  |   2 +-
 build/cmake/libmongoc-ssl.def                      |   2 +-
 build/cmake/libmongoc.def                          |   2 +-
 doc/mongoc_bulk_operation_execute.page             |   5 +-
 doc/mongoc_bulk_operation_get_hint.page            |   1 +
 doc/mongoc_bulk_operation_set_hint.page            |   1 +
 doc/mongoc_client_command_simple_with_hint.page    |  54 --------
 ...ongoc_client_command_simple_with_server_id.page |  54 ++++++++
 src/libmongoc.symbols                              |   2 +-
 src/mongoc/mongoc-apm-private.h                    |  12 +-
 src/mongoc/mongoc-apm.c                            |  24 ++--
 src/mongoc/mongoc-apm.h                            |   6 +-
 src/mongoc/mongoc-bulk-operation-private.h         |   2 +-
 src/mongoc/mongoc-bulk-operation.c                 |  16 +--
 src/mongoc/mongoc-bulk-operation.h                 |   4 +-
 src/mongoc/mongoc-client.c                         |  16 +--
 src/mongoc/mongoc-client.h                         | 150 ++++++++++-----------
 src/mongoc/mongoc-cluster.c                        |  10 +-
 src/mongoc/mongoc-collection.c                     |   2 +-
 src/mongoc/mongoc-cursor-cursorid.c                |   2 +-
 src/mongoc/mongoc-cursor-private.h                 |   2 +-
 src/mongoc/mongoc-cursor.c                         |  16 +--
 src/mongoc/mongoc-write-command-private.h          |   2 +-
 src/mongoc/mongoc-write-command.c                  |  12 +-
 tests/test-bulk.c                                  |  24 ++--
 tests/test-mongoc-client.c                         |   3 +-
 tests/test-mongoc-collection.c                     |   6 +-
 tests/test-mongoc-command-monitoring.c             |   4 +-
 tests/test-mongoc-cursor.c                         |  20 +--
 tests/test-mongoc-exhaust.c                        |  34 ++---
 tests/test-replica-set.c                           |  16 +--
 32 files changed, 257 insertions(+), 251 deletions(-)

commit d5d20b31a4f0921fc4f37cf67d601e96ba9a86e8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 14:41:11 2016 -0500

    CDRIVER-1096 new symbols in the right version

 build/autotools/versions.ldscript | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit d90f80ab67a07b91bdddf40cf69133a3e21f4829
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 26 07:29:09 2016 -0500

    skip timing tests under valgrind

 tests/Makefile.am          |  2 +-
 tests/TestSuite.c          | 12 ++++++++++++
 tests/TestSuite.h          | 10 ++++++++++
 tests/test-mongoc-client.c |  6 +++---
 tests/test-mongoc-usleep.c |  2 +-
 5 files changed, 27 insertions(+), 5 deletions(-)

commit 97a5e10f8d5cdea98f467d72d48981ae3acb5cc4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 25 21:52:43 2016 -0500

    CDRIVER-1092 leak in client_command_simple

 src/mongoc/mongoc-client.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit b501ef2a1df16988e25ddb2bb19d3ac2f6abefc0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 24 21:53:14 2016 -0500

    CDRIVER-1073 NEWS entry: "local" in database names

 NEWS | 2 ++
 1 file changed, 2 insertions(+)

commit cd782e77f2ffbaad529162bd2dff9b6333696f4f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 24 09:20:13 2016 -0500

    CDRIVER-1073 include "local" in database names

 src/mongoc/mongoc-client.c | 3 +--
 tests/test-mongoc-client.c | 4 ++--
 2 files changed, 3 insertions(+), 4 deletions(-)

commit 06204f5eb02d4659a302416e09723c1da9369644
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 24 09:19:51 2016 -0500

    crash in cursor_array_prime
    
    Unreleased code introduced with CDRIVER-1117.

 src/mongoc/mongoc-cursor-array.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 4b7288707a695a3a7de2ae7bb336df77dde58d4b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 24 14:29:23 2016 -0800

    Make the release archiver use a -test distro
    
    There is generally more -test distros around, while -compile are
    only created if they've been blocking for over 60minutes

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c44a69e201dc26436f0c47e292807eb9e3916e06
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 24 14:28:33 2016 -0800

    Use a persisted distro

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 52161af7a7479c8e536bd46cc5263676d97cf4f3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 24 17:07:15 2016 -0500

    CDRIVER-1136 NEWS entry about commands and read prefs

 NEWS | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 8f709d6ee24ae1c8500e6a428d05a5e52a4aeb15
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 22:27:47 2016 -0500

    CDRIVER-1136 db commands must ignore read pref
    
    Server Selection Spec: "The generic command method has a default read
    preference of mode 'primary'. The generic command method MUST ignore any
    default read preference from client, database or collection configuration. The
    generic command method SHOULD allow an optional read preference argument."
    
    Also fixes CDRIVER-1127.

 build/generate-future-functions.py   |   8 ++
 src/mongoc/mongoc-client.c           |  32 ++++++--
 src/mongoc/mongoc-database.c         |  20 +++--
 tests/mock_server/future-functions.c |  53 +++++++++++++
 tests/mock_server/future-functions.h |  11 +++
 tests/test-mongoc-client.c           | 143 +++++++++++++++++++++++++++++++++++
 tests/test-mongoc-database.c         | 142 ++++++++++++++++++++++++++++++++++
 7 files changed, 395 insertions(+), 14 deletions(-)

commit 9a774f1b3f738dd50436df2b0162c69f3ce7777d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 22:26:07 2016 -0500

    CDRIVER-1061 avoid "fsync" deprecations

 src/mongoc/mongoc-write-concern.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 2ffa1d16dd4d43483efc156299621519cfb78b81
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 16:03:50 2016 -0500

    CDRIVER-1074 fix mongoc_client_get_database_names.page

 doc/mongoc_client_get_database_names.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 29dac02c86d4731248de5e66d0a0e08baf8aa027
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 15:55:23 2016 -0500

    CDRIVER-1029 stress that findandmodify's reply starts uninitialized

 doc/mongoc_collection_find_and_modify.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9085326595b09eab910f32da61ac0027a6b2e152
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 15:22:22 2016 -0500

    CDRIVER-1061 deprecate write concern "fsync".

 doc/mongoc_write_concern_get_fsync.page | 5 +++++
 src/mongoc/mongoc-write-concern.c       | 4 ++--
 src/mongoc/mongoc-write-concern.h       | 6 ++++--
 tests/test-mongoc-write-concern.c       | 5 +++++
 4 files changed, 16 insertions(+), 4 deletions(-)

commit 2218e4909d1d03a6db74f8e4e2271bb603a07ca0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 13:29:17 2016 -0500

    CDRIVER-1062 update NEWS: new public APIs

 NEWS | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 09428f274dd70d68e44716570859b2089ef3b1ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 13:25:04 2016 -0500

    CDRIVER-1092 rename command_simple_with_hint.page

 doc/mongoc_client_command_simple_with_hint.page | 54 +++++++++++++++++++++++++
 doc/mongoc_client_command_with_hint.page        | 54 -------------------------
 2 files changed, 54 insertions(+), 54 deletions(-)

commit f90014490ff752aa3a4223857d11a6ecda1ea9e8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 03:58:59 2016 -0500

    CDRIVER-431 mongoc_bulk_operation_get_hint
    
    Also document mongoc_bulk_operation_set_hint.

 build/autotools/versions.ldscript       |  1 +
 build/cmake/libmongoc-ssl.def           |  1 +
 build/cmake/libmongoc.def               |  1 +
 doc/mongoc_bulk_operation_get_hint.page | 33 +++++++++++++++++++++++++++++++
 doc/mongoc_bulk_operation_set_hint.page | 35 +++++++++++++++++++++++++++++++++
 src/libmongoc.symbols                   |  1 +
 src/mongoc/mongoc-bulk-operation.c      | 11 +++++++++--
 src/mongoc/mongoc-bulk-operation.h      |  2 +-
 tests/test-bulk.c                       |  4 +++-
 9 files changed, 85 insertions(+), 4 deletions(-)

commit 727dbbef0a51963128962ffdb3e2c5ba7123975c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 04:12:14 2016 -0500

    CDRIVER-1096 fix server-select test for SSL

 tests/test-mongoc-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit df5ddb4612e203e72f110a7167a0b9e51e48e59b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 03:29:43 2016 -0500

    CDRIVER-1125 add get/set_limit to symbols file

 src/libmongoc.symbols | 2 ++
 1 file changed, 2 insertions(+)

commit cc3792b811955c8710c4212475bb7b46d3dacb0e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 03:22:01 2016 -0500

    CDRIVER-1092 finish updating symbol files

 build/autotools/versions.ldscript | 1 +
 src/libmongoc.symbols             | 1 +
 2 files changed, 2 insertions(+)

commit 27d98d3a1049b637e754cae44624662d63a09949
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 23 03:19:24 2016 -0500

    CDRIVER-785 update cursor test

 tests/test-mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f3666b35bf06b77e10b201a5a983971c6b9fda52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 19 10:04:42 2016 -0800

    CDRIVER-1092 mongoc_cursor_new_from_command_reply

 build/autotools/versions.ldscript             |   2 +
 build/cmake/libmongoc-ssl.def                 |   2 +
 build/cmake/libmongoc.def                     |   2 +
 doc/mongoc_client_command.page                |   2 +-
 doc/mongoc_client_command_with_hint.page      |  54 ++++++++++
 doc/mongoc_cursor_new_from_command_reply.page |  52 ++++++++++
 src/libmongoc.symbols                         |   1 +
 src/mongoc/mongoc-client.c                    | 109 ++++++++++++--------
 src/mongoc/mongoc-client.h                    |   7 ++
 src/mongoc/mongoc-cursor-cursorid-private.h   |   7 +-
 src/mongoc/mongoc-cursor-cursorid.c           |  92 +++++++++++++----
 src/mongoc/mongoc-cursor-private.h            |   3 +
 src/mongoc/mongoc-cursor.c                    |  84 +++++++++++++---
 src/mongoc/mongoc-cursor.h                    |  52 +++++-----
 tests/TestSuite.h                             |   1 +
 tests/test-libmongoc.c                        |   5 +
 tests/test-libmongoc.h                        |   1 +
 tests/test-mongoc-cursor.c                    | 137 ++++++++++++++++++++++++++
 18 files changed, 516 insertions(+), 97 deletions(-)

commit c1bfb2226b16234ba7cd10fd4872146e3ecccb4c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 16:01:23 2016 -0500

    CDRIVER-1132 document new URI setter functions

 doc/mongoc_uri_option_is_bool.page  | 32 +++++++++++++++++++++++++++++
 doc/mongoc_uri_option_is_int32.page | 32 +++++++++++++++++++++++++++++
 doc/mongoc_uri_option_is_utf8.page  | 32 +++++++++++++++++++++++++++++
 doc/mongoc_uri_set_auth_source.page | 40 +++++++++++++++++++++++++++++++++++++
 doc/mongoc_uri_set_database.page    | 40 +++++++++++++++++++++++++++++++++++++
 doc/mongoc_uri_set_password.page    | 39 ++++++++++++++++++++++++++++++++++++
 doc/mongoc_uri_set_username.page    | 39 ++++++++++++++++++++++++++++++++++++
 7 files changed, 254 insertions(+)

commit cc049c07752067939ca5959e373193d23bd77498
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 15:42:00 2016 -0500

    CDRIVER-1132 more URI setter functions
    
    Also re-alphabetize the symbol export files.

 build/autotools/versions.ldscript | 13 ++++++++++---
 build/cmake/libmongoc-ssl.def     | 10 +++++-----
 build/cmake/libmongoc.def         | 17 ++++++++++++-----
 src/libmongoc.symbols             | 17 ++++++++++++-----
 src/mongoc/mongoc-uri-private.h   | 18 ------------------
 src/mongoc/mongoc-uri.h           | 11 +++++++++++
 6 files changed, 50 insertions(+), 36 deletions(-)

commit 6e2b8c2a2477903d47a2bd4b9efa5408f3af3fc0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 03:26:43 2016 -0500

    CDRIVER-1125 get and set cursor limit

 build/autotools/versions.ldscript  |  2 ++
 build/cmake/libmongoc-ssl.def      |  2 ++
 build/cmake/libmongoc.def          |  2 ++
 doc/mongoc_cursor_get_limit.page   | 32 +++++++++++++++++++++++
 doc/mongoc_cursor_set_limit.page   | 41 +++++++++++++++++++++++++++++
 src/mongoc/mongoc-cursor-private.h |  2 +-
 src/mongoc/mongoc-cursor.c         | 42 ++++++++++++++++++++++++++----
 src/mongoc/mongoc-cursor.h         |  3 +++
 tests/test-mongoc-cursor.c         | 53 ++++++++++++++++++++++++++++++++++++++
 9 files changed, 173 insertions(+), 6 deletions(-)

commit 5d4811cf53c04ddbf6fd54da808518e4f53239b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 16:48:35 2016 -0500

    CDRIVER-785 configurable localThresholdMS

 build/generate-future-functions.py               |  1 -
 doc/mongoc_uri_t.page                            | 22 ++++++++++++++++++++--
 src/mongoc/mongoc-client.c                       | 11 +++++------
 src/mongoc/mongoc-cluster.c                      |  1 -
 src/mongoc/mongoc-collection.c                   |  1 -
 src/mongoc/mongoc-topology-description-private.h |  2 --
 src/mongoc/mongoc-topology-private.h             |  3 ++-
 src/mongoc/mongoc-topology.c                     | 10 ++++++----
 src/mongoc/mongoc-uri.c                          |  1 +
 tests/mock_server/future-functions.c             | 11 +++--------
 tests/mock_server/future-functions.h             |  1 -
 tests/test-bulk.c                                |  2 +-
 tests/test-mongoc-client.c                       |  2 +-
 tests/test-mongoc-topology-reconcile.c           |  4 ++--
 tests/test-mongoc-topology-scanner.c             |  4 ++--
 tests/test-mongoc-topology.c                     | 20 +++++++++++---------
 tests/test-mongoc-uri.c                          | 10 +++++++++-
 17 files changed, 63 insertions(+), 43 deletions(-)

commit 5295a2f9864f38436a603e7289193e3d609034ba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 09:34:32 2016 -0500

    CDRIVER-1098 mongoc-uri.c style

 src/mongoc/mongoc-uri.c | 30 ++++++++++++++++++------------
 1 file changed, 18 insertions(+), 12 deletions(-)

commit 726bbeeadc0f9ba03c0fb5b9130c3c8f39bb1900
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 09:34:32 2016 -0500

    CDRIVER-1098 mongoc_uri_t option setters

 build/autotools/versions.ldscript       |  3 +++
 build/cmake/libmongoc-ssl.def           |  3 +++
 build/cmake/libmongoc.def               |  3 +++
 doc/mongoc_uri_set_option_as_bool.page  | 43 +++++++++++++++++++++++++++++++++
 doc/mongoc_uri_set_option_as_int32.page | 43 +++++++++++++++++++++++++++++++++
 doc/mongoc_uri_set_option_as_utf8.page  | 43 +++++++++++++++++++++++++++++++++
 src/libmongoc.symbols                   |  3 +++
 src/mongoc/mongoc-uri-private.h         | 12 ---------
 src/mongoc/mongoc-uri.h                 |  9 +++++++
 9 files changed, 150 insertions(+), 12 deletions(-)

commit 667fbe2e83782b07997b11c0767e779aeda2c859
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 09:13:06 2016 -0500

    CDRIVER-1098 mongoc_uri_t option getters

 build/autotools/versions.ldscript       |  3 +++
 build/cmake/libmongoc-ssl.def           |  3 +++
 build/cmake/libmongoc.def               |  3 +++
 doc/mongoc_uri_get_option_as_bool.page  | 36 +++++++++++++++++++++++++++++
 doc/mongoc_uri_get_option_as_int32.page | 41 +++++++++++++++++++++++++++++++++
 doc/mongoc_uri_get_option_as_utf8.page  | 36 +++++++++++++++++++++++++++++
 src/libmongoc.symbols                   |  3 +++
 src/mongoc/mongoc-uri-private.h         | 12 ----------
 src/mongoc/mongoc-uri.h                 |  9 ++++++++
 9 files changed, 134 insertions(+), 12 deletions(-)

commit ee92496b81cff62cc3b55778498a3c224a5f5572
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 11:27:41 2016 -0500

    CDRIVER-1094 public trace_enable / disable
    
    Make mongoc_log_trace_enable and mongoc_log_trace_disable public.

 build/autotools/versions.ldscript |  2 ++
 build/cmake/libmongoc-ssl.def     |  2 ++
 build/cmake/libmongoc.def         |  2 ++
 doc/logging.page                  |  4 +++-
 src/libmongoc.symbols             |  2 ++
 src/mongoc/mongoc-log-private.h   |  8 --------
 src/mongoc/mongoc-log.h           | 18 ++++++++++++++++++
 7 files changed, 29 insertions(+), 9 deletions(-)

commit c359014943043e0ced4b2cb5a3791cee55e19f6b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 11:15:53 2016 -0500

    mongoc_uri_t compound option setters
    
    CDRIVER-1099 mongoc_uri_set_read_prefs
    CDRIVER-1100 mongoc_uri_set_read_concern
    CDRIVER-1101 mongoc_uri_set_write_concern

 build/autotools/versions.ldscript     |  3 ++
 build/cmake/libmongoc-ssl.def         |  3 ++
 build/cmake/libmongoc.def             |  3 ++
 doc/mongoc_uri_set_read_concern.page  | 34 +++++++++++++++++++++++
 doc/mongoc_uri_set_read_prefs_t.page  | 34 +++++++++++++++++++++++
 doc/mongoc_uri_set_write_concern.page | 34 +++++++++++++++++++++++
 src/libmongoc.symbols                 |  3 ++
 src/mongoc/mongoc-uri.c               | 36 ++++++++++++++++++++++++
 src/mongoc/mongoc-uri.h               | 52 +++++++++++++++++++----------------
 tests/test-mongoc-uri.c               | 44 +++++++++++++++++++++++++++++
 10 files changed, 223 insertions(+), 23 deletions(-)

commit 4b170bf9ae0696e9a9fb36cc87465a63b83568a2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 13:48:29 2016 -0500

    CDRIVER-1124 mongoc_client_get_server_description

 build/autotools/versions.ldscript             |  1 +
 build/cmake/libmongoc-ssl.def                 |  1 +
 build/cmake/libmongoc.def                     |  1 +
 doc/mongoc_client_get_server_description.page | 37 ++++++++++++++++
 src/libmongoc.symbols                         |  1 +
 src/mongoc/mongoc-client-private.h            |  4 --
 src/mongoc/mongoc-client.c                    |  9 ++++
 src/mongoc/mongoc-client.h                    |  4 +-
 tests/test-mongoc-client.c                    | 64 +++++++++++++++++++++++++++
 9 files changed, 117 insertions(+), 5 deletions(-)

commit 7657ec3fb036a8d6bc853776d7d8ccc255d9e296
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 12:09:09 2016 -0500

    CDRIVER-524 restore links from mongoc docs to libbson

 doc/html/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2807d69f13b834e58d29d408e6927de134332a4a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 11:51:18 2016 -0500

    replace <link> with <code> where appropriate

 doc/finding-document.page                                     | 2 +-
 doc/inserting-document.page                                   | 2 +-
 doc/mongoc_bulk_operation_get_write_concern.page              | 4 ++--
 doc/mongoc_bulk_operation_set_bypass_document_validation.page | 2 +-
 doc/mongoc_collection_aggregate.page                          | 2 +-
 doc/mongoc_collection_count.page                              | 2 +-
 doc/mongoc_collection_count_with_opts.page                    | 2 +-
 doc/mongoc_collection_find_and_modify.page                    | 2 +-
 doc/mongoc_find_and_modify_opts_t.page                        | 2 +-
 doc/mongoc_gridfs_file_get_id.page                            | 2 +-
 doc/mongoc_read_concern_t.page                                | 2 +-
 doc/mongoc_uri_get_read_prefs_t.page                          | 4 ++--
 doc/tutorial.page                                             | 4 ++--
 13 files changed, 16 insertions(+), 16 deletions(-)

commit 351878978aaef970be2d56dbeef16d40f89c67d1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 11:49:58 2016 -0500

    fix link to MongoDB Manual readConcern page

 doc/mongoc_uri_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6ee421ca92b4e00783f2e150ab44b61221fb9206
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 02:33:35 2016 -0500

    duplicated test helper functions

 tests/test-bulk.c                   | 14 --------------
 tests/test-libmongoc.c              | 24 +++++++++++++++++++++++-
 tests/test-libmongoc.h              |  3 +++
 tests/test-mongoc-collection.c      | 22 ----------------------
 tests/test-mongoc-cursor.c          | 15 ---------------
 tests/test-mongoc-exhaust.c         | 13 -------------
 tests/test-mongoc-find-and-modify.c | 13 -------------
 tests/test-write-commands.c         | 15 ---------------
 8 files changed, 26 insertions(+), 93 deletions(-)

commit aca8dc0e9af87afab83d048b34e26049d558ca23
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 22 02:34:54 2016 -0500

    document expanded write-concern public API
    
    CDRIVER-1093 mongoc_write_concern_journal_is_set
    CDRIVER-1102 mongoc_write_concern_is_valid
    CDRIVER-1103 mongoc_write_concern_is_acknowledged

 doc/mongoc_write_concern_is_acknowledged.page | 31 +++++++++++++++++++++++++++
 doc/mongoc_write_concern_is_valid.page        | 31 +++++++++++++++++++++++++++
 doc/mongoc_write_concern_journal_is_set.page  | 31 +++++++++++++++++++++++++++
 3 files changed, 93 insertions(+)

commit 929e8590a0ff49979ff83cc8175844d8aa992890
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 19 13:46:13 2016 -0800

    CDRIVER-1096 mongoc_client_select_server

 build/autotools/versions.ldscript    |   1 +
 build/cmake/libmongoc-ssl.def        |   1 +
 build/cmake/libmongoc.def            |   1 +
 doc/mongoc_client_select_server.page |  43 ++++++++++
 src/libmongoc.symbols                |   1 +
 src/mongoc/mongoc-client.c           |  23 +++++
 src/mongoc/mongoc-client.h           |   5 +-
 tests/test-mongoc-client.c           | 160 +++++++++++++++++++++++++++++++++++
 8 files changed, 234 insertions(+), 1 deletion(-)

commit 3c333c5ed6aaddca73700cf683b03fd5a78ab873
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 19 14:35:21 2016 -0800

    expand write-concern public API
    
    CDRIVER-1093 mongoc_write_concern_journal_is_set
    CDRIVER-1102 mongoc_write_concern_is_valid
    CDRIVER-1103 mongoc_write_concern_is_acknowledged

 src/mongoc/mongoc-bulk-operation.c        |  2 +-
 src/mongoc/mongoc-collection.c            |  4 +--
 src/mongoc/mongoc-uri.c                   |  2 +-
 src/mongoc/mongoc-write-command.c         | 10 +++----
 src/mongoc/mongoc-write-concern-private.h |  2 --
 src/mongoc/mongoc-write-concern.c         | 18 +++++++++---
 src/mongoc/mongoc-write-concern.h         | 45 +++++++++++++++-------------
 tests/test-mongoc-write-concern.c         | 49 ++++++++++++++++++-------------
 tests/test-write-commands.c               |  2 +-
 9 files changed, 77 insertions(+), 57 deletions(-)

commit 7b01ae8c1f2bdc0597745becf17335baa784eb36
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 16 15:38:19 2016 -0800

    CDRIVER-1091 add mongoc_client_get_server_descriptions
    
    And mongoc_server_description_ismaster, mongoc_server_description_type
    (CDRIVER-1095).

 build/autotools/versions.ldscript                |   8 ++
 build/cmake/libmongoc-ssl.def                    |   4 +
 build/cmake/libmongoc.def                        |   4 +
 doc/mongoc_client_get_server_descriptions.page   |  63 ++++++++++++
 doc/mongoc_server_description_destroy.page       |   9 +-
 doc/mongoc_server_description_host.page          |   7 +-
 doc/mongoc_server_description_id.page            |  11 +--
 doc/mongoc_server_description_ismaster.page      |  38 +++++++
 doc/mongoc_server_description_new_copy.page      |   4 +-
 doc/mongoc_server_description_t.page             |   5 +-
 doc/mongoc_server_description_type.page          |  44 +++++++++
 doc/mongoc_server_descriptions_destroy_all.page  |  31 ++++++
 src/libmongoc.symbols                            |   5 +
 src/mongoc/mongoc-client.c                       |  56 +++++++++++
 src/mongoc/mongoc-client.h                       | 121 ++++++++++++-----------
 src/mongoc/mongoc-server-description.c           |  64 +++++++++++-
 src/mongoc/mongoc-server-description.h           |   7 +-
 src/mongoc/mongoc-topology-description-private.h |   1 +
 tests/test-libmongoc.c                           | 115 ++++++++++++++++++---
 tests/test-libmongoc.h                           |   4 +
 tests/test-mongoc-client.c                       |  61 ++++++++++++
 21 files changed, 564 insertions(+), 98 deletions(-)

commit bef75648a41107fad2ab6d799e671aa111b5839d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 15 16:55:39 2016 -0800

    CDRIVER-769 get cmd name even if it's wrapped in $query

 CMakeLists.txt           |  1 +
 src/mongoc/mongoc-util.c | 26 +++++++++++++++++++++++++-
 tests/Makefile.am        |  1 +
 tests/test-libmongoc.c   |  2 ++
 tests/test-mongoc-util.c | 35 +++++++++++++++++++++++++++++++++++
 5 files changed, 64 insertions(+), 1 deletion(-)

commit d9f453119ac4bb448aabbc6fd2b2fb4270e850c5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 17 15:46:43 2016 -0800

    CDRIVER-1119 m4_esyscmd_s isn't in old autoconf

 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 903604bccf7b8625e739c948eff1ef6d3f21b497
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 17 15:45:42 2016 -0800

    update libbson
    
    Gets fix for "m4_esyscmd_s isn't in old autoconf".

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6dc55afd06439dd29f75346f3786a1405d14bbf9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 16 09:39:13 2016 -0800

    CDRIVER-769 don't assign in an assert

 src/mongoc/mongoc-cluster.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit dd115e8e2c22eb68dc1b47bbc57740520ee42244
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 16 09:33:18 2016 -0800

    CDRIVER-1117 delete mongoc_cluster_run_command_rpc
    
    I introduced the function for CDRIVER-838 to implement "find"/"getMore"
    commands -- the cursor was built to send and receive RPCs, so it was
    easier to stick a find or getMore command into an RPC and send it,
    instead of using the standard command path from the cursor code.
    
    This causes some duplication, however, and it makes it very hard to
    consistently record command events originating from cursors and those
    that don't (CDRIVER-769).
    
    Remove mongoc_cluster_run_command_rpc and use the standard command path.
    When a cursor runs a command, it no longer stores the reply in its rpc
    struct; instead it stores the reply in a bson_t on its iface_data.

 src/mongoc/mongoc-cluster-private.h         |  13 --
 src/mongoc/mongoc-cluster.c                 | 251 ++++++++++------------------
 src/mongoc/mongoc-cursor-array.c            |  48 +++---
 src/mongoc/mongoc-cursor-cursorid-private.h |   1 +
 src/mongoc/mongoc-cursor-cursorid.c         |  25 ++-
 src/mongoc/mongoc-cursor-private.h          |   5 +-
 src/mongoc/mongoc-cursor.c                  |  65 ++-----
 7 files changed, 150 insertions(+), 258 deletions(-)

commit 1e74bb75bf5154487c22ea83a7f12ad42fb1c6d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 12 10:43:39 2016 -0800

    Fix spelling

 orchestration_configs/servers/basic-ssl.json | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 14e03d83e858507299baa7dddbb7bce36e342f8f
Author: Hannes Magnusson <bjori@php.net>
Date:   Sat Feb 13 16:15:02 2016 -0800

    CDRIVER-1112: Provide the start time and end too
    
    This isn't unix timestamp, but its only used for calculating how
    long the tests took, not to map it out on a clock

 tests/TestSuite.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 570b7b64fbd8b55baea4336f5dbf9256cd850ffa
Author: Hannes Magnusson <bjori@php.net>
Date:   Sat Feb 13 20:26:53 2016 -0800

    CDRIVER-520: Improve file reading

 src/mongoc/mongoc-secure-transport.c | 83 ++++++++++--------------------------
 1 file changed, 23 insertions(+), 60 deletions(-)

commit 87507e131ed6de979905eea6d0b9f98c49b904b8
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 12 20:49:37 2016 -0800

    CDRIVER-520: Extract the Certificate Subject of the provided PEM

 src/mongoc/mongoc-secure-transport.c | 188 ++++++++++++++++++++++++++++++++++-
 1 file changed, 186 insertions(+), 2 deletions(-)

commit 4909c1c0f260f2fcae73dd48982e2a4f22025e99
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 12 12:40:58 2016 -0800

    Improve test output on failure

 tests/test-x509.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 59f7ce02f9543560efd356cd2d69f9c9b2610c99
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Feb 12 12:39:50 2016 -0800

    CDRIVER-520: TLS skeleton for Secure Transport

 build/autotools/CheckSSL.m4                        |   8 +-
 build/autotools/CheckSecureTransport.m4            |   2 +-
 src/mongoc/Makefile.am                             |  11 +-
 src/mongoc/mongoc-cluster.c                        |   4 +-
 src/mongoc/mongoc-openssl-private.h                |   6 +-
 src/mongoc/mongoc-secure-transport-private.h       |  40 ++++
 src/mongoc/mongoc-secure-transport.c               |  32 +++
 src/mongoc/mongoc-ssl.c                            |  17 ++
 src/mongoc/mongoc-ssl.h                            |   1 +
 .../mongoc-stream-tls-secure-transport-private.h   |  44 ++++
 src/mongoc/mongoc-stream-tls-secure-transport.c    | 246 +++++++++++++++++++++
 src/mongoc/mongoc-stream-tls-secure-transport.h    |  38 ++++
 tests/ha-test.c                                    |  24 +-
 tests/ha-test.h                                    |   8 +-
 tests/ssl-test.c                                   |  22 ++
 tests/test-libmongoc.c                             |   8 +-
 tests/test-mongoc-client-pool.c                    |   4 +-
 tests/test-mongoc-client.c                         |   2 +
 18 files changed, 485 insertions(+), 32 deletions(-)

commit 2567a3574e936e7fbd853c198b282e138cb39081
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Feb 13 21:04:48 2016 -0800

    leaks in tests

 tests/mock_server/mock-rs.c         |  6 +++---
 tests/test-bulk.c                   |  1 +
 tests/test-mongoc-client.c          |  2 +-
 tests/test-mongoc-collection-find.c |  6 ++++++
 tests/test-mongoc-collection.c      | 24 ++++++++++++++++++++----
 tests/test-mongoc-cursor.c          |  5 +++++
 tests/test-mongoc-exhaust.c         |  4 ++++
 7 files changed, 40 insertions(+), 8 deletions(-)

commit 0eca977410bd39f70304f44c62f302361ba6b2e5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Feb 13 16:04:16 2016 -0500

    CDRIVER-769 delete TODOs
    
    These are not actually good refactoring opportunities.

 src/mongoc/mongoc-write-command.c | 2 --
 1 file changed, 2 deletions(-)

commit 01495b9692a4eab414da83b4c8d852871343512e
Author: Hannes Magnusson <bjori@php.net>
Date:   Sat Feb 13 13:38:20 2016 -0800

    CDRIVER-1114: fork() before running the tests
    
    This allows us to always submit test results as per CDRIVER-1112

 .mci.yml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 859bc9bc4551b88bae4d67aafc8c25386ddc4ab4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 10 11:13:43 2016 -0500

    CDRIVER-769 command-succeeded events

 src/mongoc/mongoc-apm.c                       |   2 +
 src/mongoc/mongoc-client.c                    |  64 +++++-
 src/mongoc/mongoc-cluster.c                   |  35 ++-
 src/mongoc/mongoc-cursor.c                    | 103 ++++++++-
 src/mongoc/mongoc-write-command.c             | 295 +++++++++++++++++++++++++-
 src/mongoc/mongoc-write-concern.c             |   2 +-
 tests/json/command_monitoring/bulkWrite.json  |  71 ++++++-
 tests/json/command_monitoring/command.json    |  18 ++
 tests/json/command_monitoring/deleteMany.json |  25 +++
 tests/json/command_monitoring/deleteOne.json  |  25 +++
 tests/json/command_monitoring/find.json       | 259 ++++++++++++++++++++++
 tests/json/command_monitoring/insertMany.json |  34 +++
 tests/json/command_monitoring/insertOne.json  |  25 +++
 tests/json/command_monitoring/updateMany.json |  25 +++
 tests/json/command_monitoring/updateOne.json  |  40 ++++
 tests/test-mongoc-command-monitoring.c        | 177 +++++++++++++---
 16 files changed, 1155 insertions(+), 45 deletions(-)

commit c411be1e63fd4b396f793654a6517f87ace2141c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 11 14:53:54 2016 -0500

    better message from test helper match_bson()
    
    Also allow loose numeric type-checking.

 tests/test-conveniences.c              | 347 ++++++++++++++++++++++++++++-----
 tests/test-conveniences.h              |  12 ++
 tests/test-mongoc-command-monitoring.c |  16 +-
 3 files changed, 324 insertions(+), 51 deletions(-)

commit 71a365c93da3f5d834434c3ce7968087aa203166
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 11 14:52:55 2016 -0500

    CDRIVER-769 leaks in apm test

 tests/test-mongoc-command-monitoring.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 5ce26eedadd4feee6de3e2a6bb687022f6e59ac6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 10 11:14:16 2016 -0500

    unused test helper function

 tests/test-conveniences.c | 39 ---------------------------------------
 tests/test-conveniences.h |  5 -----
 2 files changed, 44 deletions(-)

commit c0260660b841527925d42afb4a4c1f1675c88ffd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 11 17:39:28 2016 -0800

    CDRIVER-1112: Upload test results to Evergreen
    
    Only the basics included so far

 .gitignore        |  2 +-
 .mci.yml          | 41 ++++++++++++++++++++++++++++++++++++++---
 tests/Makefile.am |  4 ++--
 3 files changed, 41 insertions(+), 6 deletions(-)

commit 6c95965a0f52700f1c650052f862ddd033a4413e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 11 17:14:12 2016 -0800

    CDRIVER-1112: Fix JSON syntax and field names
    
    Now they match the Evergreen test results format

 tests/TestSuite.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 87adfd3877c4669f936b9a2ea47eafeb57ac8744
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 11 17:09:47 2016 -0800

    CDRIVER-1105 & CDRIVER-1106: OpenSSL & Secure Transport variants

 .mci.yml | 76 +++++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 63 insertions(+), 13 deletions(-)

commit 159c2165df3092996ed43dd062350041dbdb193f
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 11 17:00:50 2016 -0800

    CDRIVER-1109: Expand SSL Test Matrix
    
    Added:
    - 3.0 SSL NoAuth
    - Latest SSL Auth
    - Latest SSL NoAuth

 .mci.yml                                     | 106 +++++++++++++++++++++++----
 orchestration_configs/servers/auth-ssl.json  |  18 +++++
 orchestration_configs/servers/basic-ssl.json |  16 ++++
 orchestration_configs/servers/ssl.json       |  18 -----
 4 files changed, 124 insertions(+), 34 deletions(-)

commit 74e87983cb9bebae888b2b797d4f8057b9bff8af
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 10 21:33:45 2016 -0800

    CDRIVER-1106: Make the OSX variant use Secure Transport

 .mci.yml | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 84be1ae2d6c316a7bd4561a06fdc60fa186ca15e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Feb 10 13:50:41 2016 -0800

    CDRIVER-1089: Add Common Crypto implementation
    
    Passes all the auth tests (e.g. SCRAM-SHA-1)

 CMakeLists.txt                                   |  8 +++-
 build/autotools/CheckOpenSSL.m4                  | 15 ++++---
 build/autotools/CheckSSL.m4                      | 12 +++---
 build/autotools/CheckSecureTransport.m4          |  5 ++-
 configure.ac                                     |  2 +-
 src/mongoc/Makefile.am                           | 23 +++++++---
 src/mongoc/mongoc-b64-private.h                  |  2 -
 src/mongoc/mongoc-b64.c                          |  3 --
 src/mongoc/mongoc-cluster.c                      |  6 ++-
 src/mongoc/mongoc-config.h.in                    | 37 ++++++++++++++++-
 src/mongoc/mongoc-crypto-common-crypto-private.h | 51 +++++++++++++++++++++++
 src/mongoc/mongoc-crypto-common-crypto.c         | 53 ++++++++++++++++++++++++
 src/mongoc/mongoc-crypto-openssl-private.h       | 11 ++---
 src/mongoc/mongoc-crypto-openssl.c               | 24 +++++------
 src/mongoc/mongoc-crypto-private.h               | 37 +++++++++--------
 src/mongoc/mongoc-crypto.c                       | 23 ++++++----
 src/mongoc/mongoc-rand-common-crypto.c           | 49 ++++++++++++++++++++++
 src/mongoc/mongoc-scram-private.h                |  2 +-
 src/mongoc/mongoc-scram.c                        |  2 +-
 src/mongoc/mongoc-stream-tls-private.h           |  5 +++
 src/mongoc/mongoc-stream-tls.c                   |  3 ++
 src/mongoc/mongoc-topology-scanner.c             |  2 +-
 tests/test-libmongoc.c                           |  2 +-
 23 files changed, 305 insertions(+), 72 deletions(-)

commit b7e920eee710e87d1fab871feaa642db80484674
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Feb 9 17:24:54 2016 -0800

    CDRIVER-520: Add --enable-secure-transport for Darwin Native TLS

 build/autotools/CheckHost.m4                 |  1 +
 build/autotools/CheckOpenSSL.m4              | 10 ++++++----
 build/autotools/CheckSSL.m4                  | 22 +++++++++++++++-------
 build/autotools/CheckSecureTransport.m4      | 27 +++++++++++++++++++++++++++
 build/autotools/PrintBuildConfiguration.m4   |  1 +
 configure.ac                                 |  1 +
 src/mongoc/Makefile.am                       |  8 ++++----
 src/mongoc/mongoc-config.h.in                | 10 ++++++++++
 src/mongoc/mongoc-crypto-openssl-private.h   |  7 ++++---
 src/mongoc/mongoc-crypto-openssl.c           |  8 ++++++--
 src/mongoc/mongoc-crypto-private.h           |  7 +++----
 src/mongoc/mongoc-crypto.c                   |  3 +++
 src/mongoc/mongoc-scram-private.h            |  2 +-
 src/mongoc/mongoc-stream-tls.c               |  8 +++++---
 src/mongoc/mongoc-topology-scanner-private.h |  8 ++++++--
 src/mongoc/mongoc-topology-scanner.c         |  4 ++--
 16 files changed, 95 insertions(+), 32 deletions(-)

commit 7fd65d3a0fa8c9cd1d6582100f38961d755457cc
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Feb 9 16:33:25 2016 -0800

    CDRIVER-1087: Shuffle OpenSSL specifics out
    
    mongoc-ssl.c is now rather empty and boring, with all the OpenSSL
    specifics in mongoc-openssl.c

 CMakeLists.txt                             |   1 +
 src/mongoc/Makefile.am                     |   4 +-
 src/mongoc/mongoc-client-private.h         |   1 -
 src/mongoc/mongoc-client.c                 |  13 +-
 src/mongoc/mongoc-cluster.c                |   8 +-
 src/mongoc/mongoc-init.c                   |  10 +-
 src/mongoc/mongoc-openssl-private.h        |  47 +++
 src/mongoc/mongoc-openssl.c                | 534 +++++++++++++++++++++++++++++
 src/mongoc/mongoc-ssl-private.h            |  47 ---
 src/mongoc/mongoc-ssl.c                    | 514 +--------------------------
 src/mongoc/mongoc-stream-tls-openssl-bio.c |   2 +-
 src/mongoc/mongoc-stream-tls-openssl.c     |   6 +-
 src/mongoc/mongoc-stream-tls.c             |   2 +-
 tests/test-x509.c                          |   4 +-
 14 files changed, 606 insertions(+), 587 deletions(-)

commit dc1f0974f721d08aa96e01166306aec122f640d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 8 20:04:27 2016 -0800

    CDRIVER-1086: Abstract the OpenSSL stream wraper into TLS abstraction layer

 CMakeLists.txt                                     |   6 +
 src/mongoc/Makefile.am                             |   6 +
 src/mongoc/mongoc-stream-tls-openssl-bio-private.h |  67 ++
 src/mongoc/mongoc-stream-tls-openssl-bio.c         | 298 +++++++
 src/mongoc/mongoc-stream-tls-openssl-private.h     |  45 +
 src/mongoc/mongoc-stream-tls-openssl.c             | 732 +++++++++++++++++
 src/mongoc/mongoc-stream-tls-openssl.h             |  37 +
 src/mongoc/mongoc-stream-tls-private.h             |  63 ++
 src/mongoc/mongoc-stream-tls.c                     | 915 +--------------------
 src/mongoc/mongoc-stream-tls.h                     |   2 +
 src/mongoc/mongoc-stream.c                         |  10 +
 src/mongoc/mongoc-stream.h                         |   1 +
 12 files changed, 1298 insertions(+), 884 deletions(-)

commit 2a08bcdfaf2a8bb65c64322ccf6a98656ec8bbbf
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 4 15:49:17 2016 -0800

    CDRIVER-1085: Add crypto library abstraction

 CMakeLists.txt                             |   4 +-
 src/mongoc/Makefile.am                     |   9 ++-
 src/mongoc/mongoc-crypto-openssl-private.h |  48 +++++++++++
 src/mongoc/mongoc-crypto-openssl.c         |  72 +++++++++++++++++
 src/mongoc/mongoc-crypto-private.h         |  79 ++++++++++++++++++
 src/mongoc/mongoc-crypto.c                 |  59 ++++++++++++++
 src/mongoc/mongoc-rand-openssl.c           |  48 +++++++++++
 src/mongoc/mongoc-rand.c                   |  48 -----------
 src/mongoc/mongoc-scram-private.h          |  25 +++---
 src/mongoc/mongoc-scram.c                  | 126 ++++++++++-------------------
 10 files changed, 375 insertions(+), 143 deletions(-)

commit c60edbeda77712377d071e3975f665c03ea3561c
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Feb 4 12:59:01 2016 -0800

    CDRIVER-1088: Decouple OpenSSL from MONGOC_ENABLE_SSL
    
    Preparing for other TLS implementations at which point
    MONGOC_ENABLE_SSL will mean "any implementation", not exclusively OpenSSL

 CMakeLists.txt                               |  3 ++
 build/autotools/CheckOpenSSL.m4              | 45 ++++++++++++++++++++++++++++
 build/autotools/CheckSSL.m4                  | 38 +++++------------------
 build/autotools/PrintBuildConfiguration.m4   |  1 +
 configure.ac                                 |  1 +
 src/mongoc/Makefile.am                       |  2 +-
 src/mongoc/mongoc-b64-private.h              |  2 +-
 src/mongoc/mongoc-b64.c                      |  4 +--
 src/mongoc/mongoc-config.h.in                | 12 +++++++-
 src/mongoc/mongoc-rand.c                     |  2 +-
 src/mongoc/mongoc-scram.c                    |  2 +-
 src/mongoc/mongoc-ssl.c                      |  2 +-
 src/mongoc/mongoc-stream-tls.c               |  2 +-
 src/mongoc/mongoc-topology-scanner-private.h |  4 +--
 src/mongoc/mongoc-topology-scanner.c         |  6 ++--
 src/mongoc/mongoc.h                          |  2 +-
 tests/ha-test.c                              | 24 +++++++--------
 tests/ha-test.h                              |  8 ++---
 tests/mock_server/mock-server.c              |  6 ++--
 tests/mock_server/mock-server.h              |  4 +--
 tests/test-libmongoc.c                       | 18 +++++------
 tests/test-libmongoc.h                       |  2 +-
 tests/test-mongoc-async.c                    | 10 +++----
 tests/test-mongoc-client-pool.c              |  4 +--
 tests/test-mongoc-client.c                   |  8 ++---
 tests/test-mongoc-topology-scanner.c         | 10 +++----
 26 files changed, 129 insertions(+), 93 deletions(-)

commit 594e917eaeb09118c02c483e991c2fb14a770f41
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Feb 8 19:51:23 2016 -0800

    Fix invalid read

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7bcd7a08ad3da701acf8301903a00055ded496d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 9 15:32:37 2016 -0500

    update libbson
    
    Get bson_ascii_strtoll fix and bson_reader_reset feature.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 88098a44ab81899285c8a21cfee9f5756297ee0f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 5 16:00:04 2016 -0500

    redundant mongoc_cursor_t code

 src/mongoc/mongoc-cursor.c | 1 -
 1 file changed, 1 deletion(-)

commit f4717b33a138a7fe1b73b46e55255e55c6ee3aa4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 5 15:59:46 2016 -0500

    CDRIVER-769 monitor legacy queries

 src/mongoc/mongoc-client-private.h          |   1 +
 src/mongoc/mongoc-client.c                  |  90 +++++++++++++++++++++---
 src/mongoc/mongoc-cursor-cursorid-private.h |  12 ++--
 src/mongoc/mongoc-cursor-cursorid.c         |  16 +++--
 src/mongoc/mongoc-cursor-private.h          |   2 +
 src/mongoc/mongoc-cursor.c                  | 105 ++++++++++++++++++++++++++++
 tests/test-mongoc-command-monitoring.c      |   9 ++-
 7 files changed, 216 insertions(+), 19 deletions(-)

commit ef415279593a40337fa42b2f916b89f13562bc57
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 5 15:57:50 2016 -0500

    CDRIVER-994 ignore keys in array-matching tests

 tests/test-conveniences.c | 24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)

commit 53f408fe7811973d85d33c284f854e433075f239
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 4 15:30:56 2016 -0500

    CDRIVER-769 no read prefs in command-started event

 src/mongoc/mongoc-apm-private.h   | 12 +++++++-
 src/mongoc/mongoc-apm.c           | 59 +++++++++++++++++++++++++++++++++++++--
 src/mongoc/mongoc-cluster.c       |  2 ++
 src/mongoc/mongoc-write-command.c |  1 +
 4 files changed, 71 insertions(+), 3 deletions(-)

commit dfe8d6e48bb10bceee0284e36b896aa63ffd570f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 4 15:30:03 2016 -0500

    CDRIVER-769 add init fns to mongoc-apm-private.h

 src/mongoc/mongoc-apm-private.h | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit b9bda8b37253ba4e6ec85271a4782a87796fe625
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 4 12:14:08 2016 -0500

    CDRIVER-769 fix APM tests for replica sets

 tests/test-mongoc-command-monitoring.c | 35 ++++++++++++++++++++++++++--------
 1 file changed, 27 insertions(+), 8 deletions(-)

commit 75da27949c6ef731c4523ccc3c29e679b20327f7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Feb 4 11:10:01 2016 -0500

    CDRIVER-769 refactor write command option formatting

 src/mongoc/mongoc-write-command.c | 68 ++++++++++++++++++++++-----------------
 1 file changed, 39 insertions(+), 29 deletions(-)

commit 1bb4905ac66fb6765aeedcb82926a0fe583158b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 21:03:45 2016 -0500

    CDRIVER-769 command-failed event's error is const

 src/mongoc/mongoc-apm-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 94080b9b031ec160b783b7f1932a9ed1d226f022
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 21:03:20 2016 -0500

    CDRIVER-769 APM event initializers

 src/mongoc/mongoc-apm-private.h   | 11 +++++++
 src/mongoc/mongoc-apm.c           | 67 +++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-cluster.c       | 22 ++++++-------
 src/mongoc/mongoc-write-command.c | 26 +++++++--------
 4 files changed, 101 insertions(+), 25 deletions(-)

commit f4830144f22dbb221e0c7d140e763404ae47f41e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 16:22:35 2016 -0500

    CDRIVER-769 request and op ids for APM
    
    Also upconvert legacy writes to commands.

 src/mongoc/mongoc-apm-private.h            |   3 +
 src/mongoc/mongoc-apm.c                    |  24 +++++++
 src/mongoc/mongoc-bulk-operation-private.h |   1 +
 src/mongoc/mongoc-bulk-operation.c         |  15 +++--
 src/mongoc/mongoc-client.c                 |   2 +-
 src/mongoc/mongoc-cluster-private.h        |   1 +
 src/mongoc/mongoc-cluster.c                |  22 +++---
 src/mongoc/mongoc-collection.c             |  14 ++--
 src/mongoc/mongoc-cursor.c                 |   4 +-
 src/mongoc/mongoc-write-command-private.h  |   8 ++-
 src/mongoc/mongoc-write-command.c          | 103 +++++++++++++++++++++++++----
 tests/test-mongoc-command-monitoring.c     |  81 +++++++++++++++--------
 tests/test-write-commands.c                |   7 +-
 13 files changed, 217 insertions(+), 68 deletions(-)

commit 9ba27f262e19a111ca96ee4a7cace77e4402109e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 16:13:25 2016 -0500

    mongoc_client_t.request_id is unused

 src/mongoc/mongoc-client-private.h | 1 -
 src/mongoc/mongoc-client.c         | 1 -
 2 files changed, 2 deletions(-)

commit 63b0a24af76304bde91b22072e84cded9eba2c3d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 09:14:29 2016 -0500

    CDRIVER-769 skip APM tests for some server versions

 tests/test-mongoc-command-monitoring.c | 31 +++++++++++++++++--------------
 1 file changed, 17 insertions(+), 14 deletions(-)

commit da6563d69498e8ab1de0f6341f9140b762f3fe47
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 09:13:29 2016 -0500

    CDRIVER-769 fix "getMore" reporting

 src/mongoc/mongoc-cursor.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 6304d77c40a49e6e33ecb0797adfacd16dad1555
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 15 16:07:38 2016 -0500

    CDRIVER-769 command-monitoring test for "find" cmd

 tests/json/command_monitoring/find.json |  23 ++---
 tests/test-conveniences.c               |  64 +++++++++++++
 tests/test-conveniences.h               |   9 +-
 tests/test-mongoc-command-monitoring.c  | 155 +++++++++++++++++++++++++++++---
 4 files changed, 226 insertions(+), 25 deletions(-)

commit 674ecfe6986734d1d381de2b160c8da18f8074ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 15 16:06:00 2016 -0500

    CDRIVER-1064 batchSize arg is int64
    
    The driver sends "batchSize" to the server with the wrong BSON type,
    when using find / getMore commands. The server accepts it, but for the
    sake of strict consistency, follow the spec.
    
    No separate test is needed - discovered by Command Monitoring tests.

 src/mongoc/mongoc-cursor-cursorid.c | 2 +-
 src/mongoc/mongoc-cursor.c          | 2 +-
 tests/test-mongoc-collection-find.c | 5 +++--
 3 files changed, 5 insertions(+), 4 deletions(-)

commit c90f5dd561bafca1b5799ded0a494a9ac356a17a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 15 13:01:41 2016 -0500

    way to check if tests run with -d for debug mode

 tests/TestSuite.c | 13 +++++++++++++
 tests/TestSuite.h |  2 ++
 2 files changed, 15 insertions(+)

commit cf17c89830f022bf7f8280adb171f0da8d5c52d2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jan 15 09:39:21 2016 -0500

    abort if a JSON test doesn't parse

 tests/json-test.c | 26 ++++++++++++--------------
 1 file changed, 12 insertions(+), 14 deletions(-)

commit 3c5a24d5cdebc32f455333b80c23236afcb9e56c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 21 08:32:39 2016 -0800

    CDRIVER-769 distribute command-monitoring test files

 tests/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit e1428e82ccc3a21cc4adf4f4ca2f4c4f1cc49316
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 15:37:39 2016 -0500

    CDRIVER-769 command-started events
    
    Not yet reported for legacy opcodes.

 CMakeLists.txt                                |   3 +
 src/mongoc/Makefile.am                        |   2 +
 src/mongoc/mongoc-apm-private.h               |  71 ++++
 src/mongoc/mongoc-apm.c                       | 244 ++++++++++++++
 src/mongoc/mongoc-apm.h                       |  21 +-
 src/mongoc/mongoc-client-pool.c               |  37 ++-
 src/mongoc/mongoc-client-pool.h               |  28 +-
 src/mongoc/mongoc-client-private.h            |   4 +
 src/mongoc/mongoc-client.c                    |  31 +-
 src/mongoc/mongoc-client.h                    |   5 +-
 src/mongoc/mongoc-cluster-private.h           |  28 +-
 src/mongoc/mongoc-cluster.c                   | 165 ++++++++--
 src/mongoc/mongoc-collection.c                |  17 +-
 src/mongoc/mongoc-cursor.c                    |  22 +-
 src/mongoc/mongoc-write-command.c             |   7 +-
 tests/Makefile.am                             |   3 +-
 tests/json/command_monitoring/bulkWrite.json  |  92 ++++++
 tests/json/command_monitoring/command.json    |  90 ++++++
 tests/json/command_monitoring/deleteMany.json |  90 ++++++
 tests/json/command_monitoring/deleteOne.json  |  90 ++++++
 tests/json/command_monitoring/find.json       | 267 +++++++++++++++
 tests/json/command_monitoring/insertMany.json | 109 +++++++
 tests/json/command_monitoring/insertOne.json  |  72 +++++
 tests/json/command_monitoring/updateMany.json | 112 +++++++
 tests/json/command_monitoring/updateOne.json  | 155 +++++++++
 tests/test-libmongoc.c                        |   2 +
 tests/test-mongoc-command-monitoring.c        | 447 ++++++++++++++++++++++++++
 27 files changed, 2126 insertions(+), 88 deletions(-)

commit 096c962fd3d7c5d709edbaa228cfb1c7e199bf8c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 14 21:43:33 2016 -0500

    bson helpers for tests

 tests/test-conveniences.c | 160 ++++++++++++++++++++++++++++++++++++++++++++++
 tests/test-conveniences.h |  23 +++++++
 2 files changed, 183 insertions(+)

commit 2f553e4d50dc843d59bc90a00f79a3f834d2cad4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 14 21:43:03 2016 -0500

    add test_framework_get_host_list

 tests/test-libmongoc.c | 27 +++++++++++++++++++++++++++
 tests/test-libmongoc.h |  1 +
 2 files changed, 28 insertions(+)

commit 1b3cfcec001887bffd77e56ce11c544222d055c9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 14 21:42:46 2016 -0500

    combine tests' definitions of realpath

 tests/test-conveniences.h            | 7 +++++++
 tests/test-mongoc-sdam.c             | 5 -----
 tests/test-mongoc-server-selection.c | 5 -----
 3 files changed, 7 insertions(+), 10 deletions(-)

commit 0b5e3ca3d7b26a89cfbaf26708a1064c6baf635d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 14 21:26:01 2016 -0500

    the match_bson() test helper ignores key order

 tests/test-conveniences.c | 28 +++++++++-------------------
 1 file changed, 9 insertions(+), 19 deletions(-)

commit f74514953b8da840890605af7f1163f31dff9f14
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Feb 5 11:35:00 2016 -0500

    CDRIVER-1082 explain bulk op length calculation

 src/mongoc/mongoc-write-command.c | 3 +++
 1 file changed, 3 insertions(+)

commit 5ee0ae30868f2a93fa4bdcd7457ea0ea71ce8aaa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 3 21:18:50 2016 -0500

    CDRIVER-1082 proper bulk op splitting at the margin

 NEWS                              | 12 ++++++++
 src/mongoc/mongoc-write-command.c | 24 ++++++++++-----
 tests/test-bulk.c                 | 61 ++++++++++++++++++++++++++++++++++++++-
 3 files changed, 88 insertions(+), 9 deletions(-)

commit 00290475862ea29c88c2fab2e58d9e6a63e627af
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Feb 3 21:25:34 2016 -0500

    make bulk test functions static

 tests/test-bulk.c | 26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit 6a99aa02c3198b96cf911dcfa3797666469372c0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Feb 1 20:35:47 2016 -0500

    1.3.2 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>
    
    Conflicts:
    	src/libbson

 NEWS             | 15 +++++++++++++++
 VERSION_CURRENT  |  2 +-
 VERSION_RELEASED |  2 +-
 3 files changed, 17 insertions(+), 2 deletions(-)

commit 71e86565c641c72593b064a9759c2932d6eb8e0d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Feb 2 22:04:11 2016 -0500

    CDRIVER-697 stale references to BSON_DISABLE_ASSERT and BSON_DISABLE_CHECKS

 build/autotools/Optimizations.m4 |  4 ----
 src/Makefile.am                  |  5 -----
 src/mongoc/mongoc-gridfs.c       | 10 +++-------
 tests/mongoc-tests.h             | 11 -----------
 4 files changed, 3 insertions(+), 27 deletions(-)

commit 07ee7cf6f6e0b0695bef5b69c6fbdda6b13e426e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jan 31 16:25:19 2016 -0500

    CDRIVER-1079 network err from command resets server

 src/mongoc/mongoc-client.c          |   2 +
 src/mongoc/mongoc-cluster-private.h |   2 +
 src/mongoc/mongoc-cluster.c         |  33 +++--
 src/mongoc/mongoc-collection.c      |   2 +
 src/mongoc/mongoc-cursor.c          |   1 +
 src/mongoc/mongoc-write-command.c   |   4 +-
 tests/TestSuite.h                   |  11 ++
 tests/test-mongoc-cluster.c         | 265 ++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-collection-find.c |  89 +++++++++++-
 9 files changed, 395 insertions(+), 14 deletions(-)

commit 5f0720ed19cdeebf170e50fbef39f5f6d81de6db
Merge: c1f5b7e d42ef14
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 27 13:28:27 2016 -0800

    Merge remote-tracking branch 'upstream/r1.3'
    
    * upstream/r1.3:
      CDRIVER-1054: Support negative cursor limit
      post-release bump
      1.3.1 Release
      CDRIVER-1052: update NEWS
      Fix CDRIVER-1052: CMakeLists.txt build is incomplete
      CDRIVER-1031 gridfs inherits client config

commit c1f5b7ed20fe03e006d029343d4a52f3bb6f096c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jan 27 13:20:13 2016 -0800

    CDRIVER-667: yelp-build is now available on this host

 .mci.yml | 2 --
 1 file changed, 2 deletions(-)

commit d42ef14854895f02054d95a25fe7e12dfdb327d8
Merge: ab08255 f8802e3
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Jan 26 21:05:09 2016 -0500

    Merge pull request #310 from jmikola/cdriver-1054
    
    CDRIVER-1054: Support negative cursor limit

commit f8802e35c6dbabc5bf40620c9402f21f7d65ed5b
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Jan 26 16:09:19 2016 -0500

    CDRIVER-1054: Support negative cursor limit
    
    This adds internal support for specifying a negative cursor limit (i.e. single-batch mode) for both OP_QUERY and find command code paths. Note that this does not change the public API, which will be handled for 2.0 by CDRIVER-1053.

 src/mongoc/mongoc-cursor-private.h  |  4 ++--
 src/mongoc/mongoc-cursor.c          | 12 +++++++++---
 tests/test-mongoc-collection-find.c | 21 +++++++++++++++++++--
 3 files changed, 30 insertions(+), 7 deletions(-)

commit acb75867bfbfa5b0f16f8e77884f9420454bcf99
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 26 09:55:14 2016 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cbad0acc37f7858c750991fc0559362f5809d2c7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 25 18:15:33 2016 -0500

    CDRIVER-1031 mongoc_database_get_collection inherits config
    
    Copy write concern, read concern, and read preference from database, not from the client.

 NEWS                         |  6 ++++++
 src/mongoc/mongoc-database.c |  5 +++--
 tests/TestSuite.h            |  1 +
 tests/test-mongoc-database.c | 45 ++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 55 insertions(+), 2 deletions(-)

commit ab08255b5e636bfab5bc2a8adeee1dcdfbccf72e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 18 11:50:45 2016 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 586ad07023b8ecf4bf37bdd991aa26d9cc32b168
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 18 10:58:32 2016 -0500

    1.3.1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS             | 13 ++++++++++++-
 VERSION_CURRENT  |  2 +-
 VERSION_RELEASED |  2 +-
 src/libbson      |  2 +-
 4 files changed, 15 insertions(+), 4 deletions(-)

commit 3ef2137fb77040591a9e1ea7c294f3292ba0cbf1
Author: Jean-Bernard Jansen <jeanbernard@jansen.fr>
Date:   Mon Dec 14 11:23:10 2015 +0100

    Fix CDRIVER-1052: CMakeLists.txt build is incomplete
    
    - Add installation of a header file
    - Add installation of pkg-config files

 CMakeLists.txt | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)

commit f918fa43759be50d6901bf5b28548c3f135fde3a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jan 14 13:35:21 2016 -0800

    CDRIVER-1052: update NEWS

 NEWS | 6 ++++++
 1 file changed, 6 insertions(+)

commit ae550197df66e03d1199224e1edec4c635d3a872
Author: Jean-Bernard Jansen <jeanbernard@jansen.fr>
Date:   Mon Dec 14 11:23:10 2015 +0100

    Fix CDRIVER-1052: CMakeLists.txt build is incomplete
    
    - Add installation of a header file
    - Add installation of pkg-config files

 CMakeLists.txt | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)

commit d2ec937364876ac0d4cfb2136ebde2753f0d4bbe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 09:11:00 2016 -0500

    CDRIVER-1031 gridfs inherits client config

 NEWS                       | 11 +++++++++++
 src/mongoc/mongoc-gridfs.c | 13 +++++++++++--
 2 files changed, 22 insertions(+), 2 deletions(-)

commit 3a49da4e7f687e3e2e7f190b9d3120765abc09ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 09:11:00 2016 -0500

    CDRIVER-1031 gridfs inherits client config

 NEWS                       | 11 +++++++++++
 src/mongoc/mongoc-gridfs.c | 13 +++++++++++--
 2 files changed, 22 insertions(+), 2 deletions(-)

commit 1840cc8bf273aabae4f0f570a1284519aa69b9fe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 09:10:45 2016 -0500

    CDRIVER-1031 check gridfs inherits client config

 build/generate-future-functions.py   |  11 ++++
 tests/mock_server/future-functions.c |  81 +++++++++++++++++++++++
 tests/mock_server/future-functions.h |  17 +++++
 tests/test-mongoc-gridfs.c           | 120 +++++++++++++++++++++++++++++++++++
 4 files changed, 229 insertions(+)

commit 406b372d85e698a039f5cef592336c31db9c5d95
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 09:12:14 2016 -0500

    Add mock_server_replies_ok_and_destroys().
    
    More convenient way to send default response.

 tests/mock_server/mock-server.c | 24 ++++++++++++++++++++++++
 tests/mock_server/mock-server.h |  2 ++
 2 files changed, 26 insertions(+)

commit 90e7e9a91f551656417fe6218e0672e4e4f5139a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 09:12:08 2016 -0500

    compiler warning in mock server

 tests/mock_server/mock-server.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c494ee8c0ee5f1d5fb2819d8ec907a78c2807970
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jan 12 09:11:53 2016 -0500

    mock server interprets NULL response as "{}"
    
    mock_server_replies_simple (request, NULL) is now a convenient way to respond
    with {} to the client.

 tests/mock_server/mock-server.c | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 34c2eb24bca0bbc04ad3f779713bee35a4f95d8e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 3 11:45:01 2015 -0500

    CDRIVER-769 start APM interface

 CMakeLists.txt          |   1 +
 src/mongoc/Makefile.am  |   1 +
 src/mongoc/mongoc-apm.h | 147 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc.h     |   1 +
 4 files changed, 150 insertions(+)

commit 63d6fc1b914fbc03d4233278aaea3704e3521cd7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jan 4 11:05:58 2016 -0500

    string(CONCAT) not supported by all CMake versions

 build/cmake/LoadVersion.cmake | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a21bcfbafd14d6645c8d44683e5105bfc9195744
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 23 17:53:25 2015 -0600

    CDRIVER-1056 use setversion to detect stale primary

 src/mongoc/mongoc-server-description-private.h     | 10 ++++
 src/mongoc/mongoc-server-description.c             | 43 ++++++++++++++++
 src/mongoc/mongoc-topology-description-private.h   |  1 +
 src/mongoc/mongoc-topology-description.c           | 59 ++++++++++++++++++++--
 .../rs/equal_electionids.json                      |  8 ++-
 .../rs/new_primary_new_electionid.json             | 14 +++--
 .../rs/null_election_id.json                       | 16 ++++--
 .../rs/primary_disconnect_electionid.json          | 53 +++++++++++++++++--
 tests/test-mongoc-sdam.c                           |  8 +++
 9 files changed, 193 insertions(+), 19 deletions(-)

commit 998dd42da2db1f1e61dc02ce8dd5d06fa6130ee9
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 15 12:42:22 2015 -0800

    CDRIVER-667: make dist on Evergreen
    
    A dedicated task that creates a full release archive by running `make
    dist`, once.
    This archive is then uploaded as an artifact for the subsequent compile
    and test tasks for the rest of the variants.
    Note that all compile steps now depend on this task.

 .mci.yml    | 72 +++++++++++++++++++++++++++++++++++++++++++++++++++++++------
 Makefile.am |  2 ++
 2 files changed, 67 insertions(+), 7 deletions(-)

commit f48f148450c961f28e5836a038ace39bbcca0f57
Merge: 160ce92 6200b49
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Mon Dec 21 11:31:14 2015 -0800

    Merge pull request #305 from christopherjwang/mongoc_index_opt_t_page_404
    
    CDRIVER-889 add https:// to docs.mongodb.org/manual/reference/command

commit 6200b496f503216e2376c484172e46bb1f63392e
Author: Christopher Wang <christopher.j.wang@gmail.com>
Date:   Sun Dec 20 22:35:25 2015 -0600

    CDRIVER-889 add https:// to docs.mongodb.org/manual/reference/command/createIndexes/ to prevent 404

 doc/mongoc_index_opt_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 160ce921a7020e2384035a8609e0435607eb0b51
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 14 13:25:08 2015 -0800

    CDRIVER-1050: Compile against newer cyrus-sasl on Solaris
    
    This fixes shutodwn issues after running the tests, causing the build
    to fail

 .mci.yml | 35 +++++++++++++++++++++++++++++++++--
 1 file changed, 33 insertions(+), 2 deletions(-)

commit 3484d7d5bcf83a6bc1c3a5155365d8f226b00aa3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 14 13:24:16 2015 -0800

    CDRIVER-1049: SASL_LIBS overwritten by pkg-config

 build/autotools/CheckSasl.m4 | 2 --
 1 file changed, 2 deletions(-)

commit e99ccad3f7c14d41157ee347c3e6c6ecbe3e8f2f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 9 23:04:25 2015 -0500

    more info when ssl or topology tests fail

 tests/ssl-test.c             | 6 +++++-
 tests/test-mongoc-topology.c | 6 +++---
 2 files changed, 8 insertions(+), 4 deletions(-)

commit a530dd8f99f545043105b4e9249407e9d3c4463b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 9 23:03:46 2015 -0500

    CDRIVER-861 orchestration listens on 127.0.0.1

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit bc3d24f7ef2cc53dd1079dda12db69d031e468c7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 9 23:03:19 2015 -0500

    CDRIVER-861 don't taskkill before tests on windows

 .mci.yml | 3 ---
 1 file changed, 3 deletions(-)

commit 1f4b56e740abead89f832f37548a93b1fa8df4d9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 10 09:34:18 2015 -0500

    CDRIVER-992 link to server getMore command doc

 doc/mongoc_cursor_set_max_await_time_ms.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4039c286539fc9150f90c10baef3ca3598c50e56
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Dec 9 15:28:07 2015 -0500

    CDRIVER-1046: Free BSON reader before new assignment

 src/mongoc/mongoc-cursor.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit fed413d82f68fdefcee3d6e431d7ee7877a93508
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Dec 9 15:48:58 2015 -0800

    Fix yml syntax

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da87fdcdaaa8a06b07133362ff5cdb046645c7c5
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Dec 9 10:02:30 2015 -0800

    CDRIVER-669: Turn compiler warnings into errors for GCC on Evergreen

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7bc1385830c1158a7666c84866d9824deb41be68
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Dec 9 10:01:38 2015 -0800

    Properly export the defined CFLAGS

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit ed040975a9924deb621d7529a6973c8ebade5d63
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 9 08:44:20 2015 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6e6c0398262375b8552ac0abe27e730b27bb8347
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 8 21:48:11 2015 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3be56c8f5a008e1732dd19a64ad42af56545eadd
Merge: 5cc566e a252f20
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Dec 8 21:22:56 2015 -0500

    Merge pull request #302 from jeroenooms/strnlen-fix
    
    use bson_strnlen when strnlen is not available

commit 5cc566e74c6dad35aae600975ff74fd4f93cadbb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 8 14:54:12 2015 -0500

    CDRIVER-1039 distribute mallard2man.py

 doc/man/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit a252f20757c573304b82e48f2d2d27114d4ae710
Author: Jeroen Ooms <jeroenooms@gmail.com>
Date:   Tue Dec 8 18:55:34 2015 +0100

    use bson_strnlen when strnlen is not available

 src/mongoc/mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8abbfbfd351ffb983e8503a882f8f7151dea3089
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 7 20:45:10 2015 -0500

    typos in NEWS

 NEWS | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9b229941c5291548511bea1ec61cdeafc6493d82
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 7 20:43:24 2015 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c025e394f235180ba512deab2968d684d7bb9888
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 7 20:24:35 2015 -0500

    1.3.0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 VERSION_CURRENT  | 2 +-
 VERSION_RELEASED | 2 +-
 src/libbson      | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 72a65e9c1d76c255ef74ebdeb5401de4eff76e65
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 7 20:24:08 2015 -0500

    NEWS for 1.3.0

 NEWS | 112 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 111 insertions(+), 1 deletion(-)

commit 0981badb06da019b03815480741ad8c7bb685d57
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 7 19:29:17 2015 -0500

    NEWS file format

 NEWS | 824 +++++++++++++++++++++++++++++++++----------------------------------
 1 file changed, 412 insertions(+), 412 deletions(-)

commit c0d7b7cebd84d2ea7cf76622af280d8dcf620f23
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Dec 7 15:53:33 2015 -0800

    Destroy the mock_server after the test
    
    This fixes odd and quirky and unrelated test failures on Windows \o/

 tests/test-mongoc-find-and-modify.c | 2 ++
 1 file changed, 2 insertions(+)

commit 7583925ec6c4b58b1fd16bea2a0ecbd95cfaf749
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 7 14:03:45 2015 -0500

    CDRIVER-1038 fix cursor for big-endian
    
    Bug in unreleased 1.3.0 code, caused by misinterpreting little-endian
    wire protocol header data. Introduced during my cursor refactoring for
    find and getMore commands in MongoDB 3.2.

 src/mongoc/mongoc-cursor.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a91267c3cb4406686fb42d54252d866a94377d97
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Dec 4 15:13:00 2015 -0800

    CDRIVER-1032: Fix Windows build

 src/mongoc/mongoc-host-list.c | 2 ++
 src/mongoc/mongoc-uri.c       | 3 +++
 2 files changed, 5 insertions(+)

commit 21fb47b056c9e75bb21f72080747944784bd0dd5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 3 15:28:26 2015 -0500

    CDRIVER-1030 document mongoc_host_list_t

 doc/mongoc_cursor_get_host.page         |  2 +-
 doc/mongoc_host_list_t.page             | 37 +++++++++++++++++++++++++++++++++
 doc/mongoc_server_description_host.page |  2 +-
 doc/mongoc_uri_get_hosts.page           |  4 ++--
 4 files changed, 41 insertions(+), 4 deletions(-)

commit 4510ce2e30a9ffe9cb6dfa4907ff8a6aa7ede8f9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Dec 3 15:36:03 2015 -0500

    CDRIVER-1032 move host-list fns to private header

 src/mongoc/mongoc-host-list-private.h |  4 ++++
 src/mongoc/mongoc-host-list.c         | 13 ++++++-------
 src/mongoc/mongoc-host-list.h         |  5 -----
 src/mongoc/mongoc-topology-scanner.c  |  3 ++-
 src/mongoc/mongoc-uri.c               |  3 +--
 5 files changed, 13 insertions(+), 15 deletions(-)

commit c3f15ee77183dbe1d59a174b5133b70d3af7fced
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Dec 4 11:28:44 2015 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1cadecd0b1bb0c3158acb0c1292c20fdfd2fd26c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Dec 4 10:47:56 2015 -0800

    MSVC: void (__cdecl *)()' differs in parameter lists from 'TestFunc'

 tests/test-bulk.c | 40 ++++++++++++++++++++--------------------
 1 file changed, 20 insertions(+), 20 deletions(-)

commit c376e0d48c11ee473449196dc700a06b13c60b39
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Dec 4 10:47:07 2015 -0800

    CDRIVER-669: Clang found unused function '_mongoc_read_concern_warn_frozen' [-Wunused-function]

 src/mongoc/mongoc-read-concern.c | 7 -------
 1 file changed, 7 deletions(-)

commit 33ca34105dd30e1ef2ec42ad1f47a40d509e3b32
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 3 16:26:25 2015 -0800

    CDRIVER-643: Fix 'format %ld expects argument of type long int, but argument 5 has type ssize_t'

 tests/TestSuite.h          |  2 ++
 tests/test-mongoc-gridfs.c | 32 +++++++++++++++++---------------
 2 files changed, 19 insertions(+), 15 deletions(-)

commit 38ae108cdac209008f8f25c2d6847e1aa90beea0
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 3 16:25:48 2015 -0800

    CDRIVER-643: Fix test_mongoc_tls_hangup defined but not used

 tests/test-mongoc-stream-tls-error.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 799bc15fecb9a82316049ec3fcf41953a8a78f03
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 3 16:24:59 2015 -0800

    CDRIVER-643: Fix 'control reaches end of non-void function'

 examples/find_and_modify_with_opts/fam.c |  2 ++
 tests/test-mongoc-server-selection.c     | 12 +++++++-----
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 714db7bc00e3938fda1716f440ccf89988dfb3da
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 3 16:23:09 2015 -0800

    CDRIVER-643: Fix 'missing braces around initializer'

 src/mongoc/mongoc-server-description.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit de9547a6bf22325815cf5ab403375efd2765d6e4
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 3 16:09:54 2015 -0800

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e894a547bffcc8001f2d609dfa2147c449083a73
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Dec 3 12:08:18 2015 -0800

    CDRIVER-1027: Simplify version declaration
    
    Also remove unused BSON_LT_LDFLAGS variable that was never
    substituted, and therefore always empty.

 build/autotools/Versions.m4 | 92 ++++++++++++++++-----------------------------
 configure.ac                |  5 ---
 src/Makefile.am             |  1 -
 3 files changed, 33 insertions(+), 65 deletions(-)

commit 984bcdc13fb9cd81633098bad0d5fe8a6458ce55
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 2 11:26:25 2015 -0500

    post-release bump

 VERSION_CURRENT | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 18a232a3b4bbce8ce0a22e01c2c93354e537fd8e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 2 10:57:13 2015 -0500

    1.3.0-rc0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 NEWS            | 68 ++++++++++++++++++++++++++++++++++++++++++---------------
 VERSION_CURRENT |  2 +-
 src/libbson     |  2 +-
 3 files changed, 52 insertions(+), 20 deletions(-)

commit c268e24e7828f90edd56fee7f8319885d7bfbef1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 2 11:20:05 2015 -0500

    CDRIVER-1008 distribute findAndModify examples

 examples/Makefile.am | 7 +++++++
 1 file changed, 7 insertions(+)

commit a787c73a7cca436e2e945c3a578000a37bbac9bb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 2 09:40:26 2015 -0500

    CDRIVER-987 link to "explain" command doc

 doc/mongoc_collection_find.page | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 4839021d589f8948cbfac3a5bc795a79c980237d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Dec 2 09:26:56 2015 -0500

    CDRIVER-987 link to "find" command doc

 doc/mongoc_collection_find.page | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 86bb932cc095ed02ee385f8214fdbed7dca365ee
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 1 20:27:38 2015 -0500

    CDRIVER-942 docs for copy_collection and copy_database

 doc/mongoc_collection_copy.page | 39 +++++++++++++++++++++++++++++++++++++++
 doc/mongoc_database_copy.page   | 39 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 78 insertions(+)

commit 729a3891259e56da44dfec012c496444cee030ae
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Dec 1 17:18:17 2015 -0500

    update NEWS for 1.3.0

 NEWS | 24 +++++++++++++-----------
 1 file changed, 13 insertions(+), 11 deletions(-)

commit 3428ab8bff230e3b6e493b3ac4e2a5b355f18084
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 30 14:39:12 2015 -0500

    merge 1.2.2 release notes

 NEWS             | 16 ++++++++++++----
 VERSION_RELEASED |  2 +-
 2 files changed, 13 insertions(+), 5 deletions(-)

commit 3473d5256db7fe23c11ceaa812378411f4a0314f
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 1 14:32:38 2015 -0800

    CDRIVER-1024: bypassDocumentValidation test fails
    
    This issue has been fixed in currently nightlies (and RC5)
    
    Revert "skip bypassValidation test with auth"
    
    This reverts commit 94915175b364418284880952cfe0926344997334.

 tests/test-write-commands.c | 17 ++---------------
 1 file changed, 2 insertions(+), 15 deletions(-)

commit e9863ec1c2ec4c6abd6651f489fb2578e9dcc53d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 1 11:04:44 2015 -0800

    Improve skip-if for topology variations

 tests/test-libmongoc.c | 30 ++++++++++++++++++++++++------
 tests/test-libmongoc.h |  3 +++
 2 files changed, 27 insertions(+), 6 deletions(-)

commit dbb2584f2a2c7ce0ef91d36f186fe2d9824305fa
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 25 15:22:43 2015 -0800

    CDRIVER-991: findAndModify + WriteConcernError should populate error

 src/mongoc/mongoc-collection.c      | 25 +++++++++++++-
 tests/test-mongoc-find-and-modify.c | 66 +++++++++++++++++++++++++++++++++++++
 2 files changed, 90 insertions(+), 1 deletion(-)

commit 60f55699cbbcf34acfb0a092340fa04cb72d54d1
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 1 10:50:21 2015 -0800

    CDRIVER-1026: Memory leak on get_more using 3.2 commands

 src/mongoc/mongoc-cursor-cursorid.c | 1 +
 1 file changed, 1 insertion(+)

commit 35708dddef1ec3ee57838d37001a6efc9586774a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 30 17:55:18 2015 -0500

    CDRIVER-636 use electionId to detect stale primaries

 src/mongoc/mongoc-server-description-private.h     |   7 +
 src/mongoc/mongoc-server-description.c             |  64 ++++++--
 src/mongoc/mongoc-topology-description-private.h   |   1 +
 src/mongoc/mongoc-topology-description.c           |  62 +++++++-
 tests/TestSuite.h                                  |  16 ++
 .../rs/equal_electionids.json                      |  58 +++++++
 .../rs/new_primary_new_electionid.json             | 117 +++++++++++++++
 .../rs/null_election_id.json                       | 166 +++++++++++++++++++++
 .../rs/primary_disconnect_electionid.json          | 154 +++++++++++++++++++
 tests/test-mongoc-sdam.c                           |  11 ++
 10 files changed, 643 insertions(+), 13 deletions(-)

commit 7574f231195781efbd1899b2239c15001cedab2b
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Dec 1 10:14:57 2015 -0800

    Typo

 doc/mongoc_find_and_modify_opts_set_update.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52dcaa1f283dbb399273667efaa196b2b58d9064
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 25 14:05:27 2015 -0800

    CDRIVER-1008: Document mongoc_collection_find_and_modify_with_opts

 .gitignore                                         |   1 +
 ...ongoc_collection_find_and_modify_with_opts.page |  55 +++++++++
 doc/mongoc_find_and_modify_opts_destroy.page       |  30 +++++
 doc/mongoc_find_and_modify_opts_new.page           |  24 ++++
 ...modify_opts_set_bypass_document_validation.page |  66 +++++++++++
 doc/mongoc_find_and_modify_opts_set_fields.page    |  59 +++++++++
 doc/mongoc_find_and_modify_opts_set_flags.page     |  73 ++++++++++++
 doc/mongoc_find_and_modify_opts_set_sort.page      |  65 ++++++++++
 doc/mongoc_find_and_modify_opts_set_update.page    |  64 ++++++++++
 doc/mongoc_find_and_modify_opts_t.page             | 132 +++++++++++++++++++++
 examples/Makefile.am                               |   5 +
 examples/find_and_modify_with_opts/bypass.c        |  43 +++++++
 examples/find_and_modify_with_opts/fam.c           |  41 +++++++
 examples/find_and_modify_with_opts/fields.c        |  48 ++++++++
 examples/find_and_modify_with_opts/flags.c         |  47 ++++++++
 examples/find_and_modify_with_opts/sort.c          |  45 +++++++
 examples/find_and_modify_with_opts/update.c        |  44 +++++++
 tests/test-mongoc-find-and-modify.c                |  92 ++++++++++++++
 18 files changed, 934 insertions(+)

commit 1e98e4f7d4af96b6a85d97b6b3d8bad85c609f99
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 30 13:17:44 2015 -0800

    That repo is dead, and the docs are outdated

 doc/tutorial.page | 4 ----
 1 file changed, 4 deletions(-)

commit 0fc38bcf85c3471384ca1be662c4bff844d2af27
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 14:03:18 2015 -0800

    CDRIVER-1023: find results can be more then 16mb

 src/mongoc/mongoc-async-cmd.c | 3 ++-
 src/mongoc/mongoc-cluster.c   | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 885180b564091fd565cdfe384314dd99d0989d88
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 13:45:48 2015 -0800

    CDRIVER-1023: Make sure we can read what we wrote

 tests/test-bulk.c | 72 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 72 insertions(+)

commit b57be13ba832d4ad93737b98690cfe3d0bd90fc2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 30 17:55:18 2015 -0500

    CDRIVER-1021 standard SDAM tests for isMaster.me

 .../rs/primary_mismatched_me.json                  | 37 ++++++++++++
 .../rs/primary_to_no_primary_mismatched_me.json    | 68 ++++++++++++++++++++++
 .../rs/secondary_mismatched_me.json                | 37 ++++++++++++
 3 files changed, 142 insertions(+)

commit a4a1660bded428a6de3c346d18eda03ec557bed4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 24 21:47:40 2015 -0500

    CDRIVER-707 legacy writes handle writeConcern errs

 src/mongoc/mongoc-error.h         |  2 +
 src/mongoc/mongoc-write-command.c | 98 ++++++++++++++++++++++++++++++---------
 tests/test-bulk.c                 | 47 ++++++++++++-------
 3 files changed, 108 insertions(+), 39 deletions(-)

commit 8c6b46cb5b5ea5e7986b30af8034b9ee9da05e05
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 19:12:08 2015 -0500

    CDRIVER-840 test exhaust cursor errs

 tests/test-mongoc-exhaust.c | 189 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 189 insertions(+)

commit b160838d0d7350a8ca873cea2695941abef125a3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 19:11:26 2015 -0500

    CDRIVER-840 adapt mock server for exhaust cursor

 tests/mock_server/mock-server.c | 48 ++++++++++++++++++++++++++++++++++++++++-
 tests/mock_server/mock-server.h |  5 +++++
 2 files changed, 52 insertions(+), 1 deletion(-)

commit a0390638fbb063085d4f7d1740931f0990b42d81
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 17:12:47 2015 -0500

    CDRIVER-840 test large exhaust query

 tests/test-mongoc-exhaust.c | 51 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 51 insertions(+)

commit ac8e9a578cc89f6a5b125d5467af3529fc965971
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 30 14:14:09 2015 -0500

    CDRIVER-1013 distribute LoadVersion.cmake

 build/cmake/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 8ccd0b24ee27678b7d65432c2d28916fe846df69
Merge: a556f6b 58fafba
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Nov 30 11:33:02 2015 -0500

    Merge pull request #301 from flaviommedeiros/master
    
    Refactoring conditional directives that break statements.

commit 58fafbaed9c6defdc606c4c2af379716ed639555
Author: Flavio Medeiros <flaviomotamedeiros@gmail.com>
Date:   Sun Nov 29 16:06:18 2015 -0300

    Refactoring conditional directives that break statements.

 src/mongoc/mongoc-log.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit a556f6b918dc9aabdee4287d2652e644ef8cf900
Merge: ceef394 e9c97ce
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Nov 26 14:11:23 2015 -0500

    Merge pull request #254 from canella/master
    
    Removed memory leak in function mongoc_database_has_collection

commit ceef3944b3f65783bc2c82e0b1134a34eb6c9550
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 25 14:11:02 2015 -0800

    infectious copy&paste typo

 doc/mongoc_collection_aggregate.page       | 2 +-
 doc/mongoc_collection_count.page           | 2 +-
 doc/mongoc_collection_count_with_opts.page | 2 +-
 doc/mongoc_collection_find_and_modify.page | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit 8ca1881e10f3546c2185a903d5e4aa70b8102282
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 25 10:29:42 2015 -0800

    Attempt to gracefully stop running mongo-orchestration on startup

 .mci.yml | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 4629bcbfdcfcea93ccc40151ea09a7c162ab05c1
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 24 15:34:02 2015 -0800

    CDRIVER-1011: Document helpers that automatically apply writeConcern

 doc/mongoc_collection_find_and_modify.page | 1 +
 1 file changed, 1 insertion(+)

commit e3dc3bc33acae403178d9fa2f1f27f91325e5151
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 24 15:33:38 2015 -0800

    CDRIVER-1010: Document helpers that automatically apply readConcern

 doc/mongoc_collection_aggregate.page       | 1 +
 doc/mongoc_collection_count.page           | 1 +
 doc/mongoc_collection_count_with_opts.page | 1 +
 3 files changed, 3 insertions(+)

commit b2ef614a8ac57588c0a80e4648874abaa66584bc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 12:12:54 2015 -0500

    delete prior mongo-orchestration pidfile

 .mci.yml | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

commit 94915175b364418284880952cfe0926344997334
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 11:30:15 2015 -0500

    skip bypassValidation test with auth
    
    Until SERVER-21659 is fixed in MongoDB 3.2 GA.

 tests/test-write-commands.c | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit c439b6bf7d6bb9143490a9a5c016bbca3809479d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 11:28:22 2015 -0500

    CDRIVER-1013 ignore mongoc_version.page
    
    Mis-copy from libbson. mongoc has mongoc_version.page not version.page.

 doc/.gitignore | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 40e9e9541f9317df573fbe2033cbea68f70ccb52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 25 09:43:06 2015 -0500

    delete commented code from CMakeLists

 CMakeLists.txt | 4 ----
 1 file changed, 4 deletions(-)

commit 7030209a54ecb7e7972735ebe8ded2a909b0f720
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 20 19:17:55 2015 -0500

    CDRIVER-1014 cmake options: SSL, SASL, tests, examples
    
    Add options ENABLE_SSL, ENABLE_SASL, ENABLE_TESTS, and ENABLE_EXAMPLES
    to CMakeLists.

 .mci.yml                    | 15 +++----
 CMakeLists.txt              | 98 ++++++++++++++++++++++++++-------------------
 build/cmake/FindSASL2.cmake |  4 +-
 doc/installing.page.in      |  1 +
 4 files changed, 67 insertions(+), 51 deletions(-)

commit 42c0f731d02691de7359c13b1a0a64e63c3f4621
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 24 22:31:24 2015 -0500

    Revert "try 5 times to start mongo-orchestration"
    
    8404048cf751df1c01e8f64867ebd4d86064f3e6

 .mci.yml | 22 +++++-----------------
 1 file changed, 5 insertions(+), 17 deletions(-)

commit e257bb3b2bcfe9b95fef04e25e8581596dd462ac
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 24 15:27:31 2015 -0800

    Fix function name, and build

 doc/mongoc_collection_count_with_opts.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e8ac5e3447e4737dfec249eb5b8b8540707386d4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 20 18:31:52 2015 -0500

    CDRIVER-1013 declare mongoc version in one place
    
    Also fix logic for setting maintainer_flags_default.

 .gitignore                                  |   1 -
 CMakeLists.txt                              |  19 ++-
 Makefile.am                                 |   4 +-
 VERSION_CURRENT                             |   1 +
 VERSION_RELEASED                            |   1 +
 build/autotools/PrintBuildConfiguration.m4  |   2 +-
 build/autotools/ReadCommandLineArguments.m4 |   2 +-
 build/autotools/Versions.m4                 |  78 ++++++++---
 build/cmake/LoadVersion.cmake               |  36 +++++
 configure.ac                                |  18 +--
 doc/.gitignore                              |   2 +
 doc/installing.page                         | 207 ----------------------------
 doc/installing.page.in                      | 207 ++++++++++++++++++++++++++++
 doc/mongoc_version.page                     |  41 ------
 doc/mongoc_version.page.in                  |  41 ++++++
 src/mongoc/mongoc-version.h.in              |   8 ++
 16 files changed, 383 insertions(+), 285 deletions(-)

commit 96387a7f2d496aace5853efb23c4dcf6e2e12be3
Merge: 66df1c4 34f060a
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Nov 24 14:46:45 2015 -0500

    Merge pull request #298 from vleschuk/master
    
    Fix date specfile date format

commit 66df1c416d0e68256b096324825b464ca126c4a5
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 15:04:00 2015 -0800

    CDRIVER-1009: Document mongoc_bulk_operation_set_bypass_document_validation

 ...k_operation_set_bypass_document_validation.page | 34 +++++++++++++++
 examples/bulk/bulk5.c                              | 51 ++++++++++++++++++----
 2 files changed, 76 insertions(+), 9 deletions(-)

commit 0f9c6b3eff547eeb499cfdd8d4a09e10e43fb5de
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 11:17:37 2015 -0800

    CDRIVER-1009: Document how to bypass document validation

 .gitignore            |  1 +
 doc/bulk.page         | 14 +++++++++
 examples/Makefile.am  |  5 +++
 examples/bulk/bulk5.c | 85 +++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 105 insertions(+)

commit 14345318f182f6346bd3ae3ee6698dfdb6b86fc3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 24 12:09:01 2015 -0500

    CDRIVER-1021 remove server with wrong "me"
    
    Server Discovery And Monitoring Spec: "Removal from the topology of
    seed list members where the "me" property does not match the address
    used to connect +prevents clients from being able to select a server,
    only to fail to re-select that server once the primary has responded.

 src/mongoc/mongoc-server-description-private.h |  1 +
 src/mongoc/mongoc-server-description.c         |  4 ++
 src/mongoc/mongoc-topology-description.c       | 42 +++++++++++++++++++
 tests/test-mongoc-client.c                     | 56 ++++++++++++++++++++++++++
 4 files changed, 103 insertions(+)

commit 04ce5d334c304edd4638e6f13873be793069ebe9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 24 11:48:26 2015 -0500

    fix test_get_host for replica sets

 tests/test-mongoc-cursor.c | 24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)

commit 8404048cf751df1c01e8f64867ebd4d86064f3e6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 24 09:33:19 2015 -0500

    try 5 times to start mongo-orchestration

 .mci.yml | 22 +++++++++++++++++-----
 1 file changed, 17 insertions(+), 5 deletions(-)

commit 4f283ad09cd230d4c12de257e94723e887701f6f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 24 09:33:01 2015 -0500

    no priorities in test replica set configs
    
    MongoDB 3.2's fast elections can mean a lower-priority node is briefly
    primary at the beginning of the test suite. Seconds later it steps
    down to let the higher-priority node be elected; whichever test runs
    during the stepdown fails.

 orchestration_configs/replica_sets/auth.json  | 2 --
 orchestration_configs/replica_sets/basic.json | 2 --
 2 files changed, 4 deletions(-)

commit c257db36c9ef7f42ff1f512dabe9c9b99a04906f
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 20:25:31 2015 -0800

    Remove deprecation notice since the matcher was deprecated

 examples/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1f1a114c5daa1fb90948aa528cd7ffacb37a091f
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 11:19:04 2015 -0800

    CDRIVER-946: Remove misguided mongoc_bulk_operation_set_flags

 NEWS                               | 1 -
 build/autotools/versions.ldscript  | 1 -
 build/cmake/libmongoc-ssl.def      | 1 -
 build/cmake/libmongoc.def          | 1 -
 src/libmongoc.symbols              | 1 -
 src/mongoc/mongoc-bulk-operation.c | 9 ---------
 src/mongoc/mongoc-bulk-operation.h | 2 --
 7 files changed, 16 deletions(-)

commit 25090ebefd7503d86a80f1c7b092bd2b4ebcef63
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 13:00:30 2015 -0800

    Rename mongoc_server_stream_t related functions to mongoc_server_stream_*

 src/mongoc/mongoc-cluster.c               |  4 ++--
 src/mongoc/mongoc-server-stream-private.h |  6 +++---
 src/mongoc/mongoc-server-stream.c         | 12 ++++++------
 src/mongoc/mongoc-write-command.c         |  8 ++++----
 4 files changed, 15 insertions(+), 15 deletions(-)

commit 8f65c57b635089ff534a4ba64c82d1460a201d87
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 08:49:29 2015 -0800

    CDRIVER-1016: Fix >= 0 comparison

 src/mongoc/mongoc-gridfs-file.c | 4 ----
 1 file changed, 4 deletions(-)

commit 32fc5ceb7f2fe3d48fe265d081e832e6d6b75ec7
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 15:46:37 2015 -0800

    CDRIVER-1007: Document new read_concern type & functions

 doc/mongoc_client_get_read_concern.page     | 32 +++++++++++++++++++++++
 doc/mongoc_client_set_read_concern.page     | 31 +++++++++++++++++++++++
 doc/mongoc_collection_get_read_concern.page | 37 +++++++++++++++++++++++++++
 doc/mongoc_collection_set_read_concern.page | 35 ++++++++++++++++++++++++++
 doc/mongoc_database_get_read_concern.page   | 35 ++++++++++++++++++++++++++
 doc/mongoc_database_set_read_concern.page   | 34 +++++++++++++++++++++++++
 doc/mongoc_read_concern_copy.page           | 36 ++++++++++++++++++++++++++
 doc/mongoc_read_concern_destroy.page        | 31 +++++++++++++++++++++++
 doc/mongoc_read_concern_get_level.page      | 36 ++++++++++++++++++++++++++
 doc/mongoc_read_concern_new.page            | 25 ++++++++++++++++++
 doc/mongoc_read_concern_set_level.page      | 34 +++++++++++++++++++++++++
 doc/mongoc_read_concern_t.page              | 39 +++++++++++++++++++++++++++++
 doc/mongoc_uri_get_read_concern.page        | 37 +++++++++++++++++++++++++++
 doc/mongoc_uri_t.page                       |  2 +-
 14 files changed, 443 insertions(+), 1 deletion(-)

commit 7c8efa858877258778d9c3c6b8902d630651ac7b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 11:17:14 2015 -0800

    Fix build

 doc/mongoc_collection_find.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd737ad99965188df144a6fc7e609786b3c580ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 04:50:39 2015 -0500

    CDRIVER-759 handle errors with "err" but no "code"

 build/generate-future-functions.py        |  8 +++++
 src/mongoc/mongoc-write-command-private.h |  2 ++
 src/mongoc/mongoc-write-command.c         | 31 ++++++++++++++----
 tests/mock_server/future-functions.c      | 53 +++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h      | 11 +++++++
 tests/test-mongoc-collection.c            | 47 +++++++++++++++++++++++++++
 6 files changed, 146 insertions(+), 6 deletions(-)

commit 9f18053589513ce9e5cddb4119704476b482388a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 22 13:55:53 2015 -0500

    CDRIVER-937 warn about options on pooled clients

 doc/mongoc_client_set_read_prefs.page    | 1 +
 doc/mongoc_client_set_ssl_opts.page      | 1 +
 doc/mongoc_client_set_write_concern.page | 1 +
 3 files changed, 3 insertions(+)

commit ca44056348f99f79537434e80431598f99ebff5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 21 22:12:22 2015 -0500

    CDRIVER-954 deprecate mongoc_matcher_t

 NEWS                            | 2 ++
 doc/matcher.page                | 3 ++-
 doc/mongoc_matcher_destroy.page | 5 +++++
 doc/mongoc_matcher_match.page   | 5 +++++
 doc/mongoc_matcher_new.page     | 5 +++++
 doc/mongoc_matcher_t.page       | 5 +++++
 src/mongoc/mongoc-matcher.h     | 6 +++---
 tests/test-mongoc-matcher.c     | 2 ++
 8 files changed, 29 insertions(+), 4 deletions(-)

commit 76fe4f6d53a534d9d5c8d86d59b90c0b606a3ba2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 03:22:30 2015 -0500

    CDRIVER-1022 $query must be provided with $readPreference

 src/mongoc/mongoc-read-prefs.c | 2 +-
 tests/test-mongoc-read-prefs.c | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit e0a277ee070ea08b58c5b69e9e3265090f0157db
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 04:17:54 2015 -0500

    CDRIVER-970 prohibit "ssl=true" with non-ssl build

 NEWS                            |  8 ++++++++
 src/mongoc/mongoc-client-pool.c |  8 ++++++++
 src/mongoc/mongoc-client.c      |  7 +++++++
 tests/test-mongoc-client-pool.c | 19 +++++++++++++++++++
 tests/test-mongoc-client.c      | 10 ++++++++++
 5 files changed, 52 insertions(+)

commit e357f7812b74e1bfef58e418b94f32360ef62d9d
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 23 08:52:41 2015 -0800

    Enable majority read concern tests on evergreen
    
    Also configure the pidfile location explicitly.
    This could help detecting stale mongo-orchestration daemons

 .mci.yml | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 91a9be0020783f902d55d8179bcbeacfe40cb2a2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 04:52:24 2015 -0500

    don't skip test_large_inserts_ordered
    
    SERVER-21709 is fixed, stop working around it.

 tests/test-bulk.c | 21 +++------------------
 1 file changed, 3 insertions(+), 18 deletions(-)

commit be50225ba03226584eeea2c8865a5528178a262c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 21 08:38:47 2015 -0500

    CDRIVER-1020 ignore hidden secondaries

 src/mongoc/mongoc-server-description.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 32c9cda624b603829c3747406573a6ffef7ac2a2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 21 08:32:39 2015 -0500

    CDRIVER-1002 add RSOther test

 .../rs/rsother_discovered.json                     | 30 +++++++++++++++++++---
 1 file changed, 26 insertions(+), 4 deletions(-)

commit 1f9276cad984d45516ececa484d60809c806cd5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 03:42:56 2015 -0500

    timeout to fetch build artifact in .mci.yml

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 99641754f3d61fadb5f880f8f076e10900827e30
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 03:41:56 2015 -0500

    auth the mongo shell commands in .mci.yml

 .mci.yml | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit df73041e0392e5c2c7fb1d755007d4a1687074a8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 23 03:39:35 2015 -0500

    style fixes

 src/mongoc/mongoc-collection.c |  4 ++--
 src/mongoc/mongoc-database.c   |  6 +++---
 tests/test-bulk.c              | 27 ++++++++++++++-------------
 3 files changed, 19 insertions(+), 18 deletions(-)

commit 12ec167de06efb18240ff62bb319074e4d2f6647
Merge: 5d119ce 50b5519
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Nov 23 10:40:34 2015 -0500

    Merge pull request #297 from Machyne/CDRIVER-942
    
    CDRIVER-942 add copy methods for db and collection

commit 5d119cee7c07a9db892611b90aff32ef353ee8c8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Nov 21 18:33:40 2015 -0500

    bind orchestration server to 0.0.0.0
    
    Seems to be required on Solaris with Mongo Orchestration 0.5, possibly
    a consequence of its new await_connection function:
    
    https://github.com/10gen/mongo-orchestration/commit/17caec

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4c3ba3a173495659f60d5a59eceb39c2089367f7
Merge: cd512ce 321ac11
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Sat Nov 21 15:31:36 2015 -0800

    Merge pull request #299 from christopherjwang/update_manual_link
    
    CDRIVER-882 update link to c driver manual

commit 321ac1114f056a0fc54e6700bfdff0b9ec7921d2
Author: Christopher Wang <christopher.j.wang@gmail.com>
Date:   Sat Nov 21 18:13:36 2015 -0500

    CDRIVER-882 update link to c driver manual

 README.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd512ce367511020e3ce76a783ae54615d8633b3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 23:02:38 2015 -0500

    CDRIVER-869 report missing gridfs chunks

 NEWS                              |  3 ++
 doc/mongoc_gridfs_file_readv.page |  2 +-
 src/mongoc/mongoc-error.h         |  2 ++
 src/mongoc/mongoc-gridfs-file.c   |  9 +++--
 tests/test-mongoc-gridfs.c        | 70 +++++++++++++++++++++++++++++++++++++++
 5 files changed, 83 insertions(+), 3 deletions(-)

commit 7d4dea794f4445740030cbd946a636a126f18820
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 17:01:00 2015 -0500

    CDRIVER-593 duplicate strcasecmp #defines in tests

 tests/mock_server/mock-server.c | 5 -----
 tests/test-conveniences.c       | 5 +----
 tests/test-libmongoc.c          | 6 +-----
 tests/test-mongoc-client.c      | 5 +----
 tests/test-mongoc-sdam.c        | 5 +----
 5 files changed, 4 insertions(+), 22 deletions(-)

commit 5c4804b88b61a2904639af3c5c01a6216b913e1e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 16:47:25 2015 -0500

    unused param in _mongoc_bulk_operation_new

 src/mongoc/mongoc-bulk-operation-private.h | 1 -
 src/mongoc/mongoc-bulk-operation.c         | 3 +--
 src/mongoc/mongoc-collection.c             | 1 -
 3 files changed, 1 insertion(+), 4 deletions(-)

commit 42a63963f423a1e21d02dadbdca4ea092a8036e6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 18:19:20 2015 -0500

    CDRIVER-1006 document "readConcernLevel" URI option

 doc/mongoc_uri_t.page | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 50f977fc2dbd34bcea7591cd273738bd5bf9624a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 17:23:31 2015 -0500

    CDRIVER-993 fix cast in CreateThread call

 src/mongoc/mongoc-thread-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 291756dde0732c96676124e8bdb89c26f08fb1f0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 18:48:02 2015 -0500

    CDRIVER-1012 document "aggregate" with options

 doc/mongoc_collection_aggregate.page | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit d3802d694100cce1d39d145026b324fed5490911
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Nov 20 11:44:37 2015 -0800

    bump libbson to avoid compiler warnings

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4188ff34a49da1d16409e310140669cdc57da8b6
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Nov 20 11:38:23 2015 -0800

    Fix odd redeclaration of _mongoc_cursor_destroy

 src/mongoc/mongoc-cursor-private.h | 1 -
 1 file changed, 1 deletion(-)

commit 8649ee43180b92e62c72da2df702bb0e6fc07ce2
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Nov 20 11:36:42 2015 -0800

    Fix warning: enumeration value ... not handled in switch [-Wswitch-enum]

 tests/test-mongoc-read-prefs.c | 2 ++
 1 file changed, 2 insertions(+)

commit 3171dfb9a740090f439cc2d504a08ab9d5831d01
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 19 15:59:10 2015 -0800

    CDRIVER-1017: mongoc_cursor_t leaks mongoc_read_concern_t

 src/mongoc/mongoc-cursor.c | 1 +
 1 file changed, 1 insertion(+)

commit 4fbd8408002237a7bffb4120b48f1ca4191954d4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 20 09:21:31 2015 -0500

    CDRIVER-1018 update guide for building from git

 README.rst          | 10 ++--------
 doc/installing.page | 11 +++++++++--
 2 files changed, 11 insertions(+), 10 deletions(-)

commit 7a1e32a08508611497575003db09f5e80b815121
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 20 08:56:55 2015 -0500

    CDRIVER-1019 include private header with quotes

 src/mongoc/mongoc-read-concern-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ffaccf161fa270578f889a0408ed23fc1893387
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 19:39:30 2015 -0500

    CDRIVER-956 delete old debian package files
    
    Proper new Debian package is maintained in the "debian" branch of this
    repository.

 debian/.gitignore              |  12 ----
 debian/changelog               | 152 -----------------------------------------
 debian/compat                  |   1 -
 debian/control                 |  94 -------------------------
 debian/copyright               |  26 -------
 debian/libbson-1.0-0.install   |   1 -
 debian/libbson-dev.install     |   4 --
 debian/libmongoc-1.0-0.install |   2 -
 debian/libmongoc-dev.install   |   4 --
 debian/rules                   |  22 ------
 10 files changed, 318 deletions(-)

commit 1eb37e662b2897822355c6211c2c74d6ac0c98e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 19:41:28 2015 -0500

    return to 1.3.0-dev in Versions.m4

 build/autotools/Versions.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2069803317075b24012d7ea1fc9d90e43e7b23b0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 16:31:14 2015 -0500

    remove disabled read_prefs_score test
    
    Disabled when the code it tested was factored out, and superseded by
    server selection spec JSON tests.

 tests/test-mongoc-read-prefs.c | 43 ------------------------------------------
 1 file changed, 43 deletions(-)

commit 086fbd86e9ff34ecdb4a46a0c75ccaaa903ed41a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 16:39:03 2015 -0500

    whitespace fixes in _mongoc_client_t

 src/mongoc/mongoc-client-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c35c304714fd49245fbef3c715f2c977d529f8cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 19 16:37:48 2015 -0500

    fix error message for "max" without "capped"

 src/mongoc/mongoc-database.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 34f060a3e5e4dfc072a0ca075795cf25f0740b11
Author: Victor Leschuk <vleschuk@gmail.com>
Date:   Thu Nov 19 10:54:22 2015 +0300

    rpmbuild (at least on CentOS 6) doesn't understand
    the following date format in %changelog: Thu October 29 2015 ...
    It requires short month names: Thu Oct 29 2015 ...

 build/rpm/mongo-c-driver.spec | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit 50b5519ef28281cdd922500a1364ed14950f5f08
Author: Matt Cotter <matt@mattwc.com>
Date:   Wed Nov 18 19:52:27 2015 -0500

    CDRIVER-942 add copy methods for db and collection

 build/autotools/versions.ldscript |  2 ++
 build/cmake/libmongoc-ssl.def     |  2 ++
 build/cmake/libmongoc.def         |  2 ++
 src/libmongoc.symbols             |  2 ++
 src/mongoc/mongoc-collection.c    | 31 +++++++++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h    |  1 +
 src/mongoc/mongoc-database.c      | 28 ++++++++++++++++++++++++++++
 src/mongoc/mongoc-database.h      |  1 +
 tests/test-mongoc-collection.c    | 30 ++++++++++++++++++++++++++++++
 tests/test-mongoc-database.c      | 25 +++++++++++++++++++++++++
 10 files changed, 124 insertions(+)

commit 4219685ba932595df2c294a5f25446c6c41c1fc1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 18 17:13:11 2015 -0500

    1.3.0-beta0 Release (include header in tarball)
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 src/mongoc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 8a117ef8c8ec2a3db1ddd7cc93a937ebf9222fb3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 18 16:28:49 2015 -0500

    1.3.0-beta0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt              |  6 ++--
 NEWS                        | 83 ++++++++++++++++++++++++++++++++++++++++-----
 build/autotools/Versions.m4 | 10 +++---
 src/libbson                 |  2 +-
 4 files changed, 84 insertions(+), 17 deletions(-)

commit 4dc46771560e0458a29400a64e178a28543609ac
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 18 11:33:00 2015 -0800

    Temporaraly skip live read concern tests
    
    mongod doesn't currently enable this functionality by default

 CONTRIBUTING.md                | 10 ++++++++++
 tests/test-mongoc-collection.c | 10 ++++++++--
 2 files changed, 18 insertions(+), 2 deletions(-)

commit a8fe81004ea1f0379961317ba341a8a7b5d96ca2
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 18 10:37:18 2015 -0800

    CDRIVER-945: Change of hearts. Remove _set_write_concern
    
    For consistency with all other helpers, the write concern should be set
    at the collection level, not per command.

 build/autotools/versions.ldscript           |  1 -
 build/cmake/libmongoc-ssl.def               |  1 -
 build/cmake/libmongoc.def                   |  1 -
 src/libmongoc.symbols                       |  1 -
 src/mongoc/mongoc-collection.c              | 10 +++-------
 src/mongoc/mongoc-find-and-modify-private.h |  1 -
 src/mongoc/mongoc-find-and-modify.c         | 19 -------------------
 src/mongoc/mongoc-find-and-modify.h         |  3 ---
 tests/test-mongoc-find-and-modify.c         |  2 +-
 9 files changed, 4 insertions(+), 35 deletions(-)

commit 38cf613beb7bd74871f36ed8b101e0128a9fd579
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 11:43:40 2015 -0500

    CDRIVER-873 optimize gridfs long seeks

 src/mongoc/mongoc-gridfs-file.c | 41 +++++++++++++++++++-
 tests/test-mongoc-gridfs.c      | 86 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 125 insertions(+), 2 deletions(-)

commit 80b9d97128e6f84952e163b449c2417644419138
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 18 10:28:41 2015 -0800

    CDRIVER-837: Add the new symbols here too!

 src/libmongoc.symbols | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 15fd0799697916fbcd5aaf9249a91fbe1c9fb979
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 18 09:21:07 2015 -0800

    CDRIVER-837: add readConcern support for aggregate

 src/mongoc/mongoc-collection.c |  15 ++++++
 tests/test-mongoc-collection.c | 108 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 123 insertions(+)

commit ec5a55a71c62b9ca9fc6d2635437eafb26d3ef84
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 18 08:43:32 2015 -0800

    Fix mongoc_collection_count() + readConcern test
    
    This would have passed even if readConcern was provided as the matcher
    ignores extra fields. We must explicitly say it cannot exist

 tests/test-mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 67c1691b3a7a56ff267effdc3eab3613b5f8633f
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 21:15:34 2015 -0800

    CDRIVER-837: Add test for mongoc_collection_find and readConcern

 tests/test-mongoc-collection.c | 172 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 172 insertions(+)

commit 578b378989a90d905ffaecab45400f5566fbe958
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 17:19:34 2015 -0800

    CDRIVER-837: apply readConcern to mongoc_collection_find() calls

 src/mongoc/mongoc-client.c         |  4 ++--
 src/mongoc/mongoc-collection.c     |  6 ++++--
 src/mongoc/mongoc-cursor-private.h |  4 +++-
 src/mongoc/mongoc-cursor.c         | 37 +++++++++++++++++++++++++++++++++++--
 src/mongoc/mongoc-database.c       |  2 +-
 tests/test-mongoc-cursor.c         |  8 ++++----
 6 files changed, 49 insertions(+), 12 deletions(-)

commit 665bb4cb5598b2ac9896a6334c3a9e71e2993c09
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 21:58:35 2015 -0500

    CDRIVER-1004 distribute FindSASL2.cmake in tarball

 build/cmake/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit fa83df7cdc2d4211de806e730ef631f4bd1a93e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 21:08:45 2015 -0500

    correctly name solaris build variants
    
    We use the server's toolchain on Evergreen's Solaris builders, which are
    gcc 4.8.2, not 4.9.2.

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 920658f6f3a46c5d89c4d49502d8d11633ee0793
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 16 15:27:45 2015 -0500

    CDRIVER-998 64-bit test on Solaris

 .mci.yml | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 1d740a86d0c0b495ba5095f727c07b4c51a440ba
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 17:27:01 2015 -0800

    CDRIVER-837: Export new read_concern related symbols

 build/autotools/versions.ldscript | 12 ++++++++++++
 build/cmake/libmongoc-ssl.def     | 12 ++++++++++++
 build/cmake/libmongoc.def         | 12 ++++++++++++
 3 files changed, 36 insertions(+)

commit 0266789945f73019a31b273600fd911b4522f86f
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 12:55:07 2015 -0800

    CDRIVER-837: Add support for readConcern in mongoc_collection_count

 src/mongoc/mongoc-collection.c |  54 +++++++---
 tests/test-mongoc-collection.c | 220 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 263 insertions(+), 11 deletions(-)

commit 001a305012a441a99233977d2c2f712acdb7d90a
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 12:54:42 2015 -0800

    CDRIVER-837: Define WIRE_VERSION_READ_CONCERN

 src/mongoc/mongoc-client-private.h | 2 ++
 1 file changed, 2 insertions(+)

commit ec1c7d77867ecbd39e4fc9376fba25fa09230c01
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 12:54:11 2015 -0800

    CDRIVER-837: Generate mongoc_collection_find futures

 build/generate-future-functions.py   | 10 ++++++
 tests/mock_server/future-functions.c | 63 ++++++++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h | 13 ++++++++
 3 files changed, 86 insertions(+)

commit 49f956d9cad60a0e5529b16bf590248243ffceca
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 10:24:24 2015 -0800

    CDRIVER-837: Parse readConcernLevel from the connection string

 src/mongoc/mongoc-uri.c |  7 ++++++-
 tests/test-mongoc-uri.c | 48 ++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 54 insertions(+), 1 deletion(-)

commit e12e3bdb2b99509230f0a7a7b93f7e575b00aba6
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 10:02:07 2015 -0800

    CDRIVER-837: Weave mongoc_read_concern_t through everywhere

 src/mongoc/mongoc-client-private.h     |  1 +
 src/mongoc/mongoc-client.c             | 68 ++++++++++++++++++++++++++++++++-
 src/mongoc/mongoc-client.h             |  4 ++
 src/mongoc/mongoc-collection-private.h |  2 +
 src/mongoc/mongoc-collection.c         | 69 ++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h         |  4 ++
 src/mongoc/mongoc-database-private.h   |  5 ++-
 src/mongoc/mongoc-database.c           | 68 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-database.h           |  4 ++
 src/mongoc/mongoc-gridfs.c             |  4 +-
 src/mongoc/mongoc-uri.c                | 13 +++++++
 src/mongoc/mongoc-uri.h                |  2 +
 12 files changed, 239 insertions(+), 5 deletions(-)

commit 2c90394d9e9e41635d3e7ea2239ffd828e8cb501
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Nov 17 09:31:06 2015 -0800

    CDRIVER-837: Add mongoc_read_concern_t

 CMakeLists.txt                           |   2 +
 src/mongoc/Makefile.am                   |   3 +
 src/mongoc/mongoc-read-concern-private.h |  44 ++++++++
 src/mongoc/mongoc-read-concern.c         | 177 +++++++++++++++++++++++++++++++
 src/mongoc/mongoc-read-concern.h         |  47 ++++++++
 5 files changed, 273 insertions(+)

commit 7eb7a07fa52f9f9b3b6809c7078bb81aac94af06
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 11:45:28 2015 -0500

    spelling in gridfs file comment

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b4d360c3037832dfd902c4103e3ca1d584fae923
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 11:45:19 2015 -0500

    explain gridfs file's cursor_range

 src/mongoc/mongoc-gridfs-file-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8470a09a2bc6984bdd4b718549995f4bf189b73d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 17 11:45:05 2015 -0500

    style in generate-future-functions.py

 build/generate-future-functions.py   | 16 +++++++++-------
 tests/mock_server/future-functions.c | 30 +++++++++++++++---------------
 tests/mock_server/future-functions.h | 10 +++++-----
 tests/mock_server/future-value.c     | 28 ++++++++++++++--------------
 tests/mock_server/future-value.h     | 28 ++++++++++++++--------------
 tests/mock_server/future.c           | 12 ++++++------
 tests/mock_server/future.h           |  8 ++++----
 7 files changed, 67 insertions(+), 65 deletions(-)

commit 16815f8f719c4e24156e026e41ce948248a5c144
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 16 17:06:45 2015 -0500

    CDRIVER-1000 upgrade $or, etc. from OP_QUERY to find cmd

 src/mongoc/mongoc-cursor-private.h  |  1 -
 src/mongoc/mongoc-cursor.c          | 54 +++++++++++++++++------
 tests/test-mongoc-collection-find.c | 88 ++++++++++++++++++++++---------------
 3 files changed, 93 insertions(+), 50 deletions(-)

commit ef9978d3912007033b37ebffcf167c873804c93f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 16 21:54:33 2015 -0500

    CDRIVER-995 config check for struct timespec
    
    Fixes build on VS2015, which now provides timespec along with many other
    stdlib symbols.

 tests/TestSuite.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b44ce0c8c05d5d8f8e7ed3cb38f9bc7fdc4aed35
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 16 21:02:10 2015 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b2b153c520d826ad46084f73634f4210cb5ab1fc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 16 17:54:23 2015 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c1f32e9f6fa2b71945f192de7196f9ffbea162dc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 11 14:06:42 2015 -0500

    missing include

 src/mongoc/mongoc-find-and-modify.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fbf2ab496d323fb901126ce7f4e56727627a78c1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 10 15:48:15 2015 -0500

    CDRIVER-966 get/set_max_await_time_ms
    
    A new option available with the MongoDB 3.2 "getMore" command, only for
    tailable cursors with awaitData.

 NEWS                                         |   7 +-
 build/autotools/versions.ldscript            |   2 +
 build/cmake/libmongoc-ssl.def                |   2 +
 build/cmake/libmongoc.def                    |   2 +
 doc/cursors.page                             |   1 +
 doc/mongoc_cursor_get_max_await_time_ms.page |  32 ++++++++
 doc/mongoc_cursor_set_max_await_time_ms.page |  40 ++++++++++
 src/libmongoc.symbols                        |   2 +
 src/mongoc/mongoc-cursor-cursorid.c          |  13 ++++
 src/mongoc/mongoc-cursor-private.h           |   1 +
 src/mongoc/mongoc-cursor.c                   |  27 +++++--
 src/mongoc/mongoc-cursor.h                   |  35 +++++----
 src/mongoc/mongoc-rpc.c                      |   8 +-
 tests/test-mongoc-collection-find.c          | 106 +++++++++++++++++++++++++++
 tests/test-mongoc-exhaust.c                  |  28 +++++++
 15 files changed, 280 insertions(+), 26 deletions(-)

commit b7f78052d0d0b95cde3c4eacc66f8b7f9195b2b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 16 15:17:03 2015 -0500

    CDRIVER-990 rename wire version constants

 src/mongoc/mongoc-client-private.h | 16 ++++++++--------
 src/mongoc/mongoc-client.c         |  2 +-
 src/mongoc/mongoc-cluster.c        |  2 +-
 src/mongoc/mongoc-collection.c     |  4 ++--
 src/mongoc/mongoc-cursor.c         |  2 +-
 src/mongoc/mongoc-write-command.c  |  2 +-
 6 files changed, 14 insertions(+), 14 deletions(-)

commit ea68fc78b7a15206717176a8ee3ae8c61f2129c6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 13 16:36:02 2015 -0500

    CDRIVER-838 simplify killCursors test

 tests/test-mongoc-cursor.c | 36 +++++++++++++-----------------------
 1 file changed, 13 insertions(+), 23 deletions(-)

commit fcb6e62be031cbb1e1b9a58245933c46372e04d9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 13 16:23:57 2015 -0500

    CDRIVER-838 killCursors: "collection", not full ns

 src/mongoc/mongoc-client-private.h |   3 +-
 src/mongoc/mongoc-client.c         |  24 ++++---
 src/mongoc/mongoc-cursor.c         |   6 +-
 tests/test-mongoc-cursor.c         | 143 +++++++++++++++++++++++++++++++------
 4 files changed, 144 insertions(+), 32 deletions(-)

commit 5d1bd94570b307068ecc05eb8e5b75761a3ac8a2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 13 08:32:32 2015 -0500

    CDRIVER-838 test killCursors cmd with mock server

 tests/test-conveniences.c  |  8 +-------
 tests/test-conveniences.h  |  4 ++++
 tests/test-mongoc-cursor.c | 51 ++++++++++++++++++++++++++++++++++++++--------
 3 files changed, 47 insertions(+), 16 deletions(-)

commit ac59f6dc60e57085cac5e1ca7b79d29769ec9530
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 13 08:31:53 2015 -0500

    mock server feature to reply to OP_QUERY or find

 tests/mock_server/mock-rs.c     | 114 +++++++++++++++++++++++++++++++++++++++-
 tests/mock_server/mock-rs.h     |  13 +++++
 tests/mock_server/mock-server.c |  67 +++++++++++++++++++++++
 tests/mock_server/mock-server.h |   8 +++
 tests/mock_server/request.c     |  23 ++++++--
 tests/mock_server/request.h     |   3 ++
 6 files changed, 223 insertions(+), 5 deletions(-)

commit 7d8679314f5ee7540a05a4c9e2a950ed9176ad69
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 12 10:08:52 2015 -0500

    CDRIVER-838 send killCursors cmd to MongoDB 3.2+

 src/mongoc/mongoc-client-private.h |  5 ++-
 src/mongoc/mongoc-client.c         | 70 ++++++++++++++++++++++++++++++++++----
 src/mongoc/mongoc-cursor.c         |  5 ++-
 3 files changed, 72 insertions(+), 8 deletions(-)

commit 4b93369c01de70cceb784b3beb78f56080f70e44
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 12 08:51:17 2015 -0500

    CDRIVER-990 define constants for wire version checks

 src/mongoc/mongoc-client-private.h | 9 ++++++++-
 src/mongoc/mongoc-cluster.c        | 2 +-
 src/mongoc/mongoc-collection.c     | 5 +++--
 3 files changed, 12 insertions(+), 4 deletions(-)

commit fe5a9545af57b8063c7f0a3d3cb637ca69265074
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 12 08:41:47 2015 -0500

    CDRIVER-990 consolidate wire-version symbols
    
    Also bump the driver's max wire version to 4.

 src/mongoc/mongoc-client-private.h     | 8 ++++++++
 src/mongoc/mongoc-cluster.c            | 3 ---
 src/mongoc/mongoc-cursor-private.h     | 2 --
 src/mongoc/mongoc-server-description.c | 3 ---
 src/mongoc/mongoc-write-command.c      | 2 --
 5 files changed, 8 insertions(+), 10 deletions(-)

commit 8ebb0240ec55626647822a70a0a8af705043920b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 15 17:13:30 2015 -0500

    shorter build-variant names

 .mci.yml | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit e643b54c199eddcfcc7cff190f501e2be63bc9a8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 5 15:03:54 2015 -0500

    CDRIVER-838 document MongoDB 3.2 query syntax

 NEWS                            |  3 ++
 doc/mongoc_collection_find.page | 73 ++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 75 insertions(+), 1 deletion(-)

commit 61b3fa4951459678ec8f190a5c03f22129aecb49
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 15 08:17:06 2015 -0500

    CDRIVER-674 fix vs2015 evergreen config

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0d1219f2d9fea30b2c8efbcbb81972d7c816211e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Nov 15 07:51:53 2015 -0500

    CDRIVER-674 test vs2010 and 2015
    
    Visual Studio 2013 had been all we tested in Evergreen.

 .mci.yml | 73 +++++++++++++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 63 insertions(+), 10 deletions(-)

commit af4ae26c26aeb5ba6b15686c070e8cd299eb6bf8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 10 03:40:36 2015 -0500

    CDRIVER-838 use getMore cmd with MongoDB 3.2+

 src/mongoc/mongoc-cursor-array.c            |   2 +-
 src/mongoc/mongoc-cursor-cursorid-private.h |   8 +-
 src/mongoc/mongoc-cursor-cursorid.c         | 151 +++++++++++++++++++++++-----
 src/mongoc/mongoc-cursor-private.h          |  55 ++++++----
 src/mongoc/mongoc-cursor.c                  |  72 +++++++------
 tests/test-mongoc-collection-find.c         |  76 +++++++++++++-
 6 files changed, 270 insertions(+), 94 deletions(-)

commit 3a0e53b021103e3e6811bf18405981a6322c949d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 10 03:40:14 2015 -0500

    CDRIVER-838 batchSize is int32, not int64
    
    Also test find command with batchSize.

 src/mongoc/mongoc-cursor.c          |  2 +-
 tests/test-mongoc-collection-find.c | 69 ++++++++++++++++++++++++++++++++++++-
 2 files changed, 69 insertions(+), 2 deletions(-)

commit 0337b9fb9392a9673bb054cda7f44e0dceb2d9c4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 9 16:28:54 2015 -0500

    CDRIVER-838 factor out OP_GETMORE code

 src/mongoc/mongoc-cursor.c | 125 +++++++++++++++++++++++++++++----------------
 1 file changed, 82 insertions(+), 43 deletions(-)

commit a494a60334bfeeaca9f62dfa8517c38594f289e2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 15:46:30 2015 -0800

    Alphabetize

 build/autotools/versions.ldscript |  8 ++++----
 build/cmake/libmongoc-ssl.def     | 12 ++++++------
 build/cmake/libmongoc.def         | 12 ++++++------
 src/libmongoc.symbols             | 20 ++++++++++----------
 4 files changed, 26 insertions(+), 26 deletions(-)

commit 44bba4b140ace65203a61ae212e912605644e5b2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 14:57:08 2015 -0800

    CDRIVER-945: Add tests for find_and_modify_with_opts

 .gitignore                          |   1 +
 CMakeLists.txt                      |   1 +
 tests/Makefile.am                   |   1 +
 tests/test-libmongoc.c              |   2 +
 tests/test-mongoc-find-and-modify.c | 214 ++++++++++++++++++++++++++++++++++++
 5 files changed, 219 insertions(+)

commit 85f354424a089982c8f14b22482989d7fc12cb9c
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 14:37:32 2015 -0800

    CDRIVER-945: Generate new find_and_modify_with_opts futures

 build/generate-future-functions.py   |  8 ++++++
 tests/mock_server/future-functions.c | 53 ++++++++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h | 11 ++++++++
 tests/mock_server/future-value.c     | 14 ++++++++++
 tests/mock_server/future-value.h     | 12 ++++++++
 tests/mock_server/future.c           | 11 ++++++++
 tests/mock_server/future.h           |  3 ++
 7 files changed, 112 insertions(+)

commit 89fec89e8fc5824b5d8441ad3b3ee7bba67bd644
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 14:37:01 2015 -0800

    CDRIVER-945: Export the new find_and_modify helpers

 build/autotools/versions.ldscript | 9 +++++++++
 build/cmake/libmongoc-ssl.def     | 9 +++++++++
 build/cmake/libmongoc.def         | 9 +++++++++
 src/libmongoc.symbols             | 9 +++++++++
 4 files changed, 36 insertions(+)

commit 676a71af81abd8492e327bde54aa973cb30b617a
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 14:30:32 2015 -0800

    CDRIVER-945: Use mongoc_collection_find_and_modify_with_opts

 src/mongoc/mongoc-collection.c | 158 +++++++++++++++++++++++++++++------------
 src/mongoc/mongoc-collection.h |   7 +-
 2 files changed, 118 insertions(+), 47 deletions(-)

commit 1204dc20bb31d4dc126fea3efbfb3a23283292fa
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 14:27:09 2015 -0800

    CDRIVER-945: Add mongoc_collection_find_and_modify_with_opts ()

 CMakeLists.txt                              |   2 +
 src/mongoc/Makefile.am                      |   3 +
 src/mongoc/mongoc-find-and-modify-private.h |  43 +++++++++
 src/mongoc/mongoc-find-and-modify.c         | 142 ++++++++++++++++++++++++++++
 src/mongoc/mongoc-find-and-modify.h         |  65 +++++++++++++
 5 files changed, 255 insertions(+)

commit 2194b5a183f46130a2a4835e68cd7029a23a62d6
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Nov 6 11:23:39 2015 -0800

    Add _mongoc_bson_destroy_if_set () utility function
    
    Same as
    if (bson) {
       bson_destroy (bson);
    }

 src/mongoc/mongoc-util-private.h | 1 +
 src/mongoc/mongoc-util.c         | 8 ++++++++
 2 files changed, 9 insertions(+)

commit d97f24a717f17103aff54092edbedb21dabe0dae
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Nov 6 11:26:17 2015 -0800

    Allow null for _mongoc_write_concern_is_valid ()
    
    Return false rather then aborting.

 src/mongoc/mongoc-write-concern.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit a3d0fe2fab7abfb1bd343ab51fd254f09b6af083
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 10 16:55:10 2015 -0500

    CDRIVER-838 remove field cursor->failed.
    
    Redundant with cursor->error.

 src/mongoc/mongoc-collection.c          |  7 -------
 src/mongoc/mongoc-cursor-cursorid.c     | 11 ++++++++++-
 src/mongoc/mongoc-cursor-private.h      |  1 -
 src/mongoc/mongoc-cursor.c              | 23 +++++++----------------
 src/mongoc/mongoc-gridfs-file-private.h |  1 -
 src/mongoc/mongoc-gridfs-file.c         | 15 +++------------
 tests/test-mongoc-collection.c          |  2 --
 tests/test-mongoc-cursor.c              |  1 +
 8 files changed, 21 insertions(+), 40 deletions(-)

commit 254938e2a3523f4f1e9a76509a5de95a91519f20
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 5 14:56:18 2015 -0500

    CDRIVER-838 use "find" command with mongodb 3.2+

 CMakeLists.txt                              |   1 +
 src/mongoc/mongoc-cursor-cursorid-private.h |   6 +-
 src/mongoc/mongoc-cursor-cursorid.c         |   2 +-
 src/mongoc/mongoc-cursor-private.h          |   2 +
 src/mongoc/mongoc-cursor.c                  | 188 ++++++-
 tests/Makefile.am                           |   1 +
 tests/test-libmongoc.c                      |   2 +
 tests/test-mongoc-collection-find.c         | 773 ++++++++++++++++++++++++++++
 tests/test-mongoc-collection.c              | 134 +----
 tests/test-mongoc-read-prefs.c              | 377 +++++++++++---
 10 files changed, 1273 insertions(+), 213 deletions(-)

commit 1f86039a3b8d9919790ca1c4d1c556006dea82b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 6 14:16:25 2015 -0500

    replace space with _ in man page titles
    
    Otherwise the "whatis" entry can't be parsed from the man page title.

 doc/mallard2man.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 3ccccf9756a510b816d73825d1c6182dd7695e38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 6 14:05:22 2015 -0500

    add subtitle to mongoc_version.page
    
    Required for mallard2man's man pages to have "whatis" entries.

 doc/mongoc_version.page | 1 +
 1 file changed, 1 insertion(+)

commit d1c97b03514acc3090cb2fe74318cb5bc601fe66
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Nov 6 14:03:51 2015 -0500

    more spelling in mongoc_cursor_t.page

 doc/mongoc_cursor_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c6eab3c50d3aee7926c9c43771f44728a281a00e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 5 17:12:25 2015 -0500

    spelling in mongoc_cursor_t.page

 doc/mongoc_cursor_t.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9810666cb1c21b6d471c67c07e632be2c82d9fab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 5 15:49:49 2015 -0500

    CDRIVER-838 fix aggregation cursor iteration

 src/mongoc/mongoc-cursor-cursorid.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 39f11b20fc19b8ef1465ce549a7f9005d4d53d8b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 5 14:56:57 2015 -0500

    handle NULL arg to test function tmp_bson

 tests/test-conveniences.c | 21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)

commit c40edecee6dfc5fe053dbb7c52af46f9138da73c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Nov 5 14:40:11 2015 -0500

    add mock_server_reply_multi
    
    Allows tests to respond with a batch of documents to a client query.
    Factor common code out of the mock server reply functions.

 tests/mock_server/mock-server.c | 158 +++++++++++++++++++++-------------------
 tests/mock_server/mock-server.h |   8 +-
 tests/mock_server/request.c     |  16 ++++
 3 files changed, 107 insertions(+), 75 deletions(-)

commit 1fef7795b44ab3c34a8ab2c58f6f3cefb3a5da25
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Nov 4 23:03:39 2015 -0500

    race in test_seed_list

 tests/test-mongoc-client.c | 2 --
 1 file changed, 2 deletions(-)

commit 8f0d9265fbfa4c1f955a88ddf0c63dc91ef5f1ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 3 16:49:20 2015 -0500

    CDRIVER-838 don't set aggregate cursor's is_command

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 234db674d3468f516fa5af5cfe415c0da58491a3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 3 16:29:25 2015 -0500

    test large aggregations

 tests/test-mongoc-collection.c | 59 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 59 insertions(+)

commit bfaa52d64676b094db94ff5c77b0d08fd6f13779
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Nov 5 08:14:01 2015 -0800

    Export LIBMONGOC_1.3 for abicheck

 src/libmongoc.symbols | 1 +
 1 file changed, 1 insertion(+)

commit bc86b1372272bb74dbc27a0b959adb4ce4bfe154
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 4 11:15:37 2015 -0800

    CDRIVER-906: reply is allowed to be NULL
    
    Fixes test_ssl_single ()

 src/mongoc/mongoc-client.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d6140ef1c4332d93a39d66b7f2a1a3be02d517dc
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 4 11:30:40 2015 -0800

    CDRIVER-071: Export new symbols
    
    - mongoc_bulk_operation_set_bypass_document_validation
    - mongoc_bulk_operation_set_flags

 build/autotools/versions.ldscript | 6 ++++++
 build/cmake/libmongoc-ssl.def     | 2 ++
 build/cmake/libmongoc.def         | 2 ++
 src/libmongoc.symbols             | 2 ++
 4 files changed, 12 insertions(+)

commit 47767cdee6b43522c8d666e8194239abd4558e3e
Merge: c123034 e7f020e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Nov 4 10:41:25 2015 -0800

    Merge branch 'r1.2'
    
    * r1.2:
      post-release bump
      1.2.1 release
      update mallard2man.py from libbson
      CDRIVER-882 rearrange install guide
      remove link to legacy branch from README
      CDRIVER-933 note change in ssl opts behavior
      CDRIVER-935 pooled clients require SSL if opts set
      print mongod command line opts before test
      evergreen on windows tests the wrong mongo version

commit c123034d120880d530ae5acc800eba1aeb8fe1bb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Nov 2 17:12:57 2015 -0500

    CDRIVER-982 set OP_QUERY nToReturn from limit
    
    The "limit" argument to mongoc_collection_find should be used for two purposes:
    
    1. Mark a mongoc_cursor_t as "done" once it has fetched "limit" documents
    
    2. Send limit to the server as the nToReturn field in the OP_QUERY and
    OP_GETMORE message headers
    
    The driver respects #1, but not #2. Instead, it always sends nToReturn of 0 to
    the server, meaning, "accept server default" batch size of 101 documents at
    first, then 4MB of documents after. This bug incurs a performance penalty: the
    final batch is always full-sized (about 4MB) even if the cursor only needs part
    of it. If mongoc_collection_find's batch_size is non-0 the logic is correct;
    it's when batch_size is 0 (the default) that limit is incorrectly ignored when
    formatting OP_QUERY and OP_GETMORE.

 src/mongoc/mongoc-cursor.c     |  21 ++--
 tests/test-mongoc-collection.c | 224 +++++++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-read-prefs.c |   2 +-
 3 files changed, 236 insertions(+), 11 deletions(-)

commit bb42cec93feda9463e47bc7c3e0ec1d7c39ce7f3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 3 13:39:29 2015 -0500

    CDRIVER-838 refactor command cursors
    
    Preparation for implementing the "find" command.
    
    Cursors from commands (aggregate, listCollections, listDatabases) had
    been implemented as regular cursors with a "query" that is the command.
    mongoc_cursor_cursorid_prime() runs the query with _mongoc_cursor_next,
    then transforms the cursor into a command cursor.
    
    This will get very tangled if "find" is a command, so I've created a
    specialized function _mongoc_cursor_run_command that cursors use to
    run aggregate, listCollections, and listDatabases. This function calls
    a new function mongoc_cluster_run_command_rpc which fills out the
    cursor's buffer with the command reply. Command cursors then proceed
    as before: iterate the initial batch from the command reply, then send
    OP_GETMORE.
    
    The main advantage of this refactoring is that _mongoc_cursor_next is
    now purely for regular query cursors.
    
    The next step will be to call the "find" command with this new function
    _mongoc_cursor_run_command.
    
    A subtle behavior change: the driver used to send the initial aggregate
    command lazily from mongoc_cursor_next if connected to a legacy server,
    but sent the command eagerly from mongoc_collection_aggregate when
    connected to a modern server. Now, mongoc_collection_aggregate never
    sends the command eagerly. The "aggregate" command is always sent from
    mongoc_cursor_next.

 src/mongoc/mongoc-client.c                  |   8 +-
 src/mongoc/mongoc-cluster-private.h         |  21 ++-
 src/mongoc/mongoc-cluster.c                 | 164 ++++++++++---------
 src/mongoc/mongoc-collection.c              | 111 +++++++------
 src/mongoc/mongoc-cursor-array-private.h    |   1 +
 src/mongoc/mongoc-cursor-array.c            |  29 ++--
 src/mongoc/mongoc-cursor-cursorid-private.h |   3 +-
 src/mongoc/mongoc-cursor-cursorid.c         |  77 +++++----
 src/mongoc/mongoc-cursor-private.h          |   4 +
 src/mongoc/mongoc-cursor.c                  | 242 ++++++++++++++++++++--------
 src/mongoc/mongoc-database.c                |  18 +--
 src/mongoc/mongoc-rpc-private.h             |   5 +
 src/mongoc/mongoc-rpc.c                     |  33 +++-
 src/mongoc/mongoc-util-private.h            |   4 +
 src/mongoc/mongoc-util.c                    |  37 +++++
 tests/test-mongoc-collection.c              |   9 +-
 16 files changed, 492 insertions(+), 274 deletions(-)

commit 686204a15ba1d24cd8f3d268c087b99626c31b01
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Nov 3 14:24:36 2015 -0500

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0e6a904c25a69c3e10a66e67693a1e6d9e14499c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 2 08:29:45 2015 -0800

    CDRIVER-669: That really didn't go as planned -- revert for a while

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 98301f33d87a943b672e03cb22595ea6e7de8215
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Mon Nov 2 08:27:56 2015 -0600

    CDRIVER-981: Declare varialbes at the beginning of scope

 tests/test-mongoc-topology-scanner.c |  3 ++-
 tests/test-mongoc-uri.c              | 16 ++++------------
 2 files changed, 6 insertions(+), 13 deletions(-)

commit 9bf35f456fa5ec9efd877b7d34646289c732ef3c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 2 08:13:56 2015 -0800

    CDRIVER-669: Disable certain warnings on certain platforms

 build/autotools/MaintainerFlags.m4 |  4 ----
 build/autotools/PlatformFlags.m4   | 14 ++++++++++++++
 configure.ac                       |  1 +
 3 files changed, 15 insertions(+), 4 deletions(-)

commit a657bd29d5d567583c39c1633f370a9288d83e11
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Nov 2 08:14:57 2015 -0800

    CDRIVER-669: redefinition of typedef 'mongoc_topology_t' is a C11 feature [-Wtypedef-redefinition]

 src/mongoc/mongoc-read-prefs-private.h | 3 ---
 1 file changed, 3 deletions(-)

commit 30b3b5a2bcee09007c7ac8475fc6ca040504049a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 30 15:07:11 2015 -0700

    CDRIVER-980: Fix realpath() on windows

 tests/test-mongoc-sdam.c             | 1 +
 tests/test-mongoc-server-selection.c | 1 +
 2 files changed, 2 insertions(+)

commit f265d1dd5c7b9da140534a60313526934e1f99ee
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 30 15:06:53 2015 -0700

    CDRIVER-669: Fix -wshadow warning

 tests/mock_server/request.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit db120a3526e44c70672ac1de765485b964c6e58b
Author: Iago Rubio <iago@iagorubio.com>
Date:   Fri Oct 30 14:17:33 2015 -0700

    CDRIVER-968: Bugs and typos on tutorial examples

 doc/tutorial.page | 31 +++++++++++++------------------
 1 file changed, 13 insertions(+), 18 deletions(-)

commit cc32d5f6cac30d7f1f4c6d502948024cec56ef9b
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 30 14:05:40 2015 -0700

    Fix build on Windows

 tests/test-mongoc-sdam.c             | 4 ++++
 tests/test-mongoc-server-selection.c | 4 ++++
 2 files changed, 8 insertions(+)

commit d45bd957076acbf497e22c53805b3a8f6c96b6d3
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 30 14:01:29 2015 -0700

    CDRIVER-969: declaration of 'index' shadows a global declaration
    
    This only happens on certain GCC versions before 4.8, and is a bug
    in the compiler, but unfortunately evergreen is running that version :)

 src/mongoc/mongoc-set-private.h   |  2 +-
 src/mongoc/mongoc-write-command.c | 20 ++++++++++----------
 2 files changed, 11 insertions(+), 11 deletions(-)

commit 58eb6936755638208db9a5fda8c075064ed87205
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 29 09:00:57 2015 -0700

    CDRIVER-974: Only use -Wno-deprecated-declarations on OSX
    
    Also -- Not all compilers support this flag

 build/autotools/MaintainerFlags.m4 | 4 ++++
 src/Makefile.am                    | 1 -
 2 files changed, 4 insertions(+), 1 deletion(-)

commit 92202b7013ff646a8529c5b5239135d80936914f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 29 14:58:41 2015 -0400

    CDRIVER-906 respect bulk_operation_set_hint
    
    Fix the driver's handling of bulk->hint, and fix related issues about
    getting max_bson_size and other ismaster fields from a newly-connected
    server stream.

 src/mongoc/mongoc-bulk-operation.c        |  13 +-
 src/mongoc/mongoc-cluster-private.h       |  12 --
 src/mongoc/mongoc-cluster.c               | 137 +---------------------
 src/mongoc/mongoc-server-stream-private.h |   9 ++
 src/mongoc/mongoc-server-stream.c         |  52 ++++++++
 src/mongoc/mongoc-write-command.c         |  18 ++-
 tests/mock_server/mock-rs.c               | 143 +++++++++++++++++++---
 tests/mock_server/mock-rs.h               |  11 ++
 tests/test-bulk.c                         | 189 +++++++++++++++++++++++++++++-
 tests/test-mongoc-client.c                |  15 +--
 10 files changed, 411 insertions(+), 188 deletions(-)

commit 89d5430fcad4668468c5bc0ac2748080a036d732
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 21 23:37:12 2015 -0400

    CDRIVER-906 add cluster_stream_for_optype()
    
    Unify two common operations: selecting a server and getting a stream.
    
    Before, we selected a server and got its id. Typically we then looked
    up the server description by id to check values like max_wire_version,
    *and* used the id to get a stream.
    
    This caused verbose code & many mongoc_topology_description_server_by_id
    calls. It complicated logic for applying read preferences to queries and
    commands, and it stood in the way of separating queries from commands.
    
    This is a large refactoring that bundles the three operations -- select
    a server, get a server description, and get a stream -- into one call
    _mongoc_cluster_stream_for_optype (). The return value is a new type
    mongoc_server_stream_t that has everything required to do a command or
    query with read preferences.
    
    apply_read_preferences is therefore somewhat simplified, and callers of
    mongoc_cluster_run_command don't need to pass around an is_write_command
    bool.

 CMakeLists.txt                            |   1 +
 src/mongoc/Makefile.am                    |   1 +
 src/mongoc/mongoc-bulk-operation.c        |  13 +-
 src/mongoc/mongoc-client-private.h        |  34 +--
 src/mongoc/mongoc-client.c                | 141 ++++------
 src/mongoc/mongoc-cluster-private.h       |  65 ++---
 src/mongoc/mongoc-cluster.c               | 434 ++++++++++++------------------
 src/mongoc/mongoc-collection.c            |  77 ++++--
 src/mongoc/mongoc-cursor.c                |  90 ++++---
 src/mongoc/mongoc-read-prefs-private.h    |  29 +-
 src/mongoc/mongoc-read-prefs.c            | 170 +++++-------
 src/mongoc/mongoc-server-stream-private.h |  53 ++++
 src/mongoc/mongoc-server-stream.c         |  50 ++++
 src/mongoc/mongoc-write-command-private.h |   3 +-
 src/mongoc/mongoc-write-command.c         |  87 +++---
 tests/test-mongoc-client.c                |  33 +--
 tests/test-mongoc-cluster.c               |  42 +--
 tests/test-mongoc-read-prefs.c            | 152 +++++++++++
 tests/test-mongoc-topology.c              |  66 +++--
 tests/test-write-commands.c               |  20 +-
 20 files changed, 845 insertions(+), 716 deletions(-)

commit e7f020eb98e6e20d16f7b9fc4b297d16321b9e9d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 29 20:55:23 2015 -0400

    post-release bump

 CMakeLists.txt              | 6 +++---
 NEWS                        | 3 +++
 build/autotools/Versions.m4 | 4 ++--
 3 files changed, 8 insertions(+), 5 deletions(-)

commit c1c74c1f0827ec3fcb31fb4ee99061851b4b872f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 29 19:23:39 2015 -0400

    1.2.1 release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 29 +++++++++++++++++++++++++----
 README.rst                    |  4 ++--
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 18 +++++++++---------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 58 insertions(+), 25 deletions(-)

commit 66a5eb6383cce752771fee49f16251c397e9163f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 29 20:37:53 2015 -0400

    update mallard2man.py from libbson

 doc/mallard2man.py | 61 +++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 49 insertions(+), 12 deletions(-)

commit c725c7e44e95c0d3762539caaffd715c66a1d42e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 29 18:39:51 2015 -0400

    CDRIVER-882 rearrange install guide
    
    Remove redundant install instructions from README and combine all instructions
    in installing.page. Improve the instructions (CDRIVER-722) especially for Open
    SSL on El Capitan (CDRIVER-941).

 README.rst          |  95 ++++++---------------------------
 doc/installing.page | 147 +++++++++++++++++++++++++++++++---------------------
 2 files changed, 104 insertions(+), 138 deletions(-)

commit 1df06e3c9b7dfb4cd67237893293a80281291ab1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 29 10:54:20 2015 -0400

    remove link to legacy branch from README

 README.rst | 3 ---
 1 file changed, 3 deletions(-)

commit 5ecd693063cbee78fcc9029366207d6354c849a7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 28 22:16:09 2015 -0400

    CDRIVER-933 note change in ssl opts behavior
    
    Beginning in version 1.2, once a pool or client has any SSL options
    set, all connections use SSL, even if "ssl=true" is omitted from the
    MongoDB URI. Before, SSL options were ignored unless "ssl=true" was
    included in the URI.

 NEWS                                     |  5 +++++
 doc/mongoc_client_pool_set_ssl_opts.page |  6 +++---
 doc/mongoc_client_set_ssl_opts.page      | 13 ++++++++++---
 doc/mongoc_ssl_opt_t.page                | 11 ++++++++++-
 doc/mongoc_uri_t.page                    |  2 +-
 5 files changed, 29 insertions(+), 8 deletions(-)

commit 6860079b0e9cdbe21eeb8f83182e2c504c652077
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 28 15:51:49 2015 -0400

    CDRIVER-935 pooled clients require SSL if opts set
    
    In 1.1.x, all clients (pooled and single-threaded) required an SSL
    connection to the server only if "ssl=true" was in the URI. In 1.2.0
    this changed unintentionally (but beneficially) for single-threaded
    clients: setting a single-threaded client's SSL options put the client
    in SSL mode, even if "ssl=true" is omitted from the URI.
    
    Pooled clients, however, stopped working entirely if the options are
    set but "ssl=true" is omitted. This patch fixes pooled clients and
    tests the new behavior for both.

 src/mongoc/mongoc-client-private.h |  1 +
 src/mongoc/mongoc-client.c         | 23 +++------
 tests/debug-stream.c               |  3 +-
 tests/test-libmongoc.c             | 28 ++++++++++-
 tests/test-libmongoc.h             | 10 +++-
 tests/test-mongoc-client.c         | 97 +++++++++++++++++++++++++++++++++++++-
 6 files changed, 140 insertions(+), 22 deletions(-)

commit 9ba4e2158c4246414606ece9ee7d2c880f657bb6
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 28 13:33:36 2015 -0700

    bump libbson 3rd time is the charm

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8ddefea379a898cdda00f57a504e990f4069eec9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 28 11:32:01 2015 -0700

    bump libbson again

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 46daa72e611035ea9d63c74bf2940e890aa2b733
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 28 10:50:01 2015 -0700

    Bump libbson to master

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1e6415ad160abde922cc18795b9bbcdfe0f398dd
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 28 09:49:32 2015 -0700

    gcc on Ubuntu 12.04 is convinced there is a global 'index' variable
    
    Fixes -Werror=shadow

 src/mongoc/mongoc-set.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7c242e9819760b0b9d11f44c3e8b1e4540b8a2e9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 28 09:48:58 2015 -0700

    Fix -Werror=return-type on elderly gcc

 tests/json-test.c | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit 2f0b9dd14ca3f62add341115f550de8029440602
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 15:21:12 2015 -0700

    Fix group name again rebase with mallard

 doc/mallard2man.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c663957189965c694e9eec77731a474e8769f70f
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 14:58:19 2015 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 292fd64a1f42420898435f3c7173f8a44810a197
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 14:44:53 2015 -0700

    Our build boxers don't have yelp-build

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ee6857b91f56a4a82bc898fbbcbb5a9952b6ef28
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 14:11:11 2015 -0700

    CDRIVER-667: Fix missing data files & path to the datafiles

 tests/Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 3ca68108437ed90e6e83e36807067892ae149446
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 12:29:04 2015 -0700

    CDRIVER-667: Fix syntax and update title

 doc/basic-troubleshooting.page | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit f7c1da8a6ce90045cdf2c4b80e0408605402ffbb
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 12:27:56 2015 -0700

    CDRIVER-667: Sync changes from libbson
    
    - Generate man pages into doc/man/
    - Generate html pages into doc/html/
    - Fix ChangeLog generation (path/to/missing)

 Makefile.am          |  8 +++++++-
 doc/.gitignore       |  7 +++++--
 doc/Makefile.am      | 53 ----------------------------------------------------
 doc/html/Makefile.am | 26 ++++++++++++++++++++++++++
 doc/mallard2man.py   |  7 +++++--
 doc/man/Makefile.am  | 17 +++++++++++++++++
 6 files changed, 60 insertions(+), 58 deletions(-)

commit 4c73670aabb6929b3de6933b69c59a39c1e983cf
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 27 12:05:06 2015 -0700

    bump libbson master

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit de54db303649ade993240c4b7b3b0feaa750882f
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 26 13:31:59 2015 -0700

    CDRIVER-669 & CDRIVER-958: Add -Werror into CFLAGS & improve configure flags
    
    This way we mark builds as failed on new warnings rather then let them
    pile up.

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 55b214e8409636eedc443c18e05a542d3b10fd1b
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 26 13:29:06 2015 -0700

    CDRIVER-960: Fix path to .json files in out-of-srcdir builds

 tests/test-mongoc-sdam.c             | 25 +++++++++++++++++--------
 tests/test-mongoc-server-selection.c | 15 +++++++++++----
 2 files changed, 28 insertions(+), 12 deletions(-)

commit 8fe13af655410fa21ecb5c74f5366fcd4b0b8de5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 26 15:59:38 2015 -0400

    print mongod command line opts before test

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit bd4f23a5f6e51d926011928b53462895254cb537
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 26 15:59:16 2015 -0400

    evergreen on windows tests the wrong mongo version
    
    Clear any previous MongoDB installation.

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit 61e95cb1d6e69fe2af1e30ffc61c19447db4f80e
Merge: fff00cc fe280d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 26 13:59:01 2015 -0400

    Merge branch 'r1.2'
    
    * r1.2:
      CDRIVER-952 skip a bulk test on server 3.2.0-rc0
      CDRIVER-952 better output from large-inserts test
      longer timeout in test framework's future_wait

commit fe280d8fc5d219178a388558cc0c1c72d5c3ff6d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Oct 25 13:48:25 2015 -0400

    CDRIVER-952 skip a bulk test on server 3.2.0-rc0
    
    Avoid SERVER-21079: skip /BulkOperation/large_inserts_ordered test if
    the server is a 3.2 release candidate.
    
    Introduce helpers to skip tests based on server version in general.

 tests/test-bulk.c      |  21 +++++++--
 tests/test-libmongoc.c | 117 +++++++++++++++++++++++++++++++++++++++++++++++++
 tests/test-libmongoc.h |   5 +++
 3 files changed, 140 insertions(+), 3 deletions(-)

commit 68b747e9376546b1243994f546fdd680a84b8428
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 24 12:08:31 2015 -0400

    CDRIVER-952 better output from large-inserts test

 tests/test-bulk.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 66066b72e17c6a619ae4d314b1710bd7d3882d12
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Oct 24 21:50:32 2015 -0400

    longer timeout in test framework's future_wait
    
    Occasional spurious failures on slow build VMs.

 .mci.yml | 2 ++
 1 file changed, 2 insertions(+)

commit fff00ccd9dde9ef787f24d806c7d4881e3340f30
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 26 10:41:12 2015 -0700

    CDRIVER-599: Don't set -D_FORTIFY_SOURCE for --enable-optimizations
    
    It is part of --enable-hardening which makes far more sense

 build/autotools/Optimizations.m4 | 4 ----
 1 file changed, 4 deletions(-)

commit 37dc552ed5d1ac30b47972bdda0822e525f4666a
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 13:16:47 2015 -0700

    CDRIVER-599: Don't manipulate CFLAGS when not-setting an option

 build/autotools/Optimizations.m4 | 25 ++++++++-----------------
 1 file changed, 8 insertions(+), 17 deletions(-)

commit 80ebdf692f72c2c075311ea47cdb022423602e85
Merge: ff176b1 752e631
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 26 10:39:30 2015 -0700

    Merge branch 'r1.2'
    
    * r1.2:
      CDRIVER-939: Fix test when configured to run against SSL server
      CDRIVER-899 segfault in test_get_host

commit 752e63124c0f2ced90ff4783c35df14b63c6c2ad
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 15:50:06 2015 -0700

    CDRIVER-939: Fix test when configured to run against SSL server

 tests/test-mongoc-client.c                  | 1 +
 tests/test-mongoc-server-selection-errors.c | 2 ++
 2 files changed, 3 insertions(+)

commit ff176b1976ef060ed7f515bb3a76f2d4223cf9c9
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 26 10:36:24 2015 -0700

    CDRIVER-893: Initialize bypass_document_validation properly

 src/mongoc/mongoc-bulk-operation.c | 1 +
 1 file changed, 1 insertion(+)

commit 5a37ac0a4b72de66f86fae9e5a6a233e3c99b0cb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 23 22:44:37 2015 -0400

    CDRIVER-899 segfault in test_get_host
    
    Must destroy cursor before destroying client, not after.

 tests/test-mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eb23d5e7fee18199e262f672dd66380e749f663f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 10:39:04 2015 -0700

    CDRIVER-957: w=0 with bypassDocumentValidation set must error

 src/mongoc/mongoc-write-command.c |  7 +++++++
 tests/test-write-commands.c       | 25 ++++++++++++++++++++++---
 2 files changed, 29 insertions(+), 3 deletions(-)

commit 32c34369794f5d27219aa6a40ca608c716fa7505
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 14:39:19 2015 -0700

    Bump libbson after adding BSON_FUNC for CDRIVER-831

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 92989080764600a29ddd1b4d434329c218c8ca6c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 11:45:49 2015 -0700

    CDRIVER-831: __FUNCTION__ vs __func__

 build/future_function_templates/future.c.template |  4 +-
 src/mongoc/mongoc-bulk-operation.c                |  6 +--
 src/mongoc/mongoc-cursor.c                        |  2 +-
 src/mongoc/mongoc-trace.h                         | 14 +++---
 src/mongoc/mongoc-uri.c                           |  2 +-
 tests/TestSuite.h                                 |  8 ++--
 tests/mock_server/future.c                        | 58 +++++++++++------------
 tests/mock_server/mock-server.c                   |  2 +-
 tests/mock_server/request.c                       | 14 +++---
 tests/mongoc-tests.h                              |  2 +-
 tests/test-bulk.c                                 |  2 +-
 tests/test-conveniences.h                         |  2 +-
 12 files changed, 58 insertions(+), 58 deletions(-)

commit f7ba9c2419dd22d1193cac5d5555e63543d03ef1
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 11:29:03 2015 -0700

    Remove now unused and reduntant function

 tests/test-libmongoc.c | 44 +-------------------------------------------
 1 file changed, 1 insertion(+), 43 deletions(-)

commit 3d51d3b5e57c47ef3904fade9fb452430d933a1d
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 11:27:07 2015 -0700

    Fix redeclaration after wrong merge conflict fix

 tests/test-libmongoc.h | 1 -
 1 file changed, 1 deletion(-)

commit fca1597861e2088af8e6b699a2987b90b8fa000f
Merge: e18a4c8 46ff8b2
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 23 11:26:01 2015 -0700

    Merge branch 'r1.2'
    
    * r1.2:
      CDRIVER-939: Test with domain socket connection
      CDRIVER-939: Simplify error message
      CDRIVER-939: Unix Domain Sockets don't support TCP_NODELAY
      CDRIVER-939: strerror message on UNIX domain socket connection failure
      CDRIVER-939: Fixed UNIX domain socket connection

commit e18a4c80ef68d4209aa0fa49440324f398c735bf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 22 17:47:11 2015 -0400

    CDRIVER-953 del references to python bindings
    
    Left over from a cancelled project.

 build/autotools/CheckProgs.m4    |  1 -
 build/autotools/SetupAutomake.m4 |  3 --
 build/autotools/m4/ax_python.m4  | 98 ----------------------------------------
 build/rpm/mongo-c-driver.spec    |  4 +-
 4 files changed, 1 insertion(+), 105 deletions(-)

commit 46ff8b223da8efa86aba65daec1114c9359ec3ea
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 22 11:54:29 2015 -0700

    CDRIVER-939: Test with domain socket connection

 tests/test-libmongoc.c                      | 82 +++++++++++++++++++++++++++++
 tests/test-libmongoc.h                      | 10 +++-
 tests/test-mongoc-client.c                  | 28 ++++++++++
 tests/test-mongoc-server-selection-errors.c | 61 ++++++++++++++++++---
 4 files changed, 173 insertions(+), 8 deletions(-)

commit 20c676d7b347082da42b686b623f8e118f0e4a56
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 22 11:53:49 2015 -0700

    CDRIVER-939: Simplify error message

 src/mongoc/mongoc-topology-scanner.c | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

commit 831c3f241fe7cf03838e7236ff84a06739558467
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 22 11:52:03 2015 -0700

    CDRIVER-939: Unix Domain Sockets don't support TCP_NODELAY
    
    And don't support TCP in general =)

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ce09b0bf5af8be1bb490690e62ad7e10ae0768d8
Author: u2yg <u2yg@users.noreply.github.com>
Date:   Thu Oct 15 16:54:21 2015 +0200

    CDRIVER-939: strerror message on UNIX domain socket connection failure

 src/mongoc/mongoc-topology-scanner.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 6614693e481b3614a8ae8af2dc10bac2c768a82a
Author: u2yg <u2yg@users.noreply.github.com>
Date:   Thu Oct 15 16:50:10 2015 +0200

    CDRIVER-939: Fixed UNIX domain socket connection

 src/mongoc/mongoc-topology-scanner.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f635aa6ee7a8fe4f617fa284c98b4219bc5c3016
Merge: 43f9e1b 54ecc98
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 22 13:36:09 2015 -0700

    Merge branch 'r1.2'
    
    * r1.2:
      CDRIVER-940: Fix build on (older) mingw
      CDRIVER-948 enable poll on buffered streams
      CDRIVER-948 don't stream_wait in fetch_stream_pooled
      CDRIVER-673 fix some tests that fail with SSL
      fix URI used in tests
      CDRIVER-673 add test certificates
      CDRIVER-673 add SSL mongo-orchestration config

commit 54ecc98739001cab79bd02ef933806f3b6eaad58
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 21 10:59:44 2015 -0700

    CDRIVER-940: Fix build on (older) mingw
    
    Although ETIMEDOUT is defined in certain cases, it doesn't necessarily
    contain the same value as WSAETIMEDOUT.

 src/mongoc/mongoc-thread-private.h | 2 +-
 src/mongoc/mongoc-topology.c       | 8 ++++++++
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 614544efe1f6214df3ba3152a12b2773c87d29d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 22:34:41 2015 -0400

    CDRIVER-948 enable poll on buffered streams
    
    Although the previous commit removes the need for this, it's a bug
    waiting to happen again: if a stream is wrapped in more than one
    layer it can't be passed to mongoc_stream_poll. Now, we unwrap until
    we reach the real base stream before calling poll.

 src/mongoc/mongoc-stream.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 709532e3e629ad1fb40f7686a581dbe36dbf881c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 22:31:58 2015 -0400

    CDRIVER-948 don't stream_wait in fetch_stream_pooled
    
    Not needed: mongoc_cluster_fetch_stream_pooled ultimately calls
    mongoc_client_default_stream_initiator, hence mongoc_client_connect_tcp,
    which awaits connectTimeoutMS for the connection to be established.
    
    Calling mongoc_stream_wait in pooled mode with SSL failed with EINVAL:
    "stream" is a socket stream, wrapped in a TLS stream, wrapped in a
    buffered stream. You can pass a socket stream or TLS stream to
    mongoc_stream_poll, but you can't pass a buffered stream since a
    buffered stream doesn't implement poll().

 src/mongoc/mongoc-cluster.c | 13 -------------
 1 file changed, 13 deletions(-)

commit abe5d6b1672e65ed98c5f5fcd206c97b844f868d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 20:24:38 2015 -0400

    CDRIVER-673 fix some tests that fail with SSL

 tests/test-libmongoc.c       | 4 +++-
 tests/test-libmongoc.h       | 1 +
 tests/test-mongoc-client.c   | 2 ++
 tests/test-mongoc-topology.c | 3 +++
 4 files changed, 9 insertions(+), 1 deletion(-)

commit 5c8d2d547726084a1b414f7463a6419540a4c898
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 20:00:56 2015 -0400

    fix URI used in tests

 tests/test-libmongoc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c73c2281ef5e6bfee30b330e08f7ce2bf517e30a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 21 08:39:34 2015 -0400

    CDRIVER-673 add test certificates
    
    Copied from the server repo. Not all are yet used in tests.

 .mci.yml                                           | 28 +++++++++++-
 orchestration_configs/certificates/ca.pem          | 48 ++++++++++++++++++++
 orchestration_configs/certificates/client.pem      | 48 ++++++++++++++++++++
 orchestration_configs/certificates/crl.pem         | 38 ++++++++++++++++
 .../certificates/password_protected.pem            | 51 ++++++++++++++++++++++
 orchestration_configs/certificates/server.pem      | 48 ++++++++++++++++++++
 orchestration_configs/servers/ssl.json             |  6 +--
 7 files changed, 261 insertions(+), 6 deletions(-)

commit 4b06b864963a24b2d36de36eeded674f4d0b31a9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 22:32:43 2015 -0400

    CDRIVER-673 add SSL mongo-orchestration config

 .mci.yml                               |  2 +-
 orchestration_configs/servers/ssl.json | 20 ++++++++++++++++++++
 2 files changed, 21 insertions(+), 1 deletion(-)

commit 43f9e1be62c34de5b8ef5f79f056305aac556b64
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 21 23:45:11 2015 -0400

    leak in mongoc_cluster_run_command_with_read_preference
    
    Memory leak in unreleased code for CDRIVER-906.

 src/mongoc/mongoc-cluster.c | 1 +
 1 file changed, 1 insertion(+)

commit 20668d515fad46b7a22039441fe492826e526294
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 21 23:43:53 2015 -0400

    compiler warning in tests

 tests/TestSuite.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bd279511addd69110427b9b301123c5f96d607bd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 21 23:43:20 2015 -0400

    leak in collection test

 tests/test-mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit 6542c20194e4394cbd8eb33bbf7aa6799116fdfc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 21 09:20:11 2015 -0400

    CDRIVER-906 NULL read prefs means PRIMARY
    
    Simplify some code that handles mongoc_read_prefs_t pointers by
    requiring that NULL is allowed and means PRIMARY almost everywhere.

 src/mongoc/mongoc-client.c             | 25 ++++---------------------
 src/mongoc/mongoc-cursor.c             | 11 +----------
 src/mongoc/mongoc-read-prefs.c         |  3 +--
 src/mongoc/mongoc-server-description.c |  5 +++++
 4 files changed, 11 insertions(+), 33 deletions(-)

commit dedda5ed36678ebe28842350c88b84aeaf6c231c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 10:27:30 2015 -0400

    CDRIVER-906 redundant error-checking code

 src/mongoc/mongoc-cursor.c | 16 ----------------
 tests/test-mongoc-client.c | 46 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 46 insertions(+), 16 deletions(-)

commit 75042ee93fed3788f34804d0abfd5926b0ea1887
Merge: d84fbab 606eee8
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 20 15:31:27 2015 -0700

    Merge branch 'r1.2'
    
    * r1.2:
      CDRIVER-944: remove whitespace from task names in evergreen project config
      CDRIVER-673 start evergreen variant for SSL
      post-release bump
      CDRIVER-943: Make sure we cleanup all temporary data
    
    Conflicts:
    	NEWS

commit 606eee8797fca87eb044afc0b6a7e5bcdcc8a4ac
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 20 10:31:20 2015 -0700

    CDRIVER-944: remove whitespace from task names in evergreen project config

 .mci.yml | 110 +++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 55 insertions(+), 55 deletions(-)

commit 200d721d158bec7d1ded3d325e831dfe22c068ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 18:16:27 2015 -0400

    CDRIVER-673 start evergreen variant for SSL

 .mci.yml | 35 +++++++++++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)

commit a7140d8fed8c06339447e8b8123a794008764c2e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 17:54:07 2015 -0400

    post-release bump

 CMakeLists.txt              | 6 +++---
 NEWS                        | 3 +++
 build/autotools/Versions.m4 | 4 ++--
 3 files changed, 8 insertions(+), 5 deletions(-)

commit d84fbab80b446fe6c559d6ab4fa035bc1cec701c
Merge: 0aa7691 e4005c3
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Tue Oct 20 11:00:07 2015 -0700

    Merge pull request #294 from Machyne/CDRIVER-946
    
    CDRIVER-946: implement mongoc_bulk_operation_set_flags

commit 87ae75c8c06267ce6bbcd2ef04a395b8b3c5ccf8
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 19 16:17:50 2015 -0700

    CDRIVER-943: Make sure we cleanup all temporary data

 .mci.yml | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 0aa7691452fd9085c0446a162b617ad267f31355
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 19 16:17:50 2015 -0700

    CDRIVER-943: Make sure we cleanup all temporary data

 .mci.yml | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e4005c337a7ea684b1bfbeb3f8fe19c847d2b4c1
Author: Matt Cotter <matt@mattwc.com>
Date:   Tue Oct 20 11:23:15 2015 -0400

    CDRIVER-946: implement mongoc_bulk_operation_set_flags

 src/mongoc/mongoc-bulk-operation.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 93c4bad6428f019c4cc456f967e614e2234e9f4a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 20 08:32:34 2015 -0400

    race in exhaust cursor tests on win32

 tests/test-mongoc-exhaust.c | 4 ++++
 1 file changed, 4 insertions(+)

commit de161eb0fe79851f8639206a564e45e0b975d254
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 19 18:43:37 2015 -0400

    CDRIVER-929 line-endings in test data files

 .gitattributes             |  1 +
 .mci.yml                   |  1 +
 tests/TestSuite.h          | 10 ++++++++++
 tests/test-mongoc-gridfs.c | 12 ++++++------
 4 files changed, 18 insertions(+), 6 deletions(-)

commit 3e11c248ef2847ae9bbbf1b3408dc8984437d41b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 19 14:00:46 2015 -0400

    CDRIVER-906 rename helper mongoc_read_prefs_is_primary_or_null

 src/mongoc/mongoc-cluster.c            | 4 ++--
 src/mongoc/mongoc-read-prefs-private.h | 3 ++-
 src/mongoc/mongoc-read-prefs.c         | 2 +-
 3 files changed, 5 insertions(+), 4 deletions(-)

commit 4e48e996c73bd603a91efed4978241d9e06b3237
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 19 14:00:13 2015 -0400

    CDRIVER-906 fix command_simple's read prefs

 src/mongoc/mongoc-client.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit aeb9ea4ac6abc95e90202eec1a69f4322aeec708
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 19 13:59:33 2015 -0400

    CDRIVER-906 new command code detects "no cmd" err

 src/mongoc/mongoc-rpc.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit f8dc09ae6f29f083869d918765a687357932ec16
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 15 18:27:42 2015 -0400

    CDRIVER-906 remove cursor->is_write_command
    
    Write commands no longer use mongoc_cursor_t.

 src/mongoc/mongoc-cursor-private.h | 1 -
 src/mongoc/mongoc-cursor.c         | 3 +--
 2 files changed, 1 insertion(+), 3 deletions(-)

commit db516758aae5488d06a39614186dfddb35f9334c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 15 18:24:26 2015 -0400

    CDRIVER-906 don't use cursor in command_simple
    
    mongoc_client_command_simple now uses mongoc_cluster_run_command,
    instead of creating a mongoc_cursor_t to execute the command.
    
    To support this change, apply_read_preferences and its callers now
    take an "is_write_command" bool, and const-correctness is cleaned up
    for mongoc_read_pref_t* parameters.

 src/mongoc/mongoc-client.c             | 75 ++++++++++++++++++++++++----------
 src/mongoc/mongoc-cluster-private.h    |  3 +-
 src/mongoc/mongoc-cluster.c            | 24 ++++++-----
 src/mongoc/mongoc-cursor.c             | 20 ++++-----
 src/mongoc/mongoc-read-prefs-private.h |  5 ++-
 src/mongoc/mongoc-read-prefs.c         | 33 ++++++++++++---
 6 files changed, 108 insertions(+), 52 deletions(-)

commit 6d68f65cda623e83aaf2caff60d5d96cb5da1d9f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 15 11:45:12 2015 -0400

    CDRIVER-906 refactor topology_server_by_id
    
    mongoc_topology_server_by_id now takes a bson_error_t to fill out if
    the server_id is invalid. Add a thread-safe API for getting topology
    type and server type at once, update apply_read_preferences to use it.

 src/mongoc/mongoc-cluster.c                      | 60 ++++++++------------
 src/mongoc/mongoc-cursor.c                       | 34 ++++++------
 src/mongoc/mongoc-read-prefs-private.h           | 16 ++++--
 src/mongoc/mongoc-read-prefs.c                   | 43 ++++++++++++---
 src/mongoc/mongoc-topology-description-private.h |  3 +-
 src/mongoc/mongoc-topology-description.c         | 22 ++++++--
 src/mongoc/mongoc-topology-private.h             |  9 ++-
 src/mongoc/mongoc-topology.c                     | 70 ++++++++++++++++++++++--
 tests/test-libmongoc.c                           | 10 +---
 tests/test-mongoc-collection.c                   |  4 +-
 tests/test-mongoc-topology.c                     |  4 +-
 tests/test-replica-set.c                         |  9 ++-
 12 files changed, 189 insertions(+), 95 deletions(-)

commit d3c5b2b833e6ca9b019321ff3d1476cf150c5626
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 19 13:57:55 2015 -0400

    CDRIVER-930 skip auth test if built without auth

 tests/test-mongoc-client.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit accab5626c7f84e06a7263297ab7f26853869551
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 19 11:04:52 2015 -0700

    CDRIVER-815: Use constant-time comparision when verifying credentials
    
    The comparision function is borrowed from libsodium.

 CMakeLists.txt                     |  3 +++
 build/autotools/WeakSymbols.m4     |  9 +++++++
 configure.ac                       |  1 +
 src/mongoc/Makefile.am             |  2 ++
 src/mongoc/mongoc-config.h.in      | 13 +++++++++
 src/mongoc/mongoc-memcmp-private.h | 36 +++++++++++++++++++++++++
 src/mongoc/mongoc-memcmp.c         | 55 ++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-scram.c          |  6 +++--
 8 files changed, 123 insertions(+), 2 deletions(-)

commit 21d7dfb00b1ca3e2d434fb713e74fd929d4d824c
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 19 11:03:32 2015 -0700

    Remove doubly listed files

 CMakeLists.txt | 2 --
 1 file changed, 2 deletions(-)

commit e066bfa2ff70ffe55b908721ebb1c48ff89b7100
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 15 13:13:36 2015 -0700

    CDRIVER-924: Uninitialized scalar variable

 src/mongoc/mongoc-server-description.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cbac8daf891d3af54acc0d1a03e734734e89716f
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 14 15:02:44 2015 -0700

    CDRIVER-893: Ensure bypassDocumentValidation works for aggregate

 src/mongoc/mongoc-collection.c |  4 +++
 tests/test-mongoc-collection.c | 75 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 79 insertions(+)

commit c952e0feb75c6d9f96319f834e72fc39e1f48d83
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 16:00:22 2015 -0700

    CDRIVER-924: Uninitialized scalar variable

 src/mongoc/mongoc-scram.c | 3 +++
 1 file changed, 3 insertions(+)

commit 70ca4a9e65cddc2815d96386dac5a99d033fc278
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 15:41:09 2015 -0700

    CDRIVER-921: Resource leak

 src/mongoc/mongoc-database.c | 1 +
 1 file changed, 1 insertion(+)

commit 85b5f3ae8a2def47f1deefcdacf13675721fa825
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 15:34:07 2015 -0700

    CDRIVER-919: Redundant test

 src/mongoc/mongoc-async-cmd.c | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit fb7a01742c53456a43bffe5193f17c057bfdc961
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 15:28:46 2015 -0700

    CDRIVER-918: Dereference null return value

 src/mongoc/mongoc-collection.c | 21 ++++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

commit d737606d853739e1cff354cc851bc9d761f5f667
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 15:24:18 2015 -0700

    CDRIVER-917: Dereference null return (stat)

 src/mongoc/mongoc-stream-tls.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 8f9a137e931c1c62d11884e2fa882ac1e8c7e7d3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 15:22:21 2015 -0700

    CDRIVER-916: Dereference after null check

 src/mongoc/mongoc-topology-description.c | 23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)

commit 8610fd804c75436d44b46fc4b1681ea58bc9d231
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 15:16:09 2015 -0700

    CDRIVER-915: Side effect in assertion

 tests/test-bulk.c              | 18 +++++++++---------
 tests/test-mongoc-cluster.c    | 17 ++++++++++-------
 tests/test-mongoc-collection.c |  9 +++++----
 tests/test-mongoc-topology.c   | 26 +++++++++++++++++---------
 tests/test-write-commands.c    |  4 ++--
 5 files changed, 43 insertions(+), 31 deletions(-)

commit dff9df0a0f3af21a23fac8604e99c42041a74d0f
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 14:50:45 2015 -0700

    CDRIVER-914: Unchecked return value

 src/mongoc/mongoc-collection.c    | 27 ++++++++++++++++++++++++---
 src/mongoc/mongoc-matcher-op.c    | 11 ++++++-----
 src/mongoc/mongoc-util-private.h  |  8 ++++++++
 src/mongoc/mongoc-write-command.c |  6 +++---
 4 files changed, 41 insertions(+), 11 deletions(-)

commit c95e1bcc71a9fba4a82b26085ad23120707945ac
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 13:42:34 2015 -0700

    CDRIVER-912: Unused value

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit abb3eb51ad6cc94e2bedb531ee0c8ee2c7c23f60
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 13:28:33 2015 -0700

    CDRIVER-911: Unused value

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dacfcb678d759925868dcc97f4d339e189459c1e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 14 11:54:19 2015 -0400

    CDRIVER-906 code layout

 src/mongoc/mongoc-cursor.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 6f2e69857f44d507c3af537191ee3128c48404c8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 14 11:54:07 2015 -0400

    CDRIVER-906 add run_command_with_read_preference
    
    Continuing work for a full-featured command function that doesn't
    create a mongoc_cursor_t. Previously I added error-parsing to
    run_command, now we need a version of run_command that accepts a read
    preference as well.

 src/mongoc/mongoc-cluster-private.h | 10 +++++
 src/mongoc/mongoc-cluster.c         | 77 ++++++++++++++++++++++++++++++++++++-
 2 files changed, 85 insertions(+), 2 deletions(-)

commit c3908a11b8cc7890988e1741c3b4e12fff1bd7b2
Merge: 23038ab e0971c8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 14 11:27:15 2015 -0700

    Merge remote-tracking branch 'upstream/r1.2'
    
    * upstream/r1.2:
      CDRIVER-934: compiler warnings under gnu99

commit e0971c8e749b0bb5a0cc5b4b5efb952902a042f7
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 14 10:22:28 2015 -0700

    CDRIVER-934: compiler warnings under gnu99

 src/mongoc/mongoc-async-cmd.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 23038aba78edc7d4e1375d7e4e8fbd5efedbe409
Merge: 9981b81 e7d6f4c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 14 11:21:33 2015 -0700

    Merge remote-tracking branch 'upstream/r1.2'
    
    * upstream/r1.2:
      CDRIVER-932: Fix typo in tutorial
      1.2.0 Release
      set libbson submodule to 1.2.0
      update solaris install instructions
      NEWS entry for 1.2.0
      CDRIVER-903: Hinted cursors should still apply read prefs
      CDRIVER-754 update list of supported platforms
      CDRIVER-881 include libbson.xsl in distribution tarball
      Change field names in 'createIndexes' command to match documentation
    
    Conflicts:
    	NEWS
    	doc/installing.page
    	src/libbson
    	src/mongoc/mongoc-client.c
    	src/mongoc/mongoc-collection.c
    	src/mongoc/mongoc-cursor-private.h
    	src/mongoc/mongoc-cursor.c

commit e7d6f4c87d7a52d0972332760c98170eb51cdd84
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 14 10:25:21 2015 -0700

    CDRIVER-932: Fix typo in tutorial

 doc/tutorial.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9981b813d658dee36f6627cef92db425bf334962
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Oct 2 17:58:52 2015 -0400

    CDRIVER-903: Hinted cursors should still apply read prefs
    
    This fixes an issue with the slaveOk bit not being set when using hint
    to query a secondary directly.
    
    We introduce a new is_write_command property on the cursor (private API
    change) to avoid setting the slaveOk bit on write commands.

 src/mongoc/mongoc-client-private.h |  1 +
 src/mongoc/mongoc-client.c         |  4 +++-
 src/mongoc/mongoc-collection.c     |  2 +-
 src/mongoc/mongoc-cursor-private.h | 15 ++++++++-------
 src/mongoc/mongoc-cursor.c         | 33 +++++++++++++++++++++------------
 src/mongoc/mongoc-write-command.c  |  2 +-
 tests/test-mongoc-collection.c     |  6 +++---
 7 files changed, 38 insertions(+), 25 deletions(-)

commit 495cd3ffa9beade31c2b410eb5e9555c7db240e1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 13 12:23:01 2015 -0400

    1.2.0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 README.rst                    | 14 +++++++-------
 build/autotools/Versions.m4   |  4 ++--
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 10 +++++-----
 doc/mongoc_version.page       |  2 +-
 7 files changed, 31 insertions(+), 19 deletions(-)

commit 44958304f799accc9b2cdb0ea434b0a3a5b218b6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 13 14:50:32 2015 -0400

    set libbson submodule to 1.2.0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d0aed89f40fbdcc6203c6749ea801df7e7a63a48
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 13 12:20:00 2015 -0400

    update solaris install instructions

 doc/installing.page | 19 ++-----------------
 1 file changed, 2 insertions(+), 17 deletions(-)

commit 27ec8288899731317dce5dcb7cbd9dcde9baaaa6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 13 10:06:20 2015 -0400

    NEWS entry for 1.2.0

 NEWS | 100 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 100 insertions(+)

commit 4a76bf0643886952a83ad10031b5d0f070306cfe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 13 09:31:24 2015 -0400

    Update libbson submodule

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 557c5a605fa369dbd2e23fb149020de6adc19456
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 13 09:29:41 2015 -0400

    fix Jira URL in man pages

 doc/mallard2man.py | 3 +--
 src/libbson        | 2 +-
 2 files changed, 2 insertions(+), 3 deletions(-)

commit 5e4fa5ced838276fcbf0f49469d970455b2c68d6
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Oct 2 17:58:52 2015 -0400

    CDRIVER-903: Hinted cursors should still apply read prefs
    
    This fixes an issue with the slaveOk bit not being set when using hint to query
    a secondary directly.
    
    We introduce a new is_write_command property on the cursor (private API change)
    to avoid setting the slaveOk bit on write commands.
    
    Conflicts:
    	src/mongoc/mongoc-collection.c
    	src/mongoc/mongoc-cursor-private.h
    	src/mongoc/mongoc-cursor.c

 src/mongoc/mongoc-client-private.h |  1 +
 src/mongoc/mongoc-client.c         |  4 +++-
 src/mongoc/mongoc-collection.c     |  4 +++-
 src/mongoc/mongoc-cursor-private.h | 17 +++++++++--------
 src/mongoc/mongoc-cursor.c         | 25 +++++++++++++++++--------
 src/mongoc/mongoc-write-command.c  |  2 +-
 tests/test-mongoc-collection.c     |  4 ++--
 7 files changed, 36 insertions(+), 21 deletions(-)

commit 8bb7ac370674e81b0b981d0960a6ef02d0b8f8e7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 12 15:56:37 2015 -0400

    CDRIVER-754 update list of supported platforms

 doc/installing.page | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit a87f8b8e5f4e82f31a4b223cf8144f50b2691c42
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 12 15:56:37 2015 -0400

    CDRIVER-754 update list of supported platforms

 doc/installing.page | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit 30a231047067b56bd318d1ff9ed2b73747b8f638
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 12 15:03:43 2015 -0400

    CDRIVER-881 include libbson.xsl in distribution tarball

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8b12a7281ee9dd33bc80cc0c585c0f504bdedc61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 12 15:03:43 2015 -0400

    CDRIVER-881 include libbson.xsl in distribution tarball

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 094716285eed1dea80c878f9a972a890e7799480
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Oct 12 11:20:26 2015 -0700

    CDRIVER-824: Add test for findAndModify + writeconcern

 build/generate-future-functions.py   | 12 +++++
 tests/mock_server/future-functions.c | 78 ++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h | 16 ++++++
 tests/test-mongoc-collection.c       | 99 +++++++++++++++++++++++++++++++++++-
 4 files changed, 203 insertions(+), 2 deletions(-)

commit f7a07b80d865a7c460fbe2e4a5b88e1bb8462dea
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 9 14:12:38 2015 -0700

    CDRIVER-824: Implement findAndModify writeConcern support

 NEWS                           |  9 ++++++++
 src/mongoc/mongoc-collection.c | 49 +++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 57 insertions(+), 1 deletion(-)

commit 2c1993b36fdc98f0a7ab1319294fb66ff2a638bd
Author: Pawel Szczurko <pszczurko@gmail.com>
Date:   Sat Oct 3 17:47:01 2015 -0400

    Change field names in 'createIndexes' command to match documentation

 src/mongoc/mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit adec8e6999fbb8f3c86bc7c7831a92886f8f70f6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 12 13:57:31 2015 -0400

    update mallard2man.py from libbson
    
    Recent fixes:
    
    * use ".B", not ".BR", in man pages
    * escape backslashes in man pages
    * CDRIVER-862 escape hyphens in man pages
    * CDRIVER-863 whatis entries for all man pages

 doc/mallard2man.py | 58 ++++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 48 insertions(+), 10 deletions(-)

commit 268d6a1d8f66b58954c0bec9764a74946c12d1d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 9 09:59:25 2015 -0500

    CDRIVER-906 move command err parsing into run_command
    
    Further preparations for separating query and command paths.
    mongoc_cluster_run_command () is going to become the main internal
    implementation of commands, so it should take responsibility for
    parsing command errors.

 src/mongoc/mongoc-cluster-private.h |   8 ++
 src/mongoc/mongoc-cluster.c         | 270 +++++++++++++++++++-----------------
 src/mongoc/mongoc-cursor.c          |  19 ++-
 src/mongoc/mongoc-rpc-private.h     |   5 +-
 src/mongoc/mongoc-rpc.c             |  79 ++++++++---
 tests/mock_server/mock-server.c     |   6 +-
 tests/test-mongoc-client.c          |  49 +++++++
 7 files changed, 275 insertions(+), 161 deletions(-)

commit 5f7947c3bc4523f3a0d0566b52db0957c89540ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 9 09:54:14 2015 -0500

    better test output when request flags don't match

 tests/mock_server/request.c | 24 +++++++++++++++++++-----
 1 file changed, 19 insertions(+), 5 deletions(-)

commit c1712814a9b0ab882f5303f7e45a54ee3b5c93c7
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 8 15:22:21 2015 -0700

    CDRIVER-893: Support bypassDocumentValidation

 src/mongoc/mongoc-bulk-operation-private.h | 31 ++++++-----
 src/mongoc/mongoc-bulk-operation.c         | 33 ++++++++----
 src/mongoc/mongoc-bulk-operation.h         |  6 +++
 src/mongoc/mongoc-collection.c             | 22 ++++----
 src/mongoc/mongoc-write-command-private.h  | 22 ++++++--
 src/mongoc/mongoc-write-command.c          | 46 ++++++++--------
 tests/TestSuite.h                          |  7 +++
 tests/test-bulk.c                          |  2 +-
 tests/test-libmongoc.c                     | 30 ++++++-----
 tests/test-libmongoc.h                     |  3 +-
 tests/test-write-commands.c                | 86 +++++++++++++++++++++++++++++-
 11 files changed, 211 insertions(+), 77 deletions(-)

commit 6fca474f03f6f3c956ad70700443d89c2f50bf87
Merge: 611365f f3410ef
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Oct 9 23:02:14 2015 -0500

    Merge pull request #291 from ksuarz/CDRIVER-869
    
    CDRIVER-869: check for missing GridFS chunks

commit 611365fb3399e996c00094bd14117ad509c1c211
Merge: 2d74f3d 91d3b47
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Oct 9 23:01:50 2015 -0500

    Merge pull request #290 from ksuarz/feature/extend
    
    CDRIVER-870: sane GridFS behavior past end-of-file

commit 2d74f3dcfc11c47067178fd8ae535fc235ec9325
Merge: 1053432 78cb7f2
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Oct 9 23:01:19 2015 -0500

    Merge pull request #289 from ksuarz/bugfix/leak
    
    CDRIVER-920: fix leak in `_mongoc_gridfs_new()`

commit 10534325715af6bc68eea29ec168a67c5a79d2a1
Merge: 59b5bf7 b31fee7
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Oct 9 23:00:55 2015 -0500

    Merge pull request #287 from ksuarz/bugfix/read-prefs
    
    CDRIVER-512: GridFS ignores read preference

commit 59b5bf71123ba3ff6262df19e20d37ce5109932e
Merge: 61763c3 b5f1134
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Oct 9 22:59:13 2015 -0500

    Merge pull request #288 from ksuarz/feature/osx-install-docs
    
    CDRIVER-802: Mac OS X installation documentation

commit 91d3b473321680cb4e01321fdc6315293fd8f71c
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Oct 9 16:20:26 2015 -0400

    fix typo

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e023d33be3183eddfd6c5ef8bde0c1d9856cd387
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Wed Sep 30 16:48:38 2015 -0400

    CDRIVER-870 update memset0 to invalidate read buf

 src/mongoc/mongoc-gridfs-file-page.c | 10 ++++++----
 src/mongoc/mongoc-gridfs-file.c      |  2 +-
 tests/test-mongoc-gridfs-file-page.c | 10 +++-------
 tests/test-mongoc-gridfs.c           |  7 +++++--
 4 files changed, 15 insertions(+), 14 deletions(-)

commit 394dc7c85492151d5134967a1eb76746aee74a24
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 18:42:44 2015 -0400

    comment fixes and clarifications

 src/mongoc/mongoc-gridfs-file.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1773e9e6529aaa021da3fe805c1192c431b0a1d1
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 17:24:09 2015 -0400

    update gridfs readv() to match fread() behavior
    
    When seeking past the end of a file, an attempt to read should return 0 rather
    than 1.
    
    The test /GridFS/read has been updated to test this behavior.

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 tests/test-mongoc-gridfs.c      | 6 ++++++
 2 files changed, 7 insertions(+), 1 deletion(-)

commit b5f113489f38a19136e034d6411016f67283db61
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Oct 9 09:25:51 2015 -0400

    CDRIVER-802 add os x install instructions in html

 README.rst          | 13 +++++--------
 doc/installing.page |  8 ++++++++
 2 files changed, 13 insertions(+), 8 deletions(-)

commit b31fee7041a3c096c39055dc54df588b2ce3ddaf
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Oct 9 10:52:54 2015 -0400

    CDRIVER-512 gridfs ignores read preference

 doc/mongoc_gridfs_t.page | 3 +++
 1 file changed, 3 insertions(+)

commit 78cb7f2551fca29939e36fd3588dcc150246a54e
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Oct 9 14:36:24 2015 -0400

    CDRIVER-920 fix leak in _mongoc_gridfs_new

 src/mongoc/mongoc-gridfs.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit f0e38e66a1feeb01b555afff6cf0d859df686be8
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Aug 31 17:10:55 2015 -0400

    CDRIVER-802 os x install docs in readme

 README.rst | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit f3410ef26bfb9865308af7b6dfb1bfaef7102d97
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Oct 8 16:27:43 2015 -0400

    CDRIVER-869 check for missing gridfs chunks

 src/mongoc/mongoc-gridfs-file.c | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 873993e439aaaf573e2d39707b98dbba4b8d93b6
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 17:21:11 2015 -0400

    _mongoc_gridfs_file_page_memset0 improvements
    
    _mongoc_gridfs_file_page_memset0 returns a bool to indicate success or failure,
    rather than the number of bytes set.
    
    The corresponding test has been renamed for consistency.

 src/mongoc/mongoc-gridfs-file-page-private.h | 2 +-
 src/mongoc/mongoc-gridfs-file-page.c         | 6 +++---
 src/mongoc/mongoc-gridfs-file.c              | 7 ++-----
 tests/test-mongoc-gridfs-file-page.c         | 4 ++--
 4 files changed, 8 insertions(+), 11 deletions(-)

commit e2c174ec427350d4440b9baa0fa3a4d66f72fb30
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Sep 25 15:23:21 2015 -0400

    CDRIVER-870 write past end of gridfs file
    
    Writing past the end of a GridFS file now extends it and fills the gap space
    with zero bytes.
    
    New functions:
        _mongoc_gridfs_file_extend()
        _mongoc_gridfs_file_page_memset0()
    
    More tests added to test this behavior.

 src/mongoc/mongoc-gridfs-file-page.c |  2 ++
 src/mongoc/mongoc-gridfs-file.c      | 40 ++++++++++++++++++++----------------
 tests/test-mongoc-gridfs-file-page.c | 34 ++++++++++++++++++++++++++++++
 tests/test-mongoc-gridfs.c           | 19 +++++++++++++++++
 4 files changed, 77 insertions(+), 18 deletions(-)

commit 41ff10db2340b6623f5e9743765ea7c6d0464a7b
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 24 16:23:41 2015 -0400

    CDRIVER-870 add gridfs file extension function
    
    You can mongoc_gridfs_file_seek() past the end of a file and call
    mongoc_gridfs_file_extend() to extend the file to the new position. The
    extended space is filled with zeroes with mongoc_gridfs_file_page_memset0().

 src/mongoc/mongoc-gridfs-file-page-private.h |  2 +
 src/mongoc/mongoc-gridfs-file-page.c         | 47 +++++++++++++++++--
 src/mongoc/mongoc-gridfs-file.c              | 70 ++++++++++++++++++++++++++++
 3 files changed, 115 insertions(+), 4 deletions(-)

commit 277b7056e17721d894ed421cfe16b8f74f3ddff6
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Wed Sep 23 14:51:14 2015 -0400

    CDRIVER-870 error on readv past end-of-file
    
    Attempting to call mongoc_gridfs_file_readv() after seeking past the end of the
    file now results in an error.

 src/mongoc/mongoc-gridfs-file.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 61763c3bd5cd79eac424f5e4e3a918f430dc02c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 7 22:39:59 2015 -0400

    regenerate test functions

 tests/mock_server/future-functions.c | 64 +++++++++++-------------------------
 1 file changed, 20 insertions(+), 44 deletions(-)

commit 9470dba64fa060de585f49ee05b22aa8d636e935
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 7 10:22:32 2015 -0400

    CDRIVER-906 move read pref & error logic from mongoc-cursor.c
    
    Preparing to separate command path from query path. No new code, just
    moving from mongoc-cursor.c the code that will be shared between
    commands and queries: the logic to apply a read preference to an
    OP_QUERY, and the logic to turn an OP_REPLY into a bson_error_t.

 src/mongoc/mongoc-cursor.c             | 280 ++-------------------------------
 src/mongoc/mongoc-read-prefs-private.h |   7 +
 src/mongoc/mongoc-read-prefs.c         | 164 ++++++++++++++++++-
 src/mongoc/mongoc-rpc-private.h        |  27 ++--
 src/mongoc/mongoc-rpc.c                | 115 +++++++++++++-
 5 files changed, 311 insertions(+), 282 deletions(-)

commit 973c0f0e24266e2bda66312c1b128c05ea0c93c9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 6 10:00:50 2015 -0400

    CDRIVER-807 remove list of secondary-ok commands
    
    All commands now obey read preference.

 src/mongoc/mongoc-cursor-private.h |  1 -
 src/mongoc/mongoc-cursor.c         | 57 ----------------------------
 tests/test-libmongoc.c             | 76 +++++++++++++++++++++++++++++++++++---
 tests/test-libmongoc.h             |  2 +
 tests/test-mongoc-client.c         | 12 +++---
 5 files changed, 80 insertions(+), 68 deletions(-)

commit 1ca32c135885f60b2cd2b0d29ac299e7f9a86d0b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 7 18:01:51 2015 -0400

    Update libbson submodule to latest master.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1c0883e966623615c14ffe5839aa6798ccdd788e
Merge: f8dd056 f357df4
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 7 14:53:11 2015 -0700

    Merge branch 'r1.2'
    
    * r1.2:
      Be a little bit more selective on DEBUG messages

commit f357df447a1a4a8bcee73869499629c43b9d6644
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Oct 7 09:44:35 2015 -0700

    Be a little bit more selective on DEBUG messages

 src/mongoc/mongoc-cluster.c              | 4 ++--
 src/mongoc/mongoc-stream-tls.c           | 3 +--
 src/mongoc/mongoc-topology-description.c | 4 ++--
 3 files changed, 5 insertions(+), 6 deletions(-)

commit f8dd056ee2b8bf43683c8708bd41b951ed45bdfd
Merge: be11f80 1d20ef6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 7 17:12:29 2015 -0400

    Merge branch '1.3.0-dev'
    
    # By Kyle Suarez (23) and others
    # Via A. Jesse Jiryu Davis (7) and Hannes Magnusson (4)
    * 1.3.0-dev: (26 commits)
      CDRIVER-889: Add support for `partialFilterExpression` index
      Fix format warnings with appropriate casts
      More GridFS features in mock server framework
      WIP updating to use int comp macros
      Update integer comparison macros for test suite
      Update mock server with GridFS type
      CDRIVER-511 tests don't save between reads/writes
      CDRIVER-511 invalidate gridfs read buf on write
      CDRIVER-871 check value of gridfs page refresh
      CDRIVER-867 assert rather than EBADF
      CDRIVER-867 update official seek documentation
      CDRIVER-867 style fixes
      CDRIVER-867 more errors for gridfs seek
      CDRIVER-765 fix comments and type of page->n
      Test GridFS operations over chunk boundaries
      CDRIVER-765 comment and style changes
      CDRIVER-765 track gridfs file's chunk number
      CDRIVER-765 fix incorrect sign comparison
      CDRIVER-509 style fixes in test
      CDRIVER-509 update empty file test
      ...
    
    Conflicts:
    	src/mongoc/mongoc-gridfs-file.c

commit be11f80d256b9b108e524e78afc42cf391a01288
Merge: df4d1f3 413e60c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 7 17:08:14 2015 -0400

    Merge branch '1.2.0-dev'
    
    * 1.2.0-dev: (557 commits)
      CDRIVER-696 fix test when server isn't on 27017
      Ignore stray files/changes in submodules
      CDRIVER-901 document bulk write error domains
      CDRIVER-901 update bson_error_t from write concern err
      CDRIVER-907 crash retrieving invalid server description
      MONGOC_TEST_FUTURE_TIMEOUT_MS environment variable
      Update documentation for wtimeout_msec write concern params
      Fix parameter indentation for mongoc_write_concern_set_wtimeout()
      CDRIVER-851: Negative wtimeout values are invalid
      Skip test on mongos (mongos returns indiviaul shards status)
      CDRIVER-902: Bump libbson to 1.2.0-dev so Solaris build work again
      CDRIVER-888: inprog, killop & unlock are commands now, not queries
      CDRIVER-822 clean generated HTML docs/man pages
      Fix expectations on windows
      CDRIVER-900: Print debug error messaging to stderr
      post-release bump
      1.2.0-rc0 Release
      CDRIVER-697 no bson_return calls in tests
      merge 1.1.11 release notes
      NEWS file layout
      ...

commit 413e60cfdbb91ffe867f37ba5a029c0fcd5f02cd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Oct 7 15:19:58 2015 -0400

    CDRIVER-696 fix test when server isn't on 27017

 tests/test-mongoc-server-selection-errors.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 1d20ef6cdd7c00e2ee5e121cb3305b7a0f30f631
Merge: 7985223 f12ca74
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Oct 7 15:42:20 2015 -0400

    Merge pull request #286 from ksuarz/improvement/tests
    
    More GridFS test enhancements

commit 827d2d8a3c8aead7b0b09f600d778cfd4c967d80
Merge: 2c9f0bf 934dd33
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Oct 7 14:25:16 2015 -0400

    Merge pull request #270 from jmikola/cdriver-851
    
    CDRIVER-851: Negative wtimeout values are invalid

commit 7985223ec643b3ab5fce2c3eaeb61b4710adca12
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 2 15:53:51 2015 -0700

    CDRIVER-889: Add support for `partialFilterExpression` index

 doc/mongoc_index_opt_t.page    |  7 ++++++-
 src/mongoc/mongoc-collection.c |  3 +++
 src/mongoc/mongoc-index.c      | 41 ++++++++++++++++++++++++-----------------
 src/mongoc/mongoc-index.h      |  9 +++++----
 4 files changed, 38 insertions(+), 22 deletions(-)

commit f12ca7490f5e6b7ade30d670c3752dc58299b0be
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Oct 6 22:06:52 2015 -0400

    Fix format warnings with appropriate casts

 tests/TestSuite.h          |  4 +--
 tests/test-mongoc-gridfs.c | 74 +++++++++++++++++++++++-----------------------
 2 files changed, 39 insertions(+), 39 deletions(-)

commit 44a638764ee02e72f2b4e6fcfa404b97f6394ccb
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Oct 6 21:01:46 2015 -0400

    More GridFS features in mock server framework

 build/generate-future-functions.py   |  26 ++++++
 tests/mock_server/future-functions.c | 162 +++++++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h |  30 +++++++
 tests/mock_server/future-value.c     |  70 +++++++++++++++
 tests/mock_server/future-value.h     |  57 ++++++++++++
 tests/mock_server/future.c           |  55 ++++++++++++
 tests/mock_server/future.h           |  15 ++++
 7 files changed, 415 insertions(+)

commit 2c9f0bff6817684c3fe6232961c318a83af57117
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Oct 6 15:57:20 2015 -0700

    Ignore stray files/changes in submodules

 .gitmodules | 1 +
 1 file changed, 1 insertion(+)

commit f880d1911e0976e05b232cca777a8920e7d7e237
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 5 18:13:47 2015 -0400

    CDRIVER-901 document bulk write error domains

 doc/bulk.page | 2 ++
 1 file changed, 2 insertions(+)

commit 5ea44ed8c59eaf20120e173144f8691d86ce5c3d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 5 18:13:37 2015 -0400

    CDRIVER-901 update bson_error_t from write concern err

 src/mongoc/mongoc-error.h         |   1 +
 src/mongoc/mongoc-write-command.c | 116 +++++++++++++++++++++++++----------
 tests/test-bulk.c                 | 123 ++++++++++++++++++++++++++++++++------
 3 files changed, 192 insertions(+), 48 deletions(-)

commit b98b145fd733b0263412e03f2f2c47c4f1c169bb
Merge: c0a7356 4190c8f
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Oct 6 12:15:33 2015 -0400

    Merge pull request #284 from ksuarz/feature/gridfs-tests
    
    [WIP] GridFS test improvements

commit 4190c8f00cc19e52beabf3bc4766aeb615732154
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Oct 6 11:20:03 2015 -0400

    WIP updating to use int comp macros

 tests/test-mongoc-gridfs.c | 162 ++++++++++++++++++++++-----------------------
 1 file changed, 81 insertions(+), 81 deletions(-)

commit 9183ac61fa6c322872d26fa19b253cbffd179609
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Oct 6 11:19:45 2015 -0400

    Update integer comparison macros for test suite

 tests/TestSuite.h | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

commit 971f6fa5104022a181eb6525d3934ca1b4893b5f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Oct 6 10:03:07 2015 -0400

    CDRIVER-907 crash retrieving invalid server description

 src/mongoc/mongoc-server-description.c |  6 +++++-
 tests/test-mongoc-topology.c           | 14 ++++++++++++++
 2 files changed, 19 insertions(+), 1 deletion(-)

commit ec47e543bc94604dd3a7d69e922f48c0b5d8e646
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Oct 5 18:12:58 2015 -0400

    MONGOC_TEST_FUTURE_TIMEOUT_MS environment variable
    
    Prevents mock server test framework from timing
    out when you are stopped at a breakpoint.

 build/future_function_templates/future.c.template | 17 +++++++---
 tests/mock_server/future.c                        | 17 +++++++---
 tests/test-libmongoc.c                            | 39 +++++++++++++++++++++++
 tests/test-libmongoc.h                            |  2 ++
 4 files changed, 67 insertions(+), 8 deletions(-)

commit 70fa8395921e0e3f735c77328973647ee14056e2
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Oct 5 17:39:14 2015 -0400

    Update mock server with GridFS type

 build/generate-future-functions.py   |  8 ++++++
 tests/mock_server/future-functions.c | 54 ++++++++++++++++++++++++++++++++++++
 tests/mock_server/future-functions.h | 10 +++++++
 tests/mock_server/future-value.c     | 14 ++++++++++
 tests/mock_server/future-value.h     | 12 ++++++++
 tests/mock_server/future.c           | 11 ++++++++
 tests/mock_server/future.h           |  3 ++
 7 files changed, 112 insertions(+)

commit 934dd338b3717e5235659b20d9349e7dfd3f6365
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Sun Sep 20 15:28:21 2015 -0400

    Update documentation for wtimeout_msec write concern params

 doc/mongoc_write_concern_set_wmajority.page | 3 ++-
 doc/mongoc_write_concern_set_wtimeout.page  | 4 ++--
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 14a2705334374aa2c3cbfb2a5f507a0483dee4d7
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Sun Sep 20 15:27:49 2015 -0400

    Fix parameter indentation for mongoc_write_concern_set_wtimeout()

 src/mongoc/mongoc-write-concern.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f4cb748aaa28abf15c8396f2e3209ef46ee7b821
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Sep 17 13:47:48 2015 -0400

    CDRIVER-851: Negative wtimeout values are invalid

 src/mongoc/mongoc-write-concern.c | 23 ++++++++++++++++++++---
 tests/test-mongoc-write-concern.c | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 53 insertions(+), 3 deletions(-)

commit 7415d3468de0c500fd6e630f7b52be181cbb66b3
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 2 14:22:32 2015 -0700

    Skip test on mongos (mongos returns indiviaul shards status)

 tests/test-libmongoc.c         | 11 +++++++++++
 tests/test-libmongoc.h         |  2 ++
 tests/test-mongoc-collection.c |  4 ++--
 3 files changed, 15 insertions(+), 2 deletions(-)

commit 5f7fd402e657981d128efd68b8ef5794a1700028
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 2 11:48:41 2015 -0700

    CDRIVER-902: Bump libbson to 1.2.0-dev so Solaris build work again

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1ad5c28458a39238d313d9b41796f21ed9193a43
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Oct 2 11:15:25 2015 -0700

    CDRIVER-888: inprog, killop & unlock are commands now, not queries
    
    We don't expose any helpers for these, but did use inprog in testing

 src/mongoc/mongoc-client.c     |  3 +--
 tests/test-mongoc-collection.c | 23 +++++++++++++----------
 2 files changed, 14 insertions(+), 12 deletions(-)

commit 9fc7fc00d646a2b636cb16867d424d3fe4158989
Merge: 678bc6a 2d3cf91
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Fri Oct 2 11:26:11 2015 -0700

    Merge pull request #281 from ksuarz/improvement/clean-docs
    
    CDRIVER-822: clean generated documentation

commit 2d3cf91fcdd6b43aab95934a19d1e9e134b84cc5
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Sep 28 15:51:01 2015 -0400

    CDRIVER-822 clean generated HTML docs/man pages
    
    Added new rules: "html-clean" and "man-clean".
    
    Yelp HTML files added to CLEANFILES.
    
    Thanks @bjori for the help and suggestions.

 doc/Makefile.am | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 678bc6a4180a83d1d5ac0bb8e0a119473d70849b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 30 16:10:09 2015 -0700

    Fix expectations on windows

 tests/test-mongoc-async.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit c86e5d2b8412d97a9109ef1dc501ab7cce7f08d5
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 1 11:18:56 2015 -0700

    CDRIVER-900: Print debug error messaging to stderr

 tests/ha-test.c                 |  4 ++--
 tests/json-test.c               |  8 ++++----
 tests/mock_server/mock-server.c |  2 +-
 tests/test-bulk.c               |  2 +-
 tests/test-libmongoc.c          |  4 ++--
 tests/test-mongoc-client.c      |  2 +-
 tests/test-mongoc-exhaust.c     |  6 +++---
 tests/test-mongoc-matcher.c     |  2 +-
 tests/test-mongoc-rpc.c         | 10 +++++-----
 tests/test-mongoc-sdam.c        |  4 ++--
 10 files changed, 22 insertions(+), 22 deletions(-)

commit 904869e7cdd85d48b9b204fdaf108ca8d4568b99
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Oct 2 07:28:21 2015 -0400

    post-release bump

 CMakeLists.txt                | 4 ++--
 build/autotools/Versions.m4   | 2 +-
 build/rpm/mongo-c-driver.spec | 5 ++---
 doc/mongoc_version.page       | 2 +-
 4 files changed, 6 insertions(+), 7 deletions(-)

commit c45526094073e13f2c391c8057fa39e77d20b6b4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 16:56:44 2015 -0400

    1.2.0-rc0 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 37 ++++++++++++++++++++++++++++++++++++-
 README.rst                    | 10 +++++-----
 build/autotools/Versions.m4   |  4 ++--
 build/rpm/mongo-c-driver.spec |  4 ++--
 doc/mongoc_version.page       |  6 +++---
 src/libbson                   |  2 +-
 7 files changed, 51 insertions(+), 16 deletions(-)

commit 5c9d4b23809810c069fa82ff13318aa2c7697d25
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 17:53:54 2015 -0400

    CDRIVER-697 no bson_return calls in tests

 tests/ha-test.c                      | 14 +++++++-------
 tests/test-mongoc-server-selection.c |  4 ++--
 2 files changed, 9 insertions(+), 9 deletions(-)

commit 3c9b8832ba226a5dcb93edd3345d9eb869b75545
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 17:09:38 2015 -0400

    merge 1.1.11 release notes

 NEWS | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)

commit 720deaf4bfec962b2622f7492db606945459a70b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 17:11:00 2015 -0400

    NEWS file layout

 NEWS | 6 ++++++
 1 file changed, 6 insertions(+)

commit 66e0cfbe3ac930a95bce4b18801715d74118ff7a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 16:52:48 2015 -0400

    typo in installation doc

 doc/installing.page | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 6873346f9ca15bfe85d0a095f498b6e3e0e4b196
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 30 12:33:23 2015 -0700

    CDRIVER-894: Race condition in connecting to node

 src/mongoc/mongoc-cluster.c        | 29 +++++++++++++-
 src/mongoc/mongoc-stream-private.h |  4 ++
 src/mongoc/mongoc-stream.c         | 80 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 111 insertions(+), 2 deletions(-)

commit af2eece74e85825f30b2125de5e093cb9c396340
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 16:44:16 2015 -0400

    CDRIVER-892 remove newline from err message

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3287d5c152303024747258a615577517e36570cf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 14:59:51 2015 -0400

    CDRIVER-834 deprecate mongoc_client_kill_cursor

 NEWS                       | 8 ++++++++
 src/mongoc/mongoc-client.h | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit efb3060928428732bdb19251a655d32818b0f19f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 14:55:22 2015 -0400

    typo in NEWS

 NEWS | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 65a55220437d817d21f5a1d603029dcf0ed0c335
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Oct 1 11:51:11 2015 -0700

    CDRIVER-697: Fix windows build (strcasecmp)

 src/mongoc/mongoc-cursor.c               | 1 +
 src/mongoc/mongoc-server-description.c   | 1 +
 src/mongoc/mongoc-stream.c               | 1 +
 src/mongoc/mongoc-topology-description.c | 1 +
 src/mongoc/mongoc-uri.c                  | 1 +
 5 files changed, 5 insertions(+)

commit 07c17ce8b5192cb2410480dfc86d794809ff5479
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Oct 1 13:37:33 2015 -0400

    CDRIVER-697 no bson_return_val_if_fail in RPC code

 src/mongoc/mongoc-rpc.c | 18 ------------------
 1 file changed, 18 deletions(-)

commit dbb54230410d27b307cb5f2b9f4cf0f381fe0c55
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 30 17:47:47 2015 -0400

    CDRIVER-697 use assert, not BSON_ASSERT, in rpc code

 src/mongoc/mongoc-rpc.c | 38 +++++++++++++++++++-------------------
 1 file changed, 19 insertions(+), 19 deletions(-)

commit 1941a0a6fd7271ac26d7a3a152df30f810a662a8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 30 17:40:53 2015 -0400

    CDRIVER-697 don't use bson_return functions.
    
    BSON_ASSERT will become a release-build runtime check, so use it
    everywhere.

 src/mongoc/mongoc-array.c                |  8 ++--
 src/mongoc/mongoc-async-cmd.c            |  8 ++--
 src/mongoc/mongoc-buffer.c               | 24 +++++-----
 src/mongoc/mongoc-bulk-operation.c       | 44 +++++++++---------
 src/mongoc/mongoc-client-pool.c          | 14 +++---
 src/mongoc/mongoc-client.c               | 70 ++++++++++++++--------------
 src/mongoc/mongoc-cluster.c              | 44 +++++++++---------
 src/mongoc/mongoc-collection.c           | 78 ++++++++++++++++----------------
 src/mongoc/mongoc-cursor.c               | 27 ++++++-----
 src/mongoc/mongoc-database.c             | 38 ++++++++--------
 src/mongoc/mongoc-gridfs-file.c          | 10 ++--
 src/mongoc/mongoc-gridfs.c               |  8 ++--
 src/mongoc/mongoc-init.c                 |  2 +-
 src/mongoc/mongoc-list.c                 |  4 +-
 src/mongoc/mongoc-log.c                  |  2 +-
 src/mongoc/mongoc-queue.c                | 14 +++---
 src/mongoc/mongoc-read-prefs.c           | 12 ++---
 src/mongoc/mongoc-server-description.c   |  9 ++--
 src/mongoc/mongoc-set.c                  |  4 +-
 src/mongoc/mongoc-socket.c               | 46 +++++++++----------
 src/mongoc/mongoc-ssl.c                  |  2 +-
 src/mongoc/mongoc-stream-buffered.c      | 16 +++----
 src/mongoc/mongoc-stream-file.c          | 10 ++--
 src/mongoc/mongoc-stream-socket.c        | 18 ++++----
 src/mongoc/mongoc-stream-tls.c           |  2 +-
 src/mongoc/mongoc-stream.c               | 39 ++++++++--------
 src/mongoc/mongoc-topology-description.c | 43 +++++++++---------
 src/mongoc/mongoc-topology-scanner.c     |  4 +-
 src/mongoc/mongoc-topology.c             |  8 ++--
 src/mongoc/mongoc-uri.c                  | 55 +++++++++++-----------
 src/mongoc/mongoc-util-private.h         | 10 ----
 src/mongoc/mongoc-util.c                 |  4 +-
 src/mongoc/mongoc-write-concern.c        | 30 ++++++------
 33 files changed, 346 insertions(+), 361 deletions(-)

commit 05a6bcd5951a748536ea88c2173018c3051cc8d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 30 23:04:33 2015 -0400

    CDRIVER-897 report error or timeout from ismaster

 src/mongoc/mongoc-topology-scanner.c | 10 ++++++++++
 tests/test-mongoc-topology.c         | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 43 insertions(+)

commit c0a7356f5564ecd7d04488dcfd98aa18137296ea
Merge: df2c2d1 e7a7d9c
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Thu Oct 1 09:25:55 2015 -0700

    Merge pull request #279 from ksuarz/CDRIVER-511
    
    CDRIVER-511: Allow interleaving GridFS reads/writes

commit df2c2d1111946fa5788fd6c7df37ae903917e7cc
Merge: 1f64cb4 f7f4ead
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Thu Oct 1 09:25:47 2015 -0700

    Merge pull request #275 from ksuarz/improvement/refresh
    
    CDRIVER-871: check value of GridFS page refresh

commit 1f64cb4297a8d5010462fad91717e25f4620caa1
Merge: 797f91b 8e76e19
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Thu Oct 1 09:25:37 2015 -0700

    Merge pull request #274 from ksuarz/feature/seek-errors
    
    CDRIVER-867: Errors for GridFS seek

commit bef2b38ec5ea181b17b0f393b6e60e8138ad4e47
Merge: 3560d8d e634924
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Thu Oct 1 09:24:49 2015 -0700

    Merge pull request #278 from ksuarz/CDRIVER-880
    
    CDRIVER-880: aggregation may return destroyed cursor

commit e6349245282a78e3c2b0dbd15e14b15e033c691f
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 15:36:20 2015 -0400

    CDRIVER-880 must still call cursorid_prime()
    
    We require the side effects of the function but ignore its return value.

 src/mongoc/mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit 558906fb7e79a72b6662913814d715b2b865790c
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 15:01:11 2015 -0400

    CDRIVER-880 add test for failed agg pipeline

 tests/test-mongoc-collection.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 14c9bdf1b92807d121a1ba1d35c90a93492be0d8
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 15:01:03 2015 -0400

    CDRIVER-880 style fix

 src/mongoc/mongoc-collection.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 93a9456586ba684bda58218439a8f2c56635b461
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 09:45:03 2015 -0400

    CDRIVER-880 do not destroy cursor before failing

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3560d8dbd849ef4065f072e98663828a32fd11c8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 30 14:27:32 2015 -0400

    CDRIVER-892 check write error in cluster_run_command

 src/mongoc/mongoc-cluster.c | 28 ++++++++++++++++++++++++++--
 1 file changed, 26 insertions(+), 2 deletions(-)

commit 48b6847eb389f2dac05fee77fe60aa45921eb690
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 29 22:44:09 2015 -0400

    Include host:port in cluster internal errors.

 src/mongoc/mongoc-cluster.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 73f04b86dc61afcf8f922c9e46bddeec621f23f4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 29 10:32:20 2015 -0400

    CDRIVER-830 Much simpler reconnects.

 src/mongoc/mongoc-client.c          |   3 +-
 src/mongoc/mongoc-cluster-private.h |   4 +-
 src/mongoc/mongoc-cluster.c         | 475 +++++++++++++++++-------------------
 src/mongoc/mongoc-cursor.c          |   9 +-
 src/mongoc/mongoc-stream.c          |  81 ------
 src/mongoc/mongoc-stream.h          |   2 -
 src/mongoc/mongoc-write-command.c   |   6 +-
 tests/test-mongoc-exhaust.c         |  66 ++---
 tests/test-mongoc-topology.c        |  42 +++-
 9 files changed, 302 insertions(+), 386 deletions(-)

commit 7280587d2d814dbe6ae5f293c1330585df8270a7
Merge: acf157f 251db18
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 29 14:33:08 2015 -0700

    Merge branch 'CDRIVER-887-PRId64-correct-cast' into 1.2.0-dev
    
    * CDRIVER-887-PRId64-correct-cast:
      CDRIVER-887: Incorrect cast for PRId64

commit acf157f8171656439e6167c080f9edc7cf29b702
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 29 11:00:59 2015 -0700

    Fix syntax, there is no <strong> element

 doc/tutorial.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 251db18bca3c1deb34c5b8083f4602f365269134
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 15:23:18 2015 -0700

    CDRIVER-887: Incorrect cast for PRId64

 src/mongoc/mongoc-stream.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ec928a24ad78a390dc100b3acdc95d25e3266223
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 15:17:27 2015 -0700

    Avoid agressive may be used uninitialized warning
    
    tests/test-mongoc-exhaust.c:242:7: warning: pool may be used
    uninitialized in this function [-Wmaybe-uninitialized]

 tests/test-mongoc-exhaust.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1694b3524e022423de78cf53d364e92d45772039
Merge: 69f1ca4 c9acf87
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Tue Sep 29 07:59:29 2015 -0700

    Merge pull request #277 from ksuarz/CDRIVER-886
    
    CDRIVER-886: fix wrong HTML docs configure flag

commit c9acf8768d461d9a5bc805e0e7bdd412e85ae27e
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 29 09:24:24 2015 -0400

    CDRIVER-886 fix wrong html docs configure flag

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69f1ca44f89bbc87c05dba2b3fe0196403c396bd
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 15:07:33 2015 -0700

    Manually re-merge 2bf973b98c59a7a22e9c3d63f0d1f850cb4f7726

 src/mongoc/mongoc-stream.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f12d54b3c841410f566f1aacb6c31e1907f3ef25
Merge: 67997e6 df4d1f3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 14:52:17 2015 -0700

    Merge remote-tracking branch 'origin/master' into 1.2.0-dev
    
    * origin/master:
      1.1.11 Release
      CDRIVER-875 fix writev_full error format
      CDRIVER-875 test_stream_writev_full, better errors
      fix test_command_fq for recent mongos
      copy orchestration_configs/ from 1.2.0-dev
      copy .mci.yml from 1.2.0-dev
      CDRIVER-843: Add a test for flooding sendv()
      CDRIVER-843 & CDRIVER-756: Incorrect error checking
      CDRIVER-826: Improve errno handling
      CDRIVER-756: TRACE the errno, in case it is something, just not 'EGAIN'
      CDRIVER-826: Handle WSAEMSGSIZE
      CDRIVER-756: Improve debugging
      CDRIVER-732: Allow passing test arguments to debug test runs
      CDRIVER-756: Unchecked errors on failed network writes
      edits .gitmodules, fixes libbson url
      B-0 fixed seek method. Bad interpretation of seek_end mode. it should seek from one byte more than number of bytes written. seek_end with offset zero should put pointer exactly at the end ready to receive more data
      CDRIVER-771: Obsolete language needs updating
    
    Conflicts:
    	.mci.yml
    	CMakeLists.txt
    	README.rst
    	build/autotools/Versions.m4
    	doc/installing.page
    	src/libbson
    	src/mongoc/mongoc-cluster.c
    	src/mongoc/mongoc-socket-private.h
    	src/mongoc/mongoc-socket.c
    	src/mongoc/mongoc-stream-tls.c
    	src/mongoc/mongoc-stream.c
    	src/mongoc/mongoc-trace.h
    	tests/test-mongoc-stream.c

commit 67997e6e2ffa4652f64cf2d83765c621111635ee
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 12:11:45 2015 -0700

    CDRIVER-884: Ignore "still reachable" messages from sasl

 valgrind.suppressions | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 8d50a48a441e3913aea4474365ad9f066181305f
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 12:06:51 2015 -0700

    CDRIVER-884: Cleanup the testcase itself so not to taint valgrind logs

 tests/TestSuite.c | 2 ++
 1 file changed, 2 insertions(+)

commit 80433391ed8e340c8272612f356a9f6f31a617a1
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 28 11:47:29 2015 -0700

    CDRIVER-868: leak in mongoc_cluster_node_reconnect

 src/mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit e7a7d9c2bce8f8b968f9ee05c5efc9ea33c37d38
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Sep 28 13:34:04 2015 -0400

    CDRIVER-511 tests don't save between reads/writes
    
    This also makes progress towards fulfilling CDRIVER-872.

 tests/test-mongoc-gridfs.c | 6 ------
 1 file changed, 6 deletions(-)

commit a7ea97eb3f64535ef4e6e6f15f8a144d388beaa2
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Sep 28 13:33:42 2015 -0400

    CDRIVER-511 invalidate gridfs read buf on write

 src/mongoc/mongoc-gridfs-file-page.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 02b82844dce9859958c04d748843bdf978d9e127
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 25 15:45:52 2015 -0400

    better logging from mock server

 tests/mock_server/request.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 18da13808fd644c18abdd2bff42b40d27ccd5997
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 25 15:45:19 2015 -0400

    style in test-mongoc-cluster.c

 tests/test-mongoc-cluster.c | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

commit f1696e791afef8c879b8a28c1d707f5d54a57056
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 25 13:24:41 2015 -0700

    CDRIVER-793: Missing tests/json directory

 tests/Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 3d1669b9945cbf8374e21204fe0e49540139855f
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 25 09:33:41 2015 -0700

    CDRIVER-696: If the server description knows the last error, use it

 src/mongoc/mongoc-cluster.c | 15 +++++++++------
 tests/test-mongoc-client.c  | 12 ++++++------
 2 files changed, 15 insertions(+), 12 deletions(-)

commit 21c0ea4e02056ac20117e9901995c4ec17e839aa
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 25 09:04:24 2015 -0700

    CDRIVER-647: Fix invalid read in tracing on read failure

 src/mongoc/mongoc-stream.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 2ae2658f1162647409e8836743c818bdc815e9c1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 23 09:14:15 2015 -0700

    CDRIVER-861: cat the MO server.log for more details

 .mci.yml | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit f7f4ead688293804cfa56e1ed33314203a9cd06e
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 24 17:51:20 2015 -0400

    CDRIVER-871 check value of gridfs page refresh

 src/mongoc/mongoc-gridfs-file.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 8e76e19df2aef8ef48493510eeab2b5715831537
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 24 16:29:51 2015 -0400

    CDRIVER-867 assert rather than EBADF

 doc/mongoc_gridfs_file_seek.page | 1 -
 src/mongoc/mongoc-gridfs-file.c  | 6 +-----
 2 files changed, 1 insertion(+), 6 deletions(-)

commit 5cf9f39d2dd9972ef7655b6a18351acf94d94810
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 24 16:27:02 2015 -0400

    CDRIVER-861 debug Mongo Orchestration failures
    
    More patiently attempt initial connection to test server.

 tests/test-libmongoc.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit bc0a74198279901603a0556183bf3bbbf6c0bdd7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 24 11:27:38 2015 -0400

    CDRIVER-879 preserve scanner node on disconnect

 src/mongoc/mongoc-cluster.c                  |  2 +-
 src/mongoc/mongoc-topology-scanner-private.h |  4 ++++
 src/mongoc/mongoc-topology-scanner.c         | 14 +++++++++++---
 3 files changed, 16 insertions(+), 4 deletions(-)

commit 7f83475fdaa9a59828f0bc585a83be476a76456f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 24 11:26:38 2015 -0400

    CDRIVER-879 test cluster node reconnect

 tests/mock_server/mock-server.c |  41 ++++++++++++++
 tests/mock_server/mock-server.h |   2 +
 tests/mock_server/request.c     |  22 ++++++++
 tests/mock_server/request.h     |   2 +
 tests/test-mongoc-cluster.c     | 121 ++++++++++++++++++++++++++++++++++++++++
 5 files changed, 188 insertions(+)

commit b145f9f542d85337a8151af67c8076edbd817cdd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 23 09:06:29 2015 -0400

    improved comment on scanner_node_connect_tcp

 src/mongoc/mongoc-topology-scanner.c | 3 +++
 1 file changed, 3 insertions(+)

commit a2d26eb93febd595a86b310cb2c5eee58bedb7da
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 24 09:32:32 2015 -0400

    style

 src/mongoc/mongoc-topology-scanner.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit df781c01b5512a3e598b873967619a9eba7e0871
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 23 10:33:01 2015 -0400

    CDRIVER-830 do blocking reconnect if single-threaded
    
    The new mongoc_cluster_node_reconnect initiates a non-blocking reconnect
    but doesn't wait for connection to complete. If the driver is in single-
    threaded mode (so the scanner and the application share a connection)
    and immediately uses that server, connection hasn't completed:
    
    cursor error: Failure during socket delivery: Socket not connected (57)
    
    With this change, apply connectTimeoutMS to the reconnection in single-
    threaded mode.

 src/mongoc/mongoc-cluster.c | 21 +++++++++++-
 src/mongoc/mongoc-stream.c  | 82 +++++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-stream.h  |  2 ++
 3 files changed, 104 insertions(+), 1 deletion(-)

commit 14105259367e3b4a4426ce4f66df221525d11104
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 23 09:06:29 2015 -0400

    improved comments on cluster node functions

 src/mongoc/mongoc-client.h           | 11 +++++++----
 src/mongoc/mongoc-topology-scanner.c | 23 +++++++++++++++++++++++
 2 files changed, 30 insertions(+), 4 deletions(-)

commit df4d1f31eca0a08510c5185bfb488dbd4f108b6e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 23 16:16:07 2015 -0400

    1.1.11 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 22 ++++++++++++++++++++++
 README.rst                    | 14 +++++++-------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 59 insertions(+), 25 deletions(-)

commit f7d7513feb651f02e498006a350f517068a76d2d
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Wed Sep 23 11:38:02 2015 -0400

    CDRIVER-867 update official seek documentation

 doc/mongoc_gridfs_file_seek.page | 23 +++++++++++++++++++----
 1 file changed, 19 insertions(+), 4 deletions(-)

commit 52d2a095202f5722842829ae547b9cabbbd4eda5
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 15:47:17 2015 -0700

    CDRIVER-696: Aggregate the scanner node errors when Server Selection fails

 src/mongoc/mongoc-topology-scanner-private.h |  4 +++
 src/mongoc/mongoc-topology-scanner.c         | 40 ++++++++++++++++++++++++++++
 src/mongoc/mongoc-topology.c                 | 25 ++++++++++++-----
 tests/test-mongoc-topology.c                 |  2 +-
 4 files changed, 63 insertions(+), 8 deletions(-)

commit c8cb7ea46e3556b51d05e1ec481403a491bc5cfc
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 15:44:33 2015 -0700

    CDRIVER-696: If the server description knows the last error, use it

 src/mongoc/mongoc-cluster.c | 28 +++++++++++++++++++---------
 1 file changed, 19 insertions(+), 9 deletions(-)

commit 9d5bc13cb31e1309f20a434ced50ad88dde67426
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 15:25:18 2015 -0700

    CDRIVER-696: Store the topology_scanner node failure so we can report it later

 src/mongoc/mongoc-cluster.c                  |  2 +-
 src/mongoc/mongoc-topology-scanner-private.h |  4 +++-
 src/mongoc/mongoc-topology-scanner.c         | 15 +++++++--------
 3 files changed, 11 insertions(+), 10 deletions(-)

commit 2013c9c38fcee1993d2bdcffb661c8e816465fb1
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 10:52:26 2015 -0700

    CDRIVER-696: Make the (currently unused) error field bson_error_t

 src/mongoc/mongoc-server-description-private.h |  2 +-
 src/mongoc/mongoc-server-description.c         | 13 ++-----------
 2 files changed, 3 insertions(+), 12 deletions(-)

commit 7b16136aa2369fe3f334276f671fc540780662d8
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 15:54:08 2015 -0700

    CDRIVER-696: Quote the host for clarity

 src/mongoc/mongoc-topology-scanner.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2bb3d5cf79075682d245a515d5d43b792f3c9459
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 10:54:27 2015 -0700

    CDRIVER-696: This function has no errors to report

 src/mongoc/mongoc-client.c                       | 4 +---
 src/mongoc/mongoc-topology-description-private.h | 3 +--
 src/mongoc/mongoc-topology-description.c         | 3 +--
 src/mongoc/mongoc-topology.c                     | 6 ++----
 4 files changed, 5 insertions(+), 11 deletions(-)

commit d47cf9066c6a064e9fb9238b4eca31e3f7962948
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 10:48:07 2015 -0700

    CDRIVER-696: Add test for Useful errors from server selection

 CMakeLists.txt                              |  1 +
 tests/Makefile.am                           |  1 +
 tests/test-libmongoc.c                      | 92 +++++++++++++++++------------
 tests/test-libmongoc.h                      |  1 +
 tests/test-mongoc-server-selection-errors.c | 75 +++++++++++++++++++++++
 5 files changed, 133 insertions(+), 37 deletions(-)

commit 2f730531e4dbffffa6240265dcc899876c508674
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Wed Sep 23 10:58:27 2015 -0400

    CDRIVER-867 style fixes

 src/mongoc/mongoc-gridfs-file.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit ad7c994ed7ecbe3cb7bfe821a1c2df16eab0690f
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Sep 21 15:51:14 2015 -0400

    CDRIVER-867 more errors for gridfs seek

 src/mongoc/mongoc-gridfs-file.c | 22 +++++++++++++++++++---
 1 file changed, 19 insertions(+), 3 deletions(-)

commit a038ca09d7e6a6ddc7d662f047f8a1dab738b4b8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 22 18:21:03 2015 -0400

    fix mistaken revert in test_client_kill_cursor

 tests/test-mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 797f91bef011584a9ec537fcb13d2cb1a256f7f9
Merge: 25ed7f4 e6057fa
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Sep 22 18:29:32 2015 -0400

    Merge pull request #273 from ksuarz/bugfix/flush
    
    CDRIVER-765 fix gridfs flush

commit 2bf973b98c59a7a22e9c3d63f0d1f850cb4f7726
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 22 16:37:27 2015 -0400

    CDRIVER-875 fix writev_full error format

 src/mongoc/mongoc-stream.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fe1fb102d4c91bfaddb8d507abafd825b3f12e64
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 22 16:39:29 2015 -0400

    CDRIVER-875 test_stream_writev_full, better errors

 tests/test-mongoc-stream.c | 18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)

commit e6057faf8bfb9d4281949241a993bc1861bd3a32
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 22 16:10:42 2015 -0400

    CDRIVER-765 fix comments and type of page->n
    
    Changed file->n to be an int32_t to match the type in the server.
    
    Set the file's position and current page to zero on creation.
    
    Minor comment fixes.

 src/mongoc/mongoc-gridfs-file-private.h | 2 +-
 src/mongoc/mongoc-gridfs-file.c         | 7 +++++--
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 9363720d1be2b1b40e93083ce5767627ef3aa12f
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 17 15:07:42 2015 -0400

    Test GridFS operations over chunk boundaries

 tests/test-mongoc-gridfs.c | 45 +++++++++++++++++++++++++++++++++------------
 1 file changed, 33 insertions(+), 12 deletions(-)

commit f15bafef1a81c7b03df3e5fda96ef775aeddf6bd
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Sep 18 16:11:55 2015 -0400

    CDRIVER-765 comment and style changes

 src/mongoc/mongoc-gridfs-file.c | 76 +++++++++++++++++++++++++++++++++--------
 1 file changed, 61 insertions(+), 15 deletions(-)

commit 214a5ffa4990c07f1c385ead785eb13b4bd3d161
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Sep 18 16:09:32 2015 -0400

    CDRIVER-765 track gridfs file's chunk number
    
    Added a new field to mongoc_gridfs_file_t that keeps track of the file's
    currently-loaded chunk number.

 src/mongoc/mongoc-gridfs-file-private.h |  1 +
 src/mongoc/mongoc-gridfs-file.c         | 21 +++++++++++----------
 2 files changed, 12 insertions(+), 10 deletions(-)

commit a8792fdaf259694c8c32d3e13dcaf028988cfb0f
Author: Jose Sebastian Battig <jsbattig@convey.com>
Date:   Fri Sep 18 16:08:10 2015 -0400

    CDRIVER-765 fix incorrect sign comparison

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 25ed7f4b9d17c2b31a168bf242429a7f1c0846c8
Merge: d62df21 3261bdd
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Sep 22 15:23:05 2015 -0400

    Merge pull request #272 from ksuarz/feature/test-empty
    
    CDRIVER-509 and friends: test empty file

commit 3261bdd1934b8c9155c8cb93dfa63ee4b18e6d66
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 22 15:16:27 2015 -0400

    CDRIVER-509 style fixes in test

 tests/test-mongoc-gridfs.c | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

commit 2518073de3553cc21b2c2803582cb3ac59643ab2
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Sep 21 12:16:57 2015 -0400

    CDRIVER-509 update empty file test

 tests/test-mongoc-gridfs.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit b024ecc2c34a1733703d3477ad167f36746d8a78
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 17 15:16:20 2015 -0400

    CDRIVER-509 add gridfs test on empty file

 tests/binary/empty.dat     |  0
 tests/test-mongoc-gridfs.c | 57 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 57 insertions(+)

commit 410b49da9373b44bec9724b6f58906fb8476ead3
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 15:39:02 2015 -0700

    CDRIVER-707: ifdef test out until the ticket is fixed

 tests/test-bulk.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 238020f9ea45f1b648b2392d7239f94065555fec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 22 13:17:57 2015 -0400

    CDRIVER-790 better auth errors from tests

 tests/test-libmongoc.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 2ffb170957df3931ddd0484eb773ee0225a2e45b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 17 22:41:48 2015 -0400

    old TODO in request.c

 tests/mock_server/request.c | 8 --------
 tests/test-mongoc-cursor.c  | 2 +-
 2 files changed, 1 insertion(+), 9 deletions(-)

commit 496ca197160966e668d7804ab0dfbeece1e1ffcf
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 21 13:56:10 2015 -0700

    Consider skipped tests as successful

 tests/TestSuite.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 31a4a82475fe1c6597bc71654ababbb68dbf935e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 16:44:20 2015 -0400

    fix test_command_fq for recent mongos
    
    See SERVER-19810.

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 57c9fe2b5941bde6968b5aa1e406337c260a561e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 19 13:49:33 2015 -0400

    copy orchestration_configs/ from 1.2.0-dev
    
    Evergreen configuration has been developed mainly on the 1.2 branch;
    merge all those changes to master in preparation for testing the 1.1.11
    release in Evergreen.

 orchestration_configs/replica_sets/auth.json      | 58 +++++++++++++++++++++++
 orchestration_configs/replica_sets/basic.json     | 55 +++++++++++++++++++++
 orchestration_configs/servers/auth.json           | 13 +++++
 orchestration_configs/servers/basic.json          |  9 ++++
 orchestration_configs/servers/mmapv1.json         | 10 ++++
 orchestration_configs/servers/wiredtiger.json     | 10 ++++
 orchestration_configs/sharded_clusters/auth.json  | 43 +++++++++++++++++
 orchestration_configs/sharded_clusters/basic.json | 40 ++++++++++++++++
 8 files changed, 238 insertions(+)

commit 265819ea42684297536a08a72ba569be76ccd804
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 19 13:24:05 2015 -0400

    copy .mci.yml from 1.2.0-dev
    
    Evergreen configuration has been developed mainly on the 1.2 branch;
    merge all those changes to master in preparation for testing the 1.1.11
    release in Evergreen.

 .mci.yml | 1009 ++++++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 778 insertions(+), 231 deletions(-)

commit fbac57166e7ce38f553c7703c893d32be340e7f7
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 18 10:27:33 2015 -0700

    Return exit status > 0 when there is a failed test
    
    In fact, abuse the exit code a little by returning how many tests failed.
    This makes bisecting so much easier

 tests/TestSuite.c | 30 ++++++++++++++++++++----------
 1 file changed, 20 insertions(+), 10 deletions(-)

commit d62df21f9686538767fa0f795a8e0e12f3688bb9
Merge: 443d81e 084576f
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Sep 18 16:02:50 2015 -0400

    Merge pull request #271 from ksuarz/CDRIVER-839
    
    CDRIVER-839 fix "seek_end" on gridfs file seek

commit bebee6e2775b01fb5c4161906dea5bb18499794c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 18 10:27:00 2015 -0700

    Add -t/--trace to enable mongoc tracing for tests

 tests/TestSuite.c | 26 +++++++++++++++++++++++---
 1 file changed, 23 insertions(+), 3 deletions(-)

commit 084576f692b163b4f5ddd791fb2355cd5dd86faf
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 17 14:41:05 2015 -0400

    CDRIVER-839 test gridfs file seek between chunks

 tests/binary/gridfs-large.dat | 945 ++++++++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-gridfs.c    |   9 +-
 2 files changed, 948 insertions(+), 6 deletions(-)

commit 8755d4c376eb7b3a42b897bf9df4c209f84f4e21
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 15 15:31:40 2015 -0400

    CDRIVER-839 test gridfs file seek

 tests/test-mongoc-gridfs.c | 43 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 43 insertions(+)

commit 443d81eb18decf4f6b01c21022bcd0f8fbdf0ccf
Author: Jose Sebastian Battig <jsbattig@convey.com>
Date:   Wed Aug 19 23:02:03 2015 -0500

    B-0 fixed seek method. Bad interpretation of seek_end mode. it should seek from one byte more than number of bytes written. seek_end with offset zero should put pointer exactly at the end ready to receive more data

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e73811ffb85682366dfac492f5d0cd79d7e8fa97
Merge: 5249890 02b11e7
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Sep 17 17:03:16 2015 -0400

    Merge pull request #260 from jsbattig/fix_seek_end
    
    B-0 fixed seek method. Bad interpretation of seek_end mode. it should

commit 7c5dbed32ef4ca2fe9960193e77cda31a9faa239
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 17 16:14:35 2015 -0400

    CDRIVER-790 type mismatch in auth tests
    
    In MS Visual C a bool is a byte. If the char pointers "username" and
    "password" happen to be aligned at 256 bytes, then (bool) username is
    false and the test suite thinks it doesn't need to authenticate, leading
    to intermittent auth failures in tests.

 tests/test-libmongoc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d4d2e35c111620ded9e575fbbf667c3d5f517e0d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 17 16:10:15 2015 -0400

    better output if test_get_collection_info fails

 tests/test-mongoc-database.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 97085fb87df68849b614d4f6ff4d9e342426388f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 17 16:09:45 2015 -0400

    fix URI format in test output

 tests/test-libmongoc.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 3bcf40087f5afe774796bd149141b4205b9bdba5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 17 16:08:00 2015 -0400

    don't need "last_updated" in orchestration config

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fcb449b345afff0ebf98c47224c3b8fc321d531f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 17 16:07:24 2015 -0400

    check disk space in GB before evergreen tests

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2602998459d6b1204414da5028a62b2cc4db21b6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 16 15:30:54 2015 -0400

    obsolete comment in evergreen config

 .mci.yml | 1 -
 1 file changed, 1 deletion(-)

commit 8e1491432681946f59388ddb1bf80cbfe1f1d8f8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 16 15:00:14 2015 -0700

    CDRIVER-850: bulk provided write_concern ignored

 src/mongoc/mongoc-write-command.c |  6 ++--
 tests/test-bulk.c                 | 67 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 70 insertions(+), 3 deletions(-)

commit a6ec64172b77af41c77e79caa3c44e69f34b5591
Merge: 1d37828 494c3db
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Sep 17 10:58:18 2015 -0400

    Merge pull request #269 from ksuarz/CDRIVER-510
    
    CDRIVER-510 don't seek if page is NULL

commit 1d378285c32cfcfdcb894981895fd60702f9d772
Merge: b9d79b4 aff8c03
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Sep 17 10:58:02 2015 -0400

    Merge pull request #268 from ksuarz/CDRIVER-849
    
    CDRIVER-849 allow seek past end-of-file

commit 375562667b081f74055c7b6e191b5668ee4323c9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 16 16:03:25 2015 -0700

    CDRIVER-543: Improve error message to make sense for drivers wrapping mongoc

 src/mongoc/mongoc-cluster.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit ac1449d5db0b8fe59e7312081ef1ac3237e5ad3e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 11 14:09:29 2015 -0700

    CDRIVER-830: Properly close a node in exhaust and re-add it to the scanner

 src/mongoc/mongoc-cluster-private.h          |   2 +
 src/mongoc/mongoc-cluster.c                  | 152 ++++++++++++++++++++-------
 src/mongoc/mongoc-cursor.c                   |   7 +-
 src/mongoc/mongoc-topology-scanner-private.h |   3 +
 src/mongoc/mongoc-topology-scanner.c         |   5 +-
 tests/test-mongoc-exhaust.c                  |  59 +++++++++--
 6 files changed, 176 insertions(+), 52 deletions(-)

commit 74aefa0a6fd5dd7ae5b633928928e098e81079a7
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 11 14:18:17 2015 -0700

    CDRIVER-543: Improve error messages

 src/mongoc/mongoc-cluster.c | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

commit 11760f87794a9e2d7e35ccb379eb1e09e9a8e700
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Sep 11 14:15:18 2015 -0700

    CDRIVER-683 & CDRIVER-810: Disconnect from a node properly
    
    Even in single threaded mode

 src/mongoc/mongoc-cluster.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit f512cbf82d3e34a06b7d43e3948489527da943e1
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 10 15:42:50 2015 -0700

    CDRIVER-836: Only attempt to authenticate once, not twice, on auth failure

 src/mongoc/mongoc-cluster.c | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit b34b6a7ff148b7d950ebe50f35c76c36b5b797e8
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 10 15:18:04 2015 -0700

    CDRIVER-696: Useful errors from server selection

 src/mongoc/mongoc-cluster.c  |  4 +++-
 src/mongoc/mongoc-topology.c | 34 ++++++++++++++++++++++++++++------
 tests/test-mongoc-topology.c |  4 ++--
 3 files changed, 33 insertions(+), 9 deletions(-)

commit 29574cb0da328fee49a98320534a009f6634994f
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 10 15:21:11 2015 -0700

    Improve debugging

 src/mongoc/mongoc-cluster.c              | 53 ++++++++++++++++++--------------
 src/mongoc/mongoc-server-description.c   |  9 ++++--
 src/mongoc/mongoc-topology-description.c |  6 +++-
 3 files changed, 41 insertions(+), 27 deletions(-)

commit 068500dc7ad85c6036c248103c9a6b5ce8b8b581
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 10 15:41:18 2015 -0700

    CDRIVER-840: Move exhaust testing into its own file

 .gitignore                  |   1 +
 CMakeLists.txt              |   1 +
 tests/Makefile.am           |   1 +
 tests/test-libmongoc.c      |   2 +
 tests/test-mongoc-client.c  | 198 ---------------------------------------
 tests/test-mongoc-exhaust.c | 221 ++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 226 insertions(+), 198 deletions(-)

commit 3491d2ba25985635b39cfc7ce69853228768f0aa
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 10 15:02:32 2015 -0700

    CDRIVER-840: Improve test when it fails by including the error message

 tests/test-mongoc-client.c | 4 ++++
 1 file changed, 4 insertions(+)

commit aff8c031378c27fa3f464beca77d4e85025ebfd4
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Wed Sep 16 17:42:50 2015 -0400

    CDRIVER-849 allow seek past end-of-file

 src/mongoc/mongoc-gridfs-file.c | 2 --
 1 file changed, 2 deletions(-)

commit 494c3dbb07ffec22f563c23bdf5d82e4e5913b9b
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Wed Sep 16 16:06:17 2015 -0400

    CDRIVER-510 don't seek if page is NULL

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2d8dd0c5aaa74a27c91881f3358d40630230e708
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 16 09:41:09 2015 -0400

    CDRIVER-710 fix writeConcernErrors format
    
    Write operations' replies should contain an array, writeConcernErrors.
    The driver had called this writeConcernError and catenated all such
    errors into the same subdocument, causing multiple duplicate field
    names.
    
    This fixes the format for modern write commands. Legacy operations still
    ignore write concern errors entirely, see CDRIVER 707.

 src/mongoc/mongoc-write-command-private.h |   4 +-
 src/mongoc/mongoc-write-command.c         |  26 ++++--
 tests/test-bulk.c                         | 144 +++++++++++++++++++++++++++++-
 3 files changed, 165 insertions(+), 9 deletions(-)

commit 04df2203cba59e7886e019de690715526a063d9e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 15 13:58:18 2015 -0700

    CDRIVER-843: Add a test for flooding sendv()
    
    Conflicts:
    	src/mongoc/mongoc-socket-private.h

 CMakeLists.txt                     |   1 +
 src/mongoc/mongoc-socket-private.h |  11 ++
 src/mongoc/mongoc-socket.c         |  13 +--
 tests/test-mongoc-socket.c         | 205 +++++++++++++++++++++++++++++++++++++
 4 files changed, 218 insertions(+), 12 deletions(-)

commit 63f3d5a83a2af17d18a58da554f4e299197a99c0
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 9 15:44:15 2015 -0700

    CDRIVER-843 & CDRIVER-756: Incorrect error checking
    
    Use int for WSASend() and debug both return value and sent bytes
    Also check the return value for SOCKET_ERROR, not !0
    
    Conflicts:
    	src/mongoc/mongoc-socket.c

 src/mongoc/mongoc-socket.c | 22 +++++++++++++++++-----
 1 file changed, 17 insertions(+), 5 deletions(-)

commit 5249890d1804d6da252ba7d45286591c1242106d
Merge: f2ee4c3 b24d1d2
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Sep 16 09:17:48 2015 -0400

    Merge pull request #267 from bjori/master
    
    CDRIVER-843 & friends

commit 1e4095b2c2890764793bc505d0d6c67d985d13cd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 16 09:03:38 2015 -0400

    CDRIVER-846 refactor insert commands
    
    _mongoc_write_command_init_insert and _mongoc_write_command_insert_append
    differ unnecessarily from the equivalent helper functions for update and
    remove: the insert functions take an array of documents instead of a single
    document.
    
    (The inconsistency dates from the implementation of
    mongoc_collection_insert_bulk, now deprecated. In any case,
    mongoc_collection_insert_bulk can be responsible for handling an array of
    documents instead of pushing that chore down the call stack.)

 src/mongoc/mongoc-bulk-operation.c        |  5 +--
 src/mongoc/mongoc-collection.c            | 12 ++++---
 src/mongoc/mongoc-write-command-private.h |  7 ++--
 src/mongoc/mongoc-write-command.c         | 57 ++++++++++++++-----------------
 tests/test-mongoc-collection.c            | 34 +++++++++++++++++-
 tests/test-write-commands.c               | 19 ++++++-----
 6 files changed, 81 insertions(+), 53 deletions(-)

commit 123353d35078f0f923bc4a6093ef5de227c8bc90
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 16 09:01:17 2015 -0400

    missing line-break in private header

 src/mongoc/mongoc-write-command-private.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 276f0944c119812ce5318f8323360f4e2c9d36e3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 15 21:31:56 2015 -0400

    CDRIVER-845 fix field names in "insert" command
    
    An array in BSON is just a document with the keys "0", "1", "2", and so
    on. But when sending an array of documents with the "insert" command,
    the driver had generated BSON with keys "0", "0", "0", ....

 src/mongoc/mongoc-write-command.c |  4 ++-
 tests/test-mongoc-collection.c    | 73 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 76 insertions(+), 1 deletion(-)

commit b24d1d258bf0967fa80d2093f12fe37c20b5d844
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Sep 15 13:58:18 2015 -0700

    CDRIVER-843: Add a test for flooding sendv()

 CMakeLists.txt                     |   1 +
 src/mongoc/Makefile.am             |   1 +
 src/mongoc/mongoc-socket-private.h |  42 ++++++++
 src/mongoc/mongoc-socket.c         |  13 +--
 tests/test-mongoc-socket.c         | 205 +++++++++++++++++++++++++++++++++++++
 5 files changed, 250 insertions(+), 12 deletions(-)

commit 4b32898894848b8ad2121743f0145f1e29dfd473
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 9 15:44:15 2015 -0700

    CDRIVER-843 & CDRIVER-756: Incorrect error checking
    
    Use int for WSASend() and debug both return value and sent bytes
    Also check the return value for SOCKET_ERROR, not !0

 src/mongoc/mongoc-socket.c | 23 +++++++++++++++++------
 1 file changed, 17 insertions(+), 6 deletions(-)

commit 1b58443f66f2cedaf1eae03d096f1cafa34e794e
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 3 10:13:12 2015 -0700

    CDRIVER-826: Improve errno handling
    
    We need to capture failure reasons on Windows properly too

 src/mongoc/mongoc-buffer.c  |  1 -
 src/mongoc/mongoc-cluster.c |  2 --
 src/mongoc/mongoc-socket.c  | 38 +++++++++++++++++++-------------------
 3 files changed, 19 insertions(+), 22 deletions(-)

commit 14eb5aa6cdccb323fa2616208413cb92b6d98c3c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 2 15:50:15 2015 -0700

    CDRIVER-756: TRACE the errno, in case it is something, just not 'EGAIN'

 src/mongoc/mongoc-socket.c | 1 +
 1 file changed, 1 insertion(+)

commit 79e9b31e6989b94d47fec54fb112435efd65f045
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 2 15:45:11 2015 -0700

    CDRIVER-826: Handle WSAEMSGSIZE

 src/mongoc/mongoc-socket.c | 1 +
 1 file changed, 1 insertion(+)

commit c721869cf4a0998d5f71950d21e0133414e41b74
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 13 10:36:14 2015 -0700

    CDRIVER-756: Improve debugging
    
    Check return codes using <=
    Return how much we have written, even if the last vector wasn't even tried
    Plentyful traces
    Disable IO dumping

 src/mongoc/mongoc-socket.c     | 13 +++++++--
 src/mongoc/mongoc-stream-tls.c | 62 ++++++++++++++++++++++++++++++++----------
 src/mongoc/mongoc-stream.c     |  8 ++++--
 src/mongoc/mongoc-trace.h      |  2 ++
 4 files changed, 64 insertions(+), 21 deletions(-)

commit 4fcb6e325a5e4015b316ab98b98a747c2cfb6ea1
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 1 13:30:41 2015 -0700

    CDRIVER-732: Allow passing test arguments to debug test runs
    
    We still want to make sure we don't fork & run them in parallel, so
    those arguments are hardcoded, but we now support passing for example
    the test name/prefix (-l).
    
    For example:
    
        $ TEST_ARGS="-l /Uri/*" make debug

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9a4e2e8717c3c2fe2585dc02d01f34a17226ba36
Author: Jason Carey <jcarey@argv.me>
Date:   Mon Jul 27 11:07:04 2015 -0400

    CDRIVER-756: Unchecked errors on failed network writes

 src/mongoc/mongoc-cluster.c        |  32 +++-------
 src/mongoc/mongoc-iovec.h          |  10 ++-
 src/mongoc/mongoc-socket.c         | 124 ++++++++++++++++++++++---------------
 src/mongoc/mongoc-stream-private.h |   7 +++
 src/mongoc/mongoc-stream-tls.c     |   5 --
 src/mongoc/mongoc-stream.c         |  42 +++++++++++++
 tests/test-mongoc-stream.c         |  86 +++++++++++++++++++++++++
 7 files changed, 224 insertions(+), 82 deletions(-)

commit bbefacfd599bf80ecb9062424b72289074921e77
Merge: d805075 e6a586f
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Sep 14 18:59:17 2015 -0400

    Merge pull request #266 from ksuarz/CDRIVER-803
    
    CDRIVER-803 tutorial documentation

commit e6a586f609598a3ccae74085284da33a86102e1f
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Sep 14 13:39:48 2015 -0400

    CDRIVER-803 fix information and restore old pages
    
    The CRUD operation pages now have copies of the information found in the
    tutorial. Nothing links to them directly; however, they are maintained to
    preserve existing URLs.

 doc/deleting-document.page  |  80 +++++++++++++++++++++++++++++
 doc/executing-command.page  |  65 ++++++++++++++++++++++++
 doc/finding-document.page   | 121 ++++++++++++++++++++++++++++++++++++++++++++
 doc/inserting-document.page |  71 ++++++++++++++++++++++++++
 doc/tutorial.page           | 117 +++++++++++++++++++++---------------------
 doc/updating-document.page  |  92 +++++++++++++++++++++++++++++++++
 6 files changed, 488 insertions(+), 58 deletions(-)

commit 6ebf51f148acc635aa3eb424821f1cf1043d3822
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Thu Sep 10 14:42:53 2015 -0400

    CDRIVER-803 tutorial cleanup and rehaul

 doc/basic-prequisites.xml   |  12 -
 doc/counting-document.page  |  57 ---
 doc/deleting-document.page  |  73 ----
 doc/executing-command.page  |  99 -----
 doc/finding-document.page   | 108 ------
 doc/index.page              |   8 +-
 doc/inserting-document.page |  64 ----
 doc/tutorial.page           | 896 ++++++++++++++++++++++++++++++++------------
 doc/updating-document.page  |  84 -----
 9 files changed, 663 insertions(+), 738 deletions(-)

commit ffaf6bca556319e91d1888e88143ff1c63a10f3b
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Sep 8 12:12:30 2015 -0400

    CDRIVER-803 style cleanup and revamp
    
    Updated sections for SSL authentication, advanced connections and the CRUD
    operations.

 doc/advanced-connections.page |  94 ++++++++---------------
 doc/authentication.page       |  77 ++++++++++---------
 doc/counting-document.page    |  57 ++++++++++++++
 doc/deleting-document.page    |  77 +++++++------------
 doc/finding-document.page     | 169 +++++++++++++-----------------------------
 doc/inserting-document.page   |  82 ++++++--------------
 doc/updating-document.page    |  87 ++++++----------------
 7 files changed, 250 insertions(+), 393 deletions(-)

commit 409562bb29fbf5a827021b53f631e9a04ab35b9c
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Fri Sep 4 14:41:13 2015 -0400

    CDRIVER-803 port tutorial to Mallard

 TUTORIAL.md       | 495 ------------------------------------------------------
 doc/tutorial.page | 436 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 436 insertions(+), 495 deletions(-)

commit d805075ffa81cd6f27ac88660a1731bc67740bd7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 11 09:54:44 2015 -0400

    CDRIVER-679 kill_cursor shouldn't attempt reconnect
    
    Also fix mongoc_client_kill_cursor, which I broke in the previous commit.

 src/mongoc/mongoc-client.c  |  59 +++++++++++++-
 tests/mock_server/mock-rs.c | 182 ++++++++++++++++++++++++++++++++++----------
 tests/mock_server/mock-rs.h |  12 +++
 tests/test-mongoc-cursor.c  | 107 ++++++++++++++++----------
 4 files changed, 277 insertions(+), 83 deletions(-)

commit 93e290f48163e1e426bff421239c63e09919ed2a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 15:01:19 2015 -0400

    CDRIVER-716 Always enforce server selection.
    
    Remove _mongoc_client_sendv and related functions that would try to send a
    message to the selected server, but fell back to sending the message to the
    primary.

 src/mongoc/mongoc-client-private.h  |   9 ---
 src/mongoc/mongoc-client.c          |  68 +------------------
 src/mongoc/mongoc-cluster-private.h |  15 -----
 src/mongoc/mongoc-cluster.c         | 128 +++---------------------------------
 src/mongoc/mongoc-cursor.c          |  16 ++---
 src/mongoc/mongoc-write-command.c   |  21 +++---
 6 files changed, 27 insertions(+), 230 deletions(-)

commit 4808d66460882e0608195d9bd2a69d55103d0e8e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 23:15:41 2015 -0400

    CDRIVER-833 test mongoc_client_kill_cursor

 build/generate-future-functions.py   |  5 ++++
 tests/mock_server/future-functions.c | 35 ++++++++++++++++++++++
 tests/mock_server/future-functions.h |  8 +++++
 tests/test-mongoc-cursor.c           | 57 ++++++++++++++++++++++++++++++++++++
 4 files changed, 105 insertions(+)

commit 6f864192c7d10ea6abc7c5014a76ba03df95c004
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 13:54:41 2015 -0400

    CDRIVER-832 mongoc_check_version returns bool

 doc/mongoc_check_version.page         |  4 ++--
 src/mongoc/mongoc-version-functions.c | 10 ++++------
 src/mongoc/mongoc-version-functions.h |  2 +-
 tests/test-mongoc-version.c           | 20 +++++++++++---------
 4 files changed, 18 insertions(+), 18 deletions(-)

commit abf1f338bf3e4a079f12f8f981fe18e8f51e4e05
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 13:53:18 2015 -0400

    CDRIVER-832 move version functions from config header

 CMakeLists.txt                        |  3 +-
 src/mongoc/Makefile.am                |  3 +-
 src/mongoc/mongoc-version-functions.c | 80 +++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-version-functions.h | 36 ++++++++++++++++
 src/mongoc/mongoc-version.c           | 80 -----------------------------------
 src/mongoc/mongoc-version.h.in        |  8 ----
 src/mongoc/mongoc.h                   |  1 +
 7 files changed, 121 insertions(+), 90 deletions(-)

commit 5ab00d921fd99bdde0ff5fcee618c07af05f25e5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 09:37:42 2015 -0400

    CDRIVER-832 add version functions to libmongoc.symbols

 src/libmongoc.symbols | 5 +++++
 1 file changed, 5 insertions(+)

commit 83323666c4ddda9da52bd5461cf0d6cf063d04ca
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 09:36:08 2015 -0400

    CDRIVER-832 fix mongoc_get_version.page

 doc/mongoc_get_version.page | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 107022b965902dc894a9350ebde32a359482f042
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 8 23:03:56 2015 -0400

    CDRIVER-832 style

 doc/mongoc_check_version.page     | 6 +++---
 doc/mongoc_get_major_version.page | 2 +-
 doc/mongoc_get_micro_version.page | 2 +-
 doc/mongoc_get_minor_version.page | 2 +-
 doc/mongoc_get_version.page       | 2 +-
 src/mongoc/mongoc-version.c       | 8 ++++++--
 src/mongoc/mongoc-version.h.in    | 4 +++-
 tests/test-libmongoc.c            | 4 ++--
 8 files changed, 18 insertions(+), 12 deletions(-)

commit 64ffc890f708171c48bceb61f76ef1a1be19e86d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 8 23:03:26 2015 -0400

    CDRIVER-832 link among version-check function docs

 doc/mongoc_check_version.page     | 10 ++++++----
 doc/mongoc_get_major_version.page |  2 +-
 doc/mongoc_get_micro_version.page |  2 +-
 doc/mongoc_get_minor_version.page |  2 +-
 doc/mongoc_get_version.page       |  2 +-
 doc/mongoc_version.page           | 15 +++++----------
 6 files changed, 15 insertions(+), 18 deletions(-)

commit f972876b7fa38ae34f68f33789bc60a2dccead8f
Author: Remi Collet <fedora@famillecollet.com>
Date:   Fri Sep 4 16:58:20 2015 +0200

    CDRIVER-832: export library verson in the API

 CMakeLists.txt                    |  2 ++
 build/autotools/versions.ldscript |  5 +++
 build/cmake/libmongoc-ssl.def     |  5 +++
 build/cmake/libmongoc.def         |  5 +++
 doc/mongoc_check_version.page     | 33 +++++++++++++++++
 doc/mongoc_get_major_version.page | 24 +++++++++++++
 doc/mongoc_get_micro_version.page | 24 +++++++++++++
 doc/mongoc_get_minor_version.page | 24 +++++++++++++
 doc/mongoc_get_version.page       | 24 +++++++++++++
 doc/mongoc_version.page           |  9 +++++
 src/mongoc/Makefile.am            |  1 +
 src/mongoc/mongoc-version.c       | 76 +++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-version.h.in    |  5 +++
 tests/Makefile.am                 |  1 +
 tests/test-libmongoc.c            |  2 ++
 tests/test-mongoc-version.c       | 24 +++++++++++++
 16 files changed, 264 insertions(+)

commit 94c2e5067e391d59b5d64ebde38fba1059fca5a3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 9 22:53:16 2015 -0400

    spelling

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a6df912c7ff775d6d1bf547904ffc7264dd8ac04
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 9 11:03:36 2015 -0700

    Fix new -Wswitch-enum & -Wswitch-default warnings

 src/mongoc/mongoc-cursor.c     | 2 ++
 tests/test-bulk.c              | 7 +++++++
 tests/test-mongoc-read-prefs.c | 3 +++
 3 files changed, 12 insertions(+)

commit 218b6f2fc16658dfadf6fd990abc3f8455f3325b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 9 11:02:29 2015 -0700

    Add back accidentally removed test

 tests/test-mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit abeca13630c52459717ab4cbfa181c7769c1aa80
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 4 21:41:41 2015 -0400

    CDRIVER-704 fix slaveOkay bit and $readPreference
    
    The driver sends $readPreference to mongods and mongoses, but it should
    only send it to mongoses. Furthermore, it should not send
    $readPreference to a mongos if the preference is secondaryPreferred.
    Finally, it should set the SlaveOkay wire-protocol bit when
    communicating with a standalone or replica set secondary.

 src/mongoc/mongoc-cluster-private.h              |   6 +
 src/mongoc/mongoc-cluster.c                      |  12 +-
 src/mongoc/mongoc-cursor.c                       | 231 ++++++++++++++----
 src/mongoc/mongoc-topology-description-private.h |   2 +-
 tests/test-mongoc-client.c                       |  75 ------
 tests/test-mongoc-cursor.c                       |  26 +--
 tests/test-mongoc-read-prefs.c                   | 283 ++++++++++++++++++++++-
 7 files changed, 488 insertions(+), 147 deletions(-)

commit 5bfc277d6c9628d6a5cbc852f53ee4bdaf5f148c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 5 11:11:34 2015 -0400

    obsolete comment in scanner_node_destroy

 src/mongoc/mongoc-topology-scanner.c | 1 -
 1 file changed, 1 deletion(-)

commit 14b436be524663e19489cc5ebe4f4e8fe3298c6a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 5 11:11:12 2015 -0400

    race in topology scanner test

 tests/test-mongoc-topology-reconcile.c | 23 ++++++++++++++++-------
 1 file changed, 16 insertions(+), 7 deletions(-)

commit cd099a4c13d6744cbc04c2565465de30240d31ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 5 11:10:29 2015 -0400

    dead test code

 tests/debug-stream.c | 31 -------------------------------
 1 file changed, 31 deletions(-)

commit deb0e1fa4f5e99a1210889eb3d1642f1ef2e831e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 5 09:11:26 2015 -0400

    leaks in stream test

 tests/debug-stream.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 7888eed8bf404418a5211e0ba3bad8850d8fdba1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Sep 5 09:08:33 2015 -0400

    leak in collection_aggregate
    
    Introduced while fixing CDRIVER-735.

 src/mongoc/mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit 932b300c6ced280d380eda82a57fa17436df452b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 4 21:42:53 2015 -0400

    more verbose mock server output
    
    Also, mock replica set obeys MONGOC_TEST_SERVER_VERBOSE.

 tests/mock_server/mock-rs.c     |  2 ++
 tests/mock_server/mock-server.c | 15 ++++++++++-----
 2 files changed, 12 insertions(+), 5 deletions(-)

commit 5d78a1944cdfa98912d71864701c3235ff47b04a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Sep 4 09:44:07 2015 -0400

    CDRIVER-821 warn that set_ssl_opts only copies the struct

 doc/mongoc_client_set_ssl_opts.page | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 0bf82edf6143a1afbe569c5290831418f6602916
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 16:02:17 2015 -0400

    post-release bump

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 3eaf73ed8a88340584a203520ee9ad98fd1b89d3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 15:52:13 2015 -0400

    1.2.0-beta1 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt              |  4 ++--
 NEWS                        | 38 ++++++++++++++++++++++++++++++++++++++
 build/autotools/Versions.m4 |  2 +-
 3 files changed, 41 insertions(+), 3 deletions(-)

commit f6e2dc6b9b58bb2e453660eb9cea4ba79472ba0c
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Sep 3 10:13:12 2015 -0700

    CDRIVER-826: Improve errno handling
    
    We need to capture failure reasons on Windows properly too

 src/mongoc/mongoc-buffer.c  |  1 -
 src/mongoc/mongoc-cluster.c |  2 --
 src/mongoc/mongoc-socket.c  | 39 ++++++++++++++++++++-------------------
 3 files changed, 20 insertions(+), 22 deletions(-)

commit 7f4b9460f0ae789ca963bf8caa313c9910bb4406
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 12:23:49 2015 -0400

    unused function topology_scanner_set_async_cb

 src/mongoc/mongoc-topology-scanner-private.h | 4 ----
 src/mongoc/mongoc-topology-scanner.c         | 7 -------
 2 files changed, 11 deletions(-)

commit d3ec435fa508edcde2096056035aaf275aeed6a9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 2 22:03:00 2015 -0400

    CDRIVER-699 don't depend on precise clock
    
    On Windows, at least, the clock resolution is milliseconds, which is not always
    fine enough to know that a blocking scan has been tried once since the
    selection loop began.

 src/mongoc/mongoc-topology.c | 17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)

commit 6ec3b7a5fe5ed111edc3bc42efc11da6c81d7233
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 12:27:50 2015 -0400

    delete old mci.sh
    
    Obsolete file superseded by .mci.yml for testing in Evergreen.

 build/mci.sh | 226 -----------------------------------------------------------
 1 file changed, 226 deletions(-)

commit a73dca11a8ae181a6d14ccfe8c80aec5f2b3f95d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 12:20:27 2015 -0400

    assert future_wait called before future_destroy

 build/future_function_templates/future.c.template | 3 +++
 build/future_function_templates/future.h.template | 1 +
 tests/mock_server/future.c                        | 3 +++
 tests/mock_server/future.h                        | 1 +
 4 files changed, 8 insertions(+)

commit 5d3d05fb56e14f9feefba2b3d2272b3aab8bde5e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 12:13:08 2015 -0400

    don't copy future_t before getting params

 .../future-functions.c.template                    |  12 +-
 build/future_function_templates/future.c.template  |  15 ---
 build/future_function_templates/future.h.template  |   2 -
 tests/mock_server/future-functions.c               | 134 ++++++---------------
 tests/mock_server/future.c                         |  15 ---
 tests/mock_server/future.h                         |   2 -
 6 files changed, 43 insertions(+), 137 deletions(-)

commit f919677be302943080974a9c0f50977662e15407
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Sep 3 11:50:17 2015 -0400

    spelling: _mongoc_async_cmd_phase_t

 src/mongoc/mongoc-async-cmd.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f2ee4c34f65df6820c16fb57b6bad074c542db7c
Merge: ec8657d 3d9395e
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Sep 3 11:36:58 2015 -0400

    Merge pull request #264 from rubicks/patch-1
    
    edits .gitmodules, fixes libbson url

commit 3d9395ecf2346e7c07d398f72f756a61ed33916d
Author: rubicks <rubicks@users.noreply.github.com>
Date:   Thu Sep 3 09:52:53 2015 -0400

    edits .gitmodules, fixes libbson url
    
    was getting socket error timeouts on `git submodule update --init` within `autogen.sh`, this change makes it work as intended.

 .gitmodules | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 84907a127eab493beb922e0c48c7966f053c0ed9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 2 00:51:42 2015 -0400

    CDRIVER-735 only test allowDiskUse on new mongods
    
    The "aggregate" command only accepts allowDiskUse in mongod 2.6+.

 tests/test-libmongoc.c         | 18 ++++++++++++++++++
 tests/test-libmongoc.h         |  1 +
 tests/test-mongoc-collection.c |  9 +++++++--
 3 files changed, 26 insertions(+), 2 deletions(-)

commit 35312faa91e4ab29fe3bce01c1ea8e7221d8465f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 1 22:59:53 2015 -0400

    CDRIVER-735 fix aggregate test
    
    A reused index variable meant not all of the test was ever run. Also,
    remove some test code for MongoDB 2.0, now long obsolete, that might
    have masked future regressions.

 tests/test-mongoc-collection.c | 17 ++++++-----------
 1 file changed, 6 insertions(+), 11 deletions(-)

commit 43408815547ea9435fd9c6e66975b31d2495bf86
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Sep 2 18:19:25 2015 -0400

    Change timeout in test clients.

 tests/test-libmongoc.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 5607a298f35a403dd446091bcdd4757d4e0fe1d7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 1 22:57:46 2015 -0400

    CDRIVER-735 segfault in aggregate
    
    And update doc for mongoc_topology_select to warn that some pointer
    parameters cannot be NULL.

 src/mongoc/mongoc-collection.c |  8 ++++++++
 src/mongoc/mongoc-topology.c   | 11 ++++++++++-
 2 files changed, 18 insertions(+), 1 deletion(-)

commit 14b4f941fa4f59b4967609b3d4a1af4af7b50564
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Sep 2 12:56:24 2015 -0700

    Revert "evergreen is not a fan of these tests"
    
    This reverts commit b9d79b45709029d27c25472278551505a3582866.
    
    These tests should be functional on evergreen

 .mci.yml                     |  1 -
 tests/test-mongoc-topology.c | 27 ++++++++++-----------------
 2 files changed, 10 insertions(+), 18 deletions(-)

commit dd197259470d16cbe60c3cfb29b464bb865422dd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 1 18:23:53 2015 -0400

    Longer timeout in connectTimeout test.

 tests/test-mongoc-topology.c | 26 ++++++++++++++++++--------
 1 file changed, 18 insertions(+), 8 deletions(-)

commit 6553057b93d9137ec145c4b245bc041eecdbc033
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Sep 1 18:23:32 2015 -0400

    Simpler topology reconcile test.

 .mci.yml                               | 2 +-
 tests/test-mongoc-topology-reconcile.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 31ea0e6b0d278fbc24237cf31d906ef5aba7361a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 29 10:02:29 2015 -0400

    CDRIVER-798 async_cmd checks for closed socket
    
    Detects when server closes the connection on a call to ismaster.

 src/mongoc/mongoc-async-cmd.c | 14 ++++++++++++++
 tests/test-mongoc-client.c    | 24 +++++++++++++++++++-----
 2 files changed, 33 insertions(+), 5 deletions(-)

commit 3c3019bef2a7fe062094cbe814a2c90945cd0f8f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 28 17:24:21 2015 -0400

    CDRIVER-789 remove topology scanner's "seen" list

 src/mongoc/mongoc-host-list.c                | 106 ---------------------------
 src/mongoc/mongoc-host-list.h                |  10 ---
 src/mongoc/mongoc-topology-scanner-private.h |   5 +-
 src/mongoc/mongoc-topology-scanner.c         |  41 +++++++----
 src/mongoc/mongoc-topology.c                 |   5 +-
 tests/test-mongoc-topology-reconcile.c       |   2 +-
 tests/test-mongoc-topology-scanner.c         |   8 --
 7 files changed, 34 insertions(+), 143 deletions(-)

commit 9b294e0fa2496c3c6c59552bf4601dbd0581a549
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 28 16:28:51 2015 -0400

    CDRIVER-789 crash on network err from removed node
    
    If the scanner knows about A, a primary, and B, a secondary:
    
    * B is removed from the replica set and shut down
    * The scanner begins, launching async commands to check A and B
    * A responds first and tells the scanner to remove B
    * mongoc_topology_reconcile removes B's mongoc_topology_scanner_node_t and
      destroys it, stream and all
    * But the mongoc_async_cmd_t for B is still active in the scanner, with the
      same stream.
    * B's mongoc_async_cmd_t fails with a network error, and passes the error into
      the command callback.
    * The command callback sees the error and destroys the same stream *again*,
      crashing.
    
    The solution is to not destroy removed nodes in mongoc_topology_reconcile, but
    close their streams, and mark them "retired" for the remainder of the
    scan. At the end of the scan destroy retired nodes.

 CMakeLists.txt                               |   1 +
 src/mongoc/mongoc-async-cmd-private.h        |   1 +
 src/mongoc/mongoc-async-cmd.c                |  21 ++-
 src/mongoc/mongoc-async.c                    |   1 +
 src/mongoc/mongoc-client-private.h           |   6 +
 src/mongoc/mongoc-client.c                   |   2 +-
 src/mongoc/mongoc-cluster.c                  |   6 +
 src/mongoc/mongoc-topology-scanner-private.h |  10 +-
 src/mongoc/mongoc-topology-scanner.c         |  70 ++++++--
 src/mongoc/mongoc-topology.c                 |   8 +-
 tests/Makefile.am                            |   1 +
 tests/debug-stream.c                         | 228 +++++++++++++++++++++++++++
 tests/test-libmongoc.h                       |   9 ++
 tests/test-mongoc-client.c                   |  12 +-
 tests/test-mongoc-topology-reconcile.c       |  28 +++-
 tests/test-mongoc-topology-scanner.c         |   2 +
 16 files changed, 365 insertions(+), 41 deletions(-)

commit 5b147145b3b787460bd30f224fda46a3cac60b38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 11 11:05:07 2015 -0400

    CDRIVER-789 re-enable topology tests

 tests/test-mongoc-client.c | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

commit 8c1dbd4d30e0e9eef600c08c9e34dc54fe082247
Merge: b9d79b4 bc2300a
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Aug 31 22:25:46 2015 -0400

    Merge pull request #263 from ksuarz/CDRIVER-593-strcasecmp
    
    CDRIVER-593 strcasecmp

commit bc2300a5c7958123529caa21bfd0a32329b838b2
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Aug 31 16:10:25 2015 -0400

    CDRIVER-593 add missing include

 src/mongoc/mongoc-uri.c | 1 +
 1 file changed, 1 insertion(+)

commit ed951afad91c7b2f92883a0c665a5dc3f136dfb6
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Mon Aug 31 11:45:20 2015 -0400

    CDRIVER-593 merge strcasecmp checks
    
    Checks for strcasecmp and strncasecmp on Windows have been moved to
    mongoc-util-private.h.

 src/mongoc/mongoc-cluster.c              | 4 ----
 src/mongoc/mongoc-cursor.c               | 6 +-----
 src/mongoc/mongoc-host-list.c            | 6 +-----
 src/mongoc/mongoc-sasl.c                 | 5 +----
 src/mongoc/mongoc-server-description.c   | 6 +-----
 src/mongoc/mongoc-ssl.c                  | 6 +-----
 src/mongoc/mongoc-topology-description.c | 6 +-----
 src/mongoc/mongoc-uri.c                  | 5 -----
 src/mongoc/mongoc-util-private.h         | 6 ++++++
 9 files changed, 12 insertions(+), 38 deletions(-)

commit b9d79b45709029d27c25472278551505a3582866
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 14:25:43 2015 -0700

    evergreen is not a fan of these tests

 .mci.yml                     |  1 +
 tests/test-mongoc-topology.c | 27 +++++++++++++++++----------
 2 files changed, 18 insertions(+), 10 deletions(-)

commit e4eee0bfc08f47ac854791fc9bd616f8f72095f3
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 11:24:15 2015 -0700

    Remove more unused stuff

 src/mongoc/mongoc-socket.c |  2 --
 tests/test-libmongoc.c     | 21 ---------------------
 2 files changed, 23 deletions(-)

commit b1014167312773e2f62585668fc00361456a7efe
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 11:16:24 2015 -0700

    clang belives this will always be false without the cast

 tests/test-mongoc-log.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 97b07488ee929a33311b865209dd3880d08c0903
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 11:14:38 2015 -0700

    CDRIVER-756: n_return is unsigned int... its not going to be negative

 tests/mock_server/request.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8796788d8070a51ec12cf00aab58eaf9ca876f43
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:36:05 2015 -0700

    CDRIVER-756: Sprinkle, sprinkle, little trace,
    
    How I wonder what you do!
    Up above the code so high,
    Like a diamond in the sky.

 src/mongoc/mongoc-socket.c     |  7 +++++++
 src/mongoc/mongoc-stream-tls.c | 38 ++++++++++++++++++++++++++++++--------
 2 files changed, 37 insertions(+), 8 deletions(-)

commit 7c985ce7dfdd054819bf11b826970b3c5e918f61
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:34:12 2015 -0700

    CDRIVER-756: Only record the errno on failure

 src/mongoc/mongoc-socket.c | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 835f5ddf613805284910fbbc141d36682669b959
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:32:36 2015 -0700

    CDRIVER-756: We've already returned on failure

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4af81f92980983c0053f355b847db159c7f44968
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:24:23 2015 -0700

    CDRIVER-756: Repeat the [WSA]poll() on failure until we get the event we want or hit the timeout

 src/mongoc/mongoc-socket.c | 62 +++++++++++++++++++++++++++++++---------------
 1 file changed, 42 insertions(+), 20 deletions(-)

commit 68f65659b534c0e64cc97bfa6aad994b3d358ece
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:23:03 2015 -0700

    CDRIVER-756: Simplify mongoc_socket_close()

 src/mongoc/mongoc-socket.c | 29 ++++++++++++++---------------
 1 file changed, 14 insertions(+), 15 deletions(-)

commit 5da9035026c642cb280e7b4135aa18b2ef3eec4b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:10:29 2015 -0700

    CDRIVER-756: Use correct failure value, and assign errno when WSAPoll fails

 src/mongoc/mongoc-socket.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 14e7de8aad70ecac6d2c6b405db14493891493b7
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:03:02 2015 -0700

    CDRIVER-756: Don't overwrite the errno into something we won't be checking for anyway

 src/mongoc/mongoc-socket.c | 12 ------------
 1 file changed, 12 deletions(-)

commit ee8c591ace99e1f1c72a7ed8b4622b22a45f9cce
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 10:00:50 2015 -0700

    CDRIVER-756: This iov really should be const
    
    We can't change the API now, so instead copy it and work on the copy
    to ensure we don't molest it

 src/mongoc/mongoc-socket.c | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

commit f8207fc0a71bc74837bc3642afad15e778e01f50
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:54:12 2015 -0700

    CDRIVER-756: Lets not overwrite the error code blindly after successful write

 src/mongoc/mongoc-stream-tls.c | 5 -----
 1 file changed, 5 deletions(-)

commit bb5008e16fad5da3b656dd9f95f4a5c51bb8f13d
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:51:06 2015 -0700

    CDRIVER-756: Check for both 0 and -1 as maybe-failure-or-maybe-retry codes

 src/mongoc/mongoc-stream-tls.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e863800079f3fdfc0f0abf6f22e098e5fa46ec26
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:48:56 2015 -0700

    CDRIVER-770: Return how much we did write since its OK to return short writes
    
    When we can't finish writing our entire buffered iovec, we must still
    return how much we have successfully written so far, in case any of
    the previous buffers finished.
    Then we can regroup and recalculate from where we left off and retry in
    case of an [WSA]EWOULDBLOCK or friends.

 src/mongoc/mongoc-stream-tls.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit b95d5dfbdd9428129fad749cf5031f2438eac6d2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:36:20 2015 -0700

    CDRIVER-770: BIO_clear_retry_flags()/BIO_set_retry_read() on the BIO we got, not point to

 src/mongoc/mongoc-stream-tls.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 2ae1e8b80d328a36a31880ed4ffc727d10aa32c6
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:27:25 2015 -0700

    CDRIVER-788: Return how many bytes we wrote.
    
    If a iovec is to large to send over sendmsg()/WSASend() we get
    [WSA]EMSGSIZE and hit the _slow version and try to send() it instead.
    Wether or not we finish writing the entire thing (say, hit [WSA]EWOULDBLOCK)
    we must return how much we actually wrote so we can resume from the
    correct location once _mongoc_socket_wait() finishes (e.g. poll(POLLOUT) succeeds)
    and we have enough socketTimeoutMS left to continue writing

 src/mongoc/mongoc-socket.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit ef9aaf212e0d2cfda40df728f0fa1322c8752bc2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:21:17 2015 -0700

    CDRIVER-756: Properly check for error in mongoc_stream_writev
    
    And add additional checks to verify the full write succeeded, or else
    return descriptive error

 src/mongoc/mongoc-cluster.c        | 14 ++----------
 src/mongoc/mongoc-stream-private.h |  7 ++++++
 src/mongoc/mongoc-stream.c         | 44 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 53 insertions(+), 12 deletions(-)

commit 724948b4d891a91e2912497c1a3e544543b501b1
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:15:01 2015 -0700

    CDRIVER-756: Make sure our iovec abstraction is compatible with Windows WSABUF
    
    We cast mongoc_iovec_t to LPWSABUF in our sendmsg() wrapper

 src/mongoc/mongoc-iovec.h | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 715e620eb15e0a4e3fe822cee2a772aa361d3717
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 09:13:27 2015 -0700

    Remove unused functions

 src/mongoc/mongoc-topology.c | 38 --------------------------------------
 1 file changed, 38 deletions(-)

commit aa81a0b48e69540f4e9c65a82e72ae94964c71fd
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 08:58:32 2015 -0700

    CDRIVER-756: Basic stream test

 tests/test-mongoc-stream.c | 101 ++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 99 insertions(+), 2 deletions(-)

commit a38f0c740d9ad1b1c644f24473e37f594d8751c9
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 20 08:52:57 2015 -0700

    Remove unused variable

 tests/test-write-commands.c | 1 -
 1 file changed, 1 deletion(-)

commit a16366aeaff1ea5e5e3ac89d088f6de8f566e2d7
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 19 13:11:18 2015 -0700

    Printout which test is being started

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d5de834e40e157b34a6a384c5856917eb1b56cdc
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Aug 31 10:36:38 2015 -0700

    CDRIVER-820: error: #pragma GCC diagnostic not allowed inside functions
    
    And remove the unhelpful (debug) assert that cause two tickets so far

 src/mongoc/mongoc-matcher-op.c | 9 ---------
 1 file changed, 9 deletions(-)

commit b4ce3e04a2ecf4d783c7af79867f2be9c1f12186
Merge: bcf4c00 5cd61e3
Author: Hannes Magnusson <bjori@10gen.com>
Date:   Mon Aug 31 09:50:36 2015 -0700

    Merge pull request #262 from remicollet/issue-logpriv
    
    allow driver to use mongoc-log-private

commit 5cd61e3170cfe81e4bc9be12d4b2d86e4e1ca53e
Author: Remi Collet <fedora@famillecollet.com>
Date:   Mon Aug 31 18:48:15 2015 +0200

    allow driver to use mongoc-log-private

 src/mongoc/mongoc-log-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bcf4c00a82a1112b5941b48cb3937bbd49f86828
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 21 11:34:59 2015 -0700

    Improve mongoc_index docs

 doc/mongoc_index_opt_geo_get_default.page | 30 +++++++++++++++++++++
 doc/mongoc_index_opt_geo_init.page        | 32 ++++++++++++++++++++++
 doc/mongoc_index_opt_geo_t.page           | 45 +++++++++++++++++++++++++++++++
 doc/mongoc_index_opt_init.page            |  2 +-
 doc/mongoc_index_opt_t.page               | 43 ++++++++++++++++++++++++++---
 doc/mongoc_index_opt_wt_get_default.page  | 30 +++++++++++++++++++++
 doc/mongoc_index_opt_wt_init.page         | 32 ++++++++++++++++++++++
 doc/mongoc_index_opt_wt_t.page            | 41 ++++++++++++++++++++++++++++
 8 files changed, 251 insertions(+), 4 deletions(-)

commit bc4ce3d3a6fd7fdfdd541b2b7b6006e560b45af1
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 21 10:45:58 2015 -0700

    CDRIVER-734: documentation says "Returns blah"

 doc/mongoc_index_opt_get_default.page | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 8005ba530be1debfa56cd566d0c84802fe104d35
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Aug 21 10:44:42 2015 -0700

    CDRIVER-794: document mongoc_log_trace_enable / disable
    
    Also touch on CDRIVER-503 by noting how to disable all logging

 doc/logging.page | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 346349d8d1e721e782d154df01c1a1935b4d6b90
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 07:02:24 2015 -0400

    CDRIVER-735 aggregate uses cursor if wire version > 0

 src/mongoc/mongoc-collection.c | 23 +++++++++++++++--------
 1 file changed, 15 insertions(+), 8 deletions(-)

commit c9e75914e6456361f13a3443459a6dcd99057d99
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 17:02:59 2015 -0400

    CDRIVER-735 aggregate shouldn't override default batchSize

 src/mongoc/mongoc-collection.c | 6 ------
 1 file changed, 6 deletions(-)

commit 79ad44f89d578e23e917d5848fe4f301b938706f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 16:52:52 2015 -0400

    CDRIVER-735 show that aggregate ignores wire version

 build/generate-future-functions.py   |   8 ++
 tests/mock_server/future-functions.c |  59 ++++++++++++
 tests/mock_server/future-functions.h |  11 +++
 tests/mock_server/mock-server.c      |   2 +
 tests/test-mongoc-collection.c       | 170 ++++++++++++++++++++++++++++++++++-
 5 files changed, 249 insertions(+), 1 deletion(-)

commit 4ef8b38b3d866e5aa131f7671ba6ddfd0ade8d73
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 06:59:32 2015 -0400

    fix mongoc_collection_aggregate example

 doc/mongoc_collection_aggregate.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b59b6381ff186ff03c742b4ac4dac4c52f048e00
Author: Manuel Schoenlaub <manuel.schoenlaub@skiline.cc>
Date:   Wed Aug 26 09:58:39 2015 +0200

    CDRIVER-809: Changes client pool size parameters to uint_32_t and adds documentation for the client pool size setters

 doc/mongoc_client_pool_max_size.page | 33 +++++++++++++++++++++++++++++++++
 doc/mongoc_client_pool_min_size.page | 33 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-client-pool.c      |  6 +++---
 src/mongoc/mongoc-client-pool.h      |  4 ++--
 4 files changed, 71 insertions(+), 5 deletions(-)

commit 248ff0100173fe97629c8b0dc3d3c2569c298e17
Author: Manuel Schoenlaub <manuel.schoenlaub@skiline.cc>
Date:   Wed Aug 26 09:23:50 2015 +0200

    CDRIVER-809: Adds mongoc_client_pool_max_size and mongoc_client_pool_min_size to symbol files

 build/autotools/versions.ldscript | 2 ++
 build/cmake/libmongoc-ssl.def     | 2 ++
 build/cmake/libmongoc.def         | 2 ++
 src/libmongoc.symbols             | 2 ++
 4 files changed, 8 insertions(+)

commit 81518878e84212c07f46cdd64897462e698441f0
Author: Manuel Schoenlaub <manuel.schoenlaub@skiline.cc>
Date:   Tue Aug 25 14:16:53 2015 +0200

    CDRIVER-809: Adds functions to programatically configure connection pool size

 src/mongoc/mongoc-client-pool.c | 26 ++++++++++++++
 src/mongoc/mongoc-client-pool.h |  4 +++
 tests/test-mongoc-client-pool.c | 76 +++++++++++++++++++++++++++++++++++++++++
 3 files changed, 106 insertions(+)

commit 70d6c651f5bcff0b27091b4dc4770f7a642827d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 18 09:45:08 2015 -0400

    CDRIVER-787 crash in legacy writes after network err
    
    If _mongoc_client_recv_gle returned an error, the getlasterror object
    was sometimes NULL, sometimes not. If NULL, the calls to bson_destroy
    in update_legacy and delete_legacy crashed. If not NULL, then
    insert_legacy leaked it, since there was no bson_destroy call there.
    
    Ensure that gle is NULL iff _mongoc_client_recv_gle returns false.

 src/mongoc/mongoc-client.c        | 16 +++++++---------
 src/mongoc/mongoc-write-command.c |  3 ---
 2 files changed, 7 insertions(+), 12 deletions(-)

commit 6e790dd5c40dae832018b22ed4f1fc9d308e1a93
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 25 17:03:53 2015 -0400

    CDRIVER-787 test OP_UPDATE and DELETE err handling
    
    Reveals segfault if server hangs up while client waits to receive getlasterror
    response.

 tests/mock_server/mock-server.c |  85 ++++++++++++++++
 tests/mock_server/mock-server.h |  11 ++
 tests/mock_server/request.c     | 219 +++++++++++++++++++++++++++++++++++++++-
 tests/mock_server/request.h     |  11 ++
 tests/test-bulk.c               | 103 +++++++++++++++++++
 5 files changed, 426 insertions(+), 3 deletions(-)

commit 02b11e70f09fc557ebc5b367a0c80c061bef0dae
Author: Jose Sebastian Battig <jsbattig@convey.com>
Date:   Wed Aug 19 23:02:03 2015 -0500

    B-0 fixed seek method. Bad interpretation of seek_end mode. it should seek from one byte more than number of bytes written. seek_end with offset zero should put pointer exactly at the end ready to receive more data

 src/mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 13a61fd09b3f665956db34f325183c9359b396de
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 23:03:16 2015 -0400

    CDRIVER-699 always scan once before selection err
    
    Update single-threaded mongoc_topology_select to match this change:
    
    https://github.com/mongodb/specifications/commit/8a1189
    
    Also, abort selection early if try-once is false and there is no time left for
    the required half-second sleep.

 src/mongoc/mongoc-topology.c           | 94 +++++++++++++++++++++-------------
 tests/test-mongoc-client.c             |  3 --
 tests/test-mongoc-topology-reconcile.c |  7 ---
 tests/test-mongoc-topology.c           | 18 ++-----
 4 files changed, 61 insertions(+), 61 deletions(-)

commit c5fa33e74bcab81e0bd50320fa863254a19f4dfb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 23:12:04 2015 -0400

    CDRIVER-699 thoroughly describe timeout options
    
    Comply with Server Selection Spec's requirements for driver docs.

 doc/mongoc_uri_t.page | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 5fbad473509da725aa56e6c901251ad5c1762138
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 17 16:43:54 2015 -0400

    CDRIVER-628 deprecate w=-1
    
    MONGOC_WRITE_CONCERN_W_ERRORS_IGNORED will be removed in the next major
    release.

 doc/mongoc_write_concern_set_w.page | 2 +-
 doc/mongoc_write_concern_t.page     | 9 +++++----
 src/mongoc/mongoc-write-concern.h   | 2 +-
 3 files changed, 7 insertions(+), 6 deletions(-)

commit 17ce7d33a677a74f7fafce052cfec01a2424421e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 17 21:39:51 2015 -0400

    const-correctness in topology test

 tests/test-mongoc-topology-reconcile.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9c945db160e6147b588f753551eb6a33545ebbe6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 17 21:39:24 2015 -0400

    introduce "MONGOC_TEST_SERVER_VERBOSE" env var

 CONTRIBUTING.md                        | 2 ++
 tests/mock_server/mock-server.c        | 5 +++++
 tests/test-libmongoc.h                 | 1 +
 tests/test-mongoc-topology-reconcile.c | 1 +
 4 files changed, 9 insertions(+)

commit 98f5fdaac04fa562791a6284a93ec943014d59c3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 12:23:42 2015 -0400

    CDRIVER-799 use connecttimeoutms for ismaster checks
    
    Currently the scanner waits serverSelectionTimeoutMS to connect to all servers
    and receive ismaster responses. This doesn't match the spec:
    
    "The socket used to check a server MUST use the same connectTimeoutMS as
    regular sockets. Multi-threaded clients SHOULD set monitoring sockets'
    socketTimeoutMS to the connectTimeoutMS."

 doc/mongoc_uri_t.page                |   4 +-
 src/mongoc/mongoc-topology-private.h |   3 +-
 src/mongoc/mongoc-topology.c         |  28 ++++--
 tests/TestSuite.h                    |  19 ++++
 tests/test-mongoc-topology.c         | 168 ++++++++++++++++++++++++++++++++++-
 5 files changed, 209 insertions(+), 13 deletions(-)

commit c1b761ba00305059f15dac5c12aa23c6860916fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 17 15:45:03 2015 -0400

    merge-mistake
    
    Mistake merging 112fc59fb from a branch in progress.

 src/mongoc/mongoc-collection.c | 1 -
 1 file changed, 1 deletion(-)

commit 92067e7a97d1a150134b367923be3a225f634179
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 15:41:15 2015 -0400

    factor mongoc_uri_destroy

 src/mongoc/mongoc-uri.c | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

commit fb1cac195c0ac9594ba42e2999eb1d42ec3db452
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 15:15:08 2015 -0400

    fix comment in mongoc_client_get_gridfs

 src/mongoc/mongoc-client.c | 3 ---
 1 file changed, 3 deletions(-)

commit d81dee8690714fde7356ac1d49cf844a5c9e953a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 11:21:53 2015 -0400

    typo in mongoc_uri_t.page

 doc/mongoc_uri_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 44c7fb3f59ffaaea03e98da09eb7b2ff19a318f4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 06:59:10 2015 -0400

    "$empty" feature in match_json test function

 tests/test-conveniences.c | 98 ++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 88 insertions(+), 10 deletions(-)

commit 48837bece50b38b949f2aff052a44b163717b907
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 15 14:48:58 2015 -0400

    clearer names in match_bson test functions

 tests/test-conveniences.c | 118 ++++++++++++++++++++++++----------------------
 1 file changed, 62 insertions(+), 56 deletions(-)

commit 83c0b333be55a25303574dbe32ee4a1619e64745
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 15 14:44:02 2015 -0400

    make internal test functions static

 tests/test-conveniences.c | 29 +++++++++++++++--------------
 1 file changed, 15 insertions(+), 14 deletions(-)

commit a5c799aced1bc5defd99d3e8284d4ecfa42ac33e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 09:08:41 2015 -0400

    leak formatting "too large" err message
    
    Introduced with CDRIVER-654.

 src/mongoc/mongoc-write-command.c | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 112fc59fb48b64f64570ffb5adaea2bd1e0c2b1a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Aug 16 09:07:33 2015 -0400

    leaks in tests

 src/mongoc/mongoc-collection.c       | 1 +
 tests/mock_server/mock-rs.c          | 2 ++
 tests/test-mongoc-topology-scanner.c | 2 ++
 tests/test-mongoc-uri.c              | 8 ++++----
 4 files changed, 9 insertions(+), 4 deletions(-)

commit 915c00f2ca2ffb15e876e293e421d5a13b9b4475
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 23:08:27 2015 -0400

    print error if test_insert's setup fails

 tests/test-mongoc-collection.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit 344eef4931a108efda55d5e84670533083211e79
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 17:59:45 2015 -0400

    make internal test functions static

 tests/mock_server/request.c | 35 ++++++++++++++---------------------
 tests/mock_server/request.h |  2 --
 2 files changed, 14 insertions(+), 23 deletions(-)

commit 565e1918eea53e85af65d57979d69bc46a7559a6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 11:54:35 2015 -0400

    fix some mock_server_t leaks
    
    Join the future-function thread to free it after resolving the future, and
    clear unprocessed request_t's.

 build/future_function_templates/future.c.template |  5 +++
 tests/mock_server/future.c                        |  5 +++
 tests/mock_server/mock-server.c                   |  6 +++
 tests/mock_server/sync-queue.c                    | 47 +++++++++++++++++------
 tests/mock_server/sync-queue.h                    |  2 +
 5 files changed, 54 insertions(+), 11 deletions(-)

commit 4cb0283604e5dec28f3abda0ebec0a4d5aed2e51
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 11:41:17 2015 -0400

    CDRIVER-366 generate C++-compatible future_new test func

 build/future_function_templates/future.c.template | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f9097140e84cd63a22f14879f708834bc5d8d200
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 14 11:26:08 2015 -0400

    mock server timestamps its verbose output

 tests/mock_server/mock-server.c | 43 ++++++++++++++++++++++++++++++++++++-----
 tests/mock_server/mock-server.h |  2 ++
 2 files changed, 40 insertions(+), 5 deletions(-)

commit 610c4a844952c87d3b2dc6b62fd6552bae2fce01
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 13 22:40:47 2015 -0400

    CDRIVER-804 use BSON_ASSERT, not assert

 src/mongoc/mongoc-async-cmd.c        | 2 +-
 src/mongoc/mongoc-topology-scanner.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit def307306e779274e82705e86d5e74ffe089e620
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 21:37:27 2015 -0400

    CDRIVER-805 lost notification in request_scan
    
    In pooled mode, while the background thread is scanning, topology->scanning is
    true. If the scan is finishing while an application thread requests a scan,
    that means the current scan hasn't found a suitable server for the application
    operation and probably won't. The scan should repeat ASAP (after
    minHeartbeatFrequencyMS), but instead the request is lost and the background
    thread sleeps the full heartbeatFrequencyMS (default 10 seconds).
    
    The code is effectively:
    void request_scan () {
        lock (mutex);
        if (!topology->scanning) {
            cond_signal (cond);
        }
        unlock (mutex);
    }
    
    void background_scanner () {
        for (;;) {
            lock (mutex);
            topology->scanning = true;
            unlock (mutex);
    
            scan ();
    
            lock (mutex);
            topology->scanning = false;
            cond_timedwait (cond, heartbeatFrequencyMS);
            unlock (mutex);
            sleep_until_min_heartbeat_frequency_passed ();
        }
    }
    
    The lost notification happens if topology->scanning is *about* to be set false
    and mongoc_topology_request_scan checks it. The scan should recur ASAP, but
    waits 10 seconds instead.
    
    The solution is to *not* check if topology-scanning in
    mongoc_topology_request_scan. Instead, *always* signal the condition.

 src/mongoc/mongoc-topology.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 75f48068e9ec547ccad48453dacc4d60985f827e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 21:23:55 2015 -0400

    CDRIVER-804 32-bit overflows in timeouts
    
    Stopgap until all timeout arguments are upgraded to int64_t.

 src/mongoc/mongoc-async-cmd.c        | 8 +++++---
 src/mongoc/mongoc-async.c            | 2 +-
 src/mongoc/mongoc-topology-scanner.c | 2 ++
 src/mongoc/mongoc-topology.c         | 2 +-
 4 files changed, 9 insertions(+), 5 deletions(-)

commit f831d05287ec2e3c139015cb7beac80e49ef6764
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 13 21:44:01 2015 -0400

    CDRIVER-299 more output when cmake finds sasl lib

 build/cmake/FindSASL2.cmake | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit ff2a2028f3969b16b4a0132e890a0128124242f9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 13 21:40:53 2015 -0400

    error output in test function create_unique_index

 tests/test-bulk.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit b6b68fe94b9fa50adab0692cfe645aae9f9c8dbd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 21:25:05 2015 -0400

    redundant check of topology->single_threaded

 src/mongoc/mongoc-topology.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 83f072f75e4eb24a6b2a58fc48ce51ec45e7a5cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 17:41:46 2015 -0400

    add "test-libmongoc -d" for debug output
    
    Useful for hanging tests that never print an outcome.

 tests/TestSuite.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 70d03abb76f4ade0f50825913cedc6d587e9e319
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 17:16:13 2015 -0400

    race in mock_server_t run / destroy
    
    If the main thread hasn't started before destroy tries to join it,
    they deadlock.

 tests/mock_server/mock-server.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 4d11c93a730382d8eb32cb1165422880fead67ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 17:15:14 2015 -0400

    don't call bson_get_monotonic_time if not needed

 src/mongoc/mongoc-async-cmd.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit db5852c159a70f91991e7e9239f8ec25ea5571a4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 12 16:57:18 2015 -0400

    add a test for mongoc_cond_timedwait

 CMakeLists.txt             |  1 +
 tests/Makefile.am          |  1 +
 tests/test-libmongoc.c     |  2 ++
 tests/test-mongoc-thread.c | 36 ++++++++++++++++++++++++++++++++++++
 4 files changed, 40 insertions(+)

commit f2554b07606f986652fb5ac9b4c92225f048e265
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 22:44:50 2015 -0400

    fix mongoc_bulk_operation_get_write_concern.page's group

 doc/mongoc_bulk_operation_get_write_concern.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f9fe32251820bc85f9d9a369518d4f7765b9e2f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 22:39:55 2015 -0400

    oxford comma

 doc/mongoc_uri_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e4484c6b1fc47ce5001e56fe7b0bf4cdc136a210
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 21:59:03 2015 -0400

    CDRIVER-771 obsolete warning about API / ABI stability

 README.rst | 3 ---
 1 file changed, 3 deletions(-)

commit f8aae74c15a40e27a6cb55c42a663de2aff47914
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 21:57:52 2015 -0400

    post-release bump

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 8189e90f1ad29fc4a133985452aeec54efd9bb4a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 19:20:11 2015 -0400

    1.2.0-beta Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt              |  8 ++++----
 README.rst                  | 12 ++++++------
 build/autotools/Versions.m4 | 10 +++++-----
 3 files changed, 15 insertions(+), 15 deletions(-)

commit d62fe4a3f985a584ba60fc9fe704b17b40fc1821
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 19:46:55 2015 -0400

    add private headers to distribution tarball

 src/mongoc/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 2c3a98e405172ebb97f759d67d50a940060f25bd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 19:19:57 2015 -0400

    typo on installing.page

 doc/installing.page | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 4d07a4650492d9f14ea604c68f7c6690e24de80a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 16:46:51 2015 -0400

    CDRIVER-789 disable two more tests for now

 tests/test-mongoc-client.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit d875453df57f1a94d01e1f45b9856e4e2071a23c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 15:51:27 2015 -0400

    windows compatibility in test-mongoc-client

 tests/test-mongoc-client.c | 4 ++++
 1 file changed, 4 insertions(+)

commit e02892f5dc436d747ab6759a61e989254d3b9f76
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 15:48:30 2015 -0400

    CDRIVER-699 let test_topology_reconcile_rs pass for now

 tests/test-mongoc-topology-reconcile.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit ffc8a01ebefe14960e3176eac8816ca7500c4a08
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 13:29:27 2015 -0400

    CDRIVER-751 don't recheck any host in same scan
    
    Fix test_topology_scanner_oscillate case.

 CMakeLists.txt                               |   1 +
 src/mongoc/Makefile.am                       |   1 +
 src/mongoc/mongoc-host-list.c                | 172 +++++++++++++++++++++++++++
 src/mongoc/mongoc-host-list.h                |  14 +++
 src/mongoc/mongoc-topology-scanner-private.h |   1 +
 src/mongoc/mongoc-topology-scanner.c         |  22 +++-
 tests/TestSuite.h                            |   2 +-
 tests/test-mongoc-topology-scanner.c         |  39 ++++--
 8 files changed, 236 insertions(+), 16 deletions(-)

commit ddd99c22f9265a4748aa5aaf4850c16b8ea05859
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 10:06:47 2015 -0400

    CDRIVER-751 check discovered servers in same scan
    
    Bug in unreleased Server Discovery And Monitoring implementation.
    
    The spec requires a single-threaded scan to keep going until all nodes
    have been checked, *including* nodes discovered during the scan. But
    _mongoc_topology_do_blocking_scan quit once all servers known at the
    *start* of the scan were checked. Discovered nodes are added to the
    topology description, but not checked until the next scan.
    
    With this patch, a block scan keeps going until all servers are checked,
    including those discovered during this scan.
    
    TODO: test_topology_scanner_oscillate currently fails, revealing that
    in a pathological scenario the driver now errs on the other side, and
    scans forever.

 src/mongoc/mongoc-topology-scanner-private.h |   6 +
 src/mongoc/mongoc-topology-scanner.c         |  51 +++++++-
 src/mongoc/mongoc-topology.c                 |  24 ++--
 tests/TestSuite.h                            |  12 ++
 tests/test-mongoc-topology-reconcile.c       |  14 ++-
 tests/test-mongoc-topology-scanner.c         | 167 ++++++++++++++++++++++++++-
 tests/test-mongoc-topology.c                 |  11 +-
 7 files changed, 259 insertions(+), 26 deletions(-)

commit 9e58464e494bd70f40c7df193a2da5f03445b1f8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 15:24:08 2015 -0400

    forward-port CDRIVER-721 tests to 1.2.0-dev
    
    Discovered CDRIVER-789 from these tests.

 tests/mock_server/mock-server.c |  49 ++++-
 tests/mock_server/mock-server.h |   6 +-
 tests/test-mongoc-client.c      | 385 +++++++++++++++++++++++++++++-----------
 3 files changed, 331 insertions(+), 109 deletions(-)

commit 3bdd8bc1d455181486d168e57106399ff4b4c7e8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 15:06:24 2015 -0400

    add mongoc_set_find_item and mongoc_set_find_id

 src/mongoc/mongoc-set-private.h | 12 ++++++++++
 src/mongoc/mongoc-set.c         | 52 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 64 insertions(+)

commit 3877dc73b4127dca85f391c0496d2c72e8d8c31f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 15:06:00 2015 -0400

    update comments: retries are gone from SDAM

 src/mongoc/mongoc-cluster.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 2d3e0bcc47c4a77d43e9fa38a822c2a019f5fe63
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 14:28:32 2015 -0400

    check disk space in .mci.yml when starting mongod

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e793031a98c0503ed7ec1a2fa1aa8632f72a485a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 14:27:36 2015 -0400

    fix .mci.yml to start mongod on windows

 .mci.yml | 3 +++
 1 file changed, 3 insertions(+)

commit afcd80c7d07838ec05dc24e6dc544840a3791886
Merge: d36d0bd 89e5af8
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Aug 10 10:00:09 2015 -0400

    Merge pull request #257 from jmikola/cdriver-768
    
    CDRIVER-768: Fix build warning for uninitialized value

commit d36d0bd9fe26a3e227a377c3f24093a53a0f61eb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 10 09:33:09 2015 -0400

    CDRIVER-366 compile errors on win64 and unix in C mode

 src/mongoc/mongoc-socket.c | 2 +-
 src/mongoc/mongoc-ssl.c    | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 53fa3bd6073587e661b85a6e6400dcc37c6c2936
Merge: b27a5da 493018d
Author: Hannes Magnusson <bjori@php.net>
Date:   Sun Aug 9 20:39:08 2015 -0700

    Merge branch 'CDRIVER-366-cpp' into 1.2.0-dev
    
    * CDRIVER-366-cpp:
      CDRIVER-366: Update tests to compile using C++ compiler
      CDRIVER-366: Update examples to compile using C++ compiler
      CDRIVER-366: Fix enum related casting
      CDRIVER-366: Cast to correct type
      CDRIVER-366: Cast void to the actual types on assignments
      CDRIVER-366: `not` is a reserved keyword in C++
      CDRIVER-366: `delete` is a reserved keyword in C++
      CDRIVER-366: Cast allocations to correct types

commit 493018d026a4aaa3720f524a337d0a96b0f9a9f5
Author: Hannes Magnusson <bjori@php.net>
Date:   Sun Aug 9 20:38:34 2015 -0700

    CDRIVER-366: Update tests to compile using C++ compiler
    
    Conflicts:
    	tests/test-mongoc-client.c
    	tests/test-mongoc-cluster.c

 tests/TestSuite.c                    | 10 +++++-----
 tests/ha-test.c                      |  6 +++---
 tests/json-test.c                    |  2 +-
 tests/mock_server/future.c           |  4 ++--
 tests/mock_server/mock-rs.c          |  2 +-
 tests/mock_server/mock-server.c      |  8 ++++----
 tests/mock_server/request.c          |  8 ++++----
 tests/mock_server/sync-queue.c       |  2 +-
 tests/ssl-test.c                     |  2 +-
 tests/test-bulk.c                    |  4 ++--
 tests/test-mongoc-async.c            |  2 +-
 tests/test-mongoc-buffer.c           |  2 +-
 tests/test-mongoc-client.c           |  6 +++---
 tests/test-mongoc-cluster.c          |  8 ++++----
 tests/test-mongoc-collection.c       |  4 ++--
 tests/test-mongoc-log.c              |  2 +-
 tests/test-mongoc-rpc.c              |  2 +-
 tests/test-mongoc-sdam.c             |  2 +-
 tests/test-mongoc-server-selection.c |  4 ++--
 tests/test-mongoc-topology.c         | 14 +++++++-------
 tests/test-write-commands.c          |  4 ++--
 21 files changed, 49 insertions(+), 49 deletions(-)

commit bc569bc25985ef7910d5f5c3cdda2c4bf98df531
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 6 20:33:14 2015 -0700

    CDRIVER-366: Update examples to compile using C++ compiler

 examples/example-scram.c       | 2 +-
 examples/mongoc-ping.c         | 2 +-
 examples/mongoc-rpc-validate.c | 2 +-
 examples/mongoc-tail.c         | 7 ++++---
 4 files changed, 7 insertions(+), 6 deletions(-)

commit 0aa9addfd7fb572b93e0723d6c32370721a18d05
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 6 20:08:37 2015 -0700

    CDRIVER-366: Fix enum related casting

 src/mongoc/mongoc-bulk-operation.c |  5 ++---
 src/mongoc/mongoc-collection.c     | 38 +++++++++++++++-----------------------
 src/mongoc/mongoc-cursor.c         |  5 +++--
 src/mongoc/mongoc-read-prefs.c     |  2 +-
 src/mongoc/mongoc-write-command.c  | 23 ++++++++++++-----------
 5 files changed, 33 insertions(+), 40 deletions(-)

commit 666f3963c0a79001dbfd31230c5d5616a7ea1b71
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 13:40:32 2015 -0700

    CDRIVER-366: Cast to correct type

 src/mongoc/mongoc-rpc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 068e0adb9b34c5dda54508aa63c08fc97a317b14
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 11:20:36 2015 -0700

    CDRIVER-366: Cast void to the actual types on assignments

 src/mongoc/mongoc-async-cmd.c            |  2 +-
 src/mongoc/mongoc-bulk-operation.c       |  2 +-
 src/mongoc/mongoc-client-pool.c          |  8 +++----
 src/mongoc/mongoc-client.c               |  2 +-
 src/mongoc/mongoc-cluster.c              | 40 ++++++++++++++++----------------
 src/mongoc/mongoc-counters.c             |  2 +-
 src/mongoc/mongoc-cursor-array.c         | 14 +++++------
 src/mongoc/mongoc-cursor-cursorid.c      |  4 ++--
 src/mongoc/mongoc-cursor-transform.c     |  6 ++---
 src/mongoc/mongoc-database.c             |  4 ++--
 src/mongoc/mongoc-list.c                 |  4 ++--
 src/mongoc/mongoc-rpc.c                  |  2 +-
 src/mongoc/mongoc-scram.c                |  4 ++--
 src/mongoc/mongoc-set.c                  |  4 ++--
 src/mongoc/mongoc-ssl.c                  |  2 +-
 src/mongoc/mongoc-stream-tls.c           | 12 +++++++---
 src/mongoc/mongoc-topology-description.c | 34 +++++++++++++--------------
 src/mongoc/mongoc-topology.c             |  8 +++----
 18 files changed, 80 insertions(+), 74 deletions(-)

commit b1e9fad11c07896b3d0394c753760e245a67a6f0
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 11:01:08 2015 -0700

    CDRIVER-366: `not` is a reserved keyword in C++

 src/mongoc/mongoc-matcher-op-private.h |  2 +-
 src/mongoc/mongoc-matcher-op.c         | 22 +++++++++++-----------
 2 files changed, 12 insertions(+), 12 deletions(-)

commit 542950a5610a416e4e326a1128c3aae16d4bcf2c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 10:59:50 2015 -0700

    CDRIVER-366: `delete` is a reserved keyword in C++

 src/mongoc/mongoc-bulk-operation.c        |  4 ++--
 src/mongoc/mongoc-cluster.c               |  2 +-
 src/mongoc/mongoc-rpc-private.h           |  2 +-
 src/mongoc/mongoc-rpc.c                   | 10 +++++-----
 src/mongoc/mongoc-write-command-private.h |  2 +-
 src/mongoc/mongoc-write-command.c         | 20 +++++++++----------
 tests/test-mongoc-rpc.c                   | 32 +++++++++++++++----------------
 7 files changed, 36 insertions(+), 36 deletions(-)

commit f5a24015c10e1ded226f5076d2fa04f4f69d2927
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 10:55:15 2015 -0700

    CDRIVER-366: Cast allocations to correct types

 src/mongoc/mongoc-array.c                |  6 +++---
 src/mongoc/mongoc-async-cmd.c            |  2 +-
 src/mongoc/mongoc-async.c                |  4 ++--
 src/mongoc/mongoc-buffer.c               |  8 ++++----
 src/mongoc/mongoc-bulk-operation.c       |  2 +-
 src/mongoc/mongoc-client-pool.c          |  2 +-
 src/mongoc/mongoc-client.c               |  6 +++---
 src/mongoc/mongoc-cluster.c              |  2 +-
 src/mongoc/mongoc-collection.c           |  2 +-
 src/mongoc/mongoc-counters.c             |  4 ++--
 src/mongoc/mongoc-cursor-array.c         |  2 +-
 src/mongoc/mongoc-cursor-cursorid.c      |  2 +-
 src/mongoc/mongoc-cursor-transform.c     |  2 +-
 src/mongoc/mongoc-cursor.c               |  4 ++--
 src/mongoc/mongoc-database.c             |  4 ++--
 src/mongoc/mongoc-gridfs-file-list.c     |  2 +-
 src/mongoc/mongoc-gridfs-file-page.c     |  4 ++--
 src/mongoc/mongoc-gridfs-file.c          |  4 ++--
 src/mongoc/mongoc-gridfs.c               |  2 +-
 src/mongoc/mongoc-init.c                 |  2 +-
 src/mongoc/mongoc-list.c                 |  4 ++--
 src/mongoc/mongoc-matcher-op.c           | 10 +++++-----
 src/mongoc/mongoc-matcher.c              |  2 +-
 src/mongoc/mongoc-queue.c                |  4 ++--
 src/mongoc/mongoc-read-prefs.c           |  2 +-
 src/mongoc/mongoc-scram.c                |  6 +++---
 src/mongoc/mongoc-server-description.c   |  4 ++--
 src/mongoc/mongoc-set.c                  |  8 ++++----
 src/mongoc/mongoc-socket.c               | 10 +++++++---
 src/mongoc/mongoc-ssl.c                  |  4 ++--
 src/mongoc/mongoc-stream-buffered.c      |  2 +-
 src/mongoc/mongoc-stream-file.c          |  2 +-
 src/mongoc/mongoc-stream-gridfs.c        |  2 +-
 src/mongoc/mongoc-stream-socket.c        |  4 ++--
 src/mongoc/mongoc-stream-tls.c           |  2 +-
 src/mongoc/mongoc-stream.c               |  2 +-
 src/mongoc/mongoc-topology-description.c |  4 ++--
 src/mongoc/mongoc-topology-scanner.c     |  4 ++--
 src/mongoc/mongoc-topology.c             |  2 +-
 src/mongoc/mongoc-uri.c                  |  6 +++---
 src/mongoc/mongoc-write-command.c        |  2 +-
 src/mongoc/mongoc-write-concern.c        |  2 +-
 42 files changed, 79 insertions(+), 75 deletions(-)

commit b27a5da2c2c9a6bed3db14cf311e491bf3720d04
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Aug 6 11:15:40 2015 -0700

    CDRIVER-630: default_stream_initiator can block forever in TLS handshake

 src/mongoc/mongoc-async-cmd-private.h |  1 +
 src/mongoc/mongoc-async-cmd.c         | 11 +++++++++--
 src/mongoc/mongoc-async-private.h     |  1 +
 tests/test-mongoc-stream-tls-error.c  |  6 +-----
 4 files changed, 12 insertions(+), 7 deletions(-)

commit 1f874862f490d5438364aacf3502456ece47b643
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 17:14:55 2015 -0400

    test code cleanup

 tests/test-bulk.c | 1 -
 1 file changed, 1 deletion(-)

commit 6ad918592fd73d34a3981419b1ceb65b82673210
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 16:11:15 2015 -0400

    style

 tests/test-mongoc-client.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit c7149d997842b7a4c27447b308a791477c94254b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 09:50:21 2015 -0400

    print error detail in test_ismaster_impl

 tests/test-mongoc-async.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 7bb04017285ebaa6e04f27e50c43d89c379f5f11
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 15:34:58 2015 -0400

    news for 1.2.0-beta

 NEWS | 75 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 73 insertions(+), 2 deletions(-)

commit 0b530fc5d21816737735c81f4b539a263a544516
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 16:07:21 2015 -0400

    CDRIVER-781 test all supported mongodb versions

 .mci.yml | 264 ++++++++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 212 insertions(+), 52 deletions(-)

commit 03c295bda94e51ecf1e9e8f79b470936e2b23632
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 15:36:13 2015 -0400

    unused includes in tests

 tests/test-mongoc-gridfs.c   | 2 --
 tests/test-mongoc-topology.c | 3 ---
 tests/test-replica-set-ssl.c | 4 ----
 tests/test-replica-set.c     | 5 -----
 tests/test-secondary.c       | 2 --
 5 files changed, 16 deletions(-)

commit ea8de15fcca041807a7b2eab34579153b61dc012
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 15:35:56 2015 -0400

    test code cleanups

 tests/test-bulk.c              | 6 +-----
 tests/test-mongoc-collection.c | 6 ++++--
 tests/test-mongoc-database.c   | 1 -
 tests/test-mongoc-gridfs.c     | 2 +-
 4 files changed, 6 insertions(+), 9 deletions(-)

commit c0a2d46dbf7539d31524158d55f8e3ca10056dea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Aug 8 15:35:02 2015 -0400

    print error messages if tests fail

 tests/TestSuite.h                      |   2 +-
 tests/test-bulk.c                      | 107 ++++++--------
 tests/test-mongoc-client.c             |  25 ++--
 tests/test-mongoc-cluster.c            |  21 ++-
 tests/test-mongoc-collection.c         | 257 ++++++++++++++-------------------
 tests/test-mongoc-database.c           |  24 ++-
 tests/test-mongoc-gridfs.c             |  35 ++---
 tests/test-mongoc-topology-reconcile.c |  10 +-
 tests/test-mongoc-topology.c           |   5 +-
 tests/test-replica-set-ssl.c           |   6 +-
 tests/test-replica-set.c               |  20 +--
 tests/test-secondary.c                 |   2 +-
 12 files changed, 229 insertions(+), 285 deletions(-)

commit a48d38b252e6e77dd9c6b0245a48e2da1282c804
Merge: ca72f65 8fe8742
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Aug 7 16:56:21 2015 -0400

    Merge pull request #256 from jmikola/cdriver-757
    
    CDRIVER-757: Suppress GCC warning for enum range check

commit ca72f65ac6c9322f15bcb7be2fdfea6057a94905
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 14:00:54 2015 -0400

    CDRIVER-497 factor topology configs in .mci.yml

 .mci.yml | 55 +++++++++++++++++++++++++++----------------------------
 1 file changed, 27 insertions(+), 28 deletions(-)

commit 5411f2c0d8d1f2f8958cff0dc7d7446832fcbab8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 13:56:29 2015 -0400

    leaks in tests

 tests/TestSuite.c            |  8 ++++++--
 tests/test-libmongoc.c       | 11 +++++++++--
 tests/test-mongoc-topology.c |  1 +
 3 files changed, 16 insertions(+), 4 deletions(-)

commit bbf4d954310ad1d29a54de1e9cc63213b879156b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Aug 7 05:17:27 2015 -0400

    introduce ASSERT_OR_PRINT test macro

 tests/TestSuite.h            | 15 +++++++++++++++
 tests/test-libmongoc.c       | 14 ++++----------
 tests/test-mongoc-client.c   | 20 ++++++++++----------
 tests/test-mongoc-database.c | 13 ++++---------
 tests/test-mongoc-gridfs.c   | 25 +++++++++----------------
 tests/test-write-commands.c  |  8 +++-----
 6 files changed, 45 insertions(+), 50 deletions(-)

commit 2bea375fc8d8f7b35d9148013de66fb96328833f
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Aug 3 17:37:22 2015 -0400

    CDRIVER-775: Set wtimeoutms for all replica acknowledged write concerns

 src/mongoc/mongoc-uri.c | 4 ++++
 tests/test-mongoc-uri.c | 8 ++++++++
 2 files changed, 12 insertions(+)

commit d15b0e43372976d7d95ebe07e575ced14b4056e9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 21:35:38 2015 -0400

    CDRIVER-699 implement serverSelectionTryOnce
    
    Server Selection Spec:
    
    Single-threaded drivers MUST provide a "serverSelectionTryOnce" mode, in
    which the driver scans the topology exactly once after server selection
    fails, then either selects a server or raises an error.
    
    The serverSelectionTryOnce option MUST be true by default. If it is set
    false, then the driver repeatedly searches for an appropriate server for
    up to serverSelectionTimeoutMS milliseconds (pausing
    minHeartbeatFrequencyMS between attempts).

 src/mongoc/mongoc-error.h              |   2 +-
 src/mongoc/mongoc-topology.c           |  20 ++++--
 tests/test-mongoc-client.c             |  16 +++--
 tests/test-mongoc-topology-reconcile.c |   5 +-
 tests/test-mongoc-topology.c           | 124 +++++++++++++++++++++++++++++++--
 5 files changed, 148 insertions(+), 19 deletions(-)

commit 9e280c85e127a1672dc20dfa783883978bfe02c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 14:37:23 2015 -0400

    CDRIVER-699 introduce serverSelectionTryOnce option

 doc/mongoc_uri_t.page                |  2 ++
 src/mongoc/mongoc-topology-private.h |  1 +
 src/mongoc/mongoc-topology.c         | 17 +++++++++++++++
 src/mongoc/mongoc-uri.c              |  1 +
 tests/test-mongoc-topology.c         | 42 ++++++++++++++++++++++++++++++++++++
 5 files changed, 63 insertions(+)

commit 6febfb6055375e627dc232d75215f0b55a238301
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 22:36:15 2015 -0400

    really start mongo-orchestration on windows

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit b8b3e036e766277ce4d686f8e6e1ba71e2982a00
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 22:35:43 2015 -0400

    print reason if gridfs test_create fails

 tests/test-mongoc-gridfs.c | 4 ++++
 1 file changed, 4 insertions(+)

commit ca623c1491b2b16d5648b70d4cbcfa6b3fd84656
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 16:44:20 2015 -0400

    fix test_command_fq for recent mongos
    
    See SERVER-19810.

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cb5cb0dfe592fcf9ae6c2e6e360e21bc428f8d16
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:59:48 2015 -0400

    fix mongos

 tests/test-mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3d5f0eb2f338272f899834ffafc49f2510ba6e0b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:45:47 2015 -0400

    CDRIVER-497 fix test failures with mongos

 tests/TestSuite.c              |  4 ++++
 tests/test-libmongoc.c         | 19 +++++++++++++++++++
 tests/test-libmongoc.h         |  1 +
 tests/test-mongoc-client.c     | 10 ++++++++--
 tests/test-mongoc-collection.c |  1 -
 5 files changed, 32 insertions(+), 3 deletions(-)

commit ed77cb8d92578f0d55425bbe6deab1c5fc06d21f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:23:01 2015 -0400

    CDRIVER-497 remove obsolete param in test helper functions

 tests/test-bulk.c              | 50 +++++++++++++++++++++---------------------
 tests/test-libmongoc.c         | 16 ++++++--------
 tests/test-libmongoc.h         |  8 +++----
 tests/test-mongoc-client.c     | 14 ++++++------
 tests/test-mongoc-cluster.c    |  8 +++----
 tests/test-mongoc-collection.c | 44 ++++++++++++++++++-------------------
 tests/test-mongoc-cursor.c     |  8 +++----
 tests/test-mongoc-database.c   | 12 +++++-----
 tests/test-mongoc-gridfs.c     | 18 +++++++--------
 tests/test-mongoc-topology.c   | 14 ++++++------
 tests/test-write-commands.c    |  4 ++--
 11 files changed, 97 insertions(+), 99 deletions(-)

commit 6955abec783dae8b5fa7134171ec0af9fa808efd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:06:27 2015 -0400

    print reason if test_exhaust_cursor fails

 tests/test-mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d1e05ccd9dc81d431fb4afb5ef2be443a369a007
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:04:31 2015 -0400

    longer timeout in test_cooldown_standalone
    
    serverSelectionTimeoutMS=1 could cause rare spurious failures

 tests/test-mongoc-topology.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8b86f45224f91899a8c80c88fd00d6567fa6c47c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:03:41 2015 -0400

    skip auth tests if credentials aren't provided
    
    Don't attempt auth tests if MONGOC_TEST_USER isn't defined in the environment.

 tests/test-mongoc-client.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 3a12ccaee6aaa41a2b569ae3ed1c289f205a0228
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:02:30 2015 -0400

    don't run test_client_read_prefs twice
    
    A merge mistake.

 tests/test-mongoc-client.c | 1 -
 1 file changed, 1 deletion(-)

commit bb836ecf9a19f8e52f34b6475b15c8654830ce96
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 15:01:56 2015 -0400

    CDRIVER-497 tests can use RS connection string
    
    Use MONGOC_TEST_HOST to find a host, then call ismaster to discover whether
    it's an RS or not.

 tests/TestSuite.c          |   6 +
 tests/test-libmongoc.c     | 397 ++++++++++++++++++++++++++++++++++++---------
 tests/test-libmongoc.h     |   6 +
 tests/test-mongoc-client.c |  27 +--
 tests/test-mongoc-cursor.c |   2 +-
 5 files changed, 351 insertions(+), 87 deletions(-)

commit e0290b90f8fb11b6dc0cfe3d77209bc1efdc3bcb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 08:01:51 2015 -0400

    unused includes

 src/mongoc/mongoc-set-private.h | 1 -
 src/mongoc/mongoc-set.c         | 1 -
 2 files changed, 2 deletions(-)

commit 386db7e3ff10ba4618fbf1d4873f50735090cff9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 08:01:36 2015 -0400

    CDRIVER-497 test with single, RS, and sharded

 .mci.yml                                          | 179 ++++++++++++++++++----
 orchestration_configs/replica_sets/auth.json      |  58 +++++++
 orchestration_configs/replica_sets/basic.json     |  55 +++++++
 orchestration_configs/servers/auth.json           |  13 ++
 orchestration_configs/servers/basic.json          |   9 ++
 orchestration_configs/servers/mmapv1.json         |  10 ++
 orchestration_configs/servers/wiredtiger.json     |  10 ++
 orchestration_configs/sharded_clusters/auth.json  |  43 ++++++
 orchestration_configs/sharded_clusters/basic.json |  40 +++++
 9 files changed, 391 insertions(+), 26 deletions(-)

commit 858edbd78b92e0ba30ba18caf7e7db31d6ef8927
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Aug 6 07:04:35 2015 -0400

    note unused tasks in .mci.yml

 .mci.yml | 2 ++
 1 file changed, 2 insertions(+)

commit 7e74e8baa2345fe22c79af8ef31e5e7b2c1434b8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 21:31:42 2015 -0400

    leak in mock server

 tests/mock_server/mock-server.c | 2 ++
 1 file changed, 2 insertions(+)

commit 5169d47e5a64f8bcd50a78fd7f21315a03c19b13
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 16:15:40 2015 -0400

    unused includes

 tests/test-mongoc-cluster.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 7c854b655b3cfefa0b876c496f6e746d5f235f3c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 15:44:16 2015 -0400

    speed up test_unavailable_seeds

 tests/test-mongoc-client.c | 30 ++++++++----------------------
 1 file changed, 8 insertions(+), 22 deletions(-)

commit 10c0421289330a0733f4ee1d35e156a871afaedc
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 30 15:23:28 2015 -0700

    CDRIVER-595: Remove uses of bare memory methods

 src/mongoc/mongoc-sasl.c | 30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)

commit 91a651d3f37e778137519b9821745b14dc99ac17
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 30 15:08:54 2015 -0700

    CDRIVER-595: These are bson_free()d, so must be bson_malloc()d

 examples/mongoc-rpc-validate.c | 2 +-
 tests/test-mongoc-collection.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 109a3ca5507db35c45403b9744e2205b19acf4ca
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 15:23:08 2015 -0400

    CDRIVER-699 longer sleep in cooldown tests

 tests/test-mongoc-topology.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit dfe7f7ea7136449879720cacf01956bda56dc277
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 11:58:39 2015 -0400

    CDRIVER-663 32-bit windows test in evergreen
    
    Skip auth tests until we have 32-bit OpenSSL libs provided on build
    boxes.

 .mci.yml | 26 +++++++++++++++++++++-----
 1 file changed, 21 insertions(+), 5 deletions(-)

commit f013ef37db78a740519aaeb819347ae85de79f3d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 22:40:46 2015 -0400

    CDRIVER-777 combine defns of usleep for windows
    
    usleep is implemented for Windows in two
    places in the libmongoc code; combine them.

 CMakeLists.txt                       |  1 +
 src/mongoc/mongoc-topology.c         | 19 ++-----------------
 src/mongoc/mongoc-util-private.h     |  2 ++
 src/mongoc/mongoc-util.c             | 21 +++++++++++++++++++++
 tests/Makefile.am                    |  1 +
 tests/mock_server/mock-server.c      |  5 +++--
 tests/test-libmongoc.c               | 16 ++--------------
 tests/test-libmongoc.h               |  5 -----
 tests/test-mongoc-stream-tls-error.c |  3 ++-
 tests/test-mongoc-topology.c         | 30 ++++++++----------------------
 tests/test-mongoc-usleep.c           | 22 ++++++++++++++++++++++
 11 files changed, 64 insertions(+), 61 deletions(-)

commit eeed4b5cb3eee10552c40f0ab0d9274ca56037bc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 22:38:37 2015 -0400

    race in mock_server_destroy

 tests/mock_server/mock-server.c | 1 +
 1 file changed, 1 insertion(+)

commit 64acfd665cceb749e3cfb4cb7855902316b1bae2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 22:38:20 2015 -0400

    obsolete comment in mock-server.c

 tests/mock_server/mock-server.c | 1 -
 1 file changed, 1 deletion(-)

commit 9c5103900f5673280073e1b4e1e36643393084d2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 21:30:45 2015 -0400

    win32 compatibility in test-mongoc-topology.c

 tests/test-mongoc-topology.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 16a9d129b557e2d31b8c23735d46953d77bcc01d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 14:17:19 2015 -0400

    mock_server_destroy joins server threads

 tests/mock_server/mock-server.c | 25 +++++++++++++++++--------
 1 file changed, 17 insertions(+), 8 deletions(-)

commit 841bb4d8a914f9b2fd364cb13d67cc665c71a294
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 14:12:12 2015 -0400

    CDRIVER-620 restore logger state after tests
    
    Prevents a much-later crash in the test suite on win32.

 src/mongoc/mongoc-log-private.h |  2 ++
 src/mongoc/mongoc-log.c         | 10 ++++++++
 tests/test-mongoc-log.c         | 57 ++++++++++++++++++++++++++++++++---------
 3 files changed, 57 insertions(+), 12 deletions(-)

commit 5235278568fdfbf4e886fa7d666108a96398a177
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Aug 4 13:54:42 2015 -0400

    flush stdout / stderr when printing test output
    
    On Windows, we can lose test output if the test crashes
    or aborts before flushing.

 tests/TestSuite.c               | 38 ++++++++++++++++++++++++++++++++------
 tests/mock_server/mock-server.c |  8 ++++++++
 2 files changed, 40 insertions(+), 6 deletions(-)

commit 2f6d3bed85b7e2874663e02c76b6c17f972bc519
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Aug 3 22:19:34 2015 -0400

    CDRIVER-699 scanner thread ignores cooldown correctly
    
    Bugfix to unreleased code: The scanner's logic was inverted. It was
    supposed to ignore cooldownMS and always recheck down nodes. Instead,
    it never rechecked them.

 src/mongoc/mongoc-topology-scanner.c | 6 +++---
 tests/test-mongoc-cluster.c          | 5 +++++
 2 files changed, 8 insertions(+), 3 deletions(-)

commit 3d009414d7fe67fa824c301019f7807d818b5eaa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Aug 5 15:16:57 2015 -0400

    post-merge fix in CMakeLists.txt

 CMakeLists.txt | 1 -
 1 file changed, 1 deletion(-)

commit 8cbb0998b39a80e8f1e1f93d95e1d2d22067c444
Merge: 9f9f255 4a0c4bd
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Wed Aug 5 13:22:01 2015 -0400

    Merge pull request #255 from bjori/1.2.0-dev
    
    MFH

commit 4a0c4bd2f127fcc355b0e4491b5b16093d5a237d
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 09:05:30 2015 -0700

    There is no reason to disable the mockserver these days

 tests/test-mongoc-client.c | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

commit a6c3fb524f66b87b948390d1445a7058545c207c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 5 09:02:01 2015 -0700

    Revert "Revert "CDRIVER-699 obey cooldownTimeMS""
    
    This reverts commit ca5c8f90003754bf2b880b695372ac630fe30dcf.

 src/mongoc/mongoc-topology-private.h         |   1 +
 src/mongoc/mongoc-topology-scanner-private.h |   4 +-
 src/mongoc/mongoc-topology-scanner.c         |  46 ++++++--
 src/mongoc/mongoc-topology.c                 |  52 +++++++--
 tests/test-mongoc-topology-scanner.c         |   2 +-
 tests/test-mongoc-topology.c                 | 168 +++++++++++++++++++++++++++
 6 files changed, 251 insertions(+), 22 deletions(-)

commit 9f9f2558cee2b317cce7afe6fcbe00084b69c926
Author: Derick Rethans <github@derickrethans.nl>
Date:   Tue Jul 28 10:54:16 2015 +0100

    Fixed typo: Ingoring -> Ignoring

 src/mongoc/mongoc-bulk-operation.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ec8657deccbf37d2a12d983b6698a6ad63d5752e
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 31 17:31:35 2015 -0700

    CDRIVER-771: Obsolete language needs updating

 README.rst | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 89e5af812cfec44164dd4a327a1628c8762d4c0c
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Jul 30 14:56:59 2015 -0400

    CDRIVER-768: Fix build warning for uninitialized value

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cc9391f05fc426599427baef8e814183b7b85cf9
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Jul 22 11:41:09 2015 -0400

    Expose mongoc_uri_parse_host() to other drivers
    
    The PHP driver, for one, relies on this for parsing additional client options (outside of the URI).

 src/mongoc/mongoc-uri-private.h | 3 +++
 src/mongoc/mongoc-uri.c         | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

commit 5ac5202a1b8fe2abf0d52685f358dd06bd3e0648
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 30 11:36:13 2015 -0700

    CDRIVER-766: Build warnings for undefined MONGOC_TRACE

 src/mongoc/mongoc-log.c | 2 +-
 tests/TestSuite.c       | 2 +-
 tests/test-mongoc-log.c | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 8fe874241113c683d383acb20b19b7a667649f8a
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Thu Jul 30 14:28:51 2015 -0400

    CDRIVER-757: Suppress GCC warning for enum range check
    
    If the enum is compiled as an unsigned integer, this could trigger a type-limits warning (which might disrupt a -Werror build).

 src/mongoc/mongoc-matcher-op.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit e9c97cec61b39844045351ef6ccefd9db1ba6d17
Author: Claudio Canella <canellac@gmail.com>
Date:   Thu Jul 30 17:54:03 2015 +0200

    Fixed error I introduced when cursor is invalid.

 src/mongoc/mongoc-database.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 72dd3ef679d87705507d544f7b510e288a2eeda8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 29 13:04:33 2015 -0700

    Skip Slow Server Selection tests if requested

 tests/test-mongoc-client.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit b8e71f367f60c57db9b7a27e02b12e528bc9774c
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 29 13:04:18 2015 -0700

    Skip tests that require mock-server upgrades

 tests/test-mongoc-client.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit e62117d12a600f6cf61eb409933af6f92a3d7c22
Merge: ca5c8f9 a74550f
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 29 12:09:32 2015 -0700

    Merge branch 'master' into 1.2.0-dev
    
    * master: (38 commits)
      various fixups for memory leaks and races in tests
      Fix memory leak in mongoc_uri_parse_option
      post-release bump
      1.1.10 Release
      CDRIVER-755 leaks in _mongoc_cluster_ismaster
      CDRIVER-745 test cluster node destroy, then disconnect
      CDRIVER-750 don't query recovering RS members
      spell "cyrus" correctly in install guide
      CDRIVER-745 crash in _mongoc_cluster_disconnect_node
      post-release bump
      CDRIVER-731: Do not trace SASL mutex callbacks
      debian changelog fixes for deb pkg
      1.1.9 Release
      redundant include
      CDRIVER-721 test reconnection
      CDRIVER-727 actually enable coverage in libmongoc
      update libbson to 1.1.9-dev
      CDRIVER-721 test rs and mongos, connected and not
      CDRIVER-721 additional tests
      CDRIVER-721 mongoc_client_destroy crash after connection fails
      ...
    
    Conflicts:
    	CMakeLists.txt
    	NEWS
    	README.rst
    	build/autotools/Versions.m4
    	build/rpm/mongo-c-driver.spec
    	debian/changelog
    	doc/installing.page
    	doc/mongoc_version.page
    	src/libbson
    	src/mongoc/mongoc-cluster-private.h
    	src/mongoc/mongoc-cluster.c
    	src/mongoc/mongoc-read-prefs.c
    	src/mongoc/mongoc-uri.c
    	src/mongoc/mongoc-write-command.c
    	tests/mock-server.c
    	tests/mock-server.h
    	tests/test-libmongoc.c
    	tests/test-mongoc-client.c
    	tests/test-mongoc-cluster.c
    	tests/test-mongoc-database.c
    	tests/test-mongoc-read-prefs.c
    	tests/test-mongoc-uri.c
    	tests/test-sasl.c

commit ddac3eecafb1bc8aa93f563c30d0eade5a5791ff
Author: Claudio Canella <canellac@gmail.com>
Date:   Wed Jul 29 19:43:09 2015 +0200

    Fixed error with cursor not being freed if invalid namespace is supplied in function mongoc_database_has_collection.

 src/mongoc/mongoc-database.c | 1 +
 1 file changed, 1 insertion(+)

commit ca5c8f90003754bf2b880b695372ac630fe30dcf
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 23 15:05:04 2015 -0700

    Revert "CDRIVER-699 obey cooldownTimeMS"
    
    This reverts commit 922b3f6fb8db7f2627b89d637d11d8887ae1d104.

 src/mongoc/mongoc-topology-private.h         |   1 -
 src/mongoc/mongoc-topology-scanner-private.h |   4 +-
 src/mongoc/mongoc-topology-scanner.c         |  46 ++------
 src/mongoc/mongoc-topology.c                 |  52 ++-------
 tests/test-mongoc-topology-scanner.c         |   2 +-
 tests/test-mongoc-topology.c                 | 168 ---------------------------
 6 files changed, 22 insertions(+), 251 deletions(-)

commit 551d3e6b6986408bb40783252cda347447c0c318
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 29 10:03:11 2015 -0700

    Fix build warning

 tests/TestSuite.c | 3 +++
 1 file changed, 3 insertions(+)

commit e529977d599428cad8163ee31097d40f0e5bb48f
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 23 16:43:57 2015 -0700

    Compile out unused functions using TODO flags rather then comments

 tests/TestSuite.c                    | 9 +--------
 tests/test-bulk.c                    | 6 ++++--
 tests/test-mongoc-client.c           | 8 ++++++--
 tests/test-mongoc-cursor.c           | 5 ++++-
 tests/test-mongoc-stream-tls-error.c | 7 ++++---
 5 files changed, 19 insertions(+), 16 deletions(-)

commit 2b8dca1eee6a780fbccb41978f302830109d7366
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 23 15:28:28 2015 -0700

    CDRIVER-620: Allowing explicit enabling/disabling of tracing
    
    Tracing still needs to be compiled in!
    When it is compiled in, you can turn it off/on by using
    mongoc_log_trace_enable () / mongoc_log_trace_disable ()

 src/mongoc/mongoc-log-private.h |  20 ++++++
 src/mongoc/mongoc-log.c         | 140 +++++++++++++++++++++++++++++++++++++++-
 src/mongoc/mongoc-trace.h       |  95 +++------------------------
 tests/TestSuite.c               |   5 ++
 tests/TestSuite.h               |  10 +++
 tests/test-mongoc-log.c         |  60 +++++++++++++++++
 6 files changed, 243 insertions(+), 87 deletions(-)

commit a74550feb57d38920d6ac0ad7ab86143eb090d69
Author: Jason Carey <jcarey@argv.me>
Date:   Mon Jul 27 14:14:54 2015 -0400

    various fixups for memory leaks and races in tests

 tests/mock-server.c         | 7 ++++++-
 tests/test-mongoc-cluster.c | 9 ++++++++-
 valgrind.suppressions       | 4 ++--
 3 files changed, 16 insertions(+), 4 deletions(-)

commit 5fa8774e947806a8b9600f81c56a31d88aaa31e4
Author: Jason Carey <jcarey@argv.me>
Date:   Mon Jul 27 14:14:38 2015 -0400

    Fix memory leak in mongoc_uri_parse_option

 src/mongoc/mongoc-uri.c | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit c8ea3054426344382aa3256e8ff843d6a1301d0c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 21 21:33:59 2015 -0400

    post-release bump

 CMakeLists.txt              | 6 +++---
 NEWS                        | 3 +++
 build/autotools/Versions.m4 | 4 ++--
 3 files changed, 8 insertions(+), 5 deletions(-)

commit 89d779efd5a82e42ac2604f7af97c9acf2bcb8d0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 21 20:36:05 2015 -0400

    1.1.10 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          |  4 +++-
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 39 insertions(+), 25 deletions(-)

commit 9bcabe263587e9ef2e76eaddd3b40e48c439a274
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 23:14:08 2015 -0400

    CDRIVER-755 leaks in _mongoc_cluster_ismaster
    
    mongoc_cluster_node_t.tags and replSet are overwritten with the new
    ismaster response, without being destroyed first. If the node represents
    a replica set member then its replica set name will be leaked. Same for
    "tags" if the tags document is large enough to spill to heap.

 src/mongoc/mongoc-cluster.c | 176 +++++++++++++++++++++++++++++---------------
 tests/mock-server.c         |  13 +++-
 tests/mock-server.h         |   3 +-
 tests/test-mongoc-client.c  |   4 +-
 tests/test-mongoc-cluster.c | 112 +++++++++++++++++++++++++---
 5 files changed, 233 insertions(+), 75 deletions(-)

commit a967e8ee8d8a0a7d7cd5834155055f7b07c415e7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 22:48:17 2015 -0400

    CDRIVER-745 test cluster node destroy, then disconnect
    
    Verifies mongoc_cluster_node_t's "tags" document is properly
    reinitialized in _mongoc_cluster_node_destroy.

 src/mongoc/mongoc-cluster-private.h |  1 +
 src/mongoc/mongoc-cluster.c         |  2 +-
 tests/test-mongoc-cluster.c         | 23 +++++++++++++++++++++++
 3 files changed, 25 insertions(+), 1 deletion(-)

commit 922b3f6fb8db7f2627b89d637d11d8887ae1d104
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 16 17:02:52 2015 -0400

    CDRIVER-699 obey cooldownTimeMS
    
    Server Description And Monitoring Spec change: "After a single-threaded client
    gets a network error trying to check a server, the client skips re-checking the
    server until cooldownMS has passed."
    
    Additional timing fixes in topology: don't quit with a timeout until *after*
    checking if a suitable server was discovered, and don't sleep
    minHeartbeatFrequencyMS unless needed.

 src/mongoc/mongoc-topology-private.h         |   1 +
 src/mongoc/mongoc-topology-scanner-private.h |   4 +-
 src/mongoc/mongoc-topology-scanner.c         |  46 ++++++--
 src/mongoc/mongoc-topology.c                 |  52 +++++++--
 tests/test-mongoc-topology-scanner.c         |   2 +-
 tests/test-mongoc-topology.c                 | 168 +++++++++++++++++++++++++++
 6 files changed, 251 insertions(+), 22 deletions(-)

commit 73a3693685cb640fc40f42f3aeb66b95368be014
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 17 14:15:45 2015 -0400

    CDRIVER-752 int overflow in mongoc_cond_timedwait
    
    On Solaris, at least, timeval.tv_sec is 32 bits. Cast to int64_t before
    multiplying by 1000 to avoid overflow when converting from seconds to ms.

 src/mongoc/mongoc-thread-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f18211abfa7027050cda1fac2e2092417cd4990
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 22:50:00 2015 -0400

    CDRIVER-750 don't query recovering RS members
    
    Recovering members are not master, not secondary.

 NEWS                                |  1 +
 src/mongoc/mongoc-cluster-private.h |  1 +
 src/mongoc/mongoc-cluster.c         | 12 +++++++-
 src/mongoc/mongoc-read-prefs.c      |  6 ++++
 tests/mock-server.c                 | 43 +++++++++++++++++++++++++--
 tests/mock-server.h                 |  5 ++++
 tests/test-mongoc-client.c          | 58 ++++++++++++++++++++++++++++++++++++-
 tests/test-mongoc-read-prefs.c      | 12 ++++++++
 8 files changed, 133 insertions(+), 5 deletions(-)

commit 0728630c0acffbc512f045de753f2a75ea9d2f77
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 22:00:51 2015 -0400

    timeouts are milliseconds in scanner tests

 tests/test-mongoc-async.c            | 4 ++--
 tests/test-mongoc-topology-scanner.c | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit ddde16e4169d533493fa401e87d338b5a5800018
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 21:51:42 2015 -0400

    update testing guide

 CONTRIBUTING.md | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)

commit 3e590c671ea7f94d58adf01276fbcda418eb1638
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 17:50:11 2015 -0400

    fix mongodb download url formatting in .mci.yml

 .mci.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6dff9f6e9ec4315392e45a1db8a279677169973d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 17:49:43 2015 -0400

    use all-uppercase for env var names in .mci.yml

 .mci.yml | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 19b0fb680ea708b5b349a93664e18eb4fa228bce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jul 19 17:47:53 2015 -0400

    tests ignore empty env vars on unix, same as windows

 tests/test-libmongoc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0320f9d221623d63c87ad79094cd625e793e5182
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 17 19:13:31 2015 -0400

    CDRIVER-663 windows 32-bit build variant
    
    Disable SSL and SASL on Windows 32-bit for now.

 .mci.yml       | 29 ++++++++++++++++++++++-------
 CMakeLists.txt | 11 ++++++++---
 2 files changed, 30 insertions(+), 10 deletions(-)

commit 0b272290e88720b36f4bad11752e5c27e1bbd34c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 17 14:52:58 2015 -0400

    "make valgrind" respects TEST_ARGS environment variable

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5fe9f153d2f082e048da3cf473f1e9c73cd76e93
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 17 02:22:44 2015 -0400

    CDRIVER-742 fix mock server tests on solaris
    
    The non-static "get_port" function conflicted with a symbol in Cyrus SASL.
    sasl_client_init called it by accident in _mongoc_init_ctor, before main().

 tests/mock_server/mock-server.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 206fb2d3c093b970f99d506dd1d86029c89c77a6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 17 02:27:38 2015 -0400

    Revert "CDRIVER-742 disable mock server tests on Solaris"
    
    This reverts commit 651fb897e0d489958f3b832ffa7147d151d5323e.
    
    Conflicts:
    	tests/test-mongoc-collection.c

 tests/TestSuite.c                    | 42 -------------------------------
 tests/TestSuite.h                    | 48 +++++++++++++++--------------------
 tests/test-bulk.c                    | 24 ++++++------------
 tests/test-mongoc-async.c            |  8 ++----
 tests/test-mongoc-client.c           | 14 +++--------
 tests/test-mongoc-collection.c       | 49 ++++++++++++++++--------------------
 tests/test-mongoc-cursor.c           | 33 ++++++++----------------
 tests/test-mongoc-database.c         |  5 ++--
 tests/test-mongoc-topology-scanner.c |  8 ++----
 9 files changed, 68 insertions(+), 163 deletions(-)

commit d0e3e802a918d86f9adffd329d6d4bd4ebe3348f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jul 17 02:23:08 2015 -0400

    Revert "disable more mock server tests on solaris"
    
    This reverts commit 1429062e97fa261a9319f3f08f0d20e699896dad.

 tests/test-mongoc-topology-reconcile.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 1429062e97fa261a9319f3f08f0d20e699896dad
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 18:00:03 2015 -0400

    disable more mock server tests on solaris
    
    Until CDRIVER-742 is fixed.

 tests/test-mongoc-topology-reconcile.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit b74382b6833279524eadc3b09b94f5d4218d0e09
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 16 21:42:40 2015 -0400

    spell "cyrus" correctly in install guide

 doc/installing.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ce422b1e00977702e3c837591cb9777f650549a1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 16 16:57:35 2015 -0400

    configurable request timeout in mock server
    
    Also, return NULL instead of aborting if the timeout
    is exceeded.

 tests/mock_server/mock-server.c | 113 +++++++++++++++++++++++++++-------------
 tests/mock_server/mock-server.h |   5 ++
 2 files changed, 81 insertions(+), 37 deletions(-)

commit 2ac850a88c0b174315f0043f9c2f872c7ea2beb7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 17:59:01 2015 -0400

    CDRIVER-743 properly set topology to "no primary"
    
    If primary steps down and changes its set name between ismaster calls, change topology type from ReplicaSetWithPrimary
    to ReplicaSetNoPrimary.

 src/mongoc/mongoc-topology-description.c           |  1 +
 .../rs/stepdown_change_set_name.json               | 52 ++++++++++++++++++++++
 2 files changed, 53 insertions(+)

commit d8b9c6e055ef78026f9b5684bd15cd8ce97c5b8c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 17:57:12 2015 -0400

    typo in test name

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 155b0a4f32cf33a4b76d16fab35c2e46e2d3b82b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 17:30:43 2015 -0400

    rename _check_if_has_primary to _update_rs_type

 src/mongoc/mongoc-topology-description.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a0997439c86276f0dcdb49550636b11f3e407384
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 09:27:44 2015 -0400

    CDRIVER-745 crash in _mongoc_cluster_disconnect_node
    
    In _mongoc_cluster_node_destroy, don't NULL the node->tags bson.
    Reinitialize it instead, so it can be safely destroyed again if the
    node is reused and disconnected.

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d4192959dbc1a8065482b3ba71ef57e69ad78aec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 15:49:49 2015 -0400

    post-release bump

 CMakeLists.txt              |  6 +++---
 NEWS                        | 20 ++++++++++++++++++++
 build/autotools/Versions.m4 |  4 ++--
 3 files changed, 25 insertions(+), 5 deletions(-)

commit 15a0ab99f1f6e319503e77019a73b0d2a945a5e2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 15:26:11 2015 -0400

    don't truncate long test names

 tests/TestSuite.c |  4 ++--
 tests/TestSuite.h |  3 +++
 tests/json-test.c | 12 ++++++------
 tests/json-test.h |  3 +--
 4 files changed, 12 insertions(+), 10 deletions(-)

commit 560b12cf361e14b3b647fd1ff653ab9843e1c64f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 15:25:57 2015 -0400

    CDRIVER-678 race in sharded topology test

 .../future-functions.c.template                    |  2 +
 .../future-value.h.template                        |  5 ++
 build/generate-future-functions.py                 | 11 +++
 tests/mock_server/future-functions.c               | 61 +++++++++++++++++
 tests/mock_server/future-functions.h               | 11 +++
 tests/mock_server/future-value.c                   | 42 ++++++++++++
 tests/mock_server/future-value.h                   | 40 +++++++++++
 tests/mock_server/future.c                         | 33 +++++++++
 tests/mock_server/future.h                         |  9 +++
 tests/test-mongoc-topology-reconcile.c             | 79 +++++++++++++++-------
 10 files changed, 268 insertions(+), 25 deletions(-)

commit 32abeb6d102e0a011647b6f1367e01e18c7ee6a5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 14:57:53 2015 -0400

    test that we can discover setname if not provided
    
    Server Discovery And Monitoring Spec does not require
    a driver to have this ability, so it provides no tests for it.

 .../supplemental/discover_rs_name.json             | 44 ++++++++++++++++++++++
 .../supplemental/discover_rs_name.yml              | 40 ++++++++++++++++++++
 .../discover_rs_name_from_primary.json             | 39 +++++++++++++++++++
 .../supplemental/discover_rs_name_from_primary.yml | 39 +++++++++++++++++++
 .../discover_rs_name_from_secondary.json           | 40 ++++++++++++++++++++
 .../discover_rs_name_from_secondary.yml            | 40 ++++++++++++++++++++
 tests/test-mongoc-sdam.c                           |  4 ++
 7 files changed, 246 insertions(+)

commit b552b8895c0c06fc2c75ae8019f923eb5239725f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 14:49:17 2015 -0400

    use MAX_NUM_TESTS constant in json-test.c

 tests/json-test.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5b59fd47cf72949ea4945973d7a43696120d2169
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 17:28:14 2015 -0400

    CDRIVER-740 use of server description after free
    
    In the hosts_differ_from_seeds test, the driver connects to "a" and finds a
    primary that whose host list is ["b"]. The primary does not include "a" in its
    own hosts list. The driver adds "b" to its topology description, then iterates
    the topology description removing servers missing from the hosts list from "a".
    
    When it removes the server description for "a" it calls
    mongoc_server_description_cleanup, which frees the server description for "a",
    including its hosts list. It then continues iterating the topology description,
    and checks if "b" is in the hosts list reported by "a". Thus the driver
    accesses the hosts list reported by "a" after freeing that list.

 src/mongoc/mongoc-topology-description.c | 82 +++++++++++++++++++++++---------
 1 file changed, 59 insertions(+), 23 deletions(-)

commit 788c3ff6cf597502eace053725a9ee88f480601a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 17:16:04 2015 -0400

    CDRIVER-678 topology description doesn't control monitoring
    
    The topology description no longer directly affects the scanner, instead we
    reconcile the scanner with the topology description in
    _mongoc_topology_reconcile_add_nodes. Update comments and rename
    _mongoc_topology_description_monitor_new_servers to
    _mongoc_topology_description_add_new_servers, to reflect the new design.

 src/mongoc/mongoc-topology-description.c | 26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit 951ae474a5de9583a6b1bc34a3ff1ab92758424d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 16:49:56 2015 -0400

    introduce mongoc_set_get_item

 src/mongoc/mongoc-set-private.h          |  4 ++++
 src/mongoc/mongoc-set.c                  | 11 +++++++++++
 src/mongoc/mongoc-topology-description.c |  4 ++--
 tests/test-mongoc-sdam.c                 |  2 +-
 4 files changed, 18 insertions(+), 3 deletions(-)

commit ae303e5f2424e0e3910cfde5ff920cd33436c160
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 15 09:33:59 2015 -0400

    fix windows tests in evergreen

 .mci.yml | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 139d08fac2a35e5f39b2d2c16d65e88580e6a9c7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 14 17:24:41 2015 -0400

    nicer errors from SDAM tests

 tests/test-mongoc-sdam.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 2c6a8bbb8a3948120c003e1f29988d5f0f3e1f05
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 9 17:27:37 2015 -0400

    CDRIVER-678 simplify scanner node logic
    
    The introduction of mongoc_topology_reconcile means we no longer need
    return true / false from _mongoc_topology_scanner_cb.

 src/mongoc/mongoc-topology-description-private.h |  2 +-
 src/mongoc/mongoc-topology-description.c         | 19 ++++++++++---------
 src/mongoc/mongoc-topology-scanner-private.h     |  2 +-
 src/mongoc/mongoc-topology-scanner.c             | 12 +++---------
 src/mongoc/mongoc-topology.c                     | 13 +++++--------
 tests/test-mongoc-topology-scanner.c             |  4 +---
 6 files changed, 21 insertions(+), 31 deletions(-)

commit 5bb94d55346b59db0849412c815054af04fc214b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 9 11:36:04 2015 -0400

    CDRIVER-678 test that scanner adds / removes nodes

 CMakeLists.txt                         |   1 +
 tests/Makefile.am                      |   1 +
 tests/mock_server/mock-server.c        |  26 +++
 tests/mock_server/mock-server.h        |   2 +
 tests/test-libmongoc.c                 |  66 +++----
 tests/test-mongoc-topology-reconcile.c | 308 +++++++++++++++++++++++++++++++++
 6 files changed, 372 insertions(+), 32 deletions(-)

commit 651fb897e0d489958f3b832ffa7147d151d5323e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 14 16:16:57 2015 -0400

    CDRIVER-742 disable mock server tests on Solaris
    
    get_port() in mock_server.c often fails on Solaris (tested on Solaris 11
    specifically in Evergreen), logging "Failed to get listening port number:
    Socket operation on non-socket". This leads to test failures so I've disabled
    the mock server tests on Solaris.
    
    It would be nice to determine what's wrong with the mock server test framework
    on Solaris and reenable the tests.

 tests/TestSuite.c                    | 42 +++++++++++++++++++++++++++++++
 tests/TestSuite.h                    | 48 ++++++++++++++++++++---------------
 tests/test-bulk.c                    | 24 ++++++++++++------
 tests/test-mongoc-async.c            |  8 ++++--
 tests/test-mongoc-client.c           | 14 ++++++++---
 tests/test-mongoc-collection.c       | 49 ++++++++++++++++++++----------------
 tests/test-mongoc-cursor.c           | 33 ++++++++++++++++--------
 tests/test-mongoc-database.c         |  5 ++--
 tests/test-mongoc-topology-scanner.c |  8 ++++--
 9 files changed, 163 insertions(+), 68 deletions(-)

commit 0758fb3ffa34b2c9eda107cda70d94ac71fa91f1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jul 14 16:09:59 2015 -0400

    rewrite .mci.yml
    
    Factored in the style of C++ legacy driver:
    
    https://github.com/mongodb/mongo-cxx-driver/blob/legacy/.mci.yml
    
    Preparation for testing multiple versions and configurations of MongoDB in
    Evergreen.

 .mci.yml | 834 +++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 440 insertions(+), 394 deletions(-)

commit 6b538fe6d09f58f787f60f8cfbd4cd973f3df7b0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 20:19:10 2015 -0400

    fix mongo-orchestration on Ubuntu 12.04

 .mci.yml | 1 +
 1 file changed, 1 insertion(+)

commit bb7c60037cfd26c7419129723b7146ffdf8cda5d
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 14 11:18:48 2015 -0700

    Remove unused variable

 src/mongoc/mongoc-client.c | 1 -
 1 file changed, 1 deletion(-)

commit 365c53feafb15b1adc7f0b511d87f4069cd201a2
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 9 13:48:33 2015 -0700

    CDRIVER-737: Improve SCRAM-SHA-1 failure message

 build/autotools/CheckSSL.m4 |  2 +-
 doc/installing.page         |  9 +++++++++
 src/mongoc/mongoc-cluster.c | 26 +++++++++++++++++++++++---
 tests/test-libmongoc.c      |  8 ++++++++
 tests/test-mongoc-client.c  | 23 +++++++++++++++++++----
 5 files changed, 60 insertions(+), 8 deletions(-)

commit f7cb8c497604a291780d6b0692732014bda20835
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 10 09:31:51 2015 -0700

    CDRIVER-480: Check for closed sockets before sending things over the wire

 src/mongoc/mongoc-cluster.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 59ef964561911d9c565e1294ae057d9dc6b8d736
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 13 16:21:16 2015 -0700

    CDRIVER-645: Improve mongoc_uri_*() tests

 tests/test-mongoc-uri.c | 33 ++++++++++++++++++++++++++++++++-
 1 file changed, 32 insertions(+), 1 deletion(-)

commit c27743b268043bd7df19dafd0c7fd003b2394639
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 9 20:47:57 2015 -0700

    CDRIVER-645: Use the actual mongoc_uri_t when applicable
    
    Previously the code over-complicated things by reconstructing the uri by
    parsing the original uri->str, which is the original value used to
    construct it -- not the computed values, or subsequently overwritten
    values (using mongoc_uri_set_option_as_... for example).
    
    This also removes the now useless _mongoc_client_new ()

 src/mongoc/mongoc-client-private.h |   4 --
 src/mongoc/mongoc-client.c         | 132 ++++++++++++-------------------------
 src/mongoc/mongoc-uri.c            |  24 ++++++-
 tests/test-mongoc-uri.c            |  17 +++++
 4 files changed, 83 insertions(+), 94 deletions(-)

commit 0dc9014809f113fd6bda0dc7397ea774690e2cae
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Jul 10 09:18:16 2015 -0700

    Cleanup no-longer-used fields

 src/mongoc/mongoc-cluster-private.h | 6 ------
 src/mongoc/mongoc-cluster.c         | 2 --
 2 files changed, 8 deletions(-)

commit 405718079d273a7a934900e560db0d2fa04f2f5b
Author: Hannes Magnusson <bjori@php.net>
Date:   Thu Jul 9 20:50:49 2015 -0700

    valgrind & debug are phony targets too

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b22c34a70ee6958ef211772b124c67fc4dbc585f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 11:09:22 2015 -0400

    gcc warnings in mock server code

 tests/mock_server/mock-server.h | 16 ----------------
 tests/mock_server/request.c     |  2 ++
 2 files changed, 2 insertions(+), 16 deletions(-)

commit 3fded4438163d9e61f4af02e7f23282db11d22ce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 11:07:56 2015 -0400

    CDRIVER-678 intermittent crash in cursor tests

 tests/test-mongoc-cursor.c | 2 ++
 1 file changed, 2 insertions(+)

commit aa4b0fc4c357849d4cd3b1e9bc2a35fd585e7c0d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jul 13 04:21:30 2015 -0400

    C89 compatibility in collection tests

 tests/test-mongoc-collection.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit dab881f733f70513ab842a9a77b2580f19dab761
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 11 12:14:56 2015 -0400

    refactor collection tests

 tests/test-mongoc-collection.c | 49 ++++++++++++++----------------------------
 1 file changed, 16 insertions(+), 33 deletions(-)

commit a0219c9777f90187fa73d3fa24c66030e0db2a04
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jul 11 12:08:55 2015 -0400

    CDRIVER-654 oversized docs and continueOnError
    
    Changed my mind to conform with PyMongo: if continueOnError, a bulk
    insert *should* continue past a document bigger than maxBsonSize.

 src/mongoc/mongoc-write-command.c | 109 +++++++++----
 tests/test-mongoc-collection.c    | 335 ++++++++++++++++++++++++++------------
 2 files changed, 302 insertions(+), 142 deletions(-)

commit 94d3c1534a5c226a2310a83012eb7f6e7e486d0d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 9 22:30:15 2015 -0400

    CDRIVER-662 relax error checking in bulk tests

 tests/test-bulk.c              |  6 ++++--
 tests/test-mongoc-collection.c | 17 +++++++++++++----
 2 files changed, 17 insertions(+), 6 deletions(-)

commit 5d19f0e98b65d9bc3a08a6088abfc6db4955f9ed
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jul 9 10:58:59 2015 -0400

    spelling in valgrind.suppressions

 valgrind.suppressions | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a038e8d7b3c15aff8cbbc22e94eb8823439af607
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 8 12:28:59 2015 -0400

    introduce bson_iter_bson test convenience

 tests/test-conveniences.c            | 27 +++++++++++++++++++++++++++
 tests/test-conveniences.h            |  3 +++
 tests/test-mongoc-sdam.c             | 27 +++++++++------------------
 tests/test-mongoc-server-selection.c | 33 +++++++++++----------------------
 4 files changed, 50 insertions(+), 40 deletions(-)

commit 5bd3b64274dae8ae4220670ef3aa669a60de3ec7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 8 11:21:25 2015 -0400

    unused include

 tests/json-test.c | 1 -
 1 file changed, 1 deletion(-)

commit f35fa646779f79c616f04d2323e695d20be8f6a1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jul 8 09:53:18 2015 -0400

    fix legacy deletes in release build
    
    Expressions in BSON_ASSERT are skipped in release build.

 src/mongoc/mongoc-write-command.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit 5972a47c1c8ca7bf17056492573579baeb2c9c40
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jul 7 12:35:34 2015 -0700

    Fix -Wimplicit-function-declaration warning

 src/mongoc/mongoc-client.c   | 1 +
 src/mongoc/mongoc-cluster.c  | 1 +
 src/mongoc/mongoc-topology.c | 1 +
 3 files changed, 3 insertions(+)

commit 253eab9ce8f2c7ec82622138ac7bda9083218d3a
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 6 16:02:23 2015 -0700

    CDRIVER-678: Only the first member of seedlist is used

 src/mongoc/mongoc-topology-scanner-private.h |  4 ++++
 src/mongoc/mongoc-topology-scanner.c         |  5 +---
 src/mongoc/mongoc-topology.c                 | 36 ++++++++++++++++++++++++++++
 3 files changed, 41 insertions(+), 4 deletions(-)

commit 4b2f7c569d85332b9f5fc74f45e29b57adb12715
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jun 9 10:18:24 2015 -0700

    CDRIVER-678: Remove unused and confusing mongoc_topology_cb_t

 src/mongoc/mongoc-topology-description-private.h |  9 +--------
 src/mongoc/mongoc-topology-description.c         | 15 +--------------
 src/mongoc/mongoc-topology.c                     |  2 +-
 tests/test-mongoc-server-selection.c             |  4 ++--
 4 files changed, 5 insertions(+), 25 deletions(-)

commit a6df8f7a3fedb204489c76c2219b4a32f1a62148
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 10 11:22:44 2015 -0700

    CDRIVER-645: Support setting "uri options" explicitly
    
    Simplifies and consistentifies fetching uri options
    
    Created & added -private API for:
    - mongoc_uri_option_is_[int32|bool|utf8]()
    - mongoc_uri_[s|g]et_option_as_[int32|bool|utf8]()
    - mongoc_uri_set_username()
    - mongoc_uri_set_password()
    - mongoc_uri_set_database() (needed because of mongoc_client_get_default_database())
    - mongoc_uri_set_auth_source()
    
    Updated the existing URI accessing code to use the new functions rather then
    repeating the same logic all over the place.
    
    Only expose this to internal API (e.g. wrapping libs/drivers) as this
    isn't something a native user of the cdriver should use -- it however
    highly convenient for libs
    
    Also added mongoc_uri_append_host() to the -private API.

 src/mongoc/mongoc-client.c      |  21 +-
 src/mongoc/mongoc-cluster.c     |  19 +-
 src/mongoc/mongoc-topology.c    |  31 +--
 src/mongoc/mongoc-uri-private.h |  53 ++++-
 src/mongoc/mongoc-uri.c         | 480 +++++++++++++++++++++++++++++++++++++---
 tests/test-mongoc-uri.c         |  63 ++++++
 6 files changed, 582 insertions(+), 85 deletions(-)

commit f2f74db3863fd67197bd39e65da12b78ff504d52
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Jul 1 16:32:51 2015 -0400

    CDRIVER-731: Do not trace SASL mutex callbacks
    
    These callbacks may be invoked before users have a chance to set their own log handler, so we should avoid tracing them (akin to the SSL and SCRAM init functions).

 src/mongoc/mongoc-init.c | 18 +++++-------------
 1 file changed, 5 insertions(+), 13 deletions(-)

commit 4282e7498ac92777ba8a6693de691641eb63afe6
Merge: c1ce05e 0da62cf
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon Jul 6 17:34:58 2015 -0400

    Merge pull request #246 from jmikola/patch-1
    
    CDRIVER-731: Do not trace SASL mutex callbacks

commit 0da62cf461b815fb0501b2f23b084583b58e4dca
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Jul 1 16:32:51 2015 -0400

    CDRIVER-731: Do not trace SASL mutex callbacks
    
    These callbacks may be invoked before users have a chance to set their own log handler, so we should avoid tracing them (akin to the SSL and SCRAM init functions).

 src/mongoc/mongoc-init.c | 18 +++++-------------
 1 file changed, 5 insertions(+), 13 deletions(-)

commit 6b5d377cff48afa65b34e485fdda50b021ec054a
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 1 16:01:44 2015 -0700

    Document TEST_ARGS and the 'debug' target

 CONTRIBUTING.md | 35 +++++++++++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)

commit 82643f16dff5515ad2c921fb00d27379982ec257
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jul 1 13:30:41 2015 -0700

    CDRIVER-732: Allow passing test arguments to debug test runs
    
    We still want to make sure we don't fork & run them in parallel, so
    those arguments are hardcoded, but we now support passing for example
    the test name/prefix (-l).
    
    For example:
    
        $ TEST_ARGS="-l /Uri/*" make debug

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c1ce05e78b9b5f1166e6198bacab2f577765951d
Merge: 53b29b3 cba9775
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jul 2 08:57:37 2015 -0400

    Merge pull request #247 from maybeshewill/master
    
    Fixing debian changelog for package

commit cba9775addb3990b27a02ce34fcec14e8e3477b9
Author: Daniil Zaitsev <dzaitsev@ptsecurity.ru>
Date:   Thu Jul 2 15:47:51 2015 +0300

    debian changelog fixes for deb pkg

 debian/changelog | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d949a3a1e51fa3e3c75e6fe512de6f67476a0274
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jun 30 11:47:58 2015 -0700

    CDRIVER-730: unused-variable warnings when building without OpenSSL

 src/mongoc/mongoc-client.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ff51be8ef718082b7dac5dd22cd4a69eb9257e08
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jun 30 11:40:46 2015 -0700

    Ignore new bulk example

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 53b29b3c542bb54623584fdafbe920e6ba19fc29
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 28 20:23:13 2015 -0700

    1.1.9 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 22 +++++++++++++++++-----
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 53 insertions(+), 29 deletions(-)

commit e39adba2cc8608d52fd894cd62d9fea6f0335374
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 28 17:11:50 2015 -0700

    redundant include

 tests/test-mongoc-cluster.c | 1 -
 1 file changed, 1 deletion(-)

commit e24dd09e6bac1d6f596ac49a0bd077953381424e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 28 16:06:15 2015 -0700

    CDRIVER-721 test reconnection
    
    Also implement mock_server_quit.

 tests/mock-server.c          | 74 ++++++++++++++++++++++++++++++++++++--------
 tests/mock-server.h          |  3 +-
 tests/test-mongoc-client.c   | 58 +++++++++++++++++++++++++++-------
 tests/test-mongoc-database.c |  2 +-
 4 files changed, 110 insertions(+), 27 deletions(-)

commit c4ca64212a1fa6767c8acaeea3fab7dc25ec031b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 27 22:27:47 2015 -0700

    CDRIVER-727 actually enable coverage in libmongoc

 build/autotools/Coverage.m4 | 10 ++++++++++
 configure.ac                |  1 +
 src/Makefile.am             |  3 ++-
 3 files changed, 13 insertions(+), 1 deletion(-)

commit e518097de49d07c8cebc31ac1a924afd107cb221
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 27 22:27:10 2015 -0700

    update libbson to 1.1.9-dev

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 04b90bf179d0f0ccf3cf139512b2d6b98484e897
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 26 23:04:48 2015 -0700

    CDRIVER-721 test rs and mongos, connected and not

 tests/test-mongoc-client.c | 69 ++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 61 insertions(+), 8 deletions(-)

commit 7cb06d3895e224d728e1719c9035b57a69a98208
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 25 18:47:27 2015 -0700

    CDRIVER-721 additional tests

 tests/mock-server.c        | 45 +++++++++++++++++++++++++++++++++++++++++----
 tests/mock-server.h        |  6 ++++++
 tests/test-mongoc-client.c | 40 ++++++++++++++++++++++++++++++++++++++++
 3 files changed, 87 insertions(+), 4 deletions(-)

commit bea221041eb8886f8d851a76b3d80ac9a6443eee
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 25 13:49:13 2015 -0700

    CDRIVER-721 mongoc_client_destroy crash after connection fails
    
    Undo two bad changes introduced while fixing CDRIVER-695, and add
    another safety check in _mongoc_cluster_node_destroy.

 src/mongoc/mongoc-cluster.c | 17 +++++++++-------
 tests/test-mongoc-client.c  | 49 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 59 insertions(+), 7 deletions(-)

commit 95421cb4650b4a04e0d4a408c0bb471a6d4c173e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 25 13:41:50 2015 -0700

    post-release bump

 CMakeLists.txt              | 6 +++---
 build/autotools/Versions.m4 | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit abd02a0a68cf820ea6bec67f9ef357cb34f57e79
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 22 07:13:41 2015 -0400

    CDRIVER-654 legacy insert continues past oversize doc
    
    Regardless of CONTINUE_ON_ERROR, driver should proceed with legacy
    insert until it reaches an oversized doc, then fail.

 src/mongoc/mongoc-write-command.c |  87 ++++++++--------
 tests/TestSuite.h                 |  11 ++
 tests/mock_server/mock-server.c   |   2 +-
 tests/test-bulk.c                 |  15 ++-
 tests/test-mongoc-collection.c    | 211 ++++++++++++++++++++++++++++++++++----
 5 files changed, 257 insertions(+), 69 deletions(-)

commit 4447ac6115efe094c2a1f0ea771d52df083c0bc9
Author: Yuchen Xie <yuchen.xie@live.com>
Date:   Sun Jun 21 14:58:38 2015 +0800

    mongoc_collection_query -> mongoc_collection_find

 doc/mongoc_collection_find.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 35a8e89ec31fd11ea2d9443ea333850ba50dba6b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 21 01:04:44 2015 -0400

    1.1.8 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 18 ++++++++++++++++++
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 54 insertions(+), 24 deletions(-)

commit 19d2da28257ea3ae24cf3f832d16487b5628314c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 15 17:32:48 2015 -0400

    CDRIVER-695 crash destroying node after auth err
    
    Avoid scenarios like:
    
    1. Connect to 2-node replica set.
    
    2. _cluster_reconnect_replica_set enters first loop, calls ismaster on primary
       and finds two peers.
    
    3. nodes_len is set to 2 and the nodes list is realloc'ed, but the second node
       is uninitialized.
    
    4. _mongoc_cluster_reconnect_replica_set enters second loop.
    
    5. Auth fails, "goto CLEANUP".
    
    6. Now nodes_len is 2 but the second node is still uninitialized.
    
    7. Later, _mongoc_cluster_node_destroy iterates over both nodes.
    
    8. Destroying second, uninitialized node calls stream->close, which is a random
       location, segfaults.

 CMakeLists.txt              |   1 +
 src/mongoc/mongoc-cluster.c |  14 ++-
 tests/Makefile.am           |   1 +
 tests/test-libmongoc.c      |   2 +
 tests/test-mongoc-cluster.c | 239 ++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 249 insertions(+), 8 deletions(-)

commit 0605c264c5dccf759dc34318ee59f64a2ec23657
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 20 22:35:57 2015 -0400

    windows evergreen fixes

 .mci.yml                    | 4 ++--
 build/cmake/FindSASL2.cmake | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 4209a03cc674136de71ab6f112690576448d6863
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 20 13:16:04 2015 -0400

    use bson_ptr_free () in collection test

 tests/test-mongoc-collection.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit d490adf33a967552813d64faa4ef89c18cf0c281
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 20 11:48:53 2015 -0400

    CDRIVER-714 batch legacy insert when appropriate
    
    Converse of CDRIVER-713, bulk_operation_insert batched legacy inserts when they
    shouldn't be.

 src/mongoc/mongoc-write-command.c |  12 ++--
 tests/test-mongoc-collection.c    | 143 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 147 insertions(+), 8 deletions(-)

commit 6614cb7a2d4d0165897f679132e3a4932e870431
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 20 11:44:40 2015 -0400

    CDRIVER-717 continueOnError always set for bulk inserts
    
    Whether called with flags MONGOC_INSERT_CONTINUE_ON_ERROR or with
    MONGOC_INSERT_NONE, the deprecated legacy insert API always sets the
    continueOnError wire protocol flag with legacy OP_INSERTs.
    
    test_insert_bulk meticulously ensured this bug was preserved, instead of
    marking it as a bug and failing?

 src/mongoc/mongoc-collection.c |  2 --
 tests/test-mongoc-collection.c | 24 +-----------------------
 2 files changed, 1 insertion(+), 25 deletions(-)

commit d22f465a9098270ebcfb41a0830c320c6b240271
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 19 16:09:58 2015 -0400

    support for testing inserts with mock server

 build/generate-future-functions.py   |  12 ++++
 tests/mock_server/future-functions.c |  64 +++++++++++++++++++
 tests/mock_server/future-functions.h |  12 ++++
 tests/mock_server/future-value.c     |  42 +++++++++++++
 tests/mock_server/future-value.h     |  35 +++++++++++
 tests/mock_server/future.c           |  33 ++++++++++
 tests/mock_server/future.h           |   9 +++
 tests/mock_server/mock-server.c      |  98 +++++++++++++++++++++++++++--
 tests/mock_server/mock-server.h      |  11 ++++
 tests/mock_server/request.c          | 119 ++++++++++++++++++++++++++++++-----
 tests/mock_server/request.h          |  13 +++-
 11 files changed, 426 insertions(+), 22 deletions(-)

commit e9652cec4d8783882fc86f97f9828b3b8f45ad61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 19 16:08:57 2015 -0400

    fix mock server's insert flag parsing

 tests/mock_server/request.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 41838cd954101792ae5cfa39e1029ef778818d0f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 19 16:08:09 2015 -0400

    mock server must copy buffer into request
    
    Aliasing bug when multiple requests are enqueued.

 tests/mock_server/mock-server.c | 19 ++++---------------
 tests/mock_server/request.c     | 32 +++++++++++++++++++++++---------
 tests/mock_server/request.h     |  5 ++++-
 3 files changed, 31 insertions(+), 25 deletions(-)

commit 9d374015938fb5aef30e3f6933e9ed3d31d491df
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 19 04:25:58 2015 -0400

    CDRIVER-713 send bulk OP_INSERTs one at a time
    
    Restores spec'ed behavior of mongoc_bulk_operation_insert that was broken in
    a25ee18a. mongoc_bulk_operation_insert should send OP_INSERT one at a time in
    order to do individual error reporting:
    
    https://github.com/mongodb/specifications/blob/master/source/driver-bulk-update.rst#pre-2-6-support

 src/mongoc/mongoc-write-command.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 5868dc562e7a99c9562342970becc0a33ece759d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 19 17:40:22 2015 -0400

    small .mci.yml fixes

 .mci.yml | 3 ---
 1 file changed, 3 deletions(-)

commit 2b1b62b0c92742abd2713ada1cdfbd1b2c4e4901
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 19 04:20:45 2015 -0400

    use mongo-orchestration on unix
    
    Plus some orchestration fixes for Windows.

 .mci.yml | 63 +++++++++++++++++++++++++++++----------------------------------
 1 file changed, 29 insertions(+), 34 deletions(-)

commit d7a0c4acad215f4c5e5a9b87d87b0840510d0fec
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 18 22:47:14 2015 -0400

    always define MONGOC_HAVE_SASL_CLIENT_DONE in cmake

 build/cmake/FindSASL2.cmake | 1 +
 1 file changed, 1 insertion(+)

commit 952d8031ac05f8019128efb556d5b41e844b9153
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 18 16:22:15 2015 -0400

    CDRIVER-648 nInserted incremented despite error
    
    Starting at commit 48a85995 the nInserted number reported for a batch OP_INSERT
    was incremented, even for documents the server rejects.

 src/mongoc/mongoc-write-command.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit b9089660a39928472d91164341bfae28ff653902
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 18 03:34:42 2015 -0400

    CDRIVER-686 more info on bulk "reply"
    
    The writeConcernErrors shown are not yet implemented, see CDRIVER-710.

 doc/bulk.page                          | 67 ++++++++++++++++++++++++----------
 doc/mongoc_bulk_operation_execute.page |  4 +-
 examples/Makefile.am                   |  5 +++
 examples/bulk/bulk4.c                  | 67 ++++++++++++++++++++++++++++++++++
 4 files changed, 122 insertions(+), 21 deletions(-)

commit 27c941b023dab3987deb6a8c922deac4a7278159
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 18 16:19:28 2015 -0400

    Fix legacy deletes
    
    I broke OP_DELETE when I refactored delete commands
    in ec91136.

 src/mongoc/mongoc-write-command.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 3f43d637e6df2f80b0d0a55d33f59d2d7dbcda61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 17 09:55:45 2015 -0400

    CDRIVER-680 statement followed by declaration

 src/mongoc/mongoc-write-command.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 792136287beb485931b51868a6390ad8599efdb7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 16 18:13:35 2015 -0400

    CDRIVER-660 test write concern
    
    Reveals CDRIVER-707.

 tests/mock_server/mock-server.c |  59 ++++++++++++++++++++--
 tests/mock_server/mock-server.h |   8 ++-
 tests/mock_server/request.c     | 103 ++++++++++++++++++++++++++++++++++-----
 tests/mock_server/request.h     |   5 ++
 tests/test-bulk.c               | 105 +++++++++++++++++++++++++++++-----------
 tests/test-conveniences.c       |  63 +++++++++++++++---------
 tests/test-conveniences.h       |  18 +++----
 7 files changed, 284 insertions(+), 77 deletions(-)

commit 56f1f92ef185811d2fb2887f9254538975a1f8d9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 16 18:12:08 2015 -0400

    CDRIVER-679 disable tests for now

 tests/test-mongoc-cursor.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 45cb98a160e17cbec4bb7a5a31a46722a87641e6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 15 09:00:30 2015 -0400

    refactor write commands
    
    Send insert, update, and delete commands with the same function.
    
    CDRIVER-648, CDRIVER-654, and CDRIVER-656 are resolved in this commit
    or recent commits.

 src/mongoc/mongoc-write-command-private.h |  10 +-
 src/mongoc/mongoc-write-command.c         | 420 +++++-------------------------
 tests/test-bulk.c                         |  93 +++----
 tests/test-conveniences.c                 | 131 +++++++---
 4 files changed, 209 insertions(+), 445 deletions(-)

commit a0237ac041a0e13c66caf3a3f753eefe91e0d194
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 15 17:32:18 2015 -0400

    post-release bump

 CMakeLists.txt              | 6 +++---
 build/autotools/Versions.m4 | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit ec91136c7073a89285bfa984b7d9f669011ea827
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 15 05:22:13 2015 -0400

    format bulk deletes eagerly
    
    Instead of formatting subdocuments like {q: selector, limit: n} when
    sending deletes to the server, format them immediately when the user
    calls mongoc_bulk_operation_remove. Optimizes the common case (all
    deletes fit in one message) and prepares for refactoring all bulk
    write commands into one function.

 src/mongoc/mongoc-write-command.c | 79 +++++++++++++++++++-------------
 tests/test-bulk.c                 | 96 ++++++++++++++++++++++++++++++++-------
 2 files changed, 127 insertions(+), 48 deletions(-)

commit 9eb5d2f1fd09b287cb46215e8451359856fcfadf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 14 18:47:03 2015 -0400

    gcc compile error in mongoc_log

 src/mongoc/mongoc-log.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit cc30dd82136545b509e4d30ca96326407f907e52
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 14 18:40:39 2015 -0400

    1.1.7 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>
    (cherry picked from commit 221708f15c4ab12a881f1a3bd597c8614534f5d5)
    
    Conflicts:
    	src/libbson

 CMakeLists.txt                |  4 ++--
 NEWS                          | 27 +++++++++++++++++++++++++--
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 8 files changed, 60 insertions(+), 25 deletions(-)

commit bed240d162fbaee970814c5e6184ce198b38c2d1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 9 16:14:49 2015 -0400

    CDRIVER-700 final unchecked errs from mongoc_uri_do_unescape
    (cherry picked from commit a4a0b75)

 src/mongoc/mongoc-uri.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 1aa966feb53fc79d0deaa28081a3f2c022646172
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 9 16:09:35 2015 -0400

    CDRIVER-700 unchecked errs from mongoc_uri_do_unescape
    (cherry picked from commit 8ca5db7)

 src/mongoc/mongoc-uri.c | 14 ++++++++++++++
 tests/test-mongoc-uri.c | 24 ++++++++++++++++++++++++
 2 files changed, 38 insertions(+)

commit 7a7aa181a67108a656c478d130fe72eb137e714f
Merge: 093ce34 390e99f
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sun Jun 14 14:41:46 2015 -0400

    Merge pull request #242 from bjori/build-fixes
    
    Fix build on MSVC

commit 093ce3461c6f4e29fdb09e78bc791828cdee8fe7
Merge: dadcb96 43648bb
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sun Jun 14 14:40:09 2015 -0400

    Merge pull request #241 from bjori/fix-cxx-build
    
    Fix c++ build

commit dadcb969f81b7bb6df7307cc6bc46290535c1997
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 14 11:51:48 2015 -0400

    CDRIVER-679 more kill cursors tests
    
    Add (currently failing) test that kill-cursors is sent to
    the right secondary if there's no primary.

 tests/mock_server/mock-rs.c     |  99 +++++++++++++++++++++++++++++----
 tests/mock_server/mock-rs.h     |  18 ++++--
 tests/mock_server/mock-server.c |  10 ++--
 tests/mock_server/request.c     |  69 +++++++++++++++++++++--
 tests/mock_server/request.h     |   5 ++
 tests/test-mongoc-cursor.c      | 118 +++++++++++++++++++++++++++++++++++++++-
 6 files changed, 291 insertions(+), 28 deletions(-)

commit 6b02d4f1b91849644777f0a6ff3f500c47af4bf0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 14 10:42:58 2015 -0400

    set mock server's request timeout to 10 sec
    
    Should eventually be configurable.

 tests/mock_server/mock-rs.c     | 4 ++--
 tests/mock_server/mock-server.c | 6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 6b209af833679917892465b610b5e9010c7877c1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 13 23:43:08 2015 -0400

    CDRIVER-679 killcursors test single and pooled client

 tests/test-mongoc-cursor.c | 37 ++++++++++++++++++++++++++++++++-----
 1 file changed, 32 insertions(+), 5 deletions(-)

commit 84dbacc4fbd254f22af5425b36d75b94b2630a17
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 13 23:42:03 2015 -0400

    turn off mock_rs logging

 tests/test-mongoc-cursor.c | 1 -
 1 file changed, 1 deletion(-)

commit ac2f320738799c38f087f281286a53601462a95f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 13 23:41:47 2015 -0400

    fix switch-enum warnings
    
    Fixes warning: enumeration value 'MONGOC_QUERY_NONE'
    not explicitly handled in switch [-Wswitch-enum]

 tests/mock_server/request.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit a20383033f2803e23f203c6fe7f569bff475dd2f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 13 23:24:50 2015 -0400

    silence openssl deprecations with autotools
    
    Until CDRIVER-520.

 src/Makefile.am   | 1 +
 tests/Makefile.am | 1 +
 2 files changed, 2 insertions(+)

commit 0ef17ad54799bb1d3e9b2e8d3d5a874606952aba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 13 12:39:34 2015 -0400

    style in tests

 tests/test-conveniences.c  |  3 ++-
 tests/test-conveniences.h  |  3 ++-
 tests/test-mongoc-client.c | 10 +++++-----
 3 files changed, 9 insertions(+), 7 deletions(-)

commit 6365954bfc09da522b2a792105d1d16c4d3464e5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 13 12:39:22 2015 -0400

    CDRIVER-679 test killcursors with a mock replica set

 CMakeLists.txt                                     |   2 +
 .../future-functions.c.template                    |  14 +-
 .../future-functions.h.template                    |   2 +-
 .../future-value.c.template                        |  14 +-
 .../future-value.h.template                        |   6 +-
 build/future_function_templates/future.c.template  |   9 +
 build/future_function_templates/future.h.template  |   2 +
 build/generate-future-functions.py                 |  55 ++-
 tests/Makefile.am                                  |   8 +
 tests/mock_server/future-functions.c               |  91 +++--
 tests/mock_server/future-functions.h               |   7 +
 tests/mock_server/future-value.c                   | 144 ++++---
 tests/mock_server/future-value.h                   |  96 +++--
 tests/mock_server/future.c                         |  68 ++--
 tests/mock_server/future.h                         |  27 +-
 tests/mock_server/mock-rs.c                        | 438 +++++++++++++++++++++
 tests/mock_server/mock-rs.h                        |  56 +++
 tests/mock_server/mock-server.c                    | 335 +++++-----------
 tests/mock_server/mock-server.h                    |  22 +-
 tests/mock_server/request.c                        | 365 +++++++++++++++++
 tests/mock_server/request.h                        |  63 +++
 tests/test-mongoc-cursor.c                         |  66 ++++
 22 files changed, 1455 insertions(+), 435 deletions(-)

commit 62549857bf5f9ce5521e59d1309a1c198c232418
Merge: 06a0fab ff0c0a8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 12 10:27:05 2015 -0400

    Merge branch 'pr-240' into 1.2.0-dev
    
    * pr-240:
      CDRIVER-679: Make sure we send the kill cursor to the corresponding server

commit 06a0fab5ae4ecaa5aff6dcab01bdc2beca891818
Merge: 2e0dc96 8055633
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Jun 11 22:34:11 2015 -0400

    Merge pull request #238 from ajdavis/CDRIVER-530-sasl-version-check
    
    C Driver SASL fixes

commit 2e0dc96b05461cf4fc22636bb09d48590fd63f7b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 11 22:29:12 2015 -0400

    more verbose mock server output

 tests/mock_server/mock-server.c | 22 ++++++++++++++++------
 1 file changed, 16 insertions(+), 6 deletions(-)

commit 3a079cfd39be9dbf221afe6ccc1fb19bbc749be1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 11 22:27:49 2015 -0400

    add mock_server_get_host_and_port

 tests/mock_server/mock-server.c | 27 ++++++++++++++++++++++++++-
 tests/mock_server/mock-server.h |  2 ++
 2 files changed, 28 insertions(+), 1 deletion(-)

commit 7a1a130f3c579d160f84cd76ec77f2a90dd11f6d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 11 22:25:36 2015 -0400

    add future_client_command_simple() test func

 build/generate-future-functions.py   | 24 ++++++++-
 tests/mock_server/future-functions.c | 65 +++++++++++++++++++++++++
 tests/mock_server/future-functions.h | 12 +++++
 tests/mock_server/future-value.c     | 94 +++++++++++++++++++++++++++++++++---
 tests/mock_server/future-value.h     | 73 +++++++++++++++++++++++++---
 tests/mock_server/future.c           | 61 +++++++++++++++++++++--
 tests/mock_server/future.h           | 19 +++++++-
 tests/mock_server/mock-server.c      | 12 ++++-
 8 files changed, 339 insertions(+), 21 deletions(-)

commit 4cbe8e373017d4bac43b9dde72b7be5b60a89139
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 11 22:21:24 2015 -0400

    move tmp_bson() to test-conveniences.c

 tests/test-bulk.c         | 40 -------------------------------
 tests/test-conveniences.c | 61 +++++++++++++++++++++++++++++++++++++++++++++++
 tests/test-conveniences.h |  2 ++
 3 files changed, 63 insertions(+), 40 deletions(-)

commit 8657c784287f1ecdd3d76ea9c1f3d4cf59f44cf1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 11 13:03:45 2015 -0400

    remove an rs member that's absent from its own host list
    
    Matches Server Discovery And Monitoring Spec's required behavior, now
    passes hosts_differ_from_seeds.json.

 src/mongoc/mongoc-topology-description.c |  5 ++---
 tests/test-mongoc-sdam.c                 | 13 +++++--------
 2 files changed, 7 insertions(+), 11 deletions(-)

commit 9cf423bbbccfcacd18106a367d98f5a64ce6e698
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 10 23:17:33 2015 -0400

    don't skip direct_connection_slave test
    
    The test is, in fact, correct, and the driver already passes it.

 tests/test-mongoc-sdam.c | 3 ---
 1 file changed, 3 deletions(-)

commit 86faaea33805abc46b0a172ea6a377bb419121ef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 10 23:12:07 2015 -0400

    comply with SDAM spec for "ok: 0" from ismaster

 src/mongoc/mongoc-server-description.c                              | 6 ++++--
 .../server_discovery_and_monitoring/single/not_ok_response.json     | 1 -
 tests/test-mongoc-sdam.c                                            | 3 ---
 3 files changed, 4 insertions(+), 6 deletions(-)

commit b3d799640c3c4c35701cf3deb4f3b7044ac719c9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 10 22:51:57 2015 -0400

    update SDAM json tests from specs repo
    
    Resolve some issues in the formatting of server discovery and monitoring
    spec tests, add mongos_disconnect.json.

 .../rs/discover_passives.json                      | 34 +++++++++
 .../rs/new_primary_wrong_set_name.json             |  6 +-
 .../rs/primary_becomes_standalone.json             |  2 +-
 .../rs/primary_changes_set_name.json               |  4 +-
 .../rs/primary_disconnect.json                     |  2 +-
 .../rs/primary_wrong_set_name.json                 |  2 +-
 .../rs/secondary_wrong_set_name.json               |  2 +-
 .../rs/secondary_wrong_set_name_with_primary.json  |  8 +-
 .../sharded/mongos_disconnect.json                 | 88 ++++++++++++++++++++++
 .../single/direct_connection_external_ip.json      |  2 +-
 .../single/direct_connection_mongos.json           |  2 +-
 .../single/direct_connection_rsarbiter.json        |  4 +-
 .../single/direct_connection_rsprimary.json        |  4 +-
 .../single/direct_connection_rssecondary.json      |  4 +-
 .../single/direct_connection_slave.json            |  2 +-
 .../single/direct_connection_standalone.json       |  2 +-
 .../single/not_ok_response.json                    |  2 +-
 .../single/unavailable_seed.json                   |  2 +-
 tests/test-mongoc-sdam.c                           |  6 --
 19 files changed, 147 insertions(+), 31 deletions(-)

commit 228aa746b6c96d8026ba24a9260aebdfd2c95228
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 10 22:26:28 2015 -0400

    updates for testing on windows

 .mci.yml | 94 +++++++++++++++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 69 insertions(+), 25 deletions(-)

commit e376cf5a81353e3806b1d0b2aa47cf35c8115ad6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 10 22:26:05 2015 -0400

    find binary files when running tests on windows

 tests/TestSuite.h | 5 +++++
 1 file changed, 5 insertions(+)

commit 390e99fddd90aa7383c4b82c31c6fbb8d37bd1dc
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 10 16:35:45 2015 -0700

    Fix build on MSVC
    
    Plus: ISO C90 forbids mixed declarations and code

 src/mongoc/mongoc-client.c | 5 +++--
 src/mongoc/mongoc-log.c    | 3 ++-
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 43648bba73f51ef3ff9e063c981fb616165b2d6b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 10 12:43:15 2015 -0700

    Fix c++ build

 src/mongoc/mongoc-uri-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ff0c0a809fe7979ce65c99f617c259ab98e3c077
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Jun 9 19:56:52 2015 -0700

    CDRIVER-679: Make sure we send the kill cursor to the corresponding server

 src/mongoc/mongoc-client-private.h |  4 ++++
 src/mongoc/mongoc-client.c         | 15 ++++++++++++---
 src/mongoc/mongoc-cursor.c         |  2 +-
 3 files changed, 17 insertions(+), 4 deletions(-)

commit 221708f15c4ab12a881f1a3bd597c8614534f5d5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 9 17:04:04 2015 -0400

    1.1.7 Release
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 27 +++++++++++++++++++++++++--
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 61 insertions(+), 26 deletions(-)

commit a4a0b75f8df7ff14c23e66bf26f11676a221d1b5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 9 16:14:49 2015 -0400

    CDRIVER-700 final unchecked errs from mongoc_uri_do_unescape

 src/mongoc/mongoc-uri.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 8ca5db7aa7fa7d8de40b00fe46e2c5882bd23e1f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 9 16:09:35 2015 -0400

    CDRIVER-700 unchecked errs from mongoc_uri_do_unescape

 src/mongoc/mongoc-uri.c | 14 ++++++++++++++
 tests/test-mongoc-uri.c | 24 ++++++++++++++++++++++++
 2 files changed, 38 insertions(+)

commit c35aea088cfd43b5b62b11dddd8bc050c0ea47d2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 9 15:25:58 2015 -0400

    CDRIVER-695 checked errors in cluster logic
    
    Hope to make a crash in _mongoc_cluster_node_destroy easier to diagnose.

 src/mongoc/mongoc-cluster-private.h |  1 +
 src/mongoc/mongoc-cluster.c         | 18 +++++++++++++-----
 src/mongoc/mongoc-stream.c          |  5 +++++
 src/mongoc/mongoc-util-private.h    |  9 +++++++++
 4 files changed, 28 insertions(+), 5 deletions(-)

commit 75ece7b7f29d986a66ca7f932e744f269bb2807e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 8 18:37:16 2015 -0400

    no strcasecmp in msvc

 tests/test-conveniences.c | 3 +++
 1 file changed, 3 insertions(+)

commit 5492a21a0acf10f4d4548ceb37b9b0c1892543c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 6 10:44:58 2015 -0400

    update evergreen windows msvc build

 .mci.yml | 128 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 127 insertions(+), 1 deletion(-)

commit 7077f1732fe7613ccc5dff9f7f24df9e2f0f6409
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 8 09:42:52 2015 -0400

    turn off verbose mock_server logging

 tests/test-bulk.c | 1 -
 1 file changed, 1 deletion(-)

commit 596231bf35d9161f49a9dbd2172daefc6b43da38
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 8 09:42:35 2015 -0400

    fix warning that bson_ptr is typedefed twice

 tests/test-bulk.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 64f0481ae25f0b4a6e040c544fab1f8aaffd696c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 8 09:39:11 2015 -0400

    fix logging test for gcc
    
    Apparently a vararg's lifetime in GCC is shorter than in Clang.

 tests/test-mongoc-log.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit eaf996145c444fc3ea9e6b8d071e967a376ace82
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 7 18:28:08 2015 -0400

    generate typedefs from python
    
    Put the typedefs close to the list of types, where they belong. Also add
    some more commentary to generate-future-functions.py.

 .../future-value.h.template                        | 10 ++----
 build/generate-future-functions.py                 | 42 ++++++++++++++--------
 tests/mock_server/future-value.h                   | 17 ++++-----
 3 files changed, 39 insertions(+), 30 deletions(-)

commit c45dbd75cca0bc87f847cb592fbdf26b2ef05db1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 7 17:54:00 2015 -0400

    make template files for mock_server2 functions

 .../future-functions.c.template                    |  61 ++++
 .../future-functions.h.template                    |  19 ++
 .../future-value.c.template                        |  27 ++
 .../future-value.h.template                        |  56 ++++
 build/future_function_templates/future.c.template  | 111 +++++++
 build/future_function_templates/future.h.template  |  42 +++
 build/generate-future-functions.py                 | 358 ++-------------------
 tests/mock_server/future-functions.c               |  48 +--
 tests/mock_server/future-functions.h               |   6 +-
 tests/mock_server/future-value.h                   |   2 +-
 tests/mock_server/future.c                         |   1 -
 11 files changed, 369 insertions(+), 362 deletions(-)

commit 1f0eada6071c29fcc31023478ad608b5ab80fe51
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Jun 7 17:38:38 2015 -0400

    generate mock_server2 functions with python, not macros
    
    I'd hacked up macros to generate functions for getting and setting
    values of various types for the future_t implementation, and for
    generating functions like future_cursor_next.
    
    The macro magic / hackery was very hard to understand, but it did (just
    barely) work in GCC and Clang. When it broke in MSVC, however, I saw I
    was in over my head. Generating the functions with Python is clear and
    maintainable.

 CMakeLists.txt                            |   1 +
 build/generate-future-functions.py        | 420 ++++++++++++++++++++++++++++++
 tests/Makefile.am                         |   6 +-
 tests/mock_server/future-functions.c      | 328 +++++++++++++----------
 tests/mock_server/future-functions.def    |  33 ---
 tests/mock_server/future-functions.h      |  79 +++---
 tests/mock_server/future-value.c          | 176 +++++++++++++
 tests/mock_server/future-value.h          | 186 ++++++++-----
 tests/mock_server/future.c                | 152 ++++++++---
 tests/mock_server/future.h                |  64 +++--
 tests/mock_server/macro-vargs-magic.h     | 128 ---------
 tests/mock_server/make-future-getters.def |   7 -
 12 files changed, 1107 insertions(+), 473 deletions(-)

commit efc3496f87b886f481a81c3572dc4f7137fbb3f9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 6 11:56:56 2015 -0400

    use clang pragmas only with clang

 tests/TestSuite.c                      | 4 ++++
 tests/mock_server/future-functions.def | 4 ++++
 tests/mock_server/future-value.h       | 4 ++++
 3 files changed, 12 insertions(+)

commit 8dc4e7d7ba2516566ad3e55bcff37fe490522d56
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Jun 6 11:47:13 2015 -0400

    define MONGOC_HAVE_SASL_CLIENT_DONE in cmake

 CMakeLists.txt | 1 +
 1 file changed, 1 insertion(+)

commit 8055633d19eef92a735dbaf805a440b1f1f7a388
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 5 15:57:40 2015 -0400

    CDRIVER-530 fix check for sasl_client_done
    (cherry picked from commit a7b013e)

 build/autotools/CheckSasl.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a7b013e1bf698f1cea594dc34b8906e1bb4be5fe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 5 15:57:40 2015 -0400

    CDRIVER-530 fix check for sasl_client_done

 build/autotools/CheckSasl.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8762b735ae180d99f9337377259b6f5bc40905a0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 5 15:43:33 2015 -0400

    CDRIVER-530 cleaner check for sasl_client_done

 src/mongoc/mongoc-init.c | 2 ++
 1 file changed, 2 insertions(+)

commit f725505dd38f4ba3660ab3857c2be079fdbea039
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 4 15:20:08 2015 -0400

    CDRIVER-530 check for sasl_client_done
    (cherry picked from commit 672670c)

 build/autotools/CheckSasl.m4  | 20 ++++++++++----------
 src/mongoc/mongoc-config.h.in | 12 ++++++++++++
 src/mongoc/mongoc-init.c      | 10 +++++++---
 3 files changed, 29 insertions(+), 13 deletions(-)

commit c3c14f431864c82f670581c0e380cef9047cfb96
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Jun 5 13:51:50 2015 -0400

    CDRIVER-547 fix sasl concurrency
    
    (cherry picked from commit cd5c234b5b9a53ccef702936c3ba75f662dffab6)
    
    Conflicts:
    	build/cmake/FindSASL2.cmake

 build/autotools/CheckSasl.m4 | 12 ++++++++
 src/mongoc/mongoc-init.c     | 70 ++++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-sasl.c     |  9 ------
 3 files changed, 82 insertions(+), 9 deletions(-)

commit b50a9df7eb49427a903b40a67d7a56c60248384a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 3 23:39:02 2015 -0400

    CDRIVER-547 show that concurrent sasl fails
    (cherry picked from commit 817fe03)

 CMakeLists.txt         |   1 +
 CONTRIBUTING.md        |  10 ++++
 tests/Makefile.am      |   1 +
 tests/test-libmongoc.c |   4 +-
 tests/test-libmongoc.h |   1 +
 tests/test-sasl.c      | 151 +++++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 167 insertions(+), 1 deletion(-)

commit 672670cd4938c346849c29b0c980f084e1f476b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 4 15:20:08 2015 -0400

    CDRIVER-530 check for sasl_client_done

 build/autotools/CheckSasl.m4  | 20 ++++++++++----------
 src/mongoc/mongoc-config.h.in | 12 ++++++++++++
 src/mongoc/mongoc-init.c      |  8 +++++---
 3 files changed, 27 insertions(+), 13 deletions(-)

commit 55a8c3ee85e07b7c5fce31a2f7a4ad6a4a548405
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 22:25:12 2015 -0400

    style

 src/mongoc/mongoc-sasl-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd5c234b5b9a53ccef702936c3ba75f662dffab6
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 4 14:41:57 2015 -0400

    CDRIVER-547 fix sasl concurrency

 build/autotools/CheckSasl.m4 | 12 ++++++++
 build/cmake/FindSASL2.cmake  | 11 +++++++
 src/mongoc/mongoc-init.c     | 70 ++++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-sasl.c     |  9 ------
 4 files changed, 93 insertions(+), 9 deletions(-)

commit 850240d7fb937b99e941f2cf55031a4cb9f3bc49
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 4 08:25:17 2015 -0400

    update contributors' guide

 CONTRIBUTING.md | 53 ++++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 36 insertions(+), 17 deletions(-)

commit 817fe031c2101dcd6e643521ffa01d2a0ebe401e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 3 23:39:02 2015 -0400

    CDRIVER-547 show that concurrent sasl fails

 CMakeLists.txt         |   1 +
 CONTRIBUTING.md        |  10 ++++
 tests/Makefile.am      |   1 +
 tests/test-libmongoc.c |   4 +-
 tests/test-libmongoc.h |   1 +
 tests/test-sasl.c      | 153 +++++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 169 insertions(+), 1 deletion(-)

commit 63e5385b87f39adafcc125b07df2103d4f1c8621
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 21:55:00 2015 -0400

    experimental: find libsasl2 with cmake

 CMakeLists.txt              | 14 +++++++++++++-
 build/cmake/FindSASL2.cmake | 25 +++++++++++++++++++++++++
 2 files changed, 38 insertions(+), 1 deletion(-)

commit 35f9e48e7d53d80fc176a21292cce6fef38301d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jun 4 15:21:47 2015 -0400

    link to mongoc_client_t from mongoc_ssl_opt_t doc

 doc/mongoc_ssl_opt_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b3f7f2cda19488bea77d5d317b2d4069e59fb458
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 3 08:29:03 2015 -0400

    update mongoc_client_get_database doc

 doc/mongoc_client_get_database.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4a230c4a023014a35f5e93461ba36de12ce279cc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Jun 3 08:28:42 2015 -0400

    CDRIVER-632 add mongoc_client_get_default_database

 build/autotools/versions.ldscript           |  1 +
 build/cmake/libmongoc-ssl.def               |  1 +
 build/cmake/libmongoc.def                   |  1 +
 doc/mongoc_client_get_default_database.page | 59 +++++++++++++++++++++++++++++
 src/libmongoc.symbols                       |  1 +
 src/mongoc/mongoc-client.c                  | 35 +++++++++++++++++
 src/mongoc/mongoc-client.h                  |  1 +
 tests/test-mongoc-database.c                | 23 +++++++++++
 8 files changed, 122 insertions(+)

commit 8cee8c39e1cafd9a5c81a2ff4fd0e03707636ed9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 20:54:31 2015 -0400

    CDRIVER-693 references to deprecated delete flags
    
    mongoc_delete_flags_t is deprecated for mongoc_remove_flags_t. Also, make
    references to either enum a hotlink.

 doc/deleting-document.page        | 2 +-
 doc/mongoc_collection_delete.page | 2 +-
 doc/mongoc_collection_remove.page | 4 ++--
 doc/mongoc_delete_flags_t.page    | 8 +-------
 src/mongoc/mongoc-collection.c    | 2 +-
 5 files changed, 6 insertions(+), 12 deletions(-)

commit d9bf2ec977919c91ab44fbce5329a47a02ef6b4f
Author: Yuchen Xie <yuchen.xie@live.com>
Date:   Mon Jun 1 19:42:33 2015 +0800

    Update a deprecated function in the demo
    
    CDRIVER-693
    Replace mongoc_collection_delete() with mongoc_collection_remove() in mongo-c-driver/doc/deleting-document.page
    
    As mongoc_collection_delete() is deprecated and should not be used in new code.
    The document could update as well.

 doc/deleting-document.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9b19d09ed0bbef425a23e5d7d44479b88631385b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 18:36:29 2015 -0400

    rename mock_server2 to mock_server

 CMakeLists.txt                             |    8 +-
 tests/Makefile.am                          |   42 +-
 tests/mock_server/future-functions.c       |  157 ++++
 tests/mock_server/future-functions.def     |   29 +
 tests/mock_server/future-functions.h       |   52 ++
 tests/mock_server/future-value.h           |  100 +++
 tests/mock_server/future.c                 |  124 +++
 tests/mock_server/future.h                 |   57 ++
 tests/mock_server/macro-vargs-magic.h      |  128 +++
 tests/mock_server/make-future-getters.def  |    7 +
 tests/mock_server/mock-server.c            | 1253 ++++++++++++++++++++++++++++
 tests/mock_server/mock-server.h            |  101 +++
 tests/mock_server/sync-queue.c             |   96 +++
 tests/mock_server/sync-queue.h             |   33 +
 tests/mock_server2/future-functions.c      |  157 ----
 tests/mock_server2/future-functions.def    |   29 -
 tests/mock_server2/future-functions.h      |   52 --
 tests/mock_server2/future-value.h          |  100 ---
 tests/mock_server2/future.c                |  124 ---
 tests/mock_server2/future.h                |   57 --
 tests/mock_server2/macro-vargs-magic.h     |  128 ---
 tests/mock_server2/make-future-getters.def |    7 -
 tests/mock_server2/mock-server2.c          | 1252 ---------------------------
 tests/mock_server2/mock-server2.h          |   93 ---
 tests/mock_server2/sync-queue.c            |   96 ---
 tests/mock_server2/sync-queue.h            |   33 -
 tests/test-bulk.c                          |   22 +-
 tests/test-mongoc-async.c                  |   13 +-
 tests/test-mongoc-client.c                 |   50 +-
 tests/test-mongoc-database.c               |   20 +-
 tests/test-mongoc-topology-scanner.c       |   16 +-
 31 files changed, 2222 insertions(+), 2214 deletions(-)

commit ef214674a807f0b0ac0f9e3fb415532d73118471
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 18:25:52 2015 -0400

    delete old mock_server

 CMakeLists.txt      |   1 -
 tests/Makefile.am   |   4 -
 tests/mock-server.c | 538 ----------------------------------------------------
 tests/mock-server.h |  67 -------
 4 files changed, 610 deletions(-)

commit fc45d4ce837838c591f0e7cc63e0d89fb010499d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 18:23:46 2015 -0400

    test topology scanner with mock_server2
    
    And add a test *without* SSL, even when SSL is configured.

 tests/mock_server2/mock-server2.c    |  44 ++++++++++++++
 tests/mock_server2/mock-server2.h    |   4 ++
 tests/test-mongoc-topology-scanner.c | 108 ++++++++++++++++++-----------------
 3 files changed, 104 insertions(+), 52 deletions(-)

commit 9ab31f5ba13d6ae34d4f7b651bb9a015a4769ec4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 10:18:13 2015 -0400

    CDRIVER-689 test wire version range with mock_server2

 tests/test-mongoc-client.c | 34 ++++++++++++----------------------
 1 file changed, 12 insertions(+), 22 deletions(-)

commit 1d8e540c6c15ba755fa88e70745d98ac8e770bf1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 10:00:42 2015 -0400

    use mock_server2 to test mongoc_async

 tests/mock_server2/mock-server2.c | 33 +++++++++++++--
 tests/mock_server2/mock-server2.h |  6 +++
 tests/test-mongoc-async.c         | 89 +++++++++++++++++++--------------------
 3 files changed, 79 insertions(+), 49 deletions(-)

commit 80e208694ba0410b011b9ef8a640757b0cc07b6f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Jun 2 09:59:02 2015 -0400

    mock_server2 logs client port correctly

 src/mongoc/mongoc-socket-private.h | 34 ++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-socket.c         | 38 ++++++++++++++++++++++++++++++++++----
 tests/mock_server2/mock-server2.c  | 12 +++++++++---
 3 files changed, 77 insertions(+), 7 deletions(-)

commit 76f552bbd8fad27200e3e92f61a88d2f62a5cd00
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Jun 1 20:54:31 2015 -0400

    slightly rearrange mock-server2.c

 tests/mock_server2/mock-server2.c | 38 ++++++++++++++++++++------------------
 1 file changed, 20 insertions(+), 18 deletions(-)

commit 6dc6f00928f95493d43a74761f4b1a1ddb535f1b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 21:48:22 2015 -0400

    warning about a comment containing "*"

 tests/TestSuite.c | 3 +++
 1 file changed, 3 insertions(+)

commit ac1bd9bb0d67fcb3412d7f7a3524ec9ed4c74508
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 21:47:58 2015 -0400

    warnings about test cleanup code

 tests/test-libmongoc.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 40b35686460fcc6c51f2044976924c81f524d1ad
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 21:46:38 2015 -0400

    CDRIVER-520 silence openssl deprecations for now
    
    clang on Mac writes distracting warnings

 CMakeLists.txt | 4 ++++
 1 file changed, 4 insertions(+)

commit 6789a7a678046a0e123a09c21151aee12030c508
Merge: 03e37be 21a2b35
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 10:54:26 2015 -0400

    Merge branch 'pr-222' into 1.2.0-dev
    
    * pr-222:
      link mongoc_gridfs_file_get_id to bson_value_t doc
      simpler header file style
      test gridfs file properties
      mongoc_gridfs_file_get_id returns the value instead of copying
      gridfs docs typos
      add helper function to get gridfs files_id from mongoc_gridfs_file_t.

commit 21a2b35c3c6054691901b0b9358f38e0dc272eb4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 10:54:07 2015 -0400

    link mongoc_gridfs_file_get_id to bson_value_t doc

 doc/mongoc_gridfs_file_get_id.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fb3a2e40160f8ad8a8c50d866eddd658fecd1fb5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 31 10:28:08 2015 -0400

    simpler header file style

 src/mongoc/mongoc-gridfs-file.h | 69 ++++++++++++++++++++++++++---------------
 1 file changed, 44 insertions(+), 25 deletions(-)

commit 8352b4698b03c03b42022af1686a73b0cf3be456
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 25 22:54:35 2015 -0400

    test gridfs file properties

 tests/test-mongoc-gridfs.c | 59 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 59 insertions(+)

commit 6228eb19d47c04118c4823775078dec7ea835f73
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 25 22:54:22 2015 -0400

    mongoc_gridfs_file_get_id returns the value instead of copying

 doc/mongoc_gridfs_file_get_id.page | 10 ++++----
 src/mongoc/mongoc-gridfs-file.c    | 10 ++++----
 src/mongoc/mongoc-gridfs-file.h    | 48 +++++++++++++++++++-------------------
 3 files changed, 33 insertions(+), 35 deletions(-)

commit dbb9d936b12ddab2e70e944b7ab0ac4ad069b936
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 25 21:24:10 2015 -0400

    gridfs docs typos

 doc/mongoc_gridfs_file_get_filename.page | 2 +-
 doc/mongoc_gridfs_file_get_id.page       | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0ef347c181b879664003114a503881a5828c0ae6
Author: lloydzhou <lloydzhou@qq.com>
Date:   Fri Apr 17 08:40:55 2015 +0800

    add helper function to get gridfs files_id from mongoc_gridfs_file_t.

 build/autotools/versions.ldscript  |  1 +
 build/cmake/libmongoc-ssl.def      |  1 +
 build/cmake/libmongoc.def          |  1 +
 doc/mongoc_gridfs_file_get_id.page | 37 +++++++++++++++++++++++++++++++++++++
 src/libmongoc.symbols              |  1 +
 src/mongoc/mongoc-gridfs-file.c    | 10 ++++++++++
 src/mongoc/mongoc-gridfs-file.h    |  1 +
 7 files changed, 52 insertions(+)

commit 03e37becca767bee70f6d13ded11d9fe7692db34
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 30 15:33:29 2015 -0400

    semicolon

 src/mongoc/mongoc-log.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6ae03f5d78d99fd174d50faef75cf98510c05af1
Author: Sujan Dutta <sujandutta@gmail.com>
Date:   Tue Apr 28 11:57:50 2015 +0530

    NULL checked log function ptr

 src/mongoc/mongoc-log.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 3f1da6f4cd475127c461b4e57370e4e9b560e3a4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 30 15:13:39 2015 -0400

    test mongoc_log_set_handler

 CMakeLists.txt                  |  1 +
 src/mongoc/mongoc-log-private.h | 28 +++++++++++++
 src/mongoc/mongoc-log.c         | 10 +++++
 tests/Makefile.am               |  1 +
 tests/test-libmongoc.c          |  2 +
 tests/test-mongoc-log.c         | 92 +++++++++++++++++++++++++++++++++++++++++
 6 files changed, 134 insertions(+)

commit f6cb09931ab6f55e1ac17134fe96c0eb2468fdae
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 30 14:26:19 2015 -0400

    sort test declarations

 tests/test-libmongoc.c | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit abc0e38b1c75fe7629d7698fa03ca0bdd3a6ae6b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 30 14:24:11 2015 -0400

    duplicate test declarations

 tests/test-libmongoc.c | 20 --------------------
 1 file changed, 20 deletions(-)

commit 3fc9994b5929704b3c2b5f96ecdb712320dc67d2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 30 14:11:04 2015 -0400

    update logging doc

 doc/logging.page | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 53682560c307a806bb41c37232e8d4ec182df3ba
Merge: ec4ad3d aa607cd
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri May 29 13:00:05 2015 -0400

    Merge pull request #235 from ajdavis/CDRIVER-650-crash-in-check-closed
    
    CDRIVER-650 crash after replset reconnect

commit 8f78efdc834f1b2122a6aaa4d198c95e05a9b6db
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 29 12:55:30 2015 -0400

    CDRIVER-628 remove "w=-1" from URI doc

 doc/mongoc_uri_t.page | 4 ----
 1 file changed, 4 deletions(-)

commit d0acc7cc0972354939fdb2af92c6b3981a69f3ea
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 29 12:54:00 2015 -0400

    fix apostrophes in docs

 doc/deleting-document.page         | 2 +-
 doc/executing-command.page         | 2 +-
 doc/finding-document.page          | 2 +-
 doc/inserting-document.page        | 2 +-
 doc/mongoc_collection_destroy.page | 2 +-
 doc/mongoc_socket_t.page           | 2 +-
 doc/updating-document.page         | 2 +-
 7 files changed, 7 insertions(+), 7 deletions(-)

commit 628d744aac1c5259e7db084521bccae947257e27
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 29 12:53:41 2015 -0400

    CDRIVER-621 fix groff output in man pages

 doc/mallard2man.py                 | 9 ++++++---
 doc/mongoc_collection_destroy.page | 2 +-
 2 files changed, 7 insertions(+), 4 deletions(-)

commit ec4ad3d0e504e279b821356d054726f34cc36285
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 29 12:24:10 2015 -0400

    CDRIVER-640 mongoc_client_get_database_names err handling in 1.1.x

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bc5e70cb7a121a770ea478452ff459ef9d304cce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 15:43:01 2015 -0400

    CDRIVER-640 mongoc_client_get_database_names err handling
    
    Properly sets bson_error_t and returns NULL on error.

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f0bb103d490b8bdabef6fa4cff98ceab0a7f4673
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 15:42:05 2015 -0400

    CDRIVER-640 test mongoc_client_get_database_names

 tests/mock_server2/future-functions.def |  6 ++++
 tests/mock_server2/future-value.h       |  4 +++
 tests/test-mongoc-client.c              | 51 +++++++++++++++++++++++++++++++++
 3 files changed, 61 insertions(+)

commit 6b5e080c7f45c7e4cfbe8cdbf85d53111902dc50
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 15:41:32 2015 -0400

    mock_server2 tests command contents

 tests/mock_server2/mock-server2.c | 40 ++++++++++++++++++++++++++++++---------
 tests/mock_server2/mock-server2.h |  7 ++++---
 tests/test-bulk.c                 |  6 ++++--
 tests/test-mongoc-database.c      |  1 +
 4 files changed, 40 insertions(+), 14 deletions(-)

commit 1e9f0422d537bd7fbf204f9b19b45adc0e3b8a24
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 14:23:21 2015 -0400

    mock_server2_receives_command only needs 2 args

 tests/mock_server2/mock-server2.c | 1 -
 tests/mock_server2/mock-server2.h | 1 -
 tests/test-bulk.c                 | 1 -
 tests/test-mongoc-database.c      | 3 +--
 4 files changed, 1 insertion(+), 5 deletions(-)

commit 9e8fa89d0df8d1c6657dd1cb06f17556e4e7c58b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 10:39:50 2015 -0400

    skip some build variants for now

 .mci.yml | 207 ++++++++++++++++++++++++++++++---------------------------------
 1 file changed, 98 insertions(+), 109 deletions(-)

commit efea01c01060a218e6061c26ad391f0a9fa6efe1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 10:38:55 2015 -0400

    skip TLS hangup test on Solaris

 tests/test-mongoc-stream-tls-error.c | 3 +++
 1 file changed, 3 insertions(+)

commit 22deda87e60e339142cb7fb5b193e804f61cb7d0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 07:17:59 2015 -0400

    don't rely on arg-evaluation order in mock_server2 functions
    
    I made the textbook mistake of assuming that this:
    
    function (array[i++], array[i++])
    
    ...evaluated its arguments in a predictable order.

 tests/mock_server2/future-functions.c  |  81 +++++++++++---------------
 tests/mock_server2/future-functions.h  |   2 +-
 tests/mock_server2/macro-vargs-magic.h | 103 +++++++++++++++++----------------
 3 files changed, 89 insertions(+), 97 deletions(-)

commit 4e0c8be6fcea2b451e7d9603685ed49171e31707
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 04:24:32 2015 -0400

    finish renaming "queue_t" to "sync_queue_t"

 tests/mock_server2/sync-queue.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b51f6aed2397680a50c1a38d7badaaee2b8e07a4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 03:50:31 2015 -0400

    unused variable in mock_server2

 tests/mock_server2/mock-server2.c | 1 -
 1 file changed, 1 deletion(-)

commit 8b13ee239c834d40d43f8c7c50ad7fa412d68658
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 28 03:50:11 2015 -0400

    rename test utility "queue_t" to "sync_queue_t"
    
    The prior name conflicted with a Solaris / System V standard type.

 CMakeLists.txt                    |  2 +-
 tests/Makefile.am                 |  8 ++--
 tests/mock_server2/mock-server2.c | 14 +++---
 tests/mock_server2/queue.c        | 96 ---------------------------------------
 tests/mock_server2/queue.h        | 33 --------------
 tests/mock_server2/sync-queue.c   | 96 +++++++++++++++++++++++++++++++++++++++
 tests/mock_server2/sync-queue.h   | 33 ++++++++++++++
 7 files changed, 141 insertions(+), 141 deletions(-)

commit 4a876677a1dd6501b86d33e09a6940473978a44e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 27 17:21:42 2015 -0400

    fix makefile for mock_server2

 tests/Makefile.am | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 828a9500e9bc4aa21f811c577491a261914cfaa5
Merge: fa75ee0 1fb5cda
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 27 16:28:44 2015 -0400

    Merge branch 'pr-233' into 1.2.0-dev
    
    * pr-233:
      fix build -- mixed declarations and code
      CDRIVER-528: Use maxWriteBatchSize from ismaster for write command batch splitting.
      CDRIVER-528: Add helper to read the maxBatchSize
      CDRIVER-586: Send writes to the requested server

commit aa607cdf4de5052503b867460b40c1aa52756aa2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 27 14:11:17 2015 -0400

    CDRIVER-650 crash after replset reconnect

 src/mongoc/mongoc-cluster.c | 15 ++++++++++++---
 src/mongoc/mongoc-stream.c  |  4 +++-
 2 files changed, 15 insertions(+), 4 deletions(-)

commit 1fb5cdaf5be2b95cd9d16044807b5806cb6edb5e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 27 10:38:00 2015 -0700

    fix build -- mixed declarations and code

 src/mongoc/mongoc-write-command.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit a25ee18a2bb398e56c1cba45f466febf7a9b1ee8
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 27 10:31:02 2015 -0700

    CDRIVER-528: Use maxWriteBatchSize from ismaster for write command batch splitting.

 src/mongoc/mongoc-write-command.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 9af13d9059698ba93394bf5e77c517be358b9b35
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue May 26 16:10:49 2015 -0700

    CDRIVER-528: Add helper to read the maxBatchSize

 src/mongoc/mongoc-cluster-private.h |  4 ++++
 src/mongoc/mongoc-cluster.c         | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 37 insertions(+)

commit 0a314fb388024c8916f8718274aa71e2dabd8b8a
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed May 27 10:21:04 2015 -0700

    CDRIVER-586: Send writes to the requested server
    
    This fixes issues (again) where we preselect a node and do all our checks based
    on that node, then run the SS machinery again and everything has
    changed.
    
    It also fixes intentionaly secondary-writes (e.g. to the local db)
    Where the write was incorrectly rerouted to the primary.

 src/mongoc/mongoc-write-command.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 8ef31e5b0c69d1b8dbde37df06d2b458735f7ddc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 26 23:25:49 2015 -0400

    CDRIVER-531 remove debugging printfs

 src/mongoc/mongoc-cluster.c | 4 ----
 1 file changed, 4 deletions(-)

commit fa75ee0c6051627ebc42be96e5ab3917d8126fc0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 26 22:17:33 2015 -0400

    use mock_server2 to test mongos and $readPreference

 tests/test-mongoc-client.c | 144 +++++++++++++--------------------------------
 1 file changed, 42 insertions(+), 102 deletions(-)

commit d2e2d78b130ff6ac103651242c23a2767f4605bc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 26 22:15:29 2015 -0400

    mock_server2 improvements
    
    Use a simple dedicated pattern-matcher instead of mongoc_matcher_t, make
    autoismaster and autoresponders more convenient, suppress clang's unused
    function warnings, add comment headers.

 CMakeLists.txt                          |   1 +
 tests/Makefile.am                       |   2 +
 tests/mock_server2/future-functions.def |  11 +
 tests/mock_server2/future-value.h       |  12 +
 tests/mock_server2/mock-server2.c       | 592 +++++++++++++++++++++++++++-----
 tests/mock_server2/mock-server2.h       |  38 +-
 tests/test-bulk.c                       | 255 +++++---------
 tests/test-conveniences.c               | 374 ++++++++++++++++++++
 tests/test-conveniences.h               |  44 +++
 9 files changed, 1053 insertions(+), 276 deletions(-)

commit 99f71f9ec66a96e1a634b76ac74b615158d30c75
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 25 05:06:45 2015 -0400

    test mongoc_database_get_collection_names with mock_server2

 src/mongoc/mongoc-array-private.h          |   2 +
 src/mongoc/mongoc-array.c                  |  30 ++++
 tests/mock_server2/future-functions.def    |   6 +
 tests/mock_server2/future-value.h          |  25 ++-
 tests/mock_server2/make-future-getters.def |   6 +-
 tests/mock_server2/mock-server2.c          | 263 ++++++++++++++++++-----------
 tests/mock_server2/mock-server2.h          |  14 ++
 tests/test-mongoc-database.c               |  49 +++---
 8 files changed, 253 insertions(+), 142 deletions(-)

commit cd13f78ffbe173ac04ca4756599743ae3f64ccf2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 25 03:26:26 2015 -0400

    more macros to generate mock_server2 functions

 tests/mock_server2/future-functions.c | 98 +++++++++++++++++++++++++++++------
 tests/mock_server2/future.c           |  9 +++-
 2 files changed, 89 insertions(+), 18 deletions(-)

commit b5c648c4211309d98645687627a1df3ae7563f95
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 25 03:25:52 2015 -0400

    leak in test_framework_client_pool_new

 tests/test-libmongoc.c | 1 +
 1 file changed, 1 insertion(+)

commit 10554820c610c7de88f0e4f5093e80e4d3e852ba
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 25 03:25:32 2015 -0400

    leak in test_get_collection_names_error

 tests/test-mongoc-database.c | 1 +
 1 file changed, 1 insertion(+)

commit 7f3e2b28e0e98210c98386864e1ea32847fb2e41
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 25 03:24:25 2015 -0400

    configurable MONGOC_TEST_PORT

 CONTRIBUTING.md            |  3 ++-
 tests/test-libmongoc.c     | 38 +++++++++++++++++++++++++++++++++++++-
 tests/test-libmongoc.h     |  1 +
 tests/test-mongoc-client.c |  8 ++++++--
 4 files changed, 46 insertions(+), 4 deletions(-)

commit 2c456e03491ee404e109c4aab88aca82a28128ab
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 25 03:22:03 2015 -0400

    CDRIVER-497 invalidate_server test assumed a standalone

 tests/test-mongoc-topology.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit fdfc86214380fccc8e4b594530cfa8330524be92
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 24 15:58:02 2015 -0400

    macros to generate mock_server2 functions

 tests/Makefile.am                       |   1 +
 tests/mock_server2/future-functions.c   |  86 ++++++++++++++++------
 tests/mock_server2/future-functions.def |   6 ++
 tests/mock_server2/future-functions.h   |  31 +++++++-
 tests/mock_server2/future.c             |   6 +-
 tests/mock_server2/future.h             |   2 +-
 tests/mock_server2/macro-vargs-magic.h  | 125 ++++++++++++++++++++++++++++++++
 7 files changed, 226 insertions(+), 31 deletions(-)

commit 2776021b20d0bb1de373952b4a2e207a18bff268
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 24 11:25:34 2015 -0400

    move future_do_something () test helpers to new file

 CMakeLists.txt                        |  1 +
 tests/Makefile.am                     |  2 ++
 tests/mock_server2/future-functions.c | 64 +++++++++++++++++++++++++++++++++++
 tests/mock_server2/future-functions.h | 29 ++++++++++++++++
 tests/mock_server2/mock-server2.c     | 49 ---------------------------
 tests/mock_server2/mock-server2.h     |  9 -----
 tests/test-bulk.c                     |  1 +
 7 files changed, 97 insertions(+), 58 deletions(-)

commit 4b17c4f275630c6f502a6392d0416db82ccf0ae5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 24 11:07:49 2015 -0400

    mock_server2 memory cleanup

 tests/mock_server2/future.c       |  2 +-
 tests/mock_server2/mock-server2.c | 19 ++++++++++++++-----
 tests/test-bulk.c                 |  3 +++
 3 files changed, 18 insertions(+), 6 deletions(-)

commit 03d02ea9b3e5e15be6d7f2babc944d3b87d259b0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 23 07:30:16 2015 -0400

    add mock_server2 files to makefile

 tests/Makefile.am | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit e9137eb487cde0c9403e2e9365ffb552f1cbf9df
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 23 07:20:42 2015 -0400

    rename future_value.h -> future-value.h

 tests/mock_server2/future-value.h | 77 +++++++++++++++++++++++++++++++++++++++
 tests/mock_server2/future.h       |  2 +-
 tests/mock_server2/future_value.h | 77 ---------------------------------------
 3 files changed, 78 insertions(+), 78 deletions(-)

commit 8c628384bb3e558b7292ca97978307f6326b2b19
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 23 07:05:05 2015 -0400

    safer future_value handling in mock_server2

 tests/mock_server2/future.c       | 17 ++++++++++++++++-
 tests/mock_server2/future.h       |  4 +++-
 tests/mock_server2/mock-server2.c | 17 ++++++++---------
 3 files changed, 27 insertions(+), 11 deletions(-)

commit a54fea0f073e04eb7e13740bd944d8980c3f895d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 22 22:24:29 2015 -0400

    test write concern err with mock_server2_t
    
    Starting a new test server analogous to http://mockupdb.readthedocs.org/

 CMakeLists.txt                             |   3 +
 tests/Makefile.am                          |   9 +
 tests/mock_server2/future.c                | 102 ++++
 tests/mock_server2/future.h                |  55 +++
 tests/mock_server2/future_value.h          |  77 +++
 tests/mock_server2/make-future-getters.def |   5 +
 tests/mock_server2/mock-server2.c          | 723 +++++++++++++++++++++++++++++
 tests/mock_server2/mock-server2.h          |  66 +++
 tests/mock_server2/queue.c                 |  96 ++++
 tests/mock_server2/queue.h                 |  33 ++
 tests/test-bulk.c                          |  72 +++
 11 files changed, 1241 insertions(+)

commit d4a56e7e6ee990930bf7054a384fde019d816bd9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 21 14:24:52 2015 -0400

    CDRIVER-531 don't retry a host during one RS reconnect
    
    Fix scenarios like:
    
    * We get disconnected from primary and start reconnecting
    * Check primary, it's down, time out after N seconds
    * Check secondary, it's up and tells us about primary
    * We re-register primary and try it again
    * It's still down, time out after another N seconds
    
    To fix this, remember we've tried host "H" during this reconnect and
    don't retry it, even if another host's peer list tells us to
    re-register "H".

 src/mongoc/mongoc-cluster.c | 56 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)

commit bb730c347d954b7d13ce408161356af2e4f4b5e9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 14:29:14 2015 -0400

    latest .mci.yml

 .mci.yml | 34 ++++++++++++++++++++++++++++++----
 1 file changed, 30 insertions(+), 4 deletions(-)

commit 829e8940a18a1655d0fb14b9ce22e3c66b42b58e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 13:31:45 2015 -0400

    clean up collect_tests_from_dir () loop

 tests/json-test.c | 19 ++++++-------------
 1 file changed, 6 insertions(+), 13 deletions(-)

commit 4357bc048415ad77e69713aa2a2058f89131abef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 13:28:44 2015 -0400

    solaris-compatible test helper

 tests/json-test.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 86d0b8f39551829af708bb0d7c493eb0ae5c7d1a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 12:32:47 2015 -0400

    expect symbol LIBMONGOC_1.2 in abicheck

 src/libmongoc.symbols | 1 +
 1 file changed, 1 insertion(+)

commit ec711825d62affb9a806cd5e1cbf456d0d7be590
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 11:34:49 2015 -0400

    style in TLS test

 tests/test-mongoc-stream-tls-error.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 9f0f88fe3ea9d0337f6fe7e0ccd99ec0d9029405
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 11:34:39 2015 -0400

    style in mongoc-write-command.c

 src/mongoc/mongoc-write-command.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 064ca7230e51dcffdcc5c825b075f9f4cdbe960a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 11:34:27 2015 -0400

    CDRIVER-630 disable TLS timeout test on 1.2.0-dev

 tests/test-mongoc-stream-tls-error.c | 4 ++++
 1 file changed, 4 insertions(+)

commit f62178d7cb4196d69732881af2869c36e15b75bc
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 11:33:58 2015 -0400

    fix tests post-merge

 tests/test-libmongoc.c       | 96 ++++++++++++++++++++++++++++++++++++++++++++
 tests/test-libmongoc.h       |  2 +
 tests/test-mongoc-cluster.c  | 25 ++----------
 tests/test-mongoc-database.c |  4 --
 tests/test-mongoc-topology.c | 38 ++++--------------
 5 files changed, 109 insertions(+), 56 deletions(-)

commit b2f4bcc8f8d26090188b2746d39047efb07671d1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 19 11:33:08 2015 -0400

    CDRIVER-523 post-merge fixups

 src/mongoc/mongoc-write-command.c | 76 ++++++++++++++++++++-------------------
 tests/test-bulk.c                 | 28 ++++++++-------
 2 files changed, 55 insertions(+), 49 deletions(-)

commit b2fa26a6bee959af501c06942e9e7af9c7e353fe
Merge: d9fef44 40853ed
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 18 22:01:15 2015 -0400

    Merge branch 'master' into 1.2.0-dev
    
    # By A. Jesse Jiryu Davis (79) and others
    # Via A. Jesse Jiryu Davis (9) and others
    * master: (92 commits)
      post-release bump
      Release 1.1.6
      CDRIVER-631 reduce max retries from 3 to 1
      CDRIVER-658 fix GSSAPI / Kerberos
      CDRIVER-523 and CDRIVER-657 - update NEWS
      CDRIVER-523 - leaks in tests
      new leak in write commands
      CDRIVER-657 - split large inserts, fix upsert offset
      CDRIVER-523 improve bulk tests
      CDRIVER-523 double-free in bulk test
      CDRIVER-523 thorough bulk "upserted" index testing
      leaks in bulk tests
      use tmp_bson() convenience in bulk tests
      cause failed remove on mongo 2.2
      test that unordered bulk ops continue on error
      complete Bulk API spec's tests
      more bulk API tests
      test bulk inserts and OID generation
      run tests by glob: test-libmongoc -l "/Client/*"
      more convenient bulk reply testing
      ...
    
    Conflicts:
    	src/libbson
    	src/mongoc/mongoc-bulk-operation.c
    	src/mongoc/mongoc-client.c
    	src/mongoc/mongoc-cluster.c
    	src/mongoc/mongoc-write-command.c
    	tests/test-libmongoc.c
    	tests/test-mongoc-client.c

commit 40853edb6729ed69659479be2a07bf103f15f80b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 18 21:34:59 2015 -0400

    post-release bump

 CMakeLists.txt              | 6 +++---
 NEWS                        | 3 +++
 build/autotools/Versions.m4 | 4 ++--
 3 files changed, 8 insertions(+), 5 deletions(-)

commit d9fef44a60802b9f6abccecf57a46b75817d9c50
Merge: 21e121d bb6a1d4
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon May 18 18:28:32 2015 -0400

    Merge pull request #232 from bjori/trace-modifier
    
    Fix typo in modifier - and improve trace message

commit 145886dab8ad0824b4d0e71c56c0dba4fb65790f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 18 17:49:53 2015 -0400

    Release 1.1.6
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          |  6 +++++-
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 41 insertions(+), 25 deletions(-)

commit bb6a1d415e53c4dbdd7e1529ee1fa0a9df26a7fb
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 18 14:29:38 2015 -0700

    Fix typo in modifier - and improve trace message

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0e5a5a6bf315ab2a11a3d3915e4ddf948e91873b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 18 16:56:50 2015 -0400

    CDRIVER-631 reduce max retries from 3 to 1
    
    It can take a surprising amount of time before we report primary not available
    when connecting to a replica set with two downed members. With
    socketTimeoutMS = connectionTimeoutMS = 1 second, it can take up to 16 seconds
    to return an error from an operation.
    
    Reducing retries to 1 speeds this scenario to bail after 8 seconds, not 16.

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 21e121d9a1d681e2e76de09eded3ca8c10751dd0
Merge: 38fc65a f88e1d6
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Mon May 18 15:59:02 2015 -0400

    Merge pull request #231 from bjori/compiler-warning
    
    Fix compiler warnings

commit 5f40338b5d328ee70fa6f0e8e03b387f902d4ffd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 18 14:49:54 2015 -0400

    CDRIVER-658 fix GSSAPI / Kerberos
    
    The helpful error message code was wrong and unconditionally aborted
    GSSAPI conversations before they began. Even with the condition fixed,
    that path isn't hit when trying to connect to a server that doesn't
    support GSSAPI, so I'm just removing the code.

 src/mongoc/mongoc-sasl.c | 9 ---------
 1 file changed, 9 deletions(-)

commit f88e1d63270edc033cf34a06ab8dfbd81d8f3508
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon May 18 11:02:05 2015 -0700

    Fix compiler warnings
    
    src/mongoc/mongoc-async.c:68:26: warning: declaration of 'poll' shadows a global declaration [-Wshadow]
    src/mongoc/mongoc-stream.c:310:27: warning: declaration of 'poll' shadows a global declaration [-Wshadow]
    tests/test-bulk.c:301:34: warning: declaration of index shadows a global declaration [-Wshadow]

 src/mongoc/mongoc-async.c  | 18 +++++++++---------
 src/mongoc/mongoc-stream.c | 20 ++++++++++----------
 tests/test-bulk.c          | 12 ++++++------
 3 files changed, 25 insertions(+), 25 deletions(-)

commit 71e32fef9d415126b950562c09cd5e2864537cc3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 17 23:48:21 2015 -0400

    CDRIVER-523 and CDRIVER-657 - update NEWS

 NEWS | 31 +++++++++++++++++++++++++++++--
 1 file changed, 29 insertions(+), 2 deletions(-)

commit d918125715c0e4e67ccad8d833e2dc05553e0aaa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 17 23:37:49 2015 -0400

    CDRIVER-523 - leaks in tests

 tests/test-bulk.c | 3 +++
 1 file changed, 3 insertions(+)

commit 5401824a9ed60cccb27467c7c3f2efc454d9b0d3
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 17 23:37:35 2015 -0400

    new leak in write commands
    
    From the CDRIVER-523 merge, not a prior bug

 src/mongoc/mongoc-write-command.c | 2 ++
 1 file changed, 2 insertions(+)

commit 11a63f9a85c2ab632db32a4354f73c29b99da1cf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 17 22:08:05 2015 -0400

    CDRIVER-657 - split large inserts, fix upsert offset
    
    Simplify and correct how bulk operations are split into batches. Fix "offset"
    calculations for merged "upserts" array in bulk operation result.

 src/mongoc/mongoc-bulk-operation.c        |   6 +-
 src/mongoc/mongoc-collection.c            |   8 +-
 src/mongoc/mongoc-write-command-private.h |  30 +-
 src/mongoc/mongoc-write-command.c         | 489 ++++++++++++++++--------------
 tests/test-bulk.c                         | 102 +++----
 tests/test-write-commands.c               |   5 +-
 6 files changed, 322 insertions(+), 318 deletions(-)

commit 792115ade31aed8bb9c022a428f70632d1faadfe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 16:34:47 2015 -0400

    CDRIVER-523 improve bulk tests

 tests/test-bulk.c | 29 ++++++++++++++++-------------
 1 file changed, 16 insertions(+), 13 deletions(-)

commit 14c31d4bca4639571d7c8167eaf22bac78d74ed9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 16:34:12 2015 -0400

    CDRIVER-523 double-free in bulk test

 tests/test-bulk.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 89ff56eb69463644678fe8f65c265dfca4b9dcfb
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 16:33:31 2015 -0400

    CDRIVER-523 thorough bulk "upserted" index testing

 tests/test-bulk.c | 152 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 152 insertions(+)

commit f507c8b1af78203118816bb9e5a1351827be12fb
Merge: fe8f61d 0cae425
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 09:15:08 2015 -0400

    Merge branch 'pr-227'
    
    * pr-227:
      Fixes for batched update/delete
      Properly respect message size for bulk operations
      Merge bulk delete
      Properly respect bulk size
      n_updates shouldn't be a bitfield
      Some steps into respecting proper bulk size
      Support for proper bulk updates
      bulk: send multiple delete commands at once.

commit fe8f61d26080f53fdd32e87d63b4501934a1807c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 03:26:33 2015 -0400

    leaks in bulk tests

 tests/test-bulk.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 1e18ff1b1ef8033c4a552e4c9d3054b6742a0640
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 03:21:29 2015 -0400

    use tmp_bson() convenience in bulk tests

 tests/test-bulk.c | 96 ++++++++++++++++---------------------------------------
 1 file changed, 28 insertions(+), 68 deletions(-)

commit 33b2e19026d2873dd7fd1553fdcffc6bfea47593
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 03:20:59 2015 -0400

    cause failed remove on mongo 2.2

 tests/test-bulk.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 93b20901cedbf59ecec84502269a87d053b847fd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 03:00:11 2015 -0400

    test that unordered bulk ops continue on error

 tests/test-bulk.c | 232 ++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 207 insertions(+), 25 deletions(-)

commit 2c94d09a16314cbb5738624e4795f74a5b37aef4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 15 02:04:29 2015 -0400

    complete Bulk API spec's tests

 tests/test-bulk.c | 863 +++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 828 insertions(+), 35 deletions(-)

commit c11cb2a60dec1fbb113156277577f19c784b7b13
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 14 13:40:11 2015 -0400

    more bulk API tests

 tests/test-bulk.c | 655 +++++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 575 insertions(+), 80 deletions(-)

commit 07b6903bd5285b7c1923f5c993e1158fff533753
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 13 14:18:16 2015 -0400

    test bulk inserts and OID generation

 tests/test-bulk.c | 102 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 102 insertions(+)

commit 7389414109b5ed698ca04e500bed9a68cc9c2f59
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 13 14:16:02 2015 -0400

    run tests by glob: test-libmongoc -l "/Client/*"

 tests/TestSuite.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 37d921d847beddbe3d4097b3f4a6805b837d1226
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 10:27:32 2015 -0400

    more convenient bulk reply testing

 tests/test-bulk.c | 295 +++++++++++++++++++++++++-----------------------------
 1 file changed, 137 insertions(+), 158 deletions(-)

commit 4491282acfae992c14a2153383738dadabbf9743
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 04:21:11 2015 -0400

    enhanced matcher example

 examples/example-matcher.c | 52 +++++++++++++++++++++++++++++++++-------------
 1 file changed, 38 insertions(+), 14 deletions(-)

commit 6fa1c591d65afc4d9411d6b9138de421b1beda75
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 04:08:06 2015 -0400

    test mongoc_matcher_t's $and and $or

 tests/test-mongoc-matcher.c | 97 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 97 insertions(+)

commit 480de4b10511c9ad7b406a02979285b9e8cc8be7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 03:41:12 2015 -0400

    CDRIVER-641 client-side subdocument matching

 doc/matcher.page               |  2 +-
 src/mongoc/mongoc-matcher-op.c | 14 +++++++++-
 tests/test-mongoc-matcher.c    | 63 ++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 77 insertions(+), 2 deletions(-)

commit 58f9962777150d013101581a1e974620acf57696
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 7 23:06:43 2015 -0400

    CDRIVER-641 client-side array matching

 doc/matcher.page               |  2 +-
 src/mongoc/mongoc-matcher-op.c | 92 +++++++++++++++++++++++++++++++++++-------
 tests/test-mongoc-matcher.c    | 78 +++++++++++++++++++++++++++++++++++
 3 files changed, 156 insertions(+), 16 deletions(-)

commit 8974b17ba0777c5944dc92c3f46e698ff2b1e0d8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 7 22:57:26 2015 -0400

    note the matcher implements $or and $and

 doc/matcher.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ed0edb88f1d5f36444639107bf8a02f7dd1ca646
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu May 7 21:02:24 2015 -0400

    spelling

 doc/matcher.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5c399214591be6a97f73905f8675540f1ba8d56c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed May 13 10:52:42 2015 -0400

    Post release bump

 CMakeLists.txt              | 6 +++---
 NEWS                        | 3 +++
 build/autotools/Versions.m4 | 4 ++--
 3 files changed, 8 insertions(+), 5 deletions(-)

commit a13cd5fe48b6f416d9d0de4729d71ee7fb862f34
Merge: eee9882 295f621
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 12 17:02:41 2015 -0400

    Release 1.1.5
    
    Signed-off-by: A. Jesse Jiryu Davis <jesse@mongodb.com>

commit eee98823ded9e8786bfc01a4445a9032cdd07040
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 12 17:01:23 2015 -0400

    update libbson to 1.1.5 release

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 295f621030745f9ce2bbf7535f613eabdc150b32
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 11 15:34:57 2015 -0400

    Release 1.1.5

 CMakeLists.txt                |  4 ++--
 NEWS                          |  4 +++-
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  4 ++--
 build/rpm/mongo-c-driver.spec |  8 ++++----
 debian/changelog              |  4 ++--
 6 files changed, 19 insertions(+), 17 deletions(-)

commit c5294e8e7b7b1771c574221a75f9f3c3f13934ef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 12 16:02:37 2015 -0400

    configurable username and password for tests
    
    Auth tests now work despite SERVER 18415.

 CONTRIBUTING.md            |  4 +++
 tests/test-libmongoc.c     | 72 ++++++++++++++++++++++++++++++++++++++++++++--
 tests/test-mongoc-client.c | 35 +---------------------
 3 files changed, 75 insertions(+), 36 deletions(-)

commit bd80bc811198dd9e6c3293e75c3406c6fa72009e
Author: Jason Carey <jcarey@argv.me>
Date:   Tue May 12 15:58:28 2015 -0400

    test_framework_getenv fixes for win32

 tests/test-libmongoc.c | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

commit 7aaed8350613d6d24468075fb4f8feb700601371
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 12 15:06:31 2015 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5b3b3807c2bda16075b6bcab2631bed424ce8884
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue May 12 13:26:55 2015 -0400

    update libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9c450c34dbb8746bf9d321eefc7c4993c935c52d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 11 14:18:45 2015 -0400

    CDRIVER-642 detect auth error from usersInfo
    
    Starting with MongoDB 2.7.1 the scope of the localhost exception for
    authentication was dramatically narrowed. It is no longer possible to call the
    userInfo command unauthenticated, even when the localhost exception is in
    effect. A workaround for this issue is to catch the exception and call
    createUser if the error code is 13 (Unauthorized). Any exception from the
    createUser call should propagate to the user application.

 src/mongoc/mongoc-database.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 2aeecdd3bea0c4bd59753d7ed5bd4aea229ea8da
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 11 14:27:33 2015 -0400

    add admin user in test_mongoc_client_authenticate
    
    Required for MongoDB >= 2.7.1, see SERVER 12621. Won't work with MongoDB
    3.0.2+ because removing the "admin" user will no longer restore the
    localhost exception, see SERVER 18415

 tests/test-mongoc-client.c | 82 +++++++++++++++++++++++++++++++++++-----------
 1 file changed, 63 insertions(+), 19 deletions(-)

commit d298a8149f926af0a2c73f942de21d5443d7ace0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon May 11 09:47:57 2015 -0400

    windows build err in test-libmongoc

 tests/test-libmongoc.c | 2 ++
 1 file changed, 2 insertions(+)

commit 58a6bbfcee4bd80f7362c13b943231a90fef7b61
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 23:00:54 2015 -0400

    some test script fixes for starting mongod

 .mci.yml | 25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)

commit bc78d301cf14db50aad4bf99e1fc7ec16edbd75e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 22:49:02 2015 -0400

    update libbson submodule

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f3e5e03ca3d38f37438ca8c56b9f347c8fb57f5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 18:52:04 2015 -0400

    pass mongod args

 .mci.yml | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 0c8d8d746eafd9cd17d8ea57fe2a1ffc62d7afc0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 17:24:17 2015 -0400

    update NEWS for 1.1.5 release

 NEWS | 37 +++++++++++++++++++++++++++++++++----
 1 file changed, 33 insertions(+), 4 deletions(-)

commit 6e2aa980d4f30a1b7627a9f8a04260cefe65e88c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 17:15:42 2015 -0400

    download url for windows i386 mongod

 .mci.yml | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit a7975c1b14c16ae7b26d3707b2466335fbe0b00e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 17:07:02 2015 -0400

    start multi-platform .mci.yml

 .mci.yml | 356 +++++++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 276 insertions(+), 80 deletions(-)

commit e63a531f8c947c79e242695b43fca833d7cc8685
Merge: 6515183 2d739fe
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri May 8 14:08:50 2015 -0400

    Merge pull request #228 from hanumantmk/fips
    
    Avoid use of SHA1 for scram for FIPS

commit 651518303d1b7c2611c229f086e034784069ddd4
Merge: 22eaf49 30162bb
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri May 8 14:07:49 2015 -0400

    Merge pull request #229 from ajdavis/CDRIVER-630-block-in-tls-handshake
    
    fix hang in TLS handshake

commit 30162bb1a0d70a3ed4f9885e47b206d3ec1aa962
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 8 14:06:57 2015 -0400

    CDRIVER-630 "0" value means "default" for TLS handshake timeout

 src/mongoc/mongoc-client.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 2d739fed8e1153445c963305935a3f2cc1d289b2
Author: Jason Carey <jcarey@argv.me>
Date:   Tue May 5 14:18:18 2015 -0400

    Avoid use of SHA1 for scram for FIPS
    
    instead use EVP_sha1 so our scram auth is compatible with openssl in FIPS
    mode.

 src/mongoc/mongoc-scram.c | 29 ++++++++++++++++++++++++++++-
 1 file changed, 28 insertions(+), 1 deletion(-)

commit 0cae425f64255be589476a575e692f923b5cc70d
Author: Jason Carey <jcarey@argv.me>
Date:   Mon May 4 16:57:13 2015 -0400

    Fixes for batched update/delete
    
    o Expands scope to all bulk write methods
    o Fixes for 2.4
    o Fixes for upserts

 src/mongoc/mongoc-bulk-operation.c        |  33 +++-
 src/mongoc/mongoc-collection.c            |   2 +-
 src/mongoc/mongoc-error.h                 |   3 +-
 src/mongoc/mongoc-write-command-private.h |  16 +-
 src/mongoc/mongoc-write-command.c         | 315 +++++++++++++++++-------------
 5 files changed, 211 insertions(+), 158 deletions(-)

commit dcc90531b8b8c9c12da1d297f863eef1693019d8
Merge: a23b884 39dd640
Author: Jason Carey <jcarey@argv.me>
Date:   Mon May 4 11:52:54 2015 -0400

    Merge remote-tracking branch 'origin/master' into pr-167

commit 1db52dbebf528f08d95563b1d1e381f5707649f8
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 3 15:25:47 2015 -0400

    dead code in mongoc_client_default_stream_initiator

 src/mongoc/mongoc-client.c | 1 -
 1 file changed, 1 deletion(-)

commit a1a677e47be859e5b1da12dac3423fbaa01fe1ef
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 3 15:22:46 2015 -0400

    CDRIVER-630 apply connecttimeout to TLS handshake

 src/mongoc/mongoc-client.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 7c3e455297b2a0420dc13a495e13c54a3e88e42c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 3 15:22:12 2015 -0400

    CDRIVER-630 test connect timeout and TLS handshake

 tests/ssl-test.h                     |   1 +
 tests/test-libmongoc.c               |  17 +++++
 tests/test-libmongoc.h               |   6 ++
 tests/test-mongoc-client.c           |  18 -----
 tests/test-mongoc-stream-tls-error.c | 134 ++++++++++++++++++++++++++++++++---
 5 files changed, 148 insertions(+), 28 deletions(-)

commit ad701c2a7e8d8fa73e06c36e630fca186a8bc041
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 3 14:22:14 2015 -0400

    prepare to test more kinds of TLS errors

 CMakeLists.txt                        |   2 +-
 tests/Makefile.am                     |   2 +-
 tests/ssl-test.h                      |  23 ++--
 tests/test-libmongoc.c                |   4 +-
 tests/test-mongoc-stream-tls-error.c  | 213 ++++++++++++++++++++++++++++++++++
 tests/test-mongoc-stream-tls-hangup.c | 205 --------------------------------
 6 files changed, 232 insertions(+), 217 deletions(-)

commit 22eaf49fbed0725e33920f8892d46ecb3e2dd577
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun May 3 14:26:36 2015 -0400

    fix comment in TLS test

 tests/test-mongoc-stream-tls-hangup.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a75796f253956589fca71f8842b1d7666bc33ffe
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 2 10:42:37 2015 -0400

    format "NULL" in monospace in docs

 doc/mongoc_client_get_gridfs.page                | 2 +-
 doc/mongoc_collection_aggregate.page             | 6 +++---
 doc/mongoc_collection_command.page               | 4 ++--
 doc/mongoc_collection_command_simple.page        | 2 +-
 doc/mongoc_collection_count.page                 | 2 +-
 doc/mongoc_collection_count_with_opts.page       | 4 ++--
 doc/mongoc_collection_create_bulk_operation.page | 4 ++--
 doc/mongoc_collection_delete.page                | 2 +-
 doc/mongoc_collection_find.page                  | 6 +++---
 doc/mongoc_collection_find_and_modify.page       | 4 ++--
 doc/mongoc_collection_get_last_error.page        | 2 +-
 doc/mongoc_collection_insert_bulk.page           | 2 +-
 doc/mongoc_collection_remove.page                | 2 +-
 doc/mongoc_collection_save.page                  | 2 +-
 doc/mongoc_cursor_current.page                   | 4 ++--
 doc/mongoc_gridfs_find_one.page                  | 2 +-
 doc/mongoc_gridfs_find_one_by_filename.page      | 4 ++--
 doc/mongoc_socket_new.page                       | 2 +-
 doc/mongoc_uri_new.page                          | 2 +-
 doc/mongoc_write_concern_get_wtag.page           | 4 ++--
 20 files changed, 31 insertions(+), 31 deletions(-)

commit fce1ba020e9f026551936194499395bfef59dfa5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 2 10:32:56 2015 -0400

    format symbols in monospace throughout docs

 doc/bulk.page                                    | 10 +++++-----
 doc/cursors.page                                 |  4 ++--
 doc/deleting-document.page                       |  2 +-
 doc/executing-command.page                       |  2 +-
 doc/finding-document.page                        |  2 +-
 doc/inserting-document.page                      |  2 +-
 doc/mongoc_bulk_operation_delete.page            |  8 ++++----
 doc/mongoc_bulk_operation_delete_one.page        |  8 ++++----
 doc/mongoc_bulk_operation_destroy.page           |  4 ++--
 doc/mongoc_bulk_operation_execute.page           |  6 +++---
 doc/mongoc_bulk_operation_insert.page            |  6 +++---
 doc/mongoc_bulk_operation_remove.page            |  6 +++---
 doc/mongoc_bulk_operation_remove_one.page        |  6 +++---
 doc/mongoc_bulk_operation_replace_one.page       |  6 +++---
 doc/mongoc_bulk_operation_t.page                 |  4 ++--
 doc/mongoc_bulk_operation_update.page            |  8 ++++----
 doc/mongoc_bulk_operation_update_one.page        |  6 +++---
 doc/mongoc_client_command.page                   | 10 +++++-----
 doc/mongoc_client_command_simple.page            |  6 +++---
 doc/mongoc_client_destroy.page                   |  2 +-
 doc/mongoc_client_get_collection.page            |  6 +++---
 doc/mongoc_client_get_database.page              |  6 +++---
 doc/mongoc_client_get_database_names.page        |  2 +-
 doc/mongoc_client_get_gridfs.page                |  6 +++---
 doc/mongoc_client_get_max_bson_size.page         |  4 ++--
 doc/mongoc_client_get_max_message_size.page      |  4 ++--
 doc/mongoc_client_get_read_prefs.page            |  4 ++--
 doc/mongoc_client_get_server_status.page         |  4 ++--
 doc/mongoc_client_get_uri.page                   |  6 +++---
 doc/mongoc_client_get_write_concern.page         |  4 ++--
 doc/mongoc_client_new.page                       |  6 +++---
 doc/mongoc_client_new_from_uri.page              |  6 +++---
 doc/mongoc_client_pool_destroy.page              |  2 +-
 doc/mongoc_client_pool_new.page                  |  6 +++---
 doc/mongoc_client_pool_pop.page                  |  6 +++---
 doc/mongoc_client_pool_push.page                 |  6 +++---
 doc/mongoc_client_pool_set_ssl_opts.page         |  6 +++---
 doc/mongoc_client_pool_t.page                    |  2 +-
 doc/mongoc_client_pool_try_pop.page              |  6 +++---
 doc/mongoc_client_set_read_prefs.page            |  4 ++--
 doc/mongoc_client_set_ssl_opts.page              |  4 ++--
 doc/mongoc_client_set_stream_initiator.page      | 10 +++++-----
 doc/mongoc_client_set_write_concern.page         |  4 ++--
 doc/mongoc_client_t.page                         | 10 +++++-----
 doc/mongoc_collection_aggregate.page             |  8 ++++----
 doc/mongoc_collection_command.page               | 10 +++++-----
 doc/mongoc_collection_command_simple.page        |  6 +++---
 doc/mongoc_collection_count.page                 |  6 +++---
 doc/mongoc_collection_count_with_opts.page       |  6 +++---
 doc/mongoc_collection_create_bulk_operation.page | 10 +++++-----
 doc/mongoc_collection_create_index.page          |  4 ++--
 doc/mongoc_collection_delete.page                |  6 +++---
 doc/mongoc_collection_destroy.page               |  6 +++---
 doc/mongoc_collection_drop.page                  |  2 +-
 doc/mongoc_collection_drop_index.page            |  2 +-
 doc/mongoc_collection_ensure_index.page          |  4 ++--
 doc/mongoc_collection_find.page                  |  8 ++++----
 doc/mongoc_collection_find_and_modify.page       |  2 +-
 doc/mongoc_collection_find_indexes.page          |  2 +-
 doc/mongoc_collection_get_last_error.page        |  2 +-
 doc/mongoc_collection_get_name.page              |  2 +-
 doc/mongoc_collection_get_read_prefs.page        |  4 ++--
 doc/mongoc_collection_get_write_concern.page     |  4 ++--
 doc/mongoc_collection_insert.page                |  8 ++++----
 doc/mongoc_collection_insert_bulk.page           |  8 ++++----
 doc/mongoc_collection_keys_to_index_string.page  |  2 +-
 doc/mongoc_collection_remove.page                |  4 ++--
 doc/mongoc_collection_rename.page                |  2 +-
 doc/mongoc_collection_save.page                  |  4 ++--
 doc/mongoc_collection_set_read_prefs.page        |  4 ++--
 doc/mongoc_collection_set_write_concern.page     |  4 ++--
 doc/mongoc_collection_stats.page                 |  2 +-
 doc/mongoc_collection_t.page                     |  2 +-
 doc/mongoc_collection_update.page                |  6 +++---
 doc/mongoc_collection_validate.page              |  2 +-
 doc/mongoc_cursor_clone.page                     |  6 +++---
 doc/mongoc_cursor_current.page                   |  2 +-
 doc/mongoc_cursor_destroy.page                   |  4 ++--
 doc/mongoc_cursor_error.page                     |  2 +-
 doc/mongoc_cursor_get_host.page                  |  2 +-
 doc/mongoc_cursor_is_alive.page                  |  2 +-
 doc/mongoc_cursor_more.page                      |  2 +-
 doc/mongoc_cursor_next.page                      |  6 +++---
 doc/mongoc_cursor_t.page                         | 12 ++++++------
 doc/mongoc_database_add_user.page                |  2 +-
 doc/mongoc_database_command.page                 | 12 ++++++------
 doc/mongoc_database_command_simple.page          |  6 +++---
 doc/mongoc_database_create_collection.page       |  4 ++--
 doc/mongoc_database_destroy.page                 |  2 +-
 doc/mongoc_database_drop.page                    |  2 +-
 doc/mongoc_database_find_collections.page        |  2 +-
 doc/mongoc_database_get_collection.page          |  4 ++--
 doc/mongoc_database_get_collection_names.page    |  2 +-
 doc/mongoc_database_get_name.page                |  2 +-
 doc/mongoc_database_get_read_prefs.page          |  4 ++--
 doc/mongoc_database_get_write_concern.page       |  6 +++---
 doc/mongoc_database_has_collection.page          |  2 +-
 doc/mongoc_database_remove_all_users.page        |  2 +-
 doc/mongoc_database_remove_user.page             |  2 +-
 doc/mongoc_database_set_read_prefs.page          |  6 +++---
 doc/mongoc_database_set_write_concern.page       |  6 +++---
 doc/mongoc_database_t.page                       | 14 +++++++-------
 doc/mongoc_delete_flags_t.page                   |  4 ++--
 doc/mongoc_gridfs_create_file.page               | 10 +++++-----
 doc/mongoc_gridfs_create_file_from_stream.page   | 10 +++++-----
 doc/mongoc_gridfs_destroy.page                   |  2 +-
 doc/mongoc_gridfs_drop.page                      |  2 +-
 doc/mongoc_gridfs_file_destroy.page              |  4 ++--
 doc/mongoc_gridfs_file_error.page                |  2 +-
 doc/mongoc_gridfs_file_get_aliases.page          |  2 +-
 doc/mongoc_gridfs_file_get_chunk_size.page       |  2 +-
 doc/mongoc_gridfs_file_get_content_type.page     |  2 +-
 doc/mongoc_gridfs_file_get_filename.page         |  2 +-
 doc/mongoc_gridfs_file_get_length.page           |  2 +-
 doc/mongoc_gridfs_file_get_md5.page              |  2 +-
 doc/mongoc_gridfs_file_get_metadata.page         |  2 +-
 doc/mongoc_gridfs_file_get_upload_date.page      |  2 +-
 doc/mongoc_gridfs_file_list_destroy.page         |  2 +-
 doc/mongoc_gridfs_file_list_error.page           |  2 +-
 doc/mongoc_gridfs_file_list_next.page            |  4 ++--
 doc/mongoc_gridfs_file_list_t.page               |  2 +-
 doc/mongoc_gridfs_file_opt_t.page                |  2 +-
 doc/mongoc_gridfs_file_readv.page                |  4 ++--
 doc/mongoc_gridfs_file_remove.page               |  2 +-
 doc/mongoc_gridfs_file_save.page                 |  4 ++--
 doc/mongoc_gridfs_file_seek.page                 |  2 +-
 doc/mongoc_gridfs_file_set_aliases.page          |  4 ++--
 doc/mongoc_gridfs_file_set_content_type.page     |  4 ++--
 doc/mongoc_gridfs_file_set_filename.page         |  4 ++--
 doc/mongoc_gridfs_file_set_md5.page              |  4 ++--
 doc/mongoc_gridfs_file_set_metadata.page         |  4 ++--
 doc/mongoc_gridfs_file_t.page                    |  8 ++++----
 doc/mongoc_gridfs_file_tell.page                 |  2 +-
 doc/mongoc_gridfs_file_writev.page               |  4 ++--
 doc/mongoc_gridfs_find.page                      |  4 ++--
 doc/mongoc_gridfs_find_one.page                  |  4 ++--
 doc/mongoc_gridfs_find_one_by_filename.page      |  4 ++--
 doc/mongoc_gridfs_get_chunks.page                |  6 +++---
 doc/mongoc_gridfs_get_files.page                 |  6 +++---
 doc/mongoc_gridfs_remove_by_filename.page        |  2 +-
 doc/mongoc_gridfs_t.page                         |  6 +++---
 doc/mongoc_init.page                             |  2 +-
 doc/mongoc_iovec_t.page                          |  2 +-
 doc/mongoc_matcher_destroy.page                  |  2 +-
 doc/mongoc_matcher_match.page                    |  4 ++--
 doc/mongoc_matcher_new.page                      |  4 ++--
 doc/mongoc_read_prefs_add_tag.page               |  2 +-
 doc/mongoc_read_prefs_copy.page                  |  4 ++--
 doc/mongoc_read_prefs_destroy.page               |  2 +-
 doc/mongoc_read_prefs_get_mode.page              |  4 ++--
 doc/mongoc_read_prefs_get_tags.page              |  2 +-
 doc/mongoc_read_prefs_is_valid.page              |  2 +-
 doc/mongoc_read_prefs_new.page                   |  6 +++---
 doc/mongoc_read_prefs_set_mode.page              |  4 ++--
 doc/mongoc_read_prefs_set_tags.page              |  2 +-
 doc/mongoc_read_prefs_t.page                     |  2 +-
 doc/mongoc_socket_accept.page                    |  4 ++--
 doc/mongoc_socket_bind.page                      |  2 +-
 doc/mongoc_socket_close.page                     |  2 +-
 doc/mongoc_socket_connect.page                   |  2 +-
 doc/mongoc_socket_destroy.page                   |  4 ++--
 doc/mongoc_socket_errno.page                     |  2 +-
 doc/mongoc_socket_getnameinfo.page               |  2 +-
 doc/mongoc_socket_getsockname.page               |  2 +-
 doc/mongoc_socket_listen.page                    |  2 +-
 doc/mongoc_socket_new.page                       |  2 +-
 doc/mongoc_socket_recv.page                      |  2 +-
 doc/mongoc_socket_send.page                      |  2 +-
 doc/mongoc_socket_sendv.page                     |  2 +-
 doc/mongoc_socket_setsockopt.page                |  2 +-
 doc/mongoc_stream_buffered_new.page              |  6 +++---
 doc/mongoc_stream_buffered_t.page                |  2 +-
 doc/mongoc_stream_close.page                     |  2 +-
 doc/mongoc_stream_cork.page                      |  2 +-
 doc/mongoc_stream_destroy.page                   |  4 ++--
 doc/mongoc_stream_file_get_fd.page               |  4 ++--
 doc/mongoc_stream_file_new.page                  |  4 ++--
 doc/mongoc_stream_file_new_for_path.page         |  4 ++--
 doc/mongoc_stream_file_t.page                    |  2 +-
 doc/mongoc_stream_flush.page                     |  2 +-
 doc/mongoc_stream_get_base_stream.page           |  6 +++---
 doc/mongoc_stream_gridfs_new.page                |  6 +++---
 doc/mongoc_stream_gridfs_t.page                  |  2 +-
 doc/mongoc_stream_read.page                      | 12 ++++++------
 doc/mongoc_stream_readv.page                     | 12 ++++++------
 doc/mongoc_stream_setsockopt.page                |  2 +-
 doc/mongoc_stream_socket_get_socket.page         |  6 +++---
 doc/mongoc_stream_socket_new.page                |  6 +++---
 doc/mongoc_stream_socket_t.page                  |  2 +-
 doc/mongoc_stream_tls_check_cert.page            |  2 +-
 doc/mongoc_stream_tls_do_handshake.page          |  2 +-
 doc/mongoc_stream_tls_new.page                   |  8 ++++----
 doc/mongoc_stream_tls_t.page                     |  2 +-
 doc/mongoc_stream_uncork.page                    |  2 +-
 doc/mongoc_stream_write.page                     | 12 ++++++------
 doc/mongoc_stream_writev.page                    |  6 +++---
 doc/mongoc_uri_copy.page                         |  4 ++--
 doc/mongoc_uri_destroy.page                      |  2 +-
 doc/mongoc_uri_get_auth_mechanism.page           |  2 +-
 doc/mongoc_uri_get_auth_source.page              |  2 +-
 doc/mongoc_uri_get_database.page                 |  2 +-
 doc/mongoc_uri_get_hosts.page                    |  2 +-
 doc/mongoc_uri_get_options.page                  |  2 +-
 doc/mongoc_uri_get_password.page                 |  2 +-
 doc/mongoc_uri_get_read_prefs.page               |  2 +-
 doc/mongoc_uri_get_replica_set.page              |  2 +-
 doc/mongoc_uri_get_ssl.page                      |  2 +-
 doc/mongoc_uri_get_string.page                   |  2 +-
 doc/mongoc_uri_get_username.page                 |  2 +-
 doc/mongoc_uri_get_write_concern.page            |  4 ++--
 doc/mongoc_uri_new.page                          |  2 +-
 doc/mongoc_uri_new_for_host_port.page            |  4 ++--
 doc/mongoc_write_concern_copy.page               |  4 ++--
 doc/mongoc_write_concern_destroy.page            |  2 +-
 doc/mongoc_write_concern_get_fsync.page          |  2 +-
 doc/mongoc_write_concern_get_journal.page        |  2 +-
 doc/mongoc_write_concern_get_w.page              |  2 +-
 doc/mongoc_write_concern_get_wmajority.page      |  2 +-
 doc/mongoc_write_concern_get_wtag.page           |  2 +-
 doc/mongoc_write_concern_get_wtimeout.page       |  2 +-
 doc/mongoc_write_concern_new.page                |  2 +-
 doc/mongoc_write_concern_set_fsync.page          |  4 ++--
 doc/mongoc_write_concern_set_journal.page        |  2 +-
 doc/mongoc_write_concern_set_w.page              |  4 ++--
 doc/mongoc_write_concern_set_wmajority.page      |  2 +-
 doc/mongoc_write_concern_set_wtag.page           |  4 ++--
 doc/mongoc_write_concern_set_wtimeout.page       |  2 +-
 227 files changed, 452 insertions(+), 452 deletions(-)

commit 59dd4795b6126157ed4bf758acb7351ac3431a9e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 2 10:25:39 2015 -0400

    empty link from cursors.page

 doc/cursors.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd42145adcadbcc91ff0a0d5196010bd6488fa22
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat May 2 09:56:45 2015 -0400

    update links to MongoDB Manual

 doc/aggregate.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 03329d5526b74d90b27de158770a097863b3d32e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 1 23:39:08 2015 -0400

    CDRIVER-524 link from libmongoc docs to libbson

 build/libbson.xsl                               | 23 +++++++++++++++++++++++
 doc/Makefile.am                                 |  2 +-
 doc/mongoc_bulk_operation_delete.page           |  2 +-
 doc/mongoc_bulk_operation_delete_one.page       |  2 +-
 doc/mongoc_bulk_operation_execute.page          |  6 +++---
 doc/mongoc_bulk_operation_insert.page           |  2 +-
 doc/mongoc_bulk_operation_remove.page           |  2 +-
 doc/mongoc_bulk_operation_remove_one.page       |  2 +-
 doc/mongoc_bulk_operation_replace_one.page      |  4 ++--
 doc/mongoc_bulk_operation_update.page           |  4 ++--
 doc/mongoc_bulk_operation_update_one.page       |  4 ++--
 doc/mongoc_client_command.page                  |  4 ++--
 doc/mongoc_client_command_simple.page           |  6 +++---
 doc/mongoc_client_get_database_names.page       |  4 ++--
 doc/mongoc_client_get_gridfs.page               |  2 +-
 doc/mongoc_client_get_server_status.page        |  6 +++---
 doc/mongoc_collection_aggregate.page            |  4 ++--
 doc/mongoc_collection_command.page              |  4 ++--
 doc/mongoc_collection_command_simple.page       |  6 +++---
 doc/mongoc_collection_count.page                |  4 ++--
 doc/mongoc_collection_count_with_opts.page      |  6 +++---
 doc/mongoc_collection_create_index.page         |  4 ++--
 doc/mongoc_collection_delete.page               |  4 ++--
 doc/mongoc_collection_drop.page                 |  2 +-
 doc/mongoc_collection_drop_index.page           |  2 +-
 doc/mongoc_collection_ensure_index.page         |  4 ++--
 doc/mongoc_collection_find.page                 |  4 ++--
 doc/mongoc_collection_find_and_modify.page      | 12 ++++++------
 doc/mongoc_collection_find_indexes.page         |  2 +-
 doc/mongoc_collection_insert.page               |  6 +++---
 doc/mongoc_collection_insert_bulk.page          |  4 ++--
 doc/mongoc_collection_keys_to_index_string.page |  4 ++--
 doc/mongoc_collection_remove.page               |  4 ++--
 doc/mongoc_collection_rename.page               |  2 +-
 doc/mongoc_collection_save.page                 |  4 ++--
 doc/mongoc_collection_stats.page                |  6 +++---
 doc/mongoc_collection_update.page               |  6 +++---
 doc/mongoc_collection_validate.page             |  6 +++---
 doc/mongoc_cursor_current.page                  |  2 +-
 doc/mongoc_cursor_error.page                    |  2 +-
 doc/mongoc_cursor_next.page                     |  2 +-
 doc/mongoc_database_add_user.page               |  6 +++---
 doc/mongoc_database_command.page                |  4 ++--
 doc/mongoc_database_command_simple.page         |  6 +++---
 doc/mongoc_database_create_collection.page      |  4 ++--
 doc/mongoc_database_drop.page                   |  2 +-
 doc/mongoc_database_find_collections.page       |  2 +-
 doc/mongoc_database_get_collection_names.page   |  4 ++--
 doc/mongoc_database_has_collection.page         |  2 +-
 doc/mongoc_database_remove_all_users.page       |  2 +-
 doc/mongoc_database_remove_user.page            |  2 +-
 doc/mongoc_gridfs_drop.page                     |  2 +-
 doc/mongoc_gridfs_file_error.page               |  2 +-
 doc/mongoc_gridfs_file_get_aliases.page         |  2 +-
 doc/mongoc_gridfs_file_get_metadata.page        |  2 +-
 doc/mongoc_gridfs_file_list_error.page          |  2 +-
 doc/mongoc_gridfs_file_remove.page              |  2 +-
 doc/mongoc_gridfs_file_set_aliases.page         |  2 +-
 doc/mongoc_gridfs_file_set_metadata.page        |  2 +-
 doc/mongoc_gridfs_find.page                     |  2 +-
 doc/mongoc_gridfs_find_one.page                 |  4 ++--
 doc/mongoc_gridfs_find_one_by_filename.page     |  2 +-
 doc/mongoc_gridfs_remove_by_filename.page       |  2 +-
 doc/mongoc_matcher_match.page                   |  2 +-
 doc/mongoc_matcher_new.page                     |  4 ++--
 doc/mongoc_read_prefs_add_tag.page              |  2 +-
 doc/mongoc_read_prefs_get_tags.page             |  2 +-
 doc/mongoc_read_prefs_set_tags.page             |  2 +-
 doc/mongoc_socket_connect.page                  |  2 +-
 doc/mongoc_socket_getnameinfo.page              |  2 +-
 doc/mongoc_socket_recv.page                     |  2 +-
 doc/mongoc_socket_send.page                     |  2 +-
 doc/mongoc_socket_sendv.page                    |  2 +-
 doc/mongoc_stream_writev.page                   |  2 +-
 doc/mongoc_uri_get_options.page                 |  2 +-
 doc/mongoc_uri_unescape.page                    |  2 +-
 76 files changed, 146 insertions(+), 123 deletions(-)

commit 33e24d5b2dab0d710de06b17d7d4d7c94a2b3fcd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 1 23:06:57 2015 -0400

    some typos in docs links

 doc/mongoc_bulk_operation_t.page | 2 +-
 doc/mongoc_socket_accept.page    | 2 +-
 doc/mongoc_stream_writev.page    | 4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 0189157861ec1f7c8b6dc97e69f45471aee4a11e
Merge: 6466ac8 072289d
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri May 1 22:16:42 2015 -0400

    Merge pull request #226 from jmikola/patch-1
    
    Fix typo in prototype argument

commit 6466ac874d46ee50cf429b82bd43ddc5f3c7c64f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri May 1 22:15:36 2015 -0400

    spelling

 src/mongoc/mongoc-gridfs-file-page.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 072289d7c7e57b97b0c3f27c4872c2e42eb1c670
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri May 1 10:50:24 2015 -0400

    Fix typo in prototype argument

 src/mongoc/mongoc-write-concern-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c707d18d9628a0fde7b69447eebe376f96981fd4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 29 16:59:28 2015 -0400

    make installing.page consistent with libbson's

 doc/installing.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 39dd640931e07467a89f727345b3810ed8994371
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 21:29:17 2015 -0400

    fix leak in mock_server_t test utility

 tests/mock-server.c | 1 +
 1 file changed, 1 insertion(+)

commit cf1bf7bd9fd79a64381df7c609657654294c149d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 21:28:42 2015 -0400

    CDRIVER-618 get_collection_names returns NULL on err

 src/mongoc/mongoc-database.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit efd15eb52b73eda01ddda88951ce91c8890c5b81
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 21:27:52 2015 -0400

    CDRIVER-618 show collection names aren't NULL on err

 tests/test-mongoc-database.c | 57 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)

commit db810ec2281abf3137455022d8a2a77fa57e81cf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 29 09:06:32 2015 -0400

    check for prerelease version with m4_ifset

 build/autotools/Versions.m4 | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit a75f4c0811618db312d569b97ae653265be217e4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 28 16:39:47 2015 -0400

    CDRIVER-506 update read preferences docs

 doc/mongoc_client_set_read_prefs.page     |  2 ++
 doc/mongoc_collection_set_read_prefs.page |  2 ++
 doc/mongoc_database_set_read_prefs.page   |  2 ++
 doc/mongoc_read_mode_t.page               |  3 ++-
 doc/mongoc_read_prefs_t.page              | 10 +++++-----
 5 files changed, 13 insertions(+), 6 deletions(-)

commit 88558238d80cf17fdf56493d028a6d947900d74d
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 28 16:21:24 2015 -0400

    fix

 doc/mongoc_client_set_write_concern.page         | 3 ++-
 doc/mongoc_collection_create_bulk_operation.page | 2 +-
 doc/mongoc_collection_set_write_concern.page     | 3 ++-
 doc/mongoc_database_set_write_concern.page       | 3 ++-
 4 files changed, 7 insertions(+), 4 deletions(-)

commit b8c442d473c329c4f634399153a9046f4498aaaa
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 28 16:12:40 2015 -0400

    CDRIVER-506 update write concern docs

 doc/mongoc_write_concern_set_fsync.page |  5 +++++
 doc/mongoc_write_concern_t.page         | 21 +++++++++------------
 2 files changed, 14 insertions(+), 12 deletions(-)

commit 5b203ef71c2fe6343f742bfcb65472c9ba7e3887
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 28 15:36:57 2015 -0400

    remove redundant "advanced connections" links

 doc/advanced-connections.page | 18 +++---------------
 1 file changed, 3 insertions(+), 15 deletions(-)

commit 0aed881652fabe8dbee8ffc61fa1679cd56f0835
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 28 15:36:39 2015 -0400

    more natural title to URI spec from examples

 doc/deleting-document.page       | 2 +-
 doc/executing-command.page       | 2 +-
 doc/finding-document.page        | 2 +-
 doc/inserting-document.page      | 2 +-
 doc/mongoc_bulk_operation_t.page | 2 +-
 doc/updating-document.page       | 2 +-
 6 files changed, 6 insertions(+), 6 deletions(-)

commit 38fc65a0f4b2b17d71ee71683c93aa84718a6733
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 13 16:15:14 2015 -0400

    CDRIVER-610 wait minHeartbeatFrequencyMS between blocking scans
    
    Server Selection Spec:
    
    Single-threaded server selection: When a client that uses single-threaded
    monitoring fails to select a suitable server for any operation, it scans the
    servers, then attempts selection again, to see if the scan discovered suitable
    servers. It repeats, waiting minHeartbeatFrequencyMS between scans, until a
    timeout.
    
    https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#single-threaded-server-selection

 src/mongoc/mongoc-topology.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 474dad95b895779dcef2149d862602636f44ba77
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 11 14:12:16 2015 -0400

    CDRIVER-610 reconnect on err in single-thread mode
    
    While looping to select a server, attempt reconnect after error.

 src/mongoc/mongoc-async-cmd-private.h | 1 +
 src/mongoc/mongoc-async-cmd.c         | 9 +++++++++
 src/mongoc/mongoc-async.c             | 9 +++++++--
 3 files changed, 17 insertions(+), 2 deletions(-)

commit ab6035462725f7f2bc5f8287456479236ec632c4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 16:21:18 2015 -0400

    CDRIVER-624 fix clang version check

 build/autotools/CheckCompiler.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 44626d80c2b0db2ff316fe411d6a5923a35cbe0f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 15:30:16 2015 -0400

    typo in authentication doc

 doc/authentication.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9cd2576effe2185a9cbfdad4a26c336a19dc7e8b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 15:08:54 2015 -0400

    CDRIVER-624 fix gcc and clang version checks

 build/autotools/CheckCompiler.m4 | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit e01daadd50b785ce976b1c863486b6675a470da4
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 24 13:25:57 2015 -0400

    run tests with SSL options set from environment

 CONTRIBUTING.md                |   7 +
 tests/test-bulk.c              |  26 +---
 tests/test-libmongoc.c         | 299 +++++++++++++++++++++++++++++++++++++++--
 tests/test-libmongoc.h         |   7 +-
 tests/test-mongoc-client.c     |  65 ++++-----
 tests/test-mongoc-collection.c |  57 +++-----
 tests/test-mongoc-cursor.c     |  28 +---
 tests/test-mongoc-database.c   |  25 +---
 tests/test-mongoc-gridfs.c     |  31 ++---
 tests/test-write-commands.c    |  17 +--
 10 files changed, 377 insertions(+), 185 deletions(-)

commit 2d331b7d68c922e502bc9242bbf8c2dea66e2bfa
Merge: 5626c39 146b1f2
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Thu Apr 23 09:11:57 2015 -0400

    Merge pull request #223 from ajdavis/CDRIVER-619-tls-loop-on-error
    
    CDRIVER-619 fail fast after TLS socket hangup

commit 5626c39966a5453c82aed3176190dcebfd808c6e
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 21 22:54:11 2015 -0400

    fix mongoc_collection_command test for MongoDB 3.1
    
    The test had been querying collections with random names like
    $cmd.sys.inprog_12345, which returned the currentOp, the same as
    $cmd.sys.inprog, on legacy servers, but not since SERVER 7775.
    Now if we query "$cmd.sys.inprog" exactly, the test still works.

 tests/test-mongoc-collection.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 146b1f290dfdba9442bb1075e433675dadfadf02
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 21 12:35:59 2015 -0400

    CDRIVER-619 fail fast after TLS socket hangup

 src/mongoc/mongoc-stream-tls.c | 12 ++++++++++--
 tests/ssl-test.c               |  6 ------
 2 files changed, 10 insertions(+), 8 deletions(-)

commit a7e9cfda2f2668b0e7b1e566d28fce08097b67e0
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 21 12:34:01 2015 -0400

    CDRIVER-619 test TLS socket hangup

 CMakeLists.txt                        |   3 +-
 tests/Makefile.am                     |   1 +
 tests/ssl-test.c                      |  14 ---
 tests/ssl-test.h                      |  14 +++
 tests/test-libmongoc.c                |  46 ++++----
 tests/test-mongoc-stream-tls-hangup.c | 205 ++++++++++++++++++++++++++++++++++
 6 files changed, 246 insertions(+), 37 deletions(-)

commit 739a77d796d80faac093678f46b7326dc51d4529
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 17 15:55:12 2015 -0400

    Spelling.

 tests/ssl-test.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 94c4091ab040d21af9c92e224b81cd87fbb70f54
Merge: cb1ef53 58bf309
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 21 10:21:41 2015 -0700

    Merge branch 'bjori-CDRIVER-611' into 1.2.0-dev
    
    * bjori-CDRIVER-611:
      Document new values introduced by the SDAM & SS specs
      Document that setting these values to 0 makes the driver to use the default value
      CDRIVER-611: Consistent treatment of integer URI options

commit 58bf309998a98f1495b3b4fbfd5f33d1282ecff5
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 21 10:21:12 2015 -0700

    Document new values introduced by the SDAM & SS specs

 doc/mongoc_uri_t.page | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 4ebd55b04a15b2e323ebc78219a85ddc22e0ab10
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Apr 21 10:21:02 2015 -0700

    Document that setting these values to 0 makes the driver to use the default value

 doc/mongoc_uri_t.page | 3 +++
 1 file changed, 3 insertions(+)

commit e890b125b567e51375bfd127e054a32f54ceed46
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 13:49:00 2015 -0700

    CDRIVER-611: Consistent treatment of integer URI options
    
    We now consitently allow =0 to mean "whatever the default value is"

 src/mongoc/mongoc-cluster.c  | 12 +++++++-----
 src/mongoc/mongoc-topology.c | 10 ++++++++--
 2 files changed, 15 insertions(+), 7 deletions(-)

commit cb1ef532f418f5f269a382369534622fc5d448b9
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Wed Apr 15 15:40:24 2015 -0400

    Move mongoc_cursor_cursorid_t typedef into private header
    
    The PHP driver needs access to this structure, since it reimplements some of the logic within _mongoc_cursor_cursorid_prime().

 src/mongoc/mongoc-cursor-cursorid-private.h | 9 +++++++++
 src/mongoc/mongoc-cursor-cursorid.c         | 9 ---------
 2 files changed, 9 insertions(+), 9 deletions(-)

commit 48eb51993e1458e21ca2c2f5bd192348ea29240e
Merge: 0bd7850 61a16b9
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sun Apr 12 10:00:58 2015 -0400

    Merge pull request #220 from jeroenooms/ansi-fixes
    
    ANSI C warnings

commit 61a16b99223f323a286d31fa3b3929280e13bc4e
Author: Jeroen Ooms <jeroenooms@gmail.com>
Date:   Sat Apr 11 11:03:02 2015 -0700

    fix: pointer of type void * used in arithmetic [-Wpointer-arith]

 src/mongoc/mongoc-stream-tls.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0bd7850609990e21be2c796b1cb2da1adcf416f1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sat Apr 11 09:13:03 2015 -0400

    CDRIVER-612: Fix indentation.

 src/mongoc/mongoc-bulk-operation.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fa3d7920242c2d510976d0c51c1120178432b72c
Merge: b8422e4 22c26f0
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Apr 11 08:48:46 2015 -0400

    Merge pull request #218 from ajdavis/timeout-fix
    
    CDRIVER-594 Fix timeout in single-thread selection

commit 676fd957e7a5a60294f912ed9bc3750ae8d6aa4c
Merge: 9a0adda f51328d
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sat Apr 11 08:46:23 2015 -0400

    Merge pull request #214 from ajdavis/CDRIVER-513-missing-docs
    
    CDRIVER-513 missing docs

commit 9a0adda6391c42cb1103a92b1f4f9a6efd64fad9
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 10 23:46:59 2015 -0400

    CDRIVER-612: Compiler warning on Solaris.
    
    The EXIT macro is a return statement.

 src/mongoc/mongoc-bulk-operation.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit b8422e4c11b0d15b32a078404e20073551c1ffb0
Merge: c71163d c51ce6a
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Fri Apr 10 23:43:54 2015 -0400

    Merge pull request #219 from bjori/CDRIVER-612
    
    CDRIVER-612: Compiler warning on Solaris

commit c51ce6a7778c35e85e0d8c9d854626d90846c320
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Apr 10 13:51:50 2015 -0700

    CDRIVER-612: Compiler warning on Solaris

 src/mongoc/mongoc-bulk-operation.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit c71163d20d7419c163adb3ec27eba4e44d7301f8
Merge: 16ec797 9c55d2b
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 20:52:14 2015 -0700

    Merge branch 'bjori-fix-compiler-warning' into 1.2.0-dev
    
    * bjori-fix-compiler-warning:
      min_bytes is unsigned -- this will never be false

commit 22c26f0d0ec720d3e20cedc1f7a8168e92ceaf47
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Apr 8 16:41:14 2015 -0400

    CDRIVER-594 Fix timeout in single-thread selection
    
    Cancel after first blocking scan's timeout, not the second's.

 src/mongoc/mongoc-topology.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 9c55d2b8a61aea5db8e50f2d8b7f6d557b47b642
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 14:19:22 2015 -0700

    min_bytes is unsigned -- this will never be false

 src/mongoc/mongoc-buffer.c | 1 -
 1 file changed, 1 deletion(-)

commit b34cbf16e4dc7ee1f2ba8c2c8ac0f1c1f6ba9350
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Apr 8 15:47:23 2015 -0400

    CDRIVER-481 adding --enable-shm-counters
    
    New configure flag to enable/disable shared memory performance counters.

 build/autotools/FindDependencies.m4         | 3 +++
 build/autotools/PrintBuildConfiguration.m4  | 1 +
 build/autotools/ReadCommandLineArguments.m4 | 6 ++++++
 src/mongoc/mongoc-counters.c                | 6 +++---
 4 files changed, 13 insertions(+), 3 deletions(-)

commit 16ec797c7175f866e34a28eafac49bbf5b86bab5
Merge: 21f6917 5d1f886
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 12:50:19 2015 -0700

    Merge branch 'bjori-CDRIVER-609' into 1.2.0-dev
    
    * bjori-CDRIVER-609:
      Fully implement the failed mongoc_stream handler for all our resoruces
      Remove unused mongoc_topology_scanner_rm() function
      CDRIVER-609: Differenciate between a failed stream, and cleanup/destroy
      Fix padding after the introduction of `poll` in 9227e633

commit 5d1f8862e7566d822d5928b4e8a1097158b381bf
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 11:27:00 2015 -0700

    Fully implement the failed mongoc_stream handler for all our resoruces

 src/mongoc/mongoc-stream-buffered.c | 26 ++++++++++++++++++++++++++
 src/mongoc/mongoc-stream-file.c     | 12 ++++++++++++
 src/mongoc/mongoc-stream-gridfs.c   | 12 ++++++++++++
 src/mongoc/mongoc-stream-socket.c   | 12 ++++++++++++
 src/mongoc/mongoc-stream-tls.c      | 24 ++++++++++++++++++++++++
 5 files changed, 86 insertions(+)

commit 22c0cce25d9914c091f02b0c9f18adae48202317
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 10:47:23 2015 -0700

    Remove unused mongoc_topology_scanner_rm() function

 src/mongoc/mongoc-topology-scanner-private.h |  4 ----
 src/mongoc/mongoc-topology-scanner.c         | 12 ------------
 2 files changed, 16 deletions(-)

commit 1926413b45390887431bbfb0380631153c886b74
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 11:15:39 2015 -0700

    CDRIVER-609: Differenciate between a failed stream, and cleanup/destroy
    
    This adds a new `failed` handler to the mongoc_stream_t, along with
    mongoc_stream_failed().
    
    The failed handler shall be called when the stream truely needs to be
    destroyed (due to errors, removal from topology, etc etc).
    The destroy handler shall be called during normal _destroy() routines,
    like mongoc_destroy().
    
    By default, for BC, if no failed handler is provided we will fallback
    and call the `destroy` handler.

 build/autotools/versions.ldscript    |  1 +
 build/cmake/libmongoc-ssl.def        |  1 +
 build/cmake/libmongoc.def            |  1 +
 src/libmongoc.symbols                |  1 +
 src/mongoc/mongoc-client.c           |  2 +-
 src/mongoc/mongoc-cluster.c          |  5 +++--
 src/mongoc/mongoc-gridfs.c           |  2 +-
 src/mongoc/mongoc-stream.c           | 26 ++++++++++++++++++++++++++
 src/mongoc/mongoc-stream.h           |  4 +++-
 src/mongoc/mongoc-topology-scanner.c | 20 ++++++++++++--------
 10 files changed, 50 insertions(+), 13 deletions(-)

commit cd90a29f9eb8d44e1bee242bcb6f046d77daa73e
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Apr 8 11:14:30 2015 -0700

    Fix padding after the introduction of `poll` in 9227e633

 src/mongoc/mongoc-stream.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 21f69173adf793bc60e8dac8197fd5ddbc18c9cb
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Apr 8 13:20:42 2015 -0400

    CDRIVER-610 remove retries in server selection
    
    There's no need to perform retries in server selection.  The topology
    select takes care of requesting a scan and waiting for the alloted
    timeout.

 src/mongoc/mongoc-cluster.c | 12 +-----------
 1 file changed, 1 insertion(+), 11 deletions(-)

commit 9e8070e3ab73e4dae4673ca748b63cb175323957
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 19:08:17 2015 -0400

    Add new headers to source tarball.

 src/mongoc/Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d35ab6f5b8a7b4086a4af667c9603a772770c165
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 18:51:40 2015 -0400

    Fix manpage ids.

 doc/mongoc_bulk_operation_get_write_concern.page | 2 +-
 doc/mongoc_server_description_destroy.page       | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 56826db1746aac9e69a1cfedef2958449a1ab379
Merge: 673d4a7 efa816a
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 18:32:33 2015 -0400

    Merge branch 'master' into 1.2.0-dev
    
    * master:
      prerelease version

commit efa816a2ef0e6696f42c2eb39f973a9d5cec7a26
Merge: 2ef028c 74ab23b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 18:32:17 2015 -0400

    Merge branch 'pr-193'
    
    # By Jason Carey (hanumantmk)
    # Via Jason Carey (hanumantmk)
    * pr-193:
      prerelease version
    
    Conflicts:
    	CMakeLists.txt
    	build/autotools/Versions.m4

commit 673d4a7aab3d8b46a676ea97b4cd46c5956f976c
Merge: 68a751a 2ef028c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 18:25:51 2015 -0400

    Merge remote-tracking branch 'upstream/master' into 1.2.0-dev
    
    # By A. Jesse Jiryu Davis (7) and others
    * upstream/master:
      CDRIVER-606 Call mongoc_init () in test-secondary
      Begin next release's changelog
      Spelling.
      Include header for suppress_one_message() in test-mongoc-uri.c.
      CDRIVER-605 fix function name in collection_find_indexes page.
      Fix version no. in guide to building from release tarball.
      post release bump
      Release 1.1.4
      CDRIVER-580: fsync or j in write concern imply GLE
      Use write concern macros instead of magic numbers
      CDRIVER-560: Include private header in mongoc-client-pool.c.
    
    Conflicts:
    	src/libbson
    	src/mongoc/mongoc-client-pool.c
    	src/mongoc/mongoc-uri.c

commit 68a751a56d284627742309942224dd35887ded9c
Merge: 181884c 7220796
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 17:40:13 2015 -0400

    Merge branch 'pr-211' into 1.2.0-dev
    
    * pr-211:
      CDRIVER-590 Update mongoc_uri_get_read_prefs_t man page.
      CDRIVER-590 Move new mongoc_uri_get_read_prefs_t to proper ABI section.
      CDRIVER-590: Deprecate mongoc_uri_get_read_prefs()
      CDRIVER-590: Support readPreference connection string option

commit 7220796b7677ea098eccf0a6af46bda6c0aec966
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 17:39:25 2015 -0400

    CDRIVER-590 Update mongoc_uri_get_read_prefs_t man page.

 doc/mongoc_uri_get_read_prefs_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b0eae7fc7d51486d5fc3605b8e7ecbc7e5e1a804
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Tue Apr 7 17:39:08 2015 -0400

    CDRIVER-590 Move new mongoc_uri_get_read_prefs_t to proper ABI section.

 build/autotools/versions.ldscript | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 181884caef9a2ff39b1d8f76aaf2d10f623b04e2
Merge: 5fca78e 45017c4
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Tue Apr 7 16:59:58 2015 -0400

    Merge pull request #213 from hanumantmk/CDRIVER-594
    
    CDRIVER-594 fix all the SS/SDAM timers

commit 2ef028cdbc21eb2b9e47d8bb51520f73d4e584c2
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 6 17:14:24 2015 -0400

    CDRIVER-606 Call mongoc_init () in test-secondary
    
    Besides being a correct use of libmongoc, it also fixes building with
    "./configure --disable-shared --enable-static" and clang on Mac.

 tests/test-secondary.c | 2 ++
 1 file changed, 2 insertions(+)

commit 9097d8d85ccbd83abb9ba4dc03bd3b0399506b02
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 6 15:00:24 2015 -0400

    Begin next release's changelog

 NEWS | 7 +++++++
 1 file changed, 7 insertions(+)

commit ccceb8556cc31402250b40992402c8f3c8441fce
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 6 14:48:50 2015 -0400

    Spelling.

 tests/ssl-test.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5dedf03a42ebbdb9f0d05a559695a340d4b591a7
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 6 14:48:32 2015 -0400

    Include header for suppress_one_message() in test-mongoc-uri.c.

 tests/test-mongoc-uri.c | 2 ++
 1 file changed, 2 insertions(+)

commit 6dc147e226137301ae2aabaeb400ad0d1de02375
Merge: e3f7c92 4c2af63
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Apr 6 14:18:30 2015 -0400

    Merge branch 'pr-194'
    
    * pr-194:
      CDRIVER-580: fsync or j in write concern imply GLE
      Use write concern macros instead of magic numbers

commit f51328deceebd6937a9318962cb8aec3a9c47caf
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 5 16:01:26 2015 -0400

    Spelling.

 doc/mongoc_gridfs_file_t.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b27642e20a7107ca5ca93b50ab0aee3741261cca
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 5 15:53:25 2015 -0400

    CDRIVER-513 mongoc_gridfs_file_remove, mongoc_gridfs_remove_by_filename pages.

 doc/mongoc_gridfs_file_remove.page        | 43 +++++++++++++++++++++++++++++
 doc/mongoc_gridfs_remove_by_filename.page | 45 +++++++++++++++++++++++++++++++
 2 files changed, 88 insertions(+)

commit 569737310e2f77d27ec37fd9f1f9b46faf09f343
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 5 15:52:38 2015 -0400

    Spelling.

 doc/mongoc_gridfs_find_one_by_filename.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 44571928cfdb38df587af3c5f42b8e866bfb737b
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 5 15:52:21 2015 -0400

    Update mongoc_client_get_gridfs comment.

 src/mongoc/mongoc-client.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit ccfbc1dca3fbde887013b3b535c0bbe76b5eb5b1
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 5 15:52:01 2015 -0400

    mongoc_client_get_gridfs's "prefix" is optional.

 doc/mongoc_client_get_gridfs.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e3f7c92ee623d72ccae8024b5694126fc1047042
Merge: 4953152 0b7d190
Author: A. Jesse Jiryu Davis <jesse@emptysquare.net>
Date:   Sun Apr 5 10:29:16 2015 -0400

    Merge pull request #189 from ajdavis/CDRIVER-560-client-pool-private-h
    
    CDRIVER-560: Include private header in mongoc-client-pool.c.

commit 49531521ba5a17254924618476559fb199d53245
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Apr 5 10:24:23 2015 -0400

    CDRIVER-605 fix function name in collection_find_indexes page.

 doc/mongoc_collection_find_indexes.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6b24d0f9d9355138ff356b903818dc9a8a53ada5
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Fri Apr 3 09:22:41 2015 -0400

    Fix version no. in guide to building from release tarball.
    
    Fixes CDRIVER-603.

 README.rst | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 0162c9fc0f334555262c389e8996edfea2533b24
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Apr 1 14:10:29 2015 -0400

    post release bump

 CMakeLists.txt                |  4 ++--
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  4 ++--
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 7 files changed, 34 insertions(+), 22 deletions(-)

commit 928e4fade16b8ef1245d105c2bc8ea835da174b9
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Apr 1 14:04:16 2015 -0400

    Release 1.1.4
    
    Signed-off-by: Jason Carey (hanumantmk) <jcarey@argv.me>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 28 ++++++++++++++++++++++++++++
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 9 files changed, 64 insertions(+), 24 deletions(-)

commit 091de4d1dbef89f9b96042c6f7243749e639c91b
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Mon Mar 30 14:34:22 2015 -0400

    CDRIVER-590: Deprecate mongoc_uri_get_read_prefs()
    
    This also corrects the documentation to note that only read preference tags are returned in the BSON result.

 doc/mongoc_uri_get_read_prefs.page | 8 +++++++-
 src/mongoc/mongoc-uri.h            | 3 ++-
 2 files changed, 9 insertions(+), 2 deletions(-)

commit c425c5f020c1050cded2ecd4f997ce1461f6c68c
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Mar 24 17:50:04 2015 -0400

    CDRIVER-590: Support readPreference connection string option
    
    This adds support for parsing the readPreference URI option. It also implements validation of the read preference and returns a NULL URI pointer on failure, similar to the write concern validation added by CDRIVER-580.
    
    Unfortunately, mongoc_uri_get_read_prefs() was already taken for the API function that returns read preference tags from the URI. This commit adds a new function, mongoc_uri_get_read_prefs_t(), which returns the actual mongoc_read_prefs_t struct (now used by the client constructor).

 build/autotools/versions.ldscript    |   1 +
 build/cmake/libmongoc-ssl.def        |   1 +
 build/cmake/libmongoc.def            |   1 +
 doc/mongoc_uri_get_read_prefs_t.page |  37 ++++++++++++
 src/libmongoc.symbols                |   1 +
 src/mongoc/mongoc-client.c           |  21 +------
 src/mongoc/mongoc-uri.c              |  78 +++++++++++++++++++++----
 src/mongoc/mongoc-uri.h              |   2 +
 tests/test-mongoc-uri.c              | 109 +++++++++++++++++++++++++++++++++--
 9 files changed, 216 insertions(+), 35 deletions(-)

commit 45017c45a83751569502d9b9288b901b91374366
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 26 21:44:14 2015 -0400

    Various bug fixes
    
    o actually lock around ismaster handling in topology
    o re-use topology_request_scan in select loop

 src/mongoc/mongoc-topology-scanner.c |  3 +-
 src/mongoc/mongoc-topology.c         | 81 ++++++++++++++++++++----------------
 2 files changed, 48 insertions(+), 36 deletions(-)

commit 0b592d7ba4498ee7c2a3a5a07a50399194fa6d0d
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 26 20:47:35 2015 -0400

    CDRIVER-594 fix all the SS/SDAM timers

 src/mongoc/mongoc-client-pool.c              |   8 +--
 src/mongoc/mongoc-client.c                   |   4 +-
 src/mongoc/mongoc-cluster-private.h          |   1 +
 src/mongoc/mongoc-cluster.c                  | 104 +++++++++++++++++++++++++--
 src/mongoc/mongoc-thread-private.h           |   7 +-
 src/mongoc/mongoc-topology-description.c     |   8 ++-
 src/mongoc/mongoc-topology-private.h         |  18 ++---
 src/mongoc/mongoc-topology-scanner-private.h |   1 +
 src/mongoc/mongoc-topology-scanner.c         |   2 +
 src/mongoc/mongoc-topology.c                 |  91 +++++++++++++++++------
 src/mongoc/mongoc-uri.c                      |   3 +
 tests/test-mongoc-topology.c                 |   9 ---
 12 files changed, 197 insertions(+), 59 deletions(-)

commit 4c2af639c80d7e38fc8f8354a9b3a4bf02d39df0
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Mar 13 01:09:02 2015 -0400

    CDRIVER-580: fsync or j in write concern imply GLE
    
    The fsync and journal options should imply a GLE; however, they logically conflict with w=0 and w=-1, so the write concern should be considered invalid with errors raised during URI parsing or write command execution.
    
    If fsync or journal have been specified (true or false), they should be included in the write concern BSON.

 src/mongoc/mongoc-uri.c                   |  24 ++++--
 src/mongoc/mongoc-write-command.c         |   9 ++
 src/mongoc/mongoc-write-concern-private.h |   9 +-
 src/mongoc/mongoc-write-concern.c         |  52 +++++++++---
 tests/test-mongoc-uri.c                   |   8 ++
 tests/test-mongoc-write-concern.c         | 137 ++++++++++++++++++++++++++++++
 tests/test-write-commands.c               |  55 ++++++++++++
 7 files changed, 273 insertions(+), 21 deletions(-)

commit 5fca78e489a41d437f4bcac53d35508bdb3e83b2
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Mar 25 16:37:58 2015 -0400

    updated libbson 1.2.0-dev dependency

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 178fb0add69ba9f72554ec5ce7b80f3591f9af53
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Mar 25 13:51:49 2015 -0400

    Various fixes to get tests up on windows

 CMakeLists.txt                       | 28 +++++++++++++++---------
 src/mongoc/mongoc-socket.c           |  2 +-
 tests/json-test.c                    | 42 ++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-sdam.c             |  4 ++++
 tests/test-mongoc-topology-scanner.c |  6 +++---
 tests/test-mongoc-topology.c         | 10 ++++++---
 6 files changed, 75 insertions(+), 17 deletions(-)

commit 40a334a0bf41a61fd19074d1043d78aa6563ecd9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 25 10:13:30 2015 -0700

    strcasecmp doesn't exist on Windows
    
    We have now almost dozen duplications of this check..

 src/mongoc/mongoc-sasl.c | 3 +++
 1 file changed, 3 insertions(+)

commit a6aaea74a27feb354076e1c2f03233dacc955c63
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Mar 25 10:08:12 2015 -0700

    Fix build on win32, ERROR is reserved

 src/mongoc/mongoc-cluster.c            | 14 +++++++-------
 src/mongoc/mongoc-server-description.c | 34 +++++++++++++++++-----------------
 2 files changed, 24 insertions(+), 24 deletions(-)

commit fda999c0054795f3aec94bc1fcb6069ff32d8a51
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Mar 25 13:03:48 2015 -0400

    Make mongoc_init_ctor/dtor optional
    
    * Remove atexit handlers.  We can automagically catch these in
      mongoc_cleanup().
    * offer MONGOC_NO_AUTOMATIC_GLOBALS compiler define which disables the
      global ctor/dtors if a user needs to manage these themselves.  (if
      they need to establish memory shims for example)

 src/mongoc/mongoc-counters-private.h | 1 +
 src/mongoc/mongoc-counters.c         | 6 ++----
 src/mongoc/mongoc-init.c             | 6 +++---
 3 files changed, 6 insertions(+), 7 deletions(-)

commit e61a833046bd44780106c90bcb0b797f6d06c97e
Merge: b887dab 1db449f
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 24 12:11:53 2015 -0400

    Merge branch 'master' into 1.2.0-dev

commit 1db449fbd08103499f85e16521b12422fe09eb97
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 24 12:11:22 2015 -0400

    updated libbson ref

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52b8f7fab4b001d3ff250f3239356f20533fc6da
Author: Andrew Clayton <andrew@digital-domain.net>
Date:   Thu Mar 5 19:48:59 2015 +0000

    client pool: Prevent a deadlock in mongoc_client_pool_pop()
    
    I was seeing deadlocks in the client when it lost contact with mongo.
    The client was getting stuck on a futex in mongoc_client_pool_pop(),
    specifically
    
        mongoc_cond_wait(&pool->cond, &pool->mutex);
    
    and never making any progress even when mongo came back on-line.
    
    This problem was introduced by commit a8c1da4 ("Client pool tries to
    repair unhealthy connections...") which started shutting down excess
    connections, i.e where there were more connections than minPoolSize.
    
    As part of this it would also decrement pool->size. This all happens in
    mongoc_client_pool_push()
    
    The problem here was that if you had a single active connection and a
    minPoolSize of 0 (the default) then it would try to remove the oldest
    client from the queue (in this case there wasn't one) and then decrement
    pool->size.
    
    pool->size would now be 0.
    
    Then we move into the trying to deal with duff connections part of the
    above commit. In this case, with no working mongo, it will want to
    destroy this connection, which it does but it will also again decrement
    pool->size, which now equals -1, except pool->size is a unit32_t
    
    Then in mongoc_client_pool_pop() we have this check
    
         if (pool->size < pool->max_pool_size) {
    
    pool->size is now some _large_ number, UINT32_MAX perhaps. and so that
    evaluates to false and then we move to the else branch which then
    executes
    
        mongoc_cond_wait(&pool->cond, &pool->mutex);
    
    and this is where we get stuck. It thinks there is too many connections
    and at the same time nothing is ever going to be returned to the queue
    (we only had a single active connection) and even we did return a
    connection to the pool, UINT32_MAX - 1 is still likely going to be >
    pool->max_pool_size.
    
    So to avoid this problem we simply don't want to try and remove
    connections from the queue that don't exist and more importantly don't
    decrement pool->size when we don't actually remove an old connection.
    
    After this change, I can start mango, start the client, kill mongo,
    client shows errors, but keeps trying to re-connect, restart mongo and
    client is then happy again.
    
    Signed-off-by: Andrew Clayton <andrew@digital-domain.net>
    
    Closes #187

 src/mongoc/mongoc-client-pool.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit dc9e04b167730ef7f503038af34c46196d9b04a9
Author: Andrew Clayton <andrew@digital-domain.net>
Date:   Thu Mar 5 00:54:56 2015 +0000

    client pool: Add some missing locking in _push()
    
    Commit a8c1da4 ("Client pool tries to repair unhealthy connections...")
    introduced more code to mongoc_client_pool_push() operating on the
    connection pool. However locking was missing on the first if () section
    which deals with various aspects of the connection pool and requires
    locking.
    
    Protect the if () with a mongoc_mutex_lock/unlock using pool->mutex.
    
    Signed-off-by: Andrew Clayton <andrew@digital-domain.net>

 src/mongoc/mongoc-client-pool.c | 2 ++
 1 file changed, 2 insertions(+)

commit b887dab50bec002f67c9e9b0c877bfa36522baa0
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Mar 23 11:29:08 2015 -0400

    CDRIVER-586 Direct bulk writes to hinted nodes
    
    Bulk writes could have a hint set, which was used for decisions around
    legacy op, size of write commands, etc.  After all those checks, we
    dispatched to whichever node happened to be the primary though.
    
    Added support for a command_simple_with_hint, which allows for a hint.
    This lets us dispatch to a specific node, which will error on a non
    master, rather than possibly silently succeeding if we route to a
    primary.

 src/mongoc/mongoc-client-private.h |  9 +++++++++
 src/mongoc/mongoc-client.c         | 15 +++++++++++++++
 src/mongoc/mongoc-write-command.c  | 12 ++++++------
 3 files changed, 30 insertions(+), 6 deletions(-)

commit cd92ea4592e4b50d6c1aada12bf4d89e2eabc5ee
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Mar 23 13:12:51 2015 -0700

    fix dumping io - it should always be done in the stream wrapper
    
    otherwise data from other handlers won't be dumped

 src/mongoc/mongoc-cluster.c | 3 ---
 src/mongoc/mongoc-socket.c  | 2 --
 src/mongoc/mongoc-stream.c  | 2 ++
 3 files changed, 2 insertions(+), 5 deletions(-)

commit dce728c6eed542079fa9a882146196d0d9a0a8fc
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Mar 23 12:32:37 2015 -0400

    CDRIVER-588 avoid cluster_try_sendv
    
    Avoid the use of cluster_try_sendv for healthy and unhealthy clusters.
    It just needlessly avoids reconnects and persists the same errors.

 src/mongoc/mongoc-client.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 9293ec12f63a65b64807853d113e17491365d0a0
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Mar 23 11:27:52 2015 -0400

    Topology test fixups
    
    Tests relied on checking that a clock updated.  We were calling out to a
    monotonic clock, but we can still be in the same tick.  Add a sleep to
    work around it.

 tests/test-mongoc-topology.c | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit 55c46780f32b9da740ce9b70335cef89ede9527c
Author: Hannes Magnusson <bjori@php.net>
Date:   Fri Mar 20 15:25:55 2015 -0700

    Pass the proper server hint to the executor - and reassign it after executing
    
    We need to re-assign it after executing if the server id wasn't
    actually set

 src/mongoc/mongoc-bulk-operation.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 9f29e01c2b218f747ec5f3be52d818b34978f70b
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Mar 13 01:18:57 2015 -0400

    Use write concern macros instead of magic numbers

 src/mongoc/mongoc-write-concern.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 48324a32a7c64e8866f35f0fcb292ec3ed17411c
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 19 16:24:03 2015 -0400

    no setup for custom streams

 src/mongoc/mongoc-topology-scanner.c | 1 +
 1 file changed, 1 insertion(+)

commit 30e6f846cac1e0378af6f6412886bf65c4381d00
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 19 15:52:43 2015 -0400

    topology_scanner should point to the topology uri
    
    instead of a dangling pointer to the passed in param...

 src/mongoc/mongoc-topology.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 94aa18d21ea03472609e0a0b22cd0f807e60b954
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 19 14:59:48 2015 -0400

    CDRIVER-582 Fix mongoc_server_description_leaks
    
    Don't bother with topology_server_by_id in cluster for single threaded
    mode.  We can safely look directly into the description and skip the
    copy / leak.
    
    Close #206

 src/mongoc/mongoc-cluster.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 6c248f25210804e4b09b6b7c09e6a374c679d34e
Author: Hannes Magnusson <bjori@php.net>
Date:   Tue Mar 17 21:44:50 2015 -0700

    CDRIVER-584: Add back sockettimeoutms support
    
    Closes #205

 src/mongoc/mongoc-cluster.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit d7cd9a59f511a691adf3b46c2e2b99c02b4bc5bc
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Mar 16 14:29:25 2015 -0400

    Abstracted stream initation for topology scanning
    
    o Threads client_set_stream_initiator down to the topology_scanner in
      single threaded mode.
    
    o Adds support for a generic setup() callback for things like TLS
      handshaking
    
    o Misc interface cleanup

 src/mongoc/mongoc-async-cmd-private.h        |  33 +++++---
 src/mongoc/mongoc-async-cmd.c                | 121 ++++++++++++++++-----------
 src/mongoc/mongoc-async-private.h            |  23 +++--
 src/mongoc/mongoc-async.c                    |  20 +++--
 src/mongoc/mongoc-client-pool.c              |   2 +-
 src/mongoc/mongoc-client.c                   |   8 +-
 src/mongoc/mongoc-topology-private.h         |   2 +-
 src/mongoc/mongoc-topology-scanner-private.h |  24 +++++-
 src/mongoc/mongoc-topology-scanner.c         |  71 +++++++++++-----
 src/mongoc/mongoc-topology.c                 |   6 +-
 tests/json-test.c                            |   5 +-
 tests/test-mongoc-async.c                    |   7 ++
 tests/test-mongoc-topology-scanner.c         |   5 +-
 tests/test-replica-set-ssl.c                 |   2 +-
 tests/test-replica-set.c                     |   4 +-
 15 files changed, 220 insertions(+), 113 deletions(-)

commit dee9d371581676352411df2e042a365d447c778f
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Tue Mar 17 13:25:57 2015 -0400

    CDRIVER-567 deprecate get_max_* methods on client

 doc/mongoc_client_get_max_bson_size.page       |   5 +
 doc/mongoc_client_get_max_message_size.page    |   5 +
 src/mongoc/mongoc-client.c                     |   4 +-
 src/mongoc/mongoc-client.h                     |   4 +-
 src/mongoc/mongoc-cluster-private.h            |  19 +--
 src/mongoc/mongoc-cluster.c                    | 199 ++++++++++++-------------
 src/mongoc/mongoc-server-description-private.h |   9 +-
 src/mongoc/mongoc-server-description.c         |  46 +++---
 src/mongoc/mongoc-topology-scanner.c           |  11 ++
 src/mongoc/mongoc-write-command.c              |   8 +-
 tests/test-mongoc-cluster.c                    |  24 +--
 11 files changed, 177 insertions(+), 157 deletions(-)

commit e02e6afdf80ed06ffa41179b18f4ecf85d7dadd8
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Fri Mar 13 11:27:26 2015 -0400

    CDRIVER-565 make mongoc_cluster_fetch_stream thread-safe

 src/mongoc/mongoc-cluster.c          | 22 +++++++++++++---------
 src/mongoc/mongoc-topology-private.h |  4 ++++
 src/mongoc/mongoc-topology.c         | 34 ++++++++++++++++++++++++++++++++++
 3 files changed, 51 insertions(+), 9 deletions(-)

commit 0b7d19020cadb6bf293b3ff4d031ba74901a361f
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 11 17:15:57 2015 -0400

    CDRIVER-560: Include private header in mongoc-client-pool.c.

 src/mongoc/mongoc-client-pool.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 208355d7a49fa66ab100c353c14d1afe1276e432
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Mar 13 01:56:18 2015 -0400

    CDRIVER-581: Don't assume write concern defaults in URI parsing
    
    False safe/journal values should be explicitly set on the write concern. Additionally, w=1 should not be parsed as MONGOC_WRITE_CONCERN_W_DEFAULT, since the driver would then omit it from the write concern and allow a different server-side default to be applied.
    
    Closes #195

 src/mongoc/mongoc-uri.c | 16 +++++-----------
 tests/test-mongoc-uri.c | 20 +++++++++++++++++---
 2 files changed, 22 insertions(+), 14 deletions(-)

commit 9c01ab7e352d81d98f0cd345c67ace04305d2032
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 15 13:13:17 2015 -0400

    Silence CMake 3.0+ warning on Mac OS X.
    
    Closes #201

 CMakeLists.txt | 4 ++++
 1 file changed, 4 insertions(+)

commit 2547749e4836761a50030a432ae77ab06507a117
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Sun Mar 15 18:50:45 2015 -0400

    CDRIVER-576: Validate port number in URI.
    
    Closes #202

 src/mongoc/mongoc-uri.c | 36 ++++++++++++++++++++++++------------
 tests/test-mongoc-uri.c | 11 ++++++++++-
 2 files changed, 34 insertions(+), 13 deletions(-)

commit 6cceb202965a244c79ba024550e219de272b170f
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Mar 16 13:42:24 2015 -0400

    CDRIVER-569 don't use server descriptions in write command code

 src/mongoc/mongoc-cluster-private.h |  8 +++++
 src/mongoc/mongoc-cluster.c         | 65 +++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-write-command.c   | 49 +++++++++++++---------------
 3 files changed, 96 insertions(+), 26 deletions(-)

commit aac91afcf4dfd5028d3638feb78b7cfe270905c0
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Fri Mar 13 17:15:35 2015 -0400

    CDRIVER-568 compare hostnames case-insensitively
    
    Closes #200

 src/mongoc/mongoc-server-description.c   |  8 +++++++-
 src/mongoc/mongoc-topology-description.c | 12 +++++++++---
 tests/test-mongoc-sdam.c                 |  6 +-----
 3 files changed, 17 insertions(+), 9 deletions(-)

commit 258dc78b0221feaf7517ffc4fbe231ec64bac672
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Mar 13 16:00:50 2015 -0400

    Get non standalone tests working
    
    With and without pool:
    * repl sets
    * repl with ssl tests
    
    * sharding tests

 src/mongoc/mongoc-client-pool.c          |  2 +
 src/mongoc/mongoc-client-private.h       |  4 --
 src/mongoc/mongoc-client.c               | 31 ++-------------
 src/mongoc/mongoc-cluster.c              | 11 ++++--
 src/mongoc/mongoc-cursor.c               | 10 -----
 src/mongoc/mongoc-server-description.c   |  2 +-
 src/mongoc/mongoc-topology-description.c |  4 ++
 src/mongoc/mongoc-topology.c             |  3 --
 tests/ha-test.c                          | 65 ++++++++++++++++++++++++++++++++
 tests/ha-test.h                          |  1 +
 tests/test-mongoc-client.c               |  5 ---
 tests/test-mongoc-cluster.c              |  1 -
 tests/test-mongoc-collection.c           |  1 -
 tests/test-mongoc-sdam.c                 |  2 +-
 tests/test-mongoc-server-selection.c     |  1 -
 tests/test-replica-set-ssl.c             | 24 ++++++++++--
 tests/test-replica-set.c                 | 63 ++++++++++++++++++++++++-------
 17 files changed, 155 insertions(+), 75 deletions(-)

commit 4c0720e3129fca1f20f6b719228320b07101e421
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Fri Mar 13 11:55:54 2015 -0400

    CDRIVER-566 select-related methods don't use write concern

 src/mongoc/mongoc-client.c          |  4 +---
 src/mongoc/mongoc-cluster-private.h |  3 ---
 src/mongoc/mongoc-cluster.c         | 28 ++++++++--------------------
 tests/test-mongoc-cluster.c         |  8 ++++----
 tests/test-mongoc-topology.c        |  8 ++++----
 5 files changed, 17 insertions(+), 34 deletions(-)

commit bad4f3753354edce5a8e448c0a63cc7ee17a1f82
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Fri Mar 13 13:55:39 2015 -0400

    CDRIVER-563 avoid passing server descriptions around

 src/mongoc/mongoc-cluster.c | 35 ++++++++++++++++++-----------------
 1 file changed, 18 insertions(+), 17 deletions(-)

commit 74ab23b95089c85c02a7da76c1f9bd6e3a624d32
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 12 18:17:35 2015 -0400

    prerelease version
    
    add prerelease version to get away from major/minor/patch encoding
    instability

 CMakeLists.txt                             | 3 ++-
 build/autotools/PrintBuildConfiguration.m4 | 2 +-
 build/autotools/Versions.m4                | 6 +++++-
 build/version.in                           | 2 +-
 configure.ac                               | 2 ++
 5 files changed, 11 insertions(+), 4 deletions(-)

commit 6441edebfa24f6e9709625d55e48626a4dd04720
Merge: 69e6d1f 2991dfb
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Mar 12 10:51:25 2015 -0400

    Merge tag '1.1.2' into 1.2.0-dev
    
    Release 1.1.2

commit e48ab08a84ad432508032bf16f68466c493e415c
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 11 19:46:52 2015 -0400

    Make man2mallard.py Python 3-compatible.

 doc/mallard2man.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1e45663bfa42038234b74bf3945909b7b057b4dd
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Wed Mar 11 19:46:24 2015 -0400

    CDRIVER-572: Use only Python standard lib in man2mallard.py.

 doc/mallard2man.py | 27 ++++++++++++++++++---------
 1 file changed, 18 insertions(+), 9 deletions(-)

commit 69e6d1ffa250e58dedf19c3e372a0457196e2816
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Mar 11 18:48:54 2015 -0400

    Various fixups for valgrind
    
    memory leaks, use after frees, etc.

 src/mongoc/mongoc-cluster.c              | 30 ++++++++++++++++++------------
 src/mongoc/mongoc-server-description.c   | 13 ++++++++++---
 src/mongoc/mongoc-topology-description.c |  4 ++--
 tests/test-mongoc-client.c               |  5 ++++-
 tests/test-mongoc-cluster.c              |  9 ++++++++-
 tests/test-mongoc-server-selection.c     | 17 ++++++++---------
 tests/test-mongoc-topology.c             | 15 +++++++++------
 7 files changed, 59 insertions(+), 34 deletions(-)

commit 6088890ec1f8ac784e625fa49edbfbd5b0ab7ee2
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Mar 11 16:44:24 2015 -0400

    CDRIVER-571 integrate sdam/ss json tests
    
    Integrates sdam/ss json tests into the overall framework

 src/libbson                          |  2 +-
 tests/TestSuite.c                    | 36 +++++++++++++++++++++++++++++++-----
 tests/TestSuite.h                    | 15 +++++++++++++--
 tests/json-test.c                    | 16 ++++++++++------
 tests/json-test.h                    | 10 ++++++----
 tests/test-mongoc-sdam.c             | 18 +++++++++---------
 tests/test-mongoc-server-selection.c | 17 +++++++++--------
 7 files changed, 79 insertions(+), 35 deletions(-)

commit 1fad58d9035f56719390acf2c81a25382532d6ee
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Mar 11 12:25:35 2015 -0400

    Don't wait for POLLIN when async reading length
    
    async commands don't need to wait for pollin after reading their length
    in.  In all likelihood more bytes are already buffered, sometimes all
    bytes, preventing a new POLLIN from ever showing up.

 src/mongoc/mongoc-async-cmd.c | 2 ++
 1 file changed, 2 insertions(+)

commit 69f1946db5ce7a3edc57bcdca7aa353e2060ad8d
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Mar 11 11:11:47 2015 -0400

    Handle merge-related fallout

 src/mongoc/mongoc-client-pool.c | 14 ++------------
 src/mongoc/mongoc-stream-tls.c  |  6 ++----
 2 files changed, 4 insertions(+), 16 deletions(-)

commit f0f1873d35c072f76bbdc166e5e225f1f9289b10
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 10 18:08:47 2015 -0400

    post release bump

 CMakeLists.txt                |  4 ++--
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  4 ++--
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 7 files changed, 34 insertions(+), 22 deletions(-)

commit 2991dfb2ae62045fbb48d009448b86a6b2e54463
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 10 17:36:23 2015 -0400

    Release 1.1.2
    
    Signed-off-by: Jason Carey (hanumantmk) <jcarey@argv.me>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 38 ++++++++++++++++++++++++++++++++++++++
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 8 files changed, 73 insertions(+), 23 deletions(-)

commit 99481fde999b8a6f7c299879392c050cc0886d4e
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 10 17:16:38 2015 -0400

    updated to libbson 1.1.2

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6316bb9ac457fc291e3c15491ae7e592cda34cd4
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 10 16:18:58 2015 -0400

    remove mongoc_bulk_operation_get_write_concern
    
    back out mongoc_bulk_operation_get_write_concern for now.  It'll go in
    1.2.0, but need to do a release without it first.

 build/autotools/versions.ldscript                |  5 ----
 build/cmake/libmongoc-ssl.def                    |  1 -
 build/cmake/libmongoc.def                        |  1 -
 doc/mongoc_bulk_operation_get_write_concern.page | 37 ------------------------
 src/libmongoc.symbols                            |  1 -
 src/mongoc/mongoc-bulk-operation-private.h       |  1 +
 src/mongoc/mongoc-bulk-operation.h               |  1 -
 7 files changed, 1 insertion(+), 46 deletions(-)

commit 605b09025995d14adc02912dca0907310bb62a5a
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Mar 10 13:34:11 2015 -0400

    CDRIVER-570: Executing bulk without write concern should inherit from client
    
    When using mongoc_bulk_operation_new() to construct a bulk operation (not through a collection), one would expect the client's write concern to be used at execution time if an explicit write concern is not set on the bulk operation. That functionality is already handled by _mongoc_write_command_execute(), but it requires we not initialize a new write concern on the bulk operation.

 src/mongoc/mongoc-bulk-operation.c | 4 ----
 1 file changed, 4 deletions(-)

commit 3bea3dd90545e07a06aa50f69a507c1fe189b1b1
Merge: bea5bc4 1c5bc1b0
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Mar 9 18:39:48 2015 -0400

    merge SDAM branch with master

commit 1c5bc1b01537748c6b9978051ee3ee1121d8ab8f
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Mar 2 11:37:03 2015 -0500

    SDAM continued work on concurrency model

 CMakeLists.txt                                 |   1 +
 src/mongoc/mongoc-client-pool.c                |   3 +-
 src/mongoc/mongoc-client.c                     |  15 +-
 src/mongoc/mongoc-cluster-private.h            |  32 ++-
 src/mongoc/mongoc-cluster.c                    | 349 +++++++++++++++++++++++--
 src/mongoc/mongoc-server-description-private.h |   5 +-
 src/mongoc/mongoc-server-description.c         |  16 +-
 src/mongoc/mongoc-topology-description.c       |  29 +-
 src/mongoc/mongoc-topology-private.h           |   7 -
 src/mongoc/mongoc-topology.c                   |  98 ++-----
 src/mongoc/mongoc-write-command.c              |  24 +-
 tests/Makefile.am                              |   1 +
 tests/test-libmongoc.c                         |   2 +
 tests/test-mongoc-cluster.c                    | 116 ++++++++
 tests/test-mongoc-server-selection.c           |   2 +-
 tests/test-mongoc-topology.c                   |  49 ++++
 16 files changed, 611 insertions(+), 138 deletions(-)

commit bea5bc45d8ac9cab2f2c74b4a52fd7abe93cd992
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Fri Feb 27 17:00:43 2015 -0500

    CDRIVER-536 hostnames are normalized to lowercase

 src/mongoc/Makefile.am          |  1 +
 src/mongoc/mongoc-uri-private.h | 39 +++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-uri.c         | 22 ++++++++++++++++++++--
 tests/test-mongoc-uri.c         |  8 ++++++++
 4 files changed, 68 insertions(+), 2 deletions(-)

commit f21649caec8d9a035fc5fbb73620c84ceb4f61b7
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Tue Mar 3 18:13:46 2015 -0500

    CDRIVER-554: Inherit write concern in collection update/bulk
    
    Closes #183

 src/mongoc/mongoc-collection.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 746d2509a24e0e3e708dd944ab6e75927f3cc8de
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Tue Mar 3 15:28:32 2015 -0800

    CDRIVER-555: Segfault during OpenSSL cleanup routines

 src/mongoc/mongoc-ssl.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 64788c17b413a134f6c2ab6995b876afb7b5f75e
Author: Andrew Clayton <andrew@digital-domain.net>
Date:   Wed Feb 25 17:18:04 2015 +0000

    client: Fix setting of the connectTimeoutMS value
    
    When specifying the connectTimeoutMS option in the URI e.g
    
        ?connectTimeoutMS=250
    
    this would be added internally under the name as specified, ie in this
    case connectTimeoutMS however when mongoc_client_connect_tcp() comes to
    look for this setting, it does so case sensitively as all lowercase, i.e
    
        if ((options = mongoc_uri_get_options (uri)) &&
            bson_iter_init_find (&iter, options, "connecttimeoutms") &&
    
    and won't find the setting and will use the default connectTimeoutMS
    value instead.
    
    It should use bson_iter_init_find_case() instead for a case insensitive
    search.
    
    Signed-off-by: Andrew Clayton <andrew@digital-domain.net>
    
    Closes #178

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6d4e69e2fd380b48d99a233fddc7e904ffbc949f
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 3 17:52:04 2015 -0500

    remove spurious return_if_fail

 src/mongoc/mongoc-client-pool.c | 2 --
 1 file changed, 2 deletions(-)

commit b5ccd322f51162e6ddfd56d3340fa75cb4b090fd
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Feb 26 11:23:19 2015 -0800

    Include internal cluster commands in the trace
    
    This includes isMaster and authentication commands
    
    Closes #179

 src/mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit cea16294b88545ea2f4137103ce7f76a9c5f1c87
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 3 16:34:41 2015 -0500

    cleanups for PR-177
    
    * moving mongoc_client_pool_get_size() to a private header
    * code formatting
    * moving variables to the top of the block for msvc
    
    Closes #177

 src/mongoc/Makefile.am                  |  1 +
 src/mongoc/mongoc-client-pool-private.h | 35 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-client-pool.c         | 10 +++++-----
 src/mongoc/mongoc-client-pool.h         |  1 -
 tests/test-mongoc-client-pool.c         | 33 ++++++++++++++++---------------
 5 files changed, 58 insertions(+), 22 deletions(-)

commit af85a17d1d1e25148bda60a8ff3e6c689ebd95fa
Author: mschoenlaub <manuel.schoenlaub@gmail.com>
Date:   Sun Mar 1 20:09:14 2015 +0100

    Adds a test for the disposal of old connections from the connection pool

 tests/test-mongoc-client-pool.c | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit e5deba5e52563a4b8153057a27ba479115940928
Author: mschoenlaub <manuel.schoenlaub@gmail.com>
Date:   Sat Feb 21 14:40:54 2015 +0100

    Client pool tries to repair unhealthy connections before returning them to the pool. Also, if there are more than min_pool_size connections in the pool, the oldest one is destroyed.

 src/mongoc/mongoc-client-pool.c | 46 ++++++++++++++++++++++++++++++++---------
 src/mongoc/mongoc-client-pool.h |  1 +
 2 files changed, 37 insertions(+), 10 deletions(-)

commit a8c1da45613c956cafa826ff85d93ddf33c25795
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Mar 3 11:30:08 2015 -0500

    CDRIVER-553 Fix replica set node management
    
    Grow and shrink nodes_len with peer list, rather than being fixed on the
    initial seed list size.

 src/mongoc/mongoc-cluster.c | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

commit 66ded1ade5e249bc763d5158d8258868487eb152
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Mar 2 14:55:38 2015 -0500

    leak in database test

 tests/test-mongoc-database.c | 1 +
 1 file changed, 1 insertion(+)

commit 73fd4e916acb6bcd22e94b24ae93c8ade1612ced
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Feb 25 17:42:34 2015 -0500

    SDAM: client and topology inform each other of invalidated servers

 src/mongoc/mongoc-client.c                       |   8 +-
 src/mongoc/mongoc-cluster-private.h              |   6 ++
 src/mongoc/mongoc-cluster.c                      | 117 ++++++++++++++++-------
 src/mongoc/mongoc-cursor.c                       |   4 +-
 src/mongoc/mongoc-server-description-private.h   |   3 +
 src/mongoc/mongoc-server-description.c           |  11 ++-
 src/mongoc/mongoc-topology-description-private.h |   4 +
 src/mongoc/mongoc-topology-description.c         |  26 +++++
 src/mongoc/mongoc-topology-private.h             |   4 +
 src/mongoc/mongoc-topology-scanner-private.h     |   1 +
 src/mongoc/mongoc-topology-scanner.c             |   1 +
 src/mongoc/mongoc-topology.c                     |  47 +++++----
 tests/test-mongoc-topology.c                     |  97 +++++++++++++++++++
 13 files changed, 268 insertions(+), 61 deletions(-)

commit 011206b3ee1685feeef0b84513921edc934c7377
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Feb 25 17:41:55 2015 -0500

    SDAM: code review fixes and cleanup

 src/mongoc/mongoc-client-pool.c                |  3 ---
 src/mongoc/mongoc-client.c                     |  1 -
 src/mongoc/mongoc-cluster.c                    |  7 ++-----
 src/mongoc/mongoc-read-prefs.c                 |  1 -
 src/mongoc/mongoc-server-description-private.h |  2 +-
 src/mongoc/mongoc-server-description.c         | 10 ++++++----
 src/mongoc/mongoc-topology-description.c       | 23 ++++++++---------------
 src/mongoc/mongoc-topology-scanner.c           |  7 +++----
 src/mongoc/mongoc-write-command.c              |  5 +++--
 tests/json-test.c                              |  1 +
 10 files changed, 24 insertions(+), 36 deletions(-)

commit ae5236279e8b9d37e0bc4f038109696bb07d0c82
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Feb 25 16:45:39 2015 -0500

    SDAM in single-threaded mode, share sockets

 src/mongoc/mongoc-cluster-private.h          |   5 ++
 src/mongoc/mongoc-cluster.c                  | 111 +++++++++++++++++++++------
 src/mongoc/mongoc-topology-scanner-private.h |   5 ++
 src/mongoc/mongoc-topology-scanner.c         |  24 ++++--
 tests/test-libmongoc.c                       |   8 +-
 tests/test-mongoc-client.c                   |   9 +++
 tests/test-mongoc-collection.c               |   8 +-
 tests/test-mongoc-topology.c                 |  16 +++-
 8 files changed, 152 insertions(+), 34 deletions(-)

commit df7db4263e57cd415e9a26e53f7a3b6735d2769e
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Feb 25 11:31:18 2015 -0500

    SDAM: add simple tests for topology object creation

 CMakeLists.txt               |   1 +
 src/mongoc/mongoc-topology.c |   8 ++++
 tests/Makefile.am            |   1 +
 tests/test-libmongoc.c       |   2 +
 tests/test-mongoc-topology.c | 101 +++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 113 insertions(+)

commit e883adaa2f7e9907430549e1640aff876112276c
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Tue Feb 24 17:21:56 2015 -0500

    SDAM: port over missed changes from master:
    
    - DEFAULT_SOCKET_TIMEOUT_MSEC name change (orig. jeromelebel)
    - CDRIVER-489 fix (orig. bjori)
    - CDRIVER-486 fix (orig. bjori)
    - CDRIVER-508 fix (orig. hanumantmk)
    - CDRIVER-485 fix (orig. bjori)
    - misplaced variable declaration (orig. outcoldman)

 src/mongoc/mongoc-cluster.c | 60 ++++++++++++++++++++-------------------------
 1 file changed, 26 insertions(+), 34 deletions(-)

commit 69346e66b25a811633ac1ecc5a077f6df14a21a6
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Feb 23 14:02:28 2015 -0500

    SDAM make tests pass, code more resilient

 src/mongoc/mongoc-server-description.c           |  22 +-
 src/mongoc/mongoc-set.c                          |   4 +-
 src/mongoc/mongoc-topology-description-private.h |   5 +-
 src/mongoc/mongoc-topology-description.c         | 428 ++++++++++++++---------
 src/mongoc/mongoc-topology.c                     |   5 +-
 tests/test-mongoc-sdam.c                         |  28 +-
 6 files changed, 298 insertions(+), 194 deletions(-)

commit 3783021900e07be15a03529c66f896e4f45506a3
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Feb 23 13:45:50 2015 -0500

    mongoc_set_for_each support

 src/mongoc/mongoc-set-private.h | 16 ++++++++++++++++
 src/mongoc/mongoc-set.c         | 23 +++++++++++++++++++++++
 tests/test-mongoc-set.c         | 28 ++++++++++++++++++++++++++++
 3 files changed, 67 insertions(+)

commit 5d35f2a91ca0a1bad98ed18cde092cdfb3cdb415
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Fri Feb 20 18:14:47 2015 -0500

    SDAM add YAML test harness and fix up code

 CMakeLists.txt                                     |   1 +
 src/mongoc/mongoc-server-description-private.h     |   8 +-
 src/mongoc/mongoc-server-description.c             | 112 ++++---
 src/mongoc/mongoc-topology-description-private.h   |   7 +-
 src/mongoc/mongoc-topology-description.c           | 157 +++++++---
 src/mongoc/mongoc-topology.c                       |  33 ++-
 tests/Makefile.am                                  |   1 +
 tests/json-test.c                                  | 108 +++++++
 tests/json-test.h                                  |  20 ++
 .../rs/discover_arbiters.json                      |  38 +++
 .../rs/discover_passives.json                      |  38 +++
 .../rs/discover_primary.json                       |  36 +++
 .../rs/discover_secondary.json                     |  37 +++
 .../rs/discovery.json                              | 163 ++++++++++
 .../rs/ghost_discovered.json                       |  32 ++
 .../rs/hosts_differ_from_seeds.json                |  31 ++
 .../rs/member_reconfig.json                        |  61 ++++
 .../rs/member_standalone.json                      |  52 ++++
 .../rs/new_primary.json                            |  66 +++++
 .../rs/new_primary_wrong_set_name.json             |  61 ++++
 .../rs/non_rs_member.json                          |  26 ++
 .../rs/normalize_case.json                         |  45 +++
 .../rs/primary_becomes_standalone.json             |  46 +++
 .../rs/primary_changes_set_name.json               |  51 ++++
 .../rs/primary_disconnect.json                     |  49 +++
 .../rs/primary_wrong_set_name.json                 |  26 ++
 .../rs/response_from_removed.json                  |  58 ++++
 .../rs/rsother_discovered.json                     |  37 +++
 .../rs/sec_not_auth.json                           |  49 +++
 .../rs/secondary_wrong_set_name.json               |  27 ++
 .../rs/secondary_wrong_set_name_with_primary.json  |  63 ++++
 .../rs/unexpected_mongos.json                      |  23 ++
 .../rs/wrong_set_name.json                         |  33 +++
 .../sharded/multiple_mongoses.json                 |  40 +++
 .../sharded/non_mongos_removed.json                |  39 +++
 .../sharded/normalize_uri_case.json                |  23 ++
 .../single/direct_connection_external_ip.json      |  31 ++
 .../single/direct_connection_mongos.json           |  28 ++
 .../single/direct_connection_rsarbiter.json        |  32 ++
 .../single/direct_connection_rsprimary.json        |  31 ++
 .../single/direct_connection_rssecondary.json      |  32 ++
 .../single/direct_connection_slave.json            |  27 ++
 .../single/direct_connection_standalone.json       |  27 ++
 .../single/not_ok_response.json                    |  35 +++
 .../single/standalone_removed.json                 |  27 ++
 .../single/unavailable_seed.json                   |  24 ++
 tests/test-libmongoc.c                             |   2 +
 tests/test-mongoc-sdam.c                           | 237 +++++++++++++++
 tests/test-mongoc-server-selection.c               | 330 +++++++++------------
 49 files changed, 2271 insertions(+), 289 deletions(-)

commit dacbf5394485fe98a86bfecd46370654a9d453cb
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Feb 18 10:28:55 2015 -0500

    SDAM properly namespace fns, only expose necessary methods

 build/autotools/versions.ldscript                |   4 +
 build/cmake/libmongoc-ssl.def                    |   4 +
 build/cmake/libmongoc.def                        |   4 +
 doc/mongoc_server_description_destroy.page       |  37 ++++
 doc/mongoc_server_description_host.page          |  39 ++++
 doc/mongoc_server_description_id.page            |  39 ++++
 doc/mongoc_server_description_new_copy.page      |  39 ++++
 doc/mongoc_server_description_t.page             |  30 +++
 src/libmongoc.symbols                            |   4 +
 src/mongoc/Makefile.am                           |   1 +
 src/mongoc/mongoc-client-pool.c                  |  10 +-
 src/mongoc/mongoc-client.c                       |  42 ++--
 src/mongoc/mongoc-cluster-private.h              |  82 +++----
 src/mongoc/mongoc-cluster.c                      | 140 ++++++------
 src/mongoc/mongoc-collection.c                   |  42 ----
 src/mongoc/mongoc-cursor.c                       |   6 +-
 src/mongoc/mongoc-server-description-private.h   |  89 ++++++++
 src/mongoc/mongoc-server-description.c           |  89 +++++---
 src/mongoc/mongoc-server-description.h           |  75 +------
 src/mongoc/mongoc-topology-description-private.h |  97 +++++++++
 src/mongoc/mongoc-topology-description.c         |  86 ++++----
 src/mongoc/mongoc-topology-description.h         |  97 ---------
 src/mongoc/mongoc-topology-private.h             |  43 ++--
 src/mongoc/mongoc-topology.c                     | 262 +++++++++++------------
 src/mongoc/mongoc-write-command.c                |  22 +-
 tests/test-mongoc-collection.c                   |   8 +-
 tests/test-mongoc-server-selection.c             |  20 +-
 27 files changed, 799 insertions(+), 612 deletions(-)

commit fa024087f06176d29db2c7717f3ab5ebae7cc1f7
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Feb 26 15:49:00 2015 -0500

    CDRIVER-526 memory leak in get_database_names()
    
    Fix a memory leak in mongoc_client_get_database_names()

 src/mongoc/mongoc-client.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 84c0ec150ba9b9981e5076ed2621f60872be3a7e
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Feb 26 11:56:18 2015 -0800

    CDRIVER-546: Use the error message from the server rather then cryptic home grown one
    
    Closes #180

 src/mongoc/mongoc-cluster.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 0cd6c4bba68bf861cd4a01d9b1db8c206a690891
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Feb 26 15:22:11 2015 -0500

    Fixups for mingw
    
    * -no-undefined for priv shared library
    * pull in new version of libbson with a mingw fix

 src/Makefile.am | 5 ++++-
 src/libbson     | 2 +-
 2 files changed, 5 insertions(+), 2 deletions(-)

commit 2929c2d2c856a57ecdfef4d61f8e479b6ef96463
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Feb 19 15:08:57 2015 -0800

    Include the timeout value here like we do elsewhere
    
    Closes #176

 src/mongoc/mongoc-buffer.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 59548f9ecdc7593d7df7ecf0473c82b71c149a91
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Mon Feb 23 09:43:39 2015 -0500

    CDRIVER-531 Correct libbson_required_version to 1.1.0

 build/autotools/Versions.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a838d5b85634ea412d4f20b2c1e37433b117dc46
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Feb 19 10:52:20 2015 -0800

    Remove confusingly useless codepath
    
    The `failure` label starts by setting cursor->failed = true
    irregardless of the failure, so this isn't needed at all
    
    Closes #175

 src/mongoc/mongoc-cursor.c | 4 ----
 1 file changed, 4 deletions(-)

commit 4ebba3d84286df3867bad89358eb6ae956e62a59
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Feb 17 15:00:18 2015 -0500

    CDRIVER-532 - Coalesce small vectorized TLS writes
    
    Rather than calling BIO_write multiple times for each iovec_t in a call
    to mongoc_stream_tls_writev(), buffer them and send them all at once.
    Attempt to "do the right thing"tm, when buffering provides no
    performance benefit.

 src/mongoc/mongoc-stream-tls.c | 157 +++++++++++++++++++++++++++++++++--------
 tests/ssl-test.c               |  19 +++--
 2 files changed, 141 insertions(+), 35 deletions(-)

commit 8f61df9157eac93aedfb890b4eb34e0ef85e6d33
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Wed Feb 18 10:14:33 2015 -0800

    missing trace macros
    
    Closes #173

 src/mongoc/mongoc-bulk-operation.c | 35 ++++++++++++++++++++++++++++++++---
 1 file changed, 32 insertions(+), 3 deletions(-)

commit 86c34de8c93574e8f49032ff2d46222d225aa34e
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Tue Feb 17 23:03:02 2015 -0500

    SDAM rename sdam -> topology for clarity

 CMakeLists.txt                               |   2 +-
 src/mongoc/Makefile.am                       |   8 +-
 src/mongoc/mongoc-client-pool.c              |  48 +-
 src/mongoc/mongoc-client-private.h           |  12 +-
 src/mongoc/mongoc-client.c                   |  32 +-
 src/mongoc/mongoc-cluster.c                  |  21 +-
 src/mongoc/mongoc-cursor.c                   |   4 +-
 src/mongoc/mongoc-sdam-private.h             |  99 -----
 src/mongoc/mongoc-sdam-scanner-private.h     |  96 ----
 src/mongoc/mongoc-sdam-scanner.c             | 391 ----------------
 src/mongoc/mongoc-sdam.c                     | 637 --------------------------
 src/mongoc/mongoc-topology-private.h         | 102 +++++
 src/mongoc/mongoc-topology-scanner-private.h |  96 ++++
 src/mongoc/mongoc-topology-scanner.c         | 396 +++++++++++++++++
 src/mongoc/mongoc-topology.c                 | 641 +++++++++++++++++++++++++++
 src/mongoc/mongoc-write-command.c            |   8 +-
 tests/Makefile.am                            |   2 +-
 tests/test-libmongoc.c                       |   4 +-
 tests/test-mongoc-collection.c               |   4 +-
 tests/test-mongoc-sdam-scanner.c             | 132 ------
 tests/test-mongoc-server-selection.c         |   2 +-
 tests/test-mongoc-topology-scanner.c         | 132 ++++++
 tests/test-replica-set.c                     |   4 +-
 23 files changed, 1444 insertions(+), 1429 deletions(-)

commit 28f9aaea2565b301430cad00e266963271a4da83
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Tue Feb 17 18:15:15 2015 -0500

    SDAM add single-threaded functionality

 src/mongoc/mongoc-async-cmd.c            |   2 +
 src/mongoc/mongoc-client-pool.c          |   7 ++
 src/mongoc/mongoc-client.c               |   6 --
 src/mongoc/mongoc-cluster.c              |   2 +-
 src/mongoc/mongoc-sdam-private.h         |   8 +++
 src/mongoc/mongoc-sdam.c                 | 115 ++++++++++++++++++++++++-------
 src/mongoc/mongoc-topology-description.c |   3 +-
 src/mongoc/mongoc-topology-description.h |   1 +
 8 files changed, 113 insertions(+), 31 deletions(-)

commit 3899113e69b6a884b4e51c0bf52605d1fca041af
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Thu Feb 12 23:32:16 2015 -0500

    SDAM move SS timeout logic up to sdam

 src/mongoc/mongoc-cluster.c              |  6 +----
 src/mongoc/mongoc-sdam-private.h         |  8 +++---
 src/mongoc/mongoc-sdam.c                 | 43 +++++++++++---------------------
 src/mongoc/mongoc-topology-description.c | 41 +++++++++---------------------
 4 files changed, 32 insertions(+), 66 deletions(-)

commit f9c5e5d26fb300c22dc51e66d3188bcc920edf2e
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Thu Feb 12 15:09:05 2015 -0500

    SDAM rebase against master and handle fallout

 src/mongoc/mongoc-async-cmd.c            |   1 +
 src/mongoc/mongoc-async.c                |   2 +-
 src/mongoc/mongoc-sdam-private.h         |   2 +-
 src/mongoc/mongoc-sdam-scanner.c         |  58 ++++++++++++++---
 src/mongoc/mongoc-sdam.c                 | 104 +++++++++++++++++++++++++------
 src/mongoc/mongoc-server-description.c   |  34 ++++++++--
 src/mongoc/mongoc-topology-description.c |  16 ++---
 tests/test-mongoc-client.c               |  15 ++---
 tests/test-mongoc-collection.c           |   2 +-
 tests/test-mongoc-server-selection.c     |   2 +-
 tests/test-replica-set.c                 |   2 -
 11 files changed, 181 insertions(+), 57 deletions(-)

commit b5a798ef0f0f4e7a288fe6253df917e3bcb045a0
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Feb 3 20:13:29 2015 -0500

    Tests passing for server selection

 src/mongoc/mongoc-async-cmd.c            |  19 +++
 src/mongoc/mongoc-async.c                |  40 ++----
 src/mongoc/mongoc-cluster.c              |   1 +
 src/mongoc/mongoc-sdam-private.h         |   1 +
 src/mongoc/mongoc-sdam.c                 |   4 +-
 src/mongoc/mongoc-server-description.c   |  82 ++++++++++-
 src/mongoc/mongoc-server-description.h   |   7 +
 src/mongoc/mongoc-topology-description.c | 238 ++++++++++++++++++++++++-------
 src/mongoc/mongoc-topology-description.h |   9 ++
 tests/test-mongoc-server-selection.c     |  44 +++++-
 10 files changed, 358 insertions(+), 87 deletions(-)

commit dc8ca5636ed4ea7bce9c4ae43df051e03d525eba
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Jan 7 18:14:08 2015 -0500

    Server selection spec tests and harness

 CMakeLists.txt                                     |   2 +
 tests/Makefile.am                                  |   3 +
 tests/json-test.c                                  | 152 +++++++++++
 tests/json-test.h                                  |  39 +++
 tests/json/server_selection/rtt/first_value.json   |   5 +
 .../server_selection/rtt/first_value_zero.json     |   5 +
 tests/json/server_selection/rtt/value_test_1.json  |   5 +
 tests/json/server_selection/rtt/value_test_2.json  |   5 +
 tests/json/server_selection/rtt/value_test_3.json  |   5 +
 tests/json/server_selection/rtt/value_test_4.json  |   5 +
 tests/json/server_selection/rtt/value_test_5.json  |   5 +
 .../ReplicaSetNoPrimary/read/Nearest.json          | 114 ++++++++
 .../read/Nearest_non_matching.json                 |  61 +++++
 .../ReplicaSetNoPrimary/read/Primary.json          |  38 +++
 .../ReplicaSetNoPrimary/read/PrimaryPreferred.json | 112 ++++++++
 .../read/PrimaryPreferred_non_matching.json        |  61 +++++
 .../ReplicaSetNoPrimary/read/Secondary.json        | 114 ++++++++
 .../read/SecondaryPreferred.json                   | 114 ++++++++
 .../read/SecondaryPreferred_non_matching.json      |  61 +++++
 .../read/Secondary_non_matching.json               |  61 +++++
 .../write/SecondaryPreferred.json                  |  40 +++
 .../ReplicaSetWithPrimary/read/Nearest.json        | 154 +++++++++++
 .../read/Nearest_non_matching.json                 |  81 ++++++
 .../ReplicaSetWithPrimary/read/Primary.json        |  92 +++++++
 .../read/PrimaryPreferred.json                     | 132 ++++++++++
 .../read/PrimaryPreferred_non_matching.json        | 103 ++++++++
 .../ReplicaSetWithPrimary/read/Secondary.json      | 124 +++++++++
 .../read/SecondaryPreferred.json                   | 144 ++++++++++
 .../read/SecondaryPreferred_non_matching.json      | 103 ++++++++
 .../read/Secondary_non_matching.json               |  71 +++++
 .../write/SecondaryPreferred.json                  |  94 +++++++
 .../Sharded/read/SecondaryPreferred.json           | 114 ++++++++
 .../Sharded/write/SecondaryPreferred.json          | 114 ++++++++
 .../Single/read/SecondaryPreferred.json            |  74 ++++++
 .../Single/write/SecondaryPreferred.json           |  74 ++++++
 .../Unknown/read/SecondaryPreferred.json           |  19 ++
 .../Unknown/write/SecondaryPreferred.json          |  19 ++
 tests/test-libmongoc.c                             |   2 +
 tests/test-mongoc-server-selection.c               | 290 +++++++++++++++++++++
 39 files changed, 2811 insertions(+)

commit 6525678882eae25d35d226549f87ee7a3f610187
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Jan 5 15:55:11 2015 -0500

    SDAM Fix async test failures

 src/mongoc/mongoc-async-cmd.c | 7 ++++++-
 tests/test-mongoc-async.c     | 7 +++----
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 6d7938db2686462a1bbef285d2a34ebcf3363bfd
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Dec 12 13:38:34 2014 -0500

    SDAM Getting all the tests passing

 src/mongoc/mongoc-async-cmd-private.h    |   1 +
 src/mongoc/mongoc-async-cmd.c            |   9 +-
 src/mongoc/mongoc-async-private.h        |   1 +
 src/mongoc/mongoc-async.c                |   3 +-
 src/mongoc/mongoc-client-private.h       |   6 +
 src/mongoc/mongoc-client.c               |  15 +-
 src/mongoc/mongoc-cluster.c              | 953 ++++++++++++++++++++++++++++++-
 src/mongoc/mongoc-cursor.c               |   3 +
 src/mongoc/mongoc-read-prefs.c           |   1 +
 src/mongoc/mongoc-sdam-private.h         |  35 +-
 src/mongoc/mongoc-sdam-scanner-private.h |   6 +-
 src/mongoc/mongoc-sdam-scanner.c         |  30 +-
 src/mongoc/mongoc-sdam.c                 | 369 ++++++++++--
 src/mongoc/mongoc-server-description.c   | 245 +++++---
 src/mongoc/mongoc-server-description.h   |  30 +-
 src/mongoc/mongoc-set.c                  |   2 +-
 src/mongoc/mongoc-thread-private.h       |  38 +-
 src/mongoc/mongoc-topology-description.c |  89 ++-
 src/mongoc/mongoc-topology-description.h |  32 +-
 src/mongoc/mongoc-write-command.c        |   8 +
 tests/mock-server.c                      |  71 ++-
 tests/ssl-test.c                         | 311 ++++------
 tests/test-mongoc-async.c                |  19 +-
 tests/test-mongoc-client.c               |  13 +-
 tests/test-mongoc-collection.c           |   2 +-
 tests/test-mongoc-sdam-scanner.c         |   8 +-
 26 files changed, 1842 insertions(+), 458 deletions(-)

commit be77cf807b45ee24d4810014831baeef0792a3ea
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Dec 10 17:55:04 2014 -0500

    Glue up tests

 tests/test-mongoc-client.c     |  8 +++----
 tests/test-mongoc-collection.c | 29 ++++++++++++++++++--------
 tests/test-mongoc-read-prefs.c |  8 -------
 tests/test-replica-set.c       | 47 ++++++++++++++++++++++--------------------
 4 files changed, 48 insertions(+), 44 deletions(-)

commit 4ae4b2f242bde482d5a333bdf4f840fea58849ab
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Dec 10 15:57:17 2014 -0500

    fixed up scanner and async interface

 src/mongoc/mongoc-async.c                | 102 ++++++++++++++++++-------------
 src/mongoc/mongoc-sdam-scanner-private.h |   6 +-
 src/mongoc/mongoc-sdam-scanner.c         |  25 +++++++-
 tests/test-mongoc-sdam-scanner.c         |   7 ++-
 4 files changed, 92 insertions(+), 48 deletions(-)

commit 50a8e5daffb52dec989443ee4f6476365e27cb22
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Dec 8 14:12:01 2014 -0500

    SDAM refactor of select methods, networking code

 CMakeLists.txt                           |   2 +
 src/mongoc/Makefile.am                   |   2 +
 src/mongoc/mongoc-client-pool.c          |   4 +-
 src/mongoc/mongoc-client-private.h       |  82 ++--
 src/mongoc/mongoc-client.c               | 122 ++----
 src/mongoc/mongoc-cluster-private.h      |  60 ++-
 src/mongoc/mongoc-cluster.c              | 673 ++++++++++++++++++++++++++++---
 src/mongoc/mongoc-collection.c           |  43 +-
 src/mongoc/mongoc-cursor.c               |  27 +-
 src/mongoc/mongoc-error.h                |   1 +
 src/mongoc/mongoc-opcode-private.h       |  24 ++
 src/mongoc/mongoc-opcode.c               |  62 +++
 src/mongoc/mongoc-read-prefs.c           |   5 -
 src/mongoc/mongoc-sdam-private.h         |  39 +-
 src/mongoc/mongoc-sdam.c                 | 111 ++++-
 src/mongoc/mongoc-server-description.c   |  77 +++-
 src/mongoc/mongoc-server-description.h   |  35 +-
 src/mongoc/mongoc-topology-description.c | 186 +++++----
 src/mongoc/mongoc-topology-description.h |  33 +-
 src/mongoc/mongoc-write-command.c        |  51 ++-
 20 files changed, 1273 insertions(+), 366 deletions(-)

commit f3f445dbd531707f91b14a9e6cec56fcc4306347
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Dec 5 11:56:49 2014 -0500

    SDAM replace node switch with set

 src/mongoc/Makefile.am                  |   4 +-
 src/mongoc/mongoc-cluster-private.h     |   4 +-
 src/mongoc/mongoc-cluster.c             |  15 ++--
 src/mongoc/mongoc-node-switch-private.h |  63 ---------------
 src/mongoc/mongoc-node-switch.c         | 130 -------------------------------
 src/mongoc/mongoc-set-private.h         |  70 +++++++++++++++++
 src/mongoc/mongoc-set.c                 | 132 ++++++++++++++++++++++++++++++++
 tests/Makefile.am                       |   2 +-
 tests/test-libmongoc.c                  |   4 +-
 tests/test-mongoc-node-switch.c         |  50 ------------
 tests/test-mongoc-set.c                 |  64 ++++++++++++++++
 11 files changed, 283 insertions(+), 255 deletions(-)

commit 4e918fca8b68d87f1e93056b51b0c5318b34b576
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Dec 3 15:25:56 2014 -0500

    SDAM basic server selection plumbing

 src/mongoc/mongoc-client-pool.c          | 14 ++++-
 src/mongoc/mongoc-client-private.h       |  7 +++
 src/mongoc/mongoc-client.c               | 77 ++++++++++++++++++++++++-
 src/mongoc/mongoc-cluster.c              | 15 ++---
 src/mongoc/mongoc-sdam-private.h         | 11 +++-
 src/mongoc/mongoc-sdam.c                 | 98 +++++++++++++++++++++++++++++--
 src/mongoc/mongoc-topology-description.c | 99 +++++++++++++++++++-------------
 7 files changed, 260 insertions(+), 61 deletions(-)

commit f11e46c1f5748590663fc6f080caa24fe78166d0
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Dec 3 16:47:17 2014 -0500

    SDAM add a node-switch

 src/mongoc/mongoc-cluster-private.h    |  18 +--
 src/mongoc/mongoc-cluster.c            | 236 ++++++---------------------------
 src/mongoc/mongoc-node-switch.c        |  15 ++-
 src/mongoc/mongoc-read-prefs-private.h |   6 -
 src/mongoc/mongoc-read-prefs.c         | 210 -----------------------------
 tests/Makefile.am                      |   1 +
 tests/test-libmongoc.c                 |   2 +
 tests/test-mongoc-client.c             |   2 -
 tests/test-mongoc-node-switch.c        |  50 +++++++
 9 files changed, 108 insertions(+), 432 deletions(-)

commit c7baa06551712fb619a1cb8404a34d7bcdd83dc7
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Dec 3 14:27:15 2014 -0500

    SDAM Implement a node scanner

 src/mongoc/mongoc-client.c               |   2 +-
 src/mongoc/mongoc-cluster.c              |  12 +-
 src/mongoc/mongoc-sdam-private.h         |   1 -
 src/mongoc/mongoc-sdam-scanner-private.h |  18 ++-
 src/mongoc/mongoc-sdam-scanner.c         | 251 +++++++++++++++++++++++++++----
 src/mongoc/mongoc-server-description.c   |   1 +
 src/mongoc/mongoc-topology-description.h |   2 +-
 src/mongoc/mongoc-uri.h                  |   2 -
 tests/Makefile.am                        |   1 +
 tests/test-libmongoc.c                   |   2 +
 tests/test-mongoc-client.c               |   6 +-
 tests/test-mongoc-read-prefs.c           |   3 +
 tests/test-mongoc-sdam-scanner.c         | 125 +++++++++++++++
 13 files changed, 377 insertions(+), 49 deletions(-)

commit 1c199a90ebe779964655069f2e40fa983c706b32
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Tue Nov 25 16:23:58 2014 -0500

    SDAM Lay groundwork for spec, new classes, refactor

 CMakeLists.txt                           |    3 +
 src/mongoc/Makefile.am                   |    5 +
 src/mongoc/mongoc-client.c               |   27 +-
 src/mongoc/mongoc-cluster-private.h      |  130 +-
 src/mongoc/mongoc-cluster.c              | 2893 ++----------------------------
 src/mongoc/mongoc-collection.c           |   44 +
 src/mongoc/mongoc-cursor.c               |   17 +-
 src/mongoc/mongoc-error.h                |    4 +
 src/mongoc/mongoc-read-prefs-private.h   |    5 +-
 src/mongoc/mongoc-read-prefs.c           |   42 +-
 src/mongoc/mongoc-sdam-private.h         |   42 +
 src/mongoc/mongoc-sdam.c                 |   63 +
 src/mongoc/mongoc-server-description.c   |  211 +++
 src/mongoc/mongoc-server-description.h   |   73 +
 src/mongoc/mongoc-topology-description.c |  776 ++++++++
 src/mongoc/mongoc-topology-description.h |   60 +
 src/mongoc/mongoc-uri.h                  |    3 +-
 src/mongoc/mongoc-write-command.c        |   26 +-
 tests/test-mongoc-client.c               |    6 +-
 tests/test-mongoc-collection.c           |   17 +-
 tests/test-mongoc-read-prefs.c           |    5 +-
 tests/test-replica-set.c                 |   38 +-
 22 files changed, 1585 insertions(+), 2905 deletions(-)

commit 70aeba8358e37d1f9798703cc91c5073d0602551
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Nov 25 15:21:26 2014 -0500

    node switch and sdam scanner work

 src/mongoc/Makefile.am                   |   4 +
 src/mongoc/mongoc-async-cmd.c            |   7 +-
 src/mongoc/mongoc-async-private.h        |   2 +-
 src/mongoc/mongoc-async.c                |  12 ++-
 src/mongoc/mongoc-node-switch-private.h  |  63 +++++++++++++++
 src/mongoc/mongoc-node-switch.c          | 127 +++++++++++++++++++++++++++++++
 src/mongoc/mongoc-sdam-scanner-private.h |  88 +++++++++++++++++++++
 src/mongoc/mongoc-sdam-scanner.c         | 125 ++++++++++++++++++++++++++++++
 8 files changed, 423 insertions(+), 5 deletions(-)

commit 9227e6333812fd757ec3ccdffad63f8a00bd83ee
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Nov 17 15:49:28 2014 -0500

    Basic async framework for commands
    
    Nothing public yet, just a backend for parallel ismaster scans for sdam

 src/mongoc/Makefile.am                |   4 +
 src/mongoc/mongoc-async-cmd-private.h |  92 +++++
 src/mongoc/mongoc-async-cmd.c         | 315 ++++++++++++++
 src/mongoc/mongoc-async-private.h     |  72 ++++
 src/mongoc/mongoc-async.c             | 146 +++++++
 src/mongoc/mongoc-buffer-private.h    |   7 +
 src/mongoc/mongoc-buffer.c            |  60 +++
 src/mongoc/mongoc-client.c            |   4 +
 src/mongoc/mongoc-socket.c            |  73 ++++
 src/mongoc/mongoc-socket.h            |   9 +
 src/mongoc/mongoc-stream-socket.c     |  42 ++
 src/mongoc/mongoc-stream-tls.c        |  64 ++-
 src/mongoc/mongoc-stream-tls.h        |   3 +
 src/mongoc/mongoc-stream.c            |  49 ++-
 src/mongoc/mongoc-stream.h            |  13 +-
 src/mongoc/utlist.h                   | 757 ++++++++++++++++++++++++++++++++++
 tests/Makefile.am                     |   1 +
 tests/mock-server.c                   |  42 ++
 tests/mock-server.h                   |   4 +
 tests/ssl-test.c                      | 311 +++++++++-----
 tests/test-libmongoc.c                |   2 +
 tests/test-mongoc-async.c             | 173 ++++++++
 22 files changed, 2134 insertions(+), 109 deletions(-)

commit 7d8cd7347042dd6616b6503c0ce15e0760f66220
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Feb 11 12:39:07 2015 -0500

    CDRIVER-525 Fix IPv6 support for replica sets
    
    Fix _mongoc_host_list_from_string to correctly handle ipv6 addresses

 src/mongoc/mongoc-uri.c | 43 +++++++++++++++++--------------------------
 1 file changed, 17 insertions(+), 26 deletions(-)

commit 2826632e97adf601491607aef320e3880a01fcdb
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Fri Feb 13 11:34:42 2015 -0500

    Add some notes about new symbols to CONTRIBUTING.md

 CONTRIBUTING.md | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 3436070d3674cceb5f8aafb8606f803a5887b0e8
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Fri Feb 13 11:26:56 2015 -0500

    ABI/documentation fixups for mongoc_bulk_operation_get_write_concern

 build/autotools/versions.ldscript                |  5 ++++
 build/cmake/libmongoc-ssl.def                    |  1 +
 build/cmake/libmongoc.def                        |  1 +
 doc/mongoc_bulk_operation_get_write_concern.page | 37 ++++++++++++++++++++++++
 src/libmongoc.symbols                            |  1 +
 src/mongoc/mongoc-bulk-operation.c               |  5 ++--
 src/mongoc/mongoc-bulk-operation.h               | 24 +++++++--------
 7 files changed, 60 insertions(+), 14 deletions(-)

commit 1bfe68533d31002380d1584649de1dcbdbe5cbee
Author: mschoenlaub <manuel.schoenlaub@gmail.com>
Date:   Tue Feb 3 22:15:13 2015 +0100

    Adds a getter for a bulk op's write concern
    
    Closes #168, CDRIVER-488

 src/mongoc/mongoc-bulk-operation.c |  7 +++++++
 src/mongoc/mongoc-bulk-operation.h | 24 ++++++++++++------------
 2 files changed, 19 insertions(+), 12 deletions(-)

commit a23b88469b0b32a4831deef77510bf21cb54067b
Author: Kai Mast <km676@cornell.edu>
Date:   Wed Feb 11 12:21:48 2015 -0500

    Properly respect message size for bulk operations

 src/mongoc/mongoc-write-command.c | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 64bfb49a59d6d4e9390492326f05bf2417ddeeb8
Author: Kai Mast <km676@cornell.edu>
Date:   Fri Feb 6 11:35:55 2015 -0500

    Merge bulk delete

 src/mongoc/mongoc-write-command.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit fb609f49e3001e164fb1794624985bc49eee9e92
Merge: 6a85531 7e486ef
Author: Kai Mast <km676@cornell.edu>
Date:   Fri Feb 6 11:30:16 2015 -0500

    Merge bulk delete

commit 6a8553180a468e8494a34aafd84535e14a40fc10
Merge: 8d3d01e 24fae28
Author: Kai Mast <km676@cornell.edu>
Date:   Fri Feb 6 11:14:12 2015 -0500

    Merge branch 'master' of https://github.com/mongodb/mongo-c-driver

commit 8d3d01e27620ab981164cd26ab76da10c174b114
Author: Kai Mast <km676@cornell.edu>
Date:   Thu Feb 5 21:21:56 2015 -0500

    Properly respect bulk size

 src/mongoc/mongoc-write-command.c | 25 +++++++------------------
 1 file changed, 7 insertions(+), 18 deletions(-)

commit d2d3e9a32468c0f1a1e98210fed8e5a50198f2ed
Author: Kai Mast <km676@cornell.edu>
Date:   Thu Feb 5 19:00:50 2015 -0500

    n_updates shouldn't be a bitfield

 src/mongoc/mongoc-write-command-private.h | 2 +-
 src/mongoc/mongoc-write-command.c         | 7 +++++--
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 24fae28df5fcdacf82960abc24f7adeaed697dbc
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Thu Feb 5 11:35:46 2015 -0500

    CDRIVER-521 run WT tests conditionally and with correct capitalization

 src/mongoc/mongoc-collection.c |  2 +-
 tests/test-mongoc-collection.c | 53 +++++++++++++++++++++++++++++++++++-------
 2 files changed, 45 insertions(+), 10 deletions(-)

commit 0f6392481de20fcc79e0360de390386f81750780
Merge: 3b8237d 71ee236
Author: Kai Mast <km676@cornell.edu>
Date:   Thu Feb 5 13:11:11 2015 -0500

    Merge https://github.com/kaimast/mongo-c-driver

commit 3b8237de24be210cc7694478da367b1ea663fece
Merge: e562498 220cfee
Author: Kai Mast <km676@cornell.edu>
Date:   Thu Feb 5 13:10:59 2015 -0500

    Merge branch 'master' of https://github.com/mongodb/mongo-c-driver

commit 71ee236e74ff9f0e93a001a8869d09e6ba2c6505
Author: Kai Mast <km676@cornell.edu>
Date:   Thu Feb 5 11:45:48 2015 -0500

    Some steps into respecting proper bulk size

 src/mongoc/mongoc-bulk-operation.c        |   1 +
 src/mongoc/mongoc-error.h                 |   1 +
 src/mongoc/mongoc-write-command-private.h |   1 +
 src/mongoc/mongoc-write-command.c         | 114 +++++++++++++++++++++++++++---
 4 files changed, 106 insertions(+), 11 deletions(-)

commit 23b87e1c85e2d45e5a097c39478a2e3ce85f9a5f
Merge: 220cfee e562498
Author: Kai Mast <km676@cornell.edu>
Date:   Wed Feb 4 22:37:27 2015 -0500

    Merge https://github.com/kaimast/mongo-c-driver

commit 220cfee3fb0936b381d8752cdea4238522656d3d
Author: Denis Gladkikh <denis@gladkikh.email>
Date:   Fri Jan 30 12:04:25 2015 -0800

    In C all variables should be initialized in the beginning of the scope.
    
    Closes #165

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 62f29030557a597c71b32cacabed2c17e2d7946f
Author: Denis Gladkikh <denis@gladkikh.email>
Date:   Thu Aug 28 17:42:12 2014 -0700

    Fix a bug in the C driver where we mistakenly print a NULL value
    
    Closes #166

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e5624981c9df313aceb24d32468910cbbfe38fd5
Author: Kai Mast <km676@cornell.edu>
Date:   Fri Jan 30 17:28:12 2015 -0500

    Support for proper bulk updates

 src/mongoc/mongoc-bulk-operation.c        |  14 +++-
 src/mongoc/mongoc-write-command-private.h |  11 ++-
 src/mongoc/mongoc-write-command.c         | 132 ++++++++++++++++++++----------
 3 files changed, 107 insertions(+), 50 deletions(-)

commit ed4980d00bdaf2957cc41b80c087589aabee6147
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Jan 28 17:53:49 2015 -0500

    post release bump

 CMakeLists.txt                |  4 ++--
 README.rst                    | 12 ++++++------
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 8 files changed, 36 insertions(+), 24 deletions(-)

commit 57c457d871780db0a190eff54e5ac43afbe7caf0
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Jan 28 17:48:13 2015 -0500

    Release 1.1.0
    
    Signed-off-by: Jason Carey (hanumantmk) <jcarey@argv.me>

 CMakeLists.txt                |  2 +-
 NEWS                          | 96 +++++++++++++++++++++++++++++++++++++++++++
 README.rst                    | 10 ++---
 build/rpm/mongo-c-driver.spec | 10 ++++-
 debian/changelog              |  6 +++
 doc/installing.page           | 16 ++++----
 doc/mongoc_version.page       |  4 +-
 src/libbson                   |  2 +-
 8 files changed, 127 insertions(+), 19 deletions(-)

commit 915d268a57eb5c8da21efea6e6cea0611ab40e7b
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Jan 28 13:58:14 2015 -0500

    Fix wsapoll usage on windows
    
    We didn't correctly handle POLLHUP or POLLERR on win32.  Do it right now

 src/mongoc/mongoc-socket.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit ad2baa8409339d57070e6ddb183db0aa0d613d6c
Author: Mark Benvenuto <mark.benvenuto@mongodb.com>
Date:   Tue Jan 27 15:59:53 2015 -0500

    Fix Windows Build
    
    Closes #164

 CMakeLists.txt | 2 ++
 1 file changed, 2 insertions(+)

commit d6ddd15b63ebc9fb340bbaf23ab543e14cbdbc59
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Jan 27 16:43:20 2015 -0500

    CDRIVER-518 fix unix domain socket support
    
    + some fixes for the relevant documentation

 doc/advanced-connections.page |  2 +-
 doc/mongoc_uri_new.page       |  2 +-
 src/mongoc/mongoc-client.c    |  2 +-
 tests/test-mongoc-socket.c    |  3 ---
 tests/test-mongoc-uri.c       | 14 +++++++-------
 5 files changed, 10 insertions(+), 13 deletions(-)

commit fcfe613be4083d62f26cbc66e954351a250f9018
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Jan 27 15:04:55 2015 -0500

    CDRIVER-508 namespace b64_ functions
    
    We really shouldn't be kicking around non-static b64_ functions.
    Namespace them all and let's be done with it.

 src/mongoc/mongoc-b64-private.h | 16 ++++-----
 src/mongoc/mongoc-b64.c         | 72 ++++++++++++++++++++---------------------
 src/mongoc/mongoc-cluster.c     |  2 +-
 src/mongoc/mongoc-scram.c       | 20 ++++++------
 4 files changed, 55 insertions(+), 55 deletions(-)

commit 224a27ed025d7beba3f204bd7e37c19e07c37437
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Jan 27 14:26:28 2015 -0500

    CDRIVER-500 get rid of non-prefixed macros
    
    Namespace MAX, MIN and ABS from libbson.  None of those should have been
    going out over public headers, so we roll that back.
    
    This is a small source compatibility break.

 src/libbson                          | 2 +-
 src/mongoc/mongoc-client-pool.c      | 4 ++--
 src/mongoc/mongoc-counters.c         | 2 +-
 src/mongoc/mongoc-cursor.c           | 2 +-
 src/mongoc/mongoc-gridfs-file-page.c | 8 ++++----
 src/mongoc/mongoc-gridfs-file.c      | 2 +-
 src/mongoc/mongoc-write-command.c    | 2 +-
 tests/test-load.c                    | 2 +-
 8 files changed, 12 insertions(+), 12 deletions(-)

commit 030eee408235a8ad8d62c654b7086a0d47c789fb
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Jan 27 13:43:18 2015 -0500

    CDRIVER-482 mongoc_cursor_clone() ignores fields
    
    Correctly propogate the fields parameter in copied cursors.  We copied
    the bson, but not the flag that indicated that we'd actually set
    something.

 src/mongoc/mongoc-cursor.c | 1 +
 1 file changed, 1 insertion(+)

commit 85ffd27871c6980de0ff3d84f55cfc4210069806
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Jan 26 13:59:20 2015 -0500

    Some fixups for PR-151
    
    o We need to pre-include mongoc-config to pick up MONGOC_ENABLE_X
    o Comment out implementation for b64_pton as well
    
    Closes #151

 src/mongoc/mongoc-b64.c        | 4 ++++
 src/mongoc/mongoc-rand.c       | 2 ++
 src/mongoc/mongoc-sasl.c       | 2 ++
 src/mongoc/mongoc-scram.c      | 2 ++
 src/mongoc/mongoc-ssl.c        | 2 ++
 src/mongoc/mongoc-stream-tls.c | 2 ++
 6 files changed, 14 insertions(+)

commit 62cf2a01a2520cdcdd585b9b2ae2f986ef91953d
Author: Paul Melnikow <email@paulmelnikow.com>
Date:   Mon Dec 29 02:07:36 2014 -0500

    Conditionally compile SSL and SASL
    
    This allows building *.[ch] even when libssl and/or libsasl are not available.
    
    This helps get the library to build for iOS, and similarly would be helpful for building the library under any third-party build system.
    
    Sort of an aside: on Mac OS libssl is deprecated. iOS has never shipped with it. On Mac OS the headers are in /usr/include but aren't available when building an iOS project.
    
    Ideally, someday, libmongoc would support both libssl and Common Crypto, Apple's implementation.

 src/mongoc/mongoc-b64-private.h | 2 ++
 src/mongoc/mongoc-rand.c        | 4 ++++
 src/mongoc/mongoc-sasl.c        | 3 +++
 src/mongoc/mongoc-scram.c       | 3 +++
 src/mongoc/mongoc-ssl.c         | 3 +++
 src/mongoc/mongoc-stream-tls.c  | 3 +++
 6 files changed, 18 insertions(+)

commit 3f270340e66c94b5ff793e4072a4cd4479f5c19d
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Wed Jan 14 02:35:12 2015 -0600

    Fix access violation when error == NULL in mongoc_database_find_collections
    
    Closes #161

 src/mongoc/mongoc-database.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 4e4d8a5aab9535663b789be2605623da0c1bc235
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Thu Jan 8 18:13:51 2015 -0500

    CDRIVER-414: Add "How To Ask For Help" to README.
    
    Closes #160

 README.rst | 46 ++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 44 insertions(+), 2 deletions(-)

commit f4e5adb3919afdd7bf383bb3dcbb9bbb89f0cce5
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Tue Dec 23 10:04:28 2014 -0600

    Fix empty errors if mongoc_database_remove_user\mongoc_database_remove_all_users fails
    
    Closes #146

 src/mongoc/mongoc-database.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 7a743b68c480b1f3fb10d06d1e3ffd70271f4fd6
Author: Paul Melnikow <email@paulmelnikow.com>
Date:   Sat Dec 27 01:09:17 2014 -0500

    Clear warnings 'Implicit conversion loses integer precision'
    
    Closes #150

 src/mongoc/mongoc-scram.c  | 14 +++++++-------
 src/mongoc/mongoc-socket.c |  2 +-
 2 files changed, 8 insertions(+), 8 deletions(-)

commit f34fe0b0bafbd809c0ae09bbaed861746226cbc4
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Jan 7 17:13:07 2015 -0500

    Fix warnings for mongoc-b64
    
    Implementation in headers is bad.  Separate out the implementation and
    file scoped statics into a .c and pull the necessary function definitions
    out into the associated -private.h

 CMakeLists.txt                  |   1 +
 src/mongoc/Makefile.am          |   1 +
 src/mongoc/mongoc-b64-private.h | 527 ++--------------------------------------
 src/mongoc/mongoc-b64.c         | 517 +++++++++++++++++++++++++++++++++++++++
 4 files changed, 546 insertions(+), 500 deletions(-)

commit 3fdc58d081d9a38035734a060dadedd8b2863cef
Author: Spencer Jackson <spencer.jackson@mongodb.com>
Date:   Thu Oct 30 12:44:52 2014 -0400

    CDRIVER-451 Run make check
    
    Closes #116

 .mci.yml | 60 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 58 insertions(+), 2 deletions(-)

commit 3a06949d3600dc8e4d9e786ede35559f0fd0069f
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Jan 7 15:41:47 2015 -0500

    bson_concat instead of iter for writeConcernError
    
    bson_concat is a more straight forward memcpy than using bson_value with
    iteration.
    
    Closes #147

 src/mongoc/mongoc-write-command.c | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

commit 4d6caf2eb95662a18ece9c7ff7633ea6a81264e5
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Tue Dec 23 10:49:39 2014 -0800

    CDRIVER-492: Report WriteConcern error on writes
    
    Renamed the field, and fixed the failure check.
    There can only ever be one WriteConcernError, which is a bson object
    containing the code (int), errInfo (object) and errmsg (cstring),
    so there is no arrays to merge.

 src/mongoc/mongoc-write-command-private.h |  2 +-
 src/mongoc/mongoc-write-command.c         | 27 +++++++++++++++++----------
 2 files changed, 18 insertions(+), 11 deletions(-)

commit 170e6c7aeb204e489ca74bcecabb2e3493a5b08e
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Mon Jan 5 10:17:36 2015 +0200

    Change mongoc_gridfs_file_seek delta type from uint64_t to int64_t
    
    Closes #153

 doc/mongoc_gridfs_file_seek.page | 2 +-
 src/mongoc/mongoc-gridfs-file.c  | 2 +-
 src/mongoc/mongoc-gridfs-file.h  | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 2cac8f42c151c01f13cc5bca3ac65d34912c4c1d
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Mon Dec 22 11:43:13 2014 -0800

    CDRIVER-489: Use the provided username, if available for X.509 auth
    
    Falls back to extracting the subject from the cert for backwards
    compatibility
    
    Closes #145

 src/mongoc/mongoc-cluster.c | 28 ++++++++++++++++++----------
 1 file changed, 18 insertions(+), 10 deletions(-)

commit e42287710db3ee3aa7412a804d32d78d119d6198
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Jan 6 17:53:56 2015 -0500

    Fix for gridfs file seek
    
    gridfs file seek had incorrect handling for detecting page migration.
    Fixed a potential segfault and the underlying conditional.
    
    Fixes #155

 src/mongoc/mongoc-gridfs-file.c | 3 ++-
 tests/test-mongoc-gridfs.c      | 7 +++++++
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 9bb5a074f4fd804338143fb90fb0f1cae3056820
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Mon Dec 29 02:25:35 2014 -0600

    Update mongoc_index_opt_t doc

 doc/mongoc_index_opt_t.page | 26 ++++++++++++++------------
 1 file changed, 14 insertions(+), 12 deletions(-)

commit a5c7ab7370067b9493ab53a276bcfad2a8da8452
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Tue Dec 23 14:41:06 2014 -0500

    minor: add missing semicolons to versions.ldscript
    
    fixes #148

 build/autotools/versions.ldscript | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 22878713b09e536a2e1c8ac79ccfa4b10abc919b
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Tue Dec 23 13:53:13 2014 -0500

    pulling in latest libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd2616deaea071752d4c04aabec0611f7b5ccb59
Merge: affbaf7 2784834
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Mon Dec 22 11:00:38 2014 -0500

    Merge pull request #144 from ajdavis/mutated
    
    Typo in doc for _mongoc_cluster_sendv.

commit 2784834d69dcf454355bf7dc7572267a88e35e22
Author: A. Jesse Jiryu Davis <jesse@mongodb.com>
Date:   Mon Dec 22 09:56:23 2014 -0600

    Typo in doc for _mongoc_cluster_sendv.

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit affbaf7be2a48e66601f60e47e94950ae2263a93
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Fri Dec 19 19:05:42 2014 +0100

    should use the right buffer size

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2ca3976b3b45f8bb7f27a8c82ff93c5e90250fdc
Author: lloydzhou <lloydzhou@qq.com>
Date:   Wed Dec 3 03:11:57 2014 +0800

    add wrap function 'mongoc_stream_write'.
    
    Closes #130

 build/autotools/versions.ldscript |  2 ++
 build/cmake/libmongoc-ssl.def     |  2 ++
 build/cmake/libmongoc.def         |  2 ++
 doc/mongoc_stream_read.page       |  1 +
 doc/mongoc_stream_readv.page      |  1 +
 doc/mongoc_stream_write.page      | 53 +++++++++++++++++++++++++++++++++++++++
 src/libmongoc.symbols             |  1 +
 src/mongoc/mongoc-stream.c        | 34 +++++++++++++++++++++++++
 src/mongoc/mongoc-stream.h        |  4 +++
 9 files changed, 100 insertions(+)

commit 7587d7213069cc1d9f513821f573878114e6d748
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Dec 18 18:32:23 2014 -0800

    CDRIVER-487: Missing entry calls
    
    Closes #142

 src/mongoc/mongoc-cursor.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit cbe6b337bac2c45f245eadc0f61759912b4471a0
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Fri Dec 19 09:04:44 2014 -0800

    CDRIVER-485: Invalid read on authentication failure
    
    Closes #141

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ede394703e2e2b5e7512cd88a68eef0f6692041
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Dec 18 18:31:55 2014 -0800

    CDRIVER-486: There is no need to depend on sasl for PLAIN authentication
    
    Closes #140

 src/mongoc/mongoc-cluster.c | 15 ++++++---------
 1 file changed, 6 insertions(+), 9 deletions(-)

commit c7353570b72ee1e07d3b7b90955efacee9da2a6b
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Fri Nov 21 13:27:40 2014 -0800

    Missing entry call
    
    Was interesting seeing tracing leaving a function it didn't enter
    
    Closes #123

 src/mongoc/mongoc-cursor.c | 2 ++
 1 file changed, 2 insertions(+)

commit da5dc19990607c8a6a0583b602c2d6353d271737
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Wed Nov 19 19:04:38 2014 +0200

    Fix link error while compiling using vs10 on windows without openssl:
    error LNK2001: unresolved external symbol mongoc_rand_add	libmongoc.def
    
    Closes #119

 build/cmake/libmongoc.def | 3 ---
 1 file changed, 3 deletions(-)

commit e1eef85ea7cca56430916275fdf529d5ce08b96b
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Wed Nov 19 18:56:00 2014 +0200

    Fix error while compile using vs10 on windows:
    mongoc-database.c(687): error C2275: 'bson_string_t' : illegal use of this type as an expression
    
    Closes #117

 src/mongoc/mongoc-database.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 83817ceaf56c7398eb19a338bb783f1c5b81c19b
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Thu Oct 9 21:02:22 2014 +0200

    making public DEFAULT_SOCKET_TIMEOUT_MSEC and changing the name to match MONGOC_DEFAULT_CONNECTTIMEOUTMS
    
    Closes #95

 src/mongoc/mongoc-client.h  | 13 +++++++++++++
 src/mongoc/mongoc-cluster.c | 17 ++---------------
 2 files changed, 15 insertions(+), 15 deletions(-)

commit d3c4a79ecbcac1777ddacc8120d89d661dca436d
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Dec 19 11:53:32 2014 -0500

    abi additions and small cleanup

 build/autotools/versions.ldscript | 2 ++
 build/cmake/libmongoc-ssl.def     | 2 ++
 build/cmake/libmongoc.def         | 2 ++
 src/libmongoc.symbols             | 2 ++
 src/mongoc/mongoc-collection.c    | 2 ++
 src/mongoc/mongoc-cursor-array.c  | 2 +-
 6 files changed, 11 insertions(+), 1 deletion(-)

commit fe80a5299b19dbf1a53701fc02790eb31338ed62
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Mon Oct 6 17:45:59 2014 +0200

    Improved warnings on failure to connect
    
    Adding a warning (with the error message) when can't connect to a host.
    And adding the host name into the error message when failed.
    
    Closes #91

 build/autotools/versions.ldscript |  1 +
 build/cmake/libmongoc-ssl.def     |  1 +
 build/cmake/libmongoc.def         |  1 +
 src/libmongoc.symbols             |  1 +
 src/mongoc/mongoc-client.c        | 13 ++++++++----
 src/mongoc/mongoc-socket.c        | 43 +++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-socket.h        |  3 +++
 7 files changed, 59 insertions(+), 4 deletions(-)

commit 11dbdc84643d0e0a4088a94edec1c10004366a61
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Sep 8 17:08:10 2014 -0700

    exit on failure
    
    Closes #71

 autogen.sh | 1 +
 1 file changed, 1 insertion(+)

commit 13cb98fe82d0b512c478172efede0cc913e78383
Author: Shraya Ramani <shraya.ramani@10gen.com>
Date:   Tue Nov 25 15:30:43 2014 -0500

    CDRIVER-471 Validation for wt opts for collection
    
    Added in validation for wiredtiger storage options to createCollection.
    
    Closes #127

 src/mongoc/mongoc-database.c | 39 +++++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-database.c | 10 ++++++++++
 2 files changed, 49 insertions(+)

commit 44c345ea4a8c94f31bfb188e09705a73ace76237
Author: Shraya Ramani <shraya.ramani@10gen.com>
Date:   Tue Nov 25 15:30:43 2014 -0500

    CDRIVER-470 added wiredtiger index options
    
    Closes #126

 build/autotools/versions.ldscript |  2 ++
 build/cmake/libmongoc-ssl.def     |  2 ++
 build/cmake/libmongoc.def         |  2 ++
 src/libmongoc.symbols             |  2 ++
 src/mongoc/mongoc-collection.c    | 19 ++++++++++++++++
 src/mongoc/mongoc-index.c         | 19 ++++++++++++++++
 src/mongoc/mongoc-index.h         | 48 +++++++++++++++++++++++++++------------
 tests/test-mongoc-collection.c    | 42 ++++++++++++++++++++++++++++++++++
 8 files changed, 122 insertions(+), 14 deletions(-)

commit 08cbe7621a64847792da091693268846aaf283f5
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Dec 15 13:59:31 2014 -0500

    Check for closed sockets before attempting a rpc
    
    Ensure that the socket we've selected has been read from within a
    second.  If it hasn't, check if it's closed by polling for readability
    and if that works, MSG_PEEK'ing a single byte.  If we get eof, or an
    error, we can assume it's broken.  This lets us avoid a large class of
    transient network failures.
    
    Closes #136

 src/mongoc/mongoc-cluster-private.h |   1 +
 src/mongoc/mongoc-cluster.c         |  42 +++++---
 src/mongoc/mongoc-socket.c          |  25 +++++
 src/mongoc/mongoc-socket.h          |   1 +
 src/mongoc/mongoc-stream-buffered.c |  10 ++
 src/mongoc/mongoc-stream-file.c     |   8 ++
 src/mongoc/mongoc-stream-gridfs.c   |   8 ++
 src/mongoc/mongoc-stream-socket.c   |  18 ++++
 src/mongoc/mongoc-stream-tls.c      |  10 ++
 src/mongoc/mongoc-stream.c          |  15 +++
 src/mongoc/mongoc-stream.h          |   4 +-
 tests/Makefile.am                   |   1 +
 tests/test-libmongoc.c              |   2 +
 tests/test-mongoc-socket.c          | 188 ++++++++++++++++++++++++++++++++++++
 14 files changed, 320 insertions(+), 13 deletions(-)

commit 4d4316eae378ba5c61e8f71781a178a1f03c2125
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Dec 18 10:50:35 2014 -0500

    get_*_info -> find_*

 build/autotools/versions.ldscript            | 18 +++++------
 build/cmake/libmongoc-ssl.def                |  6 ++--
 build/cmake/libmongoc.def                    |  6 ++--
 doc/mongoc_collection_find_indexes.page      | 45 +++++++++++++++++++++++++++
 doc/mongoc_collection_get_index_info.page    | 45 ---------------------------
 doc/mongoc_database_find_collections.page    | 46 ++++++++++++++++++++++++++++
 doc/mongoc_database_get_collection_info.page | 46 ----------------------------
 src/libmongoc.symbols                        | 10 +++---
 src/mongoc/mongoc-client.c                   |  6 ++--
 src/mongoc/mongoc-client.h                   |  2 +-
 src/mongoc/mongoc-collection-private.h       |  2 +-
 src/mongoc/mongoc-collection.c               | 10 +++---
 src/mongoc/mongoc-collection.h               |  2 +-
 src/mongoc/mongoc-database-private.h         |  2 +-
 src/mongoc/mongoc-database.c                 | 39 +++++++++++++----------
 src/mongoc/mongoc-database.h                 |  2 +-
 tests/test-mongoc-collection.c               |  6 ++--
 tests/test-mongoc-database.c                 |  2 +-
 18 files changed, 148 insertions(+), 147 deletions(-)

commit 2039d72dd8dbaad071ff443d9334386b33d781c1
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Dec 5 17:27:09 2014 -0500

    Support for cursors in crud metadata

 build/autotools/versions.ldscript            |   3 +-
 build/cmake/libmongoc-ssl.def                |   1 +
 build/cmake/libmongoc.def                    |   1 +
 src/libmongoc.symbols                        |   1 +
 src/mongoc/Makefile.am                       |   2 +
 src/mongoc/mongoc-client.c                   |  56 ++++---
 src/mongoc/mongoc-client.h                   |   2 +
 src/mongoc/mongoc-collection-private.h       |   2 +-
 src/mongoc/mongoc-collection.c               | 159 +++++++-------------
 src/mongoc/mongoc-collection.h               |   2 +-
 src/mongoc/mongoc-cursor-array-private.h     |  12 +-
 src/mongoc/mongoc-cursor-array.c             |  97 ++++++++++--
 src/mongoc/mongoc-cursor-cursorid-private.h  |   1 +
 src/mongoc/mongoc-cursor-cursorid.c          |  88 ++++++-----
 src/mongoc/mongoc-cursor-transform-private.h |  59 ++++++++
 src/mongoc/mongoc-cursor-transform.c         | 165 +++++++++++++++++++++
 src/mongoc/mongoc-database-private.h         |   2 +-
 src/mongoc/mongoc-database.c                 | 211 +++++++++++++++------------
 src/mongoc/mongoc-database.h                 |   2 +-
 tests/test-mongoc-collection.c               | 106 ++++++--------
 tests/test-mongoc-database.c                 |  37 ++---
 21 files changed, 648 insertions(+), 361 deletions(-)

commit 43295551342a53359a761487815852b81d29621a
Author: Shraya Ramani <shraya.ramani@10gen.com>
Date:   Tue Nov 25 15:30:43 2014 -0500

    changed test for db error messages reflecting changes in server
    
    Closes #125

 tests/test-mongoc-database.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0be19d062d2afb04743906bd8742c741c2bb247b
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Thu Dec 4 15:45:05 2014 +0200

    Fix wrong fwrite arguments order in example
    
    Closes #132

 examples/example-gridfs.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8e5021f48249259ba8b6448970e7e66d10ab2fe4
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Mon Dec 8 15:27:50 2014 +0200

    fix mem leak in example
    
    Closes #133

 examples/example-gridfs.c | 1 +
 1 file changed, 1 insertion(+)

commit 5e7d5b43089eda9928e374e8602b152cac4a68d6
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Mon Dec 8 15:29:52 2014 +0200

    Pass mode parameter on windows
    
    Closes #134

 src/mongoc/mongoc-stream-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9a11d6edb58f3064ec6b5f3fcba93d6299a29c31
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Mon Dec 1 18:24:41 2014 -0500

    housekeeping (abi/api)
    
    int64_t cursor_ids and adding some new functions to the external abi

 build/autotools/versions.ldscript | 8 ++++++++
 build/cmake/libmongoc-ssl.def     | 4 ++++
 build/cmake/libmongoc.def         | 4 ++++
 src/libmongoc.symbols             | 4 ++++
 src/mongoc/mongoc-cursor.c        | 2 +-
 src/mongoc/mongoc-cursor.h        | 2 +-
 6 files changed, 22 insertions(+), 2 deletions(-)

commit 8e3de2c37109e5a720eafd36b095b0fe9edc2235
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Wed Nov 19 15:32:10 2014 -0800

    CDRIVER-466: Add mongoc_cursor_get_id()
    
    These can be retrieved by calling currentOp, but its impossible to map
    them to specific cursor. We can just as well expose the id rather then
    having the user guessing
    
    Closes #122

 src/mongoc/mongoc-cursor.c | 7 +++++++
 src/mongoc/mongoc-cursor.h | 1 +
 2 files changed, 8 insertions(+)

commit 6dbd8d893803557cdaecec35e4241337b5bd58b5
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Wed Nov 19 13:52:27 2014 -0800

    CDRIVER-465: Add mongoc_client_kill_cursor()
    
    A good samaritan should clean after himself using
    mongoc_cursor_destroy(cursor), but you may not always have the cursor instance.
    You are just trying to cleanup after a broken process, and all you got is
    the cursorid, which you retrieved from db.currentOp()
    
    Closes #121

 src/mongoc/mongoc-client.c | 24 ++++++++++++++++++++++++
 src/mongoc/mongoc-client.h |  2 ++
 src/mongoc/mongoc-cursor.c | 28 ++--------------------------
 3 files changed, 28 insertions(+), 26 deletions(-)

commit 0807e049f04ac662c2df63571f81fbc6f0a890cf
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Wed Nov 19 13:42:19 2014 -0800

    CDRIVER-464: Add function to retrieve and set batch_size
    
    The batch size needs to be tweakable between getmores
    
    Added:
    uint32_t mongoc_cursor_get_batch_size (const mongoc_cursor_t *cursor)
    void mongoc_cursor_set_batch_size (mongoc_cursor_t *cursor, uint32_t batch_size)
    
    Closes #120

 src/mongoc/mongoc-cursor.c | 16 ++++++++++++++++
 src/mongoc/mongoc-cursor.h |  3 +++
 2 files changed, 19 insertions(+)

commit 96d48e98e95fdb5066706f392057ff853c83c259
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Nov 13 15:24:28 2014 -0500

    1.1.0-rc0 release
    
    Signed-off-by: Jason Carey (hanumantmk) <jcarey@argv.me>

 CMakeLists.txt                |  6 ++---
 NEWS                          | 57 +++++++++++++++++++++++++++++++++++++++++--
 README.rst                    | 10 ++++----
 build/autotools/Versions.m4   |  8 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++--
 debian/changelog              |  6 +++++
 doc/installing.page           | 16 ++++++------
 doc/mongoc_version.page       | 10 ++++----
 src/libbson                   |  2 +-
 9 files changed, 95 insertions(+), 30 deletions(-)

commit 2b7bb42cf8b82ccafddd97ca4f457a15ea9c8423
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Nov 13 13:17:43 2014 -0500

    doc and abi fixes

 doc/mongoc_collection_count_with_opts.page | 2 +-
 doc/mongoc_collection_get_index_info.page  | 2 +-
 src/libmongoc.symbols                      | 2 ++
 3 files changed, 4 insertions(+), 2 deletions(-)

commit d29f17b1fdfce27d4c35203f32bc2215fc59a0bf
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Nov 12 18:07:46 2014 -0500

    support abi versioning in minor numbers

 build/autotools/LDVersionScript.m4 |  55 +++++++++
 build/autotools/versions.ldscript  | 232 +++++++++++++++++++++++++++++++++++++
 configure.ac                       |   1 +
 src/Makefile.am                    |   7 +-
 4 files changed, 294 insertions(+), 1 deletion(-)

commit 8310f4d79613b87b63260ca600e54c59fc871a32
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Nov 7 17:29:52 2014 -0500

    Assorted fixes for win32
    
    missing mongoc-rand.c in cmakelists.txt
    missing some symbols from *.def files

 CMakeLists.txt                |  4 ++++
 build/cmake/libmongoc-ssl.def | 12 +++++++++++-
 build/cmake/libmongoc.def     | 10 +++++++++-
 src/mongoc/mongoc-rand.c      |  7 +++----
 4 files changed, 27 insertions(+), 6 deletions(-)

commit eb8562f744965b319ff0fbf9593f9a43fb42eef1
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Nov 7 15:43:01 2014 -0500

    various fixes
    
    o fixed some broken documentaiton
    o skip geo index tests on old revs of mongod
    o pull a new version of libbson

 doc/mongoc_collection_get_index_info.page    |  3 ---
 doc/mongoc_database_get_collection_info.page |  3 ---
 src/libbson                                  |  2 +-
 tests/test-mongoc-collection.c               | 20 ++++++++++++--------
 4 files changed, 13 insertions(+), 15 deletions(-)

commit eff245d8f017f92d13d4bac500f6650880937afd
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Mon Nov 3 15:28:14 2014 -0500

    CDRIVER-437 Add authMechanismProperties to URI
    
    Closes #111

 build/cmake/libmongoc-ssl.def |   2 +
 src/libmongoc.symbols         |   2 +
 src/mongoc/mongoc-uri.c       | 174 ++++++++++++++++++++++++++++++++++++------
 src/mongoc/mongoc-uri.h       |  39 +++++-----
 tests/test-mongoc-uri.c       | 142 +++++++++++++++++++++++++++++++---
 5 files changed, 307 insertions(+), 52 deletions(-)

commit 26c1e52172de97fec4122e83f784ea3a8c6716cc
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Nov 6 14:33:07 2014 -0500

    upgraded valgrind target with suppressions

 tests/Makefile.am     |  2 +-
 valgrind.suppressions | 47 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 48 insertions(+), 1 deletion(-)

commit 75f4a9d3964547de3f183e58ac981a987104deae
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Nov 6 11:45:32 2014 -0500

    fix a warning and some screwy error reporting

 examples/example-scram.c    | 1 +
 src/mongoc/mongoc-cluster.c | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit f6c7c1aa72ad8d85156a78aa3a7fc8cecb63a077
Author: aherlihy <anna.herlihy@10gen.com>
Date:   Wed Nov 5 14:00:12 2014 -0500

    CDRIVER-443 added validate to bulk_insert
    
    Closes #113

 src/mongoc/mongoc-collection.c | 22 ++++++++++++++++++++++
 tests/test-mongoc-collection.c | 15 +++++++++++++++
 2 files changed, 37 insertions(+)

commit 021a050ef5705515acb7e391b0bfe9950f17cee1
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Fri Oct 31 15:50:32 2014 -0400

    CDRIVER-446 Fix a leak in mongoc_client_command_simple()
    
    fix a leak in mongoc_client_command_simple().
    
    Fix some other random leaks while we're at it
    
    Closes #110

 src/mongoc/mongoc-collection.c | 15 +++++++--------
 src/mongoc/mongoc-database.c   | 14 ++++++--------
 tests/test-bulk.c              |  1 +
 tests/test-mongoc-collection.c |  9 +++++++--
 tests/test-mongoc-cursor.c     |  3 +--
 5 files changed, 22 insertions(+), 20 deletions(-)

commit bb0e10815c5b88fafd87ae9ac0712b9ab4647145
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Nov 4 11:03:52 2014 -0500

    CDRIVER-453 remove replica set member limit
    
    o Make the number of replica set member nodes dynamic.
    o Fix some of the sharding and replica set tests.
    o Fix a bug in socket error reporting
    
    Closes #112

 src/libbson                         |   2 +-
 src/mongoc/mongoc-client.c          |   2 +-
 src/mongoc/mongoc-cluster-private.h |   4 +-
 src/mongoc/mongoc-cluster.c         | 112 ++++++++++++++++++++++++------------
 src/mongoc/mongoc-socket.c          |   2 +
 tests/ha-test.c                     |   6 +-
 tests/test-replica-set.c            |   2 +-
 7 files changed, 87 insertions(+), 43 deletions(-)

commit ae1e2203db63206ddd1885e2bfb6312b606dacf8
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Tue Nov 4 14:14:04 2014 -0500

    pulling in latest libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2c85418147f7aff7b9ae3a168e3eb726ee6e6f43
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Thu Oct 30 17:33:48 2014 -0400

    CDRIVER-360 add additional geo index options
    
    Closes #109

 NEWS                           |   6 +++
 build/cmake/libmongoc.def      |   2 +
 src/libmongoc.symbols          |   2 +
 src/mongoc/mongoc-collection.c |  43 ++++++++++++++--
 src/mongoc/mongoc-index.c      |  21 ++++++++
 src/mongoc/mongoc-index.h      |  40 ++++++++++-----
 tests/test-mongoc-collection.c | 114 +++++++++++++++++++++++++++++++++++++++++
 7 files changed, 210 insertions(+), 18 deletions(-)

commit 9060c73449946a9b84de77288d72b5b4179ddb2f
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Thu Oct 30 17:19:11 2014 -0400

    don't use sasl_client_done on OSX Yosemite
    
    it looks like the provided libsasl2 on Yosemite isn't quite right (it
    reports a sasl_version of 2.1.26, but doesn't provide all the symbols
    that version should provide out of the actual dylib).  Conditionally
    skipping calling that function for now on OS X.

 src/mongoc/mongoc-sasl.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b5b3de81402a2f99501746a9212a9118cb98f5f0
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Thu Oct 30 15:02:47 2014 -0400

    CDRIVER-427 move header include guard above checks

 src/mongoc/mongoc-array-private.h            | 7 ++-----
 src/mongoc/mongoc-buffer-private.h           | 7 ++-----
 src/mongoc/mongoc-bulk-operation-private.h   | 7 ++-----
 src/mongoc/mongoc-client-pool.h              | 7 ++-----
 src/mongoc/mongoc-client-private.h           | 7 ++-----
 src/mongoc/mongoc-client.h                   | 7 ++-----
 src/mongoc/mongoc-cluster-private.h          | 7 ++-----
 src/mongoc/mongoc-collection-private.h       | 7 ++-----
 src/mongoc/mongoc-collection.h               | 7 ++-----
 src/mongoc/mongoc-counters-private.h         | 7 ++-----
 src/mongoc/mongoc-cursor-array-private.h     | 7 ++-----
 src/mongoc/mongoc-cursor-cursorid-private.h  | 7 ++-----
 src/mongoc/mongoc-cursor-private.h           | 7 ++-----
 src/mongoc/mongoc-cursor.h                   | 7 ++-----
 src/mongoc/mongoc-database-private.h         | 7 ++-----
 src/mongoc/mongoc-database.h                 | 7 ++-----
 src/mongoc/mongoc-errno-private.h            | 7 ++-----
 src/mongoc/mongoc-error.h                    | 7 ++-----
 src/mongoc/mongoc-flags.h                    | 7 ++-----
 src/mongoc/mongoc-gridfs-file-list-private.h | 7 ++-----
 src/mongoc/mongoc-gridfs-file-list.h         | 7 ++-----
 src/mongoc/mongoc-gridfs-file-page-private.h | 7 ++-----
 src/mongoc/mongoc-gridfs-file-page.h         | 7 ++-----
 src/mongoc/mongoc-gridfs-file-private.h      | 7 ++-----
 src/mongoc/mongoc-gridfs-file.h              | 7 ++-----
 src/mongoc/mongoc-gridfs-private.h           | 7 ++-----
 src/mongoc/mongoc-gridfs.h                   | 7 ++-----
 src/mongoc/mongoc-host-list-private.h        | 7 ++-----
 src/mongoc/mongoc-host-list.h                | 7 ++-----
 src/mongoc/mongoc-index.h                    | 7 ++-----
 src/mongoc/mongoc-init.h                     | 7 ++-----
 src/mongoc/mongoc-list-private.h             | 7 ++-----
 src/mongoc/mongoc-log.h                      | 7 ++-----
 src/mongoc/mongoc-matcher-op-private.h       | 7 ++-----
 src/mongoc/mongoc-matcher-private.h          | 7 ++-----
 src/mongoc/mongoc-matcher.h                  | 7 ++-----
 src/mongoc/mongoc-opcode.h                   | 7 ++-----
 src/mongoc/mongoc-queue-private.h            | 7 ++-----
 src/mongoc/mongoc-read-prefs-private.h       | 7 ++-----
 src/mongoc/mongoc-read-prefs.h               | 7 ++-----
 src/mongoc/mongoc-rpc-private.h              | 7 ++-----
 src/mongoc/mongoc-sasl-private.h             | 7 ++-----
 src/mongoc/mongoc-socket.h                   | 8 ++------
 src/mongoc/mongoc-ssl-private.h              | 7 ++-----
 src/mongoc/mongoc-ssl.h                      | 7 ++-----
 src/mongoc/mongoc-stream-buffered.h          | 7 ++-----
 src/mongoc/mongoc-stream-file.h              | 7 ++-----
 src/mongoc/mongoc-stream-gridfs.h            | 7 ++-----
 src/mongoc/mongoc-stream-private.h           | 7 ++-----
 src/mongoc/mongoc-stream-socket.h            | 7 ++-----
 src/mongoc/mongoc-stream-tls.h               | 7 ++-----
 src/mongoc/mongoc-stream.h                   | 7 ++-----
 src/mongoc/mongoc-thread-private.h           | 7 ++-----
 src/mongoc/mongoc-uri.h                      | 7 ++-----
 src/mongoc/mongoc-util-private.h             | 7 ++-----
 src/mongoc/mongoc-write-command-private.h    | 7 ++-----
 src/mongoc/mongoc-write-concern-private.h    | 7 ++-----
 src/mongoc/mongoc-write-concern.h            | 7 ++-----
 58 files changed, 116 insertions(+), 291 deletions(-)

commit 757c8dfe51d38ee6a1ae69bb54377a54e4b1df78
Author: Spencer Jackson <spencer.jackson@mongodb.com>
Date:   Thu Oct 30 11:51:53 2014 -0400

    CDRIVER-429 Bump maxWireProtocolVersion
    
    Closes #107

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 571b10e1b5165627024b2b55871c547f31203ad5
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Tue Sep 16 06:19:31 2014 -0400

    CDRIVER-404 Implement SCRAM-SHA-1 SASL Mechanism
    
    Implements Scram Sha1 for the c driver

 .gitignore                        |   1 +
 doc/mongoc_rand.page              |  55 +++
 doc/mongoc_rand_add.page          |  39 ++
 doc/mongoc_rand_seed.page         |  37 ++
 doc/mongoc_rand_status.page       |  33 ++
 examples/Makefile.am              |   5 +
 examples/example-scram.c          | 106 +++++
 src/libmongoc.symbols             |   3 +
 src/mongoc/Makefile.am            |   6 +
 src/mongoc/mongoc-b64-private.h   | 515 ++++++++++++++++++++++++
 src/mongoc/mongoc-cluster.c       | 120 +++++-
 src/mongoc/mongoc-error.h         |   4 +
 src/mongoc/mongoc-init.c          |   2 +
 src/mongoc/mongoc-rand-private.h  |  38 ++
 src/mongoc/mongoc-rand.c          |  43 ++
 src/mongoc/mongoc-rand.h          |  39 ++
 src/mongoc/mongoc-scram-private.h |  77 ++++
 src/mongoc/mongoc-scram.c         | 801 ++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc.h               |   1 +
 19 files changed, 1924 insertions(+), 1 deletion(-)

commit adee50bdf2e3f27a82ef1f86e12a60daad3eb61d
Author: Samantha Ritter <samantha.ritter@10gen.com>
Date:   Wed Oct 29 17:37:23 2014 -0400

    CDRIVER-415 Add documentation to deprecate dropDups
    
    Closes #105

 doc/mongoc_index_opt_t.page | 4 ++++
 1 file changed, 4 insertions(+)

commit a6224a34b4458ae09b8f65f38d2f90edb1d0b924
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Fri Oct 17 12:35:16 2014 -0400

    CDRIVER-442 reimplement mongoc_database_has_collection using mongoc_database_get_collection_info

 src/mongoc/mongoc-database.c | 58 +++++++++++++++++++++++---------------------
 1 file changed, 30 insertions(+), 28 deletions(-)

commit bf90e37f895b26115e7d39fb1beb706328a7e665
Merge: 49106c8 a2d07e2
Author: Jason Carey <jcarey@argv.me>
Date:   Thu Oct 30 10:56:48 2014 -0400

    Merge pull request #106 from spencerjackson/CDRIVER-450
    
    CDRIVER-450 Update expected ABI

commit a2d07e21019f9cca6a3514af8d6706e8fca7dd07
Author: Spencer Jackson <spencer.jackson@mongodb.com>
Date:   Thu Oct 30 10:47:10 2014 -0400

    CDRIVER-450 Update expected ABI

 build/cmake/libmongoc-ssl.def | 2 ++
 build/cmake/libmongoc.def     | 2 ++
 src/libmongoc.symbols         | 2 ++
 3 files changed, 6 insertions(+)

commit 49106c8e44473015db5eb05df97ac18236b62354
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Wed Oct 29 12:15:23 2014 -0400

    CDRIVER-403 Allow count to work with query hints
    
    Support an optional bson_t opt param for count which masses args through
    to the count command unchanged.  This allows the user to pass arbitrary
    hints.
    
    Adds a new function to the abi

 build/cmake/libmongoc-ssl.def              |  1 +
 build/cmake/libmongoc.def                  |  1 +
 doc/mongoc_collection_count_with_opts.page | 93 ++++++++++++++++++++++++++++++
 src/libmongoc.symbols                      |  1 +
 src/mongoc/mongoc-collection.c             | 25 ++++++++
 src/mongoc/mongoc-collection.h             |  8 +++
 tests/test-mongoc-collection.c             | 38 ++++++++++++
 7 files changed, 167 insertions(+)

commit 048c851919dc32c98b5f8a9a0270e69af9385db3
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Fri Oct 17 12:42:25 2014 -0400

    minor: fix unused variable warning in tests

 tests/test-mongoc-database.c | 1 -
 1 file changed, 1 deletion(-)

commit e00392f916c48e775b3d17d79a0631c26bd189e9
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Fri Oct 17 12:40:41 2014 -0400

    minor: kill warning regarding local var shadowing

 src/mongoc/mongoc-database.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 31535312ba1be521587079476f831ceed724cc3f
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 16:03:19 2014 -0400

    fix memory leak on legacy fallback in mongoc_collection_get_index_info

 src/mongoc/mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit 030a82378ef81be6973b57b24f4de34dc1cd9b2f
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 16:01:43 2014 -0400

    fix memory leak on legacy fallback in mongoc_database_get_collection_info

 src/mongoc/mongoc-database.c | 1 +
 1 file changed, 1 insertion(+)

commit c7fe3cf283bf2bb49ac38dcbb3d56471b8c84660
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 12:40:27 2014 -0400

    fix return type in docs

 doc/mongoc_database_get_collection_info.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 84ab50b686a10461b1abe13612f779c16dd48c03
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 12:34:31 2014 -0400

    CDRIVER-426 add docs for get_index_info

 doc/mongoc_collection_get_index_info.page | 48 +++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit c3f1c7afabe64c5818e05282d360e98749cb350a
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 12:29:25 2014 -0400

    CDRIVER-425 add docs for get_collection_info

 doc/mongoc_database_get_collection_info.page | 49 ++++++++++++++++++++++++++++
 1 file changed, 49 insertions(+)

commit f4a8186a446e222e30bfc2c056a2a2601dee89b3
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Thu Oct 16 17:50:05 2014 +0200

    useless variables

 src/mongoc/mongoc-database.c | 4 ----
 1 file changed, 4 deletions(-)

commit 859feea8c55aa49ca6967cffeecb5392804b1f8f
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 11:44:24 2014 -0400

    minor: remove remaining uses of deprecated bson_copy_to_excluding

 src/mongoc/mongoc-database.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 05871a66646246b2ef38959fc5d0b9770e2f004c
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 11:40:50 2014 -0400

    CDRIVER-425 use listCollections to enumerate collections

 src/libbson                          |   2 +-
 src/mongoc/mongoc-database-private.h |  11 +-
 src/mongoc/mongoc-database.c         | 177 +++++++++++++++++++++++++---
 src/mongoc/mongoc-database.h         |   3 +
 src/mongoc/mongoc-error.h            |   1 +
 tests/test-mongoc-database.c         | 219 +++++++++++++++++++++++++++++++++++
 6 files changed, 390 insertions(+), 23 deletions(-)

commit 20a0bf0d8eb83bc299c5c169a761d83f32ddf9ee
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Thu Oct 16 11:03:43 2014 -0400

    minor: fix constant name

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aa12fbb14a9a2961cf5898056086ad9654dab9c9
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Mon Oct 13 13:17:40 2014 -0400

    CDRIVER-426 add function to enumerate indexes using listIndexes, implement legacy fallback for ye olde mongoDBs

 src/mongoc/mongoc-collection-private.h |  12 +--
 src/mongoc/mongoc-collection.c         |  98 ++++++++++++++++++++++
 src/mongoc/mongoc-collection.h         |   2 +
 src/mongoc/mongoc-error.h              |   1 +
 tests/test-mongoc-collection.c         | 146 +++++++++++++++++++++++++++++++++
 5 files changed, 254 insertions(+), 5 deletions(-)

commit 19c1aed57481ef1e68819495611634a5288c6e13
Merge: bd1de3f 2bd0e53
Author: Jason Carey <jcarey@argv.me>
Date:   Thu Oct 16 10:39:53 2014 -0400

    Merge pull request #99 from alexeyvo/fix_warning_on_windows
    
    Move "Falling back to malloc for counters." warning inside #ifdef.

commit bd1de3f470a53d445c29006916c22ba3354318aa
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Wed Oct 15 12:49:27 2014 -0400

    minor: fix misspelling in undef causing macro to be leaked

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2bd0e53c45c28e4f45aaa14bdcaa71df4976210e
Author: alexeyvo <alexeyvo@softwareplanet.uk.com>
Date:   Wed Oct 15 18:44:41 2014 +0300

    Move "Falling back to malloc for counters." warning inside #ifdef. It should not appears on windows.

 src/mongoc/mongoc-counters.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 5b7a38875b05eeed75dca55e7a448d099e12b445
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Oct 9 10:17:16 2014 -0400

    Post release bump

 CMakeLists.txt                |  4 ++--
 build/autotools/Versions.m4   |  4 ++--
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 src/libbson                   |  2 +-
 5 files changed, 19 insertions(+), 7 deletions(-)

commit a3471e503bdf7b85d474087f809037d9d5f5f251
Author: Jason Carey (hanumantmk) <jcarey@argv.me>
Date:   Thu Oct 9 09:52:49 2014 -0400

    Release 1.0.2
    
    Signed-off-by: Jason Carey (hanumantmk) <jcarey@argv.me>

 NEWS                          | 29 +++++++++++++++++++++++++++++
 README.rst                    | 10 +++++-----
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  8 ++++----
 7 files changed, 63 insertions(+), 22 deletions(-)

commit 2e71f182757495033187fc3c098d4f92ea2182a8
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Wed Oct 8 09:28:57 2014 -0400

    use return value from strerror_r

 src/mongoc/mongoc-client.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 3343501b64b588fa70498532e98ec789e0c3a316
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Mon Oct 6 19:38:55 2014 +0200

    adding more information when can't connect

 src/mongoc/mongoc-client.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 2d46a3b28361f23e9aad4cc93b4c07058eed3363
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Mon Oct 6 17:29:15 2014 -0400

    minor: use lldb for debugging on OSX

 tests/Makefile.am | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit e029895ed0ad57636a92b3079145af345dcae314
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Sun Oct 5 17:34:40 2014 +0200

    should be static to avoid warnings

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 58921fb9a12bb6e8b4904862695894ce37258717
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Sun Oct 5 17:40:01 2014 +0200

    making DEFAULT_CONNECTTIMEOUTMS public, and changing its name to MONGOC_DEFAULT_CONNECTTIMEOUTMS

 src/mongoc/mongoc-client.c | 9 ++-------
 src/mongoc/mongoc-client.h | 5 +++++
 2 files changed, 7 insertions(+), 7 deletions(-)

commit be21a30ab94f0584cba52ba217be7103764afa63
Merge: 705bd1c 4d9b8ed
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Fri Oct 3 13:58:21 2014 -0400

    Merge pull request #86 from jmikola/patch-1
    
    Fix majority docs for mongoc_write_concern_set_w()

commit 4d9b8edb827f6f19f1087cdbee420795ac217bb1
Author: Jeremy Mikola <jmikola@gmail.com>
Date:   Fri Oct 3 13:57:02 2014 -0400

    Fix majority docs for mongoc_write_concern_set_w()

 src/mongoc/mongoc-write-concern.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 705bd1cf427cd7b43251677f41b1b12888cffa6f
Merge: 7e2c32a 194c162
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Thu Oct 2 10:39:56 2014 -0400

    Merge pull request #85 from jeromelebel/mongoc_write_concern_freeze_return_error
    
    _mongoc_write_concern_freeze() returns void now

commit 194c162e94c3555e1a63eeeafa64525e33d25531
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Thu Oct 2 15:11:25 2014 +0200

    _mongoc_write_concern_freeze() returns void now

 src/mongoc/mongoc-write-concern.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7e2c32ac3ce6f7a42bb7e1a1bf9ae32a934ce059
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Mon Sep 29 15:20:51 2014 -0400

    CDRIVER-407 only include GLE in write concern when needed

 src/mongoc/mongoc-cluster.c               |   4 +-
 src/mongoc/mongoc-write-command.c         |   2 +-
 src/mongoc/mongoc-write-concern-private.h |   5 +-
 src/mongoc/mongoc-write-concern.c         | 106 +++++++++++++++++++++---------
 tests/test-libmongoc.c                    |   1 +
 tests/test-mongoc-write-concern.c         |  21 ++++--
 tests/test-replica-set.c                  |   2 +-
 7 files changed, 99 insertions(+), 42 deletions(-)

commit 2b616889417b24a09ee3123b6f31e57c3021ac6e
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Mon Sep 29 15:20:29 2014 -0400

    minor: rename private _mongoc_write_concern_has_gle to needs_gle

 src/mongoc/mongoc-bulk-operation.c        |  2 +-
 src/mongoc/mongoc-write-command.c         | 14 +++++++-------
 src/mongoc/mongoc-write-concern-private.h |  2 +-
 src/mongoc/mongoc-write-concern.c         |  4 ++--
 4 files changed, 11 insertions(+), 11 deletions(-)

commit 2dabd112914a56dcb9de321220920c8021d1cd37
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Mon Sep 29 15:59:05 2014 -0400

    minor: update TUTORIAL.md to fix broken API link

 TUTORIAL.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 720694ea7706a22fb2f67a9b6596c827f5b212bd
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Mon Sep 22 17:54:09 2014 -0400

    minor: fix formatting in README

 README.rst | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 406ab0df3afb6fd430c348ce2036d26f7c03f792
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Mon Sep 22 17:49:18 2014 -0400

    minor: CDRIVER-419 add instructions for how to generate docs

 README.rst | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit e57189e839a68ea0db2719bba52ffc680c3d4cd7
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Fri Sep 19 15:36:22 2014 -0400

    CDRIVER-424 filter out non-matching nodes before those that are far

 src/mongoc/mongoc-cluster.c | 43 +++++++++++++++++++++++++------------------
 1 file changed, 25 insertions(+), 18 deletions(-)

commit 63981c01234517dac9c9e863a584a959a5d904d4
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Thu Sep 18 16:37:07 2014 -0400

    CDRIVER-424 make conditional explicit

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dfd158bd89884c544546ca763f21ee88cdf84b7c
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Thu Sep 18 15:53:10 2014 -0400

    CDRIVER-424 C89 is a thing still -> because Windows

 src/mongoc/mongoc-cluster.c    |  5 ++---
 src/mongoc/mongoc-read-prefs.c | 18 ++++++++++--------
 2 files changed, 12 insertions(+), 11 deletions(-)

commit 326a7c636e0612169e5b5ab6548e47bfa16d9a90
Author: Tyler Brock <tyler.brock@gmail.com>
Date:   Wed Sep 17 17:21:13 2014 -0400

    CDRIVER-424 Fix node selection with read preference tags

 src/mongoc/mongoc-cluster.c    | 33 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-read-prefs.c | 36 +++++++++++++++++++++++++++++-------
 2 files changed, 62 insertions(+), 7 deletions(-)

commit 3baf76175e2de332cb9617deb426a2a19e0bbade
Merge: 695a2bc d4c56dc
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Tue Sep 16 11:10:08 2014 -0400

    Merge pull request #73 from deafgoat/master
    
    build: add tracking file

commit d4c56dc9b5a8211a33afe6cf4de26013b0c9ce7d
Author: Wisdom Omuya <deafgoat@gmail.com>
Date:   Tue Sep 16 11:08:06 2014 -0400

    build: add tracking file

 .mci.yml | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)

commit 695a2bcd31c5d91ce2053e10ee9f8d889518dc75
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Fri Sep 12 10:37:56 2014 -0400

    bind to INADDR_LOOPBACK instead of ANY for tests

 tests/ssl-test.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 9eec9e3a808d825de8fea5e0e73fdf2c41eba9e0
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Fri Sep 12 10:25:26 2014 -0400

    CDRIVER-302 fix pass through params in aggregate
    
    collection_aggregate failed to properly pass options through.  Fix that
    handling which allows for explain with aggregate

 src/mongoc/mongoc-collection.c | 17 ++++++++---------
 1 file changed, 8 insertions(+), 9 deletions(-)

commit c177b5079aafc45eb48ee307b5580c9ec54600ec
Author: Adam Midvidy <amidvidy@gmail.com>
Date:   Tue Sep 9 13:48:44 2014 -0400

    CDRIVER-418 fix bug in C driver example

 doc/finding-document.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1dbc2fb2f60df586b39c47be68ff04830472fcb9
Merge: 0e05904 744c290
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Aug 28 15:34:16 2014 -0700

    Merge pull request #70 from outcoldman/cluster_select
    
    When node is getting filtered because of the latency - the count of nodes should be decremented

commit 744c290fd428c19f60adc71ca03fe63e8a76eadd
Author: Denis Gladkikh <denis@gladkikh.email>
Date:   Thu Aug 28 15:32:06 2014 -0700

    When node is getting filtered because of the latency - the count of nodes should be decremented

 src/mongoc/mongoc-cluster.c | 1 +
 1 file changed, 1 insertion(+)

commit 0e059049987ae015ce120cb6e3b6ddbcd461a8ff
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Aug 26 19:05:36 2014 -0700

    Post-release bump to 1.0.1.

 CMakeLists.txt                |  4 ++--
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 src/libbson                   |  2 +-
 5 files changed, 20 insertions(+), 8 deletions(-)

commit e1bf9e0ae933f1a09a0ad435632f330acafe2f18
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Aug 26 18:07:07 2014 -0700

    Release 1.0.0!
    
    Signed-off-by: Christian Hergert <christian.hergert@mongodb.com>

 CMakeLists.txt                |  8 ++++----
 NEWS                          | 30 ++++++++++++++++++++++++++++++
 README.rst                    | 10 +++++-----
 build/autotools/Versions.m4   | 10 +++++-----
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  6 ++++++
 doc/installing.page           | 19 ++++++++-----------
 doc/mongoc_version.page       | 14 +++++++-------
 src/libbson                   |  2 +-
 9 files changed, 74 insertions(+), 35 deletions(-)

commit 3e281508f884689a734064f52ff451dd6ba73dc2
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Aug 26 18:06:00 2014 -0700

    build: include html files in release tarballs

 doc/Makefile.am                | 18 ++++++++++++++++--
 doc/aggregate.page             |  2 +-
 doc/basic-troubleshooting.page |  2 +-
 3 files changed, 18 insertions(+), 4 deletions(-)

commit dcb1958188a85190ea575362da3d892978dd962f
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Aug 26 11:57:32 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a4f5beb3dd2707a3233ea60b4480d8fb708c2373
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Aug 25 19:30:41 2014 -0400

    git: update .gitignore to ignore *.gz

 .gitignore | 21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

commit d99cc2d6d0a78ea13c87ec64020c563579ba46e9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Aug 25 19:29:46 2014 -0400

    build: fix build on centos 6.5

 build/rpm/mongo-c-driver.spec | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 98e72440f26f8d98a243ebba7bcf48236a29771d
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Aug 25 14:02:31 2014 -0700

    build: add $(BSON_LIBS) for mongoc-rpc-validate test program.
    
    This should fix builds on systems like Ubuntu with non-standard GNU ld
    configurations.

 examples/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit 979f1c1b99cf45f3fbcb4f68600080dd3a1077f6
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Aug 25 12:56:05 2014 -0700

    cluster: set proper error if we fail to locate a node.
    
    This could happen if read preferences prevent finding a suitable node.

 src/mongoc/mongoc-cluster.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 022bc04198fc2d0e2100895eefabe46328bf334e
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Aug 25 12:40:21 2014 -0700

    client: apply read preference tags from mongoc_uri_t.

 src/mongoc/mongoc-client.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 7e486efc57db2c127cbb85c24a117dd86f686e61
Author: Matt Cotter <mcotter222@gmail.com>
Date:   Thu Aug 21 17:17:15 2014 -0400

    bulk: send multiple delete commands at once.
    
    This is the same optimization done for bulk inserts.

 src/mongoc/mongoc-bulk-operation.c        |  40 +++++-
 src/mongoc/mongoc-collection.c            |   2 +-
 src/mongoc/mongoc-write-command-private.h |  17 ++-
 src/mongoc/mongoc-write-command.c         | 195 +++++++++++++++++++++++++-----
 4 files changed, 217 insertions(+), 37 deletions(-)

commit 513b8a7e60637306f577db32b0b74e01cfa02ca5
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Thu Aug 21 14:23:14 2014 -0400

    finally get the correct nToReturn value
    
    if command:
        1
    
    if batch size:
        if limit:
            min(batch_size, limit)
        else:
            batch_size
    
    0

 src/mongoc/mongoc-cursor.c | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit 083498bb4f2c5782fa2c0528472306bad08d3f57
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Thu Aug 21 11:41:17 2014 -0400

    CDRIVER411 never send a negative nToReturn
    
    Remove logic that sends nToReturn to avoid missing documents that don't
    fit in the initial batch.

 src/mongoc/mongoc-cursor.c | 2 --
 1 file changed, 2 deletions(-)

commit 028176badd6c359276f8b0c7622f08a9cd4e1bba
Merge: e5fb86f a507303
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 20 16:12:42 2014 -0700

    Merge pull request #67 from bjori/patch-3
    
    Add a link to the docs

commit a507303c204ce956eb64cc0609c104c0d3f62189
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Aug 20 14:56:56 2014 -0700

    Add a link to the docs

 README.rst | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit e5fb86f2f94981b047ae5144bafbea297a7fd5bc
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Wed Aug 20 13:06:37 2014 -0400

    allow bulk op insert for w:0 bulk inserts
    
    o fixes a performance regression for 2.6 w:0 writes
    o allows w:0 writes to fast path out of the bulk api on 2.4

 src/mongoc/mongoc-bulk-operation.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6ae8c480ed57e7779c891a01c667d188f5f030ac
Merge: 6c44719 dc4b5bf
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 20 11:27:17 2014 -0700

    Merge pull request #65 from hanumantmk/writeErrorFix
    
    Bulk API fixes

commit 6c4471936408179ad35afe33ea86a581ced0fe89
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Aug 19 14:12:26 2014 -0700

    cluster: explicitely check for NULL replSet.
    
    Fixes CDRIVER-409.

 src/mongoc/mongoc-cluster.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit dc4b5bffccdf9b854f024fcb997eff40e8ec0ed8
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Mon Aug 18 13:34:15 2014 -0400

    Bulk API fixes
    
    o We didn't manage the index offsetting correctly for bulk inserts.
    o We didn't massage errors into writeErrors for legacy operations

 src/mongoc/mongoc-write-command-private.h |  1 +
 src/mongoc/mongoc-write-command.c         | 27 ++++++++++--
 tests/test-bulk.c                         | 69 +++++++++++++++++++++++++++++++
 3 files changed, 94 insertions(+), 3 deletions(-)

commit 8e74520d43b31e7d27a2bb4576c4862cf699fb22
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Mon Aug 18 13:32:37 2014 -0400

    fix a bug in socket_sendv
    
    We didn't handle EAGAIN/EWOULDBLOCK/... appropriately in socket_sendv.
    Now we check for and handle it

 src/mongoc/mongoc-socket.c | 50 +++++++++++++++++++++++-----------------------
 1 file changed, 25 insertions(+), 25 deletions(-)

commit ae0697925db60815c4eb93b562a86aefef965e5d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Aug 13 11:44:32 2014 -0700

    Release 0.98.2!
    
    Signed-off-by: Christian Hergert <christian.hergert@mongodb.com>

 CMakeLists.txt                |  4 ++--
 NEWS                          | 20 ++++++++++++++++++++
 README.rst                    | 10 +++++-----
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 +++++-----
 debian/changelog              |  6 ++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 8 files changed, 51 insertions(+), 25 deletions(-)

commit c7f1902f2cba74388404b7df7141a388da4fcdc7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Aug 8 11:38:30 2014 -0700

    build: allow including private files by drivers
    
    This is meant by drivers that will staticly link libmongoc-priv.a. If you
    are not doing so, you shouldn't use these.

 src/libmongoc-priv.pc.in                     | 2 +-
 src/mongoc/mongoc-array-private.h            | 5 +++++
 src/mongoc/mongoc-buffer-private.h           | 5 +++++
 src/mongoc/mongoc-bulk-operation-private.h   | 5 +++++
 src/mongoc/mongoc-client-private.h           | 5 +++++
 src/mongoc/mongoc-cluster-private.h          | 5 +++++
 src/mongoc/mongoc-collection-private.h       | 5 +++++
 src/mongoc/mongoc-counters-private.h         | 5 +++++
 src/mongoc/mongoc-cursor-array-private.h     | 5 +++++
 src/mongoc/mongoc-cursor-cursorid-private.h  | 5 +++++
 src/mongoc/mongoc-cursor-private.h           | 5 +++++
 src/mongoc/mongoc-database-private.h         | 5 +++++
 src/mongoc/mongoc-errno-private.h            | 5 +++++
 src/mongoc/mongoc-gridfs-file-list-private.h | 5 +++++
 src/mongoc/mongoc-gridfs-file-page-private.h | 5 +++++
 src/mongoc/mongoc-gridfs-file-private.h      | 5 +++++
 src/mongoc/mongoc-gridfs-private.h           | 5 +++++
 src/mongoc/mongoc-host-list-private.h        | 5 +++++
 src/mongoc/mongoc-list-private.h             | 4 ++--
 src/mongoc/mongoc-matcher-op-private.h       | 5 +++++
 src/mongoc/mongoc-matcher-private.h          | 5 +++++
 src/mongoc/mongoc-queue-private.h            | 5 +++++
 src/mongoc/mongoc-read-prefs-private.h       | 5 +++++
 src/mongoc/mongoc-rpc-private.h              | 5 +++++
 src/mongoc/mongoc-sasl-private.h             | 5 +++++
 src/mongoc/mongoc-ssl-private.h              | 5 +++++
 src/mongoc/mongoc-stream-private.h           | 5 +++++
 src/mongoc/mongoc-thread-private.h           | 5 +++++
 src/mongoc/mongoc-util-private.h             | 5 +++++
 src/mongoc/mongoc-write-command-private.h    | 5 +++++
 src/mongoc/mongoc-write-concern-private.h    | 5 +++++
 31 files changed, 148 insertions(+), 3 deletions(-)

commit d9dfa56eb49d471db0937ceca06585b6abd067c8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Aug 6 14:02:00 2014 -0700

    client: translate slaveok into secondary preferred.
    
    This will allow clients to dispatch to secondaries for reads if
    slaveok=true in the MongoDB connection URI as the default read
    preference.
    
    We might want to determine if SECONDARY_PREFERRED is the ideal, or
    if we want NEAREST. Since NEAREST is a bit confusing in how it actually
    works, SECONDARY_PREFERRED is probably the way to go.

 src/mongoc/mongoc-client.c | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 128f92f00ba0bca0bf126c3436d5722c84b2a748
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Aug 5 16:23:25 2014 -0700

    build: include a libmongoc-priv.so without stripped symbols.
    
    This library has no ABI guarantees. It is meant for use by language driver
    authors that need access to non-ABI safe data-structures. Those drivers
    are responsible for ensuring they are rebuilt when this library is changed.

 build/rpm/mongo-c-driver.spec      |   1 +
 configure.ac                       |   1 +
 src/Makefile.am                    |  54 +++++++++++--------
 src/libmongoc-priv.pc.in           |  11 ++++
 src/mongoc/Makefile.am             | 107 +++++++++++++++++++------------------
 src/mongoc/mongoc-buffer-private.h |  15 ++----
 6 files changed, 103 insertions(+), 86 deletions(-)

commit 960ec53d2936f9dacce840734367d514aca1e440
Merge: b5b25a3 09a6578
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jul 21 16:29:04 2014 -0700

    Merge pull request #60 from bjori/patch-2
    
    Missing exit on failure

commit 09a6578811a115299f27da3d5941467c7b61d6cf
Author: Hannes Magnusson <bjori@php.net>
Date:   Mon Jul 21 16:24:07 2014 -0700

    Missing exit on failure

 build/mci.sh | 1 +
 1 file changed, 1 insertion(+)

commit b5b25a3ee68209291df985ef58f95bef3dbe45ba
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jul 17 14:21:59 2014 -0700

    build: post-release bump.

 CMakeLists.txt                |  4 ++--
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  7 +++++++
 src/libbson                   |  2 +-
 5 files changed, 21 insertions(+), 8 deletions(-)

commit 4d9581b7ac902ea30f87c30fcc5542d59e24b014
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 16 14:24:35 2014 -0700

    Release 0.98.0!
    
    Signed-off-by: Christian Hergert <christian.hergert@mongodb.com>

 CMakeLists.txt                |  6 +++---
 NEWS                          | 24 ++++++++++++++++++++++++
 README.rst                    | 10 +++++-----
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  7 +++++++
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  6 +++---
 8 files changed, 61 insertions(+), 24 deletions(-)

commit fd49c617dc9273c1fad5c3d5e7a55e8287fcd8d1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 16 14:14:59 2014 -0700

    build: remove python prototype.
    
    There is a newer version in chergert/mongo-c-driver bindings branch.

 build/autotools/Python.m4                  |  13 --
 configure.ac                               |   1 -
 src/Makefile.am                            |   1 -
 src/bindings/Makefile.am                   |   3 -
 src/bindings/python/Makefile.am            |  35 ------
 src/bindings/python/pymongoc-client-pool.c | 195 -----------------------------
 src/bindings/python/pymongoc-client-pool.h |  44 -------
 src/bindings/python/pymongoc-client.c      | 141 ---------------------
 src/bindings/python/pymongoc-client.h      |  47 -------
 src/bindings/python/pymongoc-cursor.c      |  98 ---------------
 src/bindings/python/pymongoc-cursor.h      |  45 -------
 src/bindings/python/pymongoc-database.c    |  99 ---------------
 src/bindings/python/pymongoc-database.h    |  45 -------
 src/bindings/python/pymongoc-uri.c         | 133 --------------------
 src/bindings/python/pymongoc-uri.h         |  40 ------
 src/bindings/python/pymongoc.c             |  53 --------
 16 files changed, 993 deletions(-)

commit ed9979f066ec2867bec28629d81cfb2a7f83e227
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 16 14:13:13 2014 -0700

    build: bump libbson to 0.98.0

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 14f627153de174d0b6f783fbbdae6450601d9681
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 14 15:51:39 2014 -0700

    cursor: add get_hint() helper.

 build/cmake/libmongoc-ssl.def | 1 +
 build/cmake/libmongoc.def     | 1 +
 src/libmongoc.symbols         | 1 +
 src/mongoc/mongoc-cursor.c    | 9 +++++++++
 src/mongoc/mongoc-cursor.h    | 1 +
 5 files changed, 13 insertions(+)

commit b0ac1c2c6bd540b16316204257fff33963b78c6c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 14 15:49:15 2014 -0700

    bulk: return the server hint from bulk execute.

 doc/mongoc_bulk_operation_execute.page | 4 ++--
 src/mongoc/mongoc-bulk-operation.c     | 4 ++--
 src/mongoc/mongoc-bulk-operation.h     | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 885085c9579870699a74d90e9997f5f8fbb4ee53
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jul 10 12:20:50 2014 -0700

    test: test insert and update during authentication failure.

 tests/test-mongoc-client.c | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)

commit b2b5c6e8ebdcbf8593292ae8efcb91b94aa23995
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 9 21:18:01 2014 -0700

    client: mongoc_cleanup() should be called at end of main.

 examples/example-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit 0c1901d9430a3c4d9cfb5626034ac6db0b4bcd16
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 9 14:35:55 2014 -0700

    write-commands: generate proper array indexes for local bson documents.
    
    We were generating empty keys here, which is fine, but not really
    expected by the lower components. Let's go ahead and just generate
    the key values.

 src/mongoc/mongoc-write-command-private.h |  1 +
 src/mongoc/mongoc-write-command.c         | 19 +++++++++++++++++--
 2 files changed, 18 insertions(+), 2 deletions(-)

commit 96003b6e2610b5e5272bf0792854e236822cdf6f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 9 13:53:57 2014 -0700

    build: bump libbson for context fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8dc66c1255975277023fbebbdc6586ba778eb633
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 9 13:32:20 2014 -0700

    build: bump libbson for atexit fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f5ade5905d7dd35316a4460ac3bbb648b5e5873a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 9 12:38:34 2014 -0700

    bulk: add mongoc_bulk_operation_new()
    
    This is useful for situations where you want to create bulk operations
    and replay them a number of times.
    
    Fixes CDRIVER-391.

 build/cmake/libmongoc-ssl.def      |   5 ++
 build/cmake/libmongoc.def          |   5 ++
 src/libmongoc.symbols              |   5 ++
 src/mongoc/mongoc-bulk-operation.c | 110 ++++++++++++++++++++++++++++++++-----
 src/mongoc/mongoc-bulk-operation.h |  20 ++++++-
 src/mongoc/mongoc-collection.c     |   1 +
 tests/test-bulk.c                  |  60 ++++++++++++++++++++
 7 files changed, 189 insertions(+), 17 deletions(-)

commit daadcbb691837f6a53318c6643ae8f16bfa38af2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 9 11:24:12 2014 -0700

    uri: ensure journal is set in write concern when journal=true.
    
    Fixes CDRIVER-389.

 src/mongoc/mongoc-uri.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 47e2edfc7b3811b3a0e1fe7c6d3cc08064260e89
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jul 8 18:31:08 2014 -0700

    stream: make mongoc_stream_t public.
    
    This also removes the cork/uncork variants.

 build/autotools/Versions.m4         |  2 +-
 build/cmake/libmongoc-ssl.def       |  2 --
 build/cmake/libmongoc.def           |  2 --
 src/libmongoc.symbols               |  2 --
 src/mongoc/mongoc-stream-buffered.c | 52 ----------------------------------
 src/mongoc/mongoc-stream-private.h  | 27 ------------------
 src/mongoc/mongoc-stream-tls.c      | 56 -------------------------------------
 src/mongoc/mongoc-stream.c          | 35 -----------------------
 src/mongoc/mongoc-stream.h          | 27 ++++++++++++++++--
 9 files changed, 26 insertions(+), 179 deletions(-)

commit 46b4276f5acb9a5be2ea66adddef1f49fcbacb8a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jul 8 18:25:54 2014 -0700

    build: bump libbson for memory vtable

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aa1e89cb0f9627f8d08aa69b87af4bbc219f4a39
Merge: b817ffa 7c09611
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Jul 8 10:15:43 2014 -0700

    Merge pull request #58 from ksuarz/master
    
    build: remove set_ssl_opts from libmongoc.def

commit 7c09611b82fd3a3edcf2e4aec845936e5b7964dc
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Jul 8 10:42:26 2014 -0400

    build: remove set_ssl_opts from libmongoc.def
    
    Removed a reference to mongoc_client_pool_set_ssl_opts() from
    libmongoc.def.

 build/cmake/libmongoc.def | 1 -
 1 file changed, 1 deletion(-)

commit b817ffaf6008b9b02926ff7489244fda1515098f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 7 13:47:22 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0dce5bc74b632ea4ace13a3cf21a524fcf089f1b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 7 12:58:31 2014 -0700

    matcher: fix some inconsistencies in matcher logic.

 src/mongoc/mongoc-matcher-op.c | 15 +++++----------
 tests/test-mongoc-matcher.c    | 39 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 44 insertions(+), 10 deletions(-)

commit 47252e96014c3b48d991cd14d3ce5ff20aa7534a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 7 12:08:49 2014 -0700

    bulk: add option to change write_concern after creating structure.

 build/cmake/libmongoc-ssl.def      |  1 +
 build/cmake/libmongoc.def          |  1 +
 src/libmongoc.symbols              |  1 +
 src/mongoc/mongoc-bulk-operation.c | 17 +++++++++++++++++
 src/mongoc/mongoc-bulk-operation.h |  2 ++
 5 files changed, 22 insertions(+)

commit 3a407279d738c9b25479cbd25a15a9f5ad7af6d7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 7 11:20:57 2014 -0700

    collection: remove spurious check for NULL index options.
    
    Fixes CDRIVER-388

 src/mongoc/mongoc-collection.c | 1 -
 1 file changed, 1 deletion(-)

commit d2cc0bc7a505cdcb0da79c8962cc50b04e2f771a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jul 7 10:58:50 2014 -0700

    gridfs: add mongoc_gridfs_file_remove() helper.

 build/cmake/libmongoc-ssl.def   |  1 +
 build/cmake/libmongoc.def       |  1 +
 src/libmongoc.symbols           |  1 +
 src/mongoc/mongoc-gridfs-file.c | 44 +++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-gridfs-file.h |  2 ++
 tests/test-mongoc-gridfs.c      | 44 +++++++++++++++++++++++++++++++++++++++++
 6 files changed, 93 insertions(+)

commit 210ea551f93a0093793de5b9eb432eda25185599
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 2 14:41:37 2014 -0700

    examples: remove some debug code.

 examples/mongoc-dump.c | 4 ----
 1 file changed, 4 deletions(-)

commit 839e66bab2cd92d6cea66837aed804c8de2e1df1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jul 2 12:57:09 2014 -0700

    examples: use fopen() for stream in mongoc-dump.

 examples/mongoc-dump.c | 28 +++++++++++++---------------
 1 file changed, 13 insertions(+), 15 deletions(-)

commit cb7e2dd4cca39b0f787f5c1175ffd4ca98655389
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 30 15:00:13 2014 -0700

    counters: add counters for DNS resolution.

 src/mongoc/mongoc-client.c      | 3 +++
 src/mongoc/mongoc-counters.defs | 4 ++++
 2 files changed, 7 insertions(+)

commit e0401bbc6ae448ef9b915a60f27446248175921c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 17:20:05 2014 -0700

    collection: use write commands for delete/remove.

 src/mongoc/mongoc-collection.c | 52 ++++++++++++++++++++----------------------
 1 file changed, 25 insertions(+), 27 deletions(-)

commit 90854c749201f3c5027fd7b827d23226d641a1dd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 17:10:11 2014 -0700

    cluster: check against maximum message size, not max bson size.

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit acc886a1935be7be6cc079a9e136cac90e96fcb1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 16:13:38 2014 -0700

    write-commands: only include gle if it is necessary.

 src/mongoc/mongoc-write-command.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4b96465db9d6a7f11c826d234234948c7bee82fe
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 14:15:30 2014 -0700

    cluster: style cleanup

 src/mongoc/mongoc-cluster.c | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit f6e20c19eb0d256887ed1adaeb3f131c945cf8ee
Author: yuqing <yuqing@yongche.com>
Date:   Thu Jun 26 17:01:33 2014 +0800

    close old connections before reconnect

 src/mongoc/mongoc-cluster.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 100fc320a24d6ba9f8cdec966cdc52e42c399c7a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 14:08:21 2014 -0700

    build: add --with-libbson=bundled to distcheck.

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 10b34e2faf40de8efe99f1613ad97ba00ea8c7c0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 12:58:25 2014 -0700

    build: use %makeinstall for RHEL5 rpmbuild.

 build/rpm/mongo-c-driver.spec | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5f78648e3ab6779a47fcc010731ced804f8e3d07
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 26 12:27:06 2014 -0700

    build: add mongoc_client_set_stream_initiator() to ABI.

 build/cmake/libmongoc-ssl.def | 1 +
 build/cmake/libmongoc.def     | 1 +
 src/libmongoc.symbols         | 1 +
 3 files changed, 3 insertions(+)

commit 25dc0718fb254a53c3f90e9e88d2c90245fbc436
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 25 15:49:27 2014 -0700

    build: remove echo-server from win32 build.

 CMakeLists.txt | 2 --
 1 file changed, 2 deletions(-)

commit 671d5dab1d03f65588174fe21cb720854c3974aa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 25 14:07:51 2014 -0700

    client: implement stream initiator.
    
    Sorry Hannes!

 src/mongoc/mongoc-client.c | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit 287800a9fb5da6c5095ec3c7d4cb57a31edac606
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 24 11:21:00 2014 -0700

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 889179ed805b2fd36a149742e2cc57729565ebd5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 23 19:03:20 2014 -0700

    build: add --disable-tests build option.

 Makefile.am                                 | 3 +++
 build/autotools/ReadCommandLineArguments.m4 | 6 ++++++
 build/autotools/SetupAutomake.m4            | 3 +++
 3 files changed, 12 insertions(+)

commit 37204771db29403aaad0c85d36a4e5fd2f1a90e3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 23 19:00:41 2014 -0700

    tests: remove unused test echo-server.

 tests/Makefile.am   |  6 ----
 tests/echo-server.c | 88 -----------------------------------------------------
 2 files changed, 94 deletions(-)

commit f94abda3ec5fdd26cd74e7c53e5f218e87cf8f49
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 23 18:59:22 2014 -0700

    build: allow disabling examples with --disable-examples

 Makefile.am                                 | 5 ++++-
 build/autotools/ReadCommandLineArguments.m4 | 6 ++++++
 build/autotools/SetupAutomake.m4            | 3 +++
 3 files changed, 13 insertions(+), 1 deletion(-)

commit 515a32daf854d7e6c66cae68c3e6c5bccd6fe9a8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 23 18:55:40 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8d377f93d7d6a898be178d000233776f2f518aa8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 23 12:00:53 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8c1177495188ec58404882e0c91b3cb01f5d8579
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 16:27:26 2014 -0700

    client: nullify sock by default.

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 80e0ab3ce4793ad9fcc8b32890575de0c71fe463
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 16:19:57 2014 -0700

    Post release bump.

 CMakeLists.txt                |  4 ++--
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec | 10 ++++++++--
 debian/changelog              |  7 +++++++
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 6 files changed, 23 insertions(+), 10 deletions(-)

commit 9c779242a4dfa33502ab2cdd9459eb8703cd965f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 14:55:45 2014 -0700

    git: fix a release oopsie.
    
    However, not totally a bad idea to include these like this.

 mongo-c-driver-0.96.4.tar.gz | Bin 5028725 -> 0 bytes
 1 file changed, 0 insertions(+), 0 deletions(-)

commit d428bff7428e93b317a3295ab222816c92e3410f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 14:27:55 2014 -0700

    Release 0.96.4!

 CMakeLists.txt                |   4 ++--
 NEWS                          |  23 +++++++++++++++++++++++
 README.rst                    |  10 +++++-----
 build/autotools/Versions.m4   |   6 +++---
 build/rpm/mongo-c-driver.spec |  10 ++++++++--
 debian/changelog              |   6 ++++++
 doc/installing.page           |  16 ++++++++--------
 doc/mongoc_version.page       |   2 +-
 mongo-c-driver-0.96.4.tar.gz  | Bin 0 -> 5028725 bytes
 src/libbson                   |   2 +-
 10 files changed, 57 insertions(+), 22 deletions(-)

commit 0b5c729005990cb2a3ae5be0f1f4a9da05ef2736
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 14:27:45 2014 -0700

    gridfs: fix potential uninitialized use.

 src/mongoc/mongoc-gridfs.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5484f6bb168deaeeb0a0351f151cc02e50495f42
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 13:19:49 2014 -0700

    gridfs: include bulk operation header.

 src/mongoc/mongoc-gridfs.c | 1 +
 1 file changed, 1 insertion(+)

commit d4a1c6d044e43337a7bd9a4f092262591aacf4fe
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 20 13:17:04 2014 -0700

    gridfs: add mongoc_gridfs_remove_by_filename()

 build/cmake/libmongoc-ssl.def |   1 +
 build/cmake/libmongoc.def     |   1 +
 src/libmongoc.symbols         |   1 +
 src/mongoc/mongoc-error.h     |   5 ++
 src/mongoc/mongoc-gridfs.c    | 106 ++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-gridfs.h    |   3 ++
 tests/test-mongoc-gridfs.c    |  49 +++++++++++++++++++
 7 files changed, 166 insertions(+)

commit 7adb189d970cfea59422599e76e1f047245b0c77
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 19 17:08:23 2014 -0700

    client-pool: put ssl opts in #ifdef.

 src/mongoc/mongoc-client-pool.c | 2 ++
 1 file changed, 2 insertions(+)

commit d02cf24475054e35425880664fcf68605eb04bf1
Merge: f12e417 1a402f6
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 19 03:26:15 2014 -0700

    Merge pull request #52 from bjori/patch-1
    
    Only include mongoc-ssl.h when built with SSL

commit f12e41781c4cfdbaba2c60d85cd1c6aa4c66279a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 23:43:43 2014 -0700

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1a402f63f7ec44c1e837357f3c1a8c5f9884f4b9
Author: Hannes Magnusson <bjori@php.net>
Date:   Wed Jun 18 23:39:44 2014 -0700

    Only include mongoc-ssl.h when built with SSL

 src/mongoc/mongoc-client-pool.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit bce6732a88f6a001c9bfc17a7dfc5c952c41dee1
Merge: 7a39ff5 530592a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jun 18 20:07:40 2014 -0700

    Merge pull request #51 from ksuarz/master
    
    doc: fix wrong description

commit 7a39ff58ceda97e4a7567cdb4077bab1eacee757
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 20:07:06 2014 -0700

    build: bump libbson for json and keylen check

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b02c06af56871204abe852ffcc088b88038df0d8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 13:29:41 2014 -0700

    cursor: set slaveok bit when command readPrefs are not PRIMARY.

 src/mongoc/mongoc-cursor.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 830d84928395c49c5c03be22fa46d4fa24851f0c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 13:25:38 2014 -0700

    collection: allow fully qualified ns name using collection name.
    
    this way a collection called $cmd.foo.bar can work.

 src/mongoc/mongoc-collection.c | 11 ++++++++++-
 tests/test-mongoc-collection.c | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 43 insertions(+), 1 deletion(-)

commit 7eb29cc2a384fac1bb76c802a3a6c21d334c195b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 13:17:27 2014 -0700

    cursor: allow command responses that do not have "ok" field.

 src/mongoc/mongoc-cursor.c | 17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

commit 7cf514e9d17af8b2792ceba76327727ec5d53c5f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 12:56:46 2014 -0700

    client: allow providing fully qualified namespace for $cmd.

 src/mongoc/mongoc-client.c | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

commit 9c477d356c5ae78e9bdc052c168b43c59b968edc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 12:56:31 2014 -0700

    cursor: only provide "fields" if it was specified when creating cursor.

 src/mongoc/mongoc-cursor-private.h | 1 +
 src/mongoc/mongoc-cursor.c         | 8 +++++++-
 2 files changed, 8 insertions(+), 1 deletion(-)

commit 74362530b4a4956dc2b7702482a8abcfff057391
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 18 01:57:01 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 05b28b5bc8f3263bf78220537c211b85f438e739
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 17 16:49:07 2014 -0700

    doc: update collection_find docs for how to specify $orderby

 doc/mongoc_collection_find.page | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 8976ab705abc852cedce4557d8c98ff640efd502
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 17 13:56:29 2014 -0700

    build: bump libbson to master for strtoll

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1e24ff9b8b7219f738f9c56085285bda206caffa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 17 13:13:27 2014 -0700

    cursor: create synthetic failure upon top-level query and $dollar keys
    
    It is possible to submit a query to mongo-c-driver that looks like:
    
      {a:1, $orderby: {foo:1}}
    
    This is invalid since it mixes the top-level query and the orderby. It
    should instead be:
    
      {$query: {a:1}, {$orderby:{foo:1}}}
    
    This fixes CDRIVER-379.

 src/mongoc/mongoc-cursor.c | 37 +++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-cursor.c | 40 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 77 insertions(+)

commit 530592a8e2474ab03bcb8025409f329d18152b78
Author: Kyle Suarez <ksuarz@gmail.com>
Date:   Tue Jun 17 10:19:49 2014 -0400

    doc: fix wrong description

 doc/mongoc_read_prefs_t.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 96988c82668f9301094bf2cf30c38cf8b3781039
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 16 17:50:55 2014 -0700

    build: add valgrind target.

 tests/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit e0506e38d779bc9c2d34f8a198b97bcadee4b020
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 16 14:10:35 2014 -0700

    build: bump for libbson master changes

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f1709fa70e0aae683a354ce72d5ae7f2e101f876
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 19:21:24 2014 -0700

    mci: fix --notest on Debian packages.

 build/mci.sh | 1 +
 1 file changed, 1 insertion(+)

commit 5a4520422bb60cdac9a4404fb356a36b6e0d9f01
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 19:12:41 2014 -0700

    build: add --notest option to mci.sh

 build/mci.sh | 20 ++++++++++++++++----
 1 file changed, 16 insertions(+), 4 deletions(-)

commit ef8ce326ea84445c8b000925c0cedc0fa93c7979
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 13:33:18 2014 -0700

    build: add mongoc_cleanup to missing Win32 ABI.

 build/cmake/libmongoc-ssl.def | 1 +
 build/cmake/libmongoc.def     | 1 +
 2 files changed, 2 insertions(+)

commit 8dc97ab31fcdecc560fb407dc2ed1f2080d2612a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 13:20:46 2014 -0700

    example-gridfs: call mongoc_cleanup().

 examples/example-gridfs.c | 2 ++
 1 file changed, 2 insertions(+)

commit bccff0e5f480fc9ee3862243da6fa464dbc77537
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 13:20:35 2014 -0700

    example-gridfs: check result from fwrite.

 examples/example-gridfs.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 454424f110f40764a2052ccbd25bc9e7bb1b5eff
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 12:35:13 2014 -0700

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 65a8082f9050ba10b1c64df3e80c4b64af5ac0b4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 12 11:19:38 2014 -0700

    debian: require 1.0.1 libssl-dev for builds.

 debian/control | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 87c0e2acdf2df060f8812cb8c79b60380f52f09c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 11 16:22:22 2014 -0400

    mci: debian packaging will run make check, so just defer to that.

 build/mci.sh | 2 --
 1 file changed, 2 deletions(-)

commit bb1116eef39d54250e885fa053b7d6f39b0e6569
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 11 12:53:37 2014 -0700

    mci: use alternate arch directory when building 64-bit version on Solaris.

 build/mci.sh | 2 ++
 1 file changed, 2 insertions(+)

commit f114f9cbffe85fbda593fef5529f669bd53217e4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 6 02:35:11 2014 -0700

    mci: build debian packages on Debian/Ubuntu build hosts.

 build/mci.sh | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)

commit a3c8526d5754f681a774629816f86832c5ea8baf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 6 02:21:35 2014 -0700

    debian: make debian package scripts work on Wheezy.

 build/debian/changelog               |   6 -
 build/debian/compat                  |   1 -
 build/debian/control                 |  94 ----------------
 build/debian/copyright               |  26 -----
 build/debian/libbson-1.0-0.install   |   1 -
 build/debian/libbson-1.0-0.symbols   | 176 ------------------------------
 build/debian/libbson-dev.install     |   4 -
 build/debian/libmongoc-1.0-0.install |   1 -
 build/debian/libmongoc-1.0-0.symbols | 206 -----------------------------------
 build/debian/libmongoc-dev.install   |   4 -
 build/debian/rules                   |  21 ----
 debian/.gitignore                    |  12 ++
 debian/changelog                     |   5 +
 debian/compat                        |   1 +
 debian/control                       |  94 ++++++++++++++++
 debian/copyright                     |  26 +++++
 debian/libbson-1.0-0.install         |   1 +
 debian/libbson-dev.install           |   4 +
 debian/libmongoc-1.0-0.install       |   2 +
 debian/libmongoc-dev.install         |   4 +
 debian/rules                         |  22 ++++
 21 files changed, 171 insertions(+), 540 deletions(-)

commit a4e58f1055136bea0f5ec1395fe486efcc4b4b0c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 6 01:33:19 2014 -0700

    debian: stub out debian package scripts.

 build/debian/changelog               |   6 +
 build/debian/compat                  |   1 +
 build/debian/control                 |  94 ++++++++++++++++
 build/debian/copyright               |  26 +++++
 build/debian/libbson-1.0-0.install   |   1 +
 build/debian/libbson-1.0-0.symbols   | 176 ++++++++++++++++++++++++++++++
 build/debian/libbson-dev.install     |   4 +
 build/debian/libmongoc-1.0-0.install |   1 +
 build/debian/libmongoc-1.0-0.symbols | 206 +++++++++++++++++++++++++++++++++++
 build/debian/libmongoc-dev.install   |   4 +
 build/debian/rules                   |  21 ++++
 11 files changed, 540 insertions(+)

commit f71396a69463e89009b5733365e3ae252feadf95
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 20:01:34 2014 -0700

    mci: update doc paths for older rpmbuild systems.

 build/rpm/mongo-c-driver.spec | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 58d50a5c3340d61dd1b9ca7c2e63effc5a93b634
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:54:53 2014 -0700

    mci: SUSE LINUX harder.

 build/mci.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cf39e7453081703e13e55d301edb864a6567d794
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:51:35 2014 -0700

    mci: use DISTRIB, not OS for system check.

 build/mci.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3091cb60a26c92799b54ba46f46d971a90b09b53
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:47:47 2014 -0700

    mci: SUSE expects source tarballs in /usr/src/packages/SOURCES.

 build/mci.sh | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit e1e28959eeb81580a8a4a64082e0bcad8c7d29d2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:31:03 2014 -0700

    build: mark norootforbuild for OBS.

 build/rpm/mongo-c-driver.spec | 2 ++
 1 file changed, 2 insertions(+)

commit 985c2250313661f049674300a894ddce3123a37f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:18:36 2014 -0700

    rpm: specify Group: for rpmbuild.

 build/rpm/mongo-c-driver.spec | 4 ++++
 1 file changed, 4 insertions(+)

commit 5058559de15448e7883d09b6ddde4c4231419fc6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:16:00 2014 -0700

    mci: cleanup RPM build process.

 build/mci.sh | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 7a5c9417af0cddea84fbfd7049c9959347402d16
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:12:14 2014 -0700

    mci: use Linux-*- prefix for SUSE.

 build/mci.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4f85f10fb896ecc89965a6d84f0eabd0be135897
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 19:07:16 2014 -0700

    mci: build RPMs on SUSE build servers.

 build/mci.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 407248b2e37dd9540a054c782215c0e7684e3bf9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 18:56:15 2014 -0700

    mci: build RPMs on CentOS.

 build/mci.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 80031390fc962ce39418b23d5501dfbf3028b3ad
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 17:08:36 2014 -0700

    mci: fix building on RHEL 7.

 build/mci.sh                  |  2 +-
 build/rpm/mongo-c-driver.spec | 10 +++++-----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 97d33ff1c0c7f7bdc1eb74699245a0b0ddc2fe88
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 15:29:00 2014 -0700

    build: build rpms on redhat and fedora

 build/mci.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d3eea6b96ec05cc73aff556e54a02c38bbc12c18
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 14:32:49 2014 -0700

    build: build mongo-c-driver and libbson packages from mongo-c-driver.spec

 build/mci.sh                  | 11 +-----
 build/rpm/mongo-c-driver.spec | 84 ++++++++++++++++++++++++++++++++++---------
 2 files changed, 68 insertions(+), 27 deletions(-)

commit 2209c5d8d306b8ca1b000b606b091ac6507d1829
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 12:43:46 2014 -0700

    build: start on building RPMs in an automated fashion.

 build/mci.sh                  | 20 +++++++++++++++++++-
 build/rpm/mongo-c-driver.spec |  7 +++++--
 src/libbson                   |  2 +-
 3 files changed, 25 insertions(+), 4 deletions(-)

commit 21d1d9d7dad9a33ee0b0f66b816c0f65af24f79d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 15:26:07 2014 -0400

    build: fix mci.sh on sparc solaris 10.

 build/mci.sh | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 7c9a3b71315841aad1e90f2e006e9927733a934c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 11:30:59 2014 -0700

    build: rename autobuild.sh to mci.sh and drop legacy packging script.

 build/autobuild.sh          | 150 ------------------------------------------
 build/mci.sh                | 155 ++++++++++++++++++++++++++++++++++++++++++++
 build/solaris10/buildpkg.sh | 132 -------------------------------------
 3 files changed, 155 insertions(+), 282 deletions(-)

commit 155131d741451af8a3cc061fe4c31ebda203fec9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 00:38:57 2014 -0700

    build: redirect which stderr to /dev/null

 build/autobuild.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f23dd1a5d9c5a78230917137acabd84cef08d4eb
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 10 00:30:37 2014 -0700

    build: make solaris10 package build using autobuild.sh

 build/autobuild.sh | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit d805326baf58075307a837a262bf33db46f5ae1b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 23:28:54 2014 -0700

    build: work on autobuild script.

 build/autobuild.sh | 24 ++++++++++++++++++------
 1 file changed, 18 insertions(+), 6 deletions(-)

commit 8a875d685e8ee1034a7258d192495abd4843338c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 21:38:13 2014 -0700

    build: clean before 64-bit build.

 build/autobuild.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d51b231a8d96806709b47357436a2c8f0de2912e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 21:21:03 2014 -0700

    build: incremental work on new build automation.

 build/.gitignore   |  1 +
 build/autobuild.sh | 70 +++++++++++++++++++++++++++++++++++++++++++++++++-----
 build/version.in   |  1 +
 configure.ac       |  1 +
 4 files changed, 67 insertions(+), 6 deletions(-)

commit e9b1392327394a01321183301ce88c99a5a918a3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 20:22:46 2014 -0700

    build: disable static, disable silent rules in autobuild.

 build/autobuild.sh | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 92f44327778202e0ce0e659fd3a21fc2b09d35ff
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 19:18:50 2014 -0700

    build: start on autobuild.sh script.

 build/autobuild.sh | 71 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 71 insertions(+)

commit d50d684f101b4df4ac2f9a45b30e0cb44b30d144
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 15:01:28 2014 -0700

    ssl: load a SSL_CTX on startup to ensure ciphers are available.

 src/mongoc/mongoc-ssl.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 7d7cebc75312c02cb9234f4c7ae495d9dcc94e6a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 13:03:51 2014 -0700

    build: bump libbson for sparc fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 461043ed538dd8de3e8f07718b052e655bff2991
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 13:03:26 2014 -0700

    build: fix warning.

 tests/test-bulk.c | 1 -
 1 file changed, 1 deletion(-)

commit 77a299384164674e7ffb7cc386bd8cc4442a08ec
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Jun 9 10:47:12 2014 -0700

    build: bump libbson for gettimeofday change.

 src/libbson             | 2 +-
 src/mongoc/mongoc-log.c | 2 +-
 tests/mongoc-tests.c    | 4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 98cb7f8ce53838fb4f4568584c117c6e1ace3ba4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Jun 7 09:56:18 2014 -0700

    build: bump libbson for alignment fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9ae292caf8cece4b30560bd6016e7ca3201d461f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 6 18:44:05 2014 -0700

    build: rpm build improvements.

 build/rpm/mongo-c-driver.spec | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 4b2136d4792f12ab856400463cea60bbdffdb63e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 6 14:32:28 2014 -0400

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 358321e6573465c404c15db53374aa69a7741fb9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Jun 6 14:26:09 2014 -0400

    build: post-release bump.

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 6 +++---
 src/libbson                 | 2 +-
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 01be20fa01d7611e88e909f08c334d610e79287c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 5 23:26:35 2014 -0400

    Release 0.96.2

 CMakeLists.txt                |  4 ++--
 NEWS                          | 20 ++++++++++++++++++++
 README.rst                    | 10 +++++-----
 build/autotools/Versions.m4   |  6 +++---
 build/rpm/mongo-c-driver.spec |  7 +++++--
 doc/installing.page           | 16 ++++++++--------
 doc/mongoc_version.page       |  4 ++--
 src/libbson                   |  2 +-
 tests/Makefile.am             |  2 +-
 9 files changed, 47 insertions(+), 24 deletions(-)

commit 3c8419f98e29a8cf61c5177b10d75f8eaaa7f1eb
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 5 17:00:13 2014 -0400

    bulk: Handle upsert on MongoDB < 2.6 with non-objectid _id fields.
    
    Server versions before 2.6 only return the 'upserted' field in an update
    result when the upserted _id is an ObjectId. If the user provides any
    other value for _id in the query spec, or update document (for a replace
    operation) the upserted field is not returned. This causes invalid counts
    for nUpserted in the Bulk API result set.
    
    This fixes CDRIVER-372.

 src/mongoc/mongoc-write-command.c |  17 +++++
 tests/test-bulk.c                 | 138 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 155 insertions(+)

commit 09d4ff4f6b2c0ff3c870d35fff58f66c8d033591
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 5 14:05:21 2014 -0400

    cursor: be tolerant of non-64bit id field.

 src/mongoc/mongoc-cursor-cursorid.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69ffd47c287d84d86fd2b190712e5e77cbabe4f8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 5 13:45:40 2014 -0400

    collection: use 100 for default batchSize in aggregate.

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 10a5c034dee501918998fa0a551a72fc473e3055
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Jun 5 13:45:24 2014 -0400

    buffer: track next_power_of_two changes to size_t.

 src/mongoc/mongoc-array.c  | 2 +-
 src/mongoc/mongoc-buffer.c | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 9a521a271ac47e306b29b382514f8110bbf66195
Merge: 2158b24 9954541
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 5 10:45:15 2014 -0400

    Merge pull request #49 from fotonauts/mongoc_bulk_operation_execute_without_reply
    
    reply doesn't seem to be required so let's not call bson_init() if it is not set

commit 9954541f6f22189c253af4d76dc91f0560f1ccd2
Author: Jerome Lebel <jerome@fotonauts.com>
Date:   Thu Jun 5 14:50:43 2014 +0200

    reply doesn't seem to be required so let's not init it if it is not set

 src/mongoc/mongoc-bulk-operation.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 2158b240ece1727ed71cf89448d94a5044af28a3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 4 14:29:12 2014 -0400

    tests: make check will auto recurse.

 tests/Makefile.am | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

commit 31338288fbeeeb7099cac3a07da0b456a7a81695
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 4 14:19:20 2014 -0400

    build: bump libbson for next_power_of_two().

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 310609bf11c70fd50e503635363bb3525a4bd949
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 4 13:58:24 2014 -0400

    buffer: ensure realloc size includes current offset and length.

 src/mongoc/mongoc-buffer.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 47da5054ce78df8446cae6dd59ff25e4f1f24c2e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 4 13:31:31 2014 -0400

    buffer: fix references to new buffer init.

 src/mongoc/mongoc-buffer-private.h  |  8 +++++---
 src/mongoc/mongoc-buffer.c          | 13 ++++++++-----
 src/mongoc/mongoc-client.c          |  2 +-
 src/mongoc/mongoc-cluster.c         |  2 +-
 src/mongoc/mongoc-collection.c      |  2 +-
 src/mongoc/mongoc-cursor.c          |  4 ++--
 src/mongoc/mongoc-stream-buffered.c |  2 +-
 tests/mock-server.c                 |  2 +-
 tests/test-mongoc-buffer.c          |  2 +-
 9 files changed, 21 insertions(+), 16 deletions(-)

commit 57308ff4bcf100ed99312fa141e5a267fccac34b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 4 12:55:23 2014 -0400

    stream-buffer: always pass null buffer for buffer initialization.

 src/mongoc/mongoc-buffer.c          | 13 ++++++++-----
 src/mongoc/mongoc-stream-buffered.c |  4 +---
 2 files changed, 9 insertions(+), 8 deletions(-)

commit b5eaa476260ed6711869ffc1b6eeeddd5eeecf01
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Jun 4 12:19:22 2014 -0400

    tests: fix leak on aggregate test.

 tests/test-mongoc-collection.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit 2423776701a332bd42efdf7a407df33f754fd640
Merge: f639e1c b468fc9
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jun 4 10:21:17 2014 -0400

    Merge pull request #48 from fotonauts/cast-warnings3
    
    Avoid warning casts

commit b468fc90f51f2847002d064cf7d17dee67fe209e
Author: Jerome Lebel <jerome@fotonauts.com>
Date:   Wed Jun 4 16:08:10 2014 +0200

    Avoid warning casts

 src/mongoc/mongoc-collection.c       | 4 ++--
 src/mongoc/mongoc-counters-private.h | 2 +-
 src/mongoc/mongoc-database.c         | 2 +-
 src/mongoc/mongoc-sasl.c             | 4 ++--
 src/mongoc/mongoc-socket.c           | 2 +-
 src/mongoc/mongoc-stream-file.c      | 4 ++--
 src/mongoc/mongoc-uri.c              | 4 ++--
 7 files changed, 11 insertions(+), 11 deletions(-)

commit f639e1c59bb176d437b604d0d335a7bcae738cc2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 3 14:55:41 2014 -0400

    build: bump libbson for bcon.h fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit acab23fa2c351084dc192839bcd5dd20f39f00e3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Jun 3 11:40:07 2014 -0400

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 89711887598c161d5f1acf977986ed56b5a7cbce
Merge: cf6483f 1c926b0
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Jun 3 11:15:00 2014 -0400

    Merge pull request #46 from fotonauts/gitignore
    
    adding .DS_Store for mac

commit 1c926b0b58a6e6189913bde733fbb5d70cd84c05
Author: Jerome Lebel <jerome@fotonauts.com>
Date:   Tue Jun 3 11:48:39 2014 +0200

    adding .DS_Store for mac

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit cf6483f6c526d873975aade1fd841238b30a6d16
Merge: f5667c4 4d2731f
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jun 2 13:00:10 2014 -0400

    Merge pull request #45 from fotonauts/expose-MONGOC_DEFAULT_PORT
    
    it is nicer to expose MONGOC_DEFAULT_PORT constant

commit 4d2731f0ed1e609a514cf6be97631f4ada17dbd8
Author: Jerome Lebel <jerome@fotonauts.com>
Date:   Mon Jun 2 18:08:29 2014 +0200

    it is nicer to expose MONGOC_DEFAULT_PORT constant

 src/mongoc/mongoc-uri.c | 7 +------
 src/mongoc/mongoc-uri.h | 5 +++++
 2 files changed, 6 insertions(+), 6 deletions(-)

commit f5667c4f231d85938158deebdfbd54a6c742a628
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 23:35:04 2014 -0700

    collection: ensure batchSize is passed to mongoc_cursor_t.
    
    This will allow GETMORE calls to also propagate the proper batch_size.

 src/mongoc/mongoc-collection.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit d95bbdc552e87f43c35feb836156a19b24f7c460
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 16:04:07 2014 -0700

    build: post-release bump to 0.96.1.

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 doc/mongoc_version.page     | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 30bdc2da6188780633b76ccc1744af6ec65b788b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 14:08:25 2014 -0700

    Release mongo-c-driver 0.96.0.

 CMakeLists.txt                           |  6 ++---
 NEWS                                     | 40 ++++++++++++++++++++++++++++++++
 README.rst                               | 10 ++++----
 build/autotools/Versions.m4              |  4 ++--
 build/rpm/mongo-c-driver.spec            |  7 ++++--
 doc/aggregate.page                       |  2 +-
 doc/installing.page                      | 16 ++++++-------
 doc/mongoc_client_pool_set_ssl_opts.page |  4 ++--
 doc/mongoc_version.page                  | 10 ++++----
 9 files changed, 71 insertions(+), 28 deletions(-)

commit aa246ec41519cf9f3034bdb096cd5a80610194fb
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 15:11:04 2014 -0700

    examples: add aggregation example with compile time checks.
    
    Now we can just include it in the generated docs and ensure it compiles
    correctly like the others.

 .gitignore                          |  1 +
 doc/aggregate.page                  | 30 +--------------------
 examples/Makefile.am                |  5 ++++
 examples/aggregation/aggregation1.c | 54 +++++++++++++++++++++++++++++++++++++
 4 files changed, 61 insertions(+), 29 deletions(-)

commit 7f45e510b4229c99508a8308a9dad17a547fee65
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 14:58:59 2014 -0700

    collection: ensure pipeline is set appropriately with >= 2.6.

 src/mongoc/mongoc-collection.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit 42ecaed22158391268aa3b1aa9af5b8aaefdb4d7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 13:26:26 2014 -0700

    examples: simplify cursor iteration in example-client.

 examples/example-client.c | 11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)

commit d0e54c21c187bd409ba2e14b81160a30a86de8e5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 13:25:52 2014 -0700

    cursor: track changes in bson_reader_read() with regards to EOF.

 src/mongoc/mongoc-cursor-cursorid.c |   4 +-
 src/mongoc/mongoc-cursor.c          | 106 ++++++++++++++++++++++--------------
 2 files changed, 68 insertions(+), 42 deletions(-)

commit de54a0cfb64005ed7f4503b1b233d5febfcb608b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 30 12:16:02 2014 -0700

    build: require libbson 0.8.0.

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 7e83f65fda2961c113a30b9499b0828be13d18b0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 29 17:31:27 2014 -0700

    build: bump libbson for build improvements.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9718a19c3cd0f2d93edeb69d48427a3a21f126bb
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 29 17:31:03 2014 -0700

    build: remove support for installing yelp docs.
    
    We need to do things with proper linked files and all that, which we aren't
    today for almost no real value. No need to install the .page files.

 build/autotools/PrintBuildConfiguration.m4 | 4 ----
 build/autotools/SetupAutomake.m4           | 3 ---
 doc/Makefile.am                            | 5 -----
 3 files changed, 12 deletions(-)

commit 7308b48623a864369593f206c039e2e0b5a4d895
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 29 17:23:03 2014 -0700

    doc: clean directories during distclean and ship docs in bundle.

 doc/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit 58a01c59fe43329fcc0551cf353810f0e6619f59
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 29 17:18:07 2014 -0700

    build: bump libbson for size_t fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d8f9b87627c21467b1ebc802949f82adfe3765e5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 29 17:09:03 2014 -0700

    build: bump libbson for new docs.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9dbc8b09c84be7e8997b4ea936c5c08ef8a02175
Merge: 3bcf0ad 12ac8ad
Author: Christian Hergert <christian@hergert.me>
Date:   Thu May 29 15:24:18 2014 -0700

    Merge pull request #44 from gjmurakami-10gen/examples-bulk
    
    fix missing mongoc_bulk_operation_destroy

commit 12ac8ad8e22f444e3e38c45bced2e11a3aab00a9
Author: Gary Murakami <gary.murakami@10gen.com>
Date:   Thu May 29 15:59:47 2014 -0400

    fix missing mongoc_bulk_operation_destroy

 examples/bulk/bulk1.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 3bcf0adf5da161413965fa498bb9e3e5caa7f234
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 28 13:45:39 2014 -0700

    doc: handle output elements.

 doc/mallard2man.py | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit aac79e9bb56cf7a32e3d49b6f74c773d800b5113
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 27 13:50:39 2014 -0700

    doc: add subtitle.

 doc/index.page | 1 +
 1 file changed, 1 insertion(+)

commit 2b815609c3253b269cf37e9e2aa469cda6609ae5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 27 13:14:03 2014 -0700

    client: only try to create wrapper SSL stream if base_stream is valid.
    
    This fixes a bug where the method guards would protect against the
    creation of the wrapper stream. It can be verified with:
    
    ./example-client 'mongodb://invalid-hostname/?ssl=true'

 src/mongoc/mongoc-client.c | 52 ++++++++++++++++++++++++----------------------
 1 file changed, 27 insertions(+), 25 deletions(-)

commit 4dcc78c2e82d85d703bf4bab9b8acc54b27ff936
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 27 12:08:44 2014 -0700

    doc: add some comments to our connection examples.

 doc/advanced-connections.page | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 9ec03f53959e25af1421d4a9cd765a873b591b27
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 23 13:54:35 2014 -0700

    cursor: check for failure in _more().

 src/mongoc/mongoc-cursor.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 881f6d9c25b96ecd574cc71d2a84ca1266d1901c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 23 13:50:23 2014 -0700

    build: fix a few warnings.

 examples/bulk/bulk1.c             | 2 +-
 examples/bulk/bulk3.c             | 1 -
 src/mongoc/mongoc-write-command.c | 1 -
 3 files changed, 1 insertion(+), 3 deletions(-)

commit 3d5fc90703fb0684209dfeb9b1ec17eea58c5f80
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 23 13:28:32 2014 -0700

    build: bump libbson for out of tree build and size_t fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1d3debf25947745924f12b61c85bb7653581010b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 23 13:26:54 2014 -0700

    stat: fix build on mingw.

 src/tools/mongoc-stat.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 5342f05f2f9e20430e66107d4322814e306aa35d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 23 13:26:44 2014 -0700

    build: fix out of tree builds.

 examples/Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 96b922ef62bad90cc91db851d3cabc94e500aa40
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 18:37:27 2014 -0700

    doc: use output for prompt.

 doc/aggregate.page      | 8 ++++----
 doc/authentication.page | 2 +-
 doc/cursors.page        | 4 ++--
 doc/installing.page     | 6 +++---
 doc/matcher.page        | 4 ++--
 5 files changed, 12 insertions(+), 12 deletions(-)

commit ee999a261c4bf72d29dda97dd21bf522ad6b2490
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 16:42:20 2014 -0700

    docs: add note about libbson automatic bundling.

 README.rst | 1 +
 1 file changed, 1 insertion(+)

commit 47deafdfead12bd5667fc565424526b649acd2a1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 15:44:29 2014 -0700

    build: add even more hack to this very ugly shell script.

 build/solaris10/buildpkg.sh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 198cd89a567d131196451605cfb16af7b5447f66
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 15:33:11 2014 -0700

    write-commands: fix index of bulk write upserted index.
    
    When merging upsertion information, the indexes could have contained
    the actual offset of all mutations, not the index of the command that
    contained the upsertion.
    
    This fixes that, which also requires how many inserts we merged during
    the mongoc_write_command_insert_append() call.

 src/mongoc/mongoc-write-command-private.h |  2 ++
 src/mongoc/mongoc-write-command.c         | 60 ++++++++++++++++++++-----------
 2 files changed, 41 insertions(+), 21 deletions(-)

commit 0df5cb80da0cf40266375d429e87e0213bde398d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 13:25:53 2014 -0700

    examples: simplify bulk insert.

 examples/bulk/bulk1.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit a0498559833fbd8d9efa8fa8d4065bf61478a0a4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 13:21:50 2014 -0700

    doc: add bulk operation documentation section.

 doc/bulk.page  | 76 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 doc/index.page |  4 ++++
 2 files changed, 80 insertions(+)

commit 82b2d077bf51c49793297f5cac7653c713edb432
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 13:21:37 2014 -0700

    examples: add bulk operation examples.

 .gitignore            |  3 ++
 examples/Makefile.am  | 15 +++++++++
 examples/bulk/bulk1.c | 61 ++++++++++++++++++++++++++++++++++++
 examples/bulk/bulk2.c | 87 +++++++++++++++++++++++++++++++++++++++++++++++++++
 examples/bulk/bulk3.c | 77 +++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 243 insertions(+)

commit c5074d310fe30520318e984b4e49224fb52782c0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 12:56:35 2014 -0700

    write-commands: track total number of expected documents.

 src/mongoc/mongoc-write-command.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 6b37e71ebf30dd34825ee339c7dc64abb8365043
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 12:56:15 2014 -0700

    bulk: remove old bulk operations page.

 doc/bulk-operations.page | 26 --------------------------
 1 file changed, 26 deletions(-)

commit 038f86364167cee679a69fd95ca9e278fc91b0c1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 12:23:52 2014 -0700

    write-commands: coalesce repeated calls for bulk insert.

 src/mongoc/mongoc-bulk-operation.c        | 15 +++++++++++
 src/mongoc/mongoc-write-command-private.h |  3 +++
 src/mongoc/mongoc-write-command.c         | 44 ++++++++++++++++++++++---------
 3 files changed, 50 insertions(+), 12 deletions(-)

commit 8ecf6330e63d21ca6d74356285879f81bfb88092
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 12:05:44 2014 -0700

    apidoc: add mongoc_client_pool_set_ssl_opts().

 doc/mongoc_client_pool_set_ssl_opts.page | 38 ++++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)

commit 2c0cc68136cc827be68a84878d1670436d16611a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu May 22 11:24:07 2014 -0700

    stream-tls: mind the timeout units.
    
    During the transition to absolute timeouts to handle clock drift the units
    could have been 1000x the desired timeout value. stream functions take
    a relative timeout where as we track our absolute timeout using the
    monotonic clock, which is in microseconds.
    
    This changeset adjusts the name to make it clear which units we are using
    for the timeout to BIO methods.
    
    Fixes #43

 src/mongoc/mongoc-stream-tls.c | 26 ++++++++++++++------------
 1 file changed, 14 insertions(+), 12 deletions(-)

commit a6374def55181638aa753e3824622976eb5fde32
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 18:26:51 2014 -0700

    doc: bring in aggregation pipeline examples.

 doc/aggregate.page | 150 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 doc/index.page     |   4 ++
 2 files changed, 154 insertions(+)

commit 610939990e00869ba538fc6c7f4b528cda5351bd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 16:17:43 2014 -0700

    doc: remove old documentation from tree.

 doc/attic/Makefile.old                             |  74 -------
 doc/attic/asciidoc.conf                            |  51 -----
 doc/attic/check_docs.pl                            | 164 ---------------
 doc/attic/mongoc.txt                               |  43 ----
 doc/attic/mongoc_api                               |  17 --
 doc/attic/mongoc_api.txt                           |  17 --
 doc/attic/mongoc_bulk_operation.txt                |  67 ------
 doc/attic/mongoc_bulk_operation_delete.txt         |  54 -----
 doc/attic/mongoc_bulk_operation_delete_one.txt     |   1 -
 doc/attic/mongoc_bulk_operation_destroy.txt        |  41 ----
 doc/attic/mongoc_bulk_operation_execute.txt        |  60 ------
 doc/attic/mongoc_bulk_operation_insert.txt         |  45 -----
 doc/attic/mongoc_bulk_operation_replace_one.txt    |  46 -----
 doc/attic/mongoc_bulk_operation_update.txt         |  55 -----
 doc/attic/mongoc_bulk_operation_update_one.txt     |   1 -
 doc/attic/mongoc_cleanup.txt                       |   1 -
 doc/attic/mongoc_client.txt                        |  98 ---------
 doc/attic/mongoc_client_command.txt                |  86 --------
 doc/attic/mongoc_client_command_simple.txt         |   1 -
 doc/attic/mongoc_client_destroy.txt                |  40 ----
 doc/attic/mongoc_client_get_collection.txt         |  68 -------
 doc/attic/mongoc_client_get_database.txt           |   1 -
 doc/attic/mongoc_client_get_database_names.txt     |  69 -------
 doc/attic/mongoc_client_get_gridfs.txt             |   1 -
 doc/attic/mongoc_client_get_max_bson_size.txt      |  38 ----
 doc/attic/mongoc_client_get_max_message_size.txt   |   1 -
 doc/attic/mongoc_client_get_read_prefs.txt         |   1 -
 doc/attic/mongoc_client_get_server_status.txt      |  46 -----
 doc/attic/mongoc_client_get_uri.txt                |  42 ----
 doc/attic/mongoc_client_get_write_concern.txt      |  66 ------
 doc/attic/mongoc_client_new.txt                    |  50 -----
 doc/attic/mongoc_client_new_from_uri.txt           |   1 -
 doc/attic/mongoc_client_pool.txt                   |  88 --------
 doc/attic/mongoc_client_pool_destroy.txt           |  41 ----
 doc/attic/mongoc_client_pool_new.txt               |  43 ----
 doc/attic/mongoc_client_pool_pop.txt               |  60 ------
 doc/attic/mongoc_client_pool_push.txt              |   1 -
 doc/attic/mongoc_client_pool_try_pop.txt           |   1 -
 doc/attic/mongoc_client_set_read_prefs.txt         |   1 -
 doc/attic/mongoc_client_set_ssl_opts.txt           |  45 -----
 doc/attic/mongoc_client_set_stream_initiator.txt   | 113 -----------
 doc/attic/mongoc_client_set_write_concern.txt      |   1 -
 doc/attic/mongoc_collection.txt                    |  83 --------
 doc/attic/mongoc_collection_aggregate.txt          |  58 ------
 doc/attic/mongoc_collection_command.txt            |  81 --------
 doc/attic/mongoc_collection_command_simple.txt     |   1 -
 doc/attic/mongoc_collection_count.txt              |  55 -----
 .../mongoc_collection_create_bulk_operation.txt    |  67 ------
 doc/attic/mongoc_collection_create_index.txt       |   1 -
 doc/attic/mongoc_collection_delete.txt             |  55 -----
 doc/attic/mongoc_collection_destroy.txt            |  39 ----
 doc/attic/mongoc_collection_drop.txt               |  48 -----
 doc/attic/mongoc_collection_drop_index.txt         |  47 -----
 doc/attic/mongoc_collection_ensure_index.txt       |  77 -------
 doc/attic/mongoc_collection_find.txt               |  84 --------
 doc/attic/mongoc_collection_find_and_modify.txt    |  57 ------
 doc/attic/mongoc_collection_get_last_error.txt     |  46 -----
 doc/attic/mongoc_collection_get_name.txt           |  34 ----
 doc/attic/mongoc_collection_get_read_prefs.txt     |  70 -------
 doc/attic/mongoc_collection_get_write_concern.txt  |   1 -
 doc/attic/mongoc_collection_insert.txt             |  66 ------
 doc/attic/mongoc_collection_insert_bulk.txt        |   1 -
 .../mongoc_collection_keys_to_index_string.txt     |  47 -----
 doc/attic/mongoc_collection_rename.txt             |  44 ----
 doc/attic/mongoc_collection_save.txt               |  45 -----
 doc/attic/mongoc_collection_set_read_prefs.txt     |   1 -
 doc/attic/mongoc_collection_set_write_concern.txt  |   1 -
 doc/attic/mongoc_collection_stats.txt              |  44 ----
 doc/attic/mongoc_collection_update.txt             |  63 ------
 doc/attic/mongoc_collection_validate.txt           |  47 -----
 doc/attic/mongoc_cursor.txt                        | 101 ----------
 doc/attic/mongoc_cursor_clone.txt                  |  45 -----
 doc/attic/mongoc_cursor_current.txt                |  33 ---
 doc/attic/mongoc_cursor_destroy.txt                |  41 ----
 doc/attic/mongoc_cursor_error.txt                  |  43 ----
 doc/attic/mongoc_cursor_get_host.txt               |  54 -----
 doc/attic/mongoc_cursor_is_alive.txt               |  33 ---
 doc/attic/mongoc_cursor_more.txt                   |  43 ----
 doc/attic/mongoc_cursor_next.txt                   |  65 ------
 doc/attic/mongoc_database.txt                      |  78 -------
 doc/attic/mongoc_database_add_user.txt             |  75 -------
 doc/attic/mongoc_database_command.txt              |  81 --------
 doc/attic/mongoc_database_command_simple.txt       |   1 -
 doc/attic/mongoc_database_create_collection.txt    |  63 ------
 doc/attic/mongoc_database_destroy.txt              |  39 ----
 doc/attic/mongoc_database_drop.txt                 |  48 -----
 doc/attic/mongoc_database_get_collection.txt       |  33 ---
 doc/attic/mongoc_database_get_collection_names.txt |  58 ------
 doc/attic/mongoc_database_get_name.txt             |  31 ---
 doc/attic/mongoc_database_get_read_prefs.txt       |   1 -
 doc/attic/mongoc_database_get_write_concern.txt    |  70 -------
 doc/attic/mongoc_database_has_collection.txt       |  54 -----
 doc/attic/mongoc_database_remove_all_users.txt     |   1 -
 doc/attic/mongoc_database_remove_user.txt          |   1 -
 doc/attic/mongoc_database_set_read_prefs.txt       |   1 -
 doc/attic/mongoc_database_set_write_concern.txt    |   1 -
 doc/attic/mongoc_fd_set_nonblock.txt               |  41 ----
 doc/attic/mongoc_gridfs.txt                        |  92 ---------
 doc/attic/mongoc_gridfs_create_file.txt            |  71 -------
 .../mongoc_gridfs_create_file_from_stream.txt      |   1 -
 doc/attic/mongoc_gridfs_destroy.txt                |  51 -----
 doc/attic/mongoc_gridfs_drop.txt                   |  48 -----
 doc/attic/mongoc_gridfs_file.txt                   |  95 ---------
 doc/attic/mongoc_gridfs_file_destroy.txt           |  44 ----
 doc/attic/mongoc_gridfs_file_error.txt             |  43 ----
 doc/attic/mongoc_gridfs_file_get_aliases.txt       |  58 ------
 doc/attic/mongoc_gridfs_file_get_chunk_size.txt    |   1 -
 doc/attic/mongoc_gridfs_file_get_content_type.txt  |   1 -
 doc/attic/mongoc_gridfs_file_get_filename.txt      |   1 -
 doc/attic/mongoc_gridfs_file_get_length.txt        |   1 -
 doc/attic/mongoc_gridfs_file_get_md5.txt           |   1 -
 doc/attic/mongoc_gridfs_file_get_metadata.txt      |   1 -
 doc/attic/mongoc_gridfs_file_get_upload_date.txt   |   1 -
 doc/attic/mongoc_gridfs_file_list.txt              |  76 -------
 doc/attic/mongoc_gridfs_file_list_destroy.txt      |  44 ----
 doc/attic/mongoc_gridfs_file_list_error.txt        |  43 ----
 doc/attic/mongoc_gridfs_file_list_next.txt         |  59 ------
 doc/attic/mongoc_gridfs_file_readv.txt             |  93 ---------
 doc/attic/mongoc_gridfs_file_save.txt              |  43 ----
 doc/attic/mongoc_gridfs_file_seek.txt              |  76 -------
 doc/attic/mongoc_gridfs_file_set_aliases.txt       |   1 -
 doc/attic/mongoc_gridfs_file_set_content_type.txt  |   1 -
 doc/attic/mongoc_gridfs_file_set_filename.txt      |   1 -
 doc/attic/mongoc_gridfs_file_set_md5.txt           |   1 -
 doc/attic/mongoc_gridfs_file_set_metadata.txt      |   1 -
 doc/attic/mongoc_gridfs_file_tell.txt              |   1 -
 doc/attic/mongoc_gridfs_file_writev.txt            |   1 -
 doc/attic/mongoc_gridfs_find.txt                   |  67 ------
 doc/attic/mongoc_gridfs_find_one.txt               |   1 -
 doc/attic/mongoc_gridfs_find_one_by_filename.txt   |   1 -
 doc/attic/mongoc_gridfs_get_chunks.txt             |  38 ----
 doc/attic/mongoc_gridfs_get_files.txt              |  38 ----
 doc/attic/mongoc_index_opt_get_default.txt         | 137 -------------
 doc/attic/mongoc_index_opt_init.txt                |   1 -
 doc/attic/mongoc_init.txt                          |  63 ------
 doc/attic/mongoc_log.txt                           |  93 ---------
 doc/attic/mongoc_log_default_handler.txt           |   1 -
 doc/attic/mongoc_log_level_str.txt                 |  31 ---
 doc/attic/mongoc_log_set_handler.txt               |  54 -----
 doc/attic/mongoc_matcher_destroy.txt               |  40 ----
 doc/attic/mongoc_matcher_match.txt                 |  43 ----
 doc/attic/mongoc_matcher_new.txt                   |  43 ----
 doc/attic/mongoc_read_prefs.txt                    | 108 ----------
 doc/attic/mongoc_read_prefs_add_tag.txt            |  43 ----
 doc/attic/mongoc_read_prefs_copy.txt               |  42 ----
 doc/attic/mongoc_read_prefs_destroy.txt            |  40 ----
 doc/attic/mongoc_read_prefs_get_mode.txt           |  51 -----
 doc/attic/mongoc_read_prefs_get_tags.txt           |   1 -
 doc/attic/mongoc_read_prefs_is_valid.txt           |  42 ----
 doc/attic/mongoc_read_prefs_new.txt                |  43 ----
 doc/attic/mongoc_read_prefs_set_mode.txt           |   1 -
 doc/attic/mongoc_read_prefs_set_tags.txt           |   1 -
 doc/attic/mongoc_socket.txt                        |  37 ----
 doc/attic/mongoc_socket_accept.txt                 |   1 -
 doc/attic/mongoc_socket_bind.txt                   |  34 ----
 doc/attic/mongoc_socket_close.txt                  |   1 -
 doc/attic/mongoc_socket_connect.txt                |   1 -
 doc/attic/mongoc_socket_destroy.txt                |   1 -
 doc/attic/mongoc_socket_errno.txt                  |   1 -
 doc/attic/mongoc_socket_getnameinfo.txt            |  37 ----
 doc/attic/mongoc_socket_getsockname.txt            |  35 ----
 doc/attic/mongoc_socket_listen.txt                 |   1 -
 doc/attic/mongoc_socket_new.txt                    |  59 ------
 doc/attic/mongoc_socket_recv.txt                   |   1 -
 doc/attic/mongoc_socket_send.txt                   |   1 -
 doc/attic/mongoc_socket_sendv.txt                  |   1 -
 doc/attic/mongoc_socket_setsockopt.txt             |   1 -
 doc/attic/mongoc_ssl.txt                           |  96 ---------
 doc/attic/mongoc_ssl_opt_get_default.txt           |  42 ----
 doc/attic/mongoc_stream.txt                        | 105 ----------
 doc/attic/mongoc_stream_buffered_new.txt           |  49 -----
 doc/attic/mongoc_stream_close.txt                  |  44 ----
 doc/attic/mongoc_stream_cork.txt                   |  47 -----
 doc/attic/mongoc_stream_destroy.txt                |  40 ----
 doc/attic/mongoc_stream_file.txt                   |  47 -----
 doc/attic/mongoc_stream_file_get_fd.txt            |  37 ----
 doc/attic/mongoc_stream_file_new.txt               |  58 ------
 doc/attic/mongoc_stream_file_new_for_path.txt      |   1 -
 doc/attic/mongoc_stream_flush.txt                  |  48 -----
 doc/attic/mongoc_stream_get_base_stream.txt        |  31 ---
 doc/attic/mongoc_stream_gridfs_new.txt             |  47 -----
 doc/attic/mongoc_stream_read.txt                   |  70 -------
 doc/attic/mongoc_stream_readv.txt                  |  71 -------
 doc/attic/mongoc_stream_setsockopt.txt             |  50 -----
 doc/attic/mongoc_stream_socket.txt                 |  33 ---
 doc/attic/mongoc_stream_socket_get_socket.txt      |   1 -
 doc/attic/mongoc_stream_socket_new.txt             |  47 -----
 doc/attic/mongoc_stream_tls_check_cert.txt         |  51 -----
 doc/attic/mongoc_stream_tls_do_handshake.txt       |  52 -----
 doc/attic/mongoc_stream_tls_new.txt                |  54 -----
 doc/attic/mongoc_stream_uncork.txt                 |  45 -----
 doc/attic/mongoc_stream_unix_new.txt               |  47 -----
 doc/attic/mongoc_stream_writev.txt                 |  67 ------
 doc/attic/mongoc_symbols.txt                       | 201 ------------------
 doc/attic/mongoc_uri.txt                           | 224 ---------------------
 doc/attic/mongoc_uri_copy.txt                      |  39 ----
 doc/attic/mongoc_uri_destroy.txt                   |  39 ----
 doc/attic/mongoc_uri_get_auth_mechanism.txt        |   1 -
 doc/attic/mongoc_uri_get_auth_source.txt           |   1 -
 doc/attic/mongoc_uri_get_database.txt              |   1 -
 doc/attic/mongoc_uri_get_hosts.txt                 |  56 ------
 doc/attic/mongoc_uri_get_options.txt               |   1 -
 doc/attic/mongoc_uri_get_password.txt              |   1 -
 doc/attic/mongoc_uri_get_read_prefs.txt            |   1 -
 doc/attic/mongoc_uri_get_replica_set.txt           |   1 -
 doc/attic/mongoc_uri_get_ssl.txt                   |   1 -
 doc/attic/mongoc_uri_get_string.txt                |   1 -
 doc/attic/mongoc_uri_get_username.txt              |   1 -
 doc/attic/mongoc_uri_get_write_concern.txt         |   1 -
 doc/attic/mongoc_uri_new.txt                       |  49 -----
 doc/attic/mongoc_uri_new_for_host_port.txt         |   1 -
 doc/attic/mongoc_uri_unescape.txt                  |  41 ----
 doc/attic/mongoc_write_concern.txt                 | 108 ----------
 doc/attic/mongoc_write_concern_copy.txt            |  42 ----
 doc/attic/mongoc_write_concern_destroy.txt         |  41 ----
 doc/attic/mongoc_write_concern_get_fsync.txt       |  76 -------
 doc/attic/mongoc_write_concern_get_journal.txt     |   1 -
 doc/attic/mongoc_write_concern_get_w.txt           |   1 -
 doc/attic/mongoc_write_concern_get_wmajority.txt   |   1 -
 doc/attic/mongoc_write_concern_get_wtag.txt        |   1 -
 doc/attic/mongoc_write_concern_get_wtimeout.txt    |   1 -
 doc/attic/mongoc_write_concern_new.txt             |  42 ----
 doc/attic/mongoc_write_concern_set_fsync.txt       |   1 -
 doc/attic/mongoc_write_concern_set_journal.txt     |   1 -
 doc/attic/mongoc_write_concern_set_w.txt           |   1 -
 doc/attic/mongoc_write_concern_set_wmajority.txt   |   1 -
 doc/attic/mongoc_write_concern_set_wtag.txt        |   1 -
 doc/attic/mongoc_write_concern_set_wtimeout.txt    |   1 -
 228 files changed, 8585 deletions(-)

commit 8bcd93bf46e05d56202a8b07cfe0b573688658e6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 14:59:49 2014 -0700

    tests: namespace test collections so we don't drop test.

 tests/test-mongoc-database.c | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

commit 308a422797d5e31b2f445e0251fbc120b211de9d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 13:11:52 2014 -0700

    Revert "build: include -rpath $(libdir) with private library."
    
    This reverts commit fb0aff4ce8c87a2f137e54493efa109120aa4bac.

 src/Makefile.am | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 772229f9473bd513dad21cf2437cd0cd79bb0f79
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 13:09:08 2014 -0700

    test: print drop error upon failure.

 tests/test-mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit fb0aff4ce8c87a2f137e54493efa109120aa4bac
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 13:08:46 2014 -0700

    build: include -rpath $(libdir) with private library.

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit a2255fe5e617ce410358d8266f0116200131a01e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 12:35:52 2014 -0700

    sasl: try to give a nice runtime error if server doesn't have sasl enabled.

 src/mongoc/mongoc-sasl.c | 14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)

commit 66966770e0fbe711ba43dc4c4a010723cecdac66
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 12:09:37 2014 -0700

    write-command: generate _id client side if it is missing.
    
    This was being enforced in other places, better to catch-all here when
    creating a new write command.

 src/mongoc/mongoc-write-command.c | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

commit 8f3d64d4ae5ebce65fbd3bc7c001ba3afcc25673
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 11:46:44 2014 -0700

    bulk: add runtime protection against multiple calls to execute.

 doc/mongoc_bulk_operation_execute.page     |  2 ++
 doc/mongoc_bulk_operation_t.page           |  1 +
 src/mongoc/mongoc-bulk-operation-private.h |  1 +
 src/mongoc/mongoc-bulk-operation.c         | 12 ++++++++++++
 4 files changed, 16 insertions(+)

commit 7b18d80917d7b75f62713f1c5138cf0dfd16c83a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed May 21 00:12:35 2014 -0700

    doc: install man3 pages for generated man pages.

 doc/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 61d0ed4bef24b08e1aeb8c27a2578de394e52b4d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 17:00:45 2014 -0700

    build: bump libbson for clock fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1c8fc87e54aa2def993fb09fd9e375427b6859e1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 16:38:25 2014 -0700

    doc: update the aggregation example to reflect new desired format.

 doc/mongoc_collection_aggregate.page | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 70d5eba51432b7b34b3ad791776f9aa8f66ba526
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 16:35:20 2014 -0700

    collection: allow "pipeline":[] or "0":{} style for aggregation.

 src/mongoc/mongoc-collection.c | 20 +++++++++++++++-----
 tests/test-mongoc-collection.c | 35 +++++++++++++++++++----------------
 2 files changed, 34 insertions(+), 21 deletions(-)

commit 9b6f6e8236083fe4fd5ed3da9e2d332568d54259
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 11:19:03 2014 -0700

    examples: remove unused variable.

 examples/example-matcher.c | 1 -
 1 file changed, 1 deletion(-)

commit 2b17c768f9123d1641df1d541566567b55571b84
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 11:18:37 2014 -0700

    stream-gridfs: remove unused variable.

 src/mongoc/mongoc-stream-gridfs.c | 2 --
 1 file changed, 2 deletions(-)

commit 0efae455012dfb116e5ddc46683328b84106c7bd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 11:17:53 2014 -0700

    rpc: remove unused inlines generated by header swabbing.

 src/mongoc/mongoc-rpc.c | 2 --
 1 file changed, 2 deletions(-)

commit 280b9ee7118bef92b79db3fa5d0558352033a544
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 11:16:52 2014 -0700

    cluster: don't shadow socket function.

 src/mongoc/mongoc-cluster.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 401dd331ac5aae605b3fb1273b73239b294ef6c4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 11:15:58 2014 -0700

    build: bump libbson for context fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 320291cbd603b3439de4efcc95a2f0d60c768f78
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 10:53:55 2014 -0700

    examples: plug leak in example

 examples/example-matcher.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2462e1508aca490c89af249f5e45adf15b044a93
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 00:26:21 2014 -0700

    doc: remove sasl blurb now that it detects libsasl.so on Solaris 10.

 doc/installing.page | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit a57bead377867987311c9ae34c2d4e66b05d8b4b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 00:16:54 2014 -0700

    tests: destroy gridfs file after stream is destroyed.

 tests/test-mongoc-gridfs.c | 2 ++
 1 file changed, 2 insertions(+)

commit 07dde6c98463923c795f98623e256bf592b470a9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue May 20 00:14:10 2014 -0700

    gridfs: dont transfer ownership of gridfs file to stream.

 doc/mongoc_stream_gridfs_new.page | 2 +-
 src/mongoc/mongoc-stream-gridfs.c | 2 --
 2 files changed, 1 insertion(+), 3 deletions(-)

commit 24e304249b09a0ad30cee6f980049e6f328fb524
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 23:54:08 2014 -0700

    doc: add example and docs for client side document matching.

 .gitignore                 |  2 +-
 doc/index.page             |  4 ++++
 doc/matcher.page           | 40 +++++++++++++++++++++++++++++++
 examples/Makefile.am       |  5 ++++
 examples/example-matcher.c | 59 ++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 109 insertions(+), 1 deletion(-)

commit e5c4bdae3803cbf01e7ae404853a5fca96f199ff
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 23:34:01 2014 -0700

    matcher: perform descendent iteration if key contains '.'

 src/mongoc/mongoc-matcher-op.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit c48019104a2e205c2083c962df84ab1ecf2bfe34
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 22:24:31 2014 -0700

    build: use -D_REENTRANT on Solaris for proper errno.
    
    Without -D_REENTRANT, various errno checks will fail in threaded
    scenarios. We probably need to document this for consumers, but that
    needs more testing to determine if it is necessary.

 src/Makefile.am   | 8 +++++++-
 tests/Makefile.am | 8 +++++++-
 2 files changed, 14 insertions(+), 2 deletions(-)

commit 5edc2681091d0bd28e36ae2e558f414b89a26268
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 20:26:54 2014 -0700

    tests: use captured copy of errno.

 tests/ssl-test.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 0d7ce68666079bb08bc10c0ce3059c8c71f57253
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 19:47:37 2014 -0700

    build: allow --enable-sasl=no

 build/autotools/CheckSasl.m4 | 40 +++++++++++++++++++++-------------------
 1 file changed, 21 insertions(+), 19 deletions(-)

commit b93ed1593e7deb30e2af9c34652139419cfa5743
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 19:45:35 2014 -0700

    build: allow --enable-ssl=no with SSL installed.

 build/autotools/CheckSSL.m4 | 45 ++++++++++++++++++++++-----------------------
 1 file changed, 22 insertions(+), 23 deletions(-)

commit c8306264fab72261ef0020b61f73cc9b8fb48001
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 19:15:00 2014 -0700

    build: wrap SSL check in PKG_CHECK_MODULES.

 build/autotools/CheckSSL.m4 | 40 +++++++++++++++++++++-------------------
 1 file changed, 21 insertions(+), 19 deletions(-)

commit 832ffdacc747ac96bc6d5baf59b9dd97e367a88d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 19:13:38 2014 -0700

    build: do a PKG_CHECK_MODULES() before fallback checks.

 build/autotools/CheckSasl.m4 | 38 ++++++++++++++++++++------------------
 1 file changed, 20 insertions(+), 18 deletions(-)

commit 236bcc85b524d894cd9e82de3a65ea18c9128061
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 19:05:16 2014 -0700

    build: manually check for openssl.
    
    This should allow us to drop pkg-config support now, which has been
    less than useful on exotic platforms.

 build/autotools/CheckSSL.m4                 | 44 +++++++++++++++++++++++++++++
 build/autotools/FindDependencies.m4         |  9 ------
 build/autotools/ReadCommandLineArguments.m4 |  7 -----
 configure.ac                                |  1 +
 4 files changed, 45 insertions(+), 16 deletions(-)

commit 40aab9d5e9801ec3fc1bdfcefe766cb4f0a0d211
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 18:34:57 2014 -0700

    build: perform SASL checks manually.
    
    So many systems are completely broken with regards to pkg-config and
    libsasl (let alone libsasl2). So let's just do all this junk manually.

 build/autotools/CheckSasl.m4                | 43 +++++++++++++++++++++++++++++
 build/autotools/FindDependencies.m4         | 10 -------
 build/autotools/PrintBuildConfiguration.m4  |  2 +-
 build/autotools/ReadCommandLineArguments.m4 |  7 -----
 configure.ac                                |  1 +
 5 files changed, 45 insertions(+), 18 deletions(-)

commit 6ad23132ce79f5ed6a5011c2005c0b5f15586f54
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 17:36:04 2014 -0700

    docs: enable building of html, man, and yelp documentation targets.

 Makefile.am                                  |  2 +-
 build/autotools/CheckProgs.m4                | 15 +++-------
 build/autotools/PrintBuildConfiguration.m4   |  5 ++--
 build/autotools/ReadCommandLineArguments.m4  | 18 ++++++++++++
 build/autotools/SetupAutomake.m4             | 11 +++++++
 build/autotools/m4/mongoc_check_doc_build.m4 | 44 ----------------------------
 doc/Makefile.am                              | 32 ++++++++++++--------
 7 files changed, 56 insertions(+), 71 deletions(-)

commit d9734868cf15f891bb6ff082e6b3812a2b2f39b6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 15:38:17 2014 -0700

    build: add missing remove functions to ABI.

 build/cmake/libmongoc-ssl.def | 3 +++
 build/cmake/libmongoc.def     | 3 +++
 src/libmongoc.symbols         | 3 +++
 3 files changed, 9 insertions(+)

commit 55098357a1f3a61f0c5755de774f59a830ccc641
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 15:36:21 2014 -0700

    tests: allow port to be in MONGOC_TEST_HOST.

 tests/test-mongoc-client.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 856c8dc9dcd52e66b3355773a4ea077fd5372597
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 15:24:51 2014 -0700

    test: only do IPv6 check if MONGOC_CHECK_IPV6 is set.

 tests/test-mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b2e42f0f0ff55188d38ba91f3454e418fca5a239
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 15:16:48 2014 -0700

    build: bump libbson for test fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1a7b73998de1a35cc5be95974850a0f3e4b1e8e6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 14:50:33 2014 -0700

    Revert "Be gentle to user provided BSON include path and only modify if really"
    
    This reverts commit 9ac0eb0f6850ad4aefc4043d19aea4fe70e6817f.
    
    This was breaking the default CMake build on Windows.

 build/cmake/FindBSON.cmake | 2 --
 1 file changed, 2 deletions(-)

commit 33bbc08953d20464b5a46019b6d0c4c22244df6c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 14:20:54 2014 -0700

    tools: suprcess zealous clang cast align warning.
    
    These are checked in various other places for correctness. Silence the
    clang warning which can't detect that this is the case.
    
    Also add an assertion just to be safe :)

 src/tools/mongoc-stat.c | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)

commit 3d2bae2de663a0db9403713d1c2267a443a074f0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 14:05:32 2014 -0700

    doc: only install man pages if automake conditional is set.

 doc/Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit cb1b2f9ec3a0273e47898a388f0e135b8876e06e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 14:01:54 2014 -0700

    database: use mongoc_remove_flags_t.

 src/mongoc/mongoc-database.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f742590816f2c3bc48d53ab051bef350e4c9ff82
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 14:00:54 2014 -0700

    client-pool: only set SSL opts if we are compiling with SSL support.

 src/mongoc/mongoc-client-pool.c | 4 ++++
 1 file changed, 4 insertions(+)

commit d2379f7d079fd1b427652f52c3ee26ed527a87e5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 13:49:29 2014 -0700

    build: add mongoc_client_pool_set_ssl_opts() to ABI.

 build/cmake/libmongoc-ssl.def | 1 +
 build/cmake/libmongoc.def     | 1 +
 src/libmongoc.symbols         | 1 +
 3 files changed, 3 insertions(+)

commit a944e2133b39b53d3099af378fd2d1a3f73ac9fe
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 13:47:39 2014 -0700

    build: bump libbson for various fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0b521ecce11bbdbda884d38c3b655db94bd85ab9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 13:39:37 2014 -0700

    build: update ax_pthread for some clang fixes.

 build/autotools/m4/ax_pthread.m4 | 49 ++++++++++++++++++++++++++--------------
 1 file changed, 32 insertions(+), 17 deletions(-)

commit af054de205938fde377c73e82685d9d106d2dc49
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 13:13:56 2014 -0700

    tests: disable deprecation support for clang.

 tests/mongoc-tests.h | 6 ++++++
 1 file changed, 6 insertions(+)

commit 409bfbd194b0cc14c29463fad62b59f0e3dc5e5b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 12:53:17 2014 -0700

    tests: use proper flags for removal.

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b0a2b4a42a30ad1af54680349a8fa8b3a2795346
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 12:51:22 2014 -0700

    doc: bail on systems without support to generate man pages.

 doc/mallard2man.py | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit a3510448fea4edc1bd56e70fbb293a87a0f97939
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 19 11:59:00 2014 -0700

    client-pool: add mongoc_client_pool_set_ssl_opts().
    
    This allows setting the default ssl opts for a client pool. All created
    clients will share this setting.

 src/mongoc/mongoc-client-pool.c | 41 ++++++++++++++++++++++++++++++++++++-----
 src/mongoc/mongoc-client-pool.h |  6 ++++++
 2 files changed, 42 insertions(+), 5 deletions(-)

commit 293813f65302b9aaca4b2a8e705e52efab7f0697
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 16 18:40:33 2014 -0700

    doc: start on bulk operations doc.

 doc/bulk-operations.page | 26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)

commit 537875bb03738c2e10a56c9539eeb3591a158974
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 16 16:29:02 2014 -0700

    doc: add new topic based help.
    
    This uses mallard for topic based help as well as functional documentation
    (API Reference). It includes inline examples, clean HTML formatting, and
    manpage generation (this could still use a little incremental work though).
    
    Automake fixes for installing manpages will be in a followup patch.

 Makefile.am                                        |   1 +
 doc/.gitignore                                     |   2 +-
 doc/Makefile.am                                    |  83 ++----
 doc/advanced-connections.page                      | 140 ++++++++++
 doc/asciidoc.conf                                  |  51 ----
 doc/attic/Makefile.old                             |  74 ++++++
 doc/attic/asciidoc.conf                            |  51 ++++
 doc/attic/check_docs.pl                            | 164 ++++++++++++
 doc/attic/mongoc.txt                               |  43 +++
 doc/attic/mongoc_api                               |  17 ++
 doc/attic/mongoc_api.txt                           |  17 ++
 doc/attic/mongoc_bulk_operation.txt                |  67 +++++
 doc/attic/mongoc_bulk_operation_delete.txt         |  54 ++++
 doc/attic/mongoc_bulk_operation_delete_one.txt     |   1 +
 doc/attic/mongoc_bulk_operation_destroy.txt        |  41 +++
 doc/attic/mongoc_bulk_operation_execute.txt        |  60 +++++
 doc/attic/mongoc_bulk_operation_insert.txt         |  45 ++++
 doc/attic/mongoc_bulk_operation_replace_one.txt    |  46 ++++
 doc/attic/mongoc_bulk_operation_update.txt         |  55 ++++
 doc/attic/mongoc_bulk_operation_update_one.txt     |   1 +
 doc/attic/mongoc_cleanup.txt                       |   1 +
 doc/attic/mongoc_client.txt                        |  98 +++++++
 doc/attic/mongoc_client_command.txt                |  86 ++++++
 doc/attic/mongoc_client_command_simple.txt         |   1 +
 doc/attic/mongoc_client_destroy.txt                |  40 +++
 doc/attic/mongoc_client_get_collection.txt         |  68 +++++
 doc/attic/mongoc_client_get_database.txt           |   1 +
 doc/attic/mongoc_client_get_database_names.txt     |  69 +++++
 doc/attic/mongoc_client_get_gridfs.txt             |   1 +
 doc/attic/mongoc_client_get_max_bson_size.txt      |  38 +++
 doc/attic/mongoc_client_get_max_message_size.txt   |   1 +
 doc/attic/mongoc_client_get_read_prefs.txt         |   1 +
 doc/attic/mongoc_client_get_server_status.txt      |  46 ++++
 doc/attic/mongoc_client_get_uri.txt                |  42 +++
 doc/attic/mongoc_client_get_write_concern.txt      |  66 +++++
 doc/attic/mongoc_client_new.txt                    |  50 ++++
 doc/attic/mongoc_client_new_from_uri.txt           |   1 +
 doc/attic/mongoc_client_pool.txt                   |  88 ++++++
 doc/attic/mongoc_client_pool_destroy.txt           |  41 +++
 doc/attic/mongoc_client_pool_new.txt               |  43 +++
 doc/attic/mongoc_client_pool_pop.txt               |  60 +++++
 doc/attic/mongoc_client_pool_push.txt              |   1 +
 doc/attic/mongoc_client_pool_try_pop.txt           |   1 +
 doc/attic/mongoc_client_set_read_prefs.txt         |   1 +
 doc/attic/mongoc_client_set_ssl_opts.txt           |  45 ++++
 doc/attic/mongoc_client_set_stream_initiator.txt   | 113 ++++++++
 doc/attic/mongoc_client_set_write_concern.txt      |   1 +
 doc/attic/mongoc_collection.txt                    |  83 ++++++
 doc/attic/mongoc_collection_aggregate.txt          |  58 ++++
 doc/attic/mongoc_collection_command.txt            |  81 ++++++
 doc/attic/mongoc_collection_command_simple.txt     |   1 +
 doc/attic/mongoc_collection_count.txt              |  55 ++++
 .../mongoc_collection_create_bulk_operation.txt    |  67 +++++
 doc/attic/mongoc_collection_create_index.txt       |   1 +
 doc/attic/mongoc_collection_delete.txt             |  55 ++++
 doc/attic/mongoc_collection_destroy.txt            |  39 +++
 doc/attic/mongoc_collection_drop.txt               |  48 ++++
 doc/attic/mongoc_collection_drop_index.txt         |  47 ++++
 doc/attic/mongoc_collection_ensure_index.txt       |  77 ++++++
 doc/attic/mongoc_collection_find.txt               |  84 ++++++
 doc/attic/mongoc_collection_find_and_modify.txt    |  57 ++++
 doc/attic/mongoc_collection_get_last_error.txt     |  46 ++++
 doc/attic/mongoc_collection_get_name.txt           |  34 +++
 doc/attic/mongoc_collection_get_read_prefs.txt     |  70 +++++
 doc/attic/mongoc_collection_get_write_concern.txt  |   1 +
 doc/attic/mongoc_collection_insert.txt             |  66 +++++
 doc/attic/mongoc_collection_insert_bulk.txt        |   1 +
 .../mongoc_collection_keys_to_index_string.txt     |  47 ++++
 doc/attic/mongoc_collection_rename.txt             |  44 +++
 doc/attic/mongoc_collection_save.txt               |  45 ++++
 doc/attic/mongoc_collection_set_read_prefs.txt     |   1 +
 doc/attic/mongoc_collection_set_write_concern.txt  |   1 +
 doc/attic/mongoc_collection_stats.txt              |  44 +++
 doc/attic/mongoc_collection_update.txt             |  63 +++++
 doc/attic/mongoc_collection_validate.txt           |  47 ++++
 doc/attic/mongoc_cursor.txt                        | 101 +++++++
 doc/attic/mongoc_cursor_clone.txt                  |  45 ++++
 doc/attic/mongoc_cursor_current.txt                |  33 +++
 doc/attic/mongoc_cursor_destroy.txt                |  41 +++
 doc/attic/mongoc_cursor_error.txt                  |  43 +++
 doc/attic/mongoc_cursor_get_host.txt               |  54 ++++
 doc/attic/mongoc_cursor_is_alive.txt               |  33 +++
 doc/attic/mongoc_cursor_more.txt                   |  43 +++
 doc/attic/mongoc_cursor_next.txt                   |  65 +++++
 doc/attic/mongoc_database.txt                      |  78 ++++++
 doc/attic/mongoc_database_add_user.txt             |  75 ++++++
 doc/attic/mongoc_database_command.txt              |  81 ++++++
 doc/attic/mongoc_database_command_simple.txt       |   1 +
 doc/attic/mongoc_database_create_collection.txt    |  63 +++++
 doc/attic/mongoc_database_destroy.txt              |  39 +++
 doc/attic/mongoc_database_drop.txt                 |  48 ++++
 doc/attic/mongoc_database_get_collection.txt       |  33 +++
 doc/attic/mongoc_database_get_collection_names.txt |  58 ++++
 doc/attic/mongoc_database_get_name.txt             |  31 +++
 doc/attic/mongoc_database_get_read_prefs.txt       |   1 +
 doc/attic/mongoc_database_get_write_concern.txt    |  70 +++++
 doc/attic/mongoc_database_has_collection.txt       |  54 ++++
 doc/attic/mongoc_database_remove_all_users.txt     |   1 +
 doc/attic/mongoc_database_remove_user.txt          |   1 +
 doc/attic/mongoc_database_set_read_prefs.txt       |   1 +
 doc/attic/mongoc_database_set_write_concern.txt    |   1 +
 doc/attic/mongoc_fd_set_nonblock.txt               |  41 +++
 doc/attic/mongoc_gridfs.txt                        |  92 +++++++
 doc/attic/mongoc_gridfs_create_file.txt            |  71 +++++
 .../mongoc_gridfs_create_file_from_stream.txt      |   1 +
 doc/attic/mongoc_gridfs_destroy.txt                |  51 ++++
 doc/attic/mongoc_gridfs_drop.txt                   |  48 ++++
 doc/attic/mongoc_gridfs_file.txt                   |  95 +++++++
 doc/attic/mongoc_gridfs_file_destroy.txt           |  44 +++
 doc/attic/mongoc_gridfs_file_error.txt             |  43 +++
 doc/attic/mongoc_gridfs_file_get_aliases.txt       |  58 ++++
 doc/attic/mongoc_gridfs_file_get_chunk_size.txt    |   1 +
 doc/attic/mongoc_gridfs_file_get_content_type.txt  |   1 +
 doc/attic/mongoc_gridfs_file_get_filename.txt      |   1 +
 doc/attic/mongoc_gridfs_file_get_length.txt        |   1 +
 doc/attic/mongoc_gridfs_file_get_md5.txt           |   1 +
 doc/attic/mongoc_gridfs_file_get_metadata.txt      |   1 +
 doc/attic/mongoc_gridfs_file_get_upload_date.txt   |   1 +
 doc/attic/mongoc_gridfs_file_list.txt              |  76 ++++++
 doc/attic/mongoc_gridfs_file_list_destroy.txt      |  44 +++
 doc/attic/mongoc_gridfs_file_list_error.txt        |  43 +++
 doc/attic/mongoc_gridfs_file_list_next.txt         |  59 +++++
 doc/attic/mongoc_gridfs_file_readv.txt             |  93 +++++++
 doc/attic/mongoc_gridfs_file_save.txt              |  43 +++
 doc/attic/mongoc_gridfs_file_seek.txt              |  76 ++++++
 doc/attic/mongoc_gridfs_file_set_aliases.txt       |   1 +
 doc/attic/mongoc_gridfs_file_set_content_type.txt  |   1 +
 doc/attic/mongoc_gridfs_file_set_filename.txt      |   1 +
 doc/attic/mongoc_gridfs_file_set_md5.txt           |   1 +
 doc/attic/mongoc_gridfs_file_set_metadata.txt      |   1 +
 doc/attic/mongoc_gridfs_file_tell.txt              |   1 +
 doc/attic/mongoc_gridfs_file_writev.txt            |   1 +
 doc/attic/mongoc_gridfs_find.txt                   |  67 +++++
 doc/attic/mongoc_gridfs_find_one.txt               |   1 +
 doc/attic/mongoc_gridfs_find_one_by_filename.txt   |   1 +
 doc/attic/mongoc_gridfs_get_chunks.txt             |  38 +++
 doc/attic/mongoc_gridfs_get_files.txt              |  38 +++
 doc/attic/mongoc_index_opt_get_default.txt         | 137 ++++++++++
 doc/attic/mongoc_index_opt_init.txt                |   1 +
 doc/attic/mongoc_init.txt                          |  63 +++++
 doc/attic/mongoc_log.txt                           |  93 +++++++
 doc/attic/mongoc_log_default_handler.txt           |   1 +
 doc/attic/mongoc_log_level_str.txt                 |  31 +++
 doc/attic/mongoc_log_set_handler.txt               |  54 ++++
 doc/attic/mongoc_matcher_destroy.txt               |  40 +++
 doc/attic/mongoc_matcher_match.txt                 |  43 +++
 doc/attic/mongoc_matcher_new.txt                   |  43 +++
 doc/attic/mongoc_read_prefs.txt                    | 108 ++++++++
 doc/attic/mongoc_read_prefs_add_tag.txt            |  43 +++
 doc/attic/mongoc_read_prefs_copy.txt               |  42 +++
 doc/attic/mongoc_read_prefs_destroy.txt            |  40 +++
 doc/attic/mongoc_read_prefs_get_mode.txt           |  51 ++++
 doc/attic/mongoc_read_prefs_get_tags.txt           |   1 +
 doc/attic/mongoc_read_prefs_is_valid.txt           |  42 +++
 doc/attic/mongoc_read_prefs_new.txt                |  43 +++
 doc/attic/mongoc_read_prefs_set_mode.txt           |   1 +
 doc/attic/mongoc_read_prefs_set_tags.txt           |   1 +
 doc/attic/mongoc_socket.txt                        |  37 +++
 doc/attic/mongoc_socket_accept.txt                 |   1 +
 doc/attic/mongoc_socket_bind.txt                   |  34 +++
 doc/attic/mongoc_socket_close.txt                  |   1 +
 doc/attic/mongoc_socket_connect.txt                |   1 +
 doc/attic/mongoc_socket_destroy.txt                |   1 +
 doc/attic/mongoc_socket_errno.txt                  |   1 +
 doc/attic/mongoc_socket_getnameinfo.txt            |  37 +++
 doc/attic/mongoc_socket_getsockname.txt            |  35 +++
 doc/attic/mongoc_socket_listen.txt                 |   1 +
 doc/attic/mongoc_socket_new.txt                    |  59 +++++
 doc/attic/mongoc_socket_recv.txt                   |   1 +
 doc/attic/mongoc_socket_send.txt                   |   1 +
 doc/attic/mongoc_socket_sendv.txt                  |   1 +
 doc/attic/mongoc_socket_setsockopt.txt             |   1 +
 doc/attic/mongoc_ssl.txt                           |  96 +++++++
 doc/attic/mongoc_ssl_opt_get_default.txt           |  42 +++
 doc/attic/mongoc_stream.txt                        | 105 ++++++++
 doc/attic/mongoc_stream_buffered_new.txt           |  49 ++++
 doc/attic/mongoc_stream_close.txt                  |  44 +++
 doc/attic/mongoc_stream_cork.txt                   |  47 ++++
 doc/attic/mongoc_stream_destroy.txt                |  40 +++
 doc/attic/mongoc_stream_file.txt                   |  47 ++++
 doc/attic/mongoc_stream_file_get_fd.txt            |  37 +++
 doc/attic/mongoc_stream_file_new.txt               |  58 ++++
 doc/attic/mongoc_stream_file_new_for_path.txt      |   1 +
 doc/attic/mongoc_stream_flush.txt                  |  48 ++++
 doc/attic/mongoc_stream_get_base_stream.txt        |  31 +++
 doc/attic/mongoc_stream_gridfs_new.txt             |  47 ++++
 doc/attic/mongoc_stream_read.txt                   |  70 +++++
 doc/attic/mongoc_stream_readv.txt                  |  71 +++++
 doc/attic/mongoc_stream_setsockopt.txt             |  50 ++++
 doc/attic/mongoc_stream_socket.txt                 |  33 +++
 doc/attic/mongoc_stream_socket_get_socket.txt      |   1 +
 doc/attic/mongoc_stream_socket_new.txt             |  47 ++++
 doc/attic/mongoc_stream_tls_check_cert.txt         |  51 ++++
 doc/attic/mongoc_stream_tls_do_handshake.txt       |  52 ++++
 doc/attic/mongoc_stream_tls_new.txt                |  54 ++++
 doc/attic/mongoc_stream_uncork.txt                 |  45 ++++
 doc/attic/mongoc_stream_unix_new.txt               |  47 ++++
 doc/attic/mongoc_stream_writev.txt                 |  67 +++++
 doc/attic/mongoc_symbols.txt                       | 201 ++++++++++++++
 doc/attic/mongoc_uri.txt                           | 224 ++++++++++++++++
 doc/attic/mongoc_uri_copy.txt                      |  39 +++
 doc/attic/mongoc_uri_destroy.txt                   |  39 +++
 doc/attic/mongoc_uri_get_auth_mechanism.txt        |   1 +
 doc/attic/mongoc_uri_get_auth_source.txt           |   1 +
 doc/attic/mongoc_uri_get_database.txt              |   1 +
 doc/attic/mongoc_uri_get_hosts.txt                 |  56 ++++
 doc/attic/mongoc_uri_get_options.txt               |   1 +
 doc/attic/mongoc_uri_get_password.txt              |   1 +
 doc/attic/mongoc_uri_get_read_prefs.txt            |   1 +
 doc/attic/mongoc_uri_get_replica_set.txt           |   1 +
 doc/attic/mongoc_uri_get_ssl.txt                   |   1 +
 doc/attic/mongoc_uri_get_string.txt                |   1 +
 doc/attic/mongoc_uri_get_username.txt              |   1 +
 doc/attic/mongoc_uri_get_write_concern.txt         |   1 +
 doc/attic/mongoc_uri_new.txt                       |  49 ++++
 doc/attic/mongoc_uri_new_for_host_port.txt         |   1 +
 doc/attic/mongoc_uri_unescape.txt                  |  41 +++
 doc/attic/mongoc_write_concern.txt                 | 108 ++++++++
 doc/attic/mongoc_write_concern_copy.txt            |  42 +++
 doc/attic/mongoc_write_concern_destroy.txt         |  41 +++
 doc/attic/mongoc_write_concern_get_fsync.txt       |  76 ++++++
 doc/attic/mongoc_write_concern_get_journal.txt     |   1 +
 doc/attic/mongoc_write_concern_get_w.txt           |   1 +
 doc/attic/mongoc_write_concern_get_wmajority.txt   |   1 +
 doc/attic/mongoc_write_concern_get_wtag.txt        |   1 +
 doc/attic/mongoc_write_concern_get_wtimeout.txt    |   1 +
 doc/attic/mongoc_write_concern_new.txt             |  42 +++
 doc/attic/mongoc_write_concern_set_fsync.txt       |   1 +
 doc/attic/mongoc_write_concern_set_journal.txt     |   1 +
 doc/attic/mongoc_write_concern_set_w.txt           |   1 +
 doc/attic/mongoc_write_concern_set_wmajority.txt   |   1 +
 doc/attic/mongoc_write_concern_set_wtag.txt        |   1 +
 doc/attic/mongoc_write_concern_set_wtimeout.txt    |   1 +
 doc/authentication.page                            | 106 ++++++++
 doc/basic-prequisites.xml                          |  12 +
 doc/basic-troubleshooting.page                     | 109 ++++++++
 doc/check_docs.pl                                  | 164 ------------
 doc/cursors.page                                   |  70 +++++
 doc/deleting-document.page                         | 100 +++++++
 doc/executing-command.page                         |  99 +++++++
 doc/finding-document.page                          | 173 ++++++++++++
 doc/index.page                                     |  33 +++
 doc/inserting-document.page                        | 102 +++++++
 doc/installing.page                                | 177 +++++++++++++
 doc/logging.page                                   |  71 +++++
 doc/mallard/advanced-connections.page              | 136 ----------
 doc/mallard/authentication.page                    | 104 --------
 doc/mallard/basic-prequisites.xml                  |  12 -
 doc/mallard/basic-troubleshooting.page             | 109 --------
 doc/mallard/deleting-document.page                 | 100 -------
 doc/mallard/executing-command.page                 |  99 -------
 doc/mallard/finding-document.page                  | 173 ------------
 doc/mallard/index.page                             |  29 --
 doc/mallard/inserting-document.page                | 102 -------
 doc/mallard/installing-mongo-c-driver.page         | 262 ------------------
 doc/mallard/logging.page                           |  71 -----
 doc/mallard/mongoc_bulk_operation_delete.page      |  38 ---
 doc/mallard/mongoc_bulk_operation_delete_one.page  |  38 ---
 doc/mallard/mongoc_bulk_operation_destroy.page     |  32 ---
 doc/mallard/mongoc_bulk_operation_execute.page     |  48 ----
 doc/mallard/mongoc_bulk_operation_insert.page      |  36 ---
 doc/mallard/mongoc_bulk_operation_replace_one.page |  43 ---
 doc/mallard/mongoc_bulk_operation_t.page           |  27 --
 doc/mallard/mongoc_bulk_operation_update.page      |  46 ----
 doc/mallard/mongoc_bulk_operation_update_one.page  |  43 ---
 doc/mallard/mongoc_cleanup.page                    |  22 --
 doc/mallard/mongoc_client_command.page             |  53 ----
 doc/mallard/mongoc_client_command_simple.page      |  53 ----
 doc/mallard/mongoc_client_destroy.page             |  31 ---
 doc/mallard/mongoc_client_get_collection.page      |  41 ---
 doc/mallard/mongoc_client_get_database.page        |  36 ---
 doc/mallard/mongoc_client_get_database_names.page  |  61 -----
 doc/mallard/mongoc_client_get_gridfs.page          |  47 ----
 doc/mallard/mongoc_client_get_max_bson_size.page   |  33 ---
 .../mongoc_client_get_max_message_size.page        |  33 ---
 doc/mallard/mongoc_client_get_read_prefs.page      |  35 ---
 doc/mallard/mongoc_client_get_server_status.page   |  48 ----
 doc/mallard/mongoc_client_get_uri.page             |  35 ---
 doc/mallard/mongoc_client_get_write_concern.page   |  32 ---
 doc/mallard/mongoc_client_new.page                 |  37 ---
 doc/mallard/mongoc_client_new_from_uri.page        |  35 ---
 doc/mallard/mongoc_client_pool_destroy.page        |  30 ---
 doc/mallard/mongoc_client_pool_new.page            |  36 ---
 doc/mallard/mongoc_client_pool_pop.page            |  36 ---
 doc/mallard/mongoc_client_pool_push.page           |  32 ---
 doc/mallard/mongoc_client_pool_t.page              |  77 ------
 doc/mallard/mongoc_client_pool_try_pop.page        |  36 ---
 doc/mallard/mongoc_client_set_read_prefs.page      |  29 --
 doc/mallard/mongoc_client_set_ssl_opts.page        |  29 --
 .../mongoc_client_set_stream_initiator.page        |  40 ---
 doc/mallard/mongoc_client_set_write_concern.page   |  29 --
 doc/mallard/mongoc_client_t.page                   |  56 ----
 doc/mallard/mongoc_collection_aggregate.page       |  49 ----
 doc/mallard/mongoc_collection_command.page         |  55 ----
 doc/mallard/mongoc_collection_command_simple.page  |  51 ----
 doc/mallard/mongoc_collection_count.page           |  55 ----
 .../mongoc_collection_create_bulk_operation.page   |  43 ---
 doc/mallard/mongoc_collection_create_index.page    |  49 ----
 doc/mallard/mongoc_collection_delete.page          |  51 ----
 doc/mallard/mongoc_collection_destroy.page         |  34 ---
 doc/mallard/mongoc_collection_drop.page            |  45 ----
 doc/mallard/mongoc_collection_drop_index.page      |  47 ----
 doc/mallard/mongoc_collection_ensure_index.page    |  55 ----
 doc/mallard/mongoc_collection_find.page            |  55 ----
 doc/mallard/mongoc_collection_find_and_modify.page |  61 -----
 doc/mallard/mongoc_collection_get_last_error.page  |  38 ---
 doc/mallard/mongoc_collection_get_name.page        |  38 ---
 doc/mallard/mongoc_collection_get_read_prefs.page  |  38 ---
 .../mongoc_collection_get_write_concern.page       |  38 ---
 doc/mallard/mongoc_collection_insert.page          |  51 ----
 doc/mallard/mongoc_collection_insert_bulk.page     |  59 -----
 .../mongoc_collection_keys_to_index_string.page    |  38 ---
 doc/mallard/mongoc_collection_rename.page          |  51 ----
 doc/mallard/mongoc_collection_save.page            |  49 ----
 doc/mallard/mongoc_collection_set_read_prefs.page  |  36 ---
 .../mongoc_collection_set_write_concern.page       |  36 ---
 doc/mallard/mongoc_collection_stats.page           |  49 ----
 doc/mallard/mongoc_collection_t.page               |  35 ---
 doc/mallard/mongoc_collection_update.page          |  53 ----
 doc/mallard/mongoc_collection_validate.page        |  49 ----
 doc/mallard/mongoc_cursor_clone.page               |  38 ---
 doc/mallard/mongoc_cursor_current.page             |  38 ---
 doc/mallard/mongoc_cursor_destroy.page             |  34 ---
 doc/mallard/mongoc_cursor_error.page               |  45 ----
 doc/mallard/mongoc_cursor_get_host.page            |  36 ---
 doc/mallard/mongoc_cursor_is_alive.page            |  38 ---
 doc/mallard/mongoc_cursor_more.page                |  38 ---
 doc/mallard/mongoc_cursor_next.page                |  40 ---
 doc/mallard/mongoc_cursor_t.page                   |  49 ----
 doc/mallard/mongoc_database_add_user.page          |  54 ----
 doc/mallard/mongoc_database_command.page           |  55 ----
 doc/mallard/mongoc_database_command_simple.page    |  51 ----
 doc/mallard/mongoc_database_create_collection.page |  43 ---
 doc/mallard/mongoc_database_destroy.page           |  31 ---
 doc/mallard/mongoc_database_drop.page              |  43 ---
 doc/mallard/mongoc_database_get_collection.page    |  30 ---
 .../mongoc_database_get_collection_names.page      |  60 -----
 doc/mallard/mongoc_database_get_name.page          |  35 ---
 doc/mallard/mongoc_database_get_read_prefs.page    |  35 ---
 doc/mallard/mongoc_database_get_write_concern.page |  35 ---
 doc/mallard/mongoc_database_has_collection.page    |  44 ---
 doc/mallard/mongoc_database_remove_all_users.page  |  42 ---
 doc/mallard/mongoc_database_remove_user.page       |  44 ---
 doc/mallard/mongoc_database_set_read_prefs.page    |  33 ---
 doc/mallard/mongoc_database_set_write_concern.page |  33 ---
 doc/mallard/mongoc_database_t.page                 |  58 ----
 doc/mallard/mongoc_gridfs_create_file.page         |  40 ---
 .../mongoc_gridfs_create_file_from_stream.page     |  42 ---
 doc/mallard/mongoc_gridfs_destroy.page             |  34 ---
 doc/mallard/mongoc_gridfs_drop.page                |  45 ----
 doc/mallard/mongoc_gridfs_file_destroy.page        |  34 ---
 doc/mallard/mongoc_gridfs_file_error.page          |  45 ----
 doc/mallard/mongoc_gridfs_file_get_aliases.page    |  37 ---
 doc/mallard/mongoc_gridfs_file_get_chunk_size.page |  38 ---
 .../mongoc_gridfs_file_get_content_type.page       |  37 ---
 doc/mallard/mongoc_gridfs_file_get_filename.page   |  37 ---
 doc/mallard/mongoc_gridfs_file_get_length.page     |  38 ---
 doc/mallard/mongoc_gridfs_file_get_md5.page        |  37 ---
 doc/mallard/mongoc_gridfs_file_get_metadata.page   |  37 ---
 .../mongoc_gridfs_file_get_upload_date.page        |  38 ---
 doc/mallard/mongoc_gridfs_file_list_destroy.page   |  34 ---
 doc/mallard/mongoc_gridfs_file_list_error.page     |  45 ----
 doc/mallard/mongoc_gridfs_file_list_next.page      |  38 ---
 doc/mallard/mongoc_gridfs_file_list_t.page         |  21 --
 doc/mallard/mongoc_gridfs_file_readv.page          |  46 ----
 doc/mallard/mongoc_gridfs_file_save.page           |  38 ---
 doc/mallard/mongoc_gridfs_file_seek.page           |  42 ---
 doc/mallard/mongoc_gridfs_file_set_aliases.page    |  38 ---
 .../mongoc_gridfs_file_set_content_type.page       |  38 ---
 doc/mallard/mongoc_gridfs_file_set_filename.page   |  38 ---
 doc/mallard/mongoc_gridfs_file_set_md5.page        |  38 ---
 doc/mallard/mongoc_gridfs_file_set_metadata.page   |  38 ---
 doc/mallard/mongoc_gridfs_file_t.page              |  21 --
 doc/mallard/mongoc_gridfs_file_tell.page           |  38 ---
 doc/mallard/mongoc_gridfs_file_writev.page         |  44 ---
 doc/mallard/mongoc_gridfs_find.page                |  40 ---
 doc/mallard/mongoc_gridfs_find_one.page            |  47 ----
 .../mongoc_gridfs_find_one_by_filename.page        |  47 ----
 doc/mallard/mongoc_gridfs_get_chunks.page          |  38 ---
 doc/mallard/mongoc_gridfs_get_files.page           |  38 ---
 doc/mallard/mongoc_gridfs_t.page                   |  21 --
 doc/mallard/mongoc_index_opt_get_default.page      |  26 --
 doc/mallard/mongoc_index_opt_init.page             |  34 ---
 doc/mallard/mongoc_index_opt_t.page                |  21 --
 doc/mallard/mongoc_init.page                       |  22 --
 doc/mallard/mongoc_iovec_t.page                    |  35 ---
 doc/mallard/mongoc_matcher_destroy.page            |  32 ---
 doc/mallard/mongoc_matcher_match.page              |  38 ---
 doc/mallard/mongoc_matcher_new.page                |  43 ---
 doc/mallard/mongoc_matcher_t.page                  |  79 ------
 doc/mallard/mongoc_read_prefs_add_tag.page         |  36 ---
 doc/mallard/mongoc_read_prefs_copy.page            |  38 ---
 doc/mallard/mongoc_read_prefs_destroy.page         |  34 ---
 doc/mallard/mongoc_read_prefs_get_mode.page        |  38 ---
 doc/mallard/mongoc_read_prefs_get_tags.page        |  38 ---
 doc/mallard/mongoc_read_prefs_is_valid.page        |  38 ---
 doc/mallard/mongoc_read_prefs_new.page             |  38 ---
 doc/mallard/mongoc_read_prefs_set_mode.page        |  36 ---
 doc/mallard/mongoc_read_prefs_set_tags.page        |  36 ---
 doc/mallard/mongoc_read_prefs_t.page               |  21 --
 doc/mallard/mongoc_socket_accept.page              |  40 ---
 doc/mallard/mongoc_socket_bind.page                |  42 ---
 doc/mallard/mongoc_socket_close.page               |  38 ---
 doc/mallard/mongoc_socket_connect.page             |  44 ---
 doc/mallard/mongoc_socket_destroy.page             |  34 ---
 doc/mallard/mongoc_socket_errno.page               |  38 ---
 doc/mallard/mongoc_socket_getnameinfo.page         |  38 ---
 doc/mallard/mongoc_socket_getsockname.page         |  42 ---
 doc/mallard/mongoc_socket_listen.page              |  40 ---
 doc/mallard/mongoc_socket_new.page                 |  42 ---
 doc/mallard/mongoc_socket_recv.page                |  46 ----
 doc/mallard/mongoc_socket_send.page                |  44 ---
 doc/mallard/mongoc_socket_sendv.page               |  44 ---
 doc/mallard/mongoc_socket_setsockopt.page          |  46 ----
 doc/mallard/mongoc_socket_t.page                   |  21 --
 doc/mallard/mongoc_ssl_opt_get_default.page        |  26 --
 doc/mallard/mongoc_ssl_opt_t.page                  |  21 --
 doc/mallard/mongoc_stream_buffered_new.page        |  40 ---
 doc/mallard/mongoc_stream_buffered_t.page          |  26 --
 doc/mallard/mongoc_stream_close.page               |  42 ---
 doc/mallard/mongoc_stream_cork.page                |  42 ---
 doc/mallard/mongoc_stream_destroy.page             |  32 ---
 doc/mallard/mongoc_stream_file_get_fd.page         |  39 ---
 doc/mallard/mongoc_stream_file_new.page            |  39 ---
 doc/mallard/mongoc_stream_file_new_for_path.page   |  42 ---
 doc/mallard/mongoc_stream_file_t.page              |  24 --
 doc/mallard/mongoc_stream_flush.page               |  39 ---
 doc/mallard/mongoc_stream_get_base_stream.page     |  37 ---
 doc/mallard/mongoc_stream_gridfs_new.page          |  37 ---
 doc/mallard/mongoc_stream_gridfs_t.page            |  22 --
 doc/mallard/mongoc_stream_read.page                |  51 ----
 doc/mallard/mongoc_stream_readv.page               |  51 ----
 doc/mallard/mongoc_stream_setsockopt.page          |  45 ----
 doc/mallard/mongoc_stream_socket_get_socket.page   |  37 ---
 doc/mallard/mongoc_stream_socket_new.page          |  38 ---
 doc/mallard/mongoc_stream_socket_t.page            |  24 --
 doc/mallard/mongoc_stream_t.page                   |  39 ---
 doc/mallard/mongoc_stream_tls_check_cert.page      |  39 ---
 doc/mallard/mongoc_stream_tls_do_handshake.page    |  38 ---
 doc/mallard/mongoc_stream_tls_new.page             |  40 ---
 doc/mallard/mongoc_stream_tls_t.page               |  24 --
 doc/mallard/mongoc_stream_uncork.page              |  44 ---
 doc/mallard/mongoc_stream_writev.page              |  46 ----
 doc/mallard/mongoc_uri_copy.page                   |  38 ---
 doc/mallard/mongoc_uri_destroy.page                |  34 ---
 doc/mallard/mongoc_uri_get_auth_mechanism.page     |  38 ---
 doc/mallard/mongoc_uri_get_auth_source.page        |  38 ---
 doc/mallard/mongoc_uri_get_database.page           |  38 ---
 doc/mallard/mongoc_uri_get_hosts.page              |  38 ---
 doc/mallard/mongoc_uri_get_options.page            |  38 ---
 doc/mallard/mongoc_uri_get_password.page           |  38 ---
 doc/mallard/mongoc_uri_get_read_prefs.page         |  38 ---
 doc/mallard/mongoc_uri_get_replica_set.page        |  38 ---
 doc/mallard/mongoc_uri_get_ssl.page                |  38 ---
 doc/mallard/mongoc_uri_get_string.page             |  38 ---
 doc/mallard/mongoc_uri_get_username.page           |  38 ---
 doc/mallard/mongoc_uri_get_write_concern.page      |  38 ---
 doc/mallard/mongoc_uri_new.page                    |  38 ---
 doc/mallard/mongoc_uri_new_for_host_port.page      |  40 ---
 doc/mallard/mongoc_uri_t.page                      |  21 --
 doc/mallard/mongoc_uri_unescape.page               |  38 ---
 doc/mallard/mongoc_version.page                    |  36 ---
 doc/mallard/mongoc_write_concern_copy.page         |  38 ---
 doc/mallard/mongoc_write_concern_destroy.page      |  34 ---
 doc/mallard/mongoc_write_concern_get_fsync.page    |  38 ---
 doc/mallard/mongoc_write_concern_get_journal.page  |  38 ---
 doc/mallard/mongoc_write_concern_get_w.page        |  38 ---
 .../mongoc_write_concern_get_wmajority.page        |  38 ---
 doc/mallard/mongoc_write_concern_get_wtag.page     |  38 ---
 doc/mallard/mongoc_write_concern_get_wtimeout.page |  38 ---
 doc/mallard/mongoc_write_concern_new.page          |  26 --
 doc/mallard/mongoc_write_concern_set_fsync.page    |  36 ---
 doc/mallard/mongoc_write_concern_set_journal.page  |  36 ---
 doc/mallard/mongoc_write_concern_set_w.page        |  36 ---
 .../mongoc_write_concern_set_wmajority.page        |  36 ---
 doc/mallard/mongoc_write_concern_set_wtag.page     |  36 ---
 doc/mallard/mongoc_write_concern_set_wtimeout.page |  36 ---
 doc/mallard/mongoc_write_concern_t.page            |  21 --
 doc/mallard/updating-document.page                 | 123 ---------
 doc/mallard2man.py                                 | 294 +++++++++++++++++++++
 doc/mongoc.txt                                     |  43 ---
 doc/mongoc_api                                     |  17 --
 doc/mongoc_api.txt                                 |  17 --
 doc/mongoc_bulk_operation.txt                      |  67 -----
 doc/mongoc_bulk_operation_delete.page              |  44 +++
 doc/mongoc_bulk_operation_delete.txt               |  54 ----
 doc/mongoc_bulk_operation_delete_one.page          |  44 +++
 doc/mongoc_bulk_operation_delete_one.txt           |   1 -
 doc/mongoc_bulk_operation_destroy.page             |  32 +++
 doc/mongoc_bulk_operation_destroy.txt              |  41 ---
 doc/mongoc_bulk_operation_execute.page             |  48 ++++
 doc/mongoc_bulk_operation_execute.txt              |  60 -----
 doc/mongoc_bulk_operation_insert.page              |  36 +++
 doc/mongoc_bulk_operation_insert.txt               |  45 ----
 doc/mongoc_bulk_operation_remove.page              |  35 +++
 doc/mongoc_bulk_operation_remove_one.page          |  35 +++
 doc/mongoc_bulk_operation_replace_one.page         |  43 +++
 doc/mongoc_bulk_operation_replace_one.txt          |  46 ----
 doc/mongoc_bulk_operation_t.page                   |  27 ++
 doc/mongoc_bulk_operation_update.page              |  46 ++++
 doc/mongoc_bulk_operation_update.txt               |  55 ----
 doc/mongoc_bulk_operation_update_one.page          |  43 +++
 doc/mongoc_bulk_operation_update_one.txt           |   1 -
 doc/mongoc_cleanup.page                            |  28 ++
 doc/mongoc_cleanup.txt                             |   1 -
 doc/mongoc_client.txt                              |  98 -------
 doc/mongoc_client_command.page                     |  53 ++++
 doc/mongoc_client_command.txt                      |  86 ------
 doc/mongoc_client_command_simple.page              |  53 ++++
 doc/mongoc_client_command_simple.txt               |   1 -
 doc/mongoc_client_destroy.page                     |  31 +++
 doc/mongoc_client_destroy.txt                      |  40 ---
 doc/mongoc_client_get_collection.page              |  41 +++
 doc/mongoc_client_get_collection.txt               |  68 -----
 doc/mongoc_client_get_database.page                |  36 +++
 doc/mongoc_client_get_database.txt                 |   1 -
 doc/mongoc_client_get_database_names.page          |  61 +++++
 doc/mongoc_client_get_database_names.txt           |  69 -----
 doc/mongoc_client_get_gridfs.page                  |  47 ++++
 doc/mongoc_client_get_gridfs.txt                   |   1 -
 doc/mongoc_client_get_max_bson_size.page           |  33 +++
 doc/mongoc_client_get_max_bson_size.txt            |  38 ---
 doc/mongoc_client_get_max_message_size.page        |  33 +++
 doc/mongoc_client_get_max_message_size.txt         |   1 -
 doc/mongoc_client_get_read_prefs.page              |  35 +++
 doc/mongoc_client_get_read_prefs.txt               |   1 -
 doc/mongoc_client_get_server_status.page           |  48 ++++
 doc/mongoc_client_get_server_status.txt            |  46 ----
 doc/mongoc_client_get_uri.page                     |  35 +++
 doc/mongoc_client_get_uri.txt                      |  42 ---
 doc/mongoc_client_get_write_concern.page           |  32 +++
 doc/mongoc_client_get_write_concern.txt            |  66 -----
 doc/mongoc_client_new.page                         |  37 +++
 doc/mongoc_client_new.txt                          |  50 ----
 doc/mongoc_client_new_from_uri.page                |  35 +++
 doc/mongoc_client_new_from_uri.txt                 |   1 -
 doc/mongoc_client_pool.txt                         |  88 ------
 doc/mongoc_client_pool_destroy.page                |  30 +++
 doc/mongoc_client_pool_destroy.txt                 |  41 ---
 doc/mongoc_client_pool_new.page                    |  36 +++
 doc/mongoc_client_pool_new.txt                     |  43 ---
 doc/mongoc_client_pool_pop.page                    |  36 +++
 doc/mongoc_client_pool_pop.txt                     |  60 -----
 doc/mongoc_client_pool_push.page                   |  32 +++
 doc/mongoc_client_pool_push.txt                    |   1 -
 doc/mongoc_client_pool_t.page                      |  77 ++++++
 doc/mongoc_client_pool_try_pop.page                |  36 +++
 doc/mongoc_client_pool_try_pop.txt                 |   1 -
 doc/mongoc_client_set_read_prefs.page              |  29 ++
 doc/mongoc_client_set_read_prefs.txt               |   1 -
 doc/mongoc_client_set_ssl_opts.page                |  29 ++
 doc/mongoc_client_set_ssl_opts.txt                 |  45 ----
 doc/mongoc_client_set_stream_initiator.page        |  40 +++
 doc/mongoc_client_set_stream_initiator.txt         | 113 --------
 doc/mongoc_client_set_write_concern.page           |  29 ++
 doc/mongoc_client_set_write_concern.txt            |   1 -
 doc/mongoc_client_t.page                           |  56 ++++
 doc/mongoc_collection.txt                          |  83 ------
 doc/mongoc_collection_aggregate.page               |  88 ++++++
 doc/mongoc_collection_aggregate.txt                |  57 ----
 doc/mongoc_collection_command.page                 |  58 ++++
 doc/mongoc_collection_command.txt                  |  81 ------
 doc/mongoc_collection_command_simple.page          |  91 +++++++
 doc/mongoc_collection_command_simple.txt           |   1 -
 doc/mongoc_collection_count.page                   |  84 ++++++
 doc/mongoc_collection_count.txt                    |  55 ----
 doc/mongoc_collection_create_bulk_operation.page   |  58 ++++
 doc/mongoc_collection_create_bulk_operation.txt    |  74 ------
 doc/mongoc_collection_create_index.page            |  54 ++++
 doc/mongoc_collection_create_index.txt             |   1 -
 doc/mongoc_collection_delete.page                  |  59 +++++
 doc/mongoc_collection_delete.txt                   |  55 ----
 doc/mongoc_collection_destroy.page                 |  36 +++
 doc/mongoc_collection_destroy.txt                  |  39 ---
 doc/mongoc_collection_drop.page                    |  49 ++++
 doc/mongoc_collection_drop.txt                     |  48 ----
 doc/mongoc_collection_drop_index.page              |  46 ++++
 doc/mongoc_collection_drop_index.txt               |  47 ----
 doc/mongoc_collection_ensure_index.page            |  49 ++++
 doc/mongoc_collection_ensure_index.txt             |  77 ------
 doc/mongoc_collection_find.page                    |  93 +++++++
 doc/mongoc_collection_find.txt                     |  84 ------
 doc/mongoc_collection_find_and_modify.page         |  68 +++++
 doc/mongoc_collection_find_and_modify.txt          |  57 ----
 doc/mongoc_collection_get_last_error.page          |  38 +++
 doc/mongoc_collection_get_last_error.txt           |  46 ----
 doc/mongoc_collection_get_name.page                |  37 +++
 doc/mongoc_collection_get_name.txt                 |  34 ---
 doc/mongoc_collection_get_read_prefs.page          |  38 +++
 doc/mongoc_collection_get_read_prefs.txt           |  70 -----
 doc/mongoc_collection_get_write_concern.page       |  37 +++
 doc/mongoc_collection_get_write_concern.txt        |   1 -
 doc/mongoc_collection_insert.page                  |  52 ++++
 doc/mongoc_collection_insert.txt                   |  66 -----
 doc/mongoc_collection_insert_bulk.page             |  59 +++++
 doc/mongoc_collection_insert_bulk.txt              |   1 -
 doc/mongoc_collection_keys_to_index_string.page    |  39 +++
 doc/mongoc_collection_keys_to_index_string.txt     |  47 ----
 doc/mongoc_collection_remove.page                  |  53 ++++
 doc/mongoc_collection_rename.page                  |  51 ++++
 doc/mongoc_collection_rename.txt                   |  44 ---
 doc/mongoc_collection_save.page                    |  48 ++++
 doc/mongoc_collection_save.txt                     |  45 ----
 doc/mongoc_collection_set_read_prefs.page          |  34 +++
 doc/mongoc_collection_set_read_prefs.txt           |   1 -
 doc/mongoc_collection_set_write_concern.page       |  34 +++
 doc/mongoc_collection_set_write_concern.txt        |   1 -
 doc/mongoc_collection_stats.page                   |  49 ++++
 doc/mongoc_collection_stats.txt                    |  44 ---
 doc/mongoc_collection_t.page                       |  35 +++
 doc/mongoc_collection_update.page                  |  53 ++++
 doc/mongoc_collection_update.txt                   |  63 -----
 doc/mongoc_collection_validate.page                |  56 ++++
 doc/mongoc_collection_validate.txt                 |  47 ----
 doc/mongoc_cursor.txt                              | 101 -------
 doc/mongoc_cursor_clone.page                       |  39 +++
 doc/mongoc_cursor_clone.txt                        |  45 ----
 doc/mongoc_cursor_current.page                     |  37 +++
 doc/mongoc_cursor_current.txt                      |  33 ---
 doc/mongoc_cursor_destroy.page                     |  32 +++
 doc/mongoc_cursor_destroy.txt                      |  41 ---
 doc/mongoc_cursor_error.page                       |  44 +++
 doc/mongoc_cursor_error.txt                        |  43 ---
 doc/mongoc_cursor_get_host.page                    |  34 +++
 doc/mongoc_cursor_get_host.txt                     |  54 ----
 doc/mongoc_cursor_is_alive.page                    |  38 +++
 doc/mongoc_cursor_is_alive.txt                     |  33 ---
 doc/mongoc_cursor_more.page                        |  37 +++
 doc/mongoc_cursor_more.txt                         |  43 ---
 doc/mongoc_cursor_next.page                        |  46 ++++
 doc/mongoc_cursor_next.txt                         |  65 -----
 doc/mongoc_cursor_t.page                           |  49 ++++
 doc/mongoc_database.txt                            |  78 ------
 doc/mongoc_database_add_user.page                  |  57 ++++
 doc/mongoc_database_add_user.txt                   |  75 ------
 doc/mongoc_database_command.page                   |  58 ++++
 doc/mongoc_database_command.txt                    |  81 ------
 doc/mongoc_database_command_simple.page            |  54 ++++
 doc/mongoc_database_command_simple.txt             |   1 -
 doc/mongoc_database_create_collection.page         |  46 ++++
 doc/mongoc_database_create_collection.txt          |  63 -----
 doc/mongoc_database_destroy.page                   |  31 +++
 doc/mongoc_database_destroy.txt                    |  39 ---
 doc/mongoc_database_drop.page                      |  43 +++
 doc/mongoc_database_drop.txt                       |  48 ----
 doc/mongoc_database_get_collection.page            |  30 +++
 doc/mongoc_database_get_collection.txt             |  33 ---
 doc/mongoc_database_get_collection_names.page      |  60 +++++
 doc/mongoc_database_get_collection_names.txt       |  58 ----
 doc/mongoc_database_get_name.page                  |  35 +++
 doc/mongoc_database_get_name.txt                   |  31 ---
 doc/mongoc_database_get_read_prefs.page            |  35 +++
 doc/mongoc_database_get_read_prefs.txt             |   1 -
 doc/mongoc_database_get_write_concern.page         |  35 +++
 doc/mongoc_database_get_write_concern.txt          |  70 -----
 doc/mongoc_database_has_collection.page            |  44 +++
 doc/mongoc_database_has_collection.txt             |  54 ----
 doc/mongoc_database_remove_all_users.page          |  42 +++
 doc/mongoc_database_remove_all_users.txt           |   1 -
 doc/mongoc_database_remove_user.page               |  44 +++
 doc/mongoc_database_remove_user.txt                |   1 -
 doc/mongoc_database_set_read_prefs.page            |  33 +++
 doc/mongoc_database_set_read_prefs.txt             |   1 -
 doc/mongoc_database_set_write_concern.page         |  33 +++
 doc/mongoc_database_set_write_concern.txt          |   1 -
 doc/mongoc_database_t.page                         |  58 ++++
 doc/mongoc_delete_flags_t.page                     |  35 +++
 doc/mongoc_fd_set_nonblock.txt                     |  41 ---
 doc/mongoc_gridfs.txt                              |  92 -------
 doc/mongoc_gridfs_create_file.page                 |  39 +++
 doc/mongoc_gridfs_create_file.txt                  |  71 -----
 doc/mongoc_gridfs_create_file_from_stream.page     |  42 +++
 doc/mongoc_gridfs_create_file_from_stream.txt      |   1 -
 doc/mongoc_gridfs_destroy.page                     |  32 +++
 doc/mongoc_gridfs_destroy.txt                      |  51 ----
 doc/mongoc_gridfs_drop.page                        |  43 +++
 doc/mongoc_gridfs_drop.txt                         |  48 ----
 doc/mongoc_gridfs_file.txt                         |  95 -------
 doc/mongoc_gridfs_file_destroy.page                |  32 +++
 doc/mongoc_gridfs_file_destroy.txt                 |  44 ---
 doc/mongoc_gridfs_file_error.page                  |  43 +++
 doc/mongoc_gridfs_file_error.txt                   |  43 ---
 doc/mongoc_gridfs_file_get_aliases.page            |  35 +++
 doc/mongoc_gridfs_file_get_aliases.txt             |  58 ----
 doc/mongoc_gridfs_file_get_chunk_size.page         |  37 +++
 doc/mongoc_gridfs_file_get_chunk_size.txt          |   1 -
 doc/mongoc_gridfs_file_get_content_type.page       |  35 +++
 doc/mongoc_gridfs_file_get_content_type.txt        |   1 -
 doc/mongoc_gridfs_file_get_filename.page           |  36 +++
 doc/mongoc_gridfs_file_get_filename.txt            |   1 -
 doc/mongoc_gridfs_file_get_length.page             |  36 +++
 doc/mongoc_gridfs_file_get_length.txt              |   1 -
 doc/mongoc_gridfs_file_get_md5.page                |  37 +++
 doc/mongoc_gridfs_file_get_md5.txt                 |   1 -
 doc/mongoc_gridfs_file_get_metadata.page           |  36 +++
 doc/mongoc_gridfs_file_get_metadata.txt            |   1 -
 doc/mongoc_gridfs_file_get_upload_date.page        |  36 +++
 doc/mongoc_gridfs_file_get_upload_date.txt         |   1 -
 doc/mongoc_gridfs_file_list.txt                    |  76 ------
 doc/mongoc_gridfs_file_list_destroy.page           |  31 +++
 doc/mongoc_gridfs_file_list_destroy.txt            |  44 ---
 doc/mongoc_gridfs_file_list_error.page             |  43 +++
 doc/mongoc_gridfs_file_list_error.txt              |  43 ---
 doc/mongoc_gridfs_file_list_next.page              |  36 +++
 doc/mongoc_gridfs_file_list_next.txt               |  59 -----
 doc/mongoc_gridfs_file_list_t.page                 |  44 +++
 doc/mongoc_gridfs_file_opt_t.page                  |  32 +++
 doc/mongoc_gridfs_file_readv.page                  |  47 ++++
 doc/mongoc_gridfs_file_readv.txt                   |  93 -------
 doc/mongoc_gridfs_file_save.page                   |  38 +++
 doc/mongoc_gridfs_file_save.txt                    |  43 ---
 doc/mongoc_gridfs_file_seek.page                   |  40 +++
 doc/mongoc_gridfs_file_seek.txt                    |  76 ------
 doc/mongoc_gridfs_file_set_aliases.page            |  34 +++
 doc/mongoc_gridfs_file_set_aliases.txt             |   1 -
 doc/mongoc_gridfs_file_set_content_type.page       |  34 +++
 doc/mongoc_gridfs_file_set_content_type.txt        |   1 -
 doc/mongoc_gridfs_file_set_filename.page           |  34 +++
 doc/mongoc_gridfs_file_set_filename.txt            |   1 -
 doc/mongoc_gridfs_file_set_md5.page                |  34 +++
 doc/mongoc_gridfs_file_set_md5.txt                 |   1 -
 doc/mongoc_gridfs_file_set_metadata.page           |  34 +++
 doc/mongoc_gridfs_file_set_metadata.txt            |   1 -
 doc/mongoc_gridfs_file_t.page                      |  42 +++
 doc/mongoc_gridfs_file_tell.page                   |  37 +++
 doc/mongoc_gridfs_file_tell.txt                    |   1 -
 doc/mongoc_gridfs_file_writev.page                 |  44 +++
 doc/mongoc_gridfs_file_writev.txt                  |   1 -
 doc/mongoc_gridfs_find.page                        |  39 +++
 doc/mongoc_gridfs_find.txt                         |  67 -----
 doc/mongoc_gridfs_find_one.page                    |  45 ++++
 doc/mongoc_gridfs_find_one.txt                     |   1 -
 doc/mongoc_gridfs_find_one_by_filename.page        |  45 ++++
 doc/mongoc_gridfs_find_one_by_filename.txt         |   1 -
 doc/mongoc_gridfs_get_chunks.page                  |  37 +++
 doc/mongoc_gridfs_get_chunks.txt                   |  38 ---
 doc/mongoc_gridfs_get_files.page                   |  36 +++
 doc/mongoc_gridfs_get_files.txt                    |  38 ---
 doc/mongoc_gridfs_t.page                           |  45 ++++
 doc/mongoc_index_opt_get_default.page              |  29 ++
 doc/mongoc_index_opt_get_default.txt               | 137 ----------
 doc/mongoc_index_opt_init.page                     |  32 +++
 doc/mongoc_index_opt_init.txt                      |   1 -
 doc/mongoc_index_opt_t.page                        |  43 +++
 doc/mongoc_init.page                               |  26 ++
 doc/mongoc_init.txt                                |  63 -----
 doc/mongoc_insert_flags_t.page                     |  49 ++++
 doc/mongoc_iovec_t.page                            |  38 +++
 doc/mongoc_log.txt                                 |  93 -------
 doc/mongoc_log_default_handler.txt                 |   1 -
 doc/mongoc_log_level_str.txt                       |  31 ---
 doc/mongoc_log_set_handler.txt                     |  54 ----
 doc/mongoc_matcher_destroy.page                    |  32 +++
 doc/mongoc_matcher_destroy.txt                     |  40 ---
 doc/mongoc_matcher_match.page                      |  38 +++
 doc/mongoc_matcher_match.txt                       |  43 ---
 doc/mongoc_matcher_new.page                        |  43 +++
 doc/mongoc_matcher_new.txt                         |  43 ---
 doc/mongoc_matcher_t.page                          |  79 ++++++
 doc/mongoc_query_flags_t.page                      |  73 +++++
 doc/mongoc_read_mode_t.page                        |  30 +++
 doc/mongoc_read_prefs.txt                          | 108 --------
 doc/mongoc_read_prefs_add_tag.page                 |  33 +++
 doc/mongoc_read_prefs_add_tag.txt                  |  43 ---
 doc/mongoc_read_prefs_copy.page                    |  39 +++
 doc/mongoc_read_prefs_copy.txt                     |  42 ---
 doc/mongoc_read_prefs_destroy.page                 |  33 +++
 doc/mongoc_read_prefs_destroy.txt                  |  40 ---
 doc/mongoc_read_prefs_get_mode.page                |  37 +++
 doc/mongoc_read_prefs_get_mode.txt                 |  51 ----
 doc/mongoc_read_prefs_get_tags.page                |  37 +++
 doc/mongoc_read_prefs_get_tags.txt                 |   1 -
 doc/mongoc_read_prefs_is_valid.page                |  38 +++
 doc/mongoc_read_prefs_is_valid.txt                 |  42 ---
 doc/mongoc_read_prefs_new.page                     |  37 +++
 doc/mongoc_read_prefs_new.txt                      |  43 ---
 doc/mongoc_read_prefs_set_mode.page                |  34 +++
 doc/mongoc_read_prefs_set_mode.txt                 |   1 -
 doc/mongoc_read_prefs_set_tags.page                |  33 +++
 doc/mongoc_read_prefs_set_tags.txt                 |   1 -
 doc/mongoc_read_prefs_t.page                       |  67 +++++
 doc/mongoc_remove_flags_t.page                     |  43 +++
 doc/mongoc_reply_flags_t.page                      |  58 ++++
 doc/mongoc_socket.txt                              |  37 ---
 doc/mongoc_socket_accept.page                      |  43 +++
 doc/mongoc_socket_accept.txt                       |   1 -
 doc/mongoc_socket_bind.page                        |  46 ++++
 doc/mongoc_socket_bind.txt                         |  34 ---
 doc/mongoc_socket_close.page                       |  38 +++
 doc/mongoc_socket_close.txt                        |   1 -
 doc/mongoc_socket_connect.page                     |  46 ++++
 doc/mongoc_socket_connect.txt                      |   1 -
 doc/mongoc_socket_destroy.page                     |  33 +++
 doc/mongoc_socket_destroy.txt                      |   1 -
 doc/mongoc_socket_errno.page                       |  38 +++
 doc/mongoc_socket_errno.txt                        |   1 -
 doc/mongoc_socket_getnameinfo.page                 |  38 +++
 doc/mongoc_socket_getnameinfo.txt                  |  37 ---
 doc/mongoc_socket_getsockname.page                 |  42 +++
 doc/mongoc_socket_getsockname.txt                  |  35 ---
 doc/mongoc_socket_listen.page                      |  38 +++
 doc/mongoc_socket_listen.txt                       |   1 -
 doc/mongoc_socket_new.page                         |  41 +++
 doc/mongoc_socket_new.txt                          |  59 -----
 doc/mongoc_socket_recv.page                        |  45 ++++
 doc/mongoc_socket_recv.txt                         |   1 -
 doc/mongoc_socket_send.page                        |  44 +++
 doc/mongoc_socket_send.txt                         |   1 -
 doc/mongoc_socket_sendv.page                       |  48 ++++
 doc/mongoc_socket_sendv.txt                        |   1 -
 doc/mongoc_socket_setsockopt.page                  |  45 ++++
 doc/mongoc_socket_setsockopt.txt                   |   1 -
 doc/mongoc_socket_t.page                           |  30 +++
 doc/mongoc_ssl.txt                                 |  96 -------
 doc/mongoc_ssl_opt_get_default.page                |  29 ++
 doc/mongoc_ssl_opt_get_default.txt                 |  42 ---
 doc/mongoc_ssl_opt_t.page                          |  37 +++
 doc/mongoc_stream.txt                              | 105 --------
 doc/mongoc_stream_buffered_new.page                |  43 +++
 doc/mongoc_stream_buffered_new.txt                 |  49 ----
 doc/mongoc_stream_buffered_t.page                  |  26 ++
 doc/mongoc_stream_close.page                       |  45 ++++
 doc/mongoc_stream_close.txt                        |  44 ---
 doc/mongoc_stream_cork.page                        |  45 ++++
 doc/mongoc_stream_cork.txt                         |  47 ----
 doc/mongoc_stream_destroy.page                     |  35 +++
 doc/mongoc_stream_destroy.txt                      |  40 ---
 doc/mongoc_stream_file.txt                         |  47 ----
 doc/mongoc_stream_file_get_fd.page                 |  42 +++
 doc/mongoc_stream_file_get_fd.txt                  |  37 ---
 doc/mongoc_stream_file_new.page                    |  42 +++
 doc/mongoc_stream_file_new.txt                     |  58 ----
 doc/mongoc_stream_file_new_for_path.page           |  45 ++++
 doc/mongoc_stream_file_new_for_path.txt            |   1 -
 doc/mongoc_stream_file_t.page                      |  24 ++
 doc/mongoc_stream_flush.page                       |  42 +++
 doc/mongoc_stream_flush.txt                        |  48 ----
 doc/mongoc_stream_get_base_stream.page             |  40 +++
 doc/mongoc_stream_get_base_stream.txt              |  31 ---
 doc/mongoc_stream_gridfs_new.page                  |  40 +++
 doc/mongoc_stream_gridfs_new.txt                   |  47 ----
 doc/mongoc_stream_gridfs_t.page                    |  22 ++
 doc/mongoc_stream_read.page                        |  54 ++++
 doc/mongoc_stream_read.txt                         |  70 -----
 doc/mongoc_stream_readv.page                       |  54 ++++
 doc/mongoc_stream_readv.txt                        |  71 -----
 doc/mongoc_stream_setsockopt.page                  |  48 ++++
 doc/mongoc_stream_setsockopt.txt                   |  50 ----
 doc/mongoc_stream_socket.txt                       |  33 ---
 doc/mongoc_stream_socket_get_socket.page           |  40 +++
 doc/mongoc_stream_socket_get_socket.txt            |   1 -
 doc/mongoc_stream_socket_new.page                  |  41 +++
 doc/mongoc_stream_socket_new.txt                   |  47 ----
 doc/mongoc_stream_socket_t.page                    |  24 ++
 doc/mongoc_stream_t.page                           |  39 +++
 doc/mongoc_stream_tls_check_cert.page              |  42 +++
 doc/mongoc_stream_tls_check_cert.txt               |  51 ----
 doc/mongoc_stream_tls_do_handshake.page            |  41 +++
 doc/mongoc_stream_tls_do_handshake.txt             |  52 ----
 doc/mongoc_stream_tls_new.page                     |  43 +++
 doc/mongoc_stream_tls_new.txt                      |  54 ----
 doc/mongoc_stream_tls_t.page                       |  24 ++
 doc/mongoc_stream_uncork.page                      |  47 ++++
 doc/mongoc_stream_uncork.txt                       |  45 ----
 doc/mongoc_stream_unix_new.txt                     |  47 ----
 doc/mongoc_stream_writev.page                      |  49 ++++
 doc/mongoc_stream_writev.txt                       |  67 -----
 doc/mongoc_symbols.txt                             | 201 --------------
 doc/mongoc_update_flags_t.page                     |  54 ++++
 doc/mongoc_uri.txt                                 | 224 ----------------
 doc/mongoc_uri_copy.page                           |  36 +++
 doc/mongoc_uri_copy.txt                            |  39 ---
 doc/mongoc_uri_destroy.page                        |  31 +++
 doc/mongoc_uri_destroy.txt                         |  39 ---
 doc/mongoc_uri_get_auth_mechanism.page             |  37 +++
 doc/mongoc_uri_get_auth_mechanism.txt              |   1 -
 doc/mongoc_uri_get_auth_source.page                |  36 +++
 doc/mongoc_uri_get_auth_source.txt                 |   1 -
 doc/mongoc_uri_get_database.page                   |  37 +++
 doc/mongoc_uri_get_database.txt                    |   1 -
 doc/mongoc_uri_get_hosts.page                      |  37 +++
 doc/mongoc_uri_get_hosts.txt                       |  56 ----
 doc/mongoc_uri_get_options.page                    |  37 +++
 doc/mongoc_uri_get_options.txt                     |   1 -
 doc/mongoc_uri_get_password.page                   |  36 +++
 doc/mongoc_uri_get_password.txt                    |   1 -
 doc/mongoc_uri_get_read_prefs.page                 |  37 +++
 doc/mongoc_uri_get_read_prefs.txt                  |   1 -
 doc/mongoc_uri_get_replica_set.page                |  37 +++
 doc/mongoc_uri_get_replica_set.txt                 |   1 -
 doc/mongoc_uri_get_ssl.page                        |  37 +++
 doc/mongoc_uri_get_ssl.txt                         |   1 -
 doc/mongoc_uri_get_string.page                     |  37 +++
 doc/mongoc_uri_get_string.txt                      |   1 -
 doc/mongoc_uri_get_username.page                   |  37 +++
 doc/mongoc_uri_get_username.txt                    |   1 -
 doc/mongoc_uri_get_write_concern.page              |  37 +++
 doc/mongoc_uri_get_write_concern.txt               |   1 -
 doc/mongoc_uri_new.page                            |  52 ++++
 doc/mongoc_uri_new.txt                             |  49 ----
 doc/mongoc_uri_new_for_host_port.page              |  38 +++
 doc/mongoc_uri_new_for_host_port.txt               |   1 -
 doc/mongoc_uri_t.page                              | 142 ++++++++++
 doc/mongoc_uri_unescape.page                       |  37 +++
 doc/mongoc_uri_unescape.txt                        |  41 ---
 doc/mongoc_version.page                            |  36 +++
 doc/mongoc_write_concern.txt                       | 108 --------
 doc/mongoc_write_concern_copy.page                 |  36 +++
 doc/mongoc_write_concern_copy.txt                  |  42 ---
 doc/mongoc_write_concern_destroy.page              |  31 +++
 doc/mongoc_write_concern_destroy.txt               |  41 ---
 doc/mongoc_write_concern_get_fsync.page            |  37 +++
 doc/mongoc_write_concern_get_fsync.txt             |  76 ------
 doc/mongoc_write_concern_get_journal.page          |  36 +++
 doc/mongoc_write_concern_get_journal.txt           |   1 -
 doc/mongoc_write_concern_get_w.page                |  37 +++
 doc/mongoc_write_concern_get_w.txt                 |   1 -
 doc/mongoc_write_concern_get_wmajority.page        |  37 +++
 doc/mongoc_write_concern_get_wmajority.txt         |   1 -
 doc/mongoc_write_concern_get_wtag.page             |  37 +++
 doc/mongoc_write_concern_get_wtag.txt              |   1 -
 doc/mongoc_write_concern_get_wtimeout.page         |  38 +++
 doc/mongoc_write_concern_get_wtimeout.txt          |   1 -
 doc/mongoc_write_concern_new.page                  |  25 ++
 doc/mongoc_write_concern_new.txt                   |  42 ---
 doc/mongoc_write_concern_set_fsync.page            |  35 +++
 doc/mongoc_write_concern_set_fsync.txt             |   1 -
 doc/mongoc_write_concern_set_journal.page          |  34 +++
 doc/mongoc_write_concern_set_journal.txt           |   1 -
 doc/mongoc_write_concern_set_w.page                |  33 +++
 doc/mongoc_write_concern_set_w.txt                 |   1 -
 doc/mongoc_write_concern_set_wmajority.page        |  33 +++
 doc/mongoc_write_concern_set_wmajority.txt         |   1 -
 doc/mongoc_write_concern_set_wtag.page             |  34 +++
 doc/mongoc_write_concern_set_wtag.txt              |   1 -
 doc/mongoc_write_concern_set_wtimeout.page         |  34 +++
 doc/mongoc_write_concern_set_wtimeout.txt          |   1 -
 doc/mongoc_write_concern_t.page                    |  60 +++++
 doc/updating-document.page                         | 123 +++++++++
 examples/find-and-modify.c                         |  24 +-
 src/mongoc/mongoc-collection.h                     |   2 +-
 src/mongoc/mongoc-cursor.h                         |   2 +-
 src/mongoc/mongoc-socket.c                         |   4 +-
 src/mongoc/mongoc-uri.h                            |   6 +-
 944 files changed, 19942 insertions(+), 18623 deletions(-)

commit 306d1ff18b9389a7fe847d754c678955cfb1f622
Author: Christian Hergert <christian@hergert.me>
Date:   Thu May 15 13:16:46 2014 -0700

    flags: add mongoc_remove_flags_t for naming uniformity.

 src/mongoc/mongoc-collection.c |  6 +++---
 src/mongoc/mongoc-collection.h |  2 +-
 src/mongoc/mongoc-flags.h      | 18 ++++++++++++++++++
 3 files changed, 22 insertions(+), 4 deletions(-)

commit 8de386f388590f7b924e88f869441ca0422ea3a4
Author: Christian Hergert <christian@hergert.me>
Date:   Thu May 15 12:19:45 2014 -0700

    collection: rename delete() to remove() and deprecate delete.
    
    All of the other drivers have standardized on remove for the name for
    this operation. We should go ahead and do the same.

 src/mongoc/mongoc-bulk-operation.c | 20 ++++++++++++++++++--
 src/mongoc/mongoc-bulk-operation.h | 10 ++++++++--
 src/mongoc/mongoc-collection.c     | 16 ++++++++++++++--
 src/mongoc/mongoc-collection.h     |  7 ++++++-
 src/mongoc/mongoc-database.c       |  4 ++--
 tests/test-bulk.c                  |  4 ++--
 tests/test-mongoc-collection.c     |  8 ++++----
 7 files changed, 54 insertions(+), 15 deletions(-)

commit 0d2aafd3ff1299f33954fee57455c26831abd134
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 14 16:05:01 2014 -0700

    client: allow connecting to IPv6 addresses in default initializer.

 src/mongoc/mongoc-client.c |  3 +++
 tests/test-mongoc-client.c | 29 +++++++++++++++++++++++++++++
 2 files changed, 32 insertions(+)

commit 15f10cf63377f856c7d2a54b3f89377767e49757
Merge: ea443b1 8d3d4b0
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 13 12:44:20 2014 -0700

    Merge pull request #40 from gierschv/fix-clusterauth
    
    Fix sharded cluster & replica set authentication

commit 8d3d4b02663e7a99b7d5f381232f6052ebf7a822
Author: Vincent Giersch <vincent@giersch.fr>
Date:   Tue May 13 21:21:31 2014 +0200

    Fix sharded cluster & replica set authentication

 src/mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit ea443b1402c598d06c4e7c23f6584fc8ba554287
Merge: c9a03cc 106990b
Author: Christian Hergert <christian@hergert.me>
Date:   Fri May 9 12:58:10 2014 -0700

    Merge pull request #38 from fotonauts/static
    
    removing static warnings

commit 106990be4e69772d311dea7154ea64d5ef105442
Author: Jrme Lebel <jerome@fotonauts.com>
Date:   Fri May 9 21:48:28 2014 +0200

    removing static warnings

 src/mongoc/mongoc-cursor-array.c    | 8 ++++----
 src/mongoc/mongoc-cursor-cursorid.c | 6 +++---
 src/mongoc/mongoc-socket.c          | 6 +++---
 src/mongoc/mongoc-ssl.c             | 1 +
 src/mongoc/mongoc-stream-gridfs.c   | 1 +
 src/mongoc/mongoc-uri.c             | 1 +
 6 files changed, 13 insertions(+), 10 deletions(-)

commit c9a03ccc7dfae5e7fff420645c626e711424c994
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri May 9 12:25:12 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5daf404cb0d4e78926a5c570dd08beec25914883
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 17:02:22 2014 -0700

    build: always build bundled libbson with SRV4 packaging.

 build/solaris10/buildpkg.sh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 800e142aa3b212b32681284e4922c580e606c47a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 16:40:56 2014 -0700

    build: include SASL_LIBS and SSL_LIBS via pkg-config.

 src/libmongoc-1.0.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bac2178df6358c5f23ca1fe51a5489245ce8263f
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 16:31:06 2014 -0700

    build: don't try to be so relocatable with srv4
    
    This doesn't actually work because of how the pkg-config files are
    generated, so no need to actually be so relocatable.

 build/solaris10/buildpkg.sh | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit fcc06de70fc60e0b30d22117317a619b5ffaf120
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 16:30:25 2014 -0700

    build: fix .pc files in srv4 package.

 build/solaris10/buildpkg.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 41299cba75231932d31f68d316b2f7614289e9a3
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 14:22:48 2014 -0700

    build: bump libbson for packaging fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 04f9da7a6b8c6e9177cb2c6ac93325ddbb3ee7a9
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 14:20:52 2014 -0700

    build: don't bundle local configure generated mongoc-config.h

 src/mongoc/Makefile.am | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 7ff63c444b576816cf3fd38f7b768a728593a807
Merge: aab47a6 9ac0eb0
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 14:16:05 2014 -0700

    Merge pull request #37 from ChristianHeckl/master
    
    Be gentle to user provided BSON include path and only modify if really found by cmake script

commit aab47a641ff69e6314408275c80bdceb6e7004f9
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 14:04:38 2014 -0700

    build: add packaging script for Solaris 10 SRV4 packages.
    
    ./buildpkg.sh mongo-c-driver-0.94.3.tar.gz mongo-c-driver 0.94.3 i386
    
    You can replace i386 with sparc to build on a sparc machine.
    
    This will include both 32-bit and 64-bit versions of the libraries.
    The binaries will be 64-bit.

 build/solaris10/buildpkg.sh | 134 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 134 insertions(+)

commit 9ac0eb0f6850ad4aefc4043d19aea4fe70e6817f
Author: Christian Heckl <christian.heckl@novative.de>
Date:   Wed May 7 22:48:11 2014 +0200

    Be gentle to user provided BSON include path and only modify if really
    found by cmake script

 build/cmake/FindBSON.cmake | 2 ++
 1 file changed, 2 insertions(+)

commit dff7bbeeda540ca129a975ef89dbd0577e3cb4dc
Author: Christian Hergert <christian@hergert.me>
Date:   Wed May 7 11:00:33 2014 -0700

    build: rename target to dist-rpm

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f0b646d9c05cf59f61d43b130f575d1d3916c110
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 6 22:29:06 2014 -0700

    build: add `rpm' make target.

 Makefile.am | 4 ++++
 1 file changed, 4 insertions(+)

commit 54a6f83a93cdaaf7b69a6d0043521e1f34a779c1
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 6 19:15:07 2014 -0700

    build: add missing files to rpm spec.

 build/rpm/mongo-c-driver.spec | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2c27440118aefe4e001852e9fbca145e61db2eea
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 6 18:03:13 2014 -0700

    build: fix paths in rpm spec.

 build/rpm/mongo-c-driver.spec | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit d78b99e816b6f429bd3e34b4d160c4df60953073
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 6 17:28:28 2014 -0700

    build: check for pthread when not building bundled libbson.

 build/autotools/FindDependencies.m4 | 2 ++
 src/Makefile.am                     | 2 ++
 tests/Makefile.am                   | 1 +
 3 files changed, 5 insertions(+)

commit c9c344ba1552c6f98b7d98474fb25c1f073c8860
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 6 17:00:47 2014 -0700

    build: start on mongo-c-driver RPM spec.

 build/rpm/mongo-c-driver.spec | 64 +++++++++++++++++++++++++++++++++++++++++++
 tests/Makefile.am             |  3 ++
 2 files changed, 67 insertions(+)

commit 4d26f1619f3384157ea39a52ae76ade27b10627f
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 6 12:57:55 2014 -0700

    doc: start on step-by-step installation for Solaris 10.

 doc/mallard/installing-mongo-c-driver.page | 119 +++++++++++++++++++++++++++--
 1 file changed, 111 insertions(+), 8 deletions(-)

commit 938777cf7746db92863294c0994e665162e72ea0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 5 17:21:33 2014 -0700

    cluster: add some authentication logging for SASL.

 src/mongoc/mongoc-cluster.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 01d559bc54fcf3dac86191f828bc0e9bbc497eb9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 5 16:23:47 2014 -0700

    cluster: be explicit with parens.

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4460feec7444539cac6e70d663e134a0a4e18529
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 5 16:05:02 2014 -0700

    gssapi: use default authSource if authSource is empty string.

 src/mongoc/mongoc-cluster.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7a03e4c44d2374feba1633df00ef5aae992b3f50
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 5 15:30:57 2014 -0700

    tests: use explicit path for make_ca.pl

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6448146fed49c07a89fdc42225aaf37a4791af57
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 5 14:49:59 2014 -0700

    tests: bundle c_rehash.

 tests/Makefile.am |   5 +-
 tests/c_rehash    | 180 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 183 insertions(+), 2 deletions(-)

commit 6bc3c68de39242215ed6863893f5a299c389c75a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon May 5 14:38:23 2014 -0700

    tests: add SSL/SASL libs to test libs

 tests/Makefile.am | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 0bb6f1a9208b17b4c4c88291c5e43ad24ec144fc
Author: Christian Hergert <christian@hergert.me>
Date:   Fri May 2 11:09:43 2014 +0200

    build: bump libbson for atomics typo

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a12e08ffd47a45cd63d3c4f0a17cacb02467a790
Author: Christian Hergert <christian@hergert.me>
Date:   Fri May 2 10:43:18 2014 +0200

    cursor: handle error code 13390 from mongos indicating unknown command.

 src/mongoc/mongoc-cursor.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 94e5d2a6bd3fa86b2393bb14a99d102b31c7bfb1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 17:57:54 2014 -0700

    doc: add docs for mongoc_cursor_t.

 doc/mallard/mongoc_cursor_t.page | 32 ++++++++++++++++++++++++++++++--
 1 file changed, 30 insertions(+), 2 deletions(-)

commit 433fba9e41012a9096b6acdfadafef4d6abf8858
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 17:47:54 2014 -0700

    doc: add mongoc_collection_t doc.

 doc/mallard/mongoc_collection_t.page | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit fdaed4c0ad72ec1f99675d2b66cc5ba20f9c8a5c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 17:22:27 2014 -0700

    doc: add client docs.

 doc/mallard/mongoc_client_new.page                 | 25 ++++++++++-----------
 doc/mallard/mongoc_client_new_from_uri.page        | 17 ++++++--------
 doc/mallard/mongoc_client_set_read_prefs.page      | 19 +++++-----------
 doc/mallard/mongoc_client_set_ssl_opts.page        | 21 ++++++-----------
 .../mongoc_client_set_stream_initiator.page        | 26 ++++++++++++----------
 doc/mallard/mongoc_client_set_write_concern.page   | 19 +++++-----------
 doc/mallard/mongoc_client_t.page                   |  8 ++++++-
 7 files changed, 59 insertions(+), 76 deletions(-)

commit f36f482ad2ea1bd1262c9337286a11810bc6daf6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 17:04:05 2014 -0700

    doc: add doc for mongoc_client_get_uri.

 doc/mallard/mongoc_client_get_uri.page | 17 +++++++----------
 1 file changed, 7 insertions(+), 10 deletions(-)

commit f26c45342c8c85fe92876c8ba9d1dc93335f709c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 17:02:38 2014 -0700

    doc: add docs for mongoc_client_get_server_status().

 doc/mallard/mongoc_client_get_server_status.page | 21 ++++++++++-----------
 1 file changed, 10 insertions(+), 11 deletions(-)

commit fab1da4f4939e1ea205935f99f739a96463db8fd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:59:55 2014 -0700

    add write concern doc

 doc/mallard/mongoc_client_get_write_concern.page | 20 +++++++-------------
 1 file changed, 7 insertions(+), 13 deletions(-)

commit e7a8fed49ecaaf5b0333fe4757e65dcd2385aafa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:58:30 2014 -0700

    add read prefs docs.

 doc/mallard/mongoc_client_get_read_prefs.page | 17 +++++++----------
 1 file changed, 7 insertions(+), 10 deletions(-)

commit e4cd94edae37d1224e3b3966d4f422eefd49ec90
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:56:33 2014 -0700

    doc: add max bson/message size docs.

 doc/mallard/mongoc_client_get_max_bson_size.page    | 17 ++++++-----------
 doc/mallard/mongoc_client_get_max_message_size.page | 17 ++++++-----------
 2 files changed, 12 insertions(+), 22 deletions(-)

commit 753213ab8d3eef93003d156afc3176ee8af0c510
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:52:43 2014 -0700

    doc: add more client docs.

 doc/mallard/mongoc_client_get_database.page | 20 ++++++++------------
 doc/mallard/mongoc_client_get_gridfs.page   | 20 +++++++++-----------
 2 files changed, 17 insertions(+), 23 deletions(-)

commit ae8b495c840c2d86cab90637130e6e4ccae9935c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:35:08 2014 -0700

    doc: add docs for mongoc_client_get_database_names().

 doc/mallard/mongoc_client_get_database_names.page | 32 +++++++++++++++++------
 1 file changed, 24 insertions(+), 8 deletions(-)

commit 6a36fc72ad848c875b497e9579f6e8d0120929d4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:34:58 2014 -0700

    doc: fix parameter name.

 doc/mallard/mongoc_database_get_collection_names.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9974b5fc0b86b4911e6579d86bd1df56f255c3bf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:26:49 2014 -0700

    doc: more collection docs.

 doc/mallard/mongoc_client_destroy.page        | 13 +++++--------
 doc/mallard/mongoc_client_get_collection.page | 19 +++++++++----------
 2 files changed, 14 insertions(+), 18 deletions(-)

commit f4ee7658a4eb767dbbb35ff85b22d1416080d39d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:22:00 2014 -0700

    doc: add command docs for client.

 doc/mallard/mongoc_client_command.page        | 29 +++++++++++++--------------
 doc/mallard/mongoc_client_command_simple.page | 22 ++++++++++----------
 2 files changed, 25 insertions(+), 26 deletions(-)

commit 27a779c71b57c15ddf52528c53e7206213e44992
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 16:12:16 2014 -0700

    doc: add bulk operation documentation.

 doc/mallard/mongoc_bulk_operation_delete.page      | 14 +++++++-----
 doc/mallard/mongoc_bulk_operation_delete_one.page  | 14 +++++++-----
 doc/mallard/mongoc_bulk_operation_destroy.page     | 12 +++++-----
 doc/mallard/mongoc_bulk_operation_execute.page     | 15 +++++++------
 doc/mallard/mongoc_bulk_operation_insert.page      | 16 ++++++-------
 doc/mallard/mongoc_bulk_operation_replace_one.page | 21 +++++++++--------
 doc/mallard/mongoc_bulk_operation_t.page           |  8 ++++++-
 doc/mallard/mongoc_bulk_operation_update.page      | 26 +++++++++++++---------
 doc/mallard/mongoc_bulk_operation_update_one.page  | 21 +++++++++--------
 9 files changed, 84 insertions(+), 63 deletions(-)

commit bd85e4d748b2fcfc2daa746d1d28984aa477aedd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 15:47:44 2014 -0700

    doc: document logging system.

 doc/mallard/logging.page                    | 71 +++++++++++++++++++++++++++++
 doc/mallard/mongoc_log.page                 | 40 ----------------
 doc/mallard/mongoc_log_default_handler.page | 40 ----------------
 doc/mallard/mongoc_log_level_str.page       | 38 ---------------
 doc/mallard/mongoc_log_set_handler.page     | 36 ---------------
 5 files changed, 71 insertions(+), 154 deletions(-)

commit eb43c319c4153ae94941ea7d942eed83fdace7d7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 15:13:28 2014 -0700

    doc: remove unneeded pages.

 doc/mallard/mongoc_error_domain_t.page     | 18 ------------------
 doc/mallard/mongoc_gridfs_file_page_t.page | 18 ------------------
 doc/mallard/mongoc_log_level_t.page        | 21 ---------------------
 3 files changed, 57 deletions(-)

commit f659fa0e602b3502ed67cca4826c224d90107b7c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 15:10:12 2014 -0700

    doc: add more in depth example for client pool.

 doc/mallard/mongoc_client_pool_t.page | 37 +++++++++++++++++++++++++++++++++--
 1 file changed, 35 insertions(+), 2 deletions(-)

commit 7cd4042ffe1fe5e839cea79f0a162b0265ef8d06
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 15:05:46 2014 -0700

    doc: add mongoc_client_pool_t docs.

 doc/mallard/mongoc_client_pool_destroy.page | 14 +++++---------
 doc/mallard/mongoc_client_pool_new.page     | 14 ++++++--------
 doc/mallard/mongoc_client_pool_pop.page     | 14 ++++++--------
 doc/mallard/mongoc_client_pool_push.page    | 16 ++++++----------
 doc/mallard/mongoc_client_pool_t.page       | 25 ++++++++++++++++++++++++-
 doc/mallard/mongoc_client_pool_try_pop.page | 14 ++++++--------
 6 files changed, 53 insertions(+), 44 deletions(-)

commit 3c886228524004bf879c4b3e960315a1b7a2bae9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:50:39 2014 -0700

    doc: add docs for matcher functions.

 doc/mallard/mongoc_matcher_destroy.page | 12 +++++-------
 doc/mallard/mongoc_matcher_match.page   | 18 ++++++++----------
 doc/mallard/mongoc_matcher_new.page     | 18 ++++++++----------
 3 files changed, 21 insertions(+), 27 deletions(-)

commit 7a082b617b9a2106ae7e39f0eb44563999038bd0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:44:37 2014 -0700

    matcher: fix poorly named parameter.

 src/mongoc/mongoc-matcher.c | 8 ++++----
 src/mongoc/mongoc-matcher.h | 2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

commit f19140035f7feae3439767e7a36a8d213299a65f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:42:12 2014 -0700

    doc: add docs for mongoc_matcher_t.

 doc/mallard/mongoc_matcher_t.page | 60 ++++++++++++++++++++++++++++++++++++++-
 1 file changed, 59 insertions(+), 1 deletion(-)

commit 02ea5272265f485a51c3c04152b2beba4e1ab6e2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:32:54 2014 -0700

    doc: remove extra spacing

 doc/mallard/inserting-document.page | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit a948d83dff28355bdd720b7740d6969e057627aa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:31:28 2014 -0700

    doc: put example in <screen>

 doc/mallard/inserting-document.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ef90410b1ef4508bbbbe31d79aef0903e05ba6c8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:25:37 2014 -0700

    doc: add docs for mongoc_client_t.

 doc/mallard/mongoc_client_t.page | 28 +++++++++++++++++++++++++---
 1 file changed, 25 insertions(+), 3 deletions(-)

commit 362de4356e4c53477174ec6bfd2c83dd531a6f1d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 14:00:09 2014 -0700

    doc: add docs for mongoc_database_t.

 doc/mallard/mongoc_database_t.page | 39 +++++++++++++++++++++++++++++++++++++-
 1 file changed, 38 insertions(+), 1 deletion(-)

commit 3fb3942ae9ee4fcf2918431ed26eb02555551745
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 13:06:40 2014 -0700

    doc: lots of incremental mallard docs work.

 doc/mallard/mongoc_bulk_operation_delete.page      |  2 +-
 doc/mallard/mongoc_bulk_operation_delete_one.page  |  2 +-
 doc/mallard/mongoc_bulk_operation_destroy.page     |  2 +-
 doc/mallard/mongoc_bulk_operation_execute.page     |  6 ++--
 doc/mallard/mongoc_bulk_operation_insert.page      |  2 +-
 doc/mallard/mongoc_bulk_operation_replace_one.page |  2 +-
 doc/mallard/mongoc_bulk_operation_update.page      |  2 +-
 doc/mallard/mongoc_bulk_operation_update_one.page  |  2 +-
 doc/mallard/mongoc_client_command.page             |  6 ++--
 doc/mallard/mongoc_client_command_simple.page      |  8 ++---
 doc/mallard/mongoc_client_destroy.page             |  2 +-
 doc/mallard/mongoc_client_get_collection.page      |  2 +-
 doc/mallard/mongoc_client_get_database.page        |  2 +-
 doc/mallard/mongoc_client_get_database_names.page  |  6 ++--
 doc/mallard/mongoc_client_get_gridfs.page          |  6 ++--
 doc/mallard/mongoc_client_get_max_bson_size.page   |  2 +-
 .../mongoc_client_get_max_message_size.page        |  2 +-
 doc/mallard/mongoc_client_get_read_prefs.page      |  2 +-
 doc/mallard/mongoc_client_get_server_status.page   |  8 ++---
 doc/mallard/mongoc_client_get_uri.page             |  2 +-
 doc/mallard/mongoc_client_get_write_concern.page   |  2 +-
 doc/mallard/mongoc_client_new_from_uri.page        |  2 +-
 doc/mallard/mongoc_client_pool_destroy.page        |  2 +-
 doc/mallard/mongoc_client_pool_new.page            |  2 +-
 doc/mallard/mongoc_client_pool_pop.page            |  2 +-
 doc/mallard/mongoc_client_pool_push.page           |  4 +--
 doc/mallard/mongoc_client_pool_try_pop.page        |  2 +-
 doc/mallard/mongoc_client_set_read_prefs.page      |  4 +--
 doc/mallard/mongoc_client_set_ssl_opts.page        |  2 +-
 .../mongoc_client_set_stream_initiator.page        |  2 +-
 doc/mallard/mongoc_client_set_write_concern.page   |  4 +--
 doc/mallard/mongoc_collection_aggregate.page       |  6 ++--
 doc/mallard/mongoc_collection_command.page         |  6 ++--
 doc/mallard/mongoc_collection_command_simple.page  |  8 ++---
 doc/mallard/mongoc_collection_count.page           | 10 +++---
 .../mongoc_collection_create_bulk_operation.page   |  4 +--
 doc/mallard/mongoc_collection_create_index.page    |  6 ++--
 doc/mallard/mongoc_collection_delete.page          |  8 ++---
 doc/mallard/mongoc_collection_destroy.page         |  2 +-
 doc/mallard/mongoc_collection_drop.page            |  6 ++--
 doc/mallard/mongoc_collection_drop_index.page      |  6 ++--
 doc/mallard/mongoc_collection_ensure_index.page    |  6 ++--
 doc/mallard/mongoc_collection_find.page            |  6 ++--
 doc/mallard/mongoc_collection_find_and_modify.page |  6 ++--
 doc/mallard/mongoc_collection_get_last_error.page  |  2 +-
 doc/mallard/mongoc_collection_get_name.page        |  2 +-
 doc/mallard/mongoc_collection_get_read_prefs.page  |  2 +-
 .../mongoc_collection_get_write_concern.page       |  2 +-
 doc/mallard/mongoc_collection_insert.page          | 10 +++---
 doc/mallard/mongoc_collection_insert_bulk.page     | 10 +++---
 doc/mallard/mongoc_collection_rename.page          |  6 ++--
 doc/mallard/mongoc_collection_save.page            |  8 ++---
 doc/mallard/mongoc_collection_set_read_prefs.page  |  4 +--
 .../mongoc_collection_set_write_concern.page       |  4 +--
 doc/mallard/mongoc_collection_stats.page           |  6 ++--
 doc/mallard/mongoc_collection_update.page          |  8 ++---
 doc/mallard/mongoc_collection_validate.page        |  6 ++--
 doc/mallard/mongoc_cursor_clone.page               |  2 +-
 doc/mallard/mongoc_cursor_current.page             |  2 +-
 doc/mallard/mongoc_cursor_destroy.page             |  2 +-
 doc/mallard/mongoc_cursor_error.page               |  6 ++--
 doc/mallard/mongoc_cursor_get_host.page            |  2 +-
 doc/mallard/mongoc_cursor_is_alive.page            |  2 +-
 doc/mallard/mongoc_cursor_more.page                |  2 +-
 doc/mallard/mongoc_cursor_next.page                |  2 +-
 doc/mallard/mongoc_database_add_user.page          | 21 ++++++------
 doc/mallard/mongoc_database_command.page           | 25 ++++++++-------
 doc/mallard/mongoc_database_command_simple.page    | 20 ++++++------
 doc/mallard/mongoc_database_create_collection.page | 15 +++++++--
 doc/mallard/mongoc_database_destroy.page           | 15 ++++-----
 doc/mallard/mongoc_database_drop.page              | 22 ++++++-------
 doc/mallard/mongoc_database_get_collection.page    |  9 ++++--
 .../mongoc_database_get_collection_names.page      | 37 +++++++++++++++-------
 doc/mallard/mongoc_database_get_name.page          | 19 +++++------
 doc/mallard/mongoc_database_get_read_prefs.page    | 17 ++++------
 doc/mallard/mongoc_database_get_write_concern.page | 19 +++++------
 doc/mallard/mongoc_database_has_collection.page    | 27 +++++++---------
 doc/mallard/mongoc_database_remove_all_users.page  | 25 +++++++--------
 doc/mallard/mongoc_database_remove_user.page       | 27 +++++++---------
 doc/mallard/mongoc_database_set_read_prefs.page    | 17 ++++------
 doc/mallard/mongoc_database_set_write_concern.page | 17 ++++------
 doc/mallard/mongoc_gridfs_drop.page                |  4 +--
 doc/mallard/mongoc_gridfs_file_error.page          |  4 +--
 doc/mallard/mongoc_gridfs_file_list_error.page     |  4 +--
 doc/mallard/mongoc_gridfs_find_one.page            |  4 +--
 .../mongoc_gridfs_find_one_by_filename.page        |  4 +--
 doc/mallard/mongoc_matcher_destroy.page            |  2 +-
 doc/mallard/mongoc_matcher_match.page              |  2 +-
 doc/mallard/mongoc_matcher_new.page                |  4 +--
 doc/mallard/mongoc_read_prefs_add_tag.page         |  2 +-
 doc/mallard/mongoc_read_prefs_copy.page            |  2 +-
 doc/mallard/mongoc_read_prefs_destroy.page         |  2 +-
 doc/mallard/mongoc_read_prefs_get_mode.page        |  2 +-
 doc/mallard/mongoc_read_prefs_get_tags.page        |  2 +-
 doc/mallard/mongoc_read_prefs_is_valid.page        |  2 +-
 doc/mallard/mongoc_read_prefs_set_mode.page        |  2 +-
 doc/mallard/mongoc_read_prefs_set_tags.page        |  2 +-
 doc/mallard/mongoc_uri_copy.page                   |  2 +-
 doc/mallard/mongoc_uri_destroy.page                |  2 +-
 doc/mallard/mongoc_uri_get_auth_mechanism.page     |  2 +-
 doc/mallard/mongoc_uri_get_auth_source.page        |  2 +-
 doc/mallard/mongoc_uri_get_database.page           |  2 +-
 doc/mallard/mongoc_uri_get_hosts.page              |  2 +-
 doc/mallard/mongoc_uri_get_options.page            |  2 +-
 doc/mallard/mongoc_uri_get_password.page           |  2 +-
 doc/mallard/mongoc_uri_get_read_prefs.page         |  2 +-
 doc/mallard/mongoc_uri_get_replica_set.page        |  2 +-
 doc/mallard/mongoc_uri_get_ssl.page                |  2 +-
 doc/mallard/mongoc_uri_get_string.page             |  2 +-
 doc/mallard/mongoc_uri_get_username.page           |  2 +-
 doc/mallard/mongoc_uri_get_write_concern.page      |  2 +-
 doc/mallard/mongoc_write_concern_copy.page         |  2 +-
 doc/mallard/mongoc_write_concern_destroy.page      |  2 +-
 doc/mallard/mongoc_write_concern_get_fsync.page    |  2 +-
 doc/mallard/mongoc_write_concern_get_journal.page  |  2 +-
 doc/mallard/mongoc_write_concern_get_w.page        |  2 +-
 .../mongoc_write_concern_get_wmajority.page        |  2 +-
 doc/mallard/mongoc_write_concern_get_wtag.page     |  2 +-
 doc/mallard/mongoc_write_concern_get_wtimeout.page |  2 +-
 doc/mallard/mongoc_write_concern_set_fsync.page    |  2 +-
 doc/mallard/mongoc_write_concern_set_journal.page  |  2 +-
 doc/mallard/mongoc_write_concern_set_w.page        |  2 +-
 .../mongoc_write_concern_set_wmajority.page        |  2 +-
 doc/mallard/mongoc_write_concern_set_wtag.page     |  2 +-
 doc/mallard/mongoc_write_concern_set_wtimeout.page |  2 +-
 125 files changed, 350 insertions(+), 348 deletions(-)

commit 3e96cb2646d42c5d00482b8821e4623f47d85298
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 12:15:45 2014 -0700

    doc: finish stream docs.

 doc/mallard/mongoc_stream_file_t.page            |  5 ++++-
 doc/mallard/mongoc_stream_get_base_stream.page   |  5 ++---
 doc/mallard/mongoc_stream_gridfs_new.page        |  9 ++++-----
 doc/mallard/mongoc_stream_gridfs_t.page          | 20 +++++++++++++++++---
 doc/mallard/mongoc_stream_read.page              | 17 +++++++++++------
 doc/mallard/mongoc_stream_readv.page             | 17 +++++++++++------
 doc/mallard/mongoc_stream_setsockopt.page        | 13 ++++++-------
 doc/mallard/mongoc_stream_socket_get_socket.page |  7 +++----
 doc/mallard/mongoc_stream_socket_new.page        |  8 ++++----
 doc/mallard/mongoc_stream_socket_t.page          |  5 ++++-
 doc/mallard/mongoc_stream_t.page                 | 20 +++++++++++++++++++-
 doc/mallard/mongoc_stream_tls_check_cert.page    |  9 ++++-----
 doc/mallard/mongoc_stream_tls_do_handshake.page  | 12 +++++-------
 doc/mallard/mongoc_stream_tls_new.page           | 10 ++++------
 doc/mallard/mongoc_stream_tls_t.page             | 22 +++++++++++++++++++---
 doc/mallard/mongoc_stream_writev.page            | 14 ++++++++------
 16 files changed, 125 insertions(+), 68 deletions(-)

commit aa86f97849657bb29444b3aef7b000fe87304253
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 12:15:36 2014 -0700

    doc: update socket links

 doc/mallard/mongoc_socket_accept.page      | 2 +-
 doc/mallard/mongoc_socket_bind.page        | 2 +-
 doc/mallard/mongoc_socket_close.page       | 2 +-
 doc/mallard/mongoc_socket_connect.page     | 2 +-
 doc/mallard/mongoc_socket_destroy.page     | 2 +-
 doc/mallard/mongoc_socket_errno.page       | 2 +-
 doc/mallard/mongoc_socket_getnameinfo.page | 2 +-
 doc/mallard/mongoc_socket_getsockname.page | 2 +-
 doc/mallard/mongoc_socket_listen.page      | 2 +-
 doc/mallard/mongoc_socket_recv.page        | 2 +-
 doc/mallard/mongoc_socket_send.page        | 2 +-
 doc/mallard/mongoc_socket_sendv.page       | 2 +-
 doc/mallard/mongoc_socket_setsockopt.page  | 2 +-
 13 files changed, 13 insertions(+), 13 deletions(-)

commit 9c96fc2f2c792b84057c7bb583ef4a8bc26f217d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 11:29:05 2014 -0700

    doc: more stream docs.

 doc/mallard/mongoc_stream_close.page             |  8 ++++++--
 doc/mallard/mongoc_stream_cork.page              | 12 ++++++++----
 doc/mallard/mongoc_stream_file_get_fd.page       |  7 ++++---
 doc/mallard/mongoc_stream_file_new.page          |  7 ++++---
 doc/mallard/mongoc_stream_file_new_for_path.page | 12 ++++++------
 doc/mallard/mongoc_stream_uncork.page            | 10 ++++++++--
 6 files changed, 36 insertions(+), 20 deletions(-)

commit 952938699ba295bfc2f11dc54429dbaa11659e0d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 11:14:02 2014 -0700

    doc: incremental streams work

 .../mongoc_gridfs_create_file_from_stream.page        |  2 +-
 doc/mallard/mongoc_iovec_t.page                       | 19 ++++++++++++++++++-
 doc/mallard/mongoc_stream_buffered_new.page           | 10 +++++-----
 doc/mallard/mongoc_stream_buffered_t.page             | 18 ++++++++++++++++++
 doc/mallard/mongoc_stream_close.page                  |  2 +-
 doc/mallard/mongoc_stream_cork.page                   |  2 +-
 doc/mallard/mongoc_stream_destroy.page                |  6 ++----
 doc/mallard/mongoc_stream_flush.page                  |  7 ++++---
 doc/mallard/mongoc_stream_get_base_stream.page        |  2 +-
 doc/mallard/mongoc_stream_read.page                   |  2 +-
 doc/mallard/mongoc_stream_readv.page                  |  2 +-
 doc/mallard/mongoc_stream_setsockopt.page             |  2 +-
 doc/mallard/mongoc_stream_tls_check_cert.page         |  2 +-
 doc/mallard/mongoc_stream_tls_do_handshake.page       |  2 +-
 doc/mallard/mongoc_stream_tls_new.page                |  2 +-
 doc/mallard/mongoc_stream_uncork.page                 |  2 +-
 doc/mallard/mongoc_stream_writev.page                 |  2 +-
 17 files changed, 59 insertions(+), 25 deletions(-)

commit 31c35da8ef6067125f1ed899dfe2fdbbaa0ebf4a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 10:50:44 2014 -0700

    build: merge warning fixes for libbson on win32

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 67faee24e75ca0ac4c9be9b6b611492e89aeef82
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 10:49:42 2014 -0700

    tests: remove unused variable.

 tests/test-mongoc-collection.c | 1 -
 1 file changed, 1 deletion(-)

commit e9132b0d1c13b0384f29e1fc264a2c42a42a06b7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 25 10:41:50 2014 -0700

    build: bump libbson for win32 fix

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 488dd6cef1bc398a6abd6f29cd4f9608a15f5877
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 24 17:37:57 2014 -0700

    add synopsis to client

 doc/mallard/mongoc_client_t.page       |  9 ++++++++-
 doc/mallard/mongoc_delete_flags_t.page | 18 ------------------
 2 files changed, 8 insertions(+), 19 deletions(-)

commit 6449413a48db85edb339bb36642d934a9066d2c4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 24 17:27:24 2014 -0700

    bunch of mallard docs.

 doc/mallard/mongoc_bulk_operation_delete.page      |  36 +++++++
 doc/mallard/mongoc_bulk_operation_delete_one.page  |  36 +++++++
 doc/mallard/mongoc_bulk_operation_destroy.page     |  34 +++++++
 doc/mallard/mongoc_bulk_operation_execute.page     |  47 ++++++++++
 doc/mallard/mongoc_bulk_operation_insert.page      |  36 +++++++
 doc/mallard/mongoc_bulk_operation_replace_one.page |  40 ++++++++
 doc/mallard/mongoc_bulk_operation_t.page           |  23 +++--
 doc/mallard/mongoc_bulk_operation_update.page      |  40 ++++++++
 doc/mallard/mongoc_bulk_operation_update_one.page  |  40 ++++++++
 doc/mallard/mongoc_cleanup.page                    |  22 +++++
 doc/mallard/mongoc_client_command.page             |  54 +++++++++++
 doc/mallard/mongoc_client_command_simple.page      |  53 +++++++++++
 doc/mallard/mongoc_client_destroy.page             |  34 +++++++
 doc/mallard/mongoc_client_get_collection.page      |  42 +++++++++
 doc/mallard/mongoc_client_get_database.page        |  40 ++++++++
 doc/mallard/mongoc_client_get_database_names.page  |  45 +++++++++
 doc/mallard/mongoc_client_get_gridfs.page          |  49 ++++++++++
 doc/mallard/mongoc_client_get_max_bson_size.page   |  38 ++++++++
 .../mongoc_client_get_max_message_size.page        |  38 ++++++++
 doc/mallard/mongoc_client_get_read_prefs.page      |  38 ++++++++
 doc/mallard/mongoc_client_get_server_status.page   |  49 ++++++++++
 doc/mallard/mongoc_client_get_uri.page             |  38 ++++++++
 doc/mallard/mongoc_client_get_write_concern.page   |  38 ++++++++
 doc/mallard/mongoc_client_new.page                 |  38 ++++++++
 doc/mallard/mongoc_client_new_from_uri.page        |  38 ++++++++
 doc/mallard/mongoc_client_pool_destroy.page        |  34 +++++++
 doc/mallard/mongoc_client_pool_new.page            |  38 ++++++++
 doc/mallard/mongoc_client_pool_pop.page            |  38 ++++++++
 doc/mallard/mongoc_client_pool_push.page           |  36 +++++++
 doc/mallard/mongoc_client_pool_t.page              |  19 +++-
 doc/mallard/mongoc_client_pool_try_pop.page        |  38 ++++++++
 doc/mallard/mongoc_client_set_read_prefs.page      |  36 +++++++
 doc/mallard/mongoc_client_set_ssl_opts.page        |  36 +++++++
 .../mongoc_client_set_stream_initiator.page        |  38 ++++++++
 doc/mallard/mongoc_client_set_write_concern.page   |  36 +++++++
 doc/mallard/mongoc_client_t.page                   |  21 +++--
 doc/mallard/mongoc_collection_aggregate.page       |  48 ++++++----
 doc/mallard/mongoc_collection_command.page         |  55 +++++++++++
 doc/mallard/mongoc_collection_command_simple.page  |  51 ++++++++++
 doc/mallard/mongoc_collection_count.page           |  55 +++++++++++
 .../mongoc_collection_create_bulk_operation.page   |  43 +++++++++
 doc/mallard/mongoc_collection_create_index.page    |  49 ++++++++++
 doc/mallard/mongoc_collection_delete.page          |  51 ++++++++++
 doc/mallard/mongoc_collection_destroy.page         |  34 +++++++
 doc/mallard/mongoc_collection_drop.page            |  45 +++++++++
 doc/mallard/mongoc_collection_drop_index.page      |  47 ++++++++++
 doc/mallard/mongoc_collection_ensure_index.page    |  55 +++++++++++
 doc/mallard/mongoc_collection_find.page            |  55 +++++++++++
 doc/mallard/mongoc_collection_find_and_modify.page |  61 ++++++++++++
 doc/mallard/mongoc_collection_get_last_error.page  |  38 ++++++++
 doc/mallard/mongoc_collection_get_name.page        |  38 ++++++++
 doc/mallard/mongoc_collection_get_read_prefs.page  |  38 ++++++++
 .../mongoc_collection_get_write_concern.page       |  38 ++++++++
 doc/mallard/mongoc_collection_insert.page          |  51 ++++++++++
 doc/mallard/mongoc_collection_insert_bulk.page     |  59 ++++++++++++
 .../mongoc_collection_keys_to_index_string.page    |  38 ++++++++
 doc/mallard/mongoc_collection_rename.page          |  51 ++++++++++
 doc/mallard/mongoc_collection_save.page            |  49 ++++++++++
 doc/mallard/mongoc_collection_set_read_prefs.page  |  36 +++++++
 .../mongoc_collection_set_write_concern.page       |  36 +++++++
 doc/mallard/mongoc_collection_stats.page           |  49 ++++++++++
 doc/mallard/mongoc_collection_t.page               |  21 +++--
 doc/mallard/mongoc_collection_update.page          |  53 +++++++++++
 doc/mallard/mongoc_collection_validate.page        |  49 ++++++++++
 doc/mallard/mongoc_cursor_clone.page               |  38 ++++++++
 doc/mallard/mongoc_cursor_current.page             |  38 ++++++++
 doc/mallard/mongoc_cursor_destroy.page             |  34 +++++++
 doc/mallard/mongoc_cursor_error.page               |  45 +++++++++
 doc/mallard/mongoc_cursor_get_host.page            |  36 +++++++
 doc/mallard/mongoc_cursor_is_alive.page            |  38 ++++++++
 doc/mallard/mongoc_cursor_more.page                |  38 ++++++++
 doc/mallard/mongoc_cursor_next.page                |  40 ++++++++
 doc/mallard/mongoc_cursor_t.page                   |  19 +++-
 doc/mallard/mongoc_database_add_user.page          |  53 +++++++++++
 doc/mallard/mongoc_database_command.page           |  52 +++++++++++
 doc/mallard/mongoc_database_command_simple.page    |  51 ++++++++++
 doc/mallard/mongoc_database_create_collection.page |  34 +++++++
 doc/mallard/mongoc_database_destroy.page           |  34 +++++++
 doc/mallard/mongoc_database_drop.page              |  45 +++++++++
 doc/mallard/mongoc_database_get_collection.page    |  27 ++++++
 .../mongoc_database_get_collection_names.page      |  45 +++++++++
 doc/mallard/mongoc_database_get_name.page          |  38 ++++++++
 doc/mallard/mongoc_database_get_read_prefs.page    |  38 ++++++++
 doc/mallard/mongoc_database_get_write_concern.page |  38 ++++++++
 doc/mallard/mongoc_database_has_collection.page    |  47 ++++++++++
 doc/mallard/mongoc_database_remove_all_users.page  |  45 +++++++++
 doc/mallard/mongoc_database_remove_user.page       |  47 ++++++++++
 doc/mallard/mongoc_database_set_read_prefs.page    |  36 +++++++
 doc/mallard/mongoc_database_set_write_concern.page |  36 +++++++
 doc/mallard/mongoc_database_t.page                 |  19 +++-
 doc/mallard/mongoc_delete_flags_t.page             |  18 ++++
 doc/mallard/mongoc_error_domain_t.page             |  18 ++++
 doc/mallard/mongoc_gridfs_create_file.page         |  40 ++++++++
 .../mongoc_gridfs_create_file_from_stream.page     |  42 +++++++++
 doc/mallard/mongoc_gridfs_destroy.page             |  34 +++++++
 doc/mallard/mongoc_gridfs_drop.page                |  45 +++++++++
 doc/mallard/mongoc_gridfs_file_destroy.page        |  34 +++++++
 doc/mallard/mongoc_gridfs_file_error.page          |  45 +++++++++
 doc/mallard/mongoc_gridfs_file_get_aliases.page    |  37 ++++++++
 doc/mallard/mongoc_gridfs_file_get_chunk_size.page |  38 ++++++++
 .../mongoc_gridfs_file_get_content_type.page       |  37 ++++++++
 doc/mallard/mongoc_gridfs_file_get_filename.page   |  37 ++++++++
 doc/mallard/mongoc_gridfs_file_get_length.page     |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_get_md5.page        |  37 ++++++++
 doc/mallard/mongoc_gridfs_file_get_metadata.page   |  37 ++++++++
 .../mongoc_gridfs_file_get_upload_date.page        |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_list_destroy.page   |  34 +++++++
 doc/mallard/mongoc_gridfs_file_list_error.page     |  45 +++++++++
 doc/mallard/mongoc_gridfs_file_list_next.page      |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_list_t.page         |  21 +++++
 doc/mallard/mongoc_gridfs_file_page_t.page         |  18 ++++
 doc/mallard/mongoc_gridfs_file_readv.page          |  46 +++++++++
 doc/mallard/mongoc_gridfs_file_save.page           |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_seek.page           |  42 +++++++++
 doc/mallard/mongoc_gridfs_file_set_aliases.page    |  38 ++++++++
 .../mongoc_gridfs_file_set_content_type.page       |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_set_filename.page   |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_set_md5.page        |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_set_metadata.page   |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_t.page              |  21 +++++
 doc/mallard/mongoc_gridfs_file_tell.page           |  38 ++++++++
 doc/mallard/mongoc_gridfs_file_writev.page         |  44 +++++++++
 doc/mallard/mongoc_gridfs_find.page                |  40 ++++++++
 doc/mallard/mongoc_gridfs_find_one.page            |  47 ++++++++++
 .../mongoc_gridfs_find_one_by_filename.page        |  47 ++++++++++
 doc/mallard/mongoc_gridfs_get_chunks.page          |  38 ++++++++
 doc/mallard/mongoc_gridfs_get_files.page           |  38 ++++++++
 doc/mallard/mongoc_gridfs_t.page                   |  19 +++-
 doc/mallard/mongoc_index_opt_get_default.page      |  26 ++++++
 doc/mallard/mongoc_index_opt_init.page             |  34 +++++++
 doc/mallard/mongoc_index_opt_t.page                |  21 +++++
 doc/mallard/mongoc_init.page                       |  22 +++++
 doc/mallard/mongoc_iovec_t.page                    |  18 ++++
 doc/mallard/mongoc_log.page                        | 104 ++++++---------------
 doc/mallard/mongoc_log_default_handler.page        |  40 ++++++++
 doc/mallard/mongoc_log_level_str.page              |  38 ++++++++
 doc/mallard/mongoc_log_level_t.page                |  21 +++++
 doc/mallard/mongoc_log_set_handler.page            |  36 +++++++
 doc/mallard/mongoc_matcher_destroy.page            |  34 +++++++
 doc/mallard/mongoc_matcher_match.page              |  40 ++++++++
 doc/mallard/mongoc_matcher_new.page                |  45 +++++++++
 doc/mallard/mongoc_matcher_t.page                  |  19 +++-
 doc/mallard/mongoc_read_prefs_add_tag.page         |  36 +++++++
 doc/mallard/mongoc_read_prefs_copy.page            |  38 ++++++++
 doc/mallard/mongoc_read_prefs_destroy.page         |  34 +++++++
 doc/mallard/mongoc_read_prefs_get_mode.page        |  38 ++++++++
 doc/mallard/mongoc_read_prefs_get_tags.page        |  38 ++++++++
 doc/mallard/mongoc_read_prefs_is_valid.page        |  38 ++++++++
 doc/mallard/mongoc_read_prefs_new.page             |  38 ++++++++
 doc/mallard/mongoc_read_prefs_set_mode.page        |  36 +++++++
 doc/mallard/mongoc_read_prefs_set_tags.page        |  36 +++++++
 doc/mallard/mongoc_read_prefs_t.page               |  19 +++-
 doc/mallard/mongoc_socket_accept.page              |  40 ++++++++
 doc/mallard/mongoc_socket_bind.page                |  42 +++++++++
 doc/mallard/mongoc_socket_close.page               |  38 ++++++++
 doc/mallard/mongoc_socket_connect.page             |  44 +++++++++
 doc/mallard/mongoc_socket_destroy.page             |  34 +++++++
 doc/mallard/mongoc_socket_errno.page               |  38 ++++++++
 doc/mallard/mongoc_socket_getnameinfo.page         |  38 ++++++++
 doc/mallard/mongoc_socket_getsockname.page         |  42 +++++++++
 doc/mallard/mongoc_socket_listen.page              |  40 ++++++++
 doc/mallard/mongoc_socket_new.page                 |  42 +++++++++
 doc/mallard/mongoc_socket_recv.page                |  46 +++++++++
 doc/mallard/mongoc_socket_send.page                |  44 +++++++++
 doc/mallard/mongoc_socket_sendv.page               |  44 +++++++++
 doc/mallard/mongoc_socket_setsockopt.page          |  46 +++++++++
 doc/mallard/mongoc_socket_t.page                   |  19 +++-
 doc/mallard/mongoc_ssl_opt_get_default.page        |  26 ++++++
 doc/mallard/mongoc_ssl_opt_t.page                  |  21 +++++
 doc/mallard/mongoc_stream_buffered_new.page        |  40 ++++++++
 doc/mallard/mongoc_stream_close.page               |  38 ++++++++
 doc/mallard/mongoc_stream_cork.page                |  38 ++++++++
 doc/mallard/mongoc_stream_destroy.page             |  34 +++++++
 doc/mallard/mongoc_stream_file_get_fd.page         |  38 ++++++++
 doc/mallard/mongoc_stream_file_new.page            |  38 ++++++++
 doc/mallard/mongoc_stream_file_new_for_path.page   |  42 +++++++++
 doc/mallard/mongoc_stream_file_t.page              |  19 +++-
 doc/mallard/mongoc_stream_flush.page               |  38 ++++++++
 doc/mallard/mongoc_stream_get_base_stream.page     |  38 ++++++++
 doc/mallard/mongoc_stream_gridfs_new.page          |  38 ++++++++
 doc/mallard/mongoc_stream_read.page                |  46 +++++++++
 doc/mallard/mongoc_stream_readv.page               |  46 +++++++++
 doc/mallard/mongoc_stream_setsockopt.page          |  46 +++++++++
 doc/mallard/mongoc_stream_socket_get_socket.page   |  38 ++++++++
 doc/mallard/mongoc_stream_socket_new.page          |  38 ++++++++
 doc/mallard/mongoc_stream_socket_t.page            |  19 +++-
 doc/mallard/mongoc_stream_t.page                   |  19 +++-
 doc/mallard/mongoc_stream_tls_check_cert.page      |  40 ++++++++
 doc/mallard/mongoc_stream_tls_do_handshake.page    |  40 ++++++++
 doc/mallard/mongoc_stream_tls_new.page             |  42 +++++++++
 doc/mallard/mongoc_stream_uncork.page              |  38 ++++++++
 doc/mallard/mongoc_stream_writev.page              |  44 +++++++++
 doc/mallard/mongoc_uri_copy.page                   |  38 ++++++++
 doc/mallard/mongoc_uri_destroy.page                |  34 +++++++
 doc/mallard/mongoc_uri_get_auth_mechanism.page     |  38 ++++++++
 doc/mallard/mongoc_uri_get_auth_source.page        |  38 ++++++++
 doc/mallard/mongoc_uri_get_database.page           |  38 ++++++++
 doc/mallard/mongoc_uri_get_hosts.page              |  38 ++++++++
 doc/mallard/mongoc_uri_get_options.page            |  38 ++++++++
 doc/mallard/mongoc_uri_get_password.page           |  38 ++++++++
 doc/mallard/mongoc_uri_get_read_prefs.page         |  38 ++++++++
 doc/mallard/mongoc_uri_get_replica_set.page        |  38 ++++++++
 doc/mallard/mongoc_uri_get_ssl.page                |  38 ++++++++
 doc/mallard/mongoc_uri_get_string.page             |  38 ++++++++
 doc/mallard/mongoc_uri_get_username.page           |  38 ++++++++
 doc/mallard/mongoc_uri_get_write_concern.page      |  38 ++++++++
 doc/mallard/mongoc_uri_new.page                    |  38 ++++++++
 doc/mallard/mongoc_uri_new_for_host_port.page      |  40 ++++++++
 doc/mallard/mongoc_uri_t.page                      |  19 +++-
 doc/mallard/mongoc_uri_unescape.page               |  38 ++++++++
 doc/mallard/mongoc_write_concern_copy.page         |  38 ++++++++
 doc/mallard/mongoc_write_concern_destroy.page      |  34 +++++++
 doc/mallard/mongoc_write_concern_get_fsync.page    |  38 ++++++++
 doc/mallard/mongoc_write_concern_get_journal.page  |  38 ++++++++
 doc/mallard/mongoc_write_concern_get_w.page        |  38 ++++++++
 .../mongoc_write_concern_get_wmajority.page        |  38 ++++++++
 doc/mallard/mongoc_write_concern_get_wtag.page     |  38 ++++++++
 doc/mallard/mongoc_write_concern_get_wtimeout.page |  38 ++++++++
 doc/mallard/mongoc_write_concern_new.page          |  26 ++++++
 doc/mallard/mongoc_write_concern_set_fsync.page    |  36 +++++++
 doc/mallard/mongoc_write_concern_set_journal.page  |  36 +++++++
 doc/mallard/mongoc_write_concern_set_w.page        |  36 +++++++
 .../mongoc_write_concern_set_wmajority.page        |  36 +++++++
 doc/mallard/mongoc_write_concern_set_wtag.page     |  36 +++++++
 doc/mallard/mongoc_write_concern_set_wtimeout.page |  36 +++++++
 doc/mallard/mongoc_write_concern_t.page            |  19 +++-
 226 files changed, 8460 insertions(+), 153 deletions(-)

commit 277a63e4881f7781c737c7ef52c610d45ea58d7d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 24 13:14:21 2014 -0700

    doc: play around making api docs.

 doc/mallard/mongoc_collection_aggregate.page | 39 ++++++++++++++++++++++++++++
 doc/mallard/mongoc_collection_t.page         | 10 ++++++-
 2 files changed, 48 insertions(+), 1 deletion(-)

commit 7bb3959ce69bfa56150f99fdb354069d2bae8afe
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 23 17:09:43 2014 -0700

    cluster: use MONGOC_DEBUG() for initialization mode.

 src/mongoc/mongoc-cluster.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 462556ce648a13c977c68b9570305ac94f0e52ca
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 22 11:51:15 2014 -0700

    build: bump libbson submodule.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4c3cabf9cfc1c13f2664b9d3461c06fbb892c249
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 22 11:50:35 2014 -0700

    tests: deprecated mongoc_collection_bulk_insert() returns different values on 2.4 and 2.6

 tests/test-mongoc-collection.c | 20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)

commit bf851d60a480366637e874e934b1aa49e8a7cf14
Merge: 1e4e585 8bb64dc
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 22 11:40:07 2014 -0700

    Merge pull request #33 from hanumantmk/CDRIVER-359
    
    correct aggregate cursor functionality

commit 8bb64dc9ee10ab2bf23fe40e40ee2d7a8c2dadbe
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Tue Apr 22 14:18:06 2014 -0400

    correct aggregate cursor functionality
    
    handle limit appropriately for aggregates.  A few things were broken.
    
    Needs a fix in libbson as well

 src/mongoc/mongoc-collection.c      |  2 ++
 src/mongoc/mongoc-cursor-cursorid.c |  7 +++----
 src/mongoc/mongoc-cursor.c          |  6 ++++--
 tests/test-mongoc-collection.c      | 38 ++++++++++++++++++++-----------------
 4 files changed, 30 insertions(+), 23 deletions(-)

commit 1e4e5855ccc0eadaff1e3d1d4b357223f053bee3
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Tue Apr 22 14:35:39 2014 -0400

    fix a missing static on a once_init

 src/mongoc/mongoc-log.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5eb6937c5dbe6578a06bab5f70ee6150c4a8bfb9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 18:28:40 2014 -0700

    doc: use <cmd> and <var>

 doc/mallard/basic-troubleshooting.page | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e6da3d2eaa72872838c61b89c9f6cbbc7664d8c7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 18:25:35 2014 -0700

    doc: add kerberos documentation.

 doc/mallard/authentication.page | 34 ++++++++++++++++++++++++++++++----
 1 file changed, 30 insertions(+), 4 deletions(-)

commit 0d682e44dcf129618c68bcc41f09de2af299981f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 18:15:17 2014 -0700

    doc: add authentication docs.

 doc/mallard/authentication.page | 35 ++++++++++++++++++-----------------
 1 file changed, 18 insertions(+), 17 deletions(-)

commit 67e8af7985ca645bc055312ed76627e39335e1d5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 18:00:57 2014 -0700

    doc: add x509 docs.

 doc/mallard/authentication.page | 29 +++++++++++++++++++++++++----
 1 file changed, 25 insertions(+), 4 deletions(-)

commit 52bef6b203000ad5470bb452ce9dee2aedf954ca
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 17:34:50 2014 -0700

    doc: add OpenBSD 5.4 to list of supported operating systems.

 doc/mallard/installing-mongo-c-driver.page | 1 +
 1 file changed, 1 insertion(+)

commit e41bc8f769307f389fafdc4b665b6669587d2222
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 16:47:16 2014 -0700

    doc: add basic authentication docs.

 doc/mallard/authentication.page | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit fea608e0e8ed96f9975c830f7a221244f0fa8729
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 16:33:05 2014 -0700

    doc: add example for running a command.

 doc/mallard/executing-command.page | 99 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 99 insertions(+)

commit 9b03e112c936d3f6f6b5750226be9e45963bf2ff
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 16:15:41 2014 -0700

    doc: fix typo

 doc/mallard/installing-mongo-c-driver.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2b3a9e1f605873f50eac42010e1d58e6b5d45584
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 16:13:42 2014 -0700

    doc: add troubleshooting page

 doc/mallard/basic-troubleshooting.page | 109 +++++++++++++++++++++++++++++++++
 doc/mallard/counters.page              |  82 -------------------------
 2 files changed, 109 insertions(+), 82 deletions(-)

commit 1e3cd414375aa64e10cb657f784fe2acdbc62c09
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 13:43:34 2014 -0700

    counters: always use atomics for counter increments.
    
    This allows our counters to have full correctness. It is a bit slower
    in the contended and non-contended case, but when using per-cpu counters
    it is still significantly faster than atomics on a single cache-line.
    
    See https://raw.githubusercontent.com/chergert/counters/master/samples/core-i7-3667u/mutations.png
    for performance characteristics.

 src/mongoc/mongoc-counters-private.h | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit cfa2579461f122602c3b4d802d0bda20d0031f84
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 13:41:01 2014 -0700

    doc: add counters documentation.

 doc/mallard/counters.page | 63 ++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 62 insertions(+), 1 deletion(-)

commit 418d3ddbfdd2b317283495fcc515b3d67c0c8dcb
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 13:20:47 2014 -0700

    doc: manually -lbson-1.0 for gcc.

 TUTORIAL.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c82e761891db833ac6bd0993d7c774ed4d09a324
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 13:04:27 2014 -0700

    socket: update ingress bytes counter.

 src/mongoc/mongoc-socket.c | 2 ++
 1 file changed, 2 insertions(+)

commit 98d3db34f4d3b9fed0376e8128533ef76781ae2c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Apr 21 12:58:52 2014 -0700

    tests: up load test command count for longer running tests.

 tests/test-load.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6a8ebbc8eee4d7bb0a1632c156e76751f57c98aa
Author: Christian Hergert <christian@hergert.me>
Date:   Sat Apr 19 13:45:31 2014 -0700

    doc: add section on update for getting-started.

 doc/mallard/updating-document.page | 123 +++++++++++++++++++++++++++++++++++++
 1 file changed, 123 insertions(+)

commit 9f96057aee113829924bd5c3e8d10db92eb0be9f
Author: Christian Hergert <christian@hergert.me>
Date:   Sat Apr 19 13:45:00 2014 -0700

    docs: fix wording for insert example

 doc/mallard/inserting-document.page | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit acd20480e81ebb8437ee89b264f6c58b46b0e017
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 19:04:31 2014 -0700

    tests: fix warnings and potential failure

 tests/test-mongoc-collection.c | 3 ---
 1 file changed, 3 deletions(-)

commit 2b15c2aa0c286f36c9069137905028be8f1e050d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 19:00:49 2014 -0700

    tests: add test for large document query/reply set.

 tests/test-mongoc-collection.c | 79 +++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 78 insertions(+), 1 deletion(-)

commit 18417a2603932414642134eb666c70a80178c666
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 18:22:46 2014 -0700

    tests: add test for large (4mb) return document.

 tests/test-mongoc-collection.c | 56 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)

commit 2c2389f59408e35759fd00697059dd900d0be07f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 17:49:17 2014 -0700

    tests: add make_ca.pl to extra dist.

 tests/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7721615ef21c8fd6910dac27e94a4d8526e928d3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 17:32:53 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c4f7b37d02061559fa18a34b4267242e84e91317
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 17:28:42 2014 -0700

    build: explicitely link against $(BSON_LIBS) in tests if on GNU ld.
    
    Technically most GNU ld versions don't need this, but Ubuntu 12.04 does.

 build/autotools/SetupAutomake.m4 | 3 +++
 examples/Makefile.am             | 3 +++
 tests/Makefile.am                | 3 +++
 3 files changed, 9 insertions(+)

commit d909430aa4c281cc7b7cfe4d34eaa818abd0b4c0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 17:20:31 2014 -0700

    fix warning for shadow of clone

 src/mongoc/mongoc-cursor-array.c    | 8 ++++----
 src/mongoc/mongoc-cursor-cursorid.c | 8 ++++----
 2 files changed, 8 insertions(+), 8 deletions(-)

commit 652be8d1e8068dc051f9b3054330f95cffa83da2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:49:58 2014 -0700

    tests: ensure cleanup paths are hit.

 tests/echo-server.c | 2 ++
 tests/mock-server.c | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit f3864f9076a438a5fede1de18f6f064e7ea5b708
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:38:17 2014 -0700

    gridfs-file: remove superfluous ;

 src/mongoc/mongoc-gridfs-file.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a9aa234d045b2be4b23b0173bf612d35d2628b7e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:33:28 2014 -0700

    flags: use unsigned for MONGOC_UPDATE_NO_VALIDATE.

 src/mongoc/mongoc-flags.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b01a2629f0709197b3bc12b50baa957cd4f49cfd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:24:41 2014 -0700

    cluster: cast to void(*)(void*,void*) instead of (void*)
    
    This fixes a warning on sunpro c.

 src/mongoc/mongoc-cluster.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 243d4dd8d585bc97a2ae4a1a8ea6b31ee2c0be1d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:19:58 2014 -0700

    collection: use unsigned masks

 src/mongoc/mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 674322d6786e1958fd9a14591dea815b48b1062f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:16:31 2014 -0700

    flags: remove NO_VALIDATE from enum's

 src/mongoc/mongoc-flags.h | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit dc55a56d364f8346b79ff92c04d715e3435e4804
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 16:09:15 2014 -0700

    rpc: use uint32_t for enum fields.

 src/mongoc/mongoc-rpc-private.h | 2 ++
 src/mongoc/mongoc-rpc.c         | 9 +++++++++
 src/mongoc/op-delete.def        | 2 +-
 src/mongoc/op-insert.def        | 2 +-
 src/mongoc/op-query.def         | 2 +-
 src/mongoc/op-reply.def         | 2 +-
 src/mongoc/op-update.def        | 2 +-
 7 files changed, 16 insertions(+), 5 deletions(-)

commit e12f67cd7053fbef8b0b9ea2ecc61a2aba3e8cf5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 15:51:08 2014 -0700

    build: rely on libmongoc-priv.la for bson symbols.

 examples/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ddd63c5209b45387e226de797a67c87d7992d667
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 15:48:22 2014 -0700

    build: rely on libmongoc-priv.la for BSON_LIBS

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd899276ae332c7c82c09efc67703b8740c4abe8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 15:27:43 2014 -0700

    build: bump libbson for atomics fix on win32.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 021c1c82a9c689562088d47263a7cae9053e998f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 15:19:19 2014 -0700

    build: bump libbson for various endian/atomic fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 55d2e5bf74cd1d7f2eb1ecacdcaebaa9709eb71f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 14:17:20 2014 -0700

    build: bump for libbson changes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e9e5838031cfec2a823b94ea96f76587590346aa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Apr 16 14:16:40 2014 -0700

    doc: some churn on mallard docs.

 doc/mallard/authentication.page     | 14 +++++++++++++-
 doc/mallard/basic-prequisites.xml   | 12 ++++++++++++
 doc/mallard/counters.page           | 21 +++++++++++++++++++++
 doc/mallard/deleting-document.page  | 13 +++----------
 doc/mallard/finding-document.page   | 11 ++---------
 doc/mallard/index.page              |  6 +++++-
 doc/mallard/inserting-document.page | 11 ++---------
 7 files changed, 58 insertions(+), 30 deletions(-)

commit 938f7b5edc81dff20543e8f9b20d670ffc818c3e
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Apr 16 02:08:29 2014 -0700

    doc: stub out authentication

 doc/mallard/authentication.page | 43 +++++++++++++++++++++++++++++++++++++++++
 doc/mallard/index.page          |  6 +++++-
 2 files changed, 48 insertions(+), 1 deletion(-)

commit c9eca028bb7d359923ddc6e6df4172be9bb57021
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 15 18:54:39 2014 -0700

    build: bump for pthread fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f18a81939ef8cf01889bf1949e143fdc649d272a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 15 18:51:44 2014 -0700

    build: libbson bump for cmake fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4b4943a81a8fb2af2dc0b463fa8b8696369f16a4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 15 18:49:35 2014 -0700

    build: bump libbson for ppc check.

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 57354af7ada6669d7b3b2d9dfc0a680dc352e24b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 15 11:39:48 2014 -0700

    doc: add missing call to mongoc_init().

 TUTORIAL.md | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 325d3a0373ace311cc621b8cada50935d0e41149
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 01:40:40 2014 -0700

    doc: add header for client.

 doc/mallard/mongoc_client_t.page | 4 ++++
 1 file changed, 4 insertions(+)

commit d3647f151bc28d7a9444ff501538b237391786a2
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 01:39:04 2014 -0700

    doc: start on bulk api.

 doc/mallard/mongoc_bulk_operation_t.page | 6 ++++++
 1 file changed, 6 insertions(+)

commit 1c6ab9f46e422c62f951ef576f8dd2e9f37f59a5
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 01:28:06 2014 -0700

    doc: add log section.

 doc/mallard/mongoc_log.page | 80 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 80 insertions(+)

commit ec8314a14784a3528c8f60b70a026e779d985699
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 01:15:44 2014 -0700

    doc: add section on versioning.

 doc/mallard/mongoc_version.page | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit c2e34bd03c57c771c1ddaf49ef1ba0a5071749f1
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 00:54:05 2014 -0700

    doc: use 2column for getting-started.

 doc/mallard/index.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1864f08af03cd2d6e3aff99d3ef7816868e89f37
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 00:52:13 2014 -0700

    doc: add section on deleting a document.

 doc/mallard/deleting-document.page | 107 +++++++++++++++++++++++++++++++++++++
 1 file changed, 107 insertions(+)

commit af2acd3f7fea6f66c7ed7431660b8c9c866a7703
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 00:44:43 2014 -0700

    doc: add inserting document section

 doc/mallard/inserting-document.page | 109 ++++++++++++++++++++++++++++++++++++
 1 file changed, 109 insertions(+)

commit 911825b1f6affadc54dc7029155a65473739c7a8
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 00:37:27 2014 -0700

    doc: rename document.

 doc/mallard/finding-document.page  | 180 +++++++++++++++++++++++++++++++++++++
 doc/mallard/getting-connected.page | 180 -------------------------------------
 2 files changed, 180 insertions(+), 180 deletions(-)

commit 8400476baeedce3efb33c546d96c14d8841a1e1a
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 00:36:54 2014 -0700

    doc: fix naming.

 doc/mallard/mongoc_log.page     | 4 ++--
 doc/mallard/mongoc_version.page | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit a6ce01fa6816b005ad766999177eeed8e8e0ae6f
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 15 00:32:12 2014 -0700

    doc: start on some documentation sections.

 doc/mallard/advanced-connections.page      | 136 ++++++++++++++++++++++
 doc/mallard/connecting-to-mongo.page       |  59 ----------
 doc/mallard/getting-connected.page         | 180 +++++++++++++++++++++++++++++
 doc/mallard/index.page                     |   8 ++
 doc/mallard/installing-mongo-c-driver.page |   6 +-
 5 files changed, 329 insertions(+), 60 deletions(-)

commit 9f4e8aa166c724e4f69d30eedbb009db42e77791
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 22:46:38 2014 -0700

    doc: add note on SSL.

 doc/mallard/connecting-to-mongo.page | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 43bc452e0d958d4929c89dee76117ec3470eea90
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 22:44:02 2014 -0700

    doc: cleanup wording.

 doc/mallard/connecting-to-mongo.page | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1caef4ed88588671ede1767ba87002e78b8bc5a4
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 22:43:38 2014 -0700

    doc: start on connecting basics.

 doc/mallard/connecting-to-mongo.page | 51 ++++++++++++++++++++++++++++++++++--
 1 file changed, 49 insertions(+), 2 deletions(-)

commit 5446c17a1751de55d0a845c234e5a703143e8f21
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 22:04:31 2014 -0700

    doc: add supported toolchains

 doc/mallard/installing-mongo-c-driver.page | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 11fb8aced02917598930687f18becfd23d944961
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 19:39:10 2014 -0700

    doc: start on some topic based help ideas.

 doc/mallard/connecting-to-mongo.page       |   9 ++
 doc/mallard/index.page                     |  13 +++
 doc/mallard/installing-mongo-c-driver.page | 144 +++++++++++++++++++++++++++++
 doc/mallard/mongoc_bulk_operation_t.page   |   8 ++
 doc/mallard/mongoc_client_pool_t.page      |   8 ++
 doc/mallard/mongoc_client_t.page           |   8 ++
 doc/mallard/mongoc_collection_t.page       |   8 ++
 doc/mallard/mongoc_cursor_t.page           |   8 ++
 doc/mallard/mongoc_database_t.page         |   8 ++
 doc/mallard/mongoc_gridfs_t.page           |   8 ++
 doc/mallard/mongoc_log.page                |   8 ++
 doc/mallard/mongoc_matcher_t.page          |   8 ++
 doc/mallard/mongoc_read_prefs_t.page       |   8 ++
 doc/mallard/mongoc_socket_t.page           |   8 ++
 doc/mallard/mongoc_stream_buffered_t.page  |   8 ++
 doc/mallard/mongoc_stream_file_t.page      |   8 ++
 doc/mallard/mongoc_stream_gridfs_t.page    |   8 ++
 doc/mallard/mongoc_stream_socket_t.page    |   8 ++
 doc/mallard/mongoc_stream_t.page           |   8 ++
 doc/mallard/mongoc_stream_tls_t.page       |   8 ++
 doc/mallard/mongoc_uri_t.page              |   8 ++
 doc/mallard/mongoc_version.page            |   8 ++
 doc/mallard/mongoc_write_concern_t.page    |   8 ++
 23 files changed, 326 insertions(+)

commit 19e54d1fb2ad38619f62c3befa7d400f85ea58cc
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 14:15:57 2014 -0700

    docs: update path to most recent release.

 README.rst | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit c4c7e560e8f3ba3bb51a6b8dd86ba04b6c916cff
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 14:11:24 2014 -0700

    build: post-release bump.

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit ce413adab95bd3db042382763a1382ea5c329b0c
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 13:49:38 2014 -0700

    release 0.94.2!

 CMakeLists.txt              |  4 ++--
 NEWS                        | 15 +++++++++++++++
 build/autotools/Versions.m4 |  2 +-
 3 files changed, 18 insertions(+), 3 deletions(-)

commit ece30c96bd4ce93ca92950d23f2e5c38e6710434
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 14 13:12:21 2014 -0700

    build: bump libbson requirement to 0.6.8

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 447ac43e3dcacd5336bcd3c2384e8824a0ab1f1e
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 8 18:21:16 2014 -0700

    bson: bump for readme update.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1b0cb542441e9903f5549c70621013e7376355d7
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 8 18:12:00 2014 -0700

    build: check for __SUNPRO_C (Sun C compiler)

 build/autotools/CheckCompiler.m4 | 5 +++++
 1 file changed, 5 insertions(+)

commit 162263024140a93f28984bb6611f128dfb706064
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 8 18:11:09 2014 -0700

    tests: copy testsuite from libbson

 tests/TestSuite.c | 14 ++------------
 1 file changed, 2 insertions(+), 12 deletions(-)

commit f6639448533f743a90919e7ede41943987ad24d5
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 8 18:10:57 2014 -0700

    build: bump libbson for Sun C Compiler fixes.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 11c7f7f6fc8bad6f41fa1472387c8e349922ca76
Merge: 366f9b4 698870e
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Apr 8 10:45:36 2014 -0700

    Merge pull request #27 from hanumantmk/GITHUB_26
    
    fix mongoc-stream-tls

commit 698870e7c8a36ddfcd85fe68bf99fef3d2f9c49b
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Thu Apr 3 21:42:43 2014 -0400

    fix mongoc-stream-tls
    
    mongoc_stream_tls_readv and writev were both badly broken (didn't handle
    timeouts correctly, didn't handle iovecs correctly, etc.)
    
    this should fix things up considerably

 src/mongoc/mongoc-stream-tls.c | 89 +++++++++++++++++++++++++++++++-----------
 tests/ssl-test.c               | 15 +++++--
 2 files changed, 77 insertions(+), 27 deletions(-)

commit 366f9b46dc4537c2f6d0fe88287c05b968fee916
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 7 14:10:48 2014 -0700

    build: bump libbson requirement to 0.6.7

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 500bb09b442ec4aaa94d311c03c2f0ba1d746d48
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 7 14:09:07 2014 -0700

    build: bump libbson for various fixes.
    
     * Endian fix for date time
     * atomics work for Solaris 10 SPARC
     * allow trying to compile on gcc 3.4.3 (probably still needs work)

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e201d7ec3221d05561d7af6dd9627cf56b229118
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 4 15:27:25 2014 -0700

    build: post-release bump.

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 540ffefa211e66576b38d6da0dd3c99d304ae56b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Apr 4 13:16:34 2014 -0700

    build: release 0.94.0!

 CMakeLists.txt              |  6 +++---
 NEWS                        | 23 +++++++++++++++++++++++
 README.rst                  |  9 +++++----
 build/autotools/Versions.m4 |  4 ++--
 4 files changed, 33 insertions(+), 9 deletions(-)

commit 2c1d3d2c4f61c5900674813fba297787001820f3
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Apr 3 22:43:59 2014 -0700

    doc: cleanup title.

 doc/mongoc_socket_bind.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dc1047b2e58435fe91352ea4f09306ae565f6548
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Apr 3 22:41:56 2014 -0700

    doc: more docs for added symbols.

 doc/mongoc_cursor_is_alive.txt          | 33 +++++++++++++++++++++++++++++
 doc/mongoc_log_level_str.txt            | 31 +++++++++++++++++++++++++++
 doc/mongoc_socket_getnameinfo.txt       | 37 +++++++++++++++++++++++++++++++++
 doc/mongoc_stream_get_base_stream.txt   | 31 +++++++++++++++++++++++++++
 doc/mongoc_stream_socket_get_socket.txt |  1 +
 doc/mongoc_stream_socket_new.txt        |  7 +++++--
 doc/mongoc_uri_get_hosts.txt            | 27 ++++++++++++++----------
 doc/mongoc_uri_get_ssl.txt              |  1 +
 doc/mongoc_uri_get_write_concern.txt    |  1 +
 doc/mongoc_write_concern_get_fsync.txt  |  3 +++
 doc/mongoc_write_concern_get_wtag.txt   |  1 +
 doc/mongoc_write_concern_set_wtag.txt   |  1 +
 12 files changed, 161 insertions(+), 13 deletions(-)

commit 54eeee7f5ce6c3702cdf1199ddbcb6869185390d
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Apr 3 22:19:07 2014 -0700

    cursor: make is_alive const.

 src/mongoc/mongoc-cursor.c | 2 +-
 src/mongoc/mongoc-cursor.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 8cfdaef189c50dd4e86e9c1daeec06e608daa984
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Apr 3 22:16:50 2014 -0700

    doc: more documentation for new symbols.

 doc/mongoc_collection_find_and_modify.txt | 57 +++++++++++++++++++++++++++++++
 doc/mongoc_collection_rename.txt          | 44 ++++++++++++++++++++++++
 doc/mongoc_collection_stats.txt           | 44 ++++++++++++++++++++++++
 doc/mongoc_collection_validate.txt        | 47 +++++++++++++++++++++++++
 doc/mongoc_cursor_current.txt             | 33 ++++++++++++++++++
 5 files changed, 225 insertions(+)

commit f535036d4739b706736964ed683109befc2548f9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 19:16:36 2014 -0700

    doc: add create index docs

 doc/mongoc_collection_create_index.txt |  1 +
 doc/mongoc_collection_ensure_index.txt | 28 +++++++++++++++++++++++++++-
 2 files changed, 28 insertions(+), 1 deletion(-)

commit c0b5ff41ddb54094a4a03145d8d17583375e6736
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 19:08:22 2014 -0700

    doc: add docs for mongoc_collection_create_bulk_operation().

 doc/mongoc_collection_create_bulk_operation.txt | 74 +++++++++++++++++++++++++
 1 file changed, 74 insertions(+)

commit 5c07bd3cca6486d491340a7c4209b0f374aca5bf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 18:50:25 2014 -0700

    doc: add missing client documentation.

 doc/mongoc_client_get_max_bson_size.txt    | 38 ++++++++++++++++++++++++
 doc/mongoc_client_get_max_message_size.txt |  1 +
 doc/mongoc_client_get_server_status.txt    | 46 ++++++++++++++++++++++++++++++
 3 files changed, 85 insertions(+)

commit 4cc3d33ed8862fc8d0290874b0bf584c17fc967f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 18:41:53 2014 -0700

    docs: more bulk docs.

 doc/mongoc_bulk_operation_replace_one.txt | 46 ++++++++++++++++++++++++++
 doc/mongoc_bulk_operation_update.txt      | 55 +++++++++++++++++++++++++++++++
 doc/mongoc_bulk_operation_update_one.txt  |  1 +
 3 files changed, 102 insertions(+)

commit 45febe35fd6b54cf69ee05172cd000d1582dbbd1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 17:51:38 2014 -0700

    doc: more bulk operation docs.

 doc/mongoc_bulk_operation_destroy.txt | 41 ++++++++++++++++++++++++
 doc/mongoc_bulk_operation_execute.txt | 60 +++++++++++++++++++++++++++++++++++
 doc/mongoc_bulk_operation_insert.txt  | 45 ++++++++++++++++++++++++++
 3 files changed, 146 insertions(+)

commit 80d32f79a14a236291c01d5339d2bfbc20360335
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 17:41:43 2014 -0700

    doc: add docs for bulk_operation and mongoc_bulk_operation_delete*

 doc/mongoc_bulk_operation.txt            | 67 ++++++++++++++++++++++++++++++++
 doc/mongoc_bulk_operation_delete.txt     | 54 +++++++++++++++++++++++++
 doc/mongoc_bulk_operation_delete_one.txt |  1 +
 doc/mongoc_symbols.txt                   | 33 ++++++++++++++--
 4 files changed, 152 insertions(+), 3 deletions(-)

commit 0b30bfbb4943845fe6f774180ca78c331887adc2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 17:08:46 2014 -0700

    write-command: use legacy op with unacknowledged write if server supports it
    
    This should be faster than submitting write commands.

 src/mongoc/mongoc-write-command.c | 39 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 39 insertions(+)

commit 1bdda076025fab2660cf1b1d4e6d974b61c52def
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 16:11:32 2014 -0700

    build: require libbson 0.6.6.

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 471ee5f3d43034bba3dd1da665b5705074c9ddb9
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 15:32:27 2014 -0700

    docs: improve bcon example

 TUTORIAL.md | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit ed403c07b3269af5c3d549735a6ef85bf9160f9d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 14:39:02 2014 -0700

    README: add section on building from release tarball.

 README.rst | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit be29c4fffc6d2605e865c1929fc6a90223783984
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Apr 3 14:16:11 2014 -0700

    write-command: if writeErrors is non-empty, mark result as failed.
    
    This will ensure we do not continue processing in the ordered bulk API
    case. Otherwise, we could accidentially continue in the case of failure.

 src/mongoc/mongoc-write-command.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 8dd1594516c66b9f59a7534acd6bf8f6dc224d92
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Apr 2 13:32:04 2014 -0700

    cursor: be more helpful with error output in cursor query stage.

 src/mongoc/mongoc-cursor.c | 23 ++++++++++++++++-------
 1 file changed, 16 insertions(+), 7 deletions(-)

commit eeb7a8253725a69e5c7c450716c9fdb3e36dedfd
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Apr 2 13:30:02 2014 -0700

    cursor: split opcode and response_to checks.

 src/mongoc/mongoc-cursor.c | 27 ++++++++++++++++++---------
 1 file changed, 18 insertions(+), 9 deletions(-)

commit b9b0ebb282177af624d24a4d326ab5f7ac3535a8
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Apr 2 13:29:30 2014 -0700

    client: whitespace

 src/mongoc/mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 744a4612afb7ffcc4895c91709a60e2769791d66
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Apr 2 13:24:06 2014 -0700

    cluster: remove unneeded cast.

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1676c102f7f5b9dd0d28bc006f6f2c6601f995fd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:55:39 2014 -0700

    cursor: whitespace.

 src/mongoc/mongoc-cursor.c | 1 -
 1 file changed, 1 deletion(-)

commit fca2f1b4b1ef8aa261c71d264f1a022380c13203
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:55:31 2014 -0700

    cursor: set error on currupted result document.

 src/mongoc/mongoc-cursor.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 408cc26e5709a4965880abbaca73782723654dda
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:55:15 2014 -0700

    cursor: add missing tracing macros.

 src/mongoc/mongoc-cursor.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f06161dbe6d67603fd3dd0e1b7f8bf700d294714
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:47:40 2014 -0700

    cursor: parenthesis on flag checking.

 src/mongoc/mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d4b290629ed8641357123ee2bde227fae81ed9e3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:43:55 2014 -0700

    cluster: set an error message if we failed.

 src/mongoc/mongoc-cluster.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 991ae7e140719842be0c70e62fc7df937b6beb1e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:43:35 2014 -0700

    cursor: whitespace cleanup.

 src/mongoc/mongoc-cursor.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit a8e94e330e4cd12eff2707db44f827623105f28a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 16:33:56 2014 -0700

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1a40dfe2d2cf666e14e12357bf494ff99773a62f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 15:14:37 2014 -0700

    rpc: be a bit more defensive.

 src/mongoc/mongoc-rpc.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit 239d7d64c1898a2000625940519ad15c34ac2e94
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 11:47:44 2014 -0700

    docs: add some #includes

 TUTORIAL.md | 5 +++++
 1 file changed, 5 insertions(+)

commit 1590653a91b5fe76356477753dedc6f82a153f6c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 11:40:06 2014 -0700

    docs: add missing BCON_UTF8().

 TUTORIAL.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b8c54b823af393cf66015ee66636dc39bb4fc273
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 11:38:56 2014 -0700

    docs: format changes.

 TUTORIAL.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ca62496cf58266600b2208f10b2d50d66b410806
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 11:38:13 2014 -0700

    docs: fix end document.

 TUTORIAL.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit df2f3f76f1135b2bb60408092ea595302d3a6eba
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 11:36:49 2014 -0700

    docs: add some bson/bcon docs.

 TUTORIAL.md | 85 +++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 74 insertions(+), 11 deletions(-)

commit 6e7354808093fc701c04d0c6220600803caba14d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 10:49:54 2014 -0700

    collection: deprecate mongoc_collection_insert_bulk().

 src/mongoc/mongoc-collection.h | 2 +-
 tests/test-mongoc-client.c     | 5 +++++
 tests/test-mongoc-collection.c | 6 ++++++
 3 files changed, 12 insertions(+), 1 deletion(-)

commit 1d871d9b368e92f2061494eb841a74303ad0513e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 10:49:42 2014 -0700

    tests: add helper to ignore deprecations.

 tests/mongoc-tests.h | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 62230931ea3602748707742c24b0e8a3fa974369
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 10:34:30 2014 -0700

    write-command: only do bulk OP_INSERT for legacy bulk op.

 src/mongoc/mongoc-bulk-operation.c        |  3 ++-
 src/mongoc/mongoc-collection.c            |  4 ++--
 src/mongoc/mongoc-write-command-private.h |  4 +++-
 src/mongoc/mongoc-write-command.c         | 19 +++++++++++++------
 tests/test-write-commands.c               |  2 +-
 5 files changed, 21 insertions(+), 11 deletions(-)

commit 9130a00c492553577c0c899137f8ce6ddee0d86b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 10:26:18 2014 -0700

    build: bump libbson for bson_realloc_ctx win32 symbol.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b218e59bd032cec43770ea042620ced8fb9e5abc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Apr 1 10:24:25 2014 -0700

    write-command: add nModified comment.

 src/mongoc/mongoc-write-command.c | 3 +++
 1 file changed, 3 insertions(+)

commit c4a3f0c8d44871c4dfd5f339569998859c07aa88
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 31 16:46:28 2014 -0700

    stream-buffered: track new realloc changes.

 src/mongoc/mongoc-stream-buffered.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b5cf5cf649442eaa660525c114b502f81c8356e0
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 31 14:12:34 2014 -0700

    libbson: bump libbson for realloc changes.

 src/libbson                |  2 +-
 src/mongoc/mongoc-buffer.c | 10 +++++-----
 tests/test-mongoc-buffer.c |  2 +-
 tests/test-mongoc-rpc.c    |  2 +-
 4 files changed, 8 insertions(+), 8 deletions(-)

commit bef55c7fa129ddfcee8421cf91674e9a75d32ca8
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 31 13:59:33 2014 -0700

    update .gitignore for coverage files.

 .gitignore | 2 ++
 1 file changed, 2 insertions(+)

commit 3603a5d1f0ebbc8eac3a47cbc40c72a0f15535a5
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 31 13:58:49 2014 -0700

    doc: start on TUTORIAL.md.

 TUTORIAL.md | 414 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 414 insertions(+)

commit f9269ab63e82d77b994cadf97d0918a2544bbb49
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 17:40:21 2014 -0700

    collection: improve name validation.

 src/mongoc/mongoc-collection.c | 33 +++++++++++++++++++++++++--------
 1 file changed, 25 insertions(+), 8 deletions(-)

commit 5e7bcb03f39b85c597b1f9487ec7360ff9db7289
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 17:31:45 2014 -0700

    collection: deprecate mongoc_collection_ensure_index()
    
    The ensure_index() indicated, like other legacy drivers, that we were
    caching the results of the index creation. We do not, and will not be
    doing this in the future. (There are lots of good reasons why calling
    ensure index all over the place is a bad idea).
    
    Longer term, we may add a create_indexes() method so you can create more
    than one at a time, but for now this will do.

 src/mongoc/mongoc-collection.h | 2 +-
 src/mongoc/mongoc-gridfs.c     | 4 ++--
 tests/test-mongoc-collection.c | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 3ddf2984745f61fa9a15a4b55a48d3c4d862c9c8
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 15:09:35 2014 -0700

    collection: use createIndexes when posssible for index creation.
    
    2.6 has a new command called createIndexes which should be preferred to
    performing an insert on the system.indexes collection.
    
    Upon command not found failure, we insert into system.indexes in the
    old style. Contrast this to the situation where we know the server
    version/commands and make a decision based on that.

 build/cmake/libmongoc-ssl.def  |   1 +
 build/cmake/libmongoc.def      |   1 +
 src/libmongoc.symbols          |   1 +
 src/mongoc/mongoc-collection.c | 117 ++++++++++++++++++++++++++++++++++++++---
 src/mongoc/mongoc-collection.h |   4 ++
 5 files changed, 118 insertions(+), 6 deletions(-)

commit a49111c2e3f1132262d0fd7eadd8f5507b47fdbe
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 12:32:09 2014 -0700

    collection: move doc to be near function.

 src/mongoc/mongoc-collection.c | 33 +++++++++++++++++----------------
 1 file changed, 17 insertions(+), 16 deletions(-)

commit 418eeb81d7ac2fda4b97eb62f9488287568e3d03
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 12:13:04 2014 -0700

    examples: use mongoc_collection_find_and_modify().

 examples/find-and-modify.c | 88 +---------------------------------------------
 1 file changed, 1 insertion(+), 87 deletions(-)

commit 5e0c4894b266b916c3807e6896fadfaa3022e598
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 12:10:00 2014 -0700

    collection: add mongoc_collection_find_and_modify() helper.
    
    This should simplify the use case for people needing to do find_and_modify.
    My hope is that we can maintain this ABI, as it is a lot simpler than
    building complex bson documents with all the options.
    
    In the future we may introduce a more "builder" style concept for executing
    find and updates, but this should work for now.
    
    Holler if you have any complaints.

 build/cmake/libmongoc-ssl.def  |  1 +
 build/cmake/libmongoc.def      |  1 +
 src/libmongoc.symbols          |  1 +
 src/mongoc/mongoc-collection.c | 97 ++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h | 10 +++++
 tests/test-mongoc-collection.c | 67 +++++++++++++++++++++++++++++
 6 files changed, 177 insertions(+)

commit a9b0c4961b78de0e2a092e4d235e289f7f000a19
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Mar 28 00:56:38 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8a7a8506a9e414f26dd300b4ea505c95ea6aeea1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 19:02:29 2014 -0700

    build: bump libbson to master.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e12d34273755921bb5f9ccd8cd886886b8f46fc0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 18:54:57 2014 -0700

    use more natural alignments for key generation

 src/mongoc/mongoc-read-prefs.c    | 2 +-
 src/mongoc/mongoc-write-command.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit e1e31ad7d01571dcc73d59cad62cb0dc22d9fbb0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 15:46:52 2014 -0700

    build: fix filename on win32.

 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b6b1225e7a4d6198486d614e9b3366b11d6bcf67
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 14:42:30 2014 -0700

    tests: add basic write command test with splitting.

 CMakeLists.txt              |   1 +
 tests/Makefile.am           |   1 +
 tests/test-libmongoc.c      |   4 +-
 tests/test-write-commands.c | 110 ++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 115 insertions(+), 1 deletion(-)

commit 07240c1a70a9556e56ceca2ad734e703ae460407
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 14:42:00 2014 -0700

    write-commands: perform command splitting with insert write command.

 src/mongoc/mongoc-write-command.c | 66 ++++++++++++++++++++++++++++++++++++---
 1 file changed, 62 insertions(+), 4 deletions(-)

commit 96042724b72e05621791425eb568f75baecfed87
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 13:51:02 2014 -0700

    socket: check for defined(MSG_NOSIGNAL).

 src/mongoc/mongoc-socket.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit c2d5d7aa912c090d353b283bd6495c1dc3f74fee
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 13:43:19 2014 -0700

    build: remove missing file.

 tests/Makefile.am | 1 -
 1 file changed, 1 deletion(-)

commit 48a859952204acd3ad9d057e2b36ecd01218c529
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 13:37:00 2014 -0700

    write-commands: automatically split OP_INSERT when over batch or max size.

 src/mongoc/mongoc-write-command.c | 82 ++++++++++++++++++++++++++++++++++-----
 1 file changed, 72 insertions(+), 10 deletions(-)

commit 67a8bae133f00421bbee7ccc92277b59a86d8947
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 13:36:37 2014 -0700

    socket: make sure we don't get SIGPIPE.

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eb24724050f425ff0778c6d4e577a0a38144abd8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 13:21:26 2014 -0700

    tests: add debug target to simplify gdb debugging.
    
    `make debug' will now drop you into gdb with the unit tests loaded.
    simply `r' to start running, `bt' to get a stack trace.

 tests/Makefile.am | 4 ++++
 1 file changed, 4 insertions(+)

commit 4e6ccc26066535b3fddce71f881291bdafef12c0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 12:35:54 2014 -0700

    client: be lazy about SSL warnings.
    
    Clients that use their own socket/stream implementation could hit this
    even though SSL is not compiled into our client.

 src/mongoc/mongoc-client.c | 18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)

commit 08581e55962cc418e807fde5c99ae44c408332f0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 12:35:01 2014 -0700

    uri: add mongoc_uri_get_ssl().
    
    Helper to get the ?ssl=true|false parameter.

 build/cmake/libmongoc-ssl.def |  1 +
 build/cmake/libmongoc.def     |  1 +
 src/libmongoc.symbols         |  1 +
 src/mongoc/mongoc-uri.c       | 13 +++++++++++++
 src/mongoc/mongoc-uri.h       |  1 +
 5 files changed, 17 insertions(+)

commit 39077439cc005ca18c70af0b375a01f87bc9e437
Merge: 1b3d96e e00a860
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 27 10:14:21 2014 -0700

    Merge pull request #24 from essentia44/patch-1
    
    sets gLogData with user_data in log_set_handler()

commit e00a860cf05fa3fd5b0896002621be43b2a9346a
Author: essentia44 <anthony.champagne@gmail.com>
Date:   Thu Mar 27 15:09:32 2014 +0100

    sets gLogData with user_data in log_set_handler()

 src/mongoc/mongoc-log.c | 1 +
 1 file changed, 1 insertion(+)

commit 1b3d96ee5b66de536b97b9f29d28c4d01242522b
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 27 00:25:19 2014 -0700

    tests: allow aggregate failure on mongod <2.2.

 tests/test-mongoc-collection.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 1d4e31487ed0f7ff93a839f320e54bb58883e8c2
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 27 00:19:02 2014 -0700

    write-commands: dont leak gle from collection.

 src/mongoc/mongoc-bulk-operation.c | 3 ++-
 src/mongoc/mongoc-write-command.c  | 1 -
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 4c7f7083032b979b61bc58372e71b7ea39cc5b70
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 27 00:14:30 2014 -0700

    write-command: get write commands working on 2.6.0-rc2.

 src/mongoc/mongoc-collection.c            |  22 ++++
 src/mongoc/mongoc-write-command-private.h |   1 +
 src/mongoc/mongoc-write-command.c         | 160 ++++++++++++++++++++++++++----
 3 files changed, 165 insertions(+), 18 deletions(-)

commit c1bdcb4d6bfde29dc14ce686bd7c9cc6ecacb6b2
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 23:09:47 2014 -0700

    write-commands: get things working on 2.4.9.

 src/mongoc/mongoc-bulk-operation.c        |   4 +-
 src/mongoc/mongoc-collection.c            |  26 ++++-
 src/mongoc/mongoc-write-command-private.h |   1 +
 src/mongoc/mongoc-write-command.c         | 172 +++++++++++++++++++++++++++---
 tests/test-mongoc-collection.c            |   2 +-
 5 files changed, 187 insertions(+), 18 deletions(-)

commit a43d58d3b367dac302eead4aad3ed8edf2d3165b
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 22:02:01 2014 -0700

    collection: fix typo.

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1fb5eec008fbdc52b4aaad0b6ee9ba16fb97519b
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 21:50:29 2014 -0700

    write-command: set n_docuemnts on init.

 src/mongoc/mongoc-write-command.c | 1 +
 1 file changed, 1 insertion(+)

commit bcc070e6f4e5ba108df3c484c5b934b822abac64
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 21:48:21 2014 -0700

    write-command: check for empty insert.

 src/mongoc/mongoc-write-command.c | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)

commit 3af632f86310fafccc3070c4a63cec7834ac5765
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 21:48:12 2014 -0700

    bulk: ensure hint is initialized.

 src/mongoc/mongoc-bulk-operation.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d56f728b69a8f8c57620bee5e9de67489485f27
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 21:39:38 2014 -0700

    write-commands: more command churn.

 src/mongoc/mongoc-bulk-operation.c        |  14 +---
 src/mongoc/mongoc-collection.c            |  26 ++++----
 src/mongoc/mongoc-write-command-private.h |  29 +++++----
 src/mongoc/mongoc-write-command.c         | 103 ++++++++++++++++--------------
 4 files changed, 88 insertions(+), 84 deletions(-)

commit 25f76b0ac6af0e3a8afdbef1322328701357f06f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 26 20:17:03 2014 -0700

    write-command: be a bit more paranoid when generating inserts.

 src/mongoc/mongoc-write-command.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 913a6a92f278ce36068551084902c9fad59befdc
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 27 18:29:07 2014 -0700

    cluster: use signed size for bson/msg size.

 src/mongoc/mongoc-cluster-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d8a7252c7a53220a74b61aa139b52c69840aae7f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 18:00:52 2014 -0700

    write-command: respect max batch size even if documents is small.

 src/mongoc/mongoc-write-command.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit c500f6e600d239dd7dcd767865e0c40be347a716
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 17:25:23 2014 -0700

    log: follow up commit for adding symbols and cleanup.

 build/cmake/libmongoc-ssl.def | 1 +
 build/cmake/libmongoc.def     | 1 +
 src/libmongoc.symbols         | 1 +
 src/mongoc/mongoc-log.h       | 1 +
 4 files changed, 4 insertions(+)

commit 28e681905634e00d338cf052587e8601326adea9
Merge: f28f6f2 64e2a8e
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 27 17:23:12 2014 -0700

    Merge pull request #25 from bjori/log-fixes
    
    mongo_log fixes

commit f28f6f271471c694661affe3abbb701e142b9fd3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 17:18:59 2014 -0700

    write-commands: add some debug helpers.

 src/mongoc/mongoc-write-command.c | 3 +++
 1 file changed, 3 insertions(+)

commit 7fd9620f2a7e1c0f72ca6d80025429a5629d3b2a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 17:00:32 2014 -0700

    write-commands: don't shadow iter variable.

 src/mongoc/mongoc-write-command.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit c9c7d3d3c8c64fbdc8aca31581a59cf20bf19a4f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 27 16:59:16 2014 -0700

    tests: handle max documents in command splitting.

 src/mongoc/mongoc-write-command.c | 4 +++-
 tests/test-write-commands.c       | 7 -------
 2 files changed, 3 insertions(+), 8 deletions(-)

commit 64e2a8e169250818c7aceb92e1e160a79a16bc3f
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Mar 27 16:55:56 2014 -0700

    Add missing break
    
    This causing all log types being printed out to stdout

 src/mongoc/mongoc-log.c | 1 +
 1 file changed, 1 insertion(+)

commit f34cd4f9578af6aae63621becf5382141997577f
Author: Hannes Magnusson <bjori@mongodb.com>
Date:   Thu Mar 27 16:54:44 2014 -0700

    Export mongoc_log_level_str so projects don't have to copy&paste it

 src/mongoc/mongoc-log.c | 6 +++---
 src/mongoc/mongoc-log.h | 9 +++++++++
 2 files changed, 12 insertions(+), 3 deletions(-)

commit 9aeb68fe6d122438fe26acc8a43b227125b42d35
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 26 19:30:58 2014 -0700

    write-commands: wip.

 src/mongoc/mongoc-bulk-operation.c        | 13 ++++---
 src/mongoc/mongoc-write-command-private.h |  6 ++--
 src/mongoc/mongoc-write-command.c         | 56 +++++++++++++++++++++----------
 3 files changed, 47 insertions(+), 28 deletions(-)

commit ee361b8cb0765083a46746197123b79843420629
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 26 18:13:36 2014 -0700

    write-commands: add write-result to simplify result merging.

 src/mongoc/mongoc-bulk-operation-private.h |  13 +--
 src/mongoc/mongoc-bulk-operation.c         |  81 ++--------------
 src/mongoc/mongoc-collection.c             |  41 ++++++---
 src/mongoc/mongoc-write-command-private.h  |  69 +++++++++-----
 src/mongoc/mongoc-write-command.c          | 142 ++++++++++++++++++++++++-----
 5 files changed, 203 insertions(+), 143 deletions(-)

commit f1d273e5988f75244d51e97d9d6f0a41b22f20ab
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 01:48:03 2014 -0700

    write-commands: start using write commands from collection and bulk.
    
    Lots of fallout here, time to start fixing all that up.

 src/mongoc/mongoc-bulk-operation-private.h |   1 +
 src/mongoc/mongoc-bulk-operation.c         | 467 ++++-------------------------
 src/mongoc/mongoc-collection.c             | 323 +++-----------------
 src/mongoc/mongoc-collection.h             |   2 +-
 src/mongoc/mongoc-write-command.c          |   8 +-
 5 files changed, 104 insertions(+), 697 deletions(-)

commit 18d6980104dc3e329bb1f6cb1b6cef6fe479272e
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 26 01:16:41 2014 -0700

    write-commands: major cleanup of write command abstraction.

 src/mongoc/mongoc-bulk-operation-private.h |  29 --
 src/mongoc/mongoc-write-command-private.h  |  77 +++--
 src/mongoc/mongoc-write-command.c          | 521 +++++++++++++++++++++++++----
 3 files changed, 515 insertions(+), 112 deletions(-)

commit 94584c075f09ced625d4edfa8e1e08ae8c392e0c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 26 14:04:00 2014 -0700

    tools: fix mongoc-stat from windows fallout.

 src/mongoc/mongoc-counters.c | 25 ++++++++++++++-----------
 src/tools/Makefile.am        | 12 ++++++++++++
 src/tools/mongoc-stat.c      | 32 +++++++++++++++++++-------------
 3 files changed, 45 insertions(+), 24 deletions(-)

commit 6b88baea9d0901092da60902489016c8fc0bb6aa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 26 11:50:21 2014 -0700

    build: bump libbson for an osx realloc fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e5e71f10f8879e874e9f41de0d358927cd758913
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 21:11:04 2014 -0700

    database: plug leak in add user for hashed passwords.

 src/mongoc/mongoc-database.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit a0944e97726bed6abb6ba12f3fc7f6482b539859
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 21:09:51 2014 -0700

    tests: plug leak in aggregate.

 tests/test-mongoc-collection.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit f04b21e482b095b36eadce061610bf03ae550532
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 21:05:27 2014 -0700

    bulk: only create collection if we need to do legacy.

 src/mongoc/mongoc-bulk-operation.c | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit 74f51d60c62d393b40ee285d24b5005415dd1328
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 21:02:24 2014 -0700

    client: plug leak of read prefs and write concern.

 src/mongoc/mongoc-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit 128becda91403f6a2f84d38523916387171e4d57
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 20:57:17 2014 -0700

    uri: plug leak of write concern.

 src/mongoc/mongoc-uri.c | 1 +
 1 file changed, 1 insertion(+)

commit 353c4c2c5588a188f75dbf4a565cad9debdf7d32
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 19:03:55 2014 -0700

    cursor: make rerouting an info level message.

 src/mongoc/mongoc-cursor.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 10db2444fb2bebf405473fe32b62ab74d61d9b71
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 18:58:15 2014 -0700

    collection: fix invalid read prefs in insert.

 src/mongoc/mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8d78e4437868d2eaa87b2dfeb50c8c263c2eee73
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:44:41 2014 -0700

    collection: use write command module for insert.

 src/mongoc/mongoc-bulk-operation.c |  8 --------
 src/mongoc/mongoc-client.c         |  2 ++
 src/mongoc/mongoc-collection.c     | 39 +++++++++++++++-----------------------
 src/mongoc/mongoc-write-command.c  |  3 +++
 4 files changed, 20 insertions(+), 32 deletions(-)

commit 5ac682f4be2ab8373f7153df87d79a5a50b007a4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:34:25 2014 -0700

    bulk: use MONGOC_WRITE_COMMAND_SUPPORTED().

 src/mongoc/mongoc-bulk-operation.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b4a1a59449ddae944dc00c5c583c3007be4d47fc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:32:28 2014 -0700

    write-commands: add write commands module for more code sharing.

 CMakeLists.txt                            |   1 +
 src/mongoc/Makefile.am                    |   2 +
 src/mongoc/mongoc-bulk-operation.c        |  48 ++++++-------
 src/mongoc/mongoc-write-command-private.h |  58 +++++++++++++++
 src/mongoc/mongoc-write-command.c         | 115 ++++++++++++++++++++++++++++++
 5 files changed, 197 insertions(+), 27 deletions(-)

commit eec92eecc4e4acfe3bdb1d5b2cfe6e4a8c804938
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:07:17 2014 -0700

    collection: use write command for insert.
    
    This should have a cleanup pass, but good to get it in here and see if
    there is any fallout.

 src/mongoc/mongoc-collection.c | 67 ++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 64 insertions(+), 3 deletions(-)

commit e9f897bf8788fe87fa6dbe894a5da2702efe14ce
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:04:42 2014 -0700

    collection: deprecate insert_bulk for bulk api.

 src/mongoc/mongoc-collection.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ead9c86e4988c34ca0316ed5a0c1f23fc533fbf5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:04:24 2014 -0700

    error: add collection error types.

 src/mongoc/mongoc-error.h | 3 +++
 1 file changed, 3 insertions(+)

commit 038c33d3d4412d953b3cc933d921be0e18a8d1c4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 17:04:12 2014 -0700

    collection: whitespace.

 src/mongoc/mongoc-collection-private.h | 17 ++++++++---------
 src/mongoc/mongoc-collection.c         |  2 +-
 2 files changed, 9 insertions(+), 10 deletions(-)

commit 5a46b1f526675c6724b50042a9bc4d46bf2c1314
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 16:58:15 2014 -0700

    bulk: a few more fixes for <= 2.4 servers.

 src/mongoc/mongoc-bulk-operation.c | 89 ++++++++++++++++++++------------------
 1 file changed, 46 insertions(+), 43 deletions(-)

commit e7d40ea47ca43867611722d2aacb23f181a93446
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 16:35:29 2014 -0700

    bulk: handle upserted on (<= 2.4).

 src/mongoc/mongoc-bulk-operation.c | 117 +++++++++++++++++++++----------------
 1 file changed, 68 insertions(+), 49 deletions(-)

commit dd7c13212e782f648a79c86c3a515c5d8285ad43
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 15:51:25 2014 -0700

    build: bump libbson for deprecated warnings.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0944dfffe82e13906aa0304e2845be86090be0f8
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 15:42:26 2014 -0700

    bulk: update index as we process commands.

 src/mongoc/mongoc-bulk-operation.c |  4 ++
 tests/test-bulk.c                  | 95 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 99 insertions(+)

commit cb5ab63ab176018d6f8b4ea179c08c2435a2e972
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 15:09:44 2014 -0700

    bulk: start handling upserted array.

 CMakeLists.txt                             |   1 +
 src/mongoc/mongoc-bulk-operation-private.h |   1 +
 src/mongoc/mongoc-bulk-operation.c         |  56 +++++++-
 tests/Makefile.am                          |   1 +
 tests/test-bulk.c                          | 210 +++++++++++++++++++++++++++++
 tests/test-libmongoc.c                     |   2 +
 tests/test-mongoc-collection.c             |  82 -----------
 7 files changed, 266 insertions(+), 87 deletions(-)

commit 41c8f9694087ba6f32d1a868abe02ff8fd98926a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 14:15:20 2014 -0700

    build: add mongoc_stream_socket_get_socket to abi.

 build/cmake/libmongoc-ssl.def | 1 +
 build/cmake/libmongoc.def     | 1 +
 src/libmongoc.symbols         | 1 +
 3 files changed, 3 insertions(+)

commit 5e58c4d680ea57988857089ab96889f5edfb6d45
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 14:08:48 2014 -0700

    build: add bulk operation to cmake.

 CMakeLists.txt | 2 ++
 1 file changed, 2 insertions(+)

commit 41c4eeaec002023241a3ec55cfa004efb2f71196
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 14:02:26 2014 -0700

    cluster: handle canonicalized hostname for gssapi.
    
    Fixes CDRIVER-323.

 src/mongoc/mongoc-cluster.c | 100 +++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 99 insertions(+), 1 deletion(-)

commit 32402d0bbaeb79aa6cd20212177e29c4d410e817
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 14:01:49 2014 -0700

    uri: parse canonicalizeHostname uri parameter.

 src/mongoc/mongoc-uri.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 0c5df33127c5258ae0cd458c3cb98e831eb90d4c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 14:01:31 2014 -0700

    uri: accept t, true, or 1 for truth (including alternate casing)

 src/mongoc/mongoc-uri.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit c0531066b78297cc7a80846f3f5ec4e472387e50
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 14:00:39 2014 -0700

    stream: add mongoc_stream_get_base_stream().

 build/cmake/libmongoc-ssl.def       |  1 +
 build/cmake/libmongoc.def           |  1 +
 src/libmongoc.symbols               |  1 +
 src/mongoc/mongoc-stream-buffered.c |  9 +++++++
 src/mongoc/mongoc-stream-file.c     |  1 +
 src/mongoc/mongoc-stream-gridfs.c   |  1 +
 src/mongoc/mongoc-stream-private.h  | 49 ++++++++++++++++++++++---------------
 src/mongoc/mongoc-stream-socket.c   | 10 ++++++++
 src/mongoc/mongoc-stream-socket.h   |  3 ++-
 src/mongoc/mongoc-stream-tls.c      |  9 +++++++
 src/mongoc/mongoc-stream-tls.h      |  1 +
 src/mongoc/mongoc-stream.c          | 13 ++++++++++
 src/mongoc/mongoc-stream.h          | 49 +++++++++++++++++++------------------
 13 files changed, 103 insertions(+), 45 deletions(-)

commit 385f2f0ad40a41ff8fa9e837037dc09c72b9eb54
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 13:58:12 2014 -0700

    build: add mongoc-bulk-operation.h to mongoc.h

 src/mongoc/mongoc.h | 1 +
 1 file changed, 1 insertion(+)

commit 46ca3c1f83400c198db970cba67c306ee6489ae4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 13:54:56 2014 -0700

    socket: add mongoc_socket_getnameinfo().

 build/cmake/libmongoc-ssl.def |  1 +
 build/cmake/libmongoc.def     |  1 +
 src/libmongoc.symbols         |  1 +
 src/mongoc/mongoc-socket.c    | 25 +++++++++++++++++++++++++
 src/mongoc/mongoc-socket.h    |  1 +
 5 files changed, 29 insertions(+)

commit 32a8c948156ed2098e40e160ae6273729024b3d1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 12:08:43 2014 -0700

    build: update abi on win32.

 build/cmake/libmongoc-ssl.def | 10 ++++++++++
 build/cmake/libmongoc.def     | 10 ++++++++++
 2 files changed, 20 insertions(+)

commit 0772aaa7ff846714ceff6720fb5f80582276e0d6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 12:07:30 2014 -0700

    symbols: update abi file.

 src/libmongoc.symbols | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

commit f59e20236245223d7fbd763990173e4ccb0a96b2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 25 11:59:26 2014 -0700

    bulk: use legacy OP_INSERT/OP_DELETE/OP_UPDATE on pre-2.6 nodes.

 src/mongoc/mongoc-bulk-operation.c | 165 +++++++++++++++++++++++++++++++++++--
 tests/test-mongoc-collection.c     |  12 ++-
 2 files changed, 165 insertions(+), 12 deletions(-)

commit 83892bc5a6086a55cb87707f1643a6415ceb249d
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 25 00:06:30 2014 -0700

    bulk: add fields for storing additional reply info.

 src/mongoc/mongoc-bulk-operation-private.h |  3 +++
 src/mongoc/mongoc-bulk-operation.c         | 27 ++++++++++++++++++++++++++-
 2 files changed, 29 insertions(+), 1 deletion(-)

commit 0bdca1aad69f6d2272a13dfd3486e85a1f41686a
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 24 23:26:57 2014 -0700

    bulk: start merging reply documents.

 src/mongoc/mongoc-bulk-operation-private.h |  1 +
 src/mongoc/mongoc-bulk-operation.c         | 74 ++++++++++++++++++++++++++++--
 tests/test-mongoc-collection.c             | 38 +++++++++------
 3 files changed, 97 insertions(+), 16 deletions(-)

commit 633e09dfbe319e248371adefc78464e8b74172d2
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 24 22:03:17 2014 -0700

    ignore: allow using data/ for temp mongod processes.

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 3d9760948a131877b24c7f79b5dbe6a46c32c9d8
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 24 22:03:04 2014 -0700

    bulk: start building the response document.

 src/mongoc/mongoc-bulk-operation-private.h |  9 ++++++--
 src/mongoc/mongoc-bulk-operation.c         | 37 ++++++++++++++++++++++--------
 tests/test-mongoc-collection.c             | 22 ++++++++++++++++--
 3 files changed, 54 insertions(+), 14 deletions(-)

commit 546af019137d027c8dab0832525cc087e83de54e
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 24 21:15:49 2014 -0700

    bulk: stub out response merging.

 src/mongoc/mongoc-bulk-operation.c | 41 +++++++++++++++++++++++++++-----------
 1 file changed, 29 insertions(+), 12 deletions(-)

commit a63607376d68b3a5b5227f1891461d6bbda9952c
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 24 21:15:26 2014 -0700

    bulk: add some implementation notes.

 src/mongoc/mongoc-bulk-operation.c | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit ccbaacf2747b6e38a2daed7c45137dcc3f3da18c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:51:07 2014 -0700

    bulk: stub out sending write command.

 src/mongoc/mongoc-bulk-operation.c | 40 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 28d6c5b39de6ad11e9b2c4091b64299920e84be7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:50:58 2014 -0700

    bulk: we need the database name too for the command.

 src/mongoc/mongoc-bulk-operation-private.h | 2 ++
 src/mongoc/mongoc-bulk-operation.c         | 5 +++++
 src/mongoc/mongoc-collection.c             | 1 +
 3 files changed, 8 insertions(+)

commit 504cdfb9fd6510a0cf2d55287ccdd27713db3b72
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:39:06 2014 -0700

    bulk: return false immediately on empty set.

 src/mongoc/mongoc-bulk-operation.c | 1 +
 1 file changed, 1 insertion(+)

commit 9e078e39053d2985613ab5d4388c8b33ca3034b5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:38:12 2014 -0700

    bulk: start on test for bulk api.

 tests/test-mongoc-collection.c | 48 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit 57cbf24602d80e0d1780125bd0f2a2c516131cc7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:38:02 2014 -0700

    bulk: ensure we have a write concern, even if its the default.

 src/mongoc/mongoc-bulk-operation.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 23e494d44b0fd4c1243597348ae9fb1f56010ed7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:31:40 2014 -0700

    bulk: add mongoc_collection_create_bulk_operation().

 src/mongoc/mongoc-collection.c | 21 +++++++++++++++++++++
 src/mongoc/mongoc-collection.h |  4 ++++
 2 files changed, 25 insertions(+)

commit e2db879145f6a3816e48ef47883e0830c6e62a10
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:26:04 2014 -0700

    bulk: use update command for replace.

 src/mongoc/mongoc-bulk-operation-private.h |  6 ------
 src/mongoc/mongoc-bulk-operation.c         | 31 ++++++++++++++++--------------
 2 files changed, 17 insertions(+), 20 deletions(-)

commit 1df9a473339eed26808d727908b3a52c8a0f8d1a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 19:15:19 2014 -0700

    bulk: add deletes.

 src/mongoc/mongoc-bulk-operation.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 3d5d8b3cd64776f4202f981f015e6df4aa9a5a80
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 18:01:22 2014 -0700

    bulk: wip on building bulk ops.

 src/mongoc/mongoc-bulk-operation.c | 96 ++++++++++++++++++++++++++++++++++++--
 1 file changed, 92 insertions(+), 4 deletions(-)

commit 1b2ee7e52bce6daf1f1cbee72a972047db6dd17f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 17:15:32 2014 -0700

    bulk: store write concern.

 src/mongoc/mongoc-bulk-operation-private.h | 11 ++++++-----
 src/mongoc/mongoc-bulk-operation.c         |  3 +++
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 163a0fe33b97ff434b954a8d72e935f80abd6ada
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 17:06:15 2014 -0700

    bulk: move write concern to constructor.
    
    By having the write concern up-front, we can opportunistically start
    writing data to the underlying socket instead of waiting for execute
    to be called. This allows us to avoid extra data copies for documents.

 src/mongoc/mongoc-bulk-operation-private.h |  9 +++++----
 src/mongoc/mongoc-bulk-operation.c         | 18 ++++++++++++++----
 src/mongoc/mongoc-bulk-operation.h         |  1 -
 3 files changed, 19 insertions(+), 9 deletions(-)

commit d1d87d71784941a3b7fa1ca7204121b013ca2a51
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 16:35:07 2014 -0700

    bulk: execute should take const write concern.

 src/mongoc/mongoc-bulk-operation.h | 46 +++++++++++++++++++-------------------
 1 file changed, 23 insertions(+), 23 deletions(-)

commit a4dd0065b505bba4bf3ddbedbbe3e8a719cc20e8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 16:33:44 2014 -0700

    bulk: use command array to track commands as they are added.

 src/mongoc/mongoc-bulk-operation-private.h |  38 +++++++-
 src/mongoc/mongoc-bulk-operation.c         | 145 ++++++++++++++++++++++++++++-
 src/mongoc/mongoc-bulk-operation.h         |   3 +-
 3 files changed, 182 insertions(+), 4 deletions(-)

commit 6e147a070015f2ca2eb4d09b6f4cc46c307ba60d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 15:53:08 2014 -0700

    bulk: stub out bulk api.

 src/mongoc/Makefile.am                     |  3 ++
 src/mongoc/mongoc-bulk-operation-private.h | 47 +++++++++++++++++++++++
 src/mongoc/mongoc-bulk-operation.c         | 54 +++++++++++++++++++++++++++
 src/mongoc/mongoc-bulk-operation.h         | 60 ++++++++++++++++++++++++++++++
 4 files changed, 164 insertions(+)

commit c1f16903f4e54c80051debb3c94174a3aa21d10b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 12:42:59 2014 -0700

    gridfs: use 255kb sized chunks so they fit in power of two sizes on server.
    
    Fixes CDRIVER-322.

 src/mongoc/mongoc-gridfs-file.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 5724dda9fd6699a3ff435b771002a6509993a899
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 24 11:56:53 2014 -0700

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7d8996c408a1d7aca83b2e8a5d3ee6a74c765ec4
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Mar 23 23:04:34 2014 -0700

    cursor: add mongoc_cursor_current() to fetch current document.

 src/mongoc/mongoc-cursor-private.h |  2 ++
 src/mongoc/mongoc-cursor.c         | 11 +++++++++++
 src/mongoc/mongoc-cursor.h         |  1 +
 tests/test-mongoc-cursor.c         |  2 ++
 4 files changed, 16 insertions(+)

commit 872d59224cc9b299c617e697ac832c35e4b6c019
Author: Christian Hergert <christian@hergert.me>
Date:   Sat Mar 22 12:47:59 2014 -0700

    client: add serverStatus command helper.
    
    Fixes CDRIVER-319.

 build/cmake/libmongoc-ssl.def |  1 +
 build/cmake/libmongoc.def     |  1 +
 src/libmongoc.symbols         |  1 +
 src/mongoc/mongoc-client.c    | 20 ++++++++++++++++++++
 src/mongoc/mongoc-client.h    |  4 ++++
 tests/test-mongoc-client.c    | 26 ++++++++++++++++++++++++++
 6 files changed, 53 insertions(+)

commit 8e8e77d3c2874346d67bea68587052b9528df71c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 15:49:48 2014 -0700

    collection: add options for mongoc_collection_aggregate() [ABI Break]
    
    This improves the cursorid cursor to handle firstBatch special case.

 src/mongoc/mongoc-collection.c      | 36 +++++++++++++++++++++++---
 src/mongoc/mongoc-collection.h      |  1 +
 src/mongoc/mongoc-cursor-cursorid.c | 43 ++++++++++++++++++++++++++++---
 tests/test-mongoc-collection.c      | 51 ++++++++++++++++++++++++-------------
 4 files changed, 106 insertions(+), 25 deletions(-)

commit 382f2c0a528939e8177ebad0c3699dc73114ffe6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 15:48:10 2014 -0700

    bump libbson for BSON_ITER_IS_KEY().

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0c7ae4e743b1026648554586ba6d12d53d364aaa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 14:48:42 2014 -0700

    build: define BSON_CFLAGS and BSON_LIBS at configure time.
    
    When using the bundled copy of libbson, we were defining BSON_CFLAGS
    and BSON_LIBS in Makefile.am. This is less than ideal because it means
    they get defined at two difference locations.
    
    This patch defines them at configure time just like pkg-config would.

 Makefile.am                | 4 ----
 build/autotools/Libbson.m4 | 7 +++++--
 2 files changed, 5 insertions(+), 6 deletions(-)

commit e562fbd95c82bdaceb63232aa1437e44e36cf4b1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 14:22:35 2014 -0700

    pymongoc: stub out database

 src/bindings/python/Makefile.am         |  2 +
 src/bindings/python/pymongoc-database.c | 99 +++++++++++++++++++++++++++++++++
 src/bindings/python/pymongoc-database.h | 45 +++++++++++++++
 3 files changed, 146 insertions(+)

commit 069419c3da8a0641063f9a676b2411a5918fcf5e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 14:17:36 2014 -0700

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fff8a572f960fc9f876439668fa9b797e170b847
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 14:10:47 2014 -0700

    pymongoc: stub out cursor.

 src/bindings/python/Makefile.am       |  2 +
 src/bindings/python/pymongoc-cursor.c | 98 +++++++++++++++++++++++++++++++++++
 src/bindings/python/pymongoc-cursor.h | 45 ++++++++++++++++
 3 files changed, 145 insertions(+)

commit b881de0bf03c9b5cc09a3bed245f30ebb0425ed2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 14:09:06 2014 -0700

    build: include Python.h from gcc.

 src/bindings/python/Makefile.am            |  4 +++-
 src/bindings/python/pymongoc-client-pool.c |  1 -
 src/bindings/python/pymongoc-client-pool.h |  6 ------
 src/bindings/python/pymongoc-client.c      |  1 -
 src/bindings/python/pymongoc-client.h      | 11 +++--------
 src/bindings/python/pymongoc-uri.h         |  7 -------
 src/bindings/python/pymongoc.c             |  2 --
 7 files changed, 6 insertions(+), 26 deletions(-)

commit 369537e64f9f4d98428c2ef4266fc7aebede3b1e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 21 12:05:10 2014 -0700

    cluster: fix warning for missing brace in initializer

 src/mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3edc3f71e4e73e22c117339c68d0d0b4de1fe4ab
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 23:50:37 2014 -0700

    cluster: track wire version on a per-node basis.
    
    This uses the wire version for the given node to determine how we should
    send data before we've sent it. This will allow us to handle the new
    write commands more accurately without the "cluster negotiaion" which
    was less than ideal.

 src/mongoc/mongoc-cluster-private.h |  2 -
 src/mongoc/mongoc-cluster.c         | 67 ++++--------------------------
 src/mongoc/mongoc-collection.c      | 83 +++++++++++++++++++++++++++++++------
 src/mongoc/mongoc-cursor.c          |  5 ++-
 4 files changed, 82 insertions(+), 75 deletions(-)

commit e2780f663420ff2db34389471c2f28295b8c27f8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 23:48:46 2014 -0700

    cluster: use const for preselect.

 src/mongoc/mongoc-client-private.h  |  4 ++--
 src/mongoc/mongoc-client.c          | 10 +++++-----
 src/mongoc/mongoc-cluster-private.h |  4 ++--
 src/mongoc/mongoc-cluster.c         | 10 +++++-----
 4 files changed, 14 insertions(+), 14 deletions(-)

commit abf98518048409470b103a9ef156e1001935adff
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 22:40:45 2014 -0700

    client: wrap _mongoc_cluster_preselect()

 src/mongoc/mongoc-client-private.h |  6 ++++++
 src/mongoc/mongoc-client.c         | 15 +++++++++++++++
 tests/test-mongoc-client.c         | 18 ++++++++++++++++++
 3 files changed, 39 insertions(+)

commit 6e1b62abf305b413d11e40e1be8ef43cd7fba786
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 22:38:27 2014 -0700

    cluster: add _mongoc_cluster_preselect()
    
    This function can be used to select a target node before we have actually
    decided what to send. This will be useful with write commands and other
    items dependent on minWireVersion/maxWireVersion.

 src/mongoc/mongoc-cluster-private.h |  6 ++++++
 src/mongoc/mongoc-cluster.c         | 29 ++++++++++++++++++++++++++++-
 2 files changed, 34 insertions(+), 1 deletion(-)

commit 288902fb159b814b72a38b526b13069a19856d02
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 21:59:55 2014 -0700

    whitespace.

 src/mongoc/mongoc-client-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 50f701ce6a0f200f3f83b315f9168c1965a15804
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 20:50:20 2014 -0700

    build: fix warnings on glibc 2.19
    
    glibc 2.19 complains about deprecation of both _GNU_SOURCE and _SVID_SOURCE
    defined. (_SVID_SOURCE comes from _BSD_SOURCE). This does a check for
    glibc and only defines _GNU_SOURCE if we are on glibc. _GNU_SOURCE covers
    all our bases from _BSD_SOURCE anyway.

 build/autotools/CheckCompiler.m4 | 12 ++++++++++++
 src/Makefile.am                  |  3 +--
 2 files changed, 13 insertions(+), 2 deletions(-)

commit ce07468568d714b70264c3e99892f529a899ef72
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 20:32:42 2014 -0700

    counters: fix build, cleanup atexit.
    
    The atexit stuff should probably go into mongoc_cleanup().

 src/mongoc/mongoc-counters.c | 35 ++++++++++++++++++-----------------
 1 file changed, 18 insertions(+), 17 deletions(-)

commit b2644d1288d88abb0bda80c1963bdb43f961f016
Merge: ac37cee 3e3bef5
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 20 19:51:38 2014 -0700

    Merge pull request #21 from watsonsong/master
    
    Memory leak fix on windows platform

commit 3e3bef5b2156f1ae38621f71eb8893a6bbc52da8
Author: Frank Watson Song <watsonsong@foxmail.com>
Date:   Fri Mar 21 10:21:52 2014 +0800

    Memory leak fix on windows platform
    The counter memory will leak on windows platform between mongoc_init and mongoc_cleanup.
    Although it is not a problem because it just leak when exit the program. but I prefer to make the memory leak detector happy.

 src/mongoc/mongoc-counters.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit ac37ceed48a0e80a17856fcc775c5302ec63b85c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 18:10:58 2014 -0700

    cluster: be resilient about no replicaSet value.
    
    If we think we are connecting to a sharded cluster, (due to no
    replicaSet being specified) and the first node in the seed list is not
    a mongos (isdbgrid), then change modes to replicaSet and reconnect.
    
    Fixes CDRIVER-312.

 src/mongoc/mongoc-cluster-private.h |  4 ++-
 src/mongoc/mongoc-cluster.c         | 49 +++++++++++++++++++++++++------------
 src/mongoc/mongoc-cursor.c          |  3 ++-
 3 files changed, 38 insertions(+), 18 deletions(-)

commit fa45d53376c2511fab8ef4b35d3a978c6ebd6307
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 17:08:32 2014 -0700

    collection: add mongoc_collection_stats().

 build/cmake/libmongoc-ssl.def  |  1 +
 build/cmake/libmongoc.def      |  1 +
 src/libmongoc.symbols          |  1 +
 src/mongoc/mongoc-collection.c | 58 ++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h |  4 +++
 tests/test-mongoc-collection.c | 40 +++++++++++++++++++++++++++++
 6 files changed, 105 insertions(+)

commit 459368ed44b094a9e7b39cdbe29bac91ea8d301d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 16:54:20 2014 -0700

    collection: add mongoc_collection_rename().

 build/cmake/libmongoc-ssl.def  |   1 +
 build/cmake/libmongoc.def      |   1 +
 src/libmongoc.symbols          |   1 +
 src/mongoc/mongoc-collection.c | 101 +++++++++++++++++++++++++++++++++++++++--
 src/mongoc/mongoc-collection.h |   5 ++
 tests/test-mongoc-collection.c |  31 +++++++++++++
 6 files changed, 135 insertions(+), 5 deletions(-)

commit f851f6daa85ba64ef9c8fd6bd5aea605b8fc0616
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 16:17:24 2014 -0700

    oops, nevermind.

 CMakeLists.txt | 1 -
 1 file changed, 1 deletion(-)

commit 726c6903b02536743c8dcd327dcc7d1dd9765e94
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 16:17:03 2014 -0700

    build: add missing test file to cmake

 CMakeLists.txt | 1 +
 1 file changed, 1 insertion(+)

commit 537d046a9cb7ce8eb77f5d151e51142c668533ed
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 16:03:39 2014 -0700

    build: bump for libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f357b98412fd16a7a7b34f1daf0645f2425d42b1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 16:00:18 2014 -0700

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 51eb069b08a9f5f19305351b43fd503a91859045
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 15:55:51 2014 -0700

    client: set default write concern from uri options.

 src/mongoc/mongoc-client.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 2c9ecf7064422c99484402eb585b1a3c7aa9103f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 15:55:37 2014 -0700

    uri: parse w=tagname and ensure its set in write concern.
    
    also adds mongoc_uri_get_write_concern() to build write concern from
    uri settings.

 build/cmake/libmongoc-ssl.def |   1 +
 build/cmake/libmongoc.def     |   1 +
 src/libmongoc.symbols         |   1 +
 src/mongoc/mongoc-uri.c       | 118 +++++++++++++++++++++++++++++++++++-------
 src/mongoc/mongoc-uri.h       |  34 ++++++------
 tests/test-mongoc-uri.c       |  58 +++++++++++++++++++++
 6 files changed, 179 insertions(+), 34 deletions(-)

commit 2da6c03b74c33c859d39847cffa7042d261086ca
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 15:55:01 2014 -0700

    write-concern: add suport for write concern tag name.

 build/cmake/libmongoc-ssl.def             |  2 ++
 build/cmake/libmongoc.def                 |  2 ++
 src/libmongoc.symbols                     |  2 ++
 src/mongoc/mongoc-write-concern-private.h |  2 +-
 src/mongoc/mongoc-write-concern.c         | 57 ++++++++++++++++++++++---------
 src/mongoc/mongoc-write-concern.h         | 10 ++++--
 6 files changed, 55 insertions(+), 20 deletions(-)

commit 69338ace430b269803735ebacac1c4803a0e85aa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 14:27:09 2014 -0700

    uri: remove unused field write_concern.

 src/mongoc/mongoc-uri.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 293b96d881947ae78b3aad3bc509edd525486ccd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 14:18:18 2014 -0700

    uri: allow True for boolean.

 src/mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1ad580c97e2b928ebb207c0b6a975e9c1219759a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 13:36:57 2014 -0700

    database: remove old comment.

 src/mongoc/mongoc-database.c | 1 -
 1 file changed, 1 deletion(-)

commit 68bf321f7d79e2576ef0e825a19cae30f2dc175d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 13:32:31 2014 -0700

    cursor: add mongoc_cursor_is_alive().

 build/cmake/libmongoc-ssl.def |  1 +
 build/cmake/libmongoc.def     |  1 +
 src/libmongoc.symbols         |  1 +
 src/mongoc/mongoc-cursor.c    | 31 +++++++++++++++++++++++++++++++
 src/mongoc/mongoc-cursor.h    |  1 +
 5 files changed, 35 insertions(+)

commit 943986a1c61ef278592b07b07aa800b4309d991a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 13:19:32 2014 -0700

    cursor: check type of $explain and $snapshot.

 src/mongoc/mongoc-collection.c |  6 +++---
 src/mongoc/mongoc-cursor.c     | 44 ++++++++++++++++++++++++++++++++++--------
 2 files changed, 39 insertions(+), 11 deletions(-)

commit 6d03f43002d999176d30b718df38421a7aeaba85
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 12:57:43 2014 -0700

    collection: add mongoc_collection_validate().

 build/cmake/libmongoc-ssl.def          |  1 +
 build/cmake/libmongoc.def              |  1 +
 src/libmongoc.symbols                  |  1 +
 src/mongoc/mongoc-collection-private.h |  4 +--
 src/mongoc/mongoc-collection.c         | 66 ++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-collection.h         |  4 +++
 tests/test-mongoc-collection.c         | 50 ++++++++++++++++++++++++++
 7 files changed, 125 insertions(+), 2 deletions(-)

commit 9a59e97b0435454de6e883826a76d4d55cc83d09
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 20 12:32:36 2014 -0700

    client: add helper to get max bson and message size.
    
    This requires that a command has first been sent (ie: warm the client).
    Otherwise defaults are returned.

 build/cmake/libmongoc.def  |  2 ++
 src/libmongoc.symbols      |  2 ++
 src/mongoc/mongoc-client.c | 18 ++++++++++++++++++
 src/mongoc/mongoc-client.h |  2 ++
 4 files changed, 24 insertions(+)

commit 05472fa69aae895a67d307e8842714839fa90421
Merge: 119b724 908b104
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 20 09:53:38 2014 -0700

    Merge pull request #19 from watsonsong/master
    
    Some bug fix.

commit 908b104d5cc7a99c7790e69b165be6464b03cdbb
Author: Frank Watson Song <watsonsong@foxmail.com>
Date:   Thu Mar 20 17:09:42 2014 +0800

    Do not valid the bson when ensure index.
    the valid will refuse to accept dot(.) or dollar($) as the bson tag. But for embed field to index, which need using dot as a tag name.

 src/mongoc/mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 899a649e4a3a172c5355c99a3e3b2bb2f7e77c1f
Author: Frank Watson Song <watsonsong@foxmail.com>
Date:   Thu Mar 20 17:07:31 2014 +0800

    add missing header file for install~

 CMakeLists.txt | 1 +
 1 file changed, 1 insertion(+)

commit 119b72410b63ef0b1fe6d36853a1620258e18763
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 19 11:34:22 2014 -0700

    build: drop thin archives, not really necessary for now

 build/autotools/SetupLibtool.m4 | 9 ---------
 1 file changed, 9 deletions(-)

commit 382c7351d7beb0d0ac70aed628d01ca097b1bc30
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 19 10:42:53 2014 -0700

    build: bump libbson for build improvements.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a7558f73e4f3d78f008a51eebc704128b520aa8c
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 19 09:00:53 2014 -0700

    gridfs-file: plug leak with files_id.

 src/mongoc/mongoc-gridfs-file.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 83ca982c22798e2bf060a46e32fc871258437ddc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 17:00:33 2014 -0700

    libbson bump

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cfc1a04f8d2e6a6c875661b0d022612e644dcf23
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 16:56:06 2014 -0700

    build: fix some warnings.

 src/mongoc/mongoc-database.c    | 1 -
 src/mongoc/mongoc-gridfs-file.c | 1 -
 tests/test-mongoc-client.c      | 2 --
 3 files changed, 4 deletions(-)

commit 3864edf9587fad9fc382be824920a41446606a9f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 16:52:15 2014 -0700

    build: bump for libbson master

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a909d08a341a6ef0a665495b33fea3c23f833018
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 16:32:38 2014 -0700

    doc: add doc for mongoc_database_remove_all_users().

 doc/mongoc_database_add_user.txt         | 18 +++++++++++++++---
 doc/mongoc_database_remove_all_users.txt |  1 +
 doc/mongoc_symbols.txt                   |  1 +
 3 files changed, 17 insertions(+), 3 deletions(-)

commit 9aa32a96ca1bebce1850b5799890fa02cde3af45
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 16:29:30 2014 -0700

    client: add mongoc_database_remove_all_users().

 build/cmake/libmongoc-ssl.def |  1 +
 build/cmake/libmongoc.def     |  1 +
 src/libmongoc.symbols         |  1 +
 src/mongoc/mongoc-database.c  | 37 +++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-database.h  |  2 ++
 tests/test-mongoc-client.c    |  9 +++++++++
 6 files changed, 51 insertions(+)

commit a4cd117ae59a2a87a69401e7a618949cc44e3e0f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 15:32:15 2014 -0700

    gridfs-file: use boxed type for _id field.

 src/mongoc/mongoc-gridfs-file-private.h |  2 +-
 src/mongoc/mongoc-gridfs-file.c         | 54 ++++++++++++++++++++++++++++-----
 2 files changed, 48 insertions(+), 8 deletions(-)

commit 6203bb73209009e0dfea06d583cd0f60183688a6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 15:31:59 2014 -0700

    build: bump libbson for bson_append_value().

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b49e9045ae5131e42f0136abe81c39f44362ddb4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 18 15:03:12 2014 -0700

    build: bump libbson dependency in master.

 build/autotools/FindDependencies.m4 | 2 +-
 build/autotools/Versions.m4         | 2 +-
 src/libbson                         | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit e6038636bcee5264a264b54afce0b93c39884d97
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 15:53:52 2014 -0700

    cursor: make exhaust settings runtime failable.

 src/mongoc/mongoc-cursor.c | 43 ++++++++++++++++++++++++++++---------------
 1 file changed, 28 insertions(+), 15 deletions(-)

commit b4c8a88267289b002d7e6d4608aa6ba525f789ec
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 15:28:48 2014 -0700

    cursor: add more secondary safe commands.

 src/mongoc/mongoc-cursor.c | 5 +++++
 1 file changed, 5 insertions(+)

commit bba4d02c438bc3ef4d7aaccec596fd21e63b16f8
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 15:16:54 2014 -0700

    tests: ensure no redirection happened on command.

 tests/test-mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit b381da5ab8561489b64c9dc953dde4fa820cb310
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 15:16:05 2014 -0700

    cursor: redirect commands to primary if not secondary safe.
    
    This logs a message via MONGOC_WARNING() to the mongo-c-driver logging
    infrastructure.
    
    Fixes CDRIVER-244.

 src/mongoc/mongoc-cursor-private.h |  1 +
 src/mongoc/mongoc-cursor.c         | 72 +++++++++++++++++++++++++++++++++++---
 tests/test-mongoc-client.c         | 32 +++++++++++++++++
 3 files changed, 101 insertions(+), 4 deletions(-)

commit d05a37bc5246d8dff5b973c46e641d61c92dbc44
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 15:14:30 2014 -0700

    tests: allow supressing log messages in tests.

 tests/test-libmongoc.c | 14 ++++++++++++++
 tests/test-libmongoc.h |  1 +
 2 files changed, 15 insertions(+)

commit 02ac910dfa8fbd3276d785e41c0eb2816456e165
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 14:46:19 2014 -0700

    cursor: add note for bug fix.

 src/mongoc/mongoc-cursor.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit f56c0a12a96b8b517590ff15ec8916fec54ed4d9
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 14:44:59 2014 -0700

    client: whitespace.

 src/mongoc/mongoc-client.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 45e594464ec733394e0e5f68743af42a3e7ab25e
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 13:52:37 2014 -0700

    build: post release bump

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit a069c171c6156038dc7eda414272ff626273561d
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 17 13:49:43 2014 -0700

    build: release 0.92.2 with some build fixes for win32.

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 351ede457f5d047f4867e7e5fc5f99b9bbd4b875
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 14 13:03:09 2014 -0700

    build: should have bumped to 0.92.1, not 0.93.0.

 CMakeLists.txt              | 6 +++---
 build/autotools/Versions.m4 | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 0b5478d36969ee35804c16d8a725d78816edfbe2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 14 11:39:22 2014 -0700

    build: ensure BINARY_DIR is quoted in cmake.

 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c5a2c58266f0d0e5827d901470a52c6e14941e03
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Mar 14 11:32:43 2014 -0700

    build: ensure -DBINARY_DIR is set in cmake.

 CMakeLists.txt | 1 +
 1 file changed, 1 insertion(+)

commit 623d501c64987638053bb03413a845bfd7501e98
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 15:55:11 2014 -0700

    build: post-release bump.

 CMakeLists.txt              | 4 ++--
 build/autotools/Versions.m4 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 0163ed7a0824678d9449fcc7551a569f9e2136a6
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 15:52:06 2014 -0700

    build: bump for 0.92.0!

 CMakeLists.txt              |  4 ++--
 NEWS                        | 41 +++++++++++++++++++++++++++++++++++++++++
 build/autotools/Versions.m4 |  4 ++--
 src/libbson                 |  2 +-
 4 files changed, 46 insertions(+), 5 deletions(-)

commit b9232d6c32785517ca9cd3cffe43df4034a41360
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 15:33:42 2014 -0700

    doc: update readme for OpenSSL support.

 README.rst | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit b8306e9a93ce4620bdb0c03853e83fe34add2104
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 15:28:21 2014 -0700

    doc: update README for windows build.

 README.rst | 37 ++++++++++++++++++++++++++++++++-----
 1 file changed, 32 insertions(+), 5 deletions(-)

commit ee4811d9e1cdb2321206e39975427ed49d56c349
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 15:04:25 2014 -0700

    tests: merge TestSuite.c from libbson

 tests/TestSuite.c | 26 ++++++++++++--------------
 1 file changed, 12 insertions(+), 14 deletions(-)

commit 95a91b3b6e32d48f275bb7b70f46f8c09a512dbf
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 15:03:02 2014 -0700

    build: add distclean files for trust_dir

 tests/Makefile.am | 46 +++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 45 insertions(+), 1 deletion(-)

commit 909ae9d7e54dce606494b7b80ca65e4ae63abf24
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 14:53:08 2014 -0700

    tests: update certificate path.

 tests/test-x509.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ca7c48fd32f7be4b037d86cd9862400baac6e237
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 14:48:34 2014 -0700

    tests: various distcheck work.

 tests/Makefile.am          | 23 +++++++++++++++--------
 tests/test-mongoc-buffer.c |  2 +-
 tests/test-mongoc-gridfs.c |  6 +++---
 tests/test-mongoc-rpc.c    |  2 +-
 tests/test-mongoc-stream.c |  4 ++--
 5 files changed, 22 insertions(+), 15 deletions(-)

commit e8e09b66525d8b0b03bf7b5b57103929dc1a93b3
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 14:15:05 2014 -0700

    stream-socket: add type definition for stream socket for consistency.

 src/mongoc/mongoc-stream-socket.c | 4 ++--
 src/mongoc/mongoc-stream-socket.h | 3 +++
 2 files changed, 5 insertions(+), 2 deletions(-)

commit b9c668ac138c0cd589153ec0e9fda780c16c2421
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 14:14:18 2014 -0700

    doc: mongoc_stream_socket docs

 doc/mongoc_stream_socket.txt     | 26 +++++++----------------
 doc/mongoc_stream_socket_new.txt | 45 +++++++++++++++++++++++++++++++++++++++-
 2 files changed, 51 insertions(+), 20 deletions(-)

commit 56a83bf145622e4084ad214dd925061747bd9dbe
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 14:09:02 2014 -0700

    doc: various doc cleanup for distcheck.

 doc/mongoc_stream.txt                   | 17 ++++++++--
 doc/mongoc_stream_file.txt              | 52 ++++++++++++-----------------
 doc/mongoc_stream_file_get_fd.txt       | 38 ++++++++++++++++++++-
 doc/mongoc_stream_file_new.txt          | 59 ++++++++++++++++++++++++++++++++-
 doc/mongoc_stream_file_new_for_path.txt |  2 +-
 5 files changed, 131 insertions(+), 37 deletions(-)

commit 2f475c54d659708af6fb9f04e888d5796a9ed278
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 14:04:22 2014 -0700

    stream-file: add mongoc_stream_file_t definition.

 doc/mongoc_api.txt              |  3 +++
 src/mongoc/mongoc-stream-file.c | 12 ++++++------
 src/mongoc/mongoc-stream-file.h | 13 ++++++++-----
 3 files changed, 17 insertions(+), 11 deletions(-)

commit 255ab9e03bab52ac86e8e0d51faca04745b402fe
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 13:33:13 2014 -0700

    doc: drop appendix from license.

 COPYING | 25 -------------------------
 1 file changed, 25 deletions(-)

commit ce91787939f7b687a02b8071c0ad7687461e40a9
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 13:32:14 2014 -0700

    doc: highlight some important words.

 CONTRIBUTING.md | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 5b0f845c0481f7fd56ca62dd17330fbdd0dce5f2
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 13:30:28 2014 -0700

    docs: use github c syntax.

 CONTRIBUTING.md | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 14e682b55af5ecb9784c520e477d5db44e4ad8e3
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 13:29:08 2014 -0700

    build: add CONTRIBUTING.md to EXTRA_DIST.

 Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit c13d70184a7c1517a887547f0a83c1258240bbf3
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 13:28:08 2014 -0700

    doc: add document to help new contributors.

 CONTRIBUTING.md | 112 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 112 insertions(+)

commit d5c955891237cadd8f3577ab21e3afaf56143a1e
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 13:01:11 2014 -0700

    snprintf: bson_snprintf() terminates always with \0.

 src/mongoc/mongoc-client.c     |  1 -
 src/mongoc/mongoc-cluster.c    |  2 --
 src/mongoc/mongoc-collection.c | 17 ++++++-----------
 src/mongoc/mongoc-counters.c   | 14 ++++++--------
 src/mongoc/mongoc-database.c   |  1 -
 src/mongoc/mongoc-read-prefs.c |  1 -
 src/mongoc/mongoc-uri.c        |  8 ++++----
 7 files changed, 16 insertions(+), 28 deletions(-)

commit b04fd6722cec92aa30288344f7cf5bfff03bd0a5
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 12:51:24 2014 -0700

    collection: followup api cleanup for mongoc_collection_get_last_error().
    
    This patches changes the semantics a bit of Maga's patch for
    mongoc_collection_get_last_error(). It uses the new bson_clear() macro
    to clear the value of collection->gle where appropriate. Previously,
    it was not setting the value to NULL after destroying.
    
    Additionally, we remove the concept of collection from the mongoc_client_t
    code and simply use an output parameter for the document. This may be useful
    for situations like gridfs or database if we want to directly communicate
    with the client layer.
    
    The return value from mongoc_collection_get_last_error() is now a const,
    and we rely on the caller to copy. This let's us avoid extra copies unless
    they are necessary by the caller.

 doc/mongoc_collection_get_last_error.txt | 12 ++++----
 src/mongoc/mongoc-client-private.h       |  3 +-
 src/mongoc/mongoc-client.c               | 34 +++++++++++++---------
 src/mongoc/mongoc-collection.c           | 49 +++++++++++++++++---------------
 src/mongoc/mongoc-collection.h           |  2 +-
 5 files changed, 55 insertions(+), 45 deletions(-)

commit 2f697cef551f6f813fce40819f61f8eef191d192
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 13 12:37:56 2014 -0700

    build: bump libbson for bson_clear().

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 084132e61e9fc79f55b516dad9e9dd5c36f49774
Author: Maga Napanga <maga-napanga@a2system.net>
Date:   Thu Mar 13 19:13:20 2014 +0100

    added support for accessing getLastError document.
    
    new: mongoc_collection_get_last_error().
    Documentation added.
    Related to: https://jira.mongodb.org/browse/CDRIVER-295

 build/cmake/libmongoc-ssl.def            |  1 +
 build/cmake/libmongoc.def                |  1 +
 doc/mongoc_collection_get_last_error.txt | 46 ++++++++++++++++++++++++
 doc/mongoc_symbols.txt                   |  1 +
 src/libmongoc.symbols                    |  1 +
 src/mongoc/mongoc-client-private.h       |  2 +-
 src/mongoc/mongoc-client.c               | 16 ++++++---
 src/mongoc/mongoc-collection-private.h   |  1 +
 src/mongoc/mongoc-collection.c           | 60 ++++++++++++++++++++++++++++++--
 src/mongoc/mongoc-collection.h           |  1 +
 10 files changed, 122 insertions(+), 8 deletions(-)

commit 0dafc6d54c5ee6ec24e286fb361377eee86a7990
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:45:09 2014 -0700

    doc: use section 3 for now.

 doc/mongoc_api.txt | 3 ---
 1 file changed, 3 deletions(-)

commit 3104b0b2c6fce06c1fe0d87e2b3b7bd107574fc2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:30:08 2014 -0700

    tests: plug a couple small leaks.

 tests/test-mongoc-cursor.c  | 2 ++
 tests/test-mongoc-matcher.c | 7 ++++---
 2 files changed, 6 insertions(+), 3 deletions(-)

commit f4e4148c19a64b8fef92cd346aff81dab113a102
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:29:02 2014 -0700

    cluster: ensure we release the command when we are done with it.

 src/mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 995d76adc20e7976b07657132f6bbe0262fb82ae
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:19:40 2014 -0700

    tests: run libbson tests on distcheck

 tests/Makefile.am | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 023e96576d37cf81d413055e6a4a3a0625691b0e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:19:29 2014 -0700

    bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9b22a0de7b1132331660c51f7e55880c8734d63c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:13:17 2014 -0700

    tests: run tests on distcheck.

 tests/Makefile.am | 12 +++++++-----
 tests/abicheck.sh |  2 +-
 2 files changed, 8 insertions(+), 6 deletions(-)

commit 1410c429b56d156430c452fad00e06098c8e4fb8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 17:13:01 2014 -0700

    build: bump libbson for distcheck fixes

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9c31c45bc5443983809a82b4355f67660a5a6472
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 16:45:01 2014 -0700

    tests: disable parallel tests for now.
    
    still a few things to shake down.

 tests/Makefile.am | 2 --
 1 file changed, 2 deletions(-)

commit 765d457e0bbcf4d80df78dfe4dd4b79076cd2534
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 16:44:33 2014 -0700

    tests: try to use the test database to save creating files.

 tests/test-libmongoc.c         | 10 +++++++
 tests/test-libmongoc.h         |  3 +-
 tests/test-mongoc-client.c     | 67 +++++++++++++++++++++++++++++++++---------
 tests/test-mongoc-collection.c | 37 ++++++++++++++++-------
 tests/test-mongoc-database.c   | 16 ++++------
 tests/test-mongoc-gridfs.c     | 25 ++++++++++++++--
 6 files changed, 118 insertions(+), 40 deletions(-)

commit 2706e72657830fd6d5d46fcd742526e7699ff65a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 15:41:12 2014 -0700

    cursor: fix warning with -Wshadow on older RHEL

 src/mongoc/mongoc-cursor.c | 30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)

commit c4f9cff07bc0b56c75b43c6658940b23e13da664
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 15:39:47 2014 -0700

    docs: fix distcheck

 doc/mongoc_stream_file.txt   | 4 ++--
 doc/mongoc_stream_socket.txt | 2 +-
 doc/mongoc_symbols.txt       | 2 ++
 3 files changed, 5 insertions(+), 3 deletions(-)

commit a6011b97c73f26142be31b7d1e40a922451d310c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 15:32:09 2014 -0700

    doc: add some database docs.

 doc/mongoc_database.txt                | 13 ++++++++-----
 doc/mongoc_database_get_collection.txt | 33 +++++++++++++++++++++++++++++++++
 doc/mongoc_database_get_name.txt       | 31 +++++++++++++++++++++++++++++++
 3 files changed, 72 insertions(+), 5 deletions(-)

commit d26b2a17b7d09a07fe7f3518867df36200eceaa7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 15:23:49 2014 -0700

    whitespace cleanup.

 src/mongoc/mongoc-array-private.h            |  20 +---
 src/mongoc/mongoc-client-pool.h              |  23 ++--
 src/mongoc/mongoc-client-private.h           |  66 ++++-------
 src/mongoc/mongoc-client.h                   | 122 ++++++++------------
 src/mongoc/mongoc-cluster-private.h          | 107 ++++++------------
 src/mongoc/mongoc-collection-private.h       |  14 +--
 src/mongoc/mongoc-collection.h               | 162 +++++++++++++--------------
 src/mongoc/mongoc-counters-private.h         |  10 +-
 src/mongoc/mongoc-cursor-array-private.h     |   4 +-
 src/mongoc/mongoc-cursor-cursorid-private.h  |   4 +-
 src/mongoc/mongoc-cursor-private.h           | 116 ++++++++-----------
 src/mongoc/mongoc-cursor.h                   |  36 ++----
 src/mongoc/mongoc-database-private.h         |  15 +--
 src/mongoc/mongoc-database.h                 |   8 +-
 src/mongoc/mongoc-error.h                    |   2 +-
 src/mongoc/mongoc-flags.h                    |   3 +-
 src/mongoc/mongoc-gridfs-file-list-private.h |  13 +--
 src/mongoc/mongoc-gridfs-file-list.h         |  17 ++-
 src/mongoc/mongoc-gridfs-file-page-private.h |  59 +++-------
 src/mongoc/mongoc-gridfs-file-page.h         |  10 +-
 src/mongoc/mongoc-gridfs-file-private.h      |  59 +++++-----
 src/mongoc/mongoc-gridfs-file.h              |  73 +++++-------
 src/mongoc/mongoc-gridfs-private.h           |  12 +-
 src/mongoc/mongoc-gridfs.h                   |  70 +++++-------
 src/mongoc/mongoc-host-list-private.h        |   5 +-
 src/mongoc/mongoc-host-list.h                |  20 ++--
 src/mongoc/mongoc-index.h                    |  23 ++--
 src/mongoc/mongoc-init.h                     |   9 +-
 src/mongoc/mongoc-list-private.h             |  35 ++----
 src/mongoc/mongoc-log.h                      |   4 +-
 src/mongoc/mongoc-matcher-private.h          |   1 +
 src/mongoc/mongoc-matcher.h                  |   7 +-
 src/mongoc/mongoc-opcode.h                   |   2 +-
 src/mongoc/mongoc-queue-private.h            |  28 ++---
 src/mongoc/mongoc-read-prefs-private.h       |   6 +-
 src/mongoc/mongoc-read-prefs.h               |   9 +-
 src/mongoc/mongoc-rpc-private.h              |  44 ++------
 src/mongoc/mongoc-sasl-private.h             |  61 ++++------
 src/mongoc/mongoc-ssl-private.h              |  31 ++---
 src/mongoc/mongoc-ssl.h                      |  15 ++-
 src/mongoc/mongoc-stream-buffered.h          |   2 +-
 src/mongoc/mongoc-stream-gridfs.h            |   5 +-
 src/mongoc/mongoc-stream-tls.h               |  19 ++--
 src/mongoc/mongoc-thread-private.h           | 103 ++++++++---------
 src/mongoc/mongoc-trace.h                    |  11 +-
 src/mongoc/mongoc-uri.h                      |  34 +++---
 src/mongoc/mongoc-util-private.h             |   4 +-
 src/mongoc/mongoc-write-concern-private.h    |  23 ++--
 src/mongoc/mongoc-write-concern.h            |  22 ++--
 49 files changed, 613 insertions(+), 935 deletions(-)

commit 915702f97f8e866c63c6394e28d83d9395927ba8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 14:20:10 2014 -0700

    tests: specify test args without quotes.

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6432076ff9523b627510f9fa268ece44675aa51b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 14:08:47 2014 -0700

    tests: dont run parallel tests on solaris based host.

 build/autotools/SetupAutomake.m4 | 1 +
 tests/Makefile.am                | 6 +++++-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit e030cd92c2584c828c2fb20baa95bd0e9796bcc8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 14:05:06 2014 -0700

    tests: exit failure after 60 seconds.

 tests/TestSuite.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 10dc153affdd053fe2b2ebecd6d39d734e0012e5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:58:46 2014 -0700

    tests: run tests in parallel.

 tests/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eaaf4b0006f29f9e5376cd54484fc51cc7fa3bf5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:58:17 2014 -0700

    tests: compartmentalize tests and allow parallelization.

 tests/test-libmongoc.c         |  11 +++-
 tests/test-libmongoc.h         |   3 +-
 tests/test-mongoc-collection.c | 122 +++++++++++++++++++++++++++++++++++++----
 tests/test-mongoc-gridfs.c     |  23 ++++++--
 4 files changed, 139 insertions(+), 20 deletions(-)

commit 1e5b4ef513360ffbfd135cddf2904cd8c5b44326
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:48:32 2014 -0700

    database: add mongoc_database_get_name() and mongoc_database_get_collection()

 build/cmake/libmongoc-ssl.def |  2 ++
 build/cmake/libmongoc.def     |  2 ++
 src/libmongoc.symbols         |  2 ++
 src/mongoc/mongoc-database.c  | 21 +++++++++++++++++++++
 src/mongoc/mongoc-database.h  |  3 +++
 5 files changed, 30 insertions(+)

commit 5558641b4cfda803dbd9d719bfa28550205af5ae
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:15:15 2014 -0700

    tests: drop compartmentalized database after test completes.

 tests/test-mongoc-database.c | 3 +++
 1 file changed, 3 insertions(+)

commit 038e932462afac9b3bc19b24d2f5e51afa39a7e4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:14:20 2014 -0700

    tests: drop collection when we have finished with it.

 tests/test-mongoc-client.c | 3 +++
 1 file changed, 3 insertions(+)

commit 87a25874fea2f38bf26ba8de8731229756d2aed5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:13:25 2014 -0700

    tests: compartmentalize tests for exhaust cursor.

 tests/test-mongoc-client.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit b6f4d6ef65ecb7df983565c5a130e61339b75cbd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 13:04:51 2014 -0700

    build: fix auto|system|bundled libbson check.

 build/autotools/Libbson.m4                  | 21 ++++++++++++++++-----
 build/autotools/ReadCommandLineArguments.m4 |  7 ++-----
 2 files changed, 18 insertions(+), 10 deletions(-)

commit 53771e5e1a60bcb1eab6adb6fae62ce8b2e4137d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 12:17:04 2014 -0700

    build: move LICENSE->COPYING for consistency with libbson

 CMakeLists.txt |   2 +-
 COPYING        | 202 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 LICENSE        | 202 ---------------------------------------------------------
 autogen.sh     |   4 --
 4 files changed, 203 insertions(+), 207 deletions(-)

commit 126daa2516ad630815e88bae76bfc35012bc623b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 12:16:31 2014 -0700

    build: bump libbson.

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 58b516dda9becb42417c263c3ae332881652ad4d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 12 12:15:42 2014 -0700

    build: check for libtoolize and remove libtool.m4 from tree.

 autogen.sh                    |    7 +
 build/autotools/m4/.gitignore |    1 +
 build/autotools/m4/libtool.m4 | 7992 -----------------------------------------
 3 files changed, 8 insertions(+), 7992 deletions(-)

commit d8ec7d004fab650ce01bc408d9efa53cf909bf27
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 02:33:55 2014 -0700

    doc: use 7 not 3

 doc/mongoc_stream_file.txt   | 4 ++--
 doc/mongoc_stream_socket.txt | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 28f6a14191abdf39ba64ced7a0aa684cae68bf18
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 02:31:00 2014 -0700

    doc: more documentation work.

 doc/mongoc_socket.txt             | 53 +++++++---------------------------
 doc/mongoc_socket_accept.txt      |  2 +-
 doc/mongoc_socket_bind.txt        | 35 ++++++++++++++++++++++-
 doc/mongoc_socket_close.txt       |  2 +-
 doc/mongoc_socket_connect.txt     |  2 +-
 doc/mongoc_socket_destroy.txt     |  2 +-
 doc/mongoc_socket_errno.txt       |  2 +-
 doc/mongoc_socket_getsockname.txt | 36 ++++++++++++++++++++++-
 doc/mongoc_socket_listen.txt      |  2 +-
 doc/mongoc_socket_new.txt         | 60 ++++++++++++++++++++++++++++++++++++++-
 doc/mongoc_socket_recv.txt        |  2 +-
 doc/mongoc_socket_send.txt        |  2 +-
 doc/mongoc_socket_sendv.txt       |  2 +-
 doc/mongoc_socket_setsockopt.txt  |  2 +-
 doc/mongoc_symbols.txt            | 23 +++++++++++++--
 15 files changed, 170 insertions(+), 57 deletions(-)

commit 78bef7284c6d2366da4dfea64c3bf14a9fc11f5a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:45:51 2014 -0700

    doc: update api.

 doc/mongoc_api.txt | 3 +++
 1 file changed, 3 insertions(+)

commit 5213af643e42f878a523d290af043a7745006216
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:41:22 2014 -0700

    various doc work.

 doc/mongoc_api                          |  3 ++
 doc/mongoc_socket.txt                   | 68 +++++++++++++++++++++++++++++++++
 doc/mongoc_socket_accept.txt            |  2 +-
 doc/mongoc_socket_bind.txt              |  2 +-
 doc/mongoc_socket_close.txt             |  2 +-
 doc/mongoc_socket_connect.txt           |  2 +-
 doc/mongoc_socket_destroy.txt           |  2 +-
 doc/mongoc_socket_errno.txt             |  2 +-
 doc/mongoc_socket_getsockname.txt       |  2 +-
 doc/mongoc_socket_listen.txt            |  2 +-
 doc/mongoc_socket_new.txt               |  2 +-
 doc/mongoc_socket_recv.txt              |  2 +-
 doc/mongoc_socket_send.txt              |  2 +-
 doc/mongoc_socket_sendv.txt             |  2 +-
 doc/mongoc_socket_setsockopt.txt        |  2 +-
 doc/mongoc_socket_t.txt                 | 68 ---------------------------------
 doc/mongoc_stream_file.txt              | 57 +++++++++++++++++++++++++++
 doc/mongoc_stream_file_get_fd.txt       |  2 +-
 doc/mongoc_stream_file_new.txt          |  2 +-
 doc/mongoc_stream_file_new_for_path.txt |  2 +-
 doc/mongoc_stream_file_t.txt            | 57 ---------------------------
 doc/mongoc_stream_socket.txt            | 45 ++++++++++++++++++++++
 doc/mongoc_stream_socket_new.txt        |  2 +-
 doc/mongoc_stream_socket_t.txt          | 45 ----------------------
 24 files changed, 190 insertions(+), 187 deletions(-)

commit 5544d8d86f99b789bb5397d9bf198ad44d507f42
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:34:20 2014 -0700

    doc: add stream socket doc.

 doc/mongoc_stream_socket_new.txt |  1 +
 doc/mongoc_stream_socket_t.txt   | 45 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 46 insertions(+)

commit cf461288546ce8fb55440e84e8156fdcb111f8a2
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:31:00 2014 -0700

    doc: more doc work

 doc/mongoc_stream_file_get_fd.txt       |  1 +
 doc/mongoc_stream_file_new.txt          |  1 +
 doc/mongoc_stream_file_new_for_path.txt |  1 +
 doc/mongoc_stream_file_t.txt            | 57 +++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-stream-file.h         |  2 +-
 5 files changed, 61 insertions(+), 1 deletion(-)

commit 57337f0433e8d45a556d8251f4e868fbb4dd85fb
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:21:35 2014 -0700

    doc: start on socket docs

 doc/mongoc_socket_accept.txt      |  1 +
 doc/mongoc_socket_bind.txt        |  1 +
 doc/mongoc_socket_close.txt       |  1 +
 doc/mongoc_socket_connect.txt     |  1 +
 doc/mongoc_socket_destroy.txt     |  1 +
 doc/mongoc_socket_errno.txt       |  1 +
 doc/mongoc_socket_getsockname.txt |  1 +
 doc/mongoc_socket_listen.txt      |  1 +
 doc/mongoc_socket_new.txt         |  1 +
 doc/mongoc_socket_recv.txt        |  1 +
 doc/mongoc_socket_send.txt        |  1 +
 doc/mongoc_socket_sendv.txt       |  1 +
 doc/mongoc_socket_setsockopt.txt  |  1 +
 doc/mongoc_socket_t.txt           | 68 +++++++++++++++++++++++++++++++++++++++
 14 files changed, 81 insertions(+)

commit d8fe34b7806085b501fcccec449f3426195a6398
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:07:53 2014 -0700

    doc: add mongoc_log_default_handler.

 doc/mongoc_log_default_handler.txt | 1 +
 doc/mongoc_log_set_handler.txt     | 9 +++++++--
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 6b6be282829c4d1ee14c746349333338b510de62
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 01:02:24 2014 -0700

    build: add binary files to extra dist for tests.

 tests/Makefile.am | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 9fe3bb517bf7c0d3eb4538acd26447255a7762de
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 00:50:12 2014 -0700

    docs: add docs for gridfs.

 doc/mongoc_gridfs_get_chunks.txt | 38 ++++++++++++++++++++++++++++++++++++++
 doc/mongoc_gridfs_get_files.txt  | 38 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 76 insertions(+)

commit 28743f98427771508ba42f8d7a8d6f8f04edec24
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 00:49:09 2014 -0700

    gridfs: change struct name.

 src/mongoc/mongoc-gridfs.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 02f66d553afc378df4c120c6d9e11489bbec7d91
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 12 00:09:32 2014 -0700

    bring in license fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dbe3b2f4e6ddb38183f2b87ea51a3db6e928b5b6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 19:30:43 2014 -0700

    doc: add mongoc_cleanup documentation.

 doc/mongoc_cleanup.txt |  1 +
 doc/mongoc_init.txt    | 14 ++++++++++----
 2 files changed, 11 insertions(+), 4 deletions(-)

commit e9b1948744d06668d19951b6a4e62d5dac4e1482
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 19:18:27 2014 -0700

    build: require libbson 0.6.2

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 510964bf3756b6becada47a6716d253ff8ccaa1f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 19:07:32 2014 -0700

    build: bump and require Libbson 0.6.2.

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 7cb99d467a3aa02e9faa492d2b7a32a4129fe427
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 18:51:43 2014 -0700

    build: include CMake in extra dist.

 Makefile.am             | 5 +++++
 build/cmake/Makefile.am | 4 ++++
 2 files changed, 9 insertions(+)

commit c37e9dc5d68cf3e5ece15bf7fabb31439cb25085
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 10:06:19 2014 -0700

    mock-server: better logging.

 tests/mock-server.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit a621ef58390b16bc0a5a17d1b2e718541c77293f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 10:06:00 2014 -0700

    socket: check for EMSGSIZE when using vectored send.
    
    Also, use WSASend() on win32 to unify some of the code path.
    Win32 needs testing.

 src/mongoc/mongoc-socket.c | 60 ++++++++++++++++++++++++++++++----------------
 1 file changed, 40 insertions(+), 20 deletions(-)

commit b1f7b591685b3916ea3d57dcecb313a7b415605c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 10:03:09 2014 -0700

    socket: store errno on win32 for later use.

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a4180ed2e885fd6b5f724811dbff08604c8074c7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 08:49:17 2014 -0700

    trace: add TRACE(msg,...) helper.

 src/mongoc/mongoc-cluster.c | 2 ++
 src/mongoc/mongoc-trace.h   | 3 +++
 2 files changed, 5 insertions(+)

commit 157bcd8535002544fa8450ac019aca1b803ced0d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 16:34:42 2014 -0700

    win32: fix typo on WSACleanup.

 src/mongoc/mongoc-init.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da29d3d53322e3a286d803709aa68355073f928a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 16:12:18 2014 -0700

    build: add new symbols to ABI.

 build/cmake/libmongoc-ssl.def | 3 +++
 build/cmake/libmongoc.def     | 3 +++
 src/libmongoc.symbols         | 3 +++
 3 files changed, 9 insertions(+)

commit 2475c20fdcefbd7206f1e829a82de3dacd579a34
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 16:08:49 2014 -0700

    gridfs: add accessor for files and chunks.
    
    Fixes CDRIVER-292.

 src/mongoc/mongoc-gridfs.c | 19 ++++++++++++++++++-
 src/mongoc/mongoc-gridfs.h | 11 +++++++++++
 2 files changed, 29 insertions(+), 1 deletion(-)

commit 794fe978ccbdd9d6db06d717373fbd9d1787548d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 16:03:22 2014 -0700

    tests: log message if > MESSAGE level.

 tests/test-libmongoc.c | 3 +++
 1 file changed, 3 insertions(+)

commit 8e3e85be73dfd5d4cdc57e26755c66d254ade6ce
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 16:03:10 2014 -0700

    log: make default logger function accessable via pointer.

 src/mongoc/mongoc-log.c | 9 +--------
 src/mongoc/mongoc-log.h | 7 +++++++
 2 files changed, 8 insertions(+), 8 deletions(-)

commit 61df49bae950588ad9651006ba0a02f8fc8f3cb2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 15:59:08 2014 -0700

    examples: fix -Wshadow warning.

 examples/find-and-modify.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit e30726aa7992eee434fa699e8f49917cb1e3105c
Merge: 3d74d71 9d53914
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Mar 11 15:57:23 2014 -0700

    Merge pull request #16 from hanumantmk/CDRIVER-294
    
    CDRIVER-294 make mongoc-ssl thread safe

commit 9d5391488801541276d6d747b91614fe8826d9e2
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Tue Mar 11 17:24:33 2014 -0400

    CDRIVER-294 make mongoc-ssl thread safe
    
    Use
    * CRYPTO_set_locking_callback
    * CRYPTO_set_id_callback
    
    to make mongoc-ssl thread safe (openssl needs locking and thread id
    primitives appropriate to your platform, we provide pthreads and win32).
    
    hooks startup into mongoc_init and cleanup into mongoc_cleanup

 src/libmongoc.symbols           |  1 +
 src/mongoc/mongoc-init.c        | 26 ++++++++++++++
 src/mongoc/mongoc-init.h        |  3 ++
 src/mongoc/mongoc-ssl-private.h |  3 ++
 src/mongoc/mongoc-ssl.c         | 78 +++++++++++++++++++++++++++++++++++++++++
 tests/echo-server.c             |  2 ++
 tests/test-libmongoc.c          |  2 ++
 tests/test-load.c               |  2 ++
 tests/test-replica-set-ssl.c    |  2 ++
 tests/test-replica-set.c        |  2 ++
 tests/test-sharded-cluster.c    |  2 ++
 11 files changed, 123 insertions(+)

commit d7be59454b379c58244765fd56aa84a1e4e13cd3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 12:18:08 2014 -0700

    win32: fix build on VS 2010 Win64.

 tests/ha-test.c              |  6 +++---
 tests/ssl-test.c             | 11 ++++++-----
 tests/test-mongoc-matcher.c  |  3 ++-
 tests/test-replica-set-ssl.c |  6 +++---
 4 files changed, 14 insertions(+), 12 deletions(-)

commit 3d74d7105b23fe4fcec8acef2a3fba1bb35e6823
Author: Super-User <root@solaris.(none)>
Date:   Tue Mar 11 07:36:31 2014 -0700

    tests: better logging.

 tests/test-mongoc-client.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 38da998668d6d4edfdf2ef8de6ab99fa60d05b5d
Author: Super-User <root@solaris.(none)>
Date:   Tue Mar 11 07:36:17 2014 -0700

    mock-server: better logging.

 tests/mock-server.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 4277f410eee289a5ee4dc1ee325c768b72ae41b2
Author: Super-User <root@solaris.(none)>
Date:   Tue Mar 11 07:36:05 2014 -0700

    socket: ensure errno is cleared before socket call

 src/mongoc/mongoc-socket.c | 2 ++
 1 file changed, 2 insertions(+)

commit 4d910dcbdee6a84c567a0ae1443931a858160960
Author: Super-User <root@solaris.(none)>
Date:   Tue Mar 11 07:35:46 2014 -0700

    buffer: set error message on failure.

 src/mongoc/mongoc-buffer.c | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit 9837073be78afd3b96ff83ca9a99a7cee7637f98
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 14:28:13 2014 -0700

    Revert "socket: set SO_LINGER."
    
    This reverts commit 8e2029eaf558e0d4d116fb53d4a83a2f13799146.
    
    Looks like this breaks a few things. Yay for automated tests.

 src/mongoc/mongoc-socket.c | 16 +++-------------
 1 file changed, 3 insertions(+), 13 deletions(-)

commit 8e2029eaf558e0d4d116fb53d4a83a2f13799146
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 14:18:29 2014 -0700

    socket: set SO_LINGER.

 src/mongoc/mongoc-socket.c | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

commit 379fc07beac9df66999df576cab51ab6cccc1139
Author: Super-User <root@solaris.(none)>
Date:   Tue Mar 11 05:37:08 2014 -0700

    mock-server: block using mutex/cond for startup.

 tests/mock-server.c | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

commit 90220a384011614e577c7712984f52f06fe87822
Author: Super-User <root@solaris.(none)>
Date:   Tue Mar 11 05:36:46 2014 -0700

    build: handle some weirdness in __sun systems.

 src/mongoc/mongoc-errno-private.h | 5 ++++-
 src/mongoc/mongoc-socket.c        | 2 +-
 2 files changed, 5 insertions(+), 2 deletions(-)

commit e3b9c3b886ccb752f472f6690377565c4f5680bf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 01:17:13 2014 -0700

    stream-file: handle end of stream a bit more gracefully.

 src/mongoc/mongoc-stream-file.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 8dfe875459e6129f0e4ce2cdd24a1aaed78367ec
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 00:53:05 2014 -0700

    tests: add assertion.

 tests/test-mongoc-gridfs.c | 1 +
 1 file changed, 1 insertion(+)

commit 3be03269ca8ca1efebeed3c4abd67b3b95cd2e22
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 00:52:55 2014 -0700

    tests: getenv_s() returns 0 on win32.

 tests/test-libmongoc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 403c89cec6e2bc5ac62405522b5b260c8919c6aa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 00:52:37 2014 -0700

    gridfs: plumb through timeout

 src/mongoc/mongoc-gridfs.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 9c4fd9521ceaa5c35e75c05b67c86a0d6f29c959
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 00:22:44 2014 -0700

    build: add echo-server to cmake tests.

 CMakeLists.txt | 2 ++
 1 file changed, 2 insertions(+)

commit 5b654dbddfa18454883f82cf92aa5d277da2bee0
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 23:02:12 2014 -0700

    stream-file: ensure we account for the last read in return value.

 src/mongoc/mongoc-stream-file.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d1c17b29acc2811e0e358b2ac164c8394a9f066b
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 23:01:48 2014 -0700

    win32: various win32 build fixes.

 tests/ssl-test.c               | 6 +++---
 tests/test-mongoc-stream-tls.c | 2 ++
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 736c303395944bbbf3917fcb94bc7fb29cdbe130
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 11 00:00:21 2014 -0700

    stream-file: use requested flags, along with _O_BINARY on win32

 src/mongoc/mongoc-stream-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8af1fc0076db426cbdd3b87ece16a1f8cfc37521
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 23:53:45 2014 -0700

    uri: explicitely set AF_INET6 when appending host.

 src/mongoc/mongoc-uri.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit e9d2332e9f52930d9dde5643976c54c25f298472
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 23:53:17 2014 -0700

    socket: remove use of goto in connect loop.

 src/mongoc/mongoc-socket.c | 18 +++++++-----------
 1 file changed, 7 insertions(+), 11 deletions(-)

commit ca219b26c3cbc23ed5643a9b1f83cd9fec6a8daf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 23:52:38 2014 -0700

    dump: check for failure to open file.

 examples/mongoc-dump.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 780730ba018847e99f942d9d322ebe83c6ef000b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 22:13:59 2014 -0700

    examples: call mongoc_init()

 examples/mongoc-dump.c | 2 ++
 1 file changed, 2 insertions(+)

commit 5ecfb7e53cb7f0498f0f1d7253d201cc4f24e927
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 21:59:40 2014 -0700

    win32: more win32 build fixes.

 build/cmake/libmongoc-ssl.def | 2 ++
 build/cmake/libmongoc.def     | 2 ++
 tests/mock-server.c           | 7 ++++++-
 3 files changed, 10 insertions(+), 1 deletion(-)

commit 17407b158c9fa92a19b496ba98a5d6adb3be8773
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 18:40:11 2014 -0700

    win32: one more ETIMEDOUT -> WSAETIMEDOUT.

 src/mongoc/mongoc-stream-tls.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 4521b80086fa20e5e833cee290e8904a83a6a95e
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 18:39:18 2014 -0700

    win32: more WSAETIMEDOUT on win32.

 src/mongoc/mongoc-socket.c     | 4 ++++
 src/mongoc/mongoc-stream-tls.c | 8 ++++++++
 tests/ssl-test.c               | 4 ++++
 3 files changed, 16 insertions(+)

commit 4fa97a45f17153b99e06e989f2cb4d8454f27a68
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 18:36:02 2014 -0700

    socket: use macros for determining if we need to EAGAIN.

 src/mongoc/mongoc-socket.c        | 2 +-
 src/mongoc/mongoc-stream-socket.c | 2 ++
 src/mongoc/mongoc-stream-tls.c    | 5 +++--
 3 files changed, 6 insertions(+), 3 deletions(-)

commit e700c8de12ef7cb204588c2b82dc2db51c495b34
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 18:30:42 2014 -0700

    socket: capture errno after system calls.

 build/cmake/libmongoc-ssl.def |   1 +
 build/cmake/libmongoc.def     |   1 +
 src/libmongoc.symbols         |   1 +
 src/mongoc/mongoc-socket.c    | 134 +++++++++++++++++++++++++++++++++++++-----
 src/mongoc/mongoc-socket.h    |   1 +
 5 files changed, 124 insertions(+), 14 deletions(-)

commit ea66eb680591c5a454982cd13be73983c96448e3
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 18:08:46 2014 -0700

    build: add errno helper.

 src/mongoc/Makefile.am            |  1 +
 src/mongoc/mongoc-errno-private.h | 43 +++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-socket.c        |  9 ++++----
 3 files changed, 49 insertions(+), 4 deletions(-)

commit 5b3b453c8b9b790afb11bf3ea62f025f42236564
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 16:33:04 2014 -0700

    stream: handle end of stream.

 src/mongoc/mongoc-stream-socket.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit eb610231fc7fba73631552ac63526fdc2d70d6f1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 17:25:21 2014 -0700

    ssl: use _stricmp on win32.

 src/mongoc/mongoc-ssl.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 38247d9454abb6d573bff7726bb50ad6430b7256
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 17:25:11 2014 -0700

    socket: fix sign comparisons

 src/mongoc/mongoc-stream-socket.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit e4e94a1ce554be8d6ea966af87037d726114f239
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 17:24:53 2014 -0700

    tls: whitespace

 src/mongoc/mongoc-stream-tls.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5cdc5ba6d44aeeb64dcb99a13a916ce713b7801f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 17:24:40 2014 -0700

    rpc: make sign comparisons of same type.

 src/mongoc/mongoc-rpc.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit a4600f19ce5cb3df565a972aadee24fd3a66fee8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 17:24:05 2014 -0700

    cmake: fix symbol name.

 build/cmake/libmongoc-ssl.def | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8d38b74b139ff0a40af515026c951b3bbdf06105
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 16:05:38 2014 -0700

    win32: various win32 warnings and fixups

 src/mongoc/mongoc-stream-file.c | 15 +++++++++++++--
 src/mongoc/mongoc-uri.c         |  7 ++++++-
 2 files changed, 19 insertions(+), 3 deletions(-)

commit 9ec41e179095d7d52c9710029d5f99e29a00000b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 15:40:29 2014 -0700

    win32: various msvc build and warning fixes.

 examples/mongoc-dump.c          | 30 ++++++++++++++++++++++++++----
 src/mongoc/mongoc-cluster.c     |  6 +++++-
 src/mongoc/mongoc-gridfs-file.c |  4 ++--
 src/mongoc/mongoc-socket.c      |  4 ++--
 src/mongoc/mongoc-stream-tls.c  |  4 ++--
 src/mongoc/mongoc-stream-tls.h  |  2 +-
 6 files changed, 38 insertions(+), 12 deletions(-)

commit 653d8604b3fcc3e80da136967268e2561bdda220
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 15:39:51 2014 -0700

    cmake: add missing file.

 CMakeLists.txt | 2 ++
 1 file changed, 2 insertions(+)

commit 6e2ada06e0975de6f4e8fc56a96a102c68774474
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 15:20:06 2014 -0700

    win32: various win32 build cleanup.

 CMakeLists.txt                | 13 ++++---------
 build/cmake/libmongoc-ssl.def | 23 +++++++++++++++++++----
 build/cmake/libmongoc.def     |  2 --
 3 files changed, 23 insertions(+), 15 deletions(-)

commit aba8690b84a6755a2867d380245f2a54d7122691
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 10 13:17:30 2014 -0700

    libbson: bump bundled version for win32 fixups.

 build/autotools/Versions.m4 | 2 +-
 src/libbson                 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 8e583315d7d7da5e0e4dc18b9c456be2329066e7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 10 13:48:03 2014 -0700

    build: bump libbson for win32 warnings

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9a077ecead25216077716c5b74e5b74927f6f1ab
Author: Christian Hergert <christian@hergert.me>
Date:   Sat Mar 8 18:31:23 2014 -0800

    stream-file: add some tracing macros.

 src/mongoc/mongoc-stream-file.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 407928ccb91e4940e7fb022daed23193d48cd46c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 21:56:06 2014 -0800

    socket: include netinet/in.h

 src/mongoc/mongoc-socket.h | 1 +
 1 file changed, 1 insertion(+)

commit 7dcea8a55c1355b5ca0d59a1de9580f828a2f808
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 20:21:19 2014 -0800

    socket: add win32 variant of vectored write.
    
    WSASendMsg() can only be used with OverlapedIO sockets. Which we are not
    using. Therefore, just use send() and emulate the behavior.

 src/mongoc/mongoc-socket.c | 80 +++++++++++++++++++++++++++++++++++-----------
 1 file changed, 61 insertions(+), 19 deletions(-)

commit 232ae746468868b1dbd6b104e05b89a8573ee0b4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 19:58:20 2014 -0800

    socket: check for failure before setting errno.

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8b34939849b49acab952f041a88a6c956a0c6b77
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 18:27:33 2014 -0800

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9b8fbdd2a5683fd75ab61afcaf77d390d7e2390c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 18:27:23 2014 -0800

    socket: POLLERR|POLLHUP not allowed in WSAPoll().

 src/mongoc/mongoc-socket.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 6754a24b095cb53c778fef6802db2df255be8bbf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:56:27 2014 -0800

    socket: synthesize errno EWOULDBLOCK for callers.

 src/mongoc/mongoc-socket.c | 3 +++
 1 file changed, 3 insertions(+)

commit 4f37c385b6c3844fc354a304c6172ee2056f1230
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:50:16 2014 -0800

    socket: fix ifdef

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 76da8d2e56c59cfa8b0e68a4390ffd5c92d067be
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:46:26 2014 -0800

    socket: only do nodelay in one place.

 src/mongoc/mongoc-client.c |  8 --------
 src/mongoc/mongoc-socket.c | 14 +++++++++++++-
 2 files changed, 13 insertions(+), 9 deletions(-)

commit b6794e5e6b5f9dfb0ae8f6ad1c7c1c871a492142
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:34:46 2014 -0800

    socket: connect returns WSAEWOULDBLOCK.

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d2084b1b72990ada9d6298e85c43aed9e5ffd308
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:34:33 2014 -0800

    socket: plumb expiration through

 src/mongoc/mongoc-client.c | 12 +++++++++---
 src/mongoc/mongoc-socket.c |  6 +++++-
 2 files changed, 14 insertions(+), 4 deletions(-)

commit fe36b25f953acfd59345c55b2532808990d9709b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:33:46 2014 -0800

    bson: bump for clock fix.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 24ea0aabda81249e6f0cc0893c8218d2e60713bd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 17:33:37 2014 -0800

    ping: add copyright.

 examples/mongoc-ping.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 027645633d611975eeb4e78ec3f3f874b341f279
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 16:37:26 2014 -0800

    socket: get socket recv working with timeouts.

 src/mongoc/mongoc-socket.c          | 6 +++++-
 src/mongoc/mongoc-stream-buffered.c | 4 ++++
 src/mongoc/mongoc-stream-socket.c   | 4 ++++
 src/mongoc/mongoc-stream.c          | 5 ++++-
 4 files changed, 17 insertions(+), 2 deletions(-)

commit 0cf0a366e822e38a44cde711e35dc9a6746b9550
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 16:22:25 2014 -0800

    stream: more tracing.

 src/mongoc/mongoc-stream-buffered.c | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 29254b706c35204eda20eb6383cb509617e937fb
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 16:20:09 2014 -0800

    tracing and cleanup.

 src/mongoc/mongoc-buffer-private.h |  2 +-
 src/mongoc/mongoc-buffer.c         | 69 +++++++++++++++++++++-----------------
 src/mongoc/mongoc-cluster.c        | 12 ++++---
 src/mongoc/mongoc-socket.c         |  2 +-
 tests/mock-server.c                | 27 +++++++--------
 5 files changed, 61 insertions(+), 51 deletions(-)

commit 1dae39f263d367bfcfbc078a7e96c99453165eb3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 15:38:52 2014 -0800

    socket: tracing/cleanup.

 src/mongoc/mongoc-stream-socket.c | 14 +++++++-------
 src/mongoc/mongoc-stream.c        | 10 +++-------
 tests/echo-server.c               |  5 ++++-
 3 files changed, 14 insertions(+), 15 deletions(-)

commit 518bf0e20e6001a143e857340a5a120463f6420f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 15:38:20 2014 -0800

    socket: add missing trace macro

 src/mongoc/mongoc-socket.c | 2 ++
 1 file changed, 2 insertions(+)

commit 0b49928a1e2249e5502ee33dc6c8a351aa729114
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 15:14:12 2014 -0800

    tests: add echo-server for testing sockets

 .gitignore          |  1 +
 tests/Makefile.am   |  6 ++++
 tests/echo-server.c | 81 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 88 insertions(+)

commit f0714740d43b530ed11dfaaa77341e27a828b828
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 15:13:42 2014 -0800

    socket: resiliency work

 src/mongoc/mongoc-socket.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 76b77b53a94d781d22a97a4c374733f832ab4d65
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 15:13:30 2014 -0800

    socket: return the proper socket during accept!

 src/mongoc/mongoc-socket.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4d636a1c552c922942f8d56a7b2eeb8bf4dd5fe7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 14:26:41 2014 -0800

    socket: enable tcp nodelay in socket layer.

 src/mongoc/mongoc-socket.c | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit fcfe0b68b0b3b96baa1b8d4b2aab764dbb2d7898
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 14:14:20 2014 -0800

    stream: plumb through absolute expiration times for socket ops.

 src/mongoc/mongoc-stream-socket.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

commit 07b65c5cae260c6d48f1e379148f75fc5a22d643
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 14:07:59 2014 -0800

    socket: use absolute expiration times for operations.

 src/mongoc/mongoc-socket.c | 121 +++++++++++++++++++++++++--------------------
 src/mongoc/mongoc-socket.h |  10 ++--
 2 files changed, 72 insertions(+), 59 deletions(-)

commit bc8c84b66774a0a99800aa2471b185e635931aae
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 13:55:10 2014 -0800

    whitespace

 tests/ssl-test.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9cd9ce1903b33cd1020e87f8a1dba6779cafb0e0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 13:55:03 2014 -0800

    stream: add some tracing.

 src/mongoc/mongoc-stream.c | 38 ++++++++++++++++++++++++++++++++++----
 1 file changed, 34 insertions(+), 4 deletions(-)

commit b439044ec76d81217519d48de9efeb5ceed1561f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 13:54:32 2014 -0800

    socket: dump recv buffer

 src/mongoc/mongoc-socket.c | 2 ++
 1 file changed, 2 insertions(+)

commit d4e186ebd309602b8635164c840138e295a8dc7b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 13:54:25 2014 -0800

    socket: fix return values for connect.

 src/mongoc/mongoc-socket.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 956ae38f40e3d21ec24e193c6e78ca28af8a35a2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 13:34:12 2014 -0800

    log: add process/task id to logs.

 src/mongoc/mongoc-log.c | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

commit 449f10c319e489b1acac1b0caa1fd83aa3679a10
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 11:57:30 2014 -0800

    build: update symbols for cmake

 build/cmake/libmongoc.def | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit a81f640958bc6e8ce1e03227eb73b38e8e318c42
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Mar 6 11:55:05 2014 -0800

    build: add symbols.

 src/libmongoc.symbols | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 02722a482722946bbd1086ec88a88d995da40307
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 03:21:26 2014 -0800

    socket: wait for POLLIN on server socket during accept.

 src/mongoc/mongoc-socket.c | 2 +-
 tests/ssl-test.c           | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b95478b620fc08bcc70a4340da414e5b516da58d
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 03:12:29 2014 -0800

    socket: more porting to new socket code.
    
    still some fallout. need to get ssl tests in place.

 doc/mongoc_gridfs_file_readv.txt     |  4 +--
 doc/mongoc_host_list_from_string.txt |  1 -
 doc/mongoc_stream_readv.txt          |  4 +--
 doc/mongoc_stream_writev.txt         |  4 +--
 src/mongoc/mongoc-client.c           |  4 +++
 src/mongoc/mongoc-socket.c           | 11 +++++++
 src/mongoc/mongoc-socket.h           |  6 ++++
 src/mongoc/mongoc-ssl.c              |  2 +-
 src/mongoc/mongoc-stream-tls.c       | 10 +++---
 src/mongoc/mongoc-uri.c              |  1 +
 tests/TestSuite.c                    |  2 +-
 tests/ssl-test.c                     | 61 ++++++++++++++++++++----------------
 12 files changed, 69 insertions(+), 41 deletions(-)

commit c664fccc6deadb1b2c57454015220a0c1d8218e8
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 02:43:26 2014 -0800

    tests: implement file helpers, just used for tests.

 src/mongoc/mongoc-stream-file.c | 46 +++++++++++++++++++++++++++++++++++++++--
 1 file changed, 44 insertions(+), 2 deletions(-)

commit 1a28f16368eef8d027d37ef2d545309f83a23b5c
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 02:32:50 2014 -0800

    tests: more portability fixes.

 tests/TestSuite.c          | 13 ++++++++++---
 tests/test-mongoc-rpc.c    | 31 ++++++++++++++++++++-----------
 tests/test-mongoc-stream.c | 20 ++++++--------------
 3 files changed, 36 insertions(+), 28 deletions(-)

commit fd58b65d23c8e445c0cb7faf5b4d31a0b1a41c33
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 02:26:05 2014 -0800

    tests: more api tracking.

 tests/mongoc-tests.h         | 10 ++++++++++
 tests/test-mongoc-buffer.c   |  8 ++------
 tests/test-mongoc-database.c |  4 +++-
 tests/test-mongoc-gridfs.c   | 45 +++++++++++++++++++++++---------------------
 4 files changed, 39 insertions(+), 28 deletions(-)

commit a1c9e021cc2798c8cc8039bb0482e9f6d9dab004
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 02:08:33 2014 -0800

    tests: update mock server to new api.

 tests/mock-server.c | 52 +++++++++++++++++++++++++++-------------------------
 1 file changed, 27 insertions(+), 25 deletions(-)

commit d9c455c9fde09984cedc42a47228b474b5828460
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 01:49:43 2014 -0800

    build: start porting examples to new api.

 examples/filter-bsondump.c      | 24 ++++++++---------
 examples/mongoc-rpc-validate.c  | 59 ++++++++++++++++++++++++-----------------
 src/mongoc/mongoc-stream-file.c |  9 +++++++
 src/mongoc/mongoc-stream-file.h |  9 ++++---
 4 files changed, 59 insertions(+), 42 deletions(-)

commit d2f6afa03c7d136e04fdafcc3711dadb799251b1
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 01:28:22 2014 -0800

    stream-file: add mongoc_stream_file_t

 examples/example-gridfs.c       |   9 +--
 examples/mongoc-dump.c          |  14 ++--
 src/mongoc/Makefile.am          |   2 +
 src/mongoc/mongoc-stream-file.c | 148 ++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-stream-file.h |  42 ++++++++++++
 src/mongoc/mongoc.h             |   1 +
 tests/mock-server.c             |   1 -
 7 files changed, 200 insertions(+), 17 deletions(-)

commit 12c1d11deac571c1acf0b444441e795692538d14
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 01:07:41 2014 -0800

    socket: remove compat layers that are not necessary now.

 examples/example-gridfs.c               |   5 +-
 src/mongoc/Makefile.am                  |  16 -
 src/mongoc/mongoc-buffer.c              |   4 +-
 src/mongoc/mongoc-client-pool.c         |   1 -
 src/mongoc/mongoc-client.c              |   1 -
 src/mongoc/mongoc-cluster.c             |  12 +-
 src/mongoc/mongoc-collection.c          |  12 +-
 src/mongoc/mongoc-compat-socket-unix.c  |  37 ---
 src/mongoc/mongoc-compat-socket-unix.h  |  82 -----
 src/mongoc/mongoc-compat-socket-win32.c | 536 ------------------------------
 src/mongoc/mongoc-compat-socket-win32.h | 169 ----------
 src/mongoc/mongoc-compat-unix.c         |  31 --
 src/mongoc/mongoc-compat-win32.c        |  43 ---
 src/mongoc/mongoc-compat.h              |  60 ----
 src/mongoc/mongoc-gridfs-file.c         |  11 +-
 src/mongoc/mongoc-gridfs-file.h         |  10 +-
 src/mongoc/mongoc-gridfs.c              |   5 +-
 src/mongoc/mongoc-init.c                |  25 +-
 src/mongoc/mongoc-iovec.h               |   4 +-
 src/mongoc/mongoc-log.c                 |   1 -
 src/mongoc/mongoc-matcher-op-private.h  |   1 -
 src/mongoc/mongoc-rpc-private.h         |   6 +-
 src/mongoc/mongoc-rpc.c                 |   3 +-
 src/mongoc/mongoc-socket.c              |   5 +-
 src/mongoc/mongoc-socket.h              |   4 +-
 src/mongoc/mongoc-stream-buffered.c     |   8 +-
 src/mongoc/mongoc-stream-gridfs.c       |   6 +-
 src/mongoc/mongoc-stream-private.h      |   7 +-
 src/mongoc/mongoc-stream-socket.c       |   2 +-
 src/mongoc/mongoc-stream-unix.c         | 569 --------------------------------
 src/mongoc/mongoc-stream-unix.h         |  42 ---
 src/mongoc/mongoc-stream.c              |  12 +-
 src/mongoc/mongoc-stream.h              |   1 +
 src/mongoc/mongoc-thread-private.h      |   3 +-
 src/mongoc/mongoc-uri.c                 |   1 -
 src/mongoc/mongoc.h                     |   2 +-
 36 files changed, 88 insertions(+), 1649 deletions(-)

commit 2094e2a4946d00a900cec3c82dac464cef83ba9f
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 00:15:18 2014 -0800

    build: update symbols for windows.

 build/cmake/libmongoc.def | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 9f59ffb5b6a69617247ffd0fadc4d4f19b6a1177
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 00:13:02 2014 -0800

    trace: update printf macros

 src/mongoc/mongoc-trace.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5312c66c4cbb397ff783f85c47dde619337a18bf
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Mar 6 00:12:53 2014 -0800

    socket: get socket stream abstraction working.

 src/libmongoc.symbols             |  12 +++++
 src/mongoc/Makefile.am            |   1 +
 src/mongoc/mongoc-client.c        |   8 +--
 src/mongoc/mongoc-iovec.h         |  46 ++++++++++++++++
 src/mongoc/mongoc-socket.c        |  41 +++++++--------
 src/mongoc/mongoc-socket.h        |  15 ++----
 src/mongoc/mongoc-stream-socket.c | 107 ++++++++++++++++++++++++++++++++++----
 src/mongoc/mongoc-stream.c        |  12 ++---
 src/mongoc/mongoc-stream.h        |  54 +++++++++----------
 9 files changed, 214 insertions(+), 82 deletions(-)

commit 720ffbb5f86c6e94ade7c60781ce19ac4ecfa207
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 5 22:27:46 2014 -0800

    build: add tracing option.

 build/autotools/Optimizations.m4            | 14 ++++++--------
 build/autotools/ReadCommandLineArguments.m4 |  6 ++++++
 2 files changed, 12 insertions(+), 8 deletions(-)

commit 770b278875eb911d8762c83605324ea806f440b2
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Mar 5 20:44:05 2014 -0800

    counters: remove debug code.

 src/mongoc/mongoc-counters-private.h | 1 -
 1 file changed, 1 deletion(-)

commit c60a9a949dce6a682f644bbf0fe921d50453a118
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 18:27:44 2014 -0800

    stream: various stream socket work.

 src/mongoc/Makefile.am            |   1 +
 src/mongoc/mongoc-stream-socket.c | 129 ++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-stream.h        |   6 +-
 3 files changed, 133 insertions(+), 3 deletions(-)

commit 0f87b3844fae618443826ada6987b501524bb043
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 18:11:45 2014 -0800

    socket: various socket work.

 src/mongoc/Makefile.am               |   1 +
 src/mongoc/mongoc-client.c           | 199 +++++++++++++++--------------------
 src/mongoc/mongoc-counters-private.h |   9 +-
 src/mongoc/mongoc-socket.c           |  65 +++++++-----
 src/mongoc/mongoc-socket.h           |  11 +-
 src/mongoc/mongoc-stream-socket.h    |  40 +++++++
 6 files changed, 176 insertions(+), 149 deletions(-)

commit 55d3b39555560fef7864e3b8b5de5c480a6fb832
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 18:11:29 2014 -0800

    build: bump libbson

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 200438f668f625178eec17637c731c9ae41dd631
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 16:15:59 2014 -0800

    socket: add portable socket abstraction.

 src/mongoc/Makefile.am     |   2 +
 src/mongoc/mongoc-socket.c | 767 +++++++++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-socket.h |  97 ++++++
 src/mongoc/mongoc.h        |   1 +
 4 files changed, 867 insertions(+)

commit bb305646309b1f0947f5149270c3c799ea8dd813
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 16:47:50 2014 -0800

    build: fix underterminated preprocessor statement.

 build/autotools/CheckCompiler.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 102e3acd50ca0ebef75301e304b1c3224666d1fe
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 15:28:50 2014 -0800

    thread: rename mongoc-thread.h to mongoc-thread-private.h.
    
    Ensure it is not installed as well.

 src/mongoc/Makefile.am             |  2 +-
 src/mongoc/mongoc-client-pool.c    |  2 +-
 src/mongoc/mongoc-client.c         |  2 +-
 src/mongoc/mongoc-cluster.c        |  2 +-
 src/mongoc/mongoc-init.c           |  2 +-
 src/mongoc/mongoc-log.c            |  2 +-
 src/mongoc/mongoc-thread-private.h | 91 ++++++++++++++++++++++++++++++++++++++
 src/mongoc/mongoc-thread.h         | 88 ------------------------------------
 tests/ha-test.h                    |  2 +-
 tests/mock-server.c                |  2 +-
 tests/ssl-test.c                   |  2 +-
 11 files changed, 100 insertions(+), 97 deletions(-)

commit 668fdd751331d0769dcaeaff2a74777081ed379f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 15:25:07 2014 -0800

    build: remove extra _GNU_SOURCE.

 src/mongoc/mongoc-stream-buffered.c | 2 --
 1 file changed, 2 deletions(-)

commit 4074dfa291777439476480e7b59c754200e5008c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 15:24:22 2014 -0800

    build: -D_GNU_SOURCE.

 CMakeLists.txt                       | 3 +++
 src/Makefile.am                      | 2 ++
 src/mongoc/mongoc-client.c           | 2 --
 src/mongoc/mongoc-cluster.c          | 1 -
 src/mongoc/mongoc-counters-private.h | 1 -
 src/mongoc/mongoc-counters.c         | 1 -
 src/mongoc/mongoc-cursor-array.c     | 2 --
 src/mongoc/mongoc-cursor-cursorid.c  | 2 --
 src/mongoc/mongoc-cursor.c           | 2 --
 src/mongoc/mongoc-stream-gridfs.c    | 2 --
 src/mongoc/mongoc-stream-tls.c       | 1 -
 src/mongoc/mongoc-stream-unix.c      | 2 --
 src/mongoc/mongoc-stream.c           | 2 --
 tests/mock-server.c                  | 2 --
 14 files changed, 5 insertions(+), 20 deletions(-)

commit d360b830533841a815e7d9bc199fc668b73308fc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 15:21:55 2014 -0800

    thread: cleanup private thread includes.

 src/mongoc/mongoc-client-pool.c   |  1 +
 src/mongoc/mongoc-client.c        |  1 +
 src/mongoc/mongoc-cluster.c       |  3 +-
 src/mongoc/mongoc-compat-thread.h | 86 ---------------------------------------
 src/mongoc/mongoc-compat.h        |  2 -
 src/mongoc/mongoc-init.c          |  9 ++--
 src/mongoc/mongoc-log.c           |  1 +
 tests/ha-test.h                   |  1 +
 tests/mock-server.c               |  1 +
 tests/ssl-test.c                  |  2 +
 10 files changed, 13 insertions(+), 94 deletions(-)

commit cf27c9d3a1f4e859bf69c9e1664dd6e8a2551b43
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 14:17:02 2014 -0800

    build: bump libbson for clang check.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 13f8f9cd890b96ed03579868f87aa049573786e4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 14:16:07 2014 -0800

    build: properly check for clang >= 3.3.

 build/autotools/CheckCompiler.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1abc45e44667c6f781ad9502efb58b6dd831e4f3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 00:17:55 2014 -0800

    build: bump required libbson version.

 build/autotools/Versions.m4 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4da9219fce39587979690ba7f96004837a4e4793
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Mar 5 00:15:31 2014 -0800

    build: bump libbson to 0.6.0.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 31fab2227bb0fc90f89daecbf31701f317162b34
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 17:43:11 2014 -0800

    tests: allow disabling tests that listen()/accept().

 tests/test-mongoc-client.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit ed6209a5c7b88d3e89e18f5f67c838ac5e8d5a92
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 14:00:51 2014 -0800

    build: various cmake/win32 build work.

 .gitignore                    |   5 +
 CMakeLists.txt                | 267 ++++++++++++++++++++++++++++++++++++++++++
 build/cmake/FindBSON.cmake    |  91 ++++++++++++++
 build/cmake/libmongoc-ssl.def | 146 +++++++++++++++++++++++
 build/cmake/libmongoc.def     | 143 ++++++++++++++++++++++
 build/win32/CMakeLists.txt    | 264 -----------------------------------------
 build/win32/FindBSON.cmake    |  91 --------------
 build/win32/libmongoc-ssl.def | 146 -----------------------
 build/win32/libmongoc.def     | 143 ----------------------
 9 files changed, 652 insertions(+), 644 deletions(-)

commit 77d52defc07aa70bb49e990d55d2fa448ac9753a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 13:26:29 2014 -0800

    build: link against shlwapi on win32.

 tests/Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 6c2fb3e4b49ce6765e20063ec71758d7d70cf45d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 13:23:07 2014 -0800

    tests: copy TestSuite from libbson.

 tests/TestSuite.c | 31 +++++++++++++------------------
 tests/TestSuite.h |  2 +-
 2 files changed, 14 insertions(+), 19 deletions(-)

commit a0dd8abbb8c654c462b31cf1fac2646501dcca23
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 13:22:49 2014 -0800

    various mingw build fixes.

 src/mongoc/mongoc-client.c |  1 +
 src/mongoc/mongoc-compat.h | 36 ++++++++++++++++++++++++++----------
 2 files changed, 27 insertions(+), 10 deletions(-)

commit 4a0a649df8a3f4b2fd1e5c42d600e2cd4eee6da7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 13:22:35 2014 -0800

    bson: bump libbson for _WIN32_WINNT

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f88acad76b0dff0ef5b308066220c70eeba2c6e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 12:53:04 2014 -0800

    bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cb9f8cc86f0c02a293de85f804834d6e17a545fc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 12:26:20 2014 -0800

    build: add --enable-sasl=auto/yes/no and --enable-ssl=auto/yes/no

 build/autotools/FindDependencies.m4         | 33 +++++++++++++++--------------
 build/autotools/ReadCommandLineArguments.m4 | 18 +++++++++++++++-
 build/autotools/Versions.m4                 |  2 ++
 3 files changed, 36 insertions(+), 17 deletions(-)

commit 5172c55d86c947fb7d93cb7880000b4c92bba489
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 12:08:03 2014 -0800

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6e9013f1f3e3ac1b65fcea1f1b7d0e34c06f3d2a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 12:03:43 2014 -0800

    libbson: bump submodule version.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 921b5353ee3ae679b12719655b703eb705985782
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 01:10:20 2014 -0800

    build: dont rely on AM_CPPFLAGS.

 Makefile.am          | 8 --------
 examples/Makefile.am | 2 +-
 src/Makefile.am      | 2 --
 3 files changed, 1 insertion(+), 11 deletions(-)

commit 7e47d3e859bf9ffd51b3644cbbe4514f23d7e587
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Mar 4 01:03:52 2014 -0800

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7960a9b09820d14d79653237de043826da0df44a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 23:54:06 2014 -0800

    build: @MONGOC_API_VERSION@

 src/mongoc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d1da80d1dd5c2ba8b15a35d52155d3ce3b914c93
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:52:10 2014 -0800

    build: update documentation status in configure.

 build/autotools/PrintBuildConfiguration.m4 | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 936d528023310e6d6563014e7192bc65fea81e6f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:33:17 2014 -0800

    readme: update subtitle.

 README.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8bc414c8a7ad8a237f089f0465e6754acdb91493
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:27:38 2014 -0800

    readme: use su on freebsd.

 README.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7c9b4f72a66f25b09fa4d3223ebf6e6b956e6da2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:25:02 2014 -0800

    readme: update naming of driver.

 README.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 19c298afef56d62d1287431655c3d0cc1445c366
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:19:35 2014 -0800

    readme: update title.

 README.rst | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7d5b7f6dd6dbd6b1db2eeb3d05ba1d9963f87b64
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:17:04 2014 -0800

    readme: more readme updates.

 README.rst | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 4841753cb07920bf90a9800b8e41918f88b64b55
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:04:27 2014 -0800

    ignore COPYING.

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 52cd732ab199e453ff5e849dab7cbd4bc1af2362
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 21:04:05 2014 -0800

    readme: fix subdir.

 README.rst | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 108b61d7e4af66d5743d09197e163ca4672978f0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 20:57:28 2014 -0800

    build: update README.rst.

 README.rst | 17 +++++------------
 1 file changed, 5 insertions(+), 12 deletions(-)

commit a0a90a5c3abc61a5fc5d332d6e279232b603b53a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 20:54:52 2014 -0800

    build: move COPYING to LICENSE.

 COPYING | 202 ----------------------------------------------------------------
 LICENSE | 202 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 202 insertions(+), 202 deletions(-)

commit 2c40d98527d5c8f955c27d91d4c11ca8f3404471
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 19:11:47 2014 -0800

    build: ensure mongoc-trace.h is included for distcheck.

 src/mongoc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 77dce5fd0aa0b64592a09dfab0304756e2699be1
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 19:07:29 2014 -0800

    build: define cflags/libs for libbson in makefile.am

 Makefile.am                | 4 ++++
 build/autotools/Libbson.m4 | 4 +---
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 983239fb79ded59ac475f0c558c8110f84c98899
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 18:52:23 2014 -0800

    build: distcheck progress.

 doc/mongoc_database_add_user.txt    |  7 ++++++-
 doc/mongoc_database_remove_user.txt |  1 +
 src/mongoc/Makefile.am              | 28 ++++++++++++++++++++++++++++
 3 files changed, 35 insertions(+), 1 deletion(-)

commit 61e89a405622ad8424cb0dfe5811c5f4d91990d4
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 18:19:26 2014 -0800

    build: bump libbson include.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 01aa6911ae449172aada689dda45742370fae7b2
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 18:13:18 2014 -0800

    build: build with embedded libbson works! (on F20)

 Makefile.am                      |  5 -----
 build/autotools/Optimizations.m4 | 13 ++++++++++---
 examples/Makefile.am             | 25 ++++++++++++++++++-------
 tests/Makefile.am                | 21 +++++++++++++++------
 tests/abicheck.sh                |  2 +-
 tests/ha-test.c                  |  4 +++-
 tests/mongoc-tests.h             | 10 ++++++++++
 tests/test-mongoc-matcher.c      |  2 ++
 tests/test-mongoc-stream.c       |  2 ++
 tests/test-replica-set.c         |  3 ++-
 tests/test-sharded-cluster.c     |  3 ++-
 11 files changed, 65 insertions(+), 25 deletions(-)

commit 3efb6d56159470d0bfb53f55cbe42280c754ac22
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Mar 3 17:48:26 2014 -0800

    build: target specific CPPFLAGS replace use of AM_CPPFLAGS.

 src/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit adac89affba4d0a1e36f84a8fef1a1b1b349fbfb
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 15:36:52 2014 -0800

    build: fix mongoc path.

 src/mongoc/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f76f73eceab31d59bcc02f24a6ad92d288d69724
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 15:32:40 2014 -0800

    build: printf not needed for header.

 src/mongoc/mongoc-rpc.c | 1 -
 1 file changed, 1 deletion(-)

commit 40c64a360967a336bb3038d64812e0923df0de67
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 15:31:59 2014 -0800

    build: more bundled progress.

 Makefile.am                 |   3 +
 build/autotools/Libbson.m4  |   2 +-
 src/mongoc/Makefile.include | 170 --------------------------------------------
 src/mongoc/mongoc-rpc.c     |  13 ++--
 4 files changed, 13 insertions(+), 175 deletions(-)

commit 6d1df73eea646c536bd26056f6f1cd7d38a3fba3
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 15:19:55 2014 -0800

    build: just use AC_SUBST, no need to define -D preprocessor.

 build/autotools/Libbson.m4 | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit be409a1d6607787d78c66c4cc20f4af685ac77b1
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 15:11:18 2014 -0800

    build: define BSON_LIBS and BSON_CFLAGS with bundled libbson.

 Makefile.am                | 10 +---------
 build/autotools/Libbson.m4 |  6 +++++-
 2 files changed, 6 insertions(+), 10 deletions(-)

commit a130a940a6ece953021e016f219e1a014a694b4a
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 15:10:56 2014 -0800

    build: prefix mongoc sources with src/

 src/mongoc/Makefile.am | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 617a0450b5b054ef88969222905401235626d04e
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 14:59:25 2014 -0800

    build: SUBDIRS into libbson if needed.

 Makefile.am | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit f10942bd690c146a3f647cf794ae1764811b5320
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 14:49:10 2014 -0800

    build: remove old style include for libbson.

 src/Makefile.am | 5 -----
 1 file changed, 5 deletions(-)

commit 039033a93de24666225c203933e3d04a728f346d
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 14:47:08 2014 -0800

    build: bump libbson.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4dfaf6e5bddd4b620db217f7803c2160c73bbd1c
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 13:30:57 2014 -0800

    build: bump libbson from master.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1a07bad37b0772ccc32fa098f43b04014bf7b80b
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 13:29:47 2014 -0800

    build: fix some invalid uses of top_builddir/top_srcdir

 .gitignore        |  1 +
 tests/Makefile.am | 40 ++++++++++++++++++----------------------
 2 files changed, 19 insertions(+), 22 deletions(-)

commit 3223ac796f71c03f84ddbf46ed4e974abcbe27d2
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 13:23:58 2014 -0800

    build: wip on libbson submodule building.

 autogen.sh                  |  5 +++-
 build/autotools/Libbson.m4  | 62 ++++++++++-----------------------------------
 build/autotools/Versions.m4 |  2 ++
 configure.ac                |  3 ++-
 4 files changed, 22 insertions(+), 50 deletions(-)

commit 61df71c0b8191cca13b36facedf374cd37d22199
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Mar 3 13:13:47 2014 -0800

    build: call libbson autogen.sh during mongo-c-driver autogen.sh.

 autogen.sh | 1 +
 1 file changed, 1 insertion(+)

commit ef03430f2c943ae4922c99613c1de9da681af558
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Mar 2 18:06:47 2014 -0800

    build: work in progress on libbson submodule.

 build/autotools/Libbson.m4                  | 79 +++++++++++++++++------------
 build/autotools/MaintainerFlags.m4          | 45 ++++++++--------
 build/autotools/Python.m4                   |  4 +-
 build/autotools/ReadCommandLineArguments.m4 | 27 +++++-----
 build/autotools/SetupAutomake.m4            |  5 +-
 configure.ac                                |  5 +-
 src/Makefile.am                             |  5 ++
 7 files changed, 93 insertions(+), 77 deletions(-)

commit ba1d6697d3d6866bf65fef7ebce42d6b08d2c08a
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Mar 2 18:01:46 2014 -0800

    libbson: bump

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eec40589507afabf3f98c422babcc8cd25ef2f6a
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Mar 2 17:57:21 2014 -0800

    libbson: bump submodule libbson version.

 src/libbson | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 54ee13af39d0d2ed2b419492653c2271fe0c4b09
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Mar 2 16:53:26 2014 -0800

    build: init submodule from autogen.sh.

 autogen.sh | 5 +++++
 1 file changed, 5 insertions(+)

commit a25d702560b35a2dc34f70269bb80830fc854afa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Mar 1 18:10:12 2014 -0800

    build: more build work.

 Makefile.am                                |   3 +-
 build/autotools/CheckProgs.m4              |   2 +-
 build/autotools/FindDependencies.m4        |   2 +-
 build/autotools/Libbson.m4                 |   4 +-
 build/autotools/PrintBuildConfiguration.m4 |   2 +-
 configure.ac                               |   1 -
 doc/Makefile.am                            |   2 +-
 src/libmongoc-1.0.pc.in                    |  11 +++
 src/libmongoc-ssl-1.0.pc.in                |  11 +++
 src/libmongoc.symbols                      | 151 +++++++++++++++++++++++++++++
 src/mongoc/libmongoc-1.0.pc.in             |  11 ---
 src/mongoc/libmongoc-ssl-1.0.pc.in         |  11 ---
 src/mongoc/libmongoc.symbols               | 151 -----------------------------
 tests/Makefile.am                          | 117 ++++++++++++++++++++++
 tests/Makefile.include                     | 117 ----------------------
 15 files changed, 298 insertions(+), 298 deletions(-)

commit e87ae5dadb510a5517603f772f87a6e3936a92a8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Mar 1 17:44:24 2014 -0800

    build: more autotools progress.

 build/autotools/CheckHeaders.m4              |   7 -
 build/autotools/CheckProgs.m4                |   7 +-
 build/autotools/FindDependencies.m4          |  20 +++
 build/autotools/Libbson.m4                   |  35 +++++
 build/autotools/MaintainerFlags.m4           |  26 ++++
 build/autotools/Optimizations.m4             |   9 ++
 build/autotools/PrintBuildConfiguration.m4   |  11 +-
 build/autotools/ReadCommandLineArguments.m4  |  14 ++
 build/autotools/m4/bson_check_doc_build.m4   |  44 ------
 build/autotools/m4/mongoc_check_doc_build.m4 |  44 ++++++
 configure.ac                                 | 197 +--------------------------
 11 files changed, 163 insertions(+), 251 deletions(-)

commit b4ab9ac9dc5709ab76ef5970fa2664176395f043
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Mar 1 17:17:55 2014 -0800

    build: add libbson submodule.

 .gitignore  | 3 +++
 .gitmodules | 3 +++
 autogen.sh  | 2 +-
 src/libbson | 1 +
 4 files changed, 8 insertions(+), 1 deletion(-)

commit f2c89c2f518535a0804d9651378f21ee109ae6ea
Author: Christian Hergert <christian@hergert.me>
Date:   Sat Mar 1 16:55:45 2014 -0800

    build: progress towards bundled libbson for fallback.

 AUTHORS                                            |    2 -
 ChangeLog                                          |    5 -
 Makefile.am                                        |   54 +-
 README                                             |    1 -
 README.rst                                         |   41 +
 TODO.md                                            |   78 -
 acinclude.m4                                       |   44 -
 autogen.sh                                         |   35 +-
 bindings/python/Makefile.include                   |   28 -
 bindings/python/pymongoc-client-pool.c             |  196 -
 bindings/python/pymongoc-client-pool.h             |   50 -
 bindings/python/pymongoc-client.c                  |  142 -
 bindings/python/pymongoc-client.h                  |   52 -
 bindings/python/pymongoc-uri.c                     |  133 -
 bindings/python/pymongoc-uri.h                     |   47 -
 bindings/python/pymongoc.c                         |   55 -
 build/autotools/AutoHarden.m4                      |   67 +
 build/autotools/CheckCompiler.m4                   |   35 +
 build/autotools/CheckHeaders.m4                    |    7 +
 build/autotools/CheckHost.m4                       |   45 +
 build/autotools/CheckProgs.m4                      |   23 +
 build/autotools/CheckTarget.m4                     |   29 +
 build/autotools/FindDependencies.m4                |   31 +
 build/autotools/Optimizations.m4                   |   28 +
 build/autotools/PrintBuildConfiguration.m4         |   43 +
 build/autotools/Python.m4                          |   13 +
 build/autotools/ReadCommandLineArguments.m4        |   52 +
 build/autotools/SetupAutomake.m4                   |   26 +
 build/autotools/SetupLibtool.m4                    |   14 +
 build/autotools/Versions.m4                        |   13 +
 build/autotools/m4/.gitignore                      |    4 +
 build/autotools/m4/ac_check_typedef.m4             |   42 +
 build/autotools/m4/ac_compile_check_sizeof.m4      |   25 +
 build/autotools/m4/ac_create_stdint_h.m4           |  510 ++
 build/autotools/m4/as-compiler-flag.m4             |   62 +
 build/autotools/m4/ax_check_compile_flag.m4        |   72 +
 build/autotools/m4/ax_check_link_flag.m4           |   71 +
 build/autotools/m4/ax_pthread.m4                   |  317 +
 build/autotools/m4/ax_python.m4                    |   98 +
 build/autotools/m4/bson_check_doc_build.m4         |   44 +
 build/autotools/m4/libtool.m4                      | 7992 ++++++++++++++++++++
 build/autotools/m4/pkg.m4                          |  199 +
 build/autotools/m4/silent.m4                       |   46 +
 .../autotools/scripts/wrap-compiler-for-flag-check |   22 +
 configure.ac                                       |  179 +-
 doc/Makefile.am                                    |   74 +
 doc/Makefile.include                               |   74 -
 examples/Makefile.am                               |   33 +
 examples/Makefile.include                          |   50 -
 m4/.gitignore                                      |    5 -
 m4/as-compiler-flag.m4                             |   62 -
 m4/ax_python.m4                                    |   98 -
 m4/pkg.m4                                          |  199 -
 m4/silent.m4                                       |   46 -
 m4/stdint.m4                                       |   92 -
 mongoc/.gitignore                                  |    2 -
 mongoc/Makefile.include                            |  170 -
 mongoc/indent                                      |    3 -
 mongoc/libmongoc-1.0.pc.in                         |   11 -
 mongoc/libmongoc-ssl-1.0.pc.in                     |   11 -
 mongoc/libmongoc.symbols                           |  151 -
 mongoc/mongoc-array-private.h                      |   64 -
 mongoc/mongoc-array.c                              |   67 -
 mongoc/mongoc-buffer-private.h                     |   79 -
 mongoc/mongoc-buffer.c                             |  233 -
 mongoc/mongoc-client-pool.c                        |  178 -
 mongoc/mongoc-client-pool.h                        |   59 -
 mongoc/mongoc-client-private.h                     |  107 -
 mongoc/mongoc-client.c                             | 1262 ----
 mongoc/mongoc-client.h                             |  158 -
 mongoc/mongoc-cluster-private.h                    |  184 -
 mongoc/mongoc-cluster.c                            | 2723 -------
 mongoc/mongoc-collection-private.h                 |   58 -
 mongoc/mongoc-collection.c                         | 1258 ---
 mongoc/mongoc-collection.h                         |  129 -
 mongoc/mongoc-compat-socket-unix.c                 |   37 -
 mongoc/mongoc-compat-socket-unix.h                 |   82 -
 mongoc/mongoc-compat-socket-win32.c                |  536 --
 mongoc/mongoc-compat-socket-win32.h                |  169 -
 mongoc/mongoc-compat-thread.h                      |   86 -
 mongoc/mongoc-compat-unix.c                        |   31 -
 mongoc/mongoc-compat-win32.c                       |   43 -
 mongoc/mongoc-compat.h                             |   46 -
 mongoc/mongoc-config.h.in                          |   44 -
 mongoc/mongoc-counters-private.h                   |  172 -
 mongoc/mongoc-counters.c                           |  305 -
 mongoc/mongoc-counters.defs                        |   61 -
 mongoc/mongoc-cursor-array-private.h               |   38 -
 mongoc/mongoc-cursor-array.c                       |  169 -
 mongoc/mongoc-cursor-cursorid-private.h            |   38 -
 mongoc/mongoc-cursor-cursorid.c                    |  144 -
 mongoc/mongoc-cursor-private.h                     |  134 -
 mongoc/mongoc-cursor.c                             |  794 --
 mongoc/mongoc-cursor.h                             |   68 -
 mongoc/mongoc-database-private.h                   |   53 -
 mongoc/mongoc-database.c                           |  773 --
 mongoc/mongoc-database.h                           |   86 -
 mongoc/mongoc-error.h                              |   90 -
 mongoc/mongoc-flags.h                              |  137 -
 mongoc/mongoc-gridfs-file-list-private.h           |   49 -
 mongoc/mongoc-gridfs-file-list.c                   |   87 -
 mongoc/mongoc-gridfs-file-list.h                   |   50 -
 mongoc/mongoc-gridfs-file-page-private.h           |   86 -
 mongoc/mongoc-gridfs-file-page.c                   |  185 -
 mongoc/mongoc-gridfs-file-page.h                   |   39 -
 mongoc/mongoc-gridfs-file-private.h                |   77 -
 mongoc/mongoc-gridfs-file.c                        |  738 --
 mongoc/mongoc-gridfs-file.h                        |  108 -
 mongoc/mongoc-gridfs-private.h                     |   51 -
 mongoc/mongoc-gridfs.c                             |  280 -
 mongoc/mongoc-gridfs.h                             |   73 -
 mongoc/mongoc-host-list-private.h                  |   36 -
 mongoc/mongoc-host-list.h                          |   59 -
 mongoc/mongoc-index.c                              |   51 -
 mongoc/mongoc-index.h                              |   60 -
 mongoc/mongoc-init.c                               |   61 -
 mongoc/mongoc-init.h                               |   38 -
 mongoc/mongoc-list-private.h                       |   71 -
 mongoc/mongoc-list.c                               |  148 -
 mongoc/mongoc-log.c                                |  153 -
 mongoc/mongoc-log.h                                |  109 -
 mongoc/mongoc-matcher-op-private.h                 |  136 -
 mongoc/mongoc-matcher-op.c                         | 1127 ---
 mongoc/mongoc-matcher-private.h                    |   39 -
 mongoc/mongoc-matcher.c                            |  407 -
 mongoc/mongoc-matcher.h                            |   41 -
 mongoc/mongoc-opcode.h                             |   49 -
 mongoc/mongoc-queue-private.h                      |   77 -
 mongoc/mongoc-queue.c                              |  109 -
 mongoc/mongoc-read-prefs-private.h                 |   47 -
 mongoc/mongoc-read-prefs.c                         |  311 -
 mongoc/mongoc-read-prefs.h                         |   64 -
 mongoc/mongoc-rpc-private.h                        |  124 -
 mongoc/mongoc-rpc.c                                |  700 --
 mongoc/mongoc-sasl-private.h                       |   95 -
 mongoc/mongoc-sasl.c                               |  339 -
 mongoc/mongoc-ssl-private.h                        |   57 -
 mongoc/mongoc-ssl.c                                |  456 --
 mongoc/mongoc-ssl.h                                |   51 -
 mongoc/mongoc-stream-buffered.c                    |  331 -
 mongoc/mongoc-stream-buffered.h                    |   42 -
 mongoc/mongoc-stream-gridfs.c                      |  167 -
 mongoc/mongoc-stream-gridfs.h                      |   43 -
 mongoc/mongoc-stream-private.h                     |   56 -
 mongoc/mongoc-stream-tls.c                         |  781 --
 mongoc/mongoc-stream-tls.h                         |   50 -
 mongoc/mongoc-stream-unix.c                        |  571 --
 mongoc/mongoc-stream-unix.h                        |   42 -
 mongoc/mongoc-stream.c                             |  236 -
 mongoc/mongoc-stream.h                             |   65 -
 mongoc/mongoc-thread.h                             |   88 -
 mongoc/mongoc-trace.h                              |  140 -
 mongoc/mongoc-uri.c                                |  763 --
 mongoc/mongoc-uri.h                                |   59 -
 mongoc/mongoc-util-private.h                       |   36 -
 mongoc/mongoc-util.c                               |   41 -
 mongoc/mongoc-version.h.in                         |   95 -
 mongoc/mongoc-write-concern-private.h              |   52 -
 mongoc/mongoc-write-concern.c                      |  314 -
 mongoc/mongoc-write-concern.h                      |   65 -
 mongoc/mongoc.h                                    |   57 -
 mongoc/op-delete.def                               |   11 -
 mongoc/op-get-more.def                             |   11 -
 mongoc/op-header.def                               |    7 -
 mongoc/op-insert.def                               |   10 -
 mongoc/op-kill-cursors.def                         |    9 -
 mongoc/op-msg.def                                  |    8 -
 mongoc/op-query.def                                |   13 -
 mongoc/op-reply.def                                |   12 -
 mongoc/op-update.def                               |   12 -
 mongoc/uncrustify.cfg                              |   91 -
 src/Makefile.am                                    |   55 +
 src/bindings/Makefile.am                           |    3 +
 src/bindings/python/Makefile.am                    |   29 +
 src/bindings/python/pymongoc-client-pool.c         |  196 +
 src/bindings/python/pymongoc-client-pool.h         |   50 +
 src/bindings/python/pymongoc-client.c              |  142 +
 src/bindings/python/pymongoc-client.h              |   52 +
 src/bindings/python/pymongoc-uri.c                 |  133 +
 src/bindings/python/pymongoc-uri.h                 |   47 +
 src/bindings/python/pymongoc.c                     |   55 +
 src/mongoc/.gitignore                              |    2 +
 src/mongoc/Makefile.am                             |  109 +
 src/mongoc/Makefile.include                        |  170 +
 src/mongoc/indent                                  |    3 +
 src/mongoc/libmongoc-1.0.pc.in                     |   11 +
 src/mongoc/libmongoc-ssl-1.0.pc.in                 |   11 +
 src/mongoc/libmongoc.symbols                       |  151 +
 src/mongoc/mongoc-array-private.h                  |   64 +
 src/mongoc/mongoc-array.c                          |   67 +
 src/mongoc/mongoc-buffer-private.h                 |   79 +
 src/mongoc/mongoc-buffer.c                         |  233 +
 src/mongoc/mongoc-client-pool.c                    |  178 +
 src/mongoc/mongoc-client-pool.h                    |   59 +
 src/mongoc/mongoc-client-private.h                 |  107 +
 src/mongoc/mongoc-client.c                         | 1262 ++++
 src/mongoc/mongoc-client.h                         |  158 +
 src/mongoc/mongoc-cluster-private.h                |  184 +
 src/mongoc/mongoc-cluster.c                        | 2723 +++++++
 src/mongoc/mongoc-collection-private.h             |   58 +
 src/mongoc/mongoc-collection.c                     | 1258 +++
 src/mongoc/mongoc-collection.h                     |  129 +
 src/mongoc/mongoc-compat-socket-unix.c             |   37 +
 src/mongoc/mongoc-compat-socket-unix.h             |   82 +
 src/mongoc/mongoc-compat-socket-win32.c            |  536 ++
 src/mongoc/mongoc-compat-socket-win32.h            |  169 +
 src/mongoc/mongoc-compat-thread.h                  |   86 +
 src/mongoc/mongoc-compat-unix.c                    |   31 +
 src/mongoc/mongoc-compat-win32.c                   |   43 +
 src/mongoc/mongoc-compat.h                         |   46 +
 src/mongoc/mongoc-config.h.in                      |   44 +
 src/mongoc/mongoc-counters-private.h               |  172 +
 src/mongoc/mongoc-counters.c                       |  305 +
 src/mongoc/mongoc-counters.defs                    |   61 +
 src/mongoc/mongoc-cursor-array-private.h           |   38 +
 src/mongoc/mongoc-cursor-array.c                   |  169 +
 src/mongoc/mongoc-cursor-cursorid-private.h        |   38 +
 src/mongoc/mongoc-cursor-cursorid.c                |  144 +
 src/mongoc/mongoc-cursor-private.h                 |  134 +
 src/mongoc/mongoc-cursor.c                         |  794 ++
 src/mongoc/mongoc-cursor.h                         |   68 +
 src/mongoc/mongoc-database-private.h               |   53 +
 src/mongoc/mongoc-database.c                       |  773 ++
 src/mongoc/mongoc-database.h                       |   86 +
 src/mongoc/mongoc-error.h                          |   90 +
 src/mongoc/mongoc-flags.h                          |  137 +
 src/mongoc/mongoc-gridfs-file-list-private.h       |   49 +
 src/mongoc/mongoc-gridfs-file-list.c               |   87 +
 src/mongoc/mongoc-gridfs-file-list.h               |   50 +
 src/mongoc/mongoc-gridfs-file-page-private.h       |   86 +
 src/mongoc/mongoc-gridfs-file-page.c               |  185 +
 src/mongoc/mongoc-gridfs-file-page.h               |   39 +
 src/mongoc/mongoc-gridfs-file-private.h            |   77 +
 src/mongoc/mongoc-gridfs-file.c                    |  738 ++
 src/mongoc/mongoc-gridfs-file.h                    |  108 +
 src/mongoc/mongoc-gridfs-private.h                 |   51 +
 src/mongoc/mongoc-gridfs.c                         |  280 +
 src/mongoc/mongoc-gridfs.h                         |   73 +
 src/mongoc/mongoc-host-list-private.h              |   36 +
 src/mongoc/mongoc-host-list.h                      |   59 +
 src/mongoc/mongoc-index.c                          |   51 +
 src/mongoc/mongoc-index.h                          |   60 +
 src/mongoc/mongoc-init.c                           |   61 +
 src/mongoc/mongoc-init.h                           |   38 +
 src/mongoc/mongoc-list-private.h                   |   71 +
 src/mongoc/mongoc-list.c                           |  148 +
 src/mongoc/mongoc-log.c                            |  153 +
 src/mongoc/mongoc-log.h                            |  109 +
 src/mongoc/mongoc-matcher-op-private.h             |  136 +
 src/mongoc/mongoc-matcher-op.c                     | 1127 +++
 src/mongoc/mongoc-matcher-private.h                |   39 +
 src/mongoc/mongoc-matcher.c                        |  407 +
 src/mongoc/mongoc-matcher.h                        |   41 +
 src/mongoc/mongoc-opcode.h                         |   49 +
 src/mongoc/mongoc-queue-private.h                  |   77 +
 src/mongoc/mongoc-queue.c                          |  109 +
 src/mongoc/mongoc-read-prefs-private.h             |   47 +
 src/mongoc/mongoc-read-prefs.c                     |  311 +
 src/mongoc/mongoc-read-prefs.h                     |   64 +
 src/mongoc/mongoc-rpc-private.h                    |  124 +
 src/mongoc/mongoc-rpc.c                            |  700 ++
 src/mongoc/mongoc-sasl-private.h                   |   95 +
 src/mongoc/mongoc-sasl.c                           |  339 +
 src/mongoc/mongoc-ssl-private.h                    |   57 +
 src/mongoc/mongoc-ssl.c                            |  456 ++
 src/mongoc/mongoc-ssl.h                            |   51 +
 src/mongoc/mongoc-stream-buffered.c                |  331 +
 src/mongoc/mongoc-stream-buffered.h                |   42 +
 src/mongoc/mongoc-stream-gridfs.c                  |  167 +
 src/mongoc/mongoc-stream-gridfs.h                  |   43 +
 src/mongoc/mongoc-stream-private.h                 |   56 +
 src/mongoc/mongoc-stream-tls.c                     |  781 ++
 src/mongoc/mongoc-stream-tls.h                     |   50 +
 src/mongoc/mongoc-stream-unix.c                    |  571 ++
 src/mongoc/mongoc-stream-unix.h                    |   42 +
 src/mongoc/mongoc-stream.c                         |  236 +
 src/mongoc/mongoc-stream.h                         |   65 +
 src/mongoc/mongoc-thread.h                         |   88 +
 src/mongoc/mongoc-trace.h                          |  140 +
 src/mongoc/mongoc-uri.c                            |  763 ++
 src/mongoc/mongoc-uri.h                            |   59 +
 src/mongoc/mongoc-util-private.h                   |   36 +
 src/mongoc/mongoc-util.c                           |   41 +
 src/mongoc/mongoc-version.h.in                     |   95 +
 src/mongoc/mongoc-write-concern-private.h          |   52 +
 src/mongoc/mongoc-write-concern.c                  |  314 +
 src/mongoc/mongoc-write-concern.h                  |   65 +
 src/mongoc/mongoc.h                                |   57 +
 src/mongoc/op-delete.def                           |   11 +
 src/mongoc/op-get-more.def                         |   11 +
 src/mongoc/op-header.def                           |    7 +
 src/mongoc/op-insert.def                           |   10 +
 src/mongoc/op-kill-cursors.def                     |    9 +
 src/mongoc/op-msg.def                              |    8 +
 src/mongoc/op-query.def                            |   13 +
 src/mongoc/op-reply.def                            |   12 +
 src/mongoc/op-update.def                           |   12 +
 src/mongoc/uncrustify.cfg                          |   91 +
 src/tools/Makefile.am                              |    3 +
 src/tools/mongoc-stat.c                            |  224 +
 tools/Makefile.include                             |    7 -
 tools/mongoc-stat.c                                |  224 -
 302 files changed, 33437 insertions(+), 24015 deletions(-)

commit 0d8e1cfb6c29c1c9c33aba7f0b085c3972e9420b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Mar 1 15:20:33 2014 -0800

    build: bump requirement of libbson to master.
    
    In the near future, I hope to revamp the build system here and actually
    allow us to bundle libbson directly. Then this wont matter so much. If
    we don't find a new enough libbson, we will just build it too.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2684095fb49775f4a0b6c308a14b06826ce0efb0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Mar 1 15:15:05 2014 -0800

    gridfs: allow 32-bit numbers from "length" field.

 mongoc/mongoc-gridfs-file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 132b062da0d4d69626c01d5bd1a3459a92a551c7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 27 14:13:02 2014 -0800

    bson: track bson_strncpy() name change.

 mongoc/mongoc-counters.c        | 6 +++---
 mongoc/mongoc-cursor-cursorid.c | 2 +-
 mongoc/mongoc-cursor.c          | 4 ++--
 mongoc/mongoc-database.c        | 2 +-
 mongoc/mongoc-ssl.c             | 2 +-
 mongoc/mongoc-uri.c             | 6 +++---
 tests/test-libmongoc.c          | 6 +++---
 7 files changed, 14 insertions(+), 14 deletions(-)

commit e5c0c086ffcef9b158ff3244716ed60bf88da887
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 27 12:34:36 2014 -0800

    doc: update doc symbols

 doc/mongoc_symbols.txt | 1 +
 1 file changed, 1 insertion(+)

commit e8d414c8e54fee34e460747075f6e1dc74dc40f0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 27 12:34:26 2014 -0800

    database: add mongoc_database_create_collection().
    
    This is a helper to run the {create: collectionName} command with
    optional parameters.

 build/win32/libmongoc.def                 |   1 +
 doc/mongoc_database_create_collection.txt |  63 ++++++++++++++++
 doc/mongoc_symbols.txt                    |   1 +
 mongoc/libmongoc.symbols                  |   1 +
 mongoc/mongoc-database.c                  | 121 ++++++++++++++++++++++++++++++
 mongoc/mongoc-database.h                  |   4 +
 tests/test-mongoc-database.c              |  43 +++++++++++
 7 files changed, 234 insertions(+)

commit 934d87394d83b6b4107e90a79d4e2cbfd38290b0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 27 12:10:38 2014 -0800

    error: add new error types.
    
    I think I'd like to audit these soon and try to synchronize with other
    drivers such as pymongo.

 mongoc/mongoc-error.h | 6 ++++++
 1 file changed, 6 insertions(+)

commit a18bd19337bfc81246b59d9853260ee03826eadf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 27 11:51:34 2014 -0800

    whitespace.

 mongoc/mongoc-database.h | 73 ++++++++++++++++++++++++------------------------
 1 file changed, 36 insertions(+), 37 deletions(-)

commit df557e3414e7aa7f52868cd3e131676fae21127b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 20:51:43 2014 -0800

    ABI: add mongoc_database_remove_user() to win32 ABI.

 build/win32/libmongoc.def | 1 +
 1 file changed, 1 insertion(+)

commit 418632f445ce5a9b84a8ea4024e410d354c50031
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 20:51:17 2014 -0800

    ABI: add mongoc_database_remove_user() to ABI.

 mongoc/libmongoc.symbols | 1 +
 1 file changed, 1 insertion(+)

commit 40d298f6e523fed92ac6736849f567e039be4714
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 20:41:31 2014 -0800

    database: add mongoc_database_remove_user().

 mongoc/mongoc-database.c   | 50 +++++++++++++++++++++++++++++++++++++++++++++-
 mongoc/mongoc-database.h   |  5 ++++-
 tests/test-mongoc-client.c |  1 +
 3 files changed, 54 insertions(+), 2 deletions(-)

commit 87e9617444208271215890299736da864b8dd3b7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 19:52:35 2014 -0800

    database: only try command if userInfo was successful.

 mongoc/mongoc-database.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 8b4d34e4deaf0e8aa61c5f1e43d0987326fb138f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 19:49:18 2014 -0800

    database: perform createUser command.
    
    Fixes CDRIVER-232.

 mongoc/mongoc-database.c | 39 ++++++++++++++++++++++++++++++++++-----
 1 file changed, 34 insertions(+), 5 deletions(-)

commit 061e89eaab2e0094079313360af0cba493d5822f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 19:48:45 2014 -0800

    database: add some more tracing helpers.

 mongoc/mongoc-database.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 1b28451eac5d553125d106b8a8f087e8a23d193c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 19:48:30 2014 -0800

    cursor: don't do $query on commands.

 mongoc/mongoc-cursor.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fdd6ede8fdf255cb2fc60d8f726f4680eb259cbe
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 19:19:36 2014 -0800

    trace: add DUMP_IOVEC() tracing macro.

 mongoc/mongoc-cluster.c |  2 ++
 mongoc/mongoc-trace.h   | 50 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 52 insertions(+)

commit 2671082bfe9dfcde68a2823870867ac53f99b650
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 17:29:08 2014 -0800

    stream: check for EWOULDBLOCK in addition to EAGAIN.

 mongoc/mongoc-stream-unix.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7aaea240a7a363e80ff6ae106397fd52849ddc6d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 15:22:29 2014 -0800

    ping: allow using mongodb:// url with mongoc-ping.

 examples/mongoc-ping.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 7edcb5c474ebecf4d7ed9eb796ce7b8e45e813b3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 15:16:57 2014 -0800

    Tests: merge TestSuite from libbson.

 tests/TestSuite.c | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)

commit d306b0aadaabe442320b07bf399478ad2d784107
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 15:16:32 2014 -0800

    build: check for clock_gettime() for TestSuite.

 configure.ac | 7 +++++++
 1 file changed, 7 insertions(+)

commit 6e54654f1f4d5d6d2244956e5b8c94685318c461
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 14:23:38 2014 -0800

    mock-server: set TCP_NODELAY on client socket.

 tests/mock-server.c | 3 +++
 1 file changed, 3 insertions(+)

commit ede48079a5107626620408bec0a883804c873b8c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 24 14:23:23 2014 -0800

    whitespace.

 tests/mock-server.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 754acbf7e0e266c7db39ac0ac2cf468920582e43
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 22 12:23:43 2014 -0800

    matcher: don't use type nams as they may be macros too (bool, _Bool)

 mongoc/mongoc-matcher-op.c | 122 ++++++++++++++++++++++-----------------------
 1 file changed, 61 insertions(+), 61 deletions(-)

commit c91fb7e80f17ae84e0cbbc61a6dd4ff186c84711
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Feb 20 22:09:28 2014 -0500

    updated docs to match headers

 doc/mongoc_client_command.txt          | 24 ++++++++++++------------
 doc/mongoc_collection_command.txt      | 28 +++++++++++++++-------------
 doc/mongoc_collection_count.txt        |  6 +++---
 doc/mongoc_collection_delete.txt       |  2 +-
 doc/mongoc_collection_drop.txt         |  2 +-
 doc/mongoc_collection_drop_index.txt   |  2 +-
 doc/mongoc_collection_ensure_index.txt |  2 +-
 doc/mongoc_collection_find.txt         |  6 +++---
 doc/mongoc_collection_insert.txt       |  6 +++---
 doc/mongoc_collection_save.txt         |  2 +-
 doc/mongoc_collection_update.txt       |  2 +-
 doc/mongoc_cursor_error.txt            |  2 +-
 doc/mongoc_cursor_more.txt             |  2 +-
 doc/mongoc_cursor_next.txt             |  2 +-
 doc/mongoc_database_add_user.txt       |  2 +-
 doc/mongoc_database_command.txt        | 28 +++++++++++++++-------------
 doc/mongoc_database_drop.txt           |  2 +-
 doc/mongoc_database_has_collection.txt |  2 +-
 doc/mongoc_gridfs_drop.txt             |  2 +-
 doc/mongoc_gridfs_file_error.txt       |  2 +-
 doc/mongoc_gridfs_file_get_aliases.txt |  6 +++---
 doc/mongoc_gridfs_file_list_error.txt  |  2 +-
 doc/mongoc_gridfs_file_readv.txt       |  4 ++--
 doc/mongoc_gridfs_file_save.txt        |  2 +-
 doc/mongoc_gridfs_file_seek.txt        |  4 ++--
 doc/mongoc_index_opt_get_default.txt   |  8 ++++----
 doc/mongoc_matcher_match.txt           |  2 +-
 doc/mongoc_read_prefs_is_valid.txt     |  2 +-
 doc/mongoc_read_prefs_new.txt          |  2 +-
 doc/mongoc_ssl.txt                     |  2 +-
 doc/mongoc_stream_read.txt             |  2 +-
 doc/mongoc_stream_readv.txt            |  2 +-
 doc/mongoc_stream_tls_check_cert.txt   |  2 +-
 doc/mongoc_stream_tls_do_handshake.txt |  4 ++--
 doc/mongoc_stream_unix_new.txt         |  2 +-
 doc/mongoc_stream_writev.txt           |  2 +-
 doc/mongoc_uri_new.txt                 |  6 +++---
 doc/mongoc_write_concern_get_fsync.txt | 30 +++++++++++++++---------------
 38 files changed, 107 insertions(+), 103 deletions(-)

commit 57af3a1304b0d29524edc6fdbd432b69b5f0f424
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Feb 20 16:14:28 2014 -0500

    check_docs

 doc/check_docs.pl | 164 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 164 insertions(+)

commit f32a1e84ca91adae73497c0a65e0d7353149ec6b
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 20 17:02:12 2014 -0800

    cluster: extract maxWriteBatchSize from ismaster.

 mongoc/mongoc-cluster-private.h | 1 +
 mongoc/mongoc-cluster.c         | 5 +++++
 2 files changed, 6 insertions(+)

commit c171b38a7b16d35f8491253b32be814bbeb7f70f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 20 13:22:37 2014 -0800

    tests: log test output to test.log.

 .gitignore             | 1 +
 tests/Makefile.include | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit e29c9e85333dc181f08bc2d43bdaaf8270b2ad7e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 20 13:20:12 2014 -0800

    tests: specify a log file with -F <filename>

 tests/TestSuite.c | 72 ++++++++++++++++++++++++++++++++++++++++++++++---------
 tests/TestSuite.h |  1 +
 2 files changed, 62 insertions(+), 11 deletions(-)

commit 5d782f7d6e124f8738b0505503e76a378b877c1c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 20 12:47:20 2014 -0800

    tests: TestSuite cleanup.

 tests/TestSuite.c | 190 +++++++++++++++++++++++++++---------------------------
 1 file changed, 94 insertions(+), 96 deletions(-)

commit 9430d60c8c8fd68632629efaf898d2d51c12125e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 16:19:31 2014 -0800

    tls: synthesize errno if not set.
    
    Fixes tests on freebsd10.

 mongoc/mongoc-stream-tls.c | 11 ++++++++++-
 tests/ssl-test.c           |  4 +++-
 2 files changed, 13 insertions(+), 2 deletions(-)

commit cd370182417e07a74c6b4de4501a24de050f54f8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 15:27:42 2014 -0800

    ssl: add check for > 0 bytes read before compare check.

 tests/ssl-test.c | 1 +
 1 file changed, 1 insertion(+)

commit 7f5fa6e6b56a41d8bb4442022a058e1169e8582d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 15:24:20 2014 -0800

    tests: seed rand when adding test, and call srand() before test->func().

 tests/TestSuite.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit a595c99f5defc921642b920c2a774376513b5f4d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 13:48:56 2014 -0800

    includes: sys/uio.h for writev().

 mongoc/mongoc-compat-socket-unix.h | 1 +
 1 file changed, 1 insertion(+)

commit 7d06c8490b079273964788b1e56e46fe45d59297
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 13:46:33 2014 -0800

    build: remove -Wunused-but-set-parameter

 configure.ac | 1 -
 1 file changed, 1 deletion(-)

commit cb823b58f8328d25c2ee01756d0cde71b1f4f11e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 13:34:40 2014 -0800

    tests: uname() is simply non -1 on solaris.

 tests/TestSuite.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5cab640a67f1ce6826f05e1522f2f7fd32d8d0d8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 13:30:58 2014 -0800

    tests: call srand() before running each test.
    
    Include the seed in the output.

 tests/TestSuite.c | 58 ++++++++++++++++++++++++++++++++-----------------------
 tests/TestSuite.h |  1 +
 2 files changed, 35 insertions(+), 24 deletions(-)

commit 88bc219d356a783bdec3cc1d2c570deec3896574
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 13:09:08 2014 -0800

    whitespace.

 mongoc/mongoc-cursor.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 172fe7188d358162a80a5af2e1bf37dfc575573a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 19 13:09:00 2014 -0800

    cursor: fix COMMAND_NOT_FOUND on 2.5.2.

 mongoc/mongoc-cursor.c | 1 -
 1 file changed, 1 deletion(-)

commit 18a8b21a8fd9f59e21d0c42499c0821686bc18c9
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Feb 13 05:13:23 2014 -0500

    documentaiton updates
    
    o updated configure.ac to generate MONGOC_SYMBOLS and MONGOC_API more
      portably. tr instead of xargs
    
    o added docs for the new exported symbols

 configure.ac                             |   4 +-
 doc/mongoc_api.txt                       |  14 +++
 doc/mongoc_client_get_database_names.txt |  69 ++++++++++++++
 doc/mongoc_fd_set_nonblock.txt           |  41 +++++++++
 doc/mongoc_matcher_destroy.txt           |  40 +++++++++
 doc/mongoc_matcher_match.txt             |  43 +++++++++
 doc/mongoc_matcher_new.txt               |  43 +++++++++
 doc/mongoc_symbols.txt                   | 149 +++++++++++++++++++++++++++++++
 doc/mongoc_uri_get_auth_mechanism.txt    |   1 +
 doc/mongoc_uri_get_hosts.txt             |  21 ++---
 10 files changed, 413 insertions(+), 12 deletions(-)

commit 1cadac017bd061d32f087189bff7bc3769d59c48
Author: Christian Hergert <christian@localhost.localdomain>
Date:   Tue Feb 18 19:59:56 2014 -0800

    build: link against nsl on solaris.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ad05137c76103483234c328963dc93d440248635
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Feb 14 19:47:46 2014 -0800

    init: call mongoc_init() using a ctor on GCC.

 examples/example-client.c  |  2 +-
 examples/filter-bsondump.c |  2 ++
 examples/find-and-modify.c |  2 ++
 mongoc/mongoc-init.c       | 14 ++++++++++++++
 4 files changed, 19 insertions(+), 1 deletion(-)

commit b2d65d05e9a5aea24088681976c33a86561061a3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Feb 14 19:33:27 2014 -0800

    build: install mongoc-thread.h as required by compat.

 mongoc/Makefile.include | 1 +
 1 file changed, 1 insertion(+)

commit e2e0f9616b655af00b7610babb698d8f443b2695
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Feb 14 12:34:09 2014 -0800

    build: bump deps on libbson.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b12b48d33ed7de29fcb99ea54fdcdd43abb71ef0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 17:59:58 2014 -0800

    tests: fix build on freebsd10.

 tests/ha-test.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 153680b53d1893c3f6f7401b3a0a70eef85df1e8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 13 16:09:44 2014 -0800

    use unsigned for bitflags.

 mongoc/mongoc-cluster-private.h | 37 +++++++++++++-------------
 mongoc/mongoc-cursor-private.h  | 57 +++++++++++++++++++----------------------
 2 files changed, 45 insertions(+), 49 deletions(-)

commit 1405b91d9a5b54772d0d7bbd8fee572c322d00ed
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 13 15:36:17 2014 -0800

    sasl: make call to sasl_client_done() version dependent.

 mongoc/mongoc-sasl.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 1c99776c318128d7194c677c25e48cc0517ba9f6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 13 15:15:53 2014 -0800

    bindings: track type changes.

 bindings/python/pymongoc-client-pool.c | 6 +++---
 bindings/python/pymongoc-client.c      | 4 ++--
 bindings/python/pymongoc-client.h      | 4 ++--
 bindings/python/pymongoc-uri.c         | 4 ++--
 4 files changed, 9 insertions(+), 9 deletions(-)

commit ef6622424fd0eb91bbde0ea9dba35fc83a380b9d
Merge: cf773dd 378e0de
Author: Jason Carey <hanumantmk@gmail.com>
Date:   Thu Feb 13 14:13:42 2014 -0500

    Merge pull request #9 from hanumantmk/win32
    
    Full win32 port

commit 378e0dea6e146715ab84673340d1b564001473f6
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Sat Jan 25 01:54:43 2014 -0500

    Full win32 port
    
    Added full support for win32 (mingw / msvc)

 bindings/python/pymongoc-client.c        |   4 +-
 build/win32/CMakeLists.txt               | 264 +++++++++++++++
 build/win32/FindBSON.cmake               |  91 ++++++
 build/win32/libmongoc-ssl.def            | 146 +++++++++
 build/win32/libmongoc.def                | 141 ++++++++
 configure.ac                             |  12 +-
 examples/example-client.c                |   2 +
 examples/example-gridfs.c                |   9 +-
 examples/filter-bsondump.c               |  13 +-
 examples/find-and-modify.c               |  16 +-
 examples/mongoc-dump.c                   |  30 +-
 examples/mongoc-ping.c                   |   4 +-
 examples/mongoc-rpc-validate.c           |  21 +-
 examples/mongoc-tail.c                   |  15 +-
 mongoc/.gitignore                        |   1 -
 mongoc/Makefile.include                  |  11 +-
 mongoc/libmongoc.symbols                 |   1 +
 mongoc/mongoc-array-private.h            |   2 +-
 mongoc/mongoc-array.c                    |   6 +-
 mongoc/mongoc-buffer-private.h           |  12 +-
 mongoc/mongoc-buffer.c                   |  44 +--
 mongoc/mongoc-client-pool.c              |  33 +-
 mongoc/mongoc-client-private.h           |  22 +-
 mongoc/mongoc-client.c                   | 148 ++++-----
 mongoc/mongoc-client.h                   |   8 +-
 mongoc/mongoc-cluster-private.h          |  56 ++--
 mongoc/mongoc-cluster.c                  | 316 +++++++++---------
 mongoc/mongoc-collection-private.h       |   4 +-
 mongoc/mongoc-collection.c               | 164 +++++-----
 mongoc/mongoc-collection.h               |  39 ++-
 mongoc/mongoc-compat-socket-unix.c       |  37 +++
 mongoc/mongoc-compat-socket-unix.h       |  81 +++++
 mongoc/mongoc-compat-socket-win32.c      | 536 +++++++++++++++++++++++++++++++
 mongoc/mongoc-compat-socket-win32.h      | 169 ++++++++++
 mongoc/mongoc-compat-thread.h            |  86 +++++
 mongoc/mongoc-compat-unix.c              |  31 ++
 mongoc/mongoc-compat-win32.c             |  43 +++
 mongoc/mongoc-compat.h                   |  46 +++
 mongoc/mongoc-counters-private.h         |  23 +-
 mongoc/mongoc-counters.c                 |  67 ++--
 mongoc/mongoc-cursor-array.c             |  30 +-
 mongoc/mongoc-cursor-cursorid.c          |  20 +-
 mongoc/mongoc-cursor-private.h           |  50 +--
 mongoc/mongoc-cursor.c                   | 180 +++++------
 mongoc/mongoc-cursor.h                   |   6 +-
 mongoc/mongoc-database.c                 |  53 ++-
 mongoc/mongoc-database.h                 |  14 +-
 mongoc/mongoc-gridfs-file-list-private.h |   2 +-
 mongoc/mongoc-gridfs-file-list.c         |   4 +-
 mongoc/mongoc-gridfs-file-list.h         |   2 +-
 mongoc/mongoc-gridfs-file-page-private.h |  36 +--
 mongoc/mongoc-gridfs-file-page.c         |  28 +-
 mongoc/mongoc-gridfs-file-private.h      |  14 +-
 mongoc/mongoc-gridfs-file.c              |  98 +++---
 mongoc/mongoc-gridfs-file.h              |  21 +-
 mongoc/mongoc-gridfs.c                   |  20 +-
 mongoc/mongoc-gridfs.h                   |   2 +-
 mongoc/mongoc-host-list-private.h        |   2 +-
 mongoc/mongoc-host-list.h                |   2 +-
 mongoc/mongoc-index.h                    |  14 +-
 mongoc/mongoc-init.c                     |  23 +-
 mongoc/mongoc-init.h                     |   2 -
 mongoc/mongoc-log.c                      |  36 ++-
 mongoc/mongoc-matcher-op-private.h       |   7 +-
 mongoc/mongoc-matcher-op.c               | 101 +++---
 mongoc/mongoc-matcher-private.h          |   1 -
 mongoc/mongoc-matcher.c                  |  14 +-
 mongoc/mongoc-matcher.h                  |   2 +-
 mongoc/mongoc-queue-private.h            |   2 +-
 mongoc/mongoc-queue.c                    |   4 +-
 mongoc/mongoc-read-prefs.c               |  26 +-
 mongoc/mongoc-read-prefs.h               |   2 +-
 mongoc/mongoc-rpc-private.h              |  27 +-
 mongoc/mongoc-rpc.c                      | 156 ++++-----
 mongoc/mongoc-sasl-private.h             |  14 +-
 mongoc/mongoc-sasl.c                     |  48 +--
 mongoc/mongoc-ssl-private.h              |   4 +-
 mongoc/mongoc-ssl.c                      |  28 +-
 mongoc/mongoc-ssl.h                      |   2 +-
 mongoc/mongoc-stream-buffered.c          |   4 +-
 mongoc/mongoc-stream-gridfs.c            |   4 +-
 mongoc/mongoc-stream-private.h           |   4 +-
 mongoc/mongoc-stream-tls.c               |  33 +-
 mongoc/mongoc-stream-tls.h               |   6 +-
 mongoc/mongoc-stream-unix.c              |  99 +++---
 mongoc/mongoc-stream-unix.h              |   3 +-
 mongoc/mongoc-stream.c                   |  17 +-
 mongoc/mongoc-stream.h                   |  11 +-
 mongoc/mongoc-thread.h                   |  88 +++++
 mongoc/mongoc-trace.h                    |   8 +-
 mongoc/mongoc-uri.c                      | 149 +++++----
 mongoc/mongoc-uri.h                      |   2 +-
 mongoc/mongoc-util.c                     |   6 +-
 mongoc/mongoc-write-concern-private.h    |  12 +-
 mongoc/mongoc-write-concern.c            |  42 +--
 mongoc/mongoc-write-concern.h            |  20 +-
 mongoc/mongoc.h                          |   1 -
 mongoc/op-query.def                      |   2 +-
 tests/Makefile.include                   |  19 +-
 tests/TestSuite.c                        | 193 ++++++++---
 tests/TestSuite.h                        |   1 -
 tests/ha-test.c                          | 278 +++++++++++-----
 tests/ha-test.h                          |  20 +-
 tests/mock-server.c                      |  93 +++---
 tests/mock-server.h                      |   6 +-
 tests/mongoc-tests.c                     |  33 ++
 tests/mongoc-tests.h                     |  34 +-
 tests/ssl-test.c                         |  69 ++--
 tests/test-libmongoc.c                   |  25 ++
 tests/test-libmongoc.h                   |  23 ++
 tests/test-load.c                        |   2 +
 tests/test-mongoc-buffer.c               |  14 +-
 tests/test-mongoc-client.c               |  98 ++----
 tests/test-mongoc-collection.c           |  35 +-
 tests/test-mongoc-cursor.c               |  15 +-
 tests/test-mongoc-database.c             |  15 +-
 tests/test-mongoc-gridfs-file-page.c     |  42 +--
 tests/test-mongoc-gridfs.c               |  33 +-
 tests/test-mongoc-matcher.c              |   8 +-
 tests/test-mongoc-read-prefs.c           |   4 +-
 tests/test-mongoc-rpc.c                  | 181 +++--------
 tests/test-mongoc-stream-tls.c           |   2 +
 tests/test-mongoc-stream.c               |  13 +-
 tests/test-mongoc-uri.c                  |   1 -
 tests/test-mongoc-write-concern.c        |  12 +-
 tests/test-replica-set-ssl.c             |   1 -
 tests/test-replica-set.c                 |  11 +-
 tests/test-secondary.c                   |  20 +-
 tests/test-sharded-cluster.c             |   4 +-
 tools/mongoc-stat.c                      |  41 ++-
 130 files changed, 3824 insertions(+), 1884 deletions(-)

commit cf773dd9e7abfab08397f525206e51419610d024
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 12 14:41:48 2014 -0800

    matcher: add some documentation on matcher.

 mongoc/mongoc-matcher.c | 145 +++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 131 insertions(+), 14 deletions(-)

commit 057feec246a0699718f15aaa514d66bb5de42534
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Feb 11 14:07:09 2014 -0800

    build: build fixes on freebsd10.

 mongoc/mongoc-client.c           | 2 +-
 mongoc/mongoc-counters-private.h | 7 +++++++
 2 files changed, 8 insertions(+), 1 deletion(-)

commit 78d169132e6814c9175a2ca4ad5f366d3f6a6f45
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Feb 11 13:10:14 2014 -0800

    fix copyright year.

 mongoc/mongoc-matcher-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2c59255960b04c7a3e86e88b295f8ad95755e0c7
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Tue Feb 11 13:02:18 2014 -0800

    matcher: fix typedefs and include chain for matcher.

 mongoc/mongoc-matcher-private.h | 41 +++++++++++++++++++++++++++++++++++++----
 mongoc/mongoc-matcher.c         |  2 ++
 mongoc/mongoc-matcher.h         |  2 +-
 3 files changed, 40 insertions(+), 5 deletions(-)

commit dad9f4aa43f48ac7f89504dfa1389d6a13444fce
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 15:44:12 2014 -0800

    Matcher: implement $in matchers.

 mongoc/mongoc-matcher-op.c  | 21 +++++++++++++++-----
 tests/test-mongoc-matcher.c | 48 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 64 insertions(+), 5 deletions(-)

commit f7815efc9687d76452912422cf7ec7c5a86faa21
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 14:37:49 2014 -0800

    TestSuite: track compilation options.

 tests/TestSuite.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 5178b908e82d5c0cc95cd17b6fdb2f9ed6b124f8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 14:29:48 2014 -0800

    Tests: remove pre-check, we will check in test suite.

 tests/Makefile.include | 2 --
 1 file changed, 2 deletions(-)

commit 01db8999a176a78ac0fb1e0e3f5b608231a0dbda
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 14:26:13 2014 -0800

    Tests: disable parallel/fork'd tests until shared state does not matter.

 tests/Makefile.include | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ba75d0718597d890c564bb737bb77d109a6c8b81
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 14:25:32 2014 -0800

    TestSuite: Add ssl tests to suite.

 tests/Makefile.include         | 20 +++-------
 tests/test-libmongoc.c         |  5 +++
 tests/test-mongoc-queue.c      |  2 +-
 tests/test-mongoc-stream-tls.c | 91 +++++++++++++++++-------------------------
 4 files changed, 47 insertions(+), 71 deletions(-)

commit 746ef0b69bd76fa6b20800c8582b20bcfbdfb53a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 14:21:03 2014 -0800

    Counters: make register values volatile.

 mongoc/mongoc-counters-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1d96321836045653d1c3fff4e26fc4ce3cc697b0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 14:19:52 2014 -0800

    Tests: Use TestSuite for parallel/fork'd tests.

 .gitignore                           |   1 +
 mongoc/mongoc-log.c                  |  29 +-
 tests/Makefile.include               | 169 +++--------
 tests/TestSuite.c                    | 547 +++++++++++++++++++++++++++++++++++
 tests/TestSuite.h                    | 106 +++++++
 tests/test-libmongoc.c               |  90 ++++++
 tests/test-mock-server.c             |  73 -----
 tests/test-mongoc-array.c            |  11 +-
 tests/test-mongoc-buffer.c           |  35 +--
 tests/test-mongoc-client-pool.c      |  27 +-
 tests/test-mongoc-client.c           |  71 +----
 tests/test-mongoc-collection.c       | 170 +++++------
 tests/test-mongoc-cursor.c           |  45 +--
 tests/test-mongoc-database.c         |  30 +-
 tests/test-mongoc-gridfs-file-page.c | 113 +++-----
 tests/test-mongoc-gridfs.c           |  34 +--
 tests/test-mongoc-list.c             |  47 ++-
 tests/test-mongoc-matcher.c          |  19 +-
 tests/test-mongoc-queue.c            |  25 +-
 tests/test-mongoc-read-prefs.c       |  23 +-
 tests/test-mongoc-rpc.c              | 231 ++++++++-------
 tests/test-mongoc-stream.c           |  31 +-
 tests/test-mongoc-uri.c              | 245 ++++++++--------
 tests/test-mongoc-write-concern.c    |  53 ++--
 tests/test-x509.c                    |  15 +-
 25 files changed, 1320 insertions(+), 920 deletions(-)

commit 5e39ea37a8a4e10530a436e60991cbb76b7f3053
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Mon Feb 10 12:49:40 2014 -0800

    Copyright: s/10gen/MongoDB,/g

 ChangeLog                               | 2 +-
 bindings/python/pymongoc-client-pool.c  | 2 +-
 bindings/python/pymongoc-client.c       | 2 +-
 bindings/python/pymongoc-client.h       | 2 +-
 bindings/python/pymongoc.c              | 2 +-
 examples/filter-bsondump.c              | 2 +-
 examples/mongoc-rpc-validate.c          | 2 +-
 mongoc/mongoc-array-private.h           | 2 +-
 mongoc/mongoc-array.c                   | 2 +-
 mongoc/mongoc-buffer-private.h          | 2 +-
 mongoc/mongoc-buffer.c                  | 2 +-
 mongoc/mongoc-client-pool.c             | 2 +-
 mongoc/mongoc-client-pool.h             | 2 +-
 mongoc/mongoc-client-private.h          | 2 +-
 mongoc/mongoc-client.c                  | 2 +-
 mongoc/mongoc-client.h                  | 2 +-
 mongoc/mongoc-cluster-private.h         | 2 +-
 mongoc/mongoc-cluster.c                 | 2 +-
 mongoc/mongoc-collection-private.h      | 2 +-
 mongoc/mongoc-collection.c              | 2 +-
 mongoc/mongoc-collection.h              | 2 +-
 mongoc/mongoc-counters-private.h        | 2 +-
 mongoc/mongoc-counters.c                | 2 +-
 mongoc/mongoc-counters.defs             | 2 +-
 mongoc/mongoc-cursor-array-private.h    | 2 +-
 mongoc/mongoc-cursor-array.c            | 2 +-
 mongoc/mongoc-cursor-cursorid-private.h | 2 +-
 mongoc/mongoc-cursor-cursorid.c         | 2 +-
 mongoc/mongoc-cursor-private.h          | 2 +-
 mongoc/mongoc-cursor.c                  | 2 +-
 mongoc/mongoc-cursor.h                  | 2 +-
 mongoc/mongoc-database-private.h        | 2 +-
 mongoc/mongoc-database.c                | 2 +-
 mongoc/mongoc-database.h                | 2 +-
 mongoc/mongoc-error.h                   | 2 +-
 mongoc/mongoc-flags.h                   | 2 +-
 mongoc/mongoc-host-list-private.h       | 2 +-
 mongoc/mongoc-host-list.h               | 2 +-
 mongoc/mongoc-init.c                    | 2 +-
 mongoc/mongoc-init.h                    | 2 +-
 mongoc/mongoc-list-private.h            | 2 +-
 mongoc/mongoc-list.c                    | 2 +-
 mongoc/mongoc-log.c                     | 2 +-
 mongoc/mongoc-log.h                     | 2 +-
 mongoc/mongoc-matcher-op-private.h      | 2 +-
 mongoc/mongoc-matcher-op.c              | 2 +-
 mongoc/mongoc-matcher.c                 | 2 +-
 mongoc/mongoc-matcher.h                 | 2 +-
 mongoc/mongoc-opcode.h                  | 2 +-
 mongoc/mongoc-queue-private.h           | 2 +-
 mongoc/mongoc-queue.c                   | 2 +-
 mongoc/mongoc-read-prefs-private.h      | 2 +-
 mongoc/mongoc-read-prefs.c              | 2 +-
 mongoc/mongoc-read-prefs.h              | 2 +-
 mongoc/mongoc-rpc-private.h             | 2 +-
 mongoc/mongoc-rpc.c                     | 2 +-
 mongoc/mongoc-sasl-private.h            | 2 +-
 mongoc/mongoc-sasl.c                    | 2 +-
 mongoc/mongoc-ssl-private.h             | 2 +-
 mongoc/mongoc-ssl.c                     | 2 +-
 mongoc/mongoc-ssl.h                     | 2 +-
 mongoc/mongoc-stream-buffered.c         | 2 +-
 mongoc/mongoc-stream-buffered.h         | 2 +-
 mongoc/mongoc-stream-private.h          | 2 +-
 mongoc/mongoc-stream-tls.c              | 2 +-
 mongoc/mongoc-stream-tls.h              | 2 +-
 mongoc/mongoc-stream-unix.c             | 2 +-
 mongoc/mongoc-stream-unix.h             | 2 +-
 mongoc/mongoc-stream.c                  | 2 +-
 mongoc/mongoc-stream.h                  | 2 +-
 mongoc/mongoc-trace.h                   | 2 +-
 mongoc/mongoc-uri.c                     | 2 +-
 mongoc/mongoc-uri.h                     | 2 +-
 mongoc/mongoc-util-private.h            | 2 +-
 mongoc/mongoc-util.c                    | 2 +-
 mongoc/mongoc-version.h.in              | 2 +-
 mongoc/mongoc-write-concern-private.h   | 2 +-
 mongoc/mongoc-write-concern.c           | 2 +-
 mongoc/mongoc-write-concern.h           | 2 +-
 mongoc/mongoc.h                         | 2 +-
 tests/ha-test.c                         | 2 +-
 tests/ha-test.h                         | 2 +-
 tests/mock-server.c                     | 2 +-
 tests/mock-server.h                     | 2 +-
 tests/mongoc-tests.h                    | 2 +-
 tools/mongoc-stat.c                     | 2 +-
 86 files changed, 86 insertions(+), 86 deletions(-)

commit 3dc9a07b3aacef914e8a90c571362f814334e1f0
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sun Feb 9 18:30:01 2014 -0800

    matcher-op: document matcher functions.

 mongoc/mongoc-matcher-op.c | 214 ++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 192 insertions(+), 22 deletions(-)

commit cb74ab74c7df7082176545af0e3a19c8ff0060c7
Merge: 4fc0660 de64b33
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sun Feb 9 18:10:42 2014 -0800

    Merge branch 'hackathon' of github.com:mongodb/mongo-c-driver
    
    Conflicts:
    	examples/Makefile.include

commit 4fc0660a153c880d6712ebbed7a1196db69ec278
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sun Feb 9 15:56:48 2014 -0800

    ssl: use bson_strnlen() for platforms without strnlen().
    
    Fixes build on osx 10.6.8.

 mongoc/mongoc-ssl.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 601a31be6d5f983f353162d48f82dd73bd368ca1
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Feb 9 15:39:04 2014 -0800

    uri: use bson_strndup() and bson_strdup().

 mongoc/mongoc-uri.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 83d62e40e8be3f8d52b0dc7e96517696f12f92e8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 13:20:36 2014 -0800

    pymongoc: implement pymongoc.ClientPool.push().

 bindings/python/pymongoc-client-pool.c | 33 +++++++++++++++++++++++++++++++++
 bindings/python/pymongoc-client.c      |  2 +-
 bindings/python/pymongoc-client.h      |  3 +++
 3 files changed, 37 insertions(+), 1 deletion(-)

commit c2dc4388f966929ea32336ab72ba3d421de4a4b3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 13:11:28 2014 -0800

    pymongoc: add some tracing.

 bindings/python/Makefile.include       | 3 ++-
 bindings/python/pymongoc-client-pool.c | 7 +++++++
 bindings/python/pymongoc-client.c      | 5 +++++
 3 files changed, 14 insertions(+), 1 deletion(-)

commit ee6c358e6cb3b3d16d5bfe8743fe8e588455d320
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 13:07:08 2014 -0800

    pymongoc: implement pymongoc.ClientPool.pop().

 bindings/python/pymongoc-client-pool.c | 32 +++++++++++++++++++++++++
 bindings/python/pymongoc-client-pool.h | 11 +++++----
 bindings/python/pymongoc-client.c      | 44 ++++++++++++++++++++++++----------
 bindings/python/pymongoc-client.h      | 10 ++++----
 4 files changed, 76 insertions(+), 21 deletions(-)

commit 8e3403f6b6427f6b15523505379b0bb56db7d3b3
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 12:48:36 2014 -0800

    python: add pymongoc.ClientPool() class.

 bindings/python/Makefile.include       |   2 +
 bindings/python/pymongoc-client-pool.c | 124 +++++++++++++++++++++++++++++++++
 bindings/python/pymongoc-client-pool.h |  47 +++++++++++++
 bindings/python/pymongoc.c             |   2 +
 4 files changed, 175 insertions(+)

commit f70f8e95d1cf49143a70494073c750d8bb61f5bf
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 11:22:14 2014 -0500

    pymongoc: add __str__ for URI.

 bindings/python/pymongoc-uri.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 6c2652df79908d14b6ef8645938ccaba837e7ae6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 11:20:27 2014 -0500

    pymongoc: add __repr__ for URI.

 bindings/python/pymongoc-uri.c | 20 +++++++++++++++++++-
 1 file changed, 19 insertions(+), 1 deletion(-)

commit 9532c1e12e2b146a9bccdc3a86adff334d5b205e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Sat Feb 8 02:38:17 2014 -0500

    python: stub out pymongoc-uri type.

 bindings/python/Makefile.include  |  28 ++++++-----
 bindings/python/pymongoc-client.h |   2 +-
 bindings/python/pymongoc-uri.c    | 101 ++++++++++++++++++++++++++++++++++++++
 bindings/python/pymongoc-uri.h    |  47 ++++++++++++++++++
 bindings/python/pymongoc.c        |   4 +-
 5 files changed, 167 insertions(+), 15 deletions(-)

commit ff868e424bdcd9d64f49683c61a8fb14823d984c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Feb 7 01:19:40 2014 -0500

    examples: add example similar to mongodump utility.
    
    This program will serially find the available databases and then go and
    dump them to .bson files in a known filesystem hierarchy. It does not
    extract metadata to json, however.
    
    Only rudimentary argument parsing is provided.

 .gitignore                |   1 +
 examples/Makefile.include |   6 ++
 examples/mongoc-dump.c    | 233 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 240 insertions(+)

commit 929c672c46e85c05442b7bbb0a9bdd803ca88e2e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Feb 7 01:18:14 2014 -0500

    client: add mongoc_get_database_names().

 mongoc/libmongoc.symbols |  1 +
 mongoc/mongoc-client.c   | 51 ++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-client.h   |  4 ++++
 3 files changed, 56 insertions(+)

commit 4ee6878c3704ef42b101e409d1abd6bbb4122da5
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Fri Feb 7 00:54:37 2014 -0500

    database: add mongoc_database_get_collection_names().

 doc/mongoc_database_get_collection_names.txt | 58 ++++++++++++++++++++++++++++
 mongoc/libmongoc.symbols                     |  1 +
 mongoc/mongoc-database.c                     | 51 ++++++++++++++++++++++++
 mongoc/mongoc-database.h                     |  3 ++
 4 files changed, 113 insertions(+)

commit de64b33890b887762106f5285015a867ade9b7f6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Thu Feb 6 00:42:15 2014 -0500

    matcher: start documenting code.

 mongoc/mongoc-matcher-op-private.h |   2 +-
 mongoc/mongoc-matcher-op.c         | 265 +++++++++++++++++++++++++++++++++----
 mongoc/mongoc-matcher.c            |   2 +-
 3 files changed, 243 insertions(+), 26 deletions(-)

commit 84031b90939fce9603b8c78b0506368e28637b08
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 23:21:45 2014 -0500

    tests: add int64 test.

 tests/test-mongoc-matcher.c | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 5d45c3df97cccc3cbd983f123fcbd68b27432112
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 22:49:51 2014 -0500

    examples: add filter-bsondump to filter a bson stream.

 .gitignore                 |  1 +
 examples/Makefile.include  |  6 +++++
 examples/filter-bsondump.c | 55 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 62 insertions(+)

commit 8f3b469acd32d5b95f113af4845a516a04365222
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 22:38:41 2014 -0500

    matcher: add some more tests. fix comparisons.

 mongoc/mongoc-matcher-op.c  | 22 ++++++-------
 tests/test-mongoc-matcher.c | 80 ++++++++++++++++++++++++++++++++++++++++-----
 2 files changed, 83 insertions(+), 19 deletions(-)

commit e323503a1c06512ed13e080c39b8a91f6aefb724
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 22:01:47 2014 -0500

    tests: add some matcher tests.

 tests/test-mongoc-matcher.c | 50 ++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 47 insertions(+), 3 deletions(-)

commit a2b549da2c6818d0be1b695e86c4e1799d6175cd
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 21:51:23 2014 -0500

    matcher: cleanup, pass errors through, etc.

 mongoc/mongoc-error.h              |   3 +
 mongoc/mongoc-matcher-op-private.h |  34 ++---
 mongoc/mongoc-matcher-op.c         |  52 +++----
 mongoc/mongoc-matcher.c            | 279 ++++++++++++++++++++++++++-----------
 mongoc/mongoc-matcher.h            |  38 ++++-
 tests/test-mongoc-matcher.c        |   5 +-
 6 files changed, 281 insertions(+), 130 deletions(-)

commit 7f1e37ffcceb5f13834c8313dab0f51bde76b36e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 20:47:24 2014 -0500

    abi: add matcher symbols.

 mongoc/libmongoc.symbols | 3 +++
 1 file changed, 3 insertions(+)

commit 87f882d0fdbc561753015365f46901ff71645d09
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 20:43:36 2014 -0500

    matcher-op: make api private.

 mongoc/mongoc-matcher-op-private.h |  34 ++++-----
 mongoc/mongoc-matcher-op.c         | 142 ++++++++++++++++++-------------------
 mongoc/mongoc-matcher.c            |  36 +++++-----
 tests/test-mongoc-matcher.c        |   4 +-
 4 files changed, 108 insertions(+), 108 deletions(-)

commit da4b7e21e066fb188dde35e6212f614d2b09e049
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 18:13:19 2014 -0500

    matcher-op: add null/undefined compare.

 mongoc/mongoc-matcher-op.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 25681bd985539bde8679d0ee3c95a808240024e8
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Sun Feb 2 01:11:36 2014 -0500

    op swap, lt and gt works

 mongoc/mongoc-matcher-op.c  | 2 +-
 tests/test-mongoc-matcher.c | 7 ++-----
 2 files changed, 3 insertions(+), 6 deletions(-)

commit c360b8c5c84a106e6417581477ba66e911debdce
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 18:05:15 2014 -0500

    matcher-op: add $nin and warn on $in.

 mongoc/mongoc-matcher-op.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 9a186e7cc9a33bd3fae1849ee446805ecbf4073c
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 18:02:37 2014 -0500

    matcher-op: add warnings for undefined compares.

 mongoc/mongoc-matcher-op.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 01e08c1ca42a02d0c83485618492e9bf771cd7cc
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:55:00 2014 -0500

    update .gitignore.

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 4c51746cedc43cf012747ef6cad78db7ba26caea
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:54:35 2014 -0500

    matcher-op: add $ne compare.

 mongoc/mongoc-matcher-op.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 63900e115fb7f91774fb288359fee76988e31358
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:51:25 2014 -0500

    matcher-op: add gt, gte, lt, lte.

 mongoc/mongoc-matcher-op.c | 194 +++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 189 insertions(+), 5 deletions(-)

commit 46234d698b5276e1f1588edc912e529e1f3bf610
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Sun Feb 2 00:49:47 2014 -0500

    matching!

 mongoc/mongoc-matcher-op.c  | 4 ++--
 tests/test-mongoc-matcher.c | 9 ++++++---
 2 files changed, 8 insertions(+), 5 deletions(-)

commit 04d3da2bdea3cb84a72ae687078146c1e77c7daa
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:43:03 2014 -0500

    matcher-op: add utf8, int32, int64, and double matchers.

 mongoc/mongoc-matcher-op.c | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)

commit 4547775fa6f003042bf46865058ff3e49430cec5
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Sun Feb 2 00:41:11 2014 -0500

    more complicated test + fixes

 mongoc/mongoc-matcher.c     | 22 +++++++++++++++++-----
 mongoc/mongoc-matcher.h     |  2 ++
 tests/test-mongoc-matcher.c | 30 +++++++++++++++++++++++++++++-
 3 files changed, 48 insertions(+), 6 deletions(-)

commit e69d7b40eed7d70370c0a4967afb603aa3fbc1b6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:31:40 2014 -0500

    matcher-op: play with int32 matching.

 mongoc/mongoc-matcher-op.c | 65 ++++++++++++++++++++++++++++++++++------------
 1 file changed, 49 insertions(+), 16 deletions(-)

commit 6f9417c5f25ba37cc34c01400426a3f4dfc1c040
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Sun Feb 2 00:09:33 2014 -0500

    matcher parser, first work

 mongoc/Makefile.include         |   3 +
 mongoc/mongoc-matcher-op.c      |   2 +-
 mongoc/mongoc-matcher-private.h |   7 ++
 mongoc/mongoc-matcher.c         | 163 ++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-matcher.h         |   7 ++
 mongoc/mongoc.h                 |   1 +
 tests/Makefile.include          |   7 ++
 tests/test-mongoc-matcher.c     |  45 +++++++++++
 8 files changed, 234 insertions(+), 1 deletion(-)

commit 5239e8d0275d49942fa68e69c2e8cc912ea95873
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:12:00 2014 -0500

    matcher-op: stub out comparators.

 mongoc/mongoc-matcher-op.c | 87 +++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 86 insertions(+), 1 deletion(-)

commit bd52a738973a4742628158cf95fc18271bc8502d
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:05:14 2014 -0500

    matcher-op: add logical matchers.

 mongoc/mongoc-matcher-op.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 77fa9f8d4f74d4b3499de07f911075ede4053f13
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 17:03:01 2014 -0500

    matcher-op: stub out match functions.

 mongoc/mongoc-matcher-op.c | 41 +++++++++++++++++++++++++++++++++++++++--
 1 file changed, 39 insertions(+), 2 deletions(-)

commit a5e83e504e8fd4859892c62c356d5278b79522f6
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:52:19 2014 -0500

    use BSON_ASSERT().

 mongoc/mongoc-matcher-op.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 31811cbb0b5212e532a2390b918248094917fe06
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:51:18 2014 -0500

    matcher-op: finish up to_bson()

 mongoc/mongoc-matcher-op.c | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)

commit 5a794d0d9fdeeb6c04e4253012535e122776a00e
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:44:06 2014 -0500

    matcher-op: free not structure.

 mongoc/mongoc-matcher-op.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 39c750b7f40d629937cd94db2c2c60ab94e33fed
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:43:05 2014 -0500

    matcher-op: add not op type.

 mongoc/mongoc-matcher-op-private.h | 12 +++++++++
 mongoc/mongoc-matcher-op.c         | 51 +++++++++++++++++++++++++++++++++++++-
 2 files changed, 62 insertions(+), 1 deletion(-)

commit c9d33e62ed7d0cec3da117fae236ebb3899d3aca
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:12:20 2014 -0500

    matcher-op: start on to_bson function for serializing back out.

 mongoc/mongoc-matcher-op-private.h |  2 ++
 mongoc/mongoc-matcher-op.c         | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 35 insertions(+)

commit 73f94b94c9ac45224f185a9733877570eb7bb92f
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:12:06 2014 -0500

    matcher-op: allow for NULL right (for NOT)

 mongoc/mongoc-matcher-op.c | 1 -
 1 file changed, 1 deletion(-)

commit 1584e377f783da26220398d665fbf601930bac10
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:04:16 2014 -0500

    matcher-op: add matcher for $type.

 mongoc/mongoc-matcher-op.c | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit a07a0a12eba75b16371a2c060309c4320ff2c1de
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 16:02:03 2014 -0500

    matcher-op: add support for $exists and eq opcode.

 mongoc/mongoc-matcher-op-private.h |  3 ++-
 mongoc/mongoc-matcher-op.c         | 29 +++++++++++++++++++++++++----
 2 files changed, 27 insertions(+), 5 deletions(-)

commit 69b3f36f04ec6c7593710a607576fee9c8982ac8
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 15:50:24 2014 -0500

    matcher-op: allow true/false with exists op.

 mongoc/mongoc-matcher-op-private.h | 4 +++-
 mongoc/mongoc-matcher-op.c         | 4 +++-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit cef7777ff4483adf08b1c2a7e0a2ca9c0661727a
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 15:03:30 2014 -0500

    matcher: stub out matcher_op_match.

 mongoc/mongoc-matcher-op.c | 29 +++++++++++++++++++++++++++++
 1 file changed, 29 insertions(+)

commit bf2bd3f1744700d5fb76992586da161854952d11
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 15:01:38 2014 -0500

    matcher-op: new functions for op types.

 mongoc/mongoc-matcher-op.c | 60 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 60 insertions(+)

commit 937e7bb771cde01a244f0b85c9e43343508bd610
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 14:55:07 2014 -0500

    matcher-op: stub some fixes.

 mongoc/mongoc-matcher-op.c | 71 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 71 insertions(+)

commit a42496b963f8fbcfcbc286748b19ca46951df787
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 14:50:16 2014 -0500

    whitespace.

 mongoc/mongoc-matcher-op-private.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 5895ca43dd94fc8786c6e91e21364d24ef1acf37
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 14:49:52 2014 -0500

    matcher-opcode: compilation fixes.

 mongoc/mongoc-matcher-op-private.h | 19 +++++++++++++++----
 1 file changed, 15 insertions(+), 4 deletions(-)

commit 15b877d45a8af38ec5e28c4ba4c68a1d01b3ff44
Author: Christian Hergert <christian.hergert@mongodb.com>
Date:   Wed Feb 5 14:43:10 2014 -0500

    matcher: add in some opcode ideas.

 mongoc/Makefile.include            |   2 +
 mongoc/mongoc-matcher-op-private.h | 135 +++++++++++++++++++++++++++++--------
 mongoc/mongoc-matcher-op.c         |   0
 3 files changed, 109 insertions(+), 28 deletions(-)

commit be7537a35066919ca8a90fa428579baef10e24bf
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Sat Feb 1 21:04:00 2014 -0500

    matcher_op_private

 mongoc/mongoc-matcher-op-private.h | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit 05239452eb12d4086b201c49ef3c2986989b1649
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 29 15:57:42 2014 -0800

    counters: implement %rdtscp instruction for fast counters.

 configure.ac                     |   2 +
 mongoc/mongoc-counters-private.h | 107 ++++++++++++++++++++++++++-------------
 mongoc/mongoc-counters.c         |  10 ++--
 3 files changed, 78 insertions(+), 41 deletions(-)

commit 72152a39377a8dffc023725a4ac91dee0e610c3b
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 29 15:31:23 2014 -0800

    build: add --enable-rdtscp for faster counters.

 configure.ac | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

commit 595b74600c9ab6d684f4d988a8c09519af9c4083
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 27 16:30:23 2014 -0800

    counters: use compiler intrinsic for memory barrier.

 mongoc/mongoc-counters-private.h | 7 ++++++-
 mongoc/mongoc-counters.c         | 8 ++++++--
 2 files changed, 12 insertions(+), 3 deletions(-)

commit 33478e0d91ad61a353d7200e64a26662d55d429d
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 27 16:22:10 2014 -0800

    init: only include ssl headers if MONGOC_ENABLE_SSL.

 mongoc/mongoc-init.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 5cea4112a691eb1ce9fd626aa7861a5f074fefa4
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 27 12:14:13 2014 -0800

    examples: add find-and-modify example.

 .gitignore                 |   1 +
 examples/Makefile.include  |   6 ++
 examples/find-and-modify.c | 146 +++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 153 insertions(+)

commit e2e2085cf360a72152f6b8fa73a3e8700f64b348
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 27 12:04:32 2014 -0800

    collection: add mongoc_collection_get_name() function.

 doc/mongoc_collection_get_name.txt | 34 ++++++++++++++++++++++++++++++++++
 mongoc/libmongoc.symbols           |  1 +
 mongoc/mongoc-collection.c         | 25 +++++++++++++++++++++++++
 mongoc/mongoc-collection.h         |  1 +
 4 files changed, 61 insertions(+)

commit dc6d1c7986aac32f46eeb4d012911bc3ea566ca9
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 22 13:05:58 2014 -0800

    uri: add support for parsing IPV6 addresses in URI.
    
    mongodb://[::1]:1234,[::2]:3456/ should now work.

 mongoc/mongoc-uri.c     | 36 ++++++++++++++++++++++++++++++++++--
 tests/test-mongoc-uri.c | 21 +++++++++++++++++----
 2 files changed, 51 insertions(+), 6 deletions(-)

commit 1f6f298194da200411fdc4d4266ebd3773333ad5
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 22 12:40:42 2014 -0800

    collection: use upsert when saving a document with _id.

 mongoc/mongoc-collection.c     |  9 ++-------
 tests/test-mongoc-collection.c | 45 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 47 insertions(+), 7 deletions(-)

commit e418ce05d89e4137e80ec644243fa742f16c7c7c
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 22 12:30:46 2014 -0800

    Cursor: check if we have leftover items in the bson_reader_t.

 mongoc/mongoc-cursor.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit b55410df96329e7daa15c4d767ac6157e8b8681d
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 22 12:22:32 2014 -0800

    Examples: Put collection name parameter in proper place.
    
    Fixes CDRIVER-273.

 examples/example-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8e3eecf4b81bce3cdfea353a6dc97a6403a56034
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jan 16 16:41:04 2014 -0800

    collection: unset NO_VALIDATE flags on insert/update.
    
    This way we don't send invalid flags to the server.

 mongoc/mongoc-collection.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 1ddbbccec8cc67f0aecf4b0f00ba58d1c120674f
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jan 16 08:26:48 2014 -0800

    ssl: include limits.h for INT_MAX.

 mongoc/mongoc-ssl.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit a39a1ef4121d331ca723e9e07fc818707871cfdc
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 15 13:25:29 2014 -0800

    collection: check or $ and . keys on insert and update.
    
    In an attempt to help protect developers from inserting invalid
    data into their database, this commit will check documents on insertion
    and update for keys containing . or $ in them.
    
    We can't actually check for all possible errors in the update case,
    which is unfortunate, but this will catch some subset of them.
    
    If you would like to go fast, simply specify MONGOC_INSERT_NO_VALIDATE
    or MONGOC_UPDATE_NO_VALIDATE for flags to avoid the checks.

 mongoc/mongoc-collection.c     | 39 +++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-error.h          |  3 +++
 mongoc/mongoc-flags.h          |  2 ++
 tests/test-mongoc-collection.c | 30 ++++++++++++++++++++++++++++++
 4 files changed, 74 insertions(+)

commit f61986f2a3487f1056fb615b71a90980ac579f70
Merge: 548a62d 7fd9e81
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 15 07:43:56 2014 -0800

    Merge pull request #8 from suraia/error-check
    
    Remove unnecessary error checks

commit 548a62dca951a04aceffe9786663fdbd586a8195
Merge: 0ee7cd9 b09609d
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 15 07:37:35 2014 -0800

    Merge pull request #7 from suraia/pedantic
    
    Fix pedantic warnings about misplaced semicolons

commit 7fd9e810e0cefad7c7807a956d9a3c76ddbcfaf1
Author: Michael Kuhn <suraia@ikkoku.de>
Date:   Wed Jan 15 16:33:21 2014 +0100

    Remove unnecessary error checks.

 mongoc/mongoc-client.c | 4 ----
 1 file changed, 4 deletions(-)

commit b09609dff69a8781737c140e060a39d04d97259f
Author: Michael Kuhn <suraia@ikkoku.de>
Date:   Wed Jan 15 16:32:27 2014 +0100

    Fix pedantic warnings about misplaced semicolons.

 mongoc/mongoc-gridfs-file.h | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 0ee7cd9d1019ca560e2908a186e7a8c32adcfe8f
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 18:36:38 2014 -0800

    x509: add x509 authentication support.

 .gitignore                     |  1 +
 examples/Makefile.include      |  2 --
 mongoc/mongoc-client-private.h |  1 +
 mongoc/mongoc-client.c         | 48 +++++++++++++++++++++------
 mongoc/mongoc-cluster.c        | 73 +++++++++++++++++++++++++++++++++++++++---
 mongoc/mongoc-ssl-private.h    |  1 +
 mongoc/mongoc-ssl.c            |  4 +--
 tests/test-x509.c              |  2 +-
 8 files changed, 113 insertions(+), 19 deletions(-)

commit 30de03b7e0f8e88b05137750584bea7ff87e22bf
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 18:02:45 2014 -0800

    ssl: add helper to extract RFC2253 format subject.

 mongoc/mongoc-ssl-private.h   |   5 +++
 mongoc/mongoc-ssl.c           |  50 +++++++++++++++++++++
 tests/Makefile.include        |   6 +++
 tests/certificates/ca.pem     |  18 ++++++++
 tests/certificates/client.pem | 101 ++++++++++++++++++++++++++++++++++++++++++
 tests/test-x509.c             |  27 +++++++++++
 6 files changed, 207 insertions(+)

commit 7cb64a4b0c3cd0f736effa1d16a492a0914cbc3a
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 17:57:58 2014 -0800

    init: make init reentrant safe.

 mongoc/Makefile.include      |  1 -
 mongoc/mongoc-init-private.h | 34 ----------------------------------
 mongoc/mongoc-init.c         | 18 ++++++++++--------
 mongoc/mongoc-ssl.c          |  8 ++++----
 4 files changed, 14 insertions(+), 47 deletions(-)

commit 4590805e03f0112c0746695a7831d66517fe4a00
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 16:12:50 2014 -0800

    sasl: fix some warnings when debug is enabled.

 mongoc/mongoc-sasl.c | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

commit 7fbac43bdc06c6eb2f4cce3af91df2553153c209
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 16:12:36 2014 -0800

    ssl: allow lazy initialization of SSL methods.

 mongoc/mongoc-ssl.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 14f6baf088b59a073fd0bedc845c4a5bba5b4ce9
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 16:02:47 2014 -0800

    sasl: include sasl/saslutil for encode/decode functions.

 mongoc/mongoc-sasl-private.h | 1 +
 1 file changed, 1 insertion(+)

commit fbb5daffcadd80270c1c7fd058f7fa4c9568bd09
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 16:02:35 2014 -0800

    gridfs: only set prefix_len if we have debug enabled.

 mongoc/mongoc-gridfs.c | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit defb6240a7dc9066c0a045ed1307b5b4340e4f04
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 16:02:24 2014 -0800

    cluster: clean up some warnings.

 mongoc/mongoc-cluster.c | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit ed543dfdfb697629e3be71a92e225204ca857eeb
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 16:02:02 2014 -0800

    examples: fix off-by-one.

 examples/example-client.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8fe07a4b0344666f055a534677eabb8d6366e318
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 14:44:06 2014 -0800

    cluster: increment auth success/failure for all auth types.

 mongoc/mongoc-cluster.c | 28 ++++++++++++++++------------
 1 file changed, 16 insertions(+), 12 deletions(-)

commit 0ff653ccae592a31d107b6b1134417288fd241e1
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 12:21:44 2014 -0800

    abi: update libmongoc.symbols for mechanism rename.

 mongoc/libmongoc.symbols | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d7e773214b1d8f5a4fe716e48957b70d88d91b28
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 12:12:41 2014 -0800

    sasl: plug leak of reply bson.

 mongoc/mongoc-cluster.c | 1 +
 1 file changed, 1 insertion(+)

commit 45156a5fd42ba616b0be14179ec01888bfae25b6
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 12:08:25 2014 -0800

    sasl: extract sasl into it's own module.
    
    This simplifies things a bit by moving SASL support into it's own file.
    It might be nice to make the module work for more than GSSAPI at some
    point.

 mongoc/Makefile.include      |   8 +-
 mongoc/mongoc-cluster.c      | 306 ++++++++++++---------------------------
 mongoc/mongoc-error.h        |   1 +
 mongoc/mongoc-sasl-private.h |  94 ++++++++++++
 mongoc/mongoc-sasl.c         | 336 +++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 530 insertions(+), 215 deletions(-)

commit da4e3ded258815bcc72b3a8fb8d51c6d04fab4c2
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Jan 13 12:02:48 2014 -0800

    examples: allow specifying the connection string and collection name
    
    ./example-client [CONNECTION_STRING [COLLECTION_NAME]]

 examples/example-client.c | 32 +++++++++++++++++++++++++-------
 1 file changed, 25 insertions(+), 7 deletions(-)

commit 95e10edc94ad356cf71f5c87bb2b88e2adfa43ca
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Jan 10 14:35:21 2014 -0800

    sasl: check for {done: 1} when authenticating against GSSAPI.
    
    This gets SASL working for me on my test setup. We still need to abstract
    this into it's own module and remove the goto's for control flow.
    
    We probably need a maximum number of steps during sasl_client_step()
    too.
    
    Additionally, we need some work to verify thread safety.

 mongoc/mongoc-cluster.c | 62 ++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 46 insertions(+), 16 deletions(-)

commit 2b7077fde0bd9bfd323d684e2bf3e6e96d402c23
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Jan 10 14:09:17 2014 -0800

    uri: rename mechanism parameter to authMechanism.
    
    This matches what the other drivers are doing for authentication
    mechanism in SASL.

 mongoc/mongoc-cluster.c | 4 ++--
 mongoc/mongoc-uri.c     | 4 ++--
 mongoc/mongoc-uri.h     | 2 +-
 tests/test-mongoc-uri.c | 4 ++--
 4 files changed, 7 insertions(+), 7 deletions(-)

commit 97de03a89cfdb4e64d3d97229861d482b282fea3
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jan 9 12:10:11 2014 -0500

    sasl: add support for GSSAPI authentication.
    
    Enables kerberos authentication. This still needs a bit of work for
    thread safety as well as breaking the code up a bit (it's one giant
    function for now, that works, but is less than ideal).

 mongoc/Makefile.include         |   9 --
 mongoc/mongoc-cluster-private.h |   8 --
 mongoc/mongoc-cluster.c         | 232 +++++++++++++++++++++++++++++++++++++++-
 mongoc/mongoc-sasl-private.h    |  72 -------------
 mongoc/mongoc-sasl.c            |  17 ---
 5 files changed, 231 insertions(+), 107 deletions(-)

commit 47ee827314761d1a96a0363526d915901671814c
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jan 9 10:00:55 2014 -0500

    build: bump libbson requirement to 0.4.1.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0197ed565aedb69f763d25fc09d81cca9b619774
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 8 18:08:31 2014 -0500

    sasl: start plumbing in sasl support.
    
    This includes SASL PLAIN authentication. GSSAPI to come soon.

 configure.ac                    |  13 ++++
 mongoc/Makefile.include         |  19 ++++-
 mongoc/mongoc-cluster-private.h |   9 +++
 mongoc/mongoc-cluster.c         | 160 ++++++++++++++++++++++++++++++++++++++--
 mongoc/mongoc-config.h.in       |  12 ++-
 mongoc/mongoc-sasl-private.h    |  72 ++++++++++++++++++
 mongoc/mongoc-sasl.c            |  17 +++++
 7 files changed, 292 insertions(+), 10 deletions(-)

commit 0804bf92c232efc22b3e665120d0da517388d935
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jan 8 11:22:22 2014 -0500

    uri: add mongoc_uri_get_mechanism().

 mongoc/libmongoc.symbols |  1 +
 mongoc/mongoc-uri.c      | 16 ++++++++++++++++
 mongoc/mongoc-uri.h      |  1 +
 tests/test-mongoc-uri.c  | 11 +++++++++++
 4 files changed, 29 insertions(+)

commit deea59a9e64300c7f8dec372f0c7bb8c820cc3ca
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Jan 7 12:17:34 2014 -0500

    examples: remove useless index-source example.

 configure.ac              |  12 +-
 examples/Makefile.include |   6 -
 examples/index-source.c   | 290 ----------------------------------------------
 3 files changed, 1 insertion(+), 307 deletions(-)

commit 75a8248b32d2dd2e37d5aee43e7a44e2217ee140
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Jan 7 11:38:38 2014 -0500

    doc: update README.rst.

 README.rst | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit dca495036e0616d123b59e72cea139fd7bbd3be1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Dec 30 16:54:52 2013 +0100

    cluster: try to reuse existing connections during replset reconnection

 mongoc/mongoc-cluster.c | 52 +++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 48 insertions(+), 4 deletions(-)

commit 5f00e938e78e70662ec8bfe03d26268807e093df
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Fri Dec 20 10:56:14 2013 -0500

    batch_size and limit implementation
    
    Added batch_size and limit params to every function that creates a
    cursor.  Actually implemented limit functionality in the cursor as well
    (with correct threading for numberToReturn in rpc calls

 doc/mongoc_client_command.txt     |  3 +-
 doc/mongoc_collection_command.txt |  3 +-
 doc/mongoc_collection_find.txt    |  3 +-
 doc/mongoc_database_command.txt   |  3 +-
 examples/example-client.c         |  1 +
 examples/mongoc-ping.c            |  2 +-
 examples/mongoc-tail.c            |  1 +
 mongoc/mongoc-client.c            |  7 +++--
 mongoc/mongoc-client.h            |  3 +-
 mongoc/mongoc-collection.c        | 14 +++++----
 mongoc/mongoc-collection.h        |  6 ++--
 mongoc/mongoc-cursor-private.h    |  1 +
 mongoc/mongoc-cursor.c            | 61 ++++++++++++++++++++++++++++++---------
 mongoc/mongoc-database.c          |  9 +++---
 mongoc/mongoc-database.h          |  3 +-
 mongoc/mongoc-gridfs-file-list.c  |  2 +-
 mongoc/mongoc-gridfs-file.c       |  2 +-
 tests/ha-test.c                   |  2 ++
 tests/test-load.c                 |  4 +--
 tests/test-mongoc-client.c        | 17 ++++++-----
 tests/test-mongoc-database.c      |  2 +-
 tests/test-replica-set.c          |  2 ++
 tests/test-secondary.c            |  1 +
 23 files changed, 106 insertions(+), 46 deletions(-)

commit eafbe5ff771f17ea5eb9a9c7444bb05e1bcebd62
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Tue Dec 17 15:09:10 2013 -0500

    move a typedef after the enum it wraps
    
    pedantic

 mongoc/mongoc-read-prefs.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2eb0eb1cf672c44737c3006ab0f06f64c578ec44
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Tue Dec 17 15:07:31 2013 -0500

    sorting for gridfs chunks
    
    We have to provide an $orderby for the gridfs chunk query, we've been
    getting lucky thus far

 mongoc/mongoc-gridfs-file.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 67d889a964c104c87a1c90ac974bbc43b4e5645f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Dec 16 16:48:49 2013 -0800

    cursor: synthesize COMMAND_NOT_FOUND on mongod < 2.5.

 mongoc/mongoc-cursor.c       | 15 ++++++++++++++-
 mongoc/mongoc-error.h        |  1 +
 tests/test-mongoc-database.c |  1 +
 3 files changed, 16 insertions(+), 1 deletion(-)

commit 6052db5d552677cb7e3df1b960981f9e62dbbb3f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Dec 16 16:01:56 2013 -0800

    tests: ensure clone returns matching documents.

 tests/test-mongoc-cursor.c | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

commit dd6756b2fbaa5579707d6f0cec9a6d62400d247c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Dec 12 13:35:25 2013 -0800

    doc: update fsync() docs for write concern.

 doc/mongoc_write_concern_get_fsync.txt | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 0f622f0d67e010aa8240f6d0a4e15d49875b2490
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 11 12:28:23 2013 -0800

    mongoc: only allow including <mongoc.h>

 examples/Makefile.include        |  2 +-
 mongoc/Makefile.include          |  1 +
 mongoc/mongoc-client-pool.h      |  5 +++++
 mongoc/mongoc-client.h           |  5 +++++
 mongoc/mongoc-collection.h       |  5 +++++
 mongoc/mongoc-cursor.h           |  5 +++++
 mongoc/mongoc-database.h         |  6 ++++++
 mongoc/mongoc-error.h            |  5 +++++
 mongoc/mongoc-flags.h            |  5 +++++
 mongoc/mongoc-gridfs-file-list.h |  5 +++++
 mongoc/mongoc-gridfs-file-page.h |  5 +++++
 mongoc/mongoc-gridfs-file.h      |  5 +++++
 mongoc/mongoc-gridfs.h           |  5 +++++
 mongoc/mongoc-host-list.h        |  5 +++++
 mongoc/mongoc-index.h            |  6 ++++++
 mongoc/mongoc-init-private.h     |  5 +++++
 mongoc/mongoc-init.h             | 10 +++++++++
 mongoc/mongoc-list-private.h     |  5 +++++
 mongoc/mongoc-log.h              |  5 +++++
 mongoc/mongoc-opcode.h           |  5 +++++
 mongoc/mongoc-read-prefs.h       |  5 +++++
 mongoc/mongoc-ssl.h              |  5 +++++
 mongoc/mongoc-stream-buffered.h  |  5 +++++
 mongoc/mongoc-stream-gridfs.h    |  5 +++++
 mongoc/mongoc-stream-tls.h       |  5 +++++
 mongoc/mongoc-stream-unix.h      |  5 +++++
 mongoc/mongoc-stream.h           |  5 +++++
 mongoc/mongoc-trace.h            |  5 +++++
 mongoc/mongoc-uri.h              |  5 +++++
 mongoc/mongoc-write-concern.h    |  5 +++++
 tests/Makefile.include           | 46 ++++++++++++++++++++--------------------
 31 files changed, 172 insertions(+), 24 deletions(-)

commit f5a668e240b42e2acd30932d5cf7f454a226f883
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Dec 6 15:09:14 2013 -0800

    docs: update README.

 README.rst | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 19df32179967a5f9e352dc451f76563290f61c25
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 4 17:44:12 2013 -0800

    post-release bump.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1b1110b149361cc3336cd03a514c69005ca762ec
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 4 17:42:31 2013 -0800

    build: release 0.90.0!

 NEWS         | 19 +++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 20 insertions(+), 1 deletion(-)

commit eb0020c400e2ee5f765e7ae52fcc0722db21b4db
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 4 17:42:21 2013 -0800

    build: add mongoc-stream-private.h to makefile.

 mongoc/Makefile.include | 1 +
 1 file changed, 1 insertion(+)

commit f265149687cc94aeaf48da64c9eb662ddcd2c6a8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 4 17:30:57 2013 -0800

    doc: update README

 README.rst | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 9a0286392e8c95426c0ffcc578d649cad15c09c4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 4 17:20:20 2013 -0800

    doc: add Jason to AUTHORS.

 AUTHORS | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d5795f470eb57e097c4c61ceff5a3a659b4386f8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Dec 4 17:19:44 2013 -0800

    build: bump libbson requirement to 0.4.0.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2451e7daebacf53ff30c237a59bf20da612b7b2f
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Tue Dec 3 14:01:43 2013 -0500

    adding OP_QUERY rpc exhaust support
    
    Provide suport for exhaust queries
    
    Found a couple of bugs in:
    * buffers didn't handle already buffered data well (negative unsigned
      ints
    * gridfs files were still on possibly negative min_bytes for readv

 doc/mongoc_gridfs_file_readv.txt |   2 +-
 mongoc/mongoc-buffer.c           |   7 +-
 mongoc/mongoc-client-private.h   |   1 +
 mongoc/mongoc-client.c           |  10 +++
 mongoc/mongoc-cluster-private.h  |  10 +++
 mongoc/mongoc-cluster.c          |   9 ++-
 mongoc/mongoc-cursor-private.h   |   1 +
 mongoc/mongoc-cursor.c           | 123 +++++++++++++++++++-----------
 mongoc/mongoc-error.h            |   1 +
 mongoc/mongoc-gridfs-file.c      |   4 +-
 mongoc/mongoc-gridfs-file.h      |   2 +-
 mongoc/mongoc-gridfs.c           |   2 +-
 tests/test-mongoc-client.c       | 158 +++++++++++++++++++++++++++++++++++++++
 tests/test-mongoc-gridfs.c       |   6 +-
 14 files changed, 279 insertions(+), 57 deletions(-)

commit b0df529b527840f1d56ac034f167260eb4f02f5d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Dec 3 12:28:50 2013 -0800

    cursor: cleanup some gcc warnings.

 mongoc/mongoc-cursor-array-private.h    |  7 ++++++-
 mongoc/mongoc-cursor-array.c            | 18 +++++++++---------
 mongoc/mongoc-cursor-cursorid-private.h |  7 ++++++-
 mongoc/mongoc-cursor-cursorid.c         | 16 ++++++++--------
 4 files changed, 29 insertions(+), 19 deletions(-)

commit a5203e19b10d129ae68a25f4030bfaf2ec7f8672
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Wed Nov 27 12:12:24 2013 -0500

    removal of aggregate_legacy + new cursor interface
    
    o made aggregate work for wire_version 0 or 2
    o Added in mongoc_cursor_interface_t and a synthetic cursor stub to
      handle the aggregate modes.

 doc/mongoc_api.txt                         |  14 ---
 doc/mongoc_collection_aggregate.txt        |  28 ++---
 doc/mongoc_collection_aggregate_legacy.txt |   1 -
 doc/mongoc_symbols.txt                     | 142 ------------------------
 mongoc/Makefile.include                    |   4 +
 mongoc/libmongoc.symbols                   |   1 -
 mongoc/mongoc-cluster.c                    |  16 +--
 mongoc/mongoc-collection.c                 | 100 ++++++-----------
 mongoc/mongoc-collection.h                 |   6 -
 mongoc/mongoc-cursor-array-private.h       |  33 ++++++
 mongoc/mongoc-cursor-array.c               | 169 +++++++++++++++++++++++++++++
 mongoc/mongoc-cursor-cursorid-private.h    |  33 ++++++
 mongoc/mongoc-cursor-cursorid.c            | 144 ++++++++++++++++++++++++
 mongoc/mongoc-cursor-private.h             |  56 +++++++++-
 mongoc/mongoc-cursor.c                     | 104 +++++++++++++++++-
 tests/test-mongoc-collection.c             |  71 ++----------
 16 files changed, 599 insertions(+), 323 deletions(-)

commit 92869cec985ce36fa14686ca0d9ef53e4bd1e0d4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Dec 2 14:02:19 2013 -0800

    client: close urandom fd after seeding rand.

 tests/test-mongoc-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit 31684396788cb5bf9da9112f7054d6acf2411eee
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Dec 2 12:01:10 2013 -0800

    cluster: add debug message when unexpectingly connecting to sharded cluster

 mongoc/mongoc-cluster.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 7a07846831f1783c4d3d040c585a22b462348eb0
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Tue Nov 26 14:52:43 2013 -0500

    mongoc_stream documentation and final cleanup

 configure.ac                           |   3 +
 doc/Makefile.include                   |  32 +--
 doc/mongoc.txt                         |  43 ++++
 doc/mongoc_api                         |  14 ++
 doc/mongoc_api.txt                     |  14 ++
 doc/mongoc_client_pool_t.md            | 146 -------------
 doc/mongoc_client_t.md                 | 361 ---------------------------------
 doc/mongoc_cursor_t.md                 | 118 -----------
 doc/mongoc_ssl.txt                     |  96 +++++++++
 doc/mongoc_ssl_opt_get_default.txt     |  43 +++-
 doc/mongoc_stream.txt                  |  94 +++++++++
 doc/mongoc_stream_buffered_new.txt     |  50 ++++-
 doc/mongoc_stream_close.txt            |  45 +++-
 doc/mongoc_stream_cork.txt             |  48 ++++-
 doc/mongoc_stream_destroy.txt          |  41 +++-
 doc/mongoc_stream_flush.txt            |  49 ++++-
 doc/mongoc_stream_gridfs_new.txt       |  48 ++++-
 doc/mongoc_stream_read.txt             |  71 ++++++-
 doc/mongoc_stream_readv.txt            |  72 ++++++-
 doc/mongoc_stream_setsockopt.txt       |  51 ++++-
 doc/mongoc_stream_tls_check_cert.txt   |  52 ++++-
 doc/mongoc_stream_tls_do_handshake.txt |  53 ++++-
 doc/mongoc_stream_tls_new.txt          |  55 ++++-
 doc/mongoc_stream_uncork.txt           |  46 ++++-
 doc/mongoc_stream_unix_new.txt         |  48 ++++-
 doc/mongoc_stream_writev.txt           |  68 ++++++-
 doc/mongoc_symbols.txt                 | 142 +++++++++++++
 doc/todo.txt                           |  39 ----
 examples/mongoc-rpc-validate.c         |   1 +
 mongoc/mongoc-stream-buffered.c        |   1 +
 mongoc/mongoc-stream-gridfs.c          |   1 +
 mongoc/mongoc-stream-gridfs.h          |   1 +
 mongoc/mongoc-stream-private.h         |  56 +++++
 mongoc/mongoc-stream-tls.c             |   1 +
 mongoc/mongoc-stream-unix.c            |   1 +
 mongoc/mongoc-stream.c                 |   1 +
 mongoc/mongoc-stream.h                 |  25 ---
 37 files changed, 1311 insertions(+), 719 deletions(-)

commit 7b173929cf48061f4e86f5a766bf6b181ae2510a
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Mon Nov 25 12:10:36 2013 -0500

    read pref, write concern, log, init and index docs
    
    Added a bunch more documentation

 doc/Makefile.include                       |   4 +-
 doc/mongoc_client_get_write_concern.txt    |   4 +-
 doc/mongoc_client_set_ssl_opts.txt         |   2 +-
 doc/mongoc_collection_aggregate.txt        |   2 +-
 doc/mongoc_collection_count.txt            |   2 +-
 doc/mongoc_collection_find.txt             |   2 +-
 doc/mongoc_collection_get_read_prefs.txt   |   4 +-
 doc/mongoc_collection_insert.txt           |   2 +-
 doc/mongoc_database_get_write_concern.txt  |   4 +-
 doc/mongoc_index_opt_get_default.txt       | 138 ++++++++++++++++++++++++++++-
 doc/mongoc_index_opt_init.txt              |   2 +-
 doc/mongoc_init.txt                        |  58 +++++++++++-
 doc/mongoc_log.txt                         |  94 +++++++++++++++++++-
 doc/mongoc_log_set_handler.txt             |  50 ++++++++++-
 doc/mongoc_read_prefs.txt                  | 108 ++++++++++++++++++++++
 doc/mongoc_read_prefs_add_tag.txt          |  44 ++++++++-
 doc/mongoc_read_prefs_copy.txt             |  43 ++++++++-
 doc/mongoc_read_prefs_destroy.txt          |  41 ++++++++-
 doc/mongoc_read_prefs_get_mode.txt         |  52 ++++++++++-
 doc/mongoc_read_prefs_get_tags.txt         |   2 +-
 doc/mongoc_read_prefs_is_valid.txt         |  43 ++++++++-
 doc/mongoc_read_prefs_new.txt              |  44 ++++++++-
 doc/mongoc_read_prefs_set_mode.txt         |   2 +-
 doc/mongoc_read_prefs_set_tags.txt         |   2 +-
 doc/mongoc_uri.txt                         |   2 +-
 doc/mongoc_uri_get_hosts.txt               |  20 ++---
 doc/mongoc_uri_get_read_preferences.txt    |   1 -
 doc/mongoc_uri_get_read_prefs.txt          |   1 +
 doc/mongoc_write_concern.txt               | 108 ++++++++++++++++++++++
 doc/mongoc_write_concern_copy.txt          |  43 ++++++++-
 doc/mongoc_write_concern_destroy.txt       |  42 ++++++++-
 doc/mongoc_write_concern_get_fsync.txt     |  62 ++++++++++++-
 doc/mongoc_write_concern_get_journal.txt   |   2 +-
 doc/mongoc_write_concern_get_w.txt         |   2 +-
 doc/mongoc_write_concern_get_wmajority.txt |   2 +-
 doc/mongoc_write_concern_get_wtimeout.txt  |   2 +-
 doc/mongoc_write_concern_new.txt           |  43 ++++++++-
 doc/mongoc_write_concern_set_fsync.txt     |   2 +-
 doc/mongoc_write_concern_set_journal.txt   |   2 +-
 doc/mongoc_write_concern_set_w.txt         |   2 +-
 doc/mongoc_write_concern_set_wmajority.txt |   2 +-
 doc/mongoc_write_concern_set_wtimeout.txt  |   2 +-
 mongoc/Makefile.include                    |   1 +
 mongoc/libmongoc.symbols                   |   3 +-
 mongoc/mongoc-cluster.c                    |   3 +-
 mongoc/mongoc-host-list-private.h          |  36 ++++++++
 mongoc/mongoc-host-list.h                  |   5 --
 mongoc/mongoc-log.h                        |  14 +--
 mongoc/mongoc-uri.c                        |   6 +-
 mongoc/mongoc-uri.h                        |   2 +-
 mongoc/mongoc-write-concern.h              |   2 +
 tests/test-mongoc-uri.c                    |   6 +-
 52 files changed, 1095 insertions(+), 72 deletions(-)

commit dc0dc3e0641bd1944f0bff163ac6e62c93a207ba
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Fri Nov 22 10:34:11 2013 -0500

    cursor and gridfs documentation
    
    also:
    * changes to the gridfs api to make it complete

 .gitignore                                    |   2 +
 doc/Makefile.include                          |  36 ++++++--
 doc/mongoc_cursor.txt                         | 101 +++++++++++++++++++++++
 doc/mongoc_cursor_clone.txt                   |  46 ++++++++++-
 doc/mongoc_cursor_destroy.txt                 |  42 +++++++++-
 doc/mongoc_cursor_error.txt                   |  44 +++++++++-
 doc/mongoc_cursor_get_host.txt                |  55 ++++++++++++-
 doc/mongoc_cursor_more.txt                    |  44 +++++++++-
 doc/mongoc_cursor_next.txt                    |  66 ++++++++++++++-
 doc/mongoc_gridfs.txt                         |  92 +++++++++++++++++++++
 doc/mongoc_gridfs_create_file.txt             |  72 +++++++++++++++-
 doc/mongoc_gridfs_create_file_from_stream.txt |   2 +-
 doc/mongoc_gridfs_destroy.txt                 |  52 +++++++++++-
 doc/mongoc_gridfs_drop.txt                    |  49 ++++++++++-
 doc/mongoc_gridfs_file.txt                    |  95 +++++++++++++++++++++
 doc/mongoc_gridfs_file_destroy.txt            |  45 +++++++++-
 doc/mongoc_gridfs_file_error.txt              |  43 ++++++++++
 doc/mongoc_gridfs_file_get_aliases.txt        |  59 ++++++++++++-
 doc/mongoc_gridfs_file_get_chunk_size.txt     |   1 +
 doc/mongoc_gridfs_file_get_content_type.txt   |   2 +-
 doc/mongoc_gridfs_file_get_filename.txt       |   2 +-
 doc/mongoc_gridfs_file_get_length.txt         |   1 +
 doc/mongoc_gridfs_file_get_md5.txt            |   2 +-
 doc/mongoc_gridfs_file_get_metadata.txt       |   2 +-
 doc/mongoc_gridfs_file_get_upload_date.txt    |   1 +
 doc/mongoc_gridfs_file_list.txt               |  76 +++++++++++++++++
 doc/mongoc_gridfs_file_list_destroy.txt       |  45 +++++++++-
 doc/mongoc_gridfs_file_list_error.txt         |  43 ++++++++++
 doc/mongoc_gridfs_file_list_next.txt          |  60 +++++++++++++-
 doc/mongoc_gridfs_file_readv.txt              |  94 ++++++++++++++++++++-
 doc/mongoc_gridfs_file_save.txt               |  44 +++++++++-
 doc/mongoc_gridfs_file_seek.txt               |  77 ++++++++++++++++-
 doc/mongoc_gridfs_file_set_aliases.txt        |   2 +-
 doc/mongoc_gridfs_file_set_content_type.txt   |   2 +-
 doc/mongoc_gridfs_file_set_filename.txt       |   2 +-
 doc/mongoc_gridfs_file_set_md5.txt            |   2 +-
 doc/mongoc_gridfs_file_set_metadata.txt       |   2 +-
 doc/mongoc_gridfs_file_tell.txt               |   1 +
 doc/mongoc_gridfs_file_writev.txt             |   2 +-
 doc/mongoc_gridfs_find.txt                    |  68 ++++++++++++++-
 doc/mongoc_gridfs_find_one.txt                |   2 +-
 doc/mongoc_gridfs_find_one_by_filename.txt    |   2 +-
 examples/Makefile.include                     |   6 ++
 examples/example-gridfs.c                     | 114 ++++++++++++++++++++++++++
 mongoc/libmongoc.symbols                      |   6 ++
 mongoc/mongoc-gridfs-file-list.c              |   8 ++
 mongoc/mongoc-gridfs-file-list.h              |   4 +
 mongoc/mongoc-gridfs-file-private.h           |   3 +-
 mongoc/mongoc-gridfs-file.c                   |  59 ++++++++++++-
 mongoc/mongoc-gridfs-file.h                   |  17 +++-
 mongoc/mongoc-gridfs.c                        |   9 +-
 mongoc/mongoc-gridfs.h                        |   6 +-
 mongoc/mongoc-stream-unix.c                   |   9 +-
 tests/test-mongoc-gridfs.c                    |  10 ++-
 54 files changed, 1678 insertions(+), 53 deletions(-)

commit 2e05df244bbbb535e885e4c31a2601f23b0c4de4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 22 14:42:04 2013 -0800

    examples: add example of internal API to validate an RPC.

 .gitignore                     |   3 +-
 examples/Makefile.include      |   6 +++
 examples/mongoc-rpc-validate.c | 108 +++++++++++++++++++++++++++++++++++++++++
 3 files changed, 116 insertions(+), 1 deletion(-)

commit b6898f01366b6cf7a5bb83cdf57339f5ab18bdcc
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Mon Nov 18 15:51:09 2013 -0500

    Beginning of documenting everything
    
    a bunch of docs aren't done, symlinked to a todo.txt to make the build
    happy

 .gitignore                                     |   1 +
 Makefile.am                                    |   1 +
 acinclude.m4                                   |  44 +++++
 configure.ac                                   |  17 ++
 doc/.gitignore                                 |   3 +
 doc/Makefile.include                           |  48 ++++++
 doc/asciidoc.conf                              |  51 ++++++
 doc/mongoc_client.txt                          |  98 +++++++++++
 doc/mongoc_client_command.txt                  |  85 ++++++++++
 doc/mongoc_client_command_simple.txt           |   1 +
 doc/mongoc_client_destroy.txt                  |  40 +++++
 doc/mongoc_client_get_collection.txt           |  68 ++++++++
 doc/mongoc_client_get_database.txt             |   1 +
 doc/mongoc_client_get_gridfs.txt               |   1 +
 doc/mongoc_client_get_read_prefs.txt           |   1 +
 doc/mongoc_client_get_uri.txt                  |  42 +++++
 doc/mongoc_client_get_write_concern.txt        |  66 ++++++++
 doc/mongoc_client_new.txt                      |  50 ++++++
 doc/mongoc_client_new_from_uri.txt             |   1 +
 doc/mongoc_client_pool.txt                     |  88 ++++++++++
 doc/mongoc_client_pool_destroy.txt             |  41 +++++
 doc/mongoc_client_pool_new.txt                 |  43 +++++
 doc/mongoc_client_pool_pop.txt                 |  60 +++++++
 doc/mongoc_client_pool_push.txt                |   1 +
 doc/mongoc_client_pool_try_pop.txt             |   1 +
 doc/mongoc_client_set_read_prefs.txt           |   1 +
 doc/mongoc_client_set_ssl_opts.txt             |  45 +++++
 doc/mongoc_client_set_stream_initiator.txt     | 113 +++++++++++++
 doc/mongoc_client_set_write_concern.txt        |   1 +
 doc/mongoc_collection.txt                      |  83 +++++++++
 doc/mongoc_collection_aggregate.txt            |  69 ++++++++
 doc/mongoc_collection_aggregate_legacy.txt     |   1 +
 doc/mongoc_collection_command.txt              |  78 +++++++++
 doc/mongoc_collection_command_simple.txt       |   1 +
 doc/mongoc_collection_count.txt                |  55 ++++++
 doc/mongoc_collection_delete.txt               |  55 ++++++
 doc/mongoc_collection_destroy.txt              |  39 +++++
 doc/mongoc_collection_drop.txt                 |  48 ++++++
 doc/mongoc_collection_drop_index.txt           |  47 ++++++
 doc/mongoc_collection_ensure_index.txt         |  51 ++++++
 doc/mongoc_collection_find.txt                 |  83 +++++++++
 doc/mongoc_collection_get_read_prefs.txt       |  70 ++++++++
 doc/mongoc_collection_get_write_concern.txt    |   1 +
 doc/mongoc_collection_insert.txt               |  66 ++++++++
 doc/mongoc_collection_insert_bulk.txt          |   1 +
 doc/mongoc_collection_keys_to_index_string.txt |  47 ++++++
 doc/mongoc_collection_save.txt                 |  45 +++++
 doc/mongoc_collection_set_read_prefs.txt       |   1 +
 doc/mongoc_collection_set_write_concern.txt    |   1 +
 doc/mongoc_collection_update.txt               |  63 +++++++
 doc/mongoc_cursor_clone.txt                    |   1 +
 doc/mongoc_cursor_destroy.txt                  |   1 +
 doc/mongoc_cursor_error.txt                    |   1 +
 doc/mongoc_cursor_get_host.txt                 |   1 +
 doc/mongoc_cursor_more.txt                     |   1 +
 doc/mongoc_cursor_next.txt                     |   1 +
 doc/mongoc_database.txt                        |  75 +++++++++
 doc/mongoc_database_add_user.txt               |  58 +++++++
 doc/mongoc_database_command.txt                |  78 +++++++++
 doc/mongoc_database_command_simple.txt         |   1 +
 doc/mongoc_database_destroy.txt                |  39 +++++
 doc/mongoc_database_drop.txt                   |  48 ++++++
 doc/mongoc_database_get_read_prefs.txt         |   1 +
 doc/mongoc_database_get_write_concern.txt      |  70 ++++++++
 doc/mongoc_database_has_collection.txt         |  54 ++++++
 doc/mongoc_database_set_read_prefs.txt         |   1 +
 doc/mongoc_database_set_write_concern.txt      |   1 +
 doc/mongoc_gridfs_create_file.txt              |   1 +
 doc/mongoc_gridfs_create_file_from_stream.txt  |   1 +
 doc/mongoc_gridfs_destroy.txt                  |   1 +
 doc/mongoc_gridfs_drop.txt                     |   1 +
 doc/mongoc_gridfs_file_destroy.txt             |   1 +
 doc/mongoc_gridfs_file_get_aliases.txt         |   1 +
 doc/mongoc_gridfs_file_get_content_type.txt    |   1 +
 doc/mongoc_gridfs_file_get_filename.txt        |   1 +
 doc/mongoc_gridfs_file_get_md5.txt             |   1 +
 doc/mongoc_gridfs_file_get_metadata.txt        |   1 +
 doc/mongoc_gridfs_file_list_destroy.txt        |   1 +
 doc/mongoc_gridfs_file_list_next.txt           |   1 +
 doc/mongoc_gridfs_file_readv.txt               |   1 +
 doc/mongoc_gridfs_file_save.txt                |   1 +
 doc/mongoc_gridfs_file_seek.txt                |   1 +
 doc/mongoc_gridfs_file_set_aliases.txt         |   1 +
 doc/mongoc_gridfs_file_set_content_type.txt    |   1 +
 doc/mongoc_gridfs_file_set_filename.txt        |   1 +
 doc/mongoc_gridfs_file_set_md5.txt             |   1 +
 doc/mongoc_gridfs_file_set_metadata.txt        |   1 +
 doc/mongoc_gridfs_file_writev.txt              |   1 +
 doc/mongoc_gridfs_find.txt                     |   1 +
 doc/mongoc_gridfs_find_one.txt                 |   1 +
 doc/mongoc_gridfs_find_one_by_filename.txt     |   1 +
 doc/mongoc_host_list_from_string.txt           |   1 +
 doc/mongoc_index_opt_get_default.txt           |   1 +
 doc/mongoc_index_opt_init.txt                  |   1 +
 doc/mongoc_init.txt                            |   1 +
 doc/mongoc_log.txt                             |   1 +
 doc/mongoc_log_set_handler.txt                 |   1 +
 doc/mongoc_read_prefs_add_tag.txt              |   1 +
 doc/mongoc_read_prefs_copy.txt                 |   1 +
 doc/mongoc_read_prefs_destroy.txt              |   1 +
 doc/mongoc_read_prefs_get_mode.txt             |   1 +
 doc/mongoc_read_prefs_get_tags.txt             |   1 +
 doc/mongoc_read_prefs_is_valid.txt             |   1 +
 doc/mongoc_read_prefs_new.txt                  |   1 +
 doc/mongoc_read_prefs_set_mode.txt             |   1 +
 doc/mongoc_read_prefs_set_tags.txt             |   1 +
 doc/mongoc_ssl_opt_get_default.txt             |   1 +
 doc/mongoc_stream_buffered_new.txt             |   1 +
 doc/mongoc_stream_close.txt                    |   1 +
 doc/mongoc_stream_cork.txt                     |   1 +
 doc/mongoc_stream_destroy.txt                  |   1 +
 doc/mongoc_stream_flush.txt                    |   1 +
 doc/mongoc_stream_gridfs_new.txt               |   1 +
 doc/mongoc_stream_read.txt                     |   1 +
 doc/mongoc_stream_readv.txt                    |   1 +
 doc/mongoc_stream_setsockopt.txt               |   1 +
 doc/mongoc_stream_tls_check_cert.txt           |   1 +
 doc/mongoc_stream_tls_do_handshake.txt         |   1 +
 doc/mongoc_stream_tls_new.txt                  |   1 +
 doc/mongoc_stream_uncork.txt                   |   1 +
 doc/mongoc_stream_unix_new.txt                 |   1 +
 doc/mongoc_stream_writev.txt                   |   1 +
 doc/mongoc_uri.txt                             | 224 +++++++++++++++++++++++++
 doc/mongoc_uri_copy.txt                        |  39 +++++
 doc/mongoc_uri_destroy.txt                     |  39 +++++
 doc/mongoc_uri_get_auth_source.txt             |   1 +
 doc/mongoc_uri_get_database.txt                |   1 +
 doc/mongoc_uri_get_hosts.txt                   |  50 ++++++
 doc/mongoc_uri_get_options.txt                 |   1 +
 doc/mongoc_uri_get_password.txt                |   1 +
 doc/mongoc_uri_get_read_preferences.txt        |   1 +
 doc/mongoc_uri_get_replica_set.txt             |   1 +
 doc/mongoc_uri_get_string.txt                  |   1 +
 doc/mongoc_uri_get_username.txt                |   1 +
 doc/mongoc_uri_new.txt                         |  49 ++++++
 doc/mongoc_uri_new_for_host_port.txt           |   1 +
 doc/mongoc_uri_unescape.txt                    |  41 +++++
 doc/mongoc_write_concern_copy.txt              |   1 +
 doc/mongoc_write_concern_destroy.txt           |   1 +
 doc/mongoc_write_concern_get_fsync.txt         |   1 +
 doc/mongoc_write_concern_get_journal.txt       |   1 +
 doc/mongoc_write_concern_get_w.txt             |   1 +
 doc/mongoc_write_concern_get_wmajority.txt     |   1 +
 doc/mongoc_write_concern_get_wtimeout.txt      |   1 +
 doc/mongoc_write_concern_new.txt               |   1 +
 doc/mongoc_write_concern_set_fsync.txt         |   1 +
 doc/mongoc_write_concern_set_journal.txt       |   1 +
 doc/mongoc_write_concern_set_w.txt             |   1 +
 doc/mongoc_write_concern_set_wmajority.txt     |   1 +
 doc/mongoc_write_concern_set_wtimeout.txt      |   1 +
 doc/todo.txt                                   |  39 +++++
 examples/Makefile.include                      |   8 +
 examples/example-client.c                      |  55 ++++++
 mongoc/mongoc-client.c                         |   2 +-
 mongoc/mongoc-collection.c                     |  32 +---
 mongoc/mongoc-collection.h                     |   4 +-
 mongoc/mongoc-database-private.h               |   6 +-
 mongoc/mongoc-database.c                       |  53 ++----
 tests/test-mongoc-client.c                     |   4 +-
 tests/test-mongoc-collection.c                 |  37 ++++
 160 files changed, 3031 insertions(+), 78 deletions(-)

commit d4c1abc1404d0c968629b9ac11ac0d908696a3aa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 13:30:35 2013 -0800

    collection: wrap mongoc_client_command() and mongoc_client_command_simple().
    
    This simplifies our command handling so that it is all done in
    mongoc_client_t. However, the error unwrapping is part of
    mongoc_cursor_t, which is tied in with regular query failure handling.

 mongoc/mongoc-collection.c | 91 +++++++++++-----------------------------------
 1 file changed, 21 insertions(+), 70 deletions(-)

commit 02c16acac86995b601e7a6f4f7ee9e98dfac47ca
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 13:24:49 2013 -0800

    tests: add database test case for failed command.

 tests/test-mongoc-database.c | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit ca9f07c4a6ac178250190aee8f70c673e09a94c8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 13:24:31 2013 -0800

    errors: add error 59, for unknown command.

 mongoc/mongoc-error.h | 1 +
 1 file changed, 1 insertion(+)

commit a5eba6e3b304ac7443435cf3bdd124c296e25562
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 13:24:19 2013 -0800

    cursor: unwrap errmsg from failed command execution.

 mongoc/mongoc-cursor.c | 24 +++++++++++++++---------
 1 file changed, 15 insertions(+), 9 deletions(-)

commit f437f6d7efb551e8297261e5b0e5204b4dcb4a4c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 13:12:50 2013 -0800

    database: change API for command_simple to match client.

 mongoc/mongoc-database.c     | 51 +++++++++++---------------------------------
 mongoc/mongoc-database.h     |  2 ++
 tests/test-mongoc-database.c | 24 +++++++++++++++++++++
 3 files changed, 38 insertions(+), 39 deletions(-)

commit 161367c933b41471a7cb6dc6e7cb2bae276fdd4e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 13:12:19 2013 -0800

    client: add mongoc_client_command_simple() to API/ABI.
    
    Add simple command execution helper that can be used by database and
    collection.

 mongoc/libmongoc.symbols |  1 +
 mongoc/mongoc-client.c   | 63 ++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-client.h   |  8 ++++++
 3 files changed, 72 insertions(+)

commit 2fce142c53db0976b15eda80740f721f4ce99eb7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 12:43:17 2013 -0800

    tests: release cursor when we have finished with it.

 tests/test-mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit 22a5ecb2553ed8391df0ba7c2b941d311fed0ef6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 12:43:07 2013 -0800

    database: wrap mongoc_client_command() from mongoc_database_t.

 mongoc/mongoc-database.c     | 25 +++++++++++--------------
 mongoc/mongoc-database.h     |  2 +-
 tests/test-mongoc-database.c | 36 ++++++++++++++++++++++++++++++++++++
 3 files changed, 48 insertions(+), 15 deletions(-)

commit c6c078d76904e3c70f11c93b2e7d3dba3c15dae2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 12:34:39 2013 -0800

    client: add mongoc_client_command() to API/ABI.
    
    We should restructure the other wrappers to use this.

 mongoc/libmongoc.symbols   |  1 +
 mongoc/mongoc-client.c     | 29 +++++++++++++++++++++++++++++
 mongoc/mongoc-client.h     | 11 +++++++++++
 tests/test-mongoc-client.c | 30 ++++++++++++++++++++++++++++++
 4 files changed, 71 insertions(+)

commit a6cb64372f6d3f688fb77aa9fc1d75fb551220a6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 21 12:34:12 2013 -0800

    counters: use bson_sync_synchronize() for memory barrier.

 mongoc/mongoc-counters-private.h | 2 +-
 mongoc/mongoc-counters.c         | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 4b4af1a470f0c7be1106936d02b2c2615008e343
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 20 12:42:07 2013 -0800

    build: bump version to 0.89.0.

 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 197a3fff1ec5a6d969816975601caac1ce75b6c1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 20 12:05:15 2013 -0800

    build: fix make distcheck.

 configure.ac            |  2 +-
 mongoc/Makefile.include | 15 +++++++++++++--
 tests/Makefile.include  |  5 +++++
 3 files changed, 19 insertions(+), 3 deletions(-)

commit 1bf6b963e57ceaeb99c94f0c6ef441abf612eefc
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 20 11:53:12 2013 -0800

    tests: add hook to specify if a test has been skipped.
    
    This is totally janky, but so is the entire testing system.

 tests/mongoc-tests.h       | 7 ++++++-
 tests/test-mongoc-client.c | 1 +
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 994c44748bd99bb4ab901d6bcd5c51f695329b3a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 20 00:29:42 2013 -0800

    build: add libmongoc-ssl-1.0.pc
    
    This allows consumers to check for the presence of libmongoc, but require
    SSL support. The libraries are in fact the same, but libmongoc-ssl-1.0
    will only be present if the library was compiled with SSL support.
    
    If using autoconf, you can check with:
    
      PKG_CHECK_MODULES(MONGOC, [libmongoc-ssl-1.0])
    
    Fixes CDRIVER-260.

 Makefile.am                    |  3 +++
 configure.ac                   |  1 +
 mongoc/libmongoc-ssl-1.0.pc.in | 11 +++++++++++
 3 files changed, 15 insertions(+)

commit 5c62d97bc8efc854440b1ca3eb6114f898ea4b27
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 20 00:27:59 2013 -0800

    build: install generated mongoc-config.h

 mongoc/Makefile.include | 1 +
 1 file changed, 1 insertion(+)

commit 2e4933a57eb9608ca1573bbaab0f27f8b25def46
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 20 00:17:44 2013 -0800

    build: use mongoc-config.h.in for compile time options.
    
    This is how it is done in libbson as well. Just define them in there and
    use that throughout the public headers.

 configure.ac                   |   6 ++
 mongoc/.gitignore              |   3 +-
 mongoc/Makefile.include        | 188 ++++++++++++++++++-----------------------
 mongoc/libmongoc-base.symbols  | 100 ----------------------
 mongoc/libmongoc-ssl.symbols   |   3 -
 mongoc/libmongoc.symbols       | 135 +++++++++++++++++++++++++++++
 mongoc/mongoc-client-private.h |   7 +-
 mongoc/mongoc-client.c         |  23 ++---
 mongoc/mongoc-client.h         |  76 +++++++++++------
 mongoc/mongoc-config.h.in      |  34 ++++++++
 mongoc/mongoc-gridfs-file.c    |  28 +++---
 mongoc/mongoc-init.c           |   4 +-
 mongoc/mongoc-ssl.c            |  26 +++---
 mongoc/mongoc-ssl.h            |   4 +
 mongoc/mongoc.h                |   6 +-
 tests/ha-test.c                |  17 ++--
 tests/ha-test.h                |  29 +++----
 17 files changed, 379 insertions(+), 310 deletions(-)

commit febb42c18719e12f656cf0142b916af9456c65b0
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 23:00:04 2013 -0800

    array: prefix private functions with _.

 mongoc/mongoc-array-private.h | 26 +++++++++++++++++---------
 mongoc/mongoc-array.c         | 12 ++++++------
 mongoc/mongoc-cluster.c       | 16 ++++++++--------
 mongoc/mongoc-rpc.c           | 20 ++++++++++----------
 tests/mock-server.c           |  4 ++--
 tests/test-mock-server.c      |  4 ++--
 tests/test-mongoc-array.c     | 10 +++++-----
 tests/test-mongoc-rpc.c       | 18 +++++++++---------
 8 files changed, 59 insertions(+), 51 deletions(-)

commit 2b3b52cbe27b6987897bf517b6df6ac3ebb91a73
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 22:50:59 2013 -0800

    buffer: prefix private functions with _.

 mongoc/mongoc-buffer-private.h  | 48 +++++++++++++--------
 mongoc/mongoc-buffer.c          | 42 +++++++++---------
 mongoc/mongoc-client.c          |  4 +-
 mongoc/mongoc-cluster.c         | 22 +++++-----
 mongoc/mongoc-collection.c      | 96 +++++++++++++++++++----------------------
 mongoc/mongoc-cursor.c          | 10 ++---
 mongoc/mongoc-stream-buffered.c | 20 ++++-----
 tests/mock-server.c             |  6 +--
 tests/test-mongoc-buffer.c      | 14 +++---
 9 files changed, 135 insertions(+), 127 deletions(-)

commit 8a5ff9884accd380d483e9564546fd3a03a8b179
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 22:41:14 2013 -0800

    client-pool: format cleanup.

 mongoc/mongoc-client-pool.h | 21 +++++++++++++++------
 1 file changed, 15 insertions(+), 6 deletions(-)

commit 93648922075a1be4868e7a480c9e578dfad75589
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 22:39:49 2013 -0800

    client: prefix private functions with _.

 mongoc/mongoc-client-private.h |  53 ++++++++---------
 mongoc/mongoc-client.c         | 127 +++++++++++++++++++++--------------------
 mongoc/mongoc-cluster.c        |  10 ++--
 mongoc/mongoc-collection.c     |  21 +++----
 mongoc/mongoc-cursor.c         |  32 +++++------
 5 files changed, 123 insertions(+), 120 deletions(-)

commit 23ef55c96080f5aa7ba166bff3364e06c2e9f49b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 22:24:20 2013 -0800

    cluster: prefix private functions with _.

 mongoc/mongoc-client.c          |  84 +++---
 mongoc/mongoc-cluster-private.h |  62 ++--
 mongoc/mongoc-cluster.c         | 632 +++++++++++++++++++---------------------
 3 files changed, 379 insertions(+), 399 deletions(-)

commit 2e912506028081a526f7dd2a7029ac204f2e4f10
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 21:20:52 2013 -0800

    collection: prefix private functions with _.

 mongoc/mongoc-collection-private.h |   3 +-
 mongoc/mongoc-collection.c         | 135 +++++++++++++++++++++++--------------
 2 files changed, 85 insertions(+), 53 deletions(-)

commit c98d860918d014931a729b3b2de1cbd4ba421a8c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 21:19:44 2013 -0800

    index: use default function instead of global extern.

 mongoc/mongoc-index.c | 25 +++++++++++++++----------
 mongoc/mongoc-index.h | 14 ++++++++++----
 2 files changed, 25 insertions(+), 14 deletions(-)

commit 97fee535aa0b108cb0ccac051ff177a9bf397020
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 21:00:21 2013 -0800

    cursor: prefix private functions with _.

 mongoc/mongoc-collection.c     |  8 +++----
 mongoc/mongoc-cursor-private.h | 21 ++++++++--------
 mongoc/mongoc-cursor.c         | 54 +++++++++++++++++++++---------------------
 mongoc/mongoc-database.c       |  8 +++----
 tests/test-mongoc-cursor.c     |  8 +++----
 5 files changed, 50 insertions(+), 49 deletions(-)

commit 8a77796c55865f67fa311ed50ce234eeabcbc8c2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:43:06 2013 -0800

    database: prefix private functions with _.

 mongoc/mongoc-client.c           |  2 +-
 mongoc/mongoc-database-private.h |  6 +++--
 mongoc/mongoc-database.c         | 54 +++++++++++++++++++---------------------
 3 files changed, 31 insertions(+), 31 deletions(-)

commit 8fc08948537aea7a1a9c690b5d036c57fdb6d4aa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:39:56 2013 -0800

    gridfs-file: prefix private functions with _.

 mongoc/mongoc-gridfs-file-list.c    |  2 +-
 mongoc/mongoc-gridfs-file-private.h | 19 +++++++++++++------
 mongoc/mongoc-gridfs-file.c         | 19 +++++++++++++------
 mongoc/mongoc-gridfs.c              |  4 ++--
 4 files changed, 29 insertions(+), 15 deletions(-)

commit 63e2c39137266704faf60eaabc6319be75f576a1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:36:51 2013 -0800

    gridfs: prefix private functions with _.

 mongoc/mongoc-gridfs-file-page-private.h | 52 +++++++++++++++-------------
 mongoc/mongoc-gridfs-file-page.c         | 37 ++++++++++----------
 mongoc/mongoc-gridfs-file.c              | 26 +++++++-------
 mongoc/mongoc-stream-gridfs.c            | 52 ++++++++++++++--------------
 tests/test-mongoc-gridfs-file-page.c     | 58 ++++++++++++++++----------------
 5 files changed, 117 insertions(+), 108 deletions(-)

commit c1c3682242a37268723aa5085249e7f9cd348198
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:27:23 2013 -0800

    gridfs-file-list: prefix private functions with _.

 mongoc/mongoc-gridfs-file-list-private.h | 11 ++++++++---
 mongoc/mongoc-gridfs-file-list.c         | 14 ++++++++------
 mongoc/mongoc-gridfs-file-list.h         |  5 +++++
 mongoc/mongoc-gridfs.c                   |  4 ++--
 4 files changed, 23 insertions(+), 11 deletions(-)

commit 041d80215a91334069fb58a5c1cc5605b206d6d7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:24:18 2013 -0800

    gridfs: prefix private functions with _.

 mongoc/mongoc-gridfs-private.h |  3 ++-
 mongoc/mongoc-gridfs.c         | 13 ++++++++-----
 2 files changed, 10 insertions(+), 6 deletions(-)

commit 10501e8ac3d4f8f72ad56f4c12812155981fecfb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:18:39 2013 -0800

    list: prefix private functions with _.

 mongoc/mongoc-cluster.c      | 10 +++++-----
 mongoc/mongoc-list-private.h | 33 +++++++++++++++++++++++----------
 mongoc/mongoc-list.c         | 20 ++++++++++----------
 tests/test-mongoc-list.c     | 18 +++++++++---------
 4 files changed, 47 insertions(+), 34 deletions(-)

commit e28fbb2f2788493cf9852ceaa349acaf1e178297
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:15:51 2013 -0800

    queue: prefix private functions with _.

 mongoc/mongoc-client-pool.c   | 10 +++++-----
 mongoc/mongoc-queue-private.h | 23 ++++++++++++-----------
 mongoc/mongoc-queue.c         | 19 +++++++++++--------
 tests/test-mongoc-queue.c     | 28 ++++++++++++++--------------
 4 files changed, 42 insertions(+), 38 deletions(-)

commit 9828cf2991249da7849348bbc533344b8edae9aa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:13:21 2013 -0800

    read-prefs: seti visibility hidden on private functions.

 mongoc/mongoc-read-prefs-private.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 27182e3887ff8392b99706a768109835b8c51f17
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 18:12:15 2013 -0800

    rpc: Prefix private functions with _.

 mongoc/mongoc-client.c      |   4 +-
 mongoc/mongoc-cluster.c     |  35 ++++++------
 mongoc/mongoc-cursor.c      |   4 +-
 mongoc/mongoc-rpc-private.h |  50 ++++++++++++------
 mongoc/mongoc-rpc.c         | 126 +++++++++++++++++++++++---------------------
 tests/mock-server.c         |   8 +--
 tests/test-mock-server.c    |   4 +-
 tests/test-mongoc-rpc.c     |  40 +++++++-------
 8 files changed, 148 insertions(+), 123 deletions(-)

commit 8775ca0fb50b19429419a077f8506579ff003faa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 17:55:58 2013 -0800

    ssl: prefix private functions with _.

 mongoc/mongoc-init.c        |   2 +-
 mongoc/mongoc-ssl-private.h |  17 ++--
 mongoc/mongoc-ssl.c         |  44 +++++-----
 mongoc/mongoc-stream-tls.c  | 195 ++++++++++++++++++++++++--------------------
 4 files changed, 143 insertions(+), 115 deletions(-)

commit 30822bedbccfc3778c3f622611dd6a4f2b6a33c7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 17:51:48 2013 -0800

    util: prefix private functions with _.

 mongoc/mongoc-cluster.c      | 4 ++--
 mongoc/mongoc-database.c     | 2 +-
 mongoc/mongoc-util-private.h | 4 +++-
 mongoc/mongoc-util.c         | 2 +-
 4 files changed, 7 insertions(+), 5 deletions(-)

commit a77eed08392b73704c97e8eafcd6e8b0dc8e7489
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 17:33:46 2013 -0800

    write-concern: hide visibility of private functions.

 mongoc/mongoc-cluster.c               |  4 ++--
 mongoc/mongoc-collection.c            |  6 +++---
 mongoc/mongoc-write-concern-private.h |  9 +++++++--
 mongoc/mongoc-write-concern.c         | 16 ++++++++--------
 tests/test-mongoc-write-concern.c     |  2 +-
 tests/test-replica-set.c              |  2 +-
 6 files changed, 22 insertions(+), 17 deletions(-)

commit a1ecc8ec57fffdf9b4b5d476bfc1629cceaef8c6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 14:39:54 2013 -0800

    collection: add _id in mongoc_collection_insert().

 mongoc/mongoc-collection.c | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

commit 967a6ff770e29f761c8b7fa0aff51da929cae937
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 14:02:52 2013 -0800

    abi: fix symbol name.

 mongoc/libmongoc-base.symbols | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b214621dc1c93795ca0d30f7c04d27d4286fc7e5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 13:56:54 2013 -0800

    tests: add test for $readPreference in queries to mongos.

 tests/test-mongoc-client.c | 143 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 143 insertions(+)

commit 00e210e8892b5787f8094b1903b071c0ade77929
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 13:56:30 2013 -0800

    mock-server: make reply_simple() usable from tests.

 tests/mock-server.c | 24 ++++++++++++++----------
 tests/mock-server.h |  5 +++++
 2 files changed, 19 insertions(+), 10 deletions(-)

commit cbab4a8c4ea9eff3e8978484258791c73f0f2483
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 13:34:10 2013 -0800

    read-prefs: add mongoc_read_prefs_add_tag() helper.
    
    Just a simple helper to allow building a tag at a time with read
    preferences.

 mongoc/libmongoc-base.symbols |  1 +
 mongoc/mongoc-read-prefs.c    | 23 +++++++++++++++++++++++
 mongoc/mongoc-read-prefs.h    |  2 ++
 3 files changed, 26 insertions(+)

commit 98226062de890c8aa29b53c60f1164e7beb87060
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 13:32:42 2013 -0800

    mock-server: make socket reading a bit more resilient.

 tests/mock-server.c | 42 +++++++++++++++++++++++++++++++++++++-----
 1 file changed, 37 insertions(+), 5 deletions(-)

commit 05a9b132737cb6f097ee6b8639586d99a1f382bc
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 12:29:26 2013 -0800

    cursor: read prefs are flags, not an enum.
    
    Use a switch for a lookup table since we use bit flags to efficiently
    do checks on read mode (rather than a plain enum).

 mongoc/mongoc-cursor.c | 31 +++++++++++++++++++++----------
 1 file changed, 21 insertions(+), 10 deletions(-)

commit 079ccc7b1fc3a34c4720878897c3955152897b6b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 19 11:15:43 2013 -0800

    cursor: use $query and $readPreference in query if necessary.
    
    If we are potentially sending to a secondary, we might need to include
    $readPreference based on the read mode.
    
    Primary and secondaryPreferred without tags do not require this.
    
    See DRIVERS-63.

 mongoc/mongoc-cursor.c | 50 +++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 43 insertions(+), 7 deletions(-)

commit 518457718fd84f6937e440edf4f5dba575bbb98c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 18 19:03:17 2013 -0800

    client: warm up client to determine wire-version to use.
    
    This will help with situations where we need to do an insert but do
    not yet know what our negotiated wire version is.
    
    Functions needing to know the wire-version should first call the
    private _mongoc_client_warm_up() function.
    
    It will either result in a failure, (and error set), or TRUE indicating
    success and client->cluster.wire_version is valid.

 mongoc/mongoc-client-private.h |  5 +++++
 mongoc/mongoc-client.c         | 21 +++++++++++++++++++++
 mongoc/mongoc-collection.c     | 24 +++++++++++++++++++-----
 mongoc/mongoc-cursor.c         | 10 ++++++++++
 4 files changed, 55 insertions(+), 5 deletions(-)

commit f0f0e11f857602181324857e125ea51f9ff841d5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 18 19:01:49 2013 -0800

    cluster: add _mongoc_cluster_command_early().
    
    This is meant for sending a command before the cluster has been
    initialized. It forces the cluster to start-up and executes the
    command.
    
    The error value can be used to notify the call chain of connection
    failure.
    
    This is primarily meant for mongoc_client_warm_up() and may not be
    useful in other scenarios where we have already connected.

 mongoc/mongoc-cluster-private.h |  8 ++++++++
 mongoc/mongoc-cluster.c         | 32 ++++++++++++++++++++++++++++++++
 2 files changed, 40 insertions(+)

commit 77b33f77cbc766bcd79c20e2ee2f10ac025fb1e5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 18 15:57:58 2013 -0800

    stat: do positioned read for shared memory size.
    
    This means we don't need to do a double mmap() and also means we can
    handle an incomplete set up shared memory area.

 tools/mongoc-stat.c | 21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)

commit 9d4933e12b0c917b129b113eea48e5fbb548d88c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 18 15:52:14 2013 -0800

    counters: add notes, don't allow readers to race.

 mongoc/mongoc-counters.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 143ed4c4b0535faf0e55b53c0f4a3a7f47979c2a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 18 14:55:05 2013 -0800

    counters: only increment n_counters after counter has been initialized.

 mongoc/mongoc-counters.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit aee8c65454ce61e300b23f24510e69ae6e6e4cdd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 18 14:49:38 2013 -0800

    counters: add function to reset counter.
    
    As requested by those consuming downstream.

 mongoc/mongoc-counters-private.h | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 202c87ba3e112bdd6a85fd329813f0359ae8bdc4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 15 17:08:47 2013 -0800

    client: format cleanup.

 mongoc/mongoc-client-private.h | 53 ++++++++++++++++++++++++++----------------
 1 file changed, 33 insertions(+), 20 deletions(-)

commit 82f068af6fcdb75a72986db8bf002cf768711662
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 15 15:25:06 2013 -0800

    tests: check for 2.5.x and ignore addUser.
    
    Once we have an implementation for this, we can re-enable checks.

 tests/test-mongoc-client.c | 66 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 66 insertions(+)

commit 937dceaa1a9fdd186e15bd3ff3eba32b6a51ced9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 15 15:10:02 2013 -0800

    cluster: perform auth after isMaster for sharded clusters.

 mongoc/mongoc-cluster.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 5997e2485ca1f826d144651bbf61f5f1887c49f1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 15 15:09:19 2013 -0800

    cluster: perform auth after isMaster for replicaSet members.

 mongoc/mongoc-cluster.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 7514136c9d4c92e44995a6787fedcee51b5a58d1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 15 15:03:45 2013 -0800

    database: modify mongoc_database_add_user() signature for forward compat.
    
    Let's change this before we move forward. We have not yet implemented
    CDRIVER-232, but we can stub out for it anyway.
    
    Legacy add_user test fails on 2.5.4, so a suplimental commit will
    check for that.

 mongoc/mongoc-database.c   | 56 +++++++++++++++++++++++++++++++++++++++++-----
 mongoc/mongoc-database.h   |  2 ++
 tests/test-mongoc-client.c |  2 +-
 3 files changed, 53 insertions(+), 7 deletions(-)

commit 405339e2aae4c9374814e2e30a2b7fc4fbc654bc
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Nov 14 17:23:16 2013 -0500

    bulk insert and IOVEC_ARRAY_FIELD rpc type
    
    added in mongoc_collection_insert_bulk (that takes an array of bson_t
    pointers and inserts them as part of one bulk insert.
    
    to support this, added in a mongoc_collection_insert_bulk_raw, which
    adds via a struct iovec *
    
    to support that, added in a IOVEC_ARRAY_FIELD rpc type, which allows for
    arbitrary trailing binary data
    
    Also, added in actually reading the gle reply for inserts to catch
    things like unique key violations.

 mongoc/libmongoc-base.symbols  |   1 +
 mongoc/mongoc-collection.c     | 188 ++++++++++++++++++++++++++++++++---------
 mongoc/mongoc-collection.h     |   7 ++
 mongoc/mongoc-error.h          |   1 +
 mongoc/mongoc-rpc-private.h    |   2 +
 mongoc/mongoc-rpc.c            |  36 ++++++++
 mongoc/op-insert.def           |   2 +-
 tests/mock-server.c            |   2 +
 tests/test-mongoc-collection.c |  91 +++++++++++++++++++-
 tests/test-mongoc-database.c   |   1 -
 tests/test-mongoc-rpc.c        |  43 +++++++---
 11 files changed, 317 insertions(+), 57 deletions(-)

commit 4c50c1b5768ba025c97a3ef19f4e6c6e4d76a614
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 15 14:08:41 2013 -0800

    cluster: wire version must be negotiated among all peers.
    
    We cannot maintain a wire-version per-connection. It should be negotiated
    among all of the cluster peers. If any of them do not fit into the shared
    range, we must fail the entire cluster.

 mongoc/mongoc-cluster-private.h | 75 ++++++++++++++++++++++++++---------------
 mongoc/mongoc-cluster.c         | 55 +++++++++++++++++++++---------
 mongoc/mongoc-collection.c      | 11 +++---
 tests/test-mongoc-collection.c  |  2 +-
 4 files changed, 93 insertions(+), 50 deletions(-)

commit 48362dcfde32fc991c5a45ba5dc0ef266095d9f8
Merge: 28efed7 007500a
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Fri Nov 15 10:43:46 2013 -0500

    Merge branch 'gridfs'
    
    Conflicts:
    	mongoc/Makefile.include

commit 28efed706520ec56eb303e7a9a35c6cee7adfee3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Nov 14 20:15:45 2013 -0800

    cluster: add support for sharded cluster configurations.
    
    This does a first crack at the reconnection strategy for connecting
    to sharded clusters. It is suboptimal in the reconnect case as it won't
    reuse connections, but we can get to that later. It actually isn't a
    big deal in the sharded cluster case since most uses will only connect
    to one sharded cluster.
    
    This includes some udpates to the testing code so that we can create an
    entire sharded cluster with two replica sets.
    
    We test with two routers (mongos) as well.

 mongoc/mongoc-cluster.c      | 116 +++++++++++++++++++++++++++++++++++--
 tests/ha-test.c              | 133 +++++++++++++++++++++++++++++++++++++++----
 tests/ha-test.h              |   6 ++
 tests/test-sharded-cluster.c |  30 ++++++++++
 4 files changed, 268 insertions(+), 17 deletions(-)

commit 752088f1c40e071f4207ed23345c5888a1742c4f
Merge: 6d46c7d 9901c37
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Nov 14 15:07:12 2013 -0500

    Merge branch 'tls'

commit 9901c370a2348460364c7e68fec9244d1efca3e1
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Nov 14 15:05:23 2013 -0500

    tls code review feedback integration
    
    Addressing a bunch of little stuff (typos, style, etc)

 .gitignore                     |  3 --
 mongoc/.gitignore              |  2 +
 mongoc/Makefile.include        |  3 ++
 mongoc/libmongoc-base.symbols  |  1 +
 mongoc/mongoc-client.c         | 24 +++++++----
 mongoc/mongoc-client.h         |  4 +-
 mongoc/mongoc-init-private.h   | 29 +++++++++++++
 mongoc/mongoc-init.c           | 35 +++++++++++++++
 mongoc/mongoc-init.h           | 30 +++++++++++++
 mongoc/mongoc-ssl-private.h    |  3 ++
 mongoc/mongoc-ssl.c            | 96 ++++++++++++++++++++++++++----------------
 mongoc/mongoc-ssl.h            |  6 +--
 mongoc/mongoc.h                |  1 +
 tests/.gitignore               |  1 +
 tests/test-mongoc-stream-tls.c |  2 +-
 tests/test-replica-set-ssl.c   |  2 +-
 16 files changed, 186 insertions(+), 56 deletions(-)

commit 6d46c7dc4ebc3f45eccad93fa995ce146ad4d4d4
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Wed Nov 13 17:47:52 2013 -0500

    added readme boiler plate support/bugs/security
    
    Adding in MongoDB standard:
    o Support / Feedback
    o Bugs / Feature Requests
    o Security Vulnerabilities

 README     |  2 +-
 README.md  |  5 -----
 README.rst | 39 +++++++++++++++++++++++++++++++++++++++
 3 files changed, 40 insertions(+), 6 deletions(-)

commit 9b9cbc4405192ee2cd9a3e072317a2071233620a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 13 17:50:38 2013 -0800

    tests: only sleep 5000 microseconds while we wait for thread to spin up.

 tests/test-mongoc-client.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 863172d54d65b3b32593fe2b42880e1bff6af84a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 13 17:44:36 2013 -0800

    tests: check the negotiated wire-version for expected failure mode.

 tests/test-mongoc-collection.c | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit 31ec8b625ebbb57dce65d04892e99fc687851242
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 13 16:39:00 2013 -0800

    tests: use / in regex test to verify there is no weirdness.

 tests/test-mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9d32ca9fe0777629ea9e655cdf992045be1ffd23
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 13 16:38:20 2013 -0800

    tests: test minWireVersion and maxWireVersion during connect process.

 mongoc/mongoc-cluster.c    |  6 ++--
 tests/Makefile.include     |  4 ++-
 tests/test-mongoc-client.c | 76 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 83 insertions(+), 3 deletions(-)

commit 6d8820760812065ace067d27bc305105c764c221
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Nov 13 16:37:40 2013 -0800

    tests: allow mock server to set wire version and run in thread.
    
    This will allow us to use the server from test code for basic things.
    If you want to specify a handler, you can even reply to your requests
    so that you can verify the response parsing.

 tests/mock-server.c | 190 ++++++++++++++++++++++++++++++++++++++++++++++++++--
 tests/mock-server.h |  20 +++---
 2 files changed, 198 insertions(+), 12 deletions(-)

commit 4ca18e3966a7a4d58d7b84355226fa9275312601
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Wed Nov 6 11:48:45 2013 -0500

    tls support
    
    o mongoc_stream_tls integration - takes a mongoc_stream and does ssl
      over it
    o mongoc-ssl - handles a bunch of interesting ssl features
      o CRL
      o common name verification
      o password protected pem's
      o rfc 6125 hostname verification

 .gitignore                     |   6 +
 mongoc/Makefile.include        |  37 +++-
 mongoc/libmongoc-base.symbols  |  96 +++++++++++
 mongoc/libmongoc-ssl.symbols   |   3 +
 mongoc/libmongoc.symbols       |  96 -----------
 mongoc/mongoc-client-private.h |   8 +
 mongoc/mongoc-client.c         |  81 +++++++--
 mongoc/mongoc-client.h         |  11 ++
 mongoc/mongoc-ssl-private.h    |  41 +++++
 mongoc/mongoc-ssl.c            | 371 +++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-ssl.h            |  44 +++++
 mongoc/mongoc-stream-tls.c     | 298 ++++++++++++++++++++++-----------
 mongoc/mongoc-stream-tls.h     |  14 +-
 mongoc/mongoc.h                |   7 +
 tests/Makefile.include         |  36 ++++
 tests/ha-test.c                | 114 +++++++++----
 tests/ha-test.h                |  39 +++--
 tests/make_ca.pl               | 128 ++++++++++++++
 tests/ssl-test.c               | 290 ++++++++++++++++++++++++++++++++
 tests/ssl-test.h               |  23 +++
 tests/test-mongoc-stream-tls.c | 271 ++++++++++++++++++++++++++++++
 tests/test-replica-set-ssl.c   | 105 ++++++++++++
 tests/trust_dir.cnf            |  84 ++++++++++
 23 files changed, 1941 insertions(+), 262 deletions(-)

commit 007500a1b9c54a7f7302e60b5b6bd03d080e5b14
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Wed Oct 30 15:21:32 2013 -0400

    Adding gridfs support
    
    Implements gridfs support in libmongoc
    
    o mongoc_client_get_gridfs
    o mongoc_gridfs_create_file_XXX
    o mongoc_gridfs_file_(read/write/seek)

 .gitignore                               |   2 +
 Makefile.am                              |   2 +
 mongoc/Makefile.include                  |  16 +
 mongoc/libmongoc.symbols                 |   1 +
 mongoc/mongoc-client.c                   |  43 ++
 mongoc/mongoc-client.h                   |   6 +
 mongoc/mongoc-collection-private.h       |   1 +
 mongoc/mongoc-collection.c               | 107 +++++
 mongoc/mongoc-collection.h               |   7 +
 mongoc/mongoc-gridfs-file-list-private.h |  44 ++
 mongoc/mongoc-gridfs-file-list.c         |  77 ++++
 mongoc/mongoc-gridfs-file-list.h         |  36 ++
 mongoc/mongoc-gridfs-file-page-private.h |  82 ++++
 mongoc/mongoc-gridfs-file-page.c         | 182 +++++++++
 mongoc/mongoc-gridfs-file-page.h         |  34 ++
 mongoc/mongoc-gridfs-file-private.h      |  69 ++++
 mongoc/mongoc-gridfs-file.c              | 669 +++++++++++++++++++++++++++++++
 mongoc/mongoc-gridfs-file.h              |  89 ++++
 mongoc/mongoc-gridfs-private.h           |  50 +++
 mongoc/mongoc-gridfs.c                   | 271 +++++++++++++
 mongoc/mongoc-gridfs.h                   |  66 +++
 mongoc/mongoc-index.c                    |  46 +++
 mongoc/mongoc-index.h                    |  48 +++
 mongoc/mongoc-stream-gridfs.c            | 164 ++++++++
 mongoc/mongoc-stream-gridfs.h            |  37 ++
 mongoc/mongoc.h                          |   6 +
 tests/Makefile.include                   |  14 +
 tests/binary/gridfs.dat                  |   9 +
 tests/test-mongoc-gridfs-file-page.c     | 211 ++++++++++
 tests/test-mongoc-gridfs.c               | 315 +++++++++++++++
 30 files changed, 2704 insertions(+)

commit b3a14a086382416a3e5cc397a5a0562e6092d62b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 12 18:41:16 2013 -0800

    cluster: stub out check for wire version.

 mongoc/mongoc-cluster-private.h |  2 ++
 mongoc/mongoc-cluster.c         | 25 +++++++++++++++++++++++++
 mongoc/mongoc-collection.c      | 27 +++++++++++++++++++++++++--
 3 files changed, 52 insertions(+), 2 deletions(-)

commit 6e6f2e2198bad2bfe4e8bdb339a64d5ede138ac4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 12 16:37:56 2013 -0800

    cluster: enforce supported wire versions when connecting to MongoDB.
    
    With the new write commands starting in 2.5.x, we need to negotiate
    the wire protocol version of the driver<->server. During isMaster,
    this will check the versions and fail the connection if we cannot
    speak an overlapping wire version.
    
    Fixes CDRIVER-245.

 mongoc/mongoc-cluster-private.h |  1 +
 mongoc/mongoc-cluster.c         | 44 +++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-error.h           |  1 +
 3 files changed, 46 insertions(+)

commit 211e987ba0c2771199a1c01fc486a57966daa509
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 12 15:49:21 2013 -0800

    collection: add test to query using regex.

 tests/test-mongoc-collection.c | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit d322dc27b2b9f273318d440cd251133b5a5b0cbb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 12 15:40:18 2013 -0800

    database: add mongoc_database_has_collection().
    
    This function can be used to check to see if the MongoDB server knows
    about a particular collection name.
    
    Be careful using this, however, as it could be racey. Another client
    could race to insert the first document into a collection, etc.
    
    This is performed by sending a query to "system.namespaces".
    
    If FALSE is returned, you should also check to see if error.domain is set
    to disambiguate between a failure and no-existance.

 .gitignore                   |  1 +
 mongoc/libmongoc.symbols     |  1 +
 mongoc/mongoc-database.c     | 73 +++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-database.h     |  3 ++
 tests/Makefile.include       |  7 ++++
 tests/test-mongoc-database.c | 81 ++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 166 insertions(+)

commit 675aeaed0c8a1808b0ec39768f2f304573bae70e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Nov 12 14:45:47 2013 -0800

    cluster: never send a message larger than isMaster.maxMessageSize.

 mongoc/mongoc-cluster.c | 26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)

commit fd19243c8c512dee5d8b580e19c291ba07ed4bdb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 11 18:37:16 2013 -0800

    cluster: track min and max wire version if available with isMaster.

 mongoc/mongoc-cluster-private.h |  2 ++
 mongoc/mongoc-cluster.c         | 10 ++++++++++
 2 files changed, 12 insertions(+)

commit b8ad674f1d29768e9d46bcd16e4e634b32af1a00
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Nov 11 13:52:21 2013 -0800

    tests: request child processes die upon parent process death.
    
    This helps if the parent process crashes, such as in test failure. It is,
    however, Linux only.

 tests/ha-test.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 66a1cd53fa043b7805627e18d7c99023e50a9464
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 8 17:05:04 2013 -0800

    ABI: mongoc_cursor_new() should not be in public ABI.

 mongoc/libmongoc.symbols | 1 -
 1 file changed, 1 deletion(-)

commit 3d12752c08553d41a0f786ab8d749541ec3e1584
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Nov 8 17:04:53 2013 -0800

    cursor: add mongoc_cursor_clone().
    
    This allows you to clone a cursor at any time and replay the cursor.
    No cursor state is cloned, so it is as if retrieving a fresh cursor.
    
    This fixes CDRIVER-204.

 mongoc/libmongoc.symbols       |  1 +
 mongoc/mongoc-cursor-private.h |  1 +
 mongoc/mongoc-cursor.c         | 35 ++++++++++++++++++++++++++++++++
 mongoc/mongoc-cursor.h         |  4 ++++
 tests/test-mongoc-cursor.c     | 46 ++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 87 insertions(+)

commit f617910329910926de3fd8596bc1c832b9cef075
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Nov 8 16:41:38 2013 -0800

    cursor: handle commands missing an "ok" field.
    
    Fixes CDRIVER-243.

 mongoc/mongoc-collection.c     |  4 +--
 mongoc/mongoc-cursor-private.h |  2 ++
 mongoc/mongoc-cursor.c         | 58 +++++++++++++++++++++++++++++++-----------
 mongoc/mongoc-database.c       |  7 +++--
 tests/test-mongoc-cursor.c     |  2 +-
 5 files changed, 51 insertions(+), 22 deletions(-)

commit d0100aa1a751df8f677c36030b866946762a3b7b
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Nov 7 15:09:30 2013 -0500

    Changed stream handling of min_bytes and timeout
    
    read changes
    o min_bytes is now always positive
    o only returns 0 on eof
    o unix streams poll at least once, even for min_bytes = 0
    
    read and write changes
    o timeouts can now be negative.  A negative timeout implies falling back
      to the default.  A 0 timeout now means an immediate timeout

 mongoc/mongoc-buffer-private.h  |  6 +++---
 mongoc/mongoc-buffer.c          |  8 ++++----
 mongoc/mongoc-stream-buffered.c |  6 +++---
 mongoc/mongoc-stream-tls.c      | 13 +++++-------
 mongoc/mongoc-stream-unix.c     | 24 +++++++---------------
 mongoc/mongoc-stream.c          | 44 ++++++++++++++++++++++-------------------
 mongoc/mongoc-stream.h          | 16 +++++++--------
 tests/test-mock-server.c        |  2 +-
 tests/test-mongoc-stream.c      |  4 ++--
 9 files changed, 57 insertions(+), 66 deletions(-)

commit 66dce623d27bb8a31139228d81a83cd27d164984
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Nov 7 20:21:54 2013 -0800

    counters: use %u instead of %hu for pid.

 mongoc/mongoc-counters.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b30521ea2834d28650aab5e069c95e747926426b
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Nov 4 12:15:28 2013 -0800

    build: use $(TEST_LIBS).

 tests/Makefile.include | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f514a65a720f4dff0dbd09ba6317241756135e39
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Nov 4 12:13:43 2013 -0800

    build: some linkers want explicit $(BSON_LIBS).

 examples/Makefile.include | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 4e19595ff9ac1206cd302735112b4a664b73a9fd
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Oct 31 17:01:22 2013 -0700

    style: add indent script and uncrustify config.

 mongoc/indent         |  3 ++
 mongoc/uncrustify.cfg | 91 +++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 94 insertions(+)

commit fabac3c87d4839f6697dfb17ead6fc57ea9be739
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Oct 31 17:00:41 2013 -0700

    tests: move abicheck.sh to tests/

 abicheck.sh            | 6 ------
 tests/Makefile.include | 2 +-
 tests/abicheck.sh      | 6 ++++++
 3 files changed, 7 insertions(+), 7 deletions(-)

commit 1de2ea3fa44e9c8e634ca309997fcd1c53207fa8
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Oct 31 16:59:25 2013 -0700

    pkg-config: move libmongoc-1.0.pc.in to mongoc/

 Makefile.am                |  2 +-
 configure.ac               |  2 +-
 libmongoc-1.0.pc.in        | 11 -----------
 mongoc/libmongoc-1.0.pc.in | 11 +++++++++++
 4 files changed, 13 insertions(+), 13 deletions(-)

commit 7f1d714dde1bb3b59acd625e7d3a13afdcd956d4
Merge: bc079a9 9527e3d
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Oct 31 14:10:53 2013 -0700

    Merge pull request #3 from hanumantmk/ha_test_fix
    
    Getting things working with -Wall and -Werror

commit 9527e3d7977e40ba9dafc7eedf728db4f8534ba6
Author: Jason Carey <jcarey@cheetahmail.com>
Date:   Thu Oct 31 16:41:54 2013 -0400

    Getting things working with -Wall and -Werror
    
    o adding some function declarations
    o getting rid of some unused variables
    o bson_return_val_if_fail instead of bson_return_if_fail for non-void
      functions

 tests/ha-test.c | 6 ++----
 tests/ha-test.h | 6 +++++-
 2 files changed, 7 insertions(+), 5 deletions(-)

commit bc079a96caa9f44a0aa84dc5802d29a2936b688f
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Oct 31 13:17:39 2013 -0700

    cursor: add mongoc_cursor_get_host().
    
    While it is generally discouraged to rely on this, (host information can
    change out from under you in the case of bringing a replica-set healthy)
    this will allow you to discover what host was communicated with during
    the course of a cursor.

 .gitignore                 |  1 +
 mongoc/libmongoc.symbols   |  1 +
 mongoc/mongoc-cursor.c     | 20 ++++++++++++++
 mongoc/mongoc-cursor.h     | 29 +++++++++++++++-----
 tests/Makefile.include     |  7 +++++
 tests/test-mongoc-cursor.c | 66 ++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 118 insertions(+), 6 deletions(-)

commit 2f24847835b8768ab247e2f61596550e18e74921
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Oct 31 12:30:28 2013 -0700

    client-pool: add mongoc_client_pool_try_pop().
    
    This can be used to request a mongoc_client_t without waiting for a new
    client to be given back to the pool. If no more connections are available
    then NULL is returned.
    
    This may be advantageous in a scenario where you want to queue an incoming
    HTTP request until a connection is available to service the request.

 mongoc/libmongoc.symbols        |  1 +
 mongoc/mongoc-client-pool.c     | 24 ++++++++++++++++++++++++
 mongoc/mongoc-client-pool.h     |  1 +
 tests/test-mongoc-client-pool.c | 19 +++++++++++++++++++
 4 files changed, 45 insertions(+)

commit 2925afd7a505024926fb7b1ae5f59e5e3b8b77b9
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Oct 29 19:02:00 2013 -0700

    abi: add mongoc_uri_unescape() to ABI.

 mongoc/libmongoc.symbols | 1 +
 1 file changed, 1 insertion(+)

commit 829c4ac38f0e704e3f9c8611d2076a414532972b
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Oct 29 19:01:47 2013 -0700

    rpc: fix warning with rpc printf.

 mongoc/mongoc-rpc.c | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit 94ea36e4a7fe8884bf16b34a671586b700370f35
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 28 14:59:23 2013 -0700

    uri: allow escaping in database name and parameter values.

 mongoc/mongoc-uri.c     |  4 ++++
 tests/test-mongoc-uri.c | 19 +++++++++++++++++++
 2 files changed, 23 insertions(+)

commit 55455593e8197719e80eca5b6b656eb70f4743f4
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 28 14:51:04 2013 -0700

    uri: handle escaped username/passwords.

 mongoc/mongoc-uri.c     | 21 +++++++++++++++++++--
 tests/test-mongoc-uri.c | 10 ++++++++++
 2 files changed, 29 insertions(+), 2 deletions(-)

commit dd8137d2bbe48deb7206eb0388956560ef210a88
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 28 14:42:04 2013 -0700

    uri: add mongoc_uri_unescape()
    
    This will allow us to decode %20 and such in URIs after the sections have
    been parsed. The goal here is to allow funky passwords and realms as part
    of the usernames.

 mongoc/mongoc-uri.c     | 73 +++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-uri.h     |  1 +
 tests/test-mongoc-uri.c | 37 +++++++++++++++++++++++++
 3 files changed, 111 insertions(+)

commit 65293e1cd113902b2efa9708bdb3714aa9303e2d
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 28 13:58:10 2013 -0700

    tests: wip on shard testing. spawn router/config/replsets.

 tests/ha-test.c | 88 +++++++++++++++++++++++++++++++++++++++++++++------------
 tests/ha-test.h |  8 ++++--
 2 files changed, 76 insertions(+), 20 deletions(-)

commit 6dfd0eeb47b13c49c219a39af91e8e09a2f93833
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Oct 25 18:40:46 2013 -0700

    update .gitignore.

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 5047a6f3a51e9ef34a7a41eed93ebdb625d05b9b
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Oct 25 18:30:18 2013 -0700

    tests: start config server when spawning sharded cluster.

 tests/ha-test.c              | 76 ++++++++++++++++++++++++++++++++++----------
 tests/ha-test.h              |  2 +-
 tests/test-sharded-cluster.c |  2 +-
 3 files changed, 62 insertions(+), 18 deletions(-)

commit 2bc4c7106469a3b9d09e765e1d9b75f080ed1fd7
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Oct 25 17:34:28 2013 -0700

    tests: add some plumbing for sharded cluster tests.

 tests/ha-test.c              | 129 +++++++++++++++++++++++++++++++++++++++++--
 tests/ha-test.h              |  25 ++++++++-
 tests/test-sharded-cluster.c |  14 +++--
 3 files changed, 153 insertions(+), 15 deletions(-)

commit 7563003626e87f0b7639d84a4ca6c50bdbe402e4
Author: Christian Hergert <christian@hergert.me>
Date:   Fri Oct 25 13:28:13 2013 -0700

    build: split debug and maintainer gcc flags into separate autocon vars.

 configure.ac            | 75 +++++++++++++++++++++++++++++++------------------
 m4/as-compiler-flag.m4  | 62 ++++++++++++++++++++++++++++++++++++++++
 mongoc/Makefile.include |  2 ++
 3 files changed, 112 insertions(+), 27 deletions(-)

commit 82fec12ce4c73677899267f5a2ce2b0090106423
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 16:23:18 2013 -0700

    tests: use string length without sizeof.

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 458c1eea7e0c4cc2931fe5cf5873bedb6c512d00
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 16:11:01 2013 -0700

    collection: cleanup in/out.

 mongoc/mongoc-collection.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit ff59a1418487be43fe07df4a60dbe1c202d13067
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 15:17:18 2013 -0700

    tests: suppress log output (use -v to enable).

 tests/test-mongoc-buffer.c | 14 ++++++++++++++
 tests/test-mongoc-stream.c | 15 +++++++++++++++
 2 files changed, 29 insertions(+)

commit df1407a51afff0d88bf8f493952c8dc3358b2594
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 15:14:42 2013 -0700

    tests: allow specifying MONGOC_TEST_HOST=hostname for collection tests.

 tests/test-mongoc-collection.c | 23 +++++++++++++++--------
 1 file changed, 15 insertions(+), 8 deletions(-)

commit f6267769fedf717ab6cb661db8aaaa67f153c889
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 15:12:08 2013 -0700

    tests: allow specifying MONGOC_TEST_HOST=hostname for client tests.

 tests/test-mongoc-client.c | 26 ++++++++++++++++++--------
 1 file changed, 18 insertions(+), 8 deletions(-)

commit 16033c7459584947996928c308dabe4651dc04b0
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 15:01:36 2013 -0700

    tests: use define for hostname.

 tests/test-mongoc-client.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit d1fc0666ea8fbecbb8653cd355df9562a193c6a4
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 14:03:18 2013 -0700

    tests: set log domain.

 tests/test-replica-set.c | 3 +++
 1 file changed, 3 insertions(+)

commit 82d0a3b492dc608ad5a1afe5a58be9e018fc5762
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 13:31:18 2013 -0700

    client: no need to goto cleanup if we got a valid gle reply.

 mongoc/mongoc-client.c | 1 -
 1 file changed, 1 deletion(-)

commit cda8473037f647a9a34028c4fa63e05770a2461a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 13:30:44 2013 -0700

    log: add some tracing code to GLE process.

 mongoc/mongoc-client.c     | 11 +++++++----
 mongoc/mongoc-collection.c |  8 +++++---
 2 files changed, 12 insertions(+), 7 deletions(-)

commit ba896505354e9c733eef0468df4e1f7c84b7fbc3
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 13:13:05 2013 -0700

    examples: handle not-tailable-cursor in mongoc-tail.

 examples/mongoc-tail.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 3e029c60e5836c418b9bc8e032b2338808c0755a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Oct 23 13:11:04 2013 -0700

    cursor: handle error 13051 (not tailable) when using tailable cursors.

 mongoc/mongoc-cursor.c | 4 ++++
 mongoc/mongoc-error.h  | 2 ++
 2 files changed, 6 insertions(+)

commit ca28ce47f3b0f9a74a4750406a4e7e5c38990b02
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Oct 22 15:47:17 2013 -0700

    cluster: fix $cmd for getlasterror during try_sendv().

 mongoc/mongoc-cluster.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 82603294609e06e6db41d17779a0c2b013a9295d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Oct 21 20:03:15 2013 -0400

    cluster: do swab after using fields.

 mongoc/mongoc-cluster.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7f6416b1d44110047c511eeac4448eeb343ffe62
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Oct 21 19:54:18 2013 -0400

    rpc: various RPC fixes for big-endian.

 mongoc/mongoc-rpc.c     |  3 +-
 tests/test-mongoc-rpc.c | 94 ++++++++++++++++++++++---------------------------
 2 files changed, 44 insertions(+), 53 deletions(-)

commit dbc906f64c747da587e3c4a69d59f7fd0f2100a8
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 18:20:05 2013 -0700

    rpc: use separate to and from le for rpcs.

 mongoc/mongoc-rpc.c | 64 +++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 47 insertions(+), 17 deletions(-)

commit 843aa29bcacf7913e6a573252e5c7e16edd12c1b
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 17:54:42 2013 -0700

    tests: more swabbing on remaining rpcs.

 tests/test-mongoc-rpc.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 83d3e27bf7568a3ea9402ae4b8f64134e90074a8
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 17:47:28 2013 -0700

    rpc: treat swab from and to little-endian separately.

 mongoc/mongoc-cluster.c     | 17 +++++++---------
 mongoc/mongoc-rpc-private.h |  3 ++-
 mongoc/mongoc-rpc.c         | 49 +++++++++++++++++++++++++++++++++++++++++++--
 tests/mock-server.c         |  2 +-
 tests/test-mock-server.c    |  2 +-
 tests/test-mongoc-rpc.c     |  6 +++---
 6 files changed, 61 insertions(+), 18 deletions(-)

commit 5bb5e4be029f7bbcb51e1523afebf8e9ddee7e61
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 17:12:07 2013 -0700

    tests: add file/line/function in assertion failure message.

 tests/mongoc-tests.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 4f715f8070e4c8c252044140115abaccacf6cb03
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 17:05:18 2013 -0700

    tests: print values in assert_cmpint().

 tests/mongoc-tests.h       |  4 ++--
 tests/test-mongoc-buffer.c |  2 +-
 tests/test-mongoc-queue.c  | 10 +++++-----
 tests/test-mongoc-rpc.c    | 22 +++++++++++-----------
 4 files changed, 19 insertions(+), 19 deletions(-)

commit f44ffcf8a2dc3863c018309fc795b3a15c304af1
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 16:49:08 2013 -0700

    tests: more testing work on RPCs.

 tests/test-mongoc-rpc.c | 133 ++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 117 insertions(+), 16 deletions(-)

commit 5d5c9864e2dd24eee342431b3183fe50760062c3
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Oct 21 14:56:13 2013 -0700

    cluster: make sure we use db.$cmd for getlasterror.
    
    This seemed to have been introduced when changing to the sendv() design
    for pipelining write concerns. The DB_AND_CMD_FROM_COLLECTION macro will
    place into a stack allocated structure the version of the namespace for
    the command.
    
    However, this will get overwritten if we have multiple RPCs comming in.
    We will fix this in a followup commit that will remove sendv() support
    since we do not actually use it (nor need it).

 mongoc/mongoc-cluster.c | 25 +++++++++++++++++++++----
 1 file changed, 21 insertions(+), 4 deletions(-)

commit d80bbc09a70e6709b4dfdb2295d591c5774b0fe5
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Oct 15 12:24:43 2013 -0700

    tests: start on test for sharded clusters.
    
    this just sets up two replica sets right now. still need to do config
    server and mongos instances.

 .gitignore                   |  5 ++++-
 tests/Makefile.include       |  9 +++++++++
 tests/test-sharded-cluster.c | 46 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 59 insertions(+), 1 deletion(-)

commit a4b9b3adc1bec91d293bb299482f0d181d731f5c
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Oct 15 12:24:02 2013 -0700

    tests: seed srand() using /dev/urandom.

 tests/ha-test.c | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 1007655e5379733099754e39ac1fff131ec2c639
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Oct 15 12:13:05 2013 -0700

    tests: rename test1 to repltest1.

 tests/test-replica-set.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d121ba42f741d7bd827454aa312daa1acb8f4bf1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 14:08:29 2013 -0700

    tests: do endianness conversion before size test.

 tests/test-mongoc-rpc.c | 106 ++++++++++++++++++++++++------------------------
 1 file changed, 53 insertions(+), 53 deletions(-)

commit 84a5f4773c1747eab20e3340d83d77691dbbbe78
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 13:01:27 2013 -0700

    cluster: only close/destroy stream if it has not already been done.

 mongoc/mongoc-cluster.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 1f72e1e6b0ba4b538e2774e31957fae0f769eeaa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 12:58:42 2013 -0700

    rpc: use static assertions to guarantee struct offset positions.

 mongoc/mongoc-rpc-private.h | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit a454f14afde69145f402ef2aed78291151399115
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 12:53:23 2013 -0700

    rpc: enforce packing on union.

 mongoc/mongoc-rpc-private.h | 2 ++
 1 file changed, 2 insertions(+)

commit b891d3cc7ae491b2769da5e7b5ceb02ff0b600f7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 12:40:25 2013 -0700

    database: fix warning on Solaris

 mongoc/mongoc-database.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 82de4a47388c1b70403bbef568f4b2395277e2bd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 12:30:13 2013 -0700

    rpc: use local swabbed opcode in printf.

 mongoc/mongoc-rpc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 687a7b7a3f213d30153d3094f6bfa4e584c6a469
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 12:28:47 2013 -0700

    rpc: extract opcode without swabbing the entire message.

 mongoc/mongoc-rpc.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 09e1e7b2d67d0f03ca36d1aee0b5d4090c5e2607
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Oct 11 12:22:04 2013 -0700

    rpc: use BSON_ASSERT() macro instead of assert().

 mongoc/mongoc-rpc.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit bf33fa9bf29b2b6f55c2f0d8f5bdb7270fade04f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:54:22 2013 -0700

    cursor: adjust n_return for tailable cursors.

 mongoc/mongoc-cursor.c | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 05264636e8a95587175e3d0763edcebf9b438224
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:54:09 2013 -0700

    tail: use {ts: {$gt: Timestamp}} query.

 examples/mongoc-tail.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 8484956a6399e95a447733f08e166fbda3266683
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:53:43 2013 -0700

    tail: timestamps are in seconds.

 examples/mongoc-tail.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f62d61823f4a07529597b333ab42b21713352c6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:26:44 2013 -0700

    tail: add example program to tail the oplog.

 .gitignore                |   1 +
 examples/Makefile.include |   8 ++++
 examples/mongoc-tail.c    | 103 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 112 insertions(+)

commit 1980bfc7249861989abe76e84facb38c0dc4a8c4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:25:23 2013 -0700

    symbols: add mongoc_cursor_more() to ABI.

 mongoc/libmongoc.symbols | 1 +
 1 file changed, 1 insertion(+)

commit 9607c9b8776018600e7e23404f03e828d4fcf336
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:25:06 2013 -0700

    cursor: do not mark cursor done if we got empty reply to tailable cursor.

 mongoc/mongoc-cursor.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit b4b6a0267d53b8936356a608170f099eda4afe21
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:24:43 2013 -0700

    cursor: add mongoc_cursor_more().
    
    This function returns TRUE if it thinks there is more data to return.

 mongoc/mongoc-cursor.c | 9 +++++++++
 mongoc/mongoc-cursor.h | 1 +
 2 files changed, 10 insertions(+)

commit 5ccb2b7a437c857a4a9e169974761c3f9a00559f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 16:24:10 2013 -0700

    cursor: remove MAX(1, limit), its not useful at all.

 mongoc/mongoc-cursor.c | 2 --
 1 file changed, 2 deletions(-)

commit 272d63b7a17e7bc9d479235448e340bccfc4772b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 14:43:39 2013 -0700

    build: add pkg.m4 for PKG_CHECK_MODULES().

 m4/pkg.m4 | 199 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 199 insertions(+)

commit 86abdee04fa12940c19f4277dd1ab8c05ee14fe4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 14:16:43 2013 -0700

    doc: add doc for mongoc_cursor_destroy().

 doc/mongoc_cursor_t.md | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit cc0e761127694902bcf98e440c62c62e4ec62ac1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 14:14:45 2013 -0700

    doc: add docs for mongoc_cursor_t.

 doc/mongoc_cursor_t.md | 103 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 103 insertions(+)

commit 5d744b5fd93d4896911e51a7364ea80a06caa447
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 13:53:03 2013 -0700

    build: remove mongoc_stream_tls_new() from exported ABI.
    
    You can get a TLS stream by specifying ssl=true in URI.

 mongoc/libmongoc.symbols | 1 -
 1 file changed, 1 deletion(-)

commit ea9e38f13e34b0e5fd8f446cead44a6531d8d63a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 10 13:43:30 2013 -0700

    build: check for solaris and apply a few defines to CFLAGS.

 configure.ac | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 8ce8424c16b7ac2c3707a3030501a0640bed36b4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 18:50:29 2013 -0700

    build: lower autoconf requirement.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d538b92f11b5b067dfc615c41eebfd9da03048f0
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 18:50:20 2013 -0700

    counters: don't use atomics for fallbacks now.

 mongoc/mongoc-counters-private.h | 5 ++++-
 mongoc/mongoc-counters.c         | 8 ++++----
 2 files changed, 8 insertions(+), 5 deletions(-)

commit 40caeb9d0a22af376e2afc64b311a92cabc8621a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 18:49:55 2013 -0700

    rpc: do explicit casts.

 mongoc/mongoc-rpc.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7472366f6927859bc7dfe88efdfe2451c1e38f6e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 18:49:44 2013 -0700

    stream-unix: deal with cork on systems that don't support it.

 mongoc/mongoc-stream-unix.c | 28 ++++++++++++++++------------
 1 file changed, 16 insertions(+), 12 deletions(-)

commit a9baca769af6a52512b60dd9780e6d2f88630b4a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 18:49:28 2013 -0700

    stat: deal with old style pragma pack.

 tools/mongoc-stat.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 15cd0298d68cc5668a4e888355533be25cdcd49f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 13:14:37 2013 -0700

    docs: add docs for mongoc_client_t.md

 doc/mongoc_client_t.md | 361 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 361 insertions(+)

commit ef57cd8f648ad081485848935f07a3d7dfb6173b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 9 12:27:33 2013 -0700

    pkg-config: make libmongoc-1.0.pc depend on libbson-1.0.

 libmongoc-1.0.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f05bbbef61b0572c4505f5b11e1c61a294049cb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Oct 8 19:00:45 2013 -0700

    doc: add documentation idea for mongoc_client_pool_t.

 doc/mongoc_client_pool_t.md | 146 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 146 insertions(+)

commit 6ed8280bc981d8731a2b81398758553570cc0460
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Oct 8 14:52:49 2013 -0700

    TODO: add entry on netcat work needed in build.

 TODO.md | 6 ++++++
 1 file changed, 6 insertions(+)

commit 615a3840dad08c5cb67ca367689a07646ce755c5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Oct 8 11:59:58 2013 -0700

    client-pool: add tracing to mongoc_client_pool_t.

 mongoc/mongoc-client-pool.c | 20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)

commit c9c2fd5a1cd949b665e8cfb7a7ed95b293ad9c0e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Oct 7 18:08:30 2013 -0700

    tests: ensure query of secondary works with 2 of 3 nodes down.

 tests/test-replica-set.c | 61 +++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 60 insertions(+), 1 deletion(-)

commit a71786c55c8628322035906e352963e2afc2b135
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Oct 7 16:40:00 2013 -0700

    tests: make crashed node healthy again before finishing test.

 tests/ha-test.c          | 5 +++++
 tests/test-replica-set.c | 3 +++
 2 files changed, 8 insertions(+)

commit 8e9d0b1d26f6019fe99511cbd88abc8ae7e59924
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Oct 7 15:41:40 2013 -0700

    cluster: remove debug line.

 mongoc/mongoc-cluster.c | 1 -
 1 file changed, 1 deletion(-)

commit ca50100609ffca255d10c751b7bb4f2b341718e8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Oct 7 13:12:43 2013 -0700

    cluster: track last 5 pings on a node and calculate rolling average.

 mongoc/mongoc-cluster-private.h |  5 +++-
 mongoc/mongoc-cluster.c         | 64 +++++++++++++++++++++++++++++++++++------
 2 files changed, 60 insertions(+), 9 deletions(-)

commit 74d1145684861043ac5ac92b9ee616855a4be890
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 18:02:49 2013 -0700

    cluster: fix off-by-one for selecting node from hint.

 mongoc/mongoc-cluster.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 445a17418cef300b1552140845631e8adfada2da
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 17:12:07 2013 -0700

    cluster: more tracing.

 mongoc/mongoc-cluster.c | 93 ++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 72 insertions(+), 21 deletions(-)

commit 02e2ba908175d420b51d23da15991e6b5f470d8c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 15:46:53 2013 -0700

    cluster: use int instead of size_t.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a7284a3fc6186579319223c712ef1d018f265222
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 15:44:37 2013 -0700

    stream-unix: check for short write with POLLOUT condition.

 mongoc/mongoc-stream-unix.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 3df94d66eba1bd52565b3c1950839038e56742f9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 14:09:46 2013 -0700

    cluster: add tracing macros for mongoc_cluster_try_recv().

 mongoc/mongoc-cluster.c |  2 ++
 mongoc/mongoc-trace.h   | 39 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 41 insertions(+)

commit 718cbb6794c82848d61a9d04ad09746686ae482f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 13:47:32 2013 -0700

    tests: use MONGOC_WARNING().

 tests/test-replica-set.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fb1e76955bd3c1b429913e260590bc083689f514
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 13:47:24 2013 -0700

    trace: add tracing macros.

 mongoc/mongoc-trace.h | 2 ++
 1 file changed, 2 insertions(+)

commit 500189e53eedd56c8e38886a09594410f7610a38
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 13:47:17 2013 -0700

    stream-unix: add tracing macros.

 mongoc/mongoc-stream-unix.c | 94 +++++++++++++++++++++++++++++++--------------
 1 file changed, 65 insertions(+), 29 deletions(-)

commit a4205438018f734f310d59cf41d6737265030332
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 13:47:06 2013 -0700

    cluster: add tracing macros.

 mongoc/mongoc-cluster.c | 61 +++++++++++++++++++++++++++----------------------
 1 file changed, 34 insertions(+), 27 deletions(-)

commit 985bfc3c04887e67181a9182a0e970d6894293bf
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 13:46:40 2013 -0700

    cluster: set error in a couple of known failure paths.

 mongoc/mongoc-cluster.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 6c94852cf508517aeb74ad5ade79c2b12f54c879
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Oct 3 12:37:18 2013 -0700

    stream: break mongoc_stream_unix_t into another file.

 mongoc/Makefile.include     |   2 +
 mongoc/mongoc-client.c      |   1 +
 mongoc/mongoc-stream-unix.c | 552 ++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream-unix.h |  36 +++
 mongoc/mongoc-stream.c      | 514 -----------------------------------------
 mongoc/mongoc-stream.h      |   1 -
 mongoc/mongoc.h             |   1 +
 tests/mock-server.c         |   1 +
 tests/test-replica-set.c    |   5 +
 9 files changed, 598 insertions(+), 515 deletions(-)

commit c5b2b37a22e0c91a21506b4ad670ab2504668218
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 19:12:52 2013 -0700

    cursor: add tracing.

 mongoc/mongoc-cursor.c | 60 ++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 43 insertions(+), 17 deletions(-)

commit 2fb9c6a2adc68c402946d070bf985fd99e79a11e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:48:00 2013 -0700

    cluster: add missing exit trace.

 mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 19027ca98f1e0be63d375fced4b2cb7e95344599
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:44:41 2013 -0700

    cluster: add missing return trace.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a8141e8af5d2630aed09bfd214f1c184c38d0193
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:41:08 2013 -0700

    log: more padding for log domain in log entry.

 mongoc/mongoc-log.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d45a697dd49263bb4a564664f74b2710a7fe4b0a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:39:56 2013 -0700

    database: add some tracing.

 mongoc/mongoc-database.c | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit d8ce7de072c0d063144cbc8d1fefa293ad99030d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:38:45 2013 -0700

    collection: add some tracing.

 mongoc/mongoc-collection.c | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 8a2051153f287fcc3c181ca93d8b665c53ac218f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:35:37 2013 -0700

    client: set log domain.

 mongoc/mongoc-client.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 117c1d090bae6ffad5d693a6be099bf763b217fa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:33:59 2013 -0700

    cluster: define log domain.

 mongoc/mongoc-cluster.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 843c0ec59a8dc28397c91d3a0b954808225111b2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:30:35 2013 -0700

    log: cleanup default logger.

 mongoc/mongoc-log.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit de816dfddffd3a5fc7289613158dba8e7e7bdd1c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:30:25 2013 -0700

    cluster: be more careful about tracking replicaset state.

 mongoc/mongoc-cluster.c | 31 +++++++++++++++++--------------
 1 file changed, 17 insertions(+), 14 deletions(-)

commit 3c8315ec30305fb448fac025bc9020ae759a87f5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:20:23 2013 -0700

    cluster: disconnect after counter increment.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2e2fe05f3bbfff91e08e461f21699757de80a516
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:19:56 2013 -0700

    tests: more assertions.

 tests/test-replica-set.c | 1 +
 1 file changed, 1 insertion(+)

commit f92c0e9df63cd0f6486e577e5f9154d4324b429c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:19:46 2013 -0700

    tests: print write concern to console.

 tests/test-replica-set.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 527dc9c977d6fdaeefb431b218d9221e5d6163fb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:19:06 2013 -0700

    cluster: use mongoc_client_t instead of void*.

 mongoc/mongoc-cluster-private.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d4538685bc4456cf9ca96dc0fd114c22ecf0a62e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:18:48 2013 -0700

    log: add trace log level.

 mongoc/mongoc-log.c | 2 ++
 mongoc/mongoc-log.h | 1 +
 2 files changed, 3 insertions(+)

commit 474431d68f92d7245d95e19b47019d5ed25a3afa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:18:37 2013 -0700

    tests: link against private library.

 tests/Makefile.include | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 55f13a8f59740eedae6c441c3fc2059cb47d9bc7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 18:18:27 2013 -0700

    trace: add tracing macros.

 configure.ac            |  1 +
 mongoc/Makefile.include |  1 +
 mongoc/mongoc-trace.h   | 44 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 46 insertions(+)

commit 7f953b73d720cf0a819d551ded81ce8d28ea6725
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 16:38:58 2013 -0700

    tests: more assertions on cluster and cursor state.

 tests/test-replica-set.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit d4617e0cc6e16205a1ae7f896f58461938493025
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 16:38:32 2013 -0700

    tests: use w=3 write concern when inserting documents.

 tests/test-replica-set.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 476cf5a00c2b459a52abcebe70f1fbd52e553f37
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 16:38:07 2013 -0700

    cursor: use batch size for n_return.
    
    Limit actually belongs with $query, or negative value to exhaust. Needs
    more investigation.

 mongoc/mongoc-cursor.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 89b2ea6c4683c462753631e75b58dcb3358be8f9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Oct 2 16:37:24 2013 -0700

    cluster: update cluster state when disconnecting a node.

 mongoc/mongoc-cluster.c | 70 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 70 insertions(+)

commit f07a407a14dd7e6ab9e71d389924f3f19ae8373f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 19:15:33 2013 -0700

    stream: if we expected POLLIN and got a read of zero, assume EOF.

 mongoc/mongoc-stream.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 98855b7d012f610ff7d8ba4f3a42ba6ef68b77d0
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 18:59:04 2013 -0700

    stream: check for non POLLIN scenario.

 mongoc/mongoc-stream.c | 2 ++
 1 file changed, 2 insertions(+)

commit fb9eeaf9c5680dc4058d8e8e0a3f2dde421d9a95
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 18:29:16 2013 -0700

    stream: set min_bytes to count bytes if <= 0.

 mongoc/mongoc-stream.c | 4 ++++
 1 file changed, 4 insertions(+)

commit c9fa65a33b0196f56570301e77ef17add72b3b9a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 17:51:47 2013 -0700

    log: include timestamp in log entries.

 mongoc/mongoc-log.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit e7ba7f8cfcf92e6fce81d20078b4b89ea9c58498
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 17:09:23 2013 -0700

    buffer: adjust min_bytes by current buffer length.

 mongoc/mongoc-buffer.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 36c1bd18e72fcebf77551679e020a8bffdc81580
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 17:09:09 2013 -0700

    tests: add some debug text to replica set test.

 tests/test-replica-set.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 251be0ba8ec50e75d034a5605bf2d59731f4d5af
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 17:08:55 2013 -0700

    stream: check against <0 for errors.

 mongoc/mongoc-stream.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 35b39ec98f1575e99156e8646e9a4ee80aa6b753
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 16:29:19 2013 -0700

    tests: add test using oversized buffer.

 tests/test-mongoc-stream.c | 34 +++++++++++++++++++++++++++++++++-
 1 file changed, 33 insertions(+), 1 deletion(-)

commit c0cf713ad2acfba9869cbaacdad8dc23fd099546
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 16:08:51 2013 -0700

    tests: add basic buffered stream test to ensure buffer growth.

 .gitignore                 |  1 +
 tests/Makefile.include     |  7 +++++++
 tests/test-mongoc-stream.c | 44 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 52 insertions(+)

commit e838716e4e0dd1c07a8b6c3b6ceb16a05ef0433e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 16:08:14 2013 -0700

    api: include mongoc-stream-buffered in api.

 mongoc/mongoc.h | 1 +
 1 file changed, 1 insertion(+)

commit 7611b9a47553fd291014875ec78e37ebfd3fc7d2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 16:08:00 2013 -0700

    buffer: use realloc func to grow buffer when necessary.

 mongoc/mongoc-buffer.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit a0ba1d4e831f5256592e3a161d13a22d70c5daeb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 15:47:03 2013 -0700

    buffer: plumb read timeout into mongoc_buffer_fill().

 mongoc/mongoc-buffer-private.h  | 1 +
 mongoc/mongoc-buffer.c          | 4 +++-
 mongoc/mongoc-stream-buffered.c | 1 +
 mongoc/mongoc-stream.c          | 6 ++++--
 tests/test-mongoc-buffer.c      | 4 ++--
 5 files changed, 11 insertions(+), 5 deletions(-)

commit d41825ef4253539ee4890e98ac299fae4f639098
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 15:46:09 2013 -0700

    tests: add larger reply scatter test.

 tests/binary/reply2.dat | Bin 0 -> 16236 bytes
 tests/test-mongoc-rpc.c |  46 +++++++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 45 insertions(+), 1 deletion(-)

commit 37ca1d1a53264fcee6d6c17442859084606e8734
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 14:03:27 2013 -0700

    tests: test cursor failure on replica set.

 tests/ha-test.c          |   8 +-
 tests/test-replica-set.c | 198 ++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 195 insertions(+), 11 deletions(-)

commit 956ecf6582cef21f3a223a281b2bad5cf2ca0638
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 13:36:50 2013 -0700

    ha-tests: move struct definition to header and add client helper.

 tests/ha-test.c | 43 ++++++++++++++++++++++++++++---------------
 tests/ha-test.h | 22 ++++++++++++++++++++++
 2 files changed, 50 insertions(+), 15 deletions(-)

commit d65d29b0cb317408bd8bf3e78b1c12e5e1ef2ddd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 13:36:25 2013 -0700

    client: move struct definition to mongoc-client-private.h.

 mongoc/mongoc-client-private.h | 16 ++++++++++++++++
 mongoc/mongoc-client.c         | 15 ---------------
 2 files changed, 16 insertions(+), 15 deletions(-)

commit 0f2c52e621f8e2a3f1ccd7b51287464b5fbb9826
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 30 13:36:07 2013 -0700

    build: require newer libbson.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit acc992ef9107a69070f555baae086f5088805ae9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 27 15:33:28 2013 -0700

    ha-tests: cleanup logging code.

 tests/ha-test.c | 35 +++++++++++++++++++----------------
 1 file changed, 19 insertions(+), 16 deletions(-)

commit 43277dfdd10d22fdd57e1229432a81274846f958
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 27 15:27:32 2013 -0700

    ha-tests: close stdin, stdout, and stderr and replace with /dev/null.
    
    Use dup2() to make /dev/null the stdin, stdout, and stderr file
    descriptors. Supresses output from child processes.

 tests/ha-test.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit d6748fa7954870f985c6c04bdaf6f6d1bf428d97
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 27 14:03:17 2013 -0700

    tests: cleanup.

 tests/test-replica-set.c | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit 0c338c363839026822b2debd64e8e65f91c37545
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 27 13:57:31 2013 -0700

    tests: remove old test.

 tests/ha/test1.py | 237 ------------------------------------------------------
 1 file changed, 237 deletions(-)

commit f9e4fe8bcee4339ea293d93c4c41ebe6012f0f3c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 27 13:57:13 2013 -0700

    tests: port basic ha test to C.
    
    This lets us use libmongoc for connection status and have no dependencies
    on Python for testing.
    
    Also, it means we can potentially run the test in the parent process.
    
    See tests/test-replica-set.c for how simple the creation of a replicaset
    can be for automation.

 .gitignore               |   2 +
 tests/Makefile.include   |   8 +
 tests/ha-test.c          | 465 +++++++++++++++++++++++++++++++++++++++++++++++
 tests/ha-test.h          |  50 +++++
 tests/test-replica-set.c |  38 ++++
 5 files changed, 563 insertions(+)

commit 1f7a3a0dab3b85a36cf0d17bccad145da96caada
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 14:56:45 2013 -0700

    tests: more coordination between parent and child process.

 tests/ha/test1.py      | 25 +++++++++++++++++++------
 tests/test-secondary.c | 18 +++++++++++++++---
 2 files changed, 34 insertions(+), 9 deletions(-)

commit 671707902b93c5d85c44d9b666a06af5f47ba5c8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 14:56:25 2013 -0700

    debug: remove spurious \n.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f463eaaa92829290c8672f1a4ef6750859c6d0e1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 14:28:09 2013 -0700

    build: bump libbson required version.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d888f5f3c31373e79d85701fe6c32000547602a7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 13:47:14 2013 -0700

    tests: run until SIGUSR1 has been sent.

 tests/test-secondary.c | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 2e0c93ebcaa47d09ac5af8a0ede922bc996547db
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 13:46:58 2013 -0700

    tests: launch subprocess tester.

 tests/ha/test1.py | 39 ++++++++++++++++++++++++++++++++++-----
 1 file changed, 34 insertions(+), 5 deletions(-)

commit c58f4c83557bb4d29a90024e55e8c36e203e1d93
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 13:46:26 2013 -0700

    cluster: specify slaveOk when we know we can talk to a secondary.

 mongoc/mongoc-cluster.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 92dd66de4f80ede5b877239e0608a1d8e98564a8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 13:45:55 2013 -0700

    read-prefs: allow use of masks on read prefs enum values.
    
    This will let us check to see if a query may hit a secondary simply by
    using (read_mode & MONGOC_READ_SECONDARY).

 mongoc/mongoc-read-prefs.h | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 881fc5eaa0dbe57035c31f87eca9bd6873849041
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 13:04:46 2013 -0700

    tests: wait for healthy startup of replicaset.

 tests/ha/test1.py | 121 ++++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 99 insertions(+), 22 deletions(-)

commit eeb2f79041a9600a7d35e1d541152194f8685403
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 26 12:25:21 2013 -0700

    tests: start on replicaSet conformance tests.

 tests/ha/test1.py | 118 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 118 insertions(+)

commit 2b7767d46d56c1661b99040849824c8c4b2ea1df
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 17:47:55 2013 -0700

    cluster: run ping command during replicaSet connection.

 mongoc/mongoc-cluster.c | 56 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)

commit d4d41f8e1bdc885e4ad66a94fe95677a79639038
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 17:31:53 2013 -0700

    TODO: update todo on ping times.

 TODO.md | 1 +
 1 file changed, 1 insertion(+)

commit f5765abd39ae5b9aa3e86ee244b1fb30a8423c66
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 16:44:45 2013 -0700

    uri: add mongoc_uri_new_for_host_port() and include in public ABI.

 mongoc/libmongoc.symbols |  1 +
 mongoc/mongoc-uri.c      | 18 ++++++++++++++++++
 mongoc/mongoc-uri.h      |  2 ++
 tests/test-mongoc-uri.c  | 15 +++++++++++++++
 4 files changed, 36 insertions(+)

commit cdd70ed4335ec71408b87197ecb581896b046629
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 16:34:36 2013 -0700

    build: use a private libtool archive and base public library on that.
    
    This allows us to strip symbols in our public ABI but still leave them
    in for the purpose of unit tests. The tests simply link against the
    private version of the library.
    
    `make test` will run the abicheck.sh script for rudimentary ABI check.

 abicheck.sh              |   6 ++
 configure.ac             |  86 +++++++++++++++++++++---
 mongoc/Makefile.include  | 167 +++++++++++++++++++++++++----------------------
 mongoc/libmongoc.symbols |  91 ++++++++++++++++++++++++++
 mongoc/mongoc-cluster.c  |   6 ++
 tests/Makefile.include   |  11 +++-
 6 files changed, 276 insertions(+), 91 deletions(-)

commit 717439c9878ecca99824836ad7f4f5d6d925880c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 15:09:00 2013 -0700

    tests: add simple developer utility to test forced secondary.

 .gitignore             |  1 +
 tests/Makefile.include |  6 ++++
 tests/test-secondary.c | 86 ++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 93 insertions(+)

commit d9d0269fbc371f9091bb03212bba168cad9fe38c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 15:06:19 2013 -0700

    cluster: check and score read preferences when selecting target node.

 mongoc/mongoc-cluster.c | 32 ++++++++++++++++++++++++--------
 1 file changed, 24 insertions(+), 8 deletions(-)

commit d9aafe651268f93d8d655d7cd8d07edcd1dc0893
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 15:05:47 2013 -0700

    cluster: add error for no acceptable peer discovered.

 mongoc/mongoc-cluster.c | 8 ++++++++
 mongoc/mongoc-error.h   | 1 +
 2 files changed, 9 insertions(+)

commit fe3f40262be935a50744f8a49001feff4b766b25
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 15:05:09 2013 -0700

    read-prefs: change signature of creating read prefs to include mode.

 mongoc/mongoc-client.c         |  2 +-
 mongoc/mongoc-collection.c     |  2 +-
 mongoc/mongoc-read-prefs.c     |  8 +++-----
 mongoc/mongoc-read-prefs.h     | 10 +++++-----
 tests/test-mongoc-read-prefs.c |  2 +-
 5 files changed, 11 insertions(+), 13 deletions(-)

commit 2c0a5444dd0701c01587775ab4a52f796a8d3fbe
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 15:04:12 2013 -0700

    collection: prefix to _mongoc_collection_new since it is private.

 mongoc/mongoc-client.c             |  4 ++--
 mongoc/mongoc-collection-private.h | 10 +++++-----
 mongoc/mongoc-collection.c         | 12 ++++++------
 3 files changed, 13 insertions(+), 13 deletions(-)

commit 644be3b982a564bd868539cdcef61aea38044ff9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 13:23:41 2013 -0700

    doc: update TODO.

 TODO.md | 6 ++++++
 1 file changed, 6 insertions(+)

commit 21ba2740db53e0cfa59034f512a4e13be42c4fd5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 23 13:01:59 2013 -0700

    util: use bson_next_power_of_two() static inline.

 mongoc/mongoc-array.c  | 17 +----------------
 mongoc/mongoc-buffer.c | 17 +----------------
 2 files changed, 2 insertions(+), 32 deletions(-)

commit 143533429b1ad4fe86937ec5a57994db8b366111
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 13 15:36:15 2013 -0700

    examples: add an example that indexes source code to a MongoDB collection.

 .gitignore                |   1 +
 configure.ac              |  15 +++
 examples/Makefile.include |  10 +-
 examples/index-source.c   | 290 ++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 314 insertions(+), 2 deletions(-)

commit e8d40905083f7308a276f81cc04f88f3d753f353
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Sep 13 13:19:27 2013 -0700

    uri: use "mongodb://127.0.0.1/" as default connection uri.

 mongoc/mongoc-uri.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 2bb75a964d13d5dbb3764c265af47ab579216956
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Sep 11 11:28:38 2013 -0700

    protocol: send 0 instead of -1 for response_to.

 mongoc/mongoc-cluster.c    | 6 +++---
 mongoc/mongoc-collection.c | 6 +++---
 mongoc/mongoc-cursor.c     | 6 +++---
 3 files changed, 9 insertions(+), 9 deletions(-)

commit fbb57c7b1d82eb46ea13c7e642ac4344074fdbde
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 9 16:59:39 2013 -0700

    cluster: remove unneeded condition.

 mongoc/mongoc-cluster.c | 1 -
 1 file changed, 1 deletion(-)

commit 1bb9993e64939bc168bfb299f24d77a5607fedcb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 9 15:52:04 2013 -0700

    cluster: plumb a bit of unhealthy reconnection.

 mongoc/mongoc-cluster.c | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

commit be18392ff28ec001f99929d64a6272f17d99762a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 9 15:31:19 2013 -0700

    cluster: track the last time we attempted reconnection.

 mongoc/mongoc-cluster-private.h | 2 ++
 mongoc/mongoc-cluster.c         | 4 ++++
 2 files changed, 6 insertions(+)

commit d169b42f50e57b039f3e1ae10362ea4337a66f1e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 9 15:26:21 2013 -0700

    TODO: update.

 TODO.md | 50 +++++++++++++++++++++++++-------------------------
 1 file changed, 25 insertions(+), 25 deletions(-)

commit 2ad2c29134c5a202288c637de01e98238c9d8b44
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 9 15:26:12 2013 -0700

    cluster: remove TODO as it is no longer applicable.
    
    Since we changed bson_error_t to not dynamically allocate memory,
    we can remove this TODO as there is no leak possible.

 mongoc/mongoc-cluster.c | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit e4b4ca5392946de81316d156cdb11065b82c0bbb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Sep 9 15:12:54 2013 -0700

    TODO: update.

 TODO.md | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

commit 2de7a95e976abea139fb67bbdf20ffe01040d307
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 19:35:28 2013 -0700

    uri: zero-free the password.

 mongoc/mongoc-uri.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 4fc29dbe479fbe9ad8e2d6faaa4e6063cb28cb22
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 16:11:46 2013 -0700

    TODO: remove connecttimeoutms.

 TODO.md | 2 --
 1 file changed, 2 deletions(-)

commit dd0dd25ab278ba17f8c5543ef6026c1f6d1cf550
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 16:11:05 2013 -0700

    client: support connectiontimeoutms with poll() for POLLOUT on socket.
    
    We need to put the socket in O_NONBLOCK mode and then connect() will
    return -1 and errno set to EINPROGRESS. Under this condition, we can
    poll() for POLLOUT (writability) to check for success or failure.
    
    Success and failure are determined by getsockopt() for
    SOL_SOCKET with SO_ERROR non-zero value.

 mongoc/mongoc-client.c | 56 ++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 47 insertions(+), 9 deletions(-)

commit bad0c66d73aba99e55049cb0c3a4ecbc6706796c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 15:58:38 2013 -0700

    stream: use FL, not FD.

 mongoc/mongoc-stream.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 447f74f44d5da1e21000f5e648c109e986069aec
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 15:18:51 2013 -0700

    TODO: remove buffering.

 TODO.md | 2 --
 1 file changed, 2 deletions(-)

commit 89e23532923044573f7fce09a423b69cc54dea8a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 15:00:31 2013 -0700

    client: use mongoc_stream_buffered_t to wrap native streams.
    
    Small performance improvement for load test in about 2-5%. Helps by
    reducing number of recvmsg() syscalls.

 mongoc/mongoc-client.c          |  4 ++--
 mongoc/mongoc-stream-buffered.c | 49 ++++++++++++++++++++++++++++++++---------
 2 files changed, 40 insertions(+), 13 deletions(-)

commit 0c0ae4f3c09b55a043e934684cff4f675ffbda96
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 14:37:06 2013 -0700

    buffer: try to fill a buffer, but succeed with low-watermark.

 mongoc/mongoc-buffer.c     | 29 +++++++++++++++++++++--------
 tests/test-mongoc-buffer.c |  4 +++-
 2 files changed, 24 insertions(+), 9 deletions(-)

commit 77c326ac00dc41758dfad1327ed84f09857ebd1d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 14:18:22 2013 -0700

    build: bump libbson requirement.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2afbd89a13c6df3c60c4bebcfbc520e25211db59
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Sep 5 14:17:51 2013 -0700

    stream: plumb support for low-watermark on incoming read.
    
    This allows us to still really care about getting all of the data
    we want from the network, but be a bit relaxed when used in buffering
    situations.

 mongoc/mongoc-buffer-private.h  |  1 +
 mongoc/mongoc-buffer.c          |  9 ++++++---
 mongoc/mongoc-cursor-private.h  |  2 +-
 mongoc/mongoc-cursor.c          | 28 ++++++++++++++++++----------
 mongoc/mongoc-rpc.c             |  7 ++++---
 mongoc/mongoc-stream-buffered.c |  2 ++
 mongoc/mongoc-stream-tls.c      | 11 +++++++++--
 mongoc/mongoc-stream.c          | 24 ++++++++++++++++++++++--
 mongoc/mongoc-stream.h          |  3 +++
 tests/test-mongoc-buffer.c      |  2 +-
 tests/test-mongoc-rpc.c         | 16 ++++++++--------
 11 files changed, 75 insertions(+), 30 deletions(-)

commit cf7d2bb9eec291624be439d4d83c28ffba177f70
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Sep 3 14:53:03 2013 -0700

    Update TODO.

 TODO.md | 4 ----
 1 file changed, 4 deletions(-)

commit 536b99cbecd6a74a5f99b70ad002893d2682d41c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Sep 3 14:52:41 2013 -0700

    add TODO.

 TODO.md | 79 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 79 insertions(+)

commit f11ce48349613eaa75bee1ecd077ca05c3ea9616
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Sep 3 14:50:36 2013 -0700

    counters: remove need for counter id by generating an enum.

 mongoc/mongoc-counters-private.h | 22 ++++++++++----
 mongoc/mongoc-counters.c         | 39 +++++-------------------
 mongoc/mongoc-counters.defs      | 64 ++++++++++++++++++++--------------------
 3 files changed, 56 insertions(+), 69 deletions(-)

commit 9c149cf515b74eb75fa6a48713fbadffa363a744
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Sep 3 12:45:09 2013 -0700

    build: check for `nc' in configure.

 configure.ac           | 7 +++++++
 tests/Makefile.include | 2 +-
 2 files changed, 8 insertions(+), 1 deletion(-)

commit e6e41efa6a25e0c631794738e24a3d70e93efe3c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Sep 3 12:38:16 2013 -0700

    tests: check for MongoDB connection before running tests.

 tests/Makefile.include | 2 ++
 1 file changed, 2 insertions(+)

commit f79f945071406f9e627327269f7391565320dc92
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 30 14:53:16 2013 -0700

    cluster: initialize replicaSet based on discovered hosts.

 mongoc/mongoc-cluster.c | 56 ++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 49 insertions(+), 7 deletions(-)

commit 4ffe441f12a5dc8f1a05124071245fde2057d0e0
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 30 12:53:13 2013 -0700

    build: respect ${docdir}.

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4a9dc481faab8de71126315bfc04d3d59d0a896d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 29 17:34:31 2013 -0700

    cluster: parse host and port from peer.

 mongoc/mongoc-cluster.c | 25 +++++++++++++++++++------
 1 file changed, 19 insertions(+), 6 deletions(-)

commit 0b8dffefd8112d3eeceb39510a1bd22092c57a78
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 29 17:25:23 2013 -0700

    cluster: cleanup disconnect node.

 mongoc/mongoc-cluster.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit 04ba21af5c980dfbb8d529c405d3305fa37f41ec
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 29 17:16:24 2013 -0700

    cluster: more replicaSet plumbing.

 mongoc/mongoc-cluster-private.h |  1 +
 mongoc/mongoc-cluster.c         | 98 +++++++++++++++++++++++++++++++++++------
 2 files changed, 85 insertions(+), 14 deletions(-)

commit 601b83245315778ac5e4cc169c90f0fe36a405d3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 29 17:16:09 2013 -0700

    uri: make sure we return the string.

 mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2db49d36f4178f0d2fdfbad24dcfadd74bf40dca
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 29 17:05:05 2013 -0700

    uri: add getter for replicaSet parameter.

 mongoc/mongoc-uri.c | 16 ++++++++++++++++
 mongoc/mongoc-uri.h |  1 +
 2 files changed, 17 insertions(+)

commit c499a4f0729d6728d51ad21ba587b151a5823dd9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 28 13:41:13 2013 -0700

    cluster: start on replicaSet connections.

 mongoc/mongoc-cluster-private.h |   3 +
 mongoc/mongoc-cluster.c         | 206 ++++++++++++++++++++++++++++++++++++++--
 2 files changed, 203 insertions(+), 6 deletions(-)

commit 8effb0a3d9985db0bd3054619cc7947379059b57
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 28 12:57:34 2013 -0700

    cluster: only update bson/msg max sizes if they are smaller.

 mongoc/mongoc-cluster.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit e7b0078c1e7135dea1d4634b8bf911afbaa591a3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 26 16:25:58 2013 -0700

    database: only destroy user bson_t if it has been set.

 mongoc/mongoc-database.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 380cf0b6defec80b473d98e8b315fbef59afe782
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 26 15:54:37 2013 -0700

    client: plumb and add notes about connecttimeoutms.

 mongoc/mongoc-client.c | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

commit b1586bb6172bc5cf2a1a9ea83bfb9c4fe6d11d63
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 26 14:13:29 2013 -0700

    client-pool: add comment about "make-healthy" process.

 mongoc/mongoc-client-pool.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit e0e4c7099013a3bec4d0f4ec7092130d94609dde
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 22 16:57:25 2013 -0700

    build: track libbson 0.1.11.

 configure.ac                   |  2 +-
 examples/mongoc-ping.c         |  1 -
 mongoc/mongoc-cursor.c         |  1 -
 tests/test-load.c              |  4 ----
 tests/test-mongoc-client.c     |  1 -
 tests/test-mongoc-collection.c | 10 ----------
 6 files changed, 1 insertion(+), 18 deletions(-)

commit 0d37a965a6da44683c8133f3561a8630b0cc6e51
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 22 13:30:55 2013 -0700

    cluster: stamp should always be monotonic.

 mongoc/mongoc-cluster.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1c0118cd38eb27b559fa982fa2469522ce6ab5b7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 21 16:58:18 2013 -0700

    test-load: set low socket timeout msec.

 tests/test-load.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ce64c406fc3597316aafeba21ed299476c1643de
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 21 16:57:51 2013 -0700

    counters: add counter for socket timeouts.

 mongoc/mongoc-counters.defs | 1 +
 mongoc/mongoc-stream.c      | 3 +++
 2 files changed, 4 insertions(+)

commit 1c87d3cdb0a915e654c4cce63b1c6251e44c1d47
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 21 15:00:31 2013 -0700

    stream: use signed integers for division.

 mongoc/mongoc-stream.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d4fecc882e166f76987307b26d5b773e995311e6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 21 14:49:22 2013 -0700

    cluster: update and document default sockettimeoutms.

 mongoc/mongoc-cluster.c | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit b9c609d225ee676431ff16e1268907fd8e7f1d19
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Aug 21 14:49:06 2013 -0700

    stream: try to be a bit smarter about socket read failures.

 mongoc/mongoc-stream.c | 52 +++++++++++++++++++++++++++++++-------------------
 1 file changed, 32 insertions(+), 20 deletions(-)

commit 9d0cbc70dae9f2d9dc9d4b57acfa1a53efccf865
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 15:55:39 2013 -0700

    tests: add test for mongoc_collection_aggregate_legacy().

 tests/test-mongoc-collection.c | 51 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 51 insertions(+)

commit ac270ad5321e75a9ab2c64941d533a28f16d2695
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 15:55:24 2013 -0700

    collection: aggregate takes collection name as command parameter.

 mongoc/mongoc-collection.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 29e9d0195199b119cbe985721448a02a45364f8d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 15:38:41 2013 -0700

    collection: add test for mongoc_collection_aggregate().

 mongoc/mongoc-collection.c     |  2 +-
 tests/test-mongoc-collection.c | 62 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 63 insertions(+), 1 deletion(-)

commit 847b727d1051e87f15daf97c2a6c1f02f54dc481
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 15:22:04 2013 -0700

    tests: add test for mongoc_collection_drop().

 tests/test-mongoc-collection.c | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit 6ee726d395c0a89fbdaf7fd2234686ff5395e165
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 15:16:00 2013 -0700

    collection: set BSON_GNUC_WARN_UNUSED_RESULT for allocated results.

 mongoc/mongoc-collection.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit e1d4feb7cf2d59edd6e8a9559e35614046bafd0f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 15:15:38 2013 -0700

    collection: add mongoc_collection_aggregate_legacy().
    
    For MongoDB server versions < 2.5.0, we need to use a legacy implementation
    that will return the result document. This allows the consumer to
    access each of the internal documents.

 mongoc/mongoc-collection.c | 70 ++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h |  9 +++++-
 2 files changed, 78 insertions(+), 1 deletion(-)

commit ecbeaf5963fd86afa80f1c648ece9be4b9e55d3a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 13:57:24 2013 -0700

    collection: add mongoc_collection_aggregate().
    
    mongoc_cursor_t needs to be modified to handle extracting the documents
    from the "results" field.

 mongoc/mongoc-collection.c | 55 ++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h |  4 ++++
 2 files changed, 59 insertions(+)

commit 32899f2eae8dc1f48935ab5cf7c9725b318308d2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 13:38:54 2013 -0700

    client: add warning about SSL not being enabled yet.

 mongoc/mongoc-client.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit e0ba83919e994f7778b9dd12b61eeee6d68fd6f6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 12:59:11 2013 -0700

    build: disable python bindings by default. --enable-python=yes to enable.

 configure.ac | 25 +++++++++++++++++--------
 1 file changed, 17 insertions(+), 8 deletions(-)

commit d666d38734de313fed3319ff9af5d0e61d61357c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 20 11:53:34 2013 -0700

    stream-tls: incremental tls work.

 mongoc/mongoc-stream-tls.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 9cc303c8a11e1a4e544038a02a280f1bdb27b53e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 18:08:54 2013 -0700

    stream-tls: start glueing SSL_read() and SSL_write().

 mongoc/mongoc-stream-tls.c | 164 ++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 162 insertions(+), 2 deletions(-)

commit 9e2d2788518ccdd78a1ef16f543df6f76657090d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 17:13:58 2013 -0700

    stream-tls: set retry flags on failure.

 mongoc/mongoc-stream-tls.c | 23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)

commit f028a0ba35e4507dc3ea437dcb6891c3866da0c7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 17:07:35 2013 -0700

    stream-tls: pass cork, uncork, and close to underlying stream.

 mongoc/mongoc-stream-tls.c | 28 +++++++++++++++-------------
 1 file changed, 15 insertions(+), 13 deletions(-)

commit 00e3f53089489bee1abd487d9a89cd7518907f75
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 16:39:38 2013 -0700

    stream-tls: pass setsockopt to underlying stream.

 mongoc/mongoc-stream-tls.c | 18 +++++++-----------
 1 file changed, 7 insertions(+), 11 deletions(-)

commit 5a3f36ed6ab4cea04499bc3139e6d68f49bf60ef
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 15:59:32 2013 -0700

    stream-tls: incremental tls work.

 mongoc/mongoc-stream-tls.c | 198 ++++++++++++++++++++++++++++++++-------------
 mongoc/mongoc-stream-tls.h |   5 +-
 2 files changed, 145 insertions(+), 58 deletions(-)

commit ddc56f8252218abc2e8586fe944b8bb89738284f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 15:23:57 2013 -0700

    stream-buffered: add cork/uncork virtual functions.

 mongoc/mongoc-stream-buffered.c | 55 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 55 insertions(+)

commit 370804a85b454b8ecadf63fbb9d96d889bf54d53
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 14:32:56 2013 -0700

    documentation and const fixes.

 mongoc/mongoc-client-private.h        |  40 +--
 mongoc/mongoc-client.c                |  14 +-
 mongoc/mongoc-cluster-private.h       |  50 ++--
 mongoc/mongoc-cluster.c               |  47 +--
 mongoc/mongoc-collection.c            | 523 ++++++++++++++++++++++++++--------
 mongoc/mongoc-collection.h            | 104 +++----
 mongoc/mongoc-cursor-private.h        |  18 +-
 mongoc/mongoc-cursor.c                |  18 +-
 mongoc/mongoc-write-concern-private.h |   4 +-
 mongoc/mongoc-write-concern.c         |   2 +-
 10 files changed, 558 insertions(+), 262 deletions(-)

commit fa8672c2288939261527a7f6c41d8248943b661c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 19 13:10:34 2013 -0700

    stream: move buffered streams to their own file.

 mongoc/Makefile.include         |   2 +
 mongoc/mongoc-stream-buffered.c | 245 ++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream-buffered.h |  37 ++++++
 mongoc/mongoc-stream.c          | 100 ----------------
 mongoc/mongoc-stream.h          |   1 -
 5 files changed, 284 insertions(+), 101 deletions(-)

commit cb796ed8fe6e6c033236c76e193453f3656047f3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 15:20:51 2013 -0700

    update .gitignore.

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 7a2ac0ee96b1d8893ef8c6824d1f43f4d30d364b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 14:55:32 2013 -0700

    client: add documentation.

 mongoc/mongoc-client.c | 478 +++++++++++++++++++++++++++++++++++++++++++------
 mongoc/mongoc-client.h |   4 +-
 2 files changed, 425 insertions(+), 57 deletions(-)

commit 89bda1da5527a30b0f7b15a52e8d994ded9f1c5c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 12:55:03 2013 -0700

    cursor: copy read_prefs on creation and release on destroy.

 mongoc/mongoc-cursor.c | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit d683a1468354d0588489e4a7d29aa74d1a75b24d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 12:31:23 2013 -0700

    cluster: more documentation.

 mongoc/mongoc-cluster-private.h |  2 +-
 mongoc/mongoc-cluster.c         | 88 ++++++++++++++++++++++++++++-------------
 2 files changed, 61 insertions(+), 29 deletions(-)

commit c115499a68cda1fd2c044981b0090b52f4172341
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 12:06:29 2013 -0700

    cluster: more documentation.

 mongoc/mongoc-cluster.c | 107 ++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 107 insertions(+)

commit dfae1e9a8ba6401feb14ccf1887e0181cbde2292
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 11:43:52 2013 -0700

    cluster: use mongoc_rpc_needs_gle().

 mongoc/mongoc-cluster.c | 35 +++--------------------------------
 1 file changed, 3 insertions(+), 32 deletions(-)

commit 09abe2ca2f29986b3d068d4d98de9e8b9783bd76
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 11:43:43 2013 -0700

    rpc: add mongoc_rpc_needs_gle() to check if rpc+write-conern needs gle

 mongoc/mongoc-rpc-private.h | 21 +++++++++++---------
 mongoc/mongoc-rpc.c         | 48 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 60 insertions(+), 9 deletions(-)

commit 4770407b7ae18883064671bfae3e949d293dd3ff
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Aug 16 11:43:21 2013 -0700

    write-concern: make getters use const mongoc_write_concern_t.

 mongoc/mongoc-write-concern.c | 10 +++++-----
 mongoc/mongoc-write-concern.h | 10 +++++-----
 2 files changed, 10 insertions(+), 10 deletions(-)

commit a2ae3bd71180af0a0339d825bcfbf336de1a712b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 18:20:42 2013 -0700

    cluster: more docs.

 mongoc/mongoc-cluster.c | 44 ++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 40 insertions(+), 4 deletions(-)

commit fd66b8059bb90fbba4686c2a2bbbd004d517043c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 18:15:46 2013 -0700

    cluster: rename node_run_command to run_command.

 mongoc/mongoc-cluster.c | 46 +++++++++++++++++++++++++---------------------
 1 file changed, 25 insertions(+), 21 deletions(-)

commit e5ee83f2936e6ca29ec778162134f0a7f38032aa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 18:10:13 2013 -0700

    database: add documentation for API.

 mongoc/mongoc-database.c | 227 +++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 202 insertions(+), 25 deletions(-)

commit eca613fb8ebba8aaddf909576baaee2beb3a5b4e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 17:54:15 2013 -0700

    cluster: use mongoc_cluster_node_run_command() for "isMaster".

 mongoc/mongoc-cluster.c | 102 ++++++++++--------------------------------------
 1 file changed, 20 insertions(+), 82 deletions(-)

commit f9411fc67983b08eb5ee07e75def067c36050e28
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 17:48:58 2013 -0700

    cluster: add more docs.

 mongoc/mongoc-cluster.c | 213 +++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 173 insertions(+), 40 deletions(-)

commit 13f566cbc2eb9ffd29a4824b03557354585ee677
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 16:00:28 2013 -0700

    stream-tls: add setsockopt() for TLS streams.

 mongoc/mongoc-stream-tls.c | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 48e40b19d3e4e0ca0346bffebc6bb60ef2148d79
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 15:51:26 2013 -0700

    stream: use setsockopt to set timeouts on sockets.

 mongoc/mongoc-cluster.c |  8 ++++++++
 mongoc/mongoc-stream.c  | 31 +++++++++++++++++++++++++++++++
 mongoc/mongoc-stream.h  | 39 ++++++++++++++++++++++++++-------------
 3 files changed, 65 insertions(+), 13 deletions(-)

commit 978d20d9bac4794f6bddeb4f0d6d86d1f1b89656
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 15:31:28 2013 -0700

    sockets: plumb sockettimeoutms from connection URI.
    
    This defaults to 1 hour.

 mongoc/mongoc-buffer-private.h  |  1 +
 mongoc/mongoc-buffer.c          |  4 +++-
 mongoc/mongoc-cluster-private.h |  1 +
 mongoc/mongoc-cluster.c         | 36 ++++++++++++++++++++++++++----------
 tests/mock-server.c             |  4 ++--
 5 files changed, 33 insertions(+), 13 deletions(-)

commit 97d97f3107645694588dd929e26f883cc45cc41e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 15:23:49 2013 -0700

    tls: assert on tls.

 mongoc/mongoc-stream-tls.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d0e24b3ae9081118108bcab5d1c5d108d81f46bf
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 15:02:14 2013 -0700

    tls: start on mongoc_stream_tls_t.

 mongoc/Makefile.include    |  12 ++
 mongoc/mongoc-stream-tls.c | 336 +++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream-tls.h |  38 +++++
 3 files changed, 386 insertions(+)

commit abff9f270356396c8d0469c18defb557c70181ad
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 14:36:13 2013 -0700

    stat: more padding.

 tools/mongoc-stat.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f31f603786f0a3ff27fee289431c3b4afa0e82bd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 14:36:00 2013 -0700

    cluster: add counters for failed/successful authentication.

 configure.ac                | 10 +++++++++-
 mongoc/mongoc-cluster.c     |  3 +++
 mongoc/mongoc-counters.defs |  4 ++++
 3 files changed, 16 insertions(+), 1 deletion(-)

commit 28bfd97adf0dc1580ca1b7526964b4ae374606ea
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Aug 15 14:21:28 2013 -0700

    build: use LIBADD, not LIBS.

 examples/Makefile.include | 2 +-
 mongoc/Makefile.include   | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit ba1d5e74b4345940cd63fea51b364edd04dbc8c6
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 18:45:54 2013 -0700

    stream: cleanup.

 mongoc/mongoc-stream.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit e960485b07e687a8f83d9c6e45ae27dcae8565c0
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 18:36:03 2013 -0700

    stream-unix: rename mongoc_stream_new_from_unix() mongoc_stream_unix_new().

 mongoc/mongoc-client.c     | 4 ++--
 mongoc/mongoc-stream.c     | 4 ++--
 mongoc/mongoc-stream.h     | 3 ++-
 tests/mock-server.c        | 2 +-
 tests/test-mongoc-buffer.c | 2 +-
 5 files changed, 8 insertions(+), 7 deletions(-)

commit 12d3acd49ee0cb0c489d71e5f98b5782889dd613
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 17:58:26 2013 -0700

    client: test authentication failure.

 tests/test-mongoc-client.c | 38 ++++++++++++++++++++++++++++++++++++--
 1 file changed, 36 insertions(+), 2 deletions(-)

commit 4f73cc05adf61c225522c092420a8d37e05b9893
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 17:25:49 2013 -0700

    database: add mongoc_database_add_user() helper.

 mongoc/mongoc-database.c   | 77 ++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-database.h   |  4 +++
 tests/test-mongoc-client.c | 34 ++++++++++++++++++--
 3 files changed, 112 insertions(+), 3 deletions(-)

commit 295f9e93cb76a13b97553135dde04fc4b6e83db4
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 17:09:50 2013 -0700

    collection: add mongoc_collection_save().

 mongoc/mongoc-collection.c | 42 ++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h |  4 ++++
 2 files changed, 46 insertions(+)

commit efa8a2c249339ee2d709b489584e57a2712b8882
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 17:09:21 2013 -0700

    util: add mongoc-util for private utility functions.

 mongoc/Makefile.include      |  2 ++
 mongoc/mongoc-cluster.c      | 26 +++-----------------------
 mongoc/mongoc-util-private.h | 34 ++++++++++++++++++++++++++++++++++
 mongoc/mongoc-util.c         | 41 +++++++++++++++++++++++++++++++++++++++++
 4 files changed, 80 insertions(+), 23 deletions(-)

commit 86632fbd8c83427fbab437e55e97e6450583aada
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 14:58:35 2013 -0700

    cluster: implement authentication for direct connections.

 mongoc/mongoc-cluster.c | 288 ++++++++++++++++++++++++++++++++++++++++++++++--
 mongoc/mongoc-error.h   |   2 +
 2 files changed, 278 insertions(+), 12 deletions(-)

commit 272c2188c380b39a1f1973f809d70719446c2e2a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 14:58:05 2013 -0700

    uri: free username/password on destroy.

 mongoc/mongoc-uri.c | 2 ++
 1 file changed, 2 insertions(+)

commit 514716a63c5727c2d4dd6b818f0c50024a7bc283
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 13:50:19 2013 -0700

    uri: auth_source defaults to ?authSource, database, "admin".

 mongoc/mongoc-uri.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fff86bf0b8d1e9b02a1d5d8bd233d7e2223dfb3a
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Aug 14 10:48:59 2013 -0700

    cluster: rename needs_auth to requires_auth for cluster.

 mongoc/mongoc-cluster-private.h | 2 +-
 mongoc/mongoc-cluster.c         | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 41e1e2cc3d5bac618d205a78a34287d6999e8b96
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 13 14:01:32 2013 -0700

    cluster: unify node disconnect code.
    
    also tracks if we need to re-authenticate.

 mongoc/mongoc-cluster-private.h |  5 ++++-
 mongoc/mongoc-cluster.c         | 36 ++++++++++++++++++++++++++++--------
 2 files changed, 32 insertions(+), 9 deletions(-)

commit 49dacbde5f7fc9c86cf3b0aa751a2e52b4cfa71d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 13 13:53:34 2013 -0700

    cluster: check read_prefs to see if we need to communicate with primary.

 mongoc/mongoc-cluster.c | 21 ++++++---------------
 1 file changed, 6 insertions(+), 15 deletions(-)

commit 8c0dd6cb5ace56102ff0571fc445c7a22d144583
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 13 13:26:51 2013 -0700

    uri: make "admin" the default authSource for client authentication.

 mongoc/mongoc-uri.c     | 15 +++++++++++++++
 mongoc/mongoc-uri.h     |  1 +
 tests/test-mongoc-uri.c |  6 ++++++
 3 files changed, 22 insertions(+)

commit ccb52a5b01e647ad6eed9d170e42046ec8cc565f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Aug 13 12:12:44 2013 -0700

    uri: add accessors and tests for username/password.

 mongoc/mongoc-uri.c     | 16 ++++++++++++++++
 mongoc/mongoc-uri.h     |  4 +++-
 tests/test-mongoc-uri.c |  6 ++++++
 3 files changed, 25 insertions(+), 1 deletion(-)

commit 6bd876fc773e5278669250ee71c6ada0175e59b3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 16:21:56 2013 -0700

    tests: stub out client test.
    
    this will be used for auth tests as well.

 .gitignore                 |  1 +
 tests/Makefile.include     |  7 +++++++
 tests/test-mongoc-client.c | 44 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 52 insertions(+)

commit c1ee2cc2f4b9a8f07121e89f4300b466fdf9d9de
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 14:41:49 2013 -0700

    cursor: kill server cursor when destroying a mongoc_cursor_t.

 mongoc/mongoc-cursor.c | 25 ++++++++++++++++++++++---
 1 file changed, 22 insertions(+), 3 deletions(-)

commit 654bbbd8e9ae1cee3e4875b7b8099040b63de2d7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 14:41:11 2013 -0700

    cursor: whitespace cleanup.

 mongoc/mongoc-cursor.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit ed45e2045c495f76f4da6c5489080f58aa7a977b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 14:16:49 2013 -0700

    tests: don't leak stream.

 tests/test-mongoc-buffer.c | 2 ++
 1 file changed, 2 insertions(+)

commit a6a290ab08a8f0ee4369222b8af510086fa27e30
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 14:14:40 2013 -0700

    uri: fix leak in hostname parsing.

 mongoc/mongoc-uri.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 36dc5011004d9d2bfb9a364d950bd449d7e06caa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 14:11:35 2013 -0700

    tests: fix leak in test.

 tests/test-mongoc-collection.c | 1 +
 1 file changed, 1 insertion(+)

commit ce24469d98905a0efea7f2278cffb6f8da292e33
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 13:51:28 2013 -0700

    server: add mock server to use for testing components.

 .gitignore               |   1 +
 tests/Makefile.include   |   7 ++
 tests/mock-server.c      | 216 +++++++++++++++++++++++++++++++++++++++++++++++
 tests/mock-server.h      |  54 ++++++++++++
 tests/test-mock-server.c |  73 ++++++++++++++++
 5 files changed, 351 insertions(+)

commit 0e5842d14bd06d5e70e80925a223439eb9d740b1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 09:22:48 2013 -0700

    rpc: no need to pack structures since we scatter/gather values.

 mongoc/mongoc-rpc-private.h | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 1c985166cd3a61e503a4ffc5c2438260dcb5f437
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Aug 12 06:33:17 2013 -0700

    build: use @libdir@ in .pc.in.

 libmongoc-1.0.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 412cb5038794976041ad8e71c5aaf3aa6d22970b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 15:17:10 2013 -0700

    counters: add counter for ingress errors.

 mongoc/mongoc-cluster.c     | 4 ++++
 mongoc/mongoc-counters.defs | 3 +++
 2 files changed, 7 insertions(+)

commit 916b8fba0a3586be5b2a565d288a2cda6df84667
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 15:12:00 2013 -0700

    counters: remove cnx counters, they are redundant.

 mongoc/mongoc-counters.defs | 4 ----
 mongoc/mongoc-stream.c      | 1 +
 2 files changed, 1 insertion(+), 4 deletions(-)

commit 5dd36fac07310c82af8b41c6102f9f6ebae9e666
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 14:50:04 2013 -0700

    counters: implement ingress counters.

 mongoc/mongoc-cluster.c     | 36 ++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-counters.defs |  4 ++--
 2 files changed, 38 insertions(+), 2 deletions(-)

commit 9ecae32fef2454b9751aafd82b3efd3203cd8e33
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 14:27:13 2013 -0700

    counters: increment rpc egress counters on sendv(), try_sendv().

 mongoc/mongoc-cluster.c | 38 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)

commit 84bf5e4bb330961882e7d4dde858e73cd7eccfde
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 14:26:13 2013 -0700

    counters: add reply counters.

 mongoc/mongoc-counters.defs | 2 ++
 1 file changed, 2 insertions(+)

commit a72771a355b3f8832709c81bfb3e9bc655bae7af
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 14:09:45 2013 -0700

    cluster: send getlasterror on try_sendv().

 mongoc/mongoc-cluster.c | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)

commit 8d4d2b11e47b9369d871955d35b09df340831439
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 02:31:04 2013 -0700

    counters: shorten gap in counter numbers.

 mongoc/mongoc-counters.defs | 52 ++++++++++++++++++++++-----------------------
 1 file changed, 26 insertions(+), 26 deletions(-)

commit 638dd48e6f99f87c6f682f4af9aef587096de452
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 00:26:49 2013 -0700

    counters: cleanup counters implementation.
    
    This should be more readable and easier to debug. Additionally, we try
    to cleanup our shared memory segment on shutdown with atexit(). If the
    process exits uncleanly, we have the benefit of being able to extract
    the counter information after the fact.

 mongoc/mongoc-counters.c    | 262 ++++++++++++++++++++++++++++++++------------
 mongoc/mongoc-counters.defs |   4 +-
 tools/mongoc-stat.c         | 180 +++++++++++++++++++++---------
 3 files changed, 317 insertions(+), 129 deletions(-)

commit 8ecdf055a554094ecc5a08ee1fe695bd8ce85f77
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 25 00:25:19 2013 -0700

    build: mongoc-stat does not need libmongoc.

 tools/Makefile.include | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 595777f66efc3198bd7932ebff8e30045a463aca
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 24 01:52:44 2013 -0700

    stat: fix shm_open() on OS X.

 tools/mongoc-stat.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit cf65f48fd9d900e806cb2612679480723bdd71da
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 24 01:48:42 2013 -0700

    tools: make mongoc-stat an installable tool.

 Makefile.am               |   1 +
 examples/Makefile.include |   6 --
 examples/mongoc-stat.c    | 136 ----------------------------------------------
 tools/Makefile.include    |   7 +++
 tools/mongoc-stat.c       | 136 ++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 144 insertions(+), 142 deletions(-)

commit db09c13f4c613099269dcae190ca6215c54a80fc
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jul 24 01:37:54 2013 -0700

    counters: add rdtscp comment.

 mongoc/mongoc-counters-private.h | 3 +++
 1 file changed, 3 insertions(+)

commit 0ab8fc62d6e51ea492e327ced498c268efb6d72e
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jul 24 01:33:08 2013 -0700

    counters: close shm_open() fd once mmap() has been called.

 mongoc/mongoc-counters.c | 1 +
 1 file changed, 1 insertion(+)

commit 474aab3e5184b8064015cdadaed5370f5fb6fd3f
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jul 24 01:21:07 2013 -0700

    mongoc-stat: add tool to dump counters from libmongoc-1.0 based application.
    
    libmongoc-1.0 creates a new shared memory segment that can be used to
    dump application counters. This tool loads up the segment for a particular
    process and dumps the current state of the counters.

 .gitignore                |   1 +
 examples/Makefile.include |   6 ++
 examples/mongoc-stat.c    | 136 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 143 insertions(+)

commit efccc28bbaf76fd62df325500a306b7ba41c6388
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jul 24 01:19:59 2013 -0700

    cursor: add counters.

 mongoc/mongoc-cursor.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 0d90f09028e8b223f0c02a3fbd92054c3f7ff22c
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jul 24 01:19:53 2013 -0700

    client: add counters.

 mongoc/mongoc-client.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 4194b30da1b415f626a8ccfcfcc9bf5a1542c9e5
Author: Christian Hergert <christian@hergert.me>
Date:   Wed Jul 24 01:19:33 2013 -0700

    counters: store counters in shared memory segment.
    
    This includes a header that can be used to navigate the counters.

 mongoc/mongoc-counters.c | 86 ++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 79 insertions(+), 7 deletions(-)

commit 4adfa5600c9ac21bc4fef94507bef3d9983c1af9
Author: Christian Hergert <christian@hergert.me>
Date:   Tue Jul 23 23:09:08 2013 -0700

    counters: store counters in shared memory with shm_open() and mmap().

 configure.ac                     |  9 +++++++++
 examples/Makefile.include        |  2 +-
 libmongoc-1.0.pc.in              |  2 +-
 mongoc/Makefile.include          |  1 +
 mongoc/mongoc-counters-private.h |  6 +++---
 mongoc/mongoc-counters.c         | 41 ++++++++++++++++++++++++++++++++++++++--
 tests/Makefile.include           | 25 +++++++++++++-----------
 7 files changed, 68 insertions(+), 18 deletions(-)

commit f0b2a90c52bafae343d8f5e733a0c8ff035dfd48
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 23 21:15:36 2013 -0700

    counters: build on OS X.
    
    We still need to find a good fallback for OS X to get the current
    processor id. This just falls back to the worst case of using atomic
    increments.
    
    We also need to add the rdtscp variant for newer CPUs.

 mongoc/mongoc-counters-private.h | 36 ++++++++++++++++++++++++++++++------
 mongoc/mongoc-counters.c         | 21 +++++----------------
 2 files changed, 35 insertions(+), 22 deletions(-)

commit a27f14ce4cd4c26171325ed14ec70c632a0eae19
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 23 18:35:43 2013 -0700

    counters: add counter for stream ingress/egress bytes.

 mongoc/mongoc-counters.defs | 2 ++
 mongoc/mongoc-stream.c      | 4 ++++
 2 files changed, 6 insertions(+)

commit ccf8692ec47ecd223947880bb9981b124d0e3df7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 23 18:35:24 2013 -0700

    counters: implement _add() variant for counters.

 mongoc/mongoc-counters-private.h | 6 ++++++
 1 file changed, 6 insertions(+)

commit 290543bca6d5b22915947e33bcac1e6690b4fd1d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 23 18:31:33 2013 -0700

    stream: inc/dec stream counters.

 mongoc/mongoc-stream.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit e954bc2a0e98701aef91ef0fdaaca253a6b404a7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 23 18:12:30 2013 -0700

    counters: add counters to libmongoc.
    
    This uses a library ctor() to initialize the counters memory. We need
    to consider the use of shared memory segments so that we can dump counters
    from an external program. Helpful for poor mans sampler.

 mongoc/Makefile.include          |  6 +++
 mongoc/mongoc-client-pool.c      |  6 +++
 mongoc/mongoc-counters-private.h | 73 ++++++++++++++++++++++++++++++++++
 mongoc/mongoc-counters.c         | 76 ++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-counters.defs      | 84 +++++++++++++++++++++++++---------------
 5 files changed, 214 insertions(+), 31 deletions(-)

commit 665513d541f39c94a16d1da1f39bfd2d111df0c3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 23 16:12:37 2013 -0700

    counters: add counter definition for XMACROS.
    
    These will eventually be processed to create ultra-fast performance
    counters.

 mongoc/mongoc-counters.defs | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)

commit 2e78a1e2c3e98035ad58d03b2a160311a02023bb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 22 15:14:25 2013 -0700

    tests: more node scoring tests.

 tests/test-mongoc-read-prefs.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit ebf7cfcd2112a0ad02d2f402cebce4ae54631b9f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 22 15:10:15 2013 -0700

    tests: add test for read-prefs scoring.
    
    Scoring the read preferences is done so that we can choose which
    nodes match a read preference and then sort them.

 .gitignore                     |  1 +
 tests/Makefile.include         |  7 +++++++
 tests/test-mongoc-read-prefs.c | 45 ++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 53 insertions(+)

commit 92995cfb4c66d4695776c0366525a86cf6cce895
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 19 14:29:30 2013 -0700

    client: plumb default read preferences into collection.

 mongoc/mongoc-client.c             | 29 ++++++++++++++++++++++++++++-
 mongoc/mongoc-client.h             |  4 ++++
 mongoc/mongoc-collection-private.h |  1 +
 mongoc/mongoc-collection.c         |  4 ++++
 4 files changed, 37 insertions(+), 1 deletion(-)

commit 86c33eb23b915335230757a4ef3cf9b9bd335cda
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 19 14:03:31 2013 -0700

    collection: plumb default write concern to collection structure.

 mongoc/mongoc-client.c             |  2 +-
 mongoc/mongoc-collection-private.h |  7 ++++---
 mongoc/mongoc-collection.c         | 11 ++++++++---
 3 files changed, 13 insertions(+), 7 deletions(-)

commit 84ad51c3984c24da06ad7a8d1625530c6a5b8033
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 19 14:03:11 2013 -0700

    client: add write-concern to mongoc_client_t.

 mongoc/mongoc-client.c | 27 +++++++++++++++++++++++++++
 mongoc/mongoc-client.h |  5 +++++
 2 files changed, 32 insertions(+)

commit ff332a0745031036ddb9f1cf8025dccf8064522d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 19 14:02:30 2013 -0700

    collection: use namespace name, not collection name.

 mongoc/mongoc-collection.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 744c57b572b1042ff9f1af7050569d99d443e752
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 19 13:42:55 2013 -0700

    collection: remove result from mongoc_collection_insert().
    
    This isn't really useful in this context, so let's remove it before
    it becomes a pain.

 mongoc/mongoc-collection.c     | 24 ++++--------------------
 mongoc/mongoc-collection.h     |  1 -
 tests/test-mongoc-collection.c | 10 +++-------
 3 files changed, 7 insertions(+), 28 deletions(-)

commit 2f00cbc152e94fef378dd0d4300dface8e3a9df6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 18 15:51:32 2013 -0700

    collection: add some documentation.

 mongoc/mongoc-collection.c | 68 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 68 insertions(+)

commit 3514b2f5e1c052868a14df5660ba0175ca57aea4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 18 14:55:26 2013 -0700

    build: bump requirement to libbson-1.0 >= 0.1.10.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4487d491cd1122ee620b34011e558a8d3c7e6a03
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 19:02:46 2013 -0700

    tests: add test for mongoc_collection_count().

 tests/test-mongoc-collection.c | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)

commit 43bf892a858807dd20cf0b8e80712831bfd84b4a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 19:00:45 2013 -0700

    collection: rearrange limit and skip to match other signatures.

 mongoc/mongoc-collection.c | 2 +-
 mongoc/mongoc-collection.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 52a4e8dc0efe55938afe5944877bfe3423ad8193
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 19:00:16 2013 -0700

    collection: set command success if no failure.

 mongoc/mongoc-collection.c | 2 ++
 1 file changed, 2 insertions(+)

commit 197a4ba60fdf751af3c5d7e0d24c0bc3900e978d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 18:46:52 2013 -0700

    collection: implement mongoc_collection_count().

 mongoc/mongoc-collection.c | 45 +++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h |  7 +++++++
 2 files changed, 52 insertions(+)

commit 94d820253767d37761fcdb0b0efb2c7bc8bdd8cf
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 18:46:39 2013 -0700

    collection: use bson_iter_as_bool() to simplify "ok" check.

 mongoc/mongoc-collection.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit c6386cd22cb55b9a67f373f6528a71fa4ca95887
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 17:59:36 2013 -0700

    tests: add test for mongoc_collection_delete().

 tests/test-mongoc-collection.c | 56 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)

commit 6aa6cb1eb22e9eb5006c5d49e096993611ad6c15
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 17:43:42 2013 -0700

    collection: add mongoc_collection_drop_index().

 mongoc/mongoc-collection.c | 22 ++++++++++++++++++++++
 mongoc/mongoc-collection.h |  3 +++
 2 files changed, 25 insertions(+)

commit af33e9b3fa1ee7b32272582c40280bd51dba8c70
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 17:34:11 2013 -0700

    collection: simplify command submission and error handling of reply.

 mongoc/mongoc-collection.c | 113 +++++++++++++++++++++++++++++++++------------
 mongoc/mongoc-collection.h |  67 ++++++++++++++++-----------
 2 files changed, 123 insertions(+), 57 deletions(-)

commit a00f5feaa7d0eea69a8dd1c06bf472810d767e47
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 17:33:51 2013 -0700

    client: add MONGOC_NAMESPACE_MAX for max namespace length.

 mongoc/mongoc-client.h | 3 +++
 1 file changed, 3 insertions(+)

commit e9a6e86c329c0c6932305b86dbec365a0c93e223
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 16:06:01 2013 -0700

    collection: use mongoc_client_recv_gle() on OP_DELETE.

 mongoc/mongoc-collection.c | 13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)

commit 5b54be4af912b638ddb972985807d75092d02674
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 16:00:58 2013 -0700

    collection: use mongoc_client_recv_gle().

 mongoc/mongoc-collection.c | 83 +++++++++++++++++-----------------------------
 1 file changed, 30 insertions(+), 53 deletions(-)

commit fa4fab2e7a68aa3890cd2befb1ed3b9b13c0a8db
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 16:00:38 2013 -0700

    cluster: automatically send "getlasterror" command based on write-concern.
    
    If the write-concern dictates that a "getlasterror" command should be
    sent, then pipeline the getlasterror after the RPC.
    
    Caller is expected to call mongoc_client_recv_gle() to fetch the
    response in the order of RPCs sent.

 mongoc/mongoc-cluster.c | 47 +++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 41 insertions(+), 6 deletions(-)

commit c4b586b8ce73597dd6bd4a29c250ee1929216005
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 15:59:20 2013 -0700

    client: implement internal function mongoc_client_recv_gle().
    
    This function will handle the details of receiving the OP_REPLY to
    a "getlasterror" command. It will parse the resulting RPC and deal
    with generating a proper bson_error_t.

 mongoc/mongoc-client-private.h |  3 ++
 mongoc/mongoc-client.c         | 99 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 102 insertions(+)

commit 613ef8e22c4697d65fca0ae301e342657808e92f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 15:57:54 2013 -0700

    write-concern: add internal function mongoc_write_concern_has_gle()
    
    This function will check to see if the write-concern requires sending
    a "getlasterror" command to the server.

 mongoc/mongoc-write-concern-private.h |  1 +
 mongoc/mongoc-write-concern.c         | 19 +++++++++++++++++++
 2 files changed, 20 insertions(+)

commit 69f91f4b602d190f91a3f984875cb5d309e1644a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 14:14:24 2013 -0700

    cluster: remove mongoc_cluster_getlasterror() signature.

 mongoc/mongoc-cluster-private.h | 6 ------
 1 file changed, 6 deletions(-)

commit 4df4114e5d115a6a13a522215eab10491a0ef0e4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 13:45:49 2013 -0700

    cluster: plumbing for adding getlasterror in mongoc_cluster_t.

 mongoc/mongoc-cluster.c | 55 +++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 51 insertions(+), 4 deletions(-)

commit 91e3a0bd06d1a236764dbc6fa0c3b8a1f6cd9144
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 13:25:29 2013 -0700

    client: whitespace.

 mongoc/mongoc-client.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 62a73591c120732dff9942ced3f5466c26ec6ac3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 13:21:43 2013 -0700

    python: implement tp_dealloc for pymongoc_client_t.

 bindings/python/pymongoc-client.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit dc9c41e243125484fd9f88b4dffdef814c6312d3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 13:18:05 2013 -0700

    python: handle failure to create client.

 bindings/python/pymongoc-client.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 091d6c8939b65900b7593f87bd4e375f0be80895
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 17 13:14:11 2013 -0700

    python: start on prototype idea for pymongoc, a python binding.

 Makefile.am                       |   4 ++
 bindings/python/Makefile.include  |  23 +++++++++
 bindings/python/pymongoc-client.c | 104 ++++++++++++++++++++++++++++++++++++++
 bindings/python/pymongoc-client.h |  47 +++++++++++++++++
 bindings/python/pymongoc.c        |  51 +++++++++++++++++++
 configure.ac                      |   7 +++
 mongoc/mongoc.h                   |   1 +
 7 files changed, 237 insertions(+)

commit 3969e05fbbeacfed423a0fbb4f4842285118fad4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 15 18:50:54 2013 -0700

    tests: Make target host configurable.

 tests/test-mongoc-collection.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 183ee322f9ebea3a86285d922b6bde581a7b4a82
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 15 14:24:38 2013 -0700

    build: require libbson-1.0 >= 0.1.9.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 491c7a7d228ddb09858b235f557f7a8248e642aa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 17:40:32 2013 -0700

    stream: a few cleanups and add guard for max timeout.

 mongoc/mongoc-stream.c | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit bf247be3d08ebd318265f52e5117d8a51a1c0c4a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 14:17:44 2013 -0700

    client: add netinet/in.h for IPPROTO_TCP.
    
    Linux and OS X include this via dependencies by default, others may not.

 mongoc/mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit 9b678860f72c062707069731088528f28c4f100d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 14:12:41 2013 -0700

    stream: use ETIMEDOUT instead of ETIME.

 mongoc/mongoc-stream.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 4ed278f66459b3e7a842d0d4a9fa2de87c068756
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 13:46:50 2013 -0700

    stream: only poll() if we fail to read all bytes in first recv/send
    
    This saves us a call to poll() unless the sendmsg() or recvmsg() failed
    to send or receive the entire contents in the first shot. Since we are
    using O_NONBLOCK, those methods will not block and it is therefore okay
    to apply the timeout policy after attempting.

 mongoc/mongoc-stream.c | 80 +++++++++++++++++++++++++-------------------------
 1 file changed, 40 insertions(+), 40 deletions(-)

commit e91062f00c54d258789da819234126064e95c760
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 13:44:17 2013 -0700

    stream: remove superfluous setting of revents.

 mongoc/mongoc-stream.c | 4 ----
 1 file changed, 4 deletions(-)

commit 2d292540a1ec5d3d02689efbf3b7d58a51bd53ac
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 13:37:05 2013 -0700

    stream: rename written to r.
    
    Written is confusing since it is not actually accurate here. Let's just
    use r for return value of syscalls since we interprit the result
    anyway.

 mongoc/mongoc-stream.c | 60 +++++++++++++++++++++++++-------------------------
 1 file changed, 30 insertions(+), 30 deletions(-)

commit 090e7603e6d8a9274d5feb5506456af6a694c56b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 13:34:51 2013 -0700

    build: add message of doom!

 configure.ac | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

commit 1cc022d81df0e1855c845aad3e2dfdb8c91a7548
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jul 11 12:22:26 2013 -0700

    docs: add API/ABI disclaimer.

 README.md | 2 ++
 1 file changed, 2 insertions(+)

commit 6d0adde1a11ae328dfba8ea109f7733354914ba5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 10 12:02:46 2013 -0700

    stream: check to see if setting O_NONBLOCK failed.

 mongoc/mongoc-stream.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit a43ef27288371b16f34f69af61136330d7f25164
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 19:34:50 2013 -0700

    mongoc-ping: add examnple program to ping a MongoDB server.

 .gitignore                |  1 +
 Makefile.am               |  2 ++
 examples/Makefile.include |  6 ++++++
 examples/mongoc-ping.c    | 52 +++++++++++++++++++++++++++++++++++++++++++++++
 tests/Makefile.include    |  1 -
 5 files changed, 61 insertions(+), 1 deletion(-)

commit daad0042ac9f56d121e2c539404037420198d708
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 16:50:09 2013 -0700

    whitespace.

 mongoc/mongoc-database.h | 38 +++++++++++++-------------------------
 1 file changed, 13 insertions(+), 25 deletions(-)

commit c4afc473d94f1f283e36e0b19e87984afb624e0a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 16:38:48 2013 -0700

    database: apply read prefs to commands.

 mongoc/mongoc-database.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit a735be1e4c296aa753dd3e761b1e113be0362625
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 15:39:55 2013 -0700

    collection: use default read_prefs and write_concern.

 mongoc/mongoc-collection.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 84610037b2ec8e68bc6070e7ae8421ad99bb7cd3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 13:06:48 2013 -0700

    database: allow setting default read-prefs and write-concern.

 mongoc/mongoc-database-private.h |  5 ++++
 mongoc/mongoc-database.c         | 61 ++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-database.h         |  8 ++++++
 3 files changed, 74 insertions(+)

commit 60a3720b697b6765616e6fddd30e4c4c480b3881
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 12:48:51 2013 -0700

    collection: allow setting default read-prefs and write-concern.

 mongoc/mongoc-collection-private.h |  3 ++
 mongoc/mongoc-collection.c         | 61 ++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h         |  7 +++++
 3 files changed, 71 insertions(+)

commit 4f8be87facfe6015946e61e71d8a019f891ad9ac
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 9 11:36:37 2013 -0700

    stream: use poll() to apply network sendmsg() timeout.

 mongoc/mongoc-stream.c | 83 ++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 77 insertions(+), 6 deletions(-)

commit 6f2244f7376a50ea85aceb6bd3ef232db65fb18a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 20:32:39 2013 -0700

    stream: add comments to mongoc_stream_unix_readv().

 mongoc/mongoc-stream.c | 60 ++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 53 insertions(+), 7 deletions(-)

commit e533d62ef5e828be9511f863c5f288ed498a746a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 19:04:53 2013 -0700

    stream: handle read timeouts by using poll() before recvmsg()/readv().
    
    Also, use recvmsg() by default and fallback to readv() if ENOTSOCK. This
    should never really happen since we only use files in the unit tests.
    Hence, making it a fallback path.

 mongoc/mongoc-stream.c | 96 ++++++++++++++++++++++++++++++++++----------------
 1 file changed, 65 insertions(+), 31 deletions(-)

commit 5d2b504738146b1402807173acdde9ba0280736f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 19:03:40 2013 -0700

    stream: just return the same result as sendmsg().

 mongoc/mongoc-stream.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cf6dd1f7e391a35ef181edba40ea9a3bd73fc06c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 18:33:44 2013 -0700

    stream: remove debug code.

 mongoc/mongoc-stream.c | 2 --
 1 file changed, 2 deletions(-)

commit 1b127d4fd2b878156fb76ac948fba33324666aea
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 18:30:38 2013 -0700

    stream: apply timeout_msec to poll() timeout.

 mongoc/mongoc-stream.c | 76 +++++++++++++++++++++++++++++++-------------------
 1 file changed, 47 insertions(+), 29 deletions(-)

commit f7c4eb83819582cdc2d3af4966b324dfa9c5e85b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 15:41:51 2013 -0700

    stream: calculate millseconds until timeout of poll().

 mongoc/mongoc-stream.c | 44 ++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 42 insertions(+), 2 deletions(-)

commit 7d255f85c1ebddbe9e5e13f106bd62372c60663e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 15:25:55 2013 -0700

    stream: set O_NONBLOCK on file descriptor.

 mongoc/mongoc-stream.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 787ad0fa10be8ea642f701b614fd9bd62ee498a7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 15:00:11 2013 -0700

    stream: stub out call to poll() for timeouts.

 mongoc/mongoc-stream.c | 21 ++++++++++++++++++---
 1 file changed, 18 insertions(+), 3 deletions(-)

commit ffdc6eee1db883111b71b3a524a2b03ddff7a2cc
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 14:47:13 2013 -0700

    stream: plumb timeout_msec parameter for readv and writev.
    
    These will eventually have read and write timeouts applied by moving
    to O_NONBLOCK sockets and using poll() for timeouts.

 mongoc/mongoc-buffer.c  |  4 +--
 mongoc/mongoc-cluster.c |  6 ++--
 mongoc/mongoc-stream.c  | 82 +++++++++++++++++++++++++++----------------------
 mongoc/mongoc-stream.h  | 15 ++++++---
 4 files changed, 60 insertions(+), 47 deletions(-)

commit 960223c1d478bc66f95909100c724654c1136fe3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 14:28:16 2013 -0700

    write-concern: use constants for write concern checks during freeze.

 mongoc/mongoc-write-concern.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit ea83ea9badaf558122c1f9f9483282620357d12c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 13:09:09 2013 -0700

    write-concern: implement mongoc_write_concern_copy().

 mongoc/mongoc-write-concern.c | 21 +++++++++++++++++++++
 mongoc/mongoc-write-concern.h | 33 +++++++++++++++++----------------
 2 files changed, 38 insertions(+), 16 deletions(-)

commit 9f57d94fac3692aef313284f845585a13f5367fe
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 13:03:34 2013 -0700

    write-concern: add tests for mongoc_write_concern_t.

 .gitignore                        |  1 +
 mongoc/mongoc-write-concern.c     |  8 +++--
 mongoc/mongoc-write-concern.h     |  4 +++
 tests/Makefile.include            |  7 ++++
 tests/test-mongoc-write-concern.c | 75 +++++++++++++++++++++++++++++++++++++++
 5 files changed, 92 insertions(+), 3 deletions(-)

commit c3f92306cb42d672b75a8a21377dbebc1c3032c3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 8 11:47:32 2013 -0700

    read-prefs: implement mongoc_read_prefs_copy().

 mongoc/mongoc-read-prefs-private.h |  4 ++--
 mongoc/mongoc-read-prefs.c         | 45 +++++++++++++++++++++++++-------------
 mongoc/mongoc-read-prefs.h         | 17 +++++++-------
 3 files changed, 41 insertions(+), 25 deletions(-)

commit ff6c4564cea4eec430ec02a70fe7e3d581279199
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 5 18:55:29 2013 -0700

    read-prefs, write-concern: plumb read prefs and write concern.
    
    Modify signature of functions to use read prefs and write concern options.

 mongoc/mongoc-client-private.h  |   5 +-
 mongoc/mongoc-client.c          |  33 +++------
 mongoc/mongoc-client.h          |   6 --
 mongoc/mongoc-cluster-private.h |  62 +++++++++--------
 mongoc/mongoc-cluster.c         | 151 ++++++++--------------------------------
 mongoc/mongoc-collection.c      |  54 +++++++-------
 mongoc/mongoc-collection.h      |  56 ++++++++-------
 mongoc/mongoc-cursor-private.h  |   5 +-
 mongoc/mongoc-cursor.c          |  25 +++----
 mongoc/mongoc-database.c        |   4 +-
 mongoc/mongoc-database.h        |   3 +-
 11 files changed, 149 insertions(+), 255 deletions(-)

commit 279dcba646ddbf552178d0cd64147166fd058430
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 5 17:50:35 2013 -0700

    read-prefs: implement getters for read prefs.

 mongoc/mongoc-read-prefs.c | 16 ++++++++++++++++
 mongoc/mongoc-read-prefs.h |  2 ++
 2 files changed, 18 insertions(+)

commit d7217e6d6cc8304504721b06b9029c192fe9665b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 5 17:39:18 2013 -0700

    read-prefs: implement read preference scoring.
    
    This will result in nodes that can be sorted by score before being
    selected.

 mongoc/mongoc-read-prefs-private.h |   4 +-
 mongoc/mongoc-read-prefs.c         | 192 ++++++++++++++++++++++++++++---------
 mongoc/mongoc-read-prefs.h         |   1 +
 3 files changed, 149 insertions(+), 48 deletions(-)

commit 6cf59c662f40e24b415b7dbcf99cb433f85eb6ec
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 5 15:02:53 2013 -0700

    read-prefs: update TODO.

 mongoc/mongoc-read-prefs.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b6fa2cb2d6bfe8d11253086f25e03ca0906d33c1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 5 14:41:44 2013 -0700

    read-prefs: check read preference tags on each cluster node.

 mongoc/mongoc-read-prefs.c | 31 ++++++++++++++++++++++++++++++-
 1 file changed, 30 insertions(+), 1 deletion(-)

commit cc9fe8776f77f85ec441243c3580e749b907fa86
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jul 5 14:26:41 2013 -0700

    read-prefs: start implementing read-prefs functionality.
    
    _mongoc_read_prefs_accepts() is an internal function that will perform
    the check to see if a node supports a read request. It can return 0, 1
    or 2 depending on if the node cannot support the request, is preferred,
    or is a fallback.

 mongoc/mongoc-read-prefs-private.h | 10 ++++-
 mongoc/mongoc-read-prefs.c         | 91 ++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-read-prefs.h         | 19 +++++++-
 3 files changed, 117 insertions(+), 3 deletions(-)

commit 943e5b37a930d371f88ee315510af82821b58005
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 20:16:04 2013 -0700

    read-prefs: stub out read-prefs structure.

 mongoc/Makefile.include            |  3 +++
 mongoc/mongoc-read-prefs-private.h | 37 ++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-read-prefs.c         | 39 ++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-read-prefs.h         | 38 +++++++++++++++++++++++++++++++++++++
 4 files changed, 117 insertions(+)

commit 0ce895276fc199007bae5423150ffb85361724d1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 19:27:28 2013 -0700

    write-concern: add getters to mongoc_write_concern_t.

 mongoc/mongoc-write-concern.c | 40 ++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-write-concern.h |  5 +++++
 2 files changed, 45 insertions(+)

commit d6f7115ae27cde615af8a6e4e926640542e9400c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 19:02:53 2013 -0700

    write-concern: add mongoc-write-concern.h to mongoc.h

 mongoc/mongoc.h | 1 +
 1 file changed, 1 insertion(+)

commit fc9916370fbf2d5f7766d84c340948a027c9bb26
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 18:58:37 2013 -0700

    write-concern: implement freezing of write concern.
    
    This function will also compile the getlasterror to be used by RPCs
    submitting the getlasterror OP_QUERY operation.

 mongoc/mongoc-write-concern-private.h |  3 +-
 mongoc/mongoc-write-concern.c         | 93 ++++++++++++++++++++++++++++++++---
 2 files changed, 89 insertions(+), 7 deletions(-)

commit 3fdb8240b8e1950aa37da3b1489da8849fe22b05
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 18:57:01 2013 -0700

    write-concern: add docs.

 mongoc/mongoc-write-concern.c | 57 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)

commit d9d90cb2e12e44f7e833bd30eea7612b2488c6d2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 16:13:30 2013 -0700

    write-concern: add write-concern implementation.

 mongoc/Makefile.include               |  3 ++
 mongoc/mongoc-write-concern-private.h | 45 +++++++++++++++++
 mongoc/mongoc-write-concern.c         | 92 +++++++++++++++++++++++++++++++++++
 mongoc/mongoc-write-concern.h         |  4 +-
 4 files changed, 142 insertions(+), 2 deletions(-)

commit ea141d66301646c4a281005ea2b2fca01170e298
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 15:55:15 2013 -0700

    write-concern: add a write concern for mongoc.

 mongoc/mongoc-write-concern.h | 48 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit c65fbddf18a45a7090842b8f3312b6df36fef0b3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 14:27:57 2013 -0700

    cluster: release iovec array on destruction.

 mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 857e6745ff753da7f21606d7cf7795c55eb319e8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 00:41:15 2013 -0700

    buffer: get next power of two from required size.

 mongoc/mongoc-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3d8620232e6858c9aa845040dfa8f27d0639b277
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 00:41:01 2013 -0700

    buffer: readability cleanup.

 mongoc/mongoc-buffer.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 46e0e4dbaa8e61b411746714fcc2209770ac3f07
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 00:40:33 2013 -0700

    buffer: check buffer->len before memmove().

 mongoc/mongoc-buffer.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit dea9bb969c9d8d5cfbd6f372a88b68a631d5182d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jul 3 00:40:10 2013 -0700

    buffer: use ssize_t for signed value.

 mongoc/mongoc-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 383485f621d0ad83b649f66fc0b1122d9fac1581
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 2 21:42:04 2013 -0700

    buffer: add a little protection to mongoc-buffer.

 mongoc/mongoc-buffer.c     | 3 +--
 tests/test-mongoc-buffer.c | 3 +++
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 32dc94fd6756c17986915d857b4f75cf6754763e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 2 16:51:39 2013 -0700

    stream: add more guards to mongo_stream_unix_writev().
    
    Assert all over the place since this can be a source for interesting
    errors if it is at all wrong.
    
    Also track written count from return of sendmsg().

 mongoc/mongoc-stream.c | 26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit 7d9e41cd8ac33b242af81243ba682b9a3ac083da
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 2 16:50:27 2013 -0700

    rpc: add assertions on iov.iov_len.

 mongoc/mongoc-rpc.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 3372e8bf6a73d5ad9699c39c68754212e5d87942
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 2 16:50:15 2013 -0700

    buffer: add some guards.

 mongoc/mongoc-buffer.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 03ecb061c644f39cc2a081a682cacce9b8c14c9d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jul 2 15:14:47 2013 -0700

    stream: use sendmsg() instead of writev().
    
    writev() will get delivered SIGPIPE on errors from the other side of a
    socket, so use sendmsg() variant of send() to avoid that.

 mongoc/mongoc-stream.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 758c56babc070b5f90fe439beda6c5953ae9011d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 15:22:58 2013 -0700

    tests: change database to "test" before dropping.

 tests/test-load.c | 3 +++
 1 file changed, 3 insertions(+)

commit 5fdfb11b9a3387bcff593d46377f85f4b527686b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 15:22:41 2013 -0700

    test: command should be const.

 tests/test-load.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9d52ef4371b943eafa496e05bef30d9824bc87e3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 15:22:28 2013 -0700

    rpc: add debug assert.

 mongoc/mongoc-rpc.c | 1 +
 1 file changed, 1 insertion(+)

commit 88e4c7c9a82cae750783b107dff77cfd9c933ded
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 15:22:19 2013 -0700

    database: use proper command name for dropDatabase.

 mongoc/mongoc-database.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 29cd8a81d1c0f65f1249a8d9fabd0af9c005cba5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 15:22:03 2013 -0700

    database: build proper namespace for command_simple.

 mongoc/mongoc-database.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 0de6f3624edee39187e6e545facab1df7701729f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 15:21:39 2013 -0700

    database: prefer strncpy over snprintf.

 mongoc/mongoc-database.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c827fc3640c99d7ad39b24bfbda862903c09d02d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jul 1 12:29:57 2013 -0700

    rpc: make CSTRING field a const char*.
    
    We no longer need to memcpy() the cstring fields into the RPC structure.
    It is not needed since reading in rpc structures also requires a
    mongoc_buffer_t for buffering the incoming packet.

 mongoc/mongoc-cluster.c     | 10 ++++++----
 mongoc/mongoc-collection.c  | 17 ++++++++---------
 mongoc/mongoc-cursor.c      |  4 ++--
 mongoc/mongoc-rpc-private.h |  2 +-
 mongoc/mongoc-rpc.c         |  6 +++---
 tests/test-mongoc-rpc.c     | 14 ++++++--------
 6 files changed, 26 insertions(+), 27 deletions(-)

commit 76cbae2ebd8a4ccb807dd5a83cae1e42d03ad485
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 24 13:18:16 2013 -0700

    opcode: rename op_code to opcode.

 mongoc/mongoc-cluster.c    | 10 +++++-----
 mongoc/mongoc-collection.c |  8 ++++----
 mongoc/mongoc-cursor.c     | 10 +++++-----
 mongoc/mongoc-rpc.c        | 16 ++++++++--------
 mongoc/op-delete.def       |  2 +-
 mongoc/op-get-more.def     |  2 +-
 mongoc/op-header.def       |  2 +-
 mongoc/op-insert.def       |  2 +-
 mongoc/op-kill-cursors.def |  2 +-
 mongoc/op-msg.def          |  2 +-
 mongoc/op-query.def        |  2 +-
 mongoc/op-reply.def        |  2 +-
 mongoc/op-update.def       |  2 +-
 tests/test-mongoc-rpc.c    | 32 ++++++++++++++++----------------
 14 files changed, 47 insertions(+), 47 deletions(-)

commit ebf9be5ef832dc60ec7ed0af3181737b994a870c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 24 12:57:59 2013 -0700

    collection: do getlasterror and allow out param for result document.

 mongoc/mongoc-collection-private.h |  1 +
 mongoc/mongoc-collection.c         | 85 ++++++++++++++++++++++++++++----------
 mongoc/mongoc-collection.h         |  1 +
 tests/test-mongoc-collection.c     |  6 ++-
 4 files changed, 69 insertions(+), 24 deletions(-)

commit 522f386370cbecc315d57fcf8615a1f045d5a51e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 24 11:39:11 2013 -0700

    cluster: "ismaster" is strlen of 8.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0683d359c1df26ddd365ae0780d27af61115f899
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 21 14:45:40 2013 -0700

    cluster: add mongoc_cluster_getlasterror().
    
    Helper to call a getlasterror command. However, internal code will not
    want to use this as it is convenience for external programs. Internal
    code will want to pipeline the getlasterror into the mongoc_client_sendv()
    function. That will come shortly.

 mongoc/mongoc-client.c          | 16 +++++++
 mongoc/mongoc-client.h          |  6 +++
 mongoc/mongoc-cluster-private.h | 52 ++++++++++++----------
 mongoc/mongoc-cluster.c         | 99 ++++++++++++++++++++++++++++++++++++++++-
 4 files changed, 149 insertions(+), 24 deletions(-)

commit ef881f798fd2487a4890d01553bcf1649f1e7f12
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 21 12:48:47 2013 -0700

    client: header cleanup.

 mongoc/mongoc-client.h | 56 ++++++++++++++++----------------------------------
 1 file changed, 18 insertions(+), 38 deletions(-)

commit f74639db39f9fe43d981320458a3a6d20163096c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 21 12:45:52 2013 -0700

    tests: add test for mongoc_collection_update().

 tests/test-mongoc-collection.c | 66 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 66 insertions(+)

commit d625ad21a3a0e5d2928b55b7e81dcbc96669e5c3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 21 12:44:35 2013 -0700

    stream: fix writev() loop when iovcnt is zero.

 mongoc/mongoc-stream.c | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit ca53c774e27195af8e2ea0226293a6a9a4cb4e31
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 21 12:44:08 2013 -0700

    stream: set fd = -1 on destroy.

 mongoc/mongoc-stream.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 9cac24f37342ae247a09cc54d71628ec3614e93c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 21 12:43:44 2013 -0700

    cluster: add gather assertion.

 mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 01b920384685fc391148d9b5dae4768ef5140f3e
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 19:17:18 2013 -0700

    tests: check proper return value from buffer test.

 tests/test-mongoc-buffer.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6228c1c9df52577a802aaece19bb1abe60dab6c4
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 19:16:57 2013 -0700

    buffer: add some more checks to buffer filling.

 mongoc/mongoc-buffer.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit cc9a5acc2f187800c9f4ec23ff2b588568355f4e
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 19:08:46 2013 -0700

    cursor: initialize buffer

 mongoc/mongoc-cursor.c | 2 ++
 1 file changed, 2 insertions(+)

commit 4112383dc9b9d565f4dc17bce2d4a019fe35c237
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 19:02:58 2013 -0700

    cluster: return TRUE in successful ismaster call.

 mongoc/mongoc-cluster.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 618c4554b2858b316e0a87b90c2ce77301a5c5bf
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 19:00:11 2013 -0700

    cluster: add assertion that we got the right buffer length.

 mongoc/mongoc-cluster.c | 2 ++
 1 file changed, 2 insertions(+)

commit 5e106d35730b96315cd69ce9bf0a58080e09954e
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 19:00:00 2013 -0700

    cluster: copy from data buffer into msg_len.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 81f570f3a0fdd38813124e21408e2c6cf753fd40
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 18:59:28 2013 -0700

    buffer: increment buffer length after read.

 mongoc/mongoc-buffer.c | 2 ++
 1 file changed, 2 insertions(+)

commit 4dd8682192d36f65d63cb2d0f5d9aa2dad88ea50
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 18:51:52 2013 -0700

    rpc: remove legacy include.

 tests/test-mongoc-rpc.c | 1 -
 1 file changed, 1 deletion(-)

commit a52e77854393ba6d8edaf7be71dfc40f5b09938b
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 18:51:40 2013 -0700

    tests: update buffer test for new api.

 tests/test-mongoc-buffer.c | 19 ++++++-------------
 1 file changed, 6 insertions(+), 13 deletions(-)

commit e1be0647a973546f8c160a8f047f6d203e0c7d35
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 18:51:27 2013 -0700

    tests: remove event tests.

 tests/Makefile.include    |   7 -
 tests/test-mongoc-event.c | 500 ----------------------------------------------
 2 files changed, 507 deletions(-)

commit 1c58b1790bf125798ff2d2dc392631ba9a4c0001
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 18:51:01 2013 -0700

    buffer: fix invalid write buffer.

 mongoc/mongoc-buffer.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 88040480ca0be31b408b1174508ede8f5b527e49
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 18:23:19 2013 -0700

    event: rip out more of legacy mongoc_event_t code.

 mongoc/mongoc-cluster.c  | 117 +++++++++++++++++++++++++++++++++++++++--------
 mongoc/mongoc-database.c |   1 -
 mongoc/mongoc-rpc.c      |   2 +-
 mongoc/mongoc-stream.c   |  88 ++++++++---------------------------
 mongoc/mongoc-stream.h   |   2 -
 tests/test-load.c        |   1 -
 6 files changed, 120 insertions(+), 91 deletions(-)

commit 661f96252c27a2a3d34e012179d0ca4dbde9d040
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 17:22:44 2013 -0700

    cursor: migrate cursor to mongoc_rpc_t.

 mongoc/mongoc-cursor-private.h |   2 +
 mongoc/mongoc-cursor.c         | 117 +++++++++++++++++++++++++++--------------
 mongoc/mongoc-rpc-private.h    |  16 +++---
 mongoc/mongoc-rpc.c            |  23 ++++++++
 4 files changed, 112 insertions(+), 46 deletions(-)

commit 2d65ecd544d8c2d858f28a459fe0305aa51399c5
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 16:47:35 2013 -0700

    collection: use mongoc_rpc_t.

 mongoc/mongoc-collection-private.h |  1 +
 mongoc/mongoc-collection.c         | 77 +++++++++++++++++++++++++-------------
 2 files changed, 53 insertions(+), 25 deletions(-)

commit fe21ba4fdc72055b455652190302b43fddde6b39
Author: Christian Hergert <christian@hergert.me>
Date:   Thu Jun 20 16:07:42 2013 -0700

    cluster: start replacing mongoc_event_t with mongoc_rpc_t.

 mongoc/Makefile.include         |   2 -
 mongoc/mongoc-client-private.h  |  54 ++----
 mongoc/mongoc-client.c          |  94 ++-------
 mongoc/mongoc-cluster-private.h |  17 +-
 mongoc/mongoc-cluster.c         | 264 ++++++++++---------------
 mongoc/mongoc-cursor-private.h  |   5 +-
 mongoc/mongoc-event-private.h   | 416 ----------------------------------------
 mongoc/mongoc-event.c           | 368 -----------------------------------
 8 files changed, 141 insertions(+), 1079 deletions(-)

commit e6a929922e83550ada02ea2b88fda3ea4af2861a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 20 14:59:22 2013 -0700

    buffer: start on new buffer design. breaks everything.

 mongoc/mongoc-buffer-private.h |  50 +++------
 mongoc/mongoc-buffer.c         | 240 +++++++++++++++++------------------------
 2 files changed, 113 insertions(+), 177 deletions(-)

commit 8d9fa4df7cc87ccdc9d84645f3e735eba073ff10
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 20 13:51:25 2013 -0700

    event: use opcode from mongoc-opcode.h.

 mongoc/mongoc-event-private.h | 14 +-------------
 1 file changed, 1 insertion(+), 13 deletions(-)

commit 3500ecdc50f7027d004c493d0341efc948c8b101
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 20 13:42:11 2013 -0700

    stream: add non-vectored stream reader

 mongoc/mongoc-stream.c | 32 ++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream.h |  3 +++
 2 files changed, 35 insertions(+)

commit 983e7fb75d5efba075c553e210ab404d8013785a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 20 13:41:49 2013 -0700

    opcode: add header for opcode.

 mongoc/Makefile.include |  1 +
 mongoc/mongoc-opcode.h  | 44 ++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc.h         |  1 +
 3 files changed, 46 insertions(+)

commit 121af67f0d3bf91ef46c59f74c8052aa638076f0
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 12:08:33 2013 -0700

    tests: update scatter/gather test names.

 tests/test-mongoc-rpc.c | 64 ++++++++++++++++++++++++-------------------------
 1 file changed, 32 insertions(+), 32 deletions(-)

commit c449dd5d5a12651d7cd739ba88ee37b103f36134
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 12:06:44 2013 -0700

    tests: add test for mongoc_rpc_scatter_update().

 tests/test-mongoc-rpc.c | 50 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 50 insertions(+)

commit 13e1da2fee33544230f37620ca123bcae591f542
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 11:58:56 2013 -0700

    rpc: copy NUL byte in cstring.

 mongoc/mongoc-rpc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 642e8aa665cae89ecd61fc5925b18ec53a1f421b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 11:58:43 2013 -0700

    rpc: cleanup rpc parsing.

 mongoc/mongoc-rpc.c | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

commit 1025fe56485f81e8d467455b4d12ea6e65673777
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 11:58:15 2013 -0700

    rpc: copy 4 bytes for int32 and 8 bytes for int64.

 mongoc/mongoc-rpc.c | 22 ++++++++++------------
 1 file changed, 10 insertions(+), 12 deletions(-)

commit e842df91610fc95b99e68d069f777748bd6730d4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:50:30 2013 -0700

    tests: stub out test for reply scatter.

 tests/test-mongoc-rpc.c | 46 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 46 insertions(+)

commit a9c88f04fcb2840f1595fc9c40dcc7b68b6f0c74
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:38:10 2013 -0700

    tests: add test for mongoc_rpc_query_scatter().

 tests/test-mongoc-rpc.c | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)

commit a6397992b7770b20f35e092f115f9ee855aa950d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:33:59 2013 -0700

    tests: add test for mongoc_rpc_msg_gather().

 tests/test-mongoc-rpc.c | 26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)

commit c2d60aa8b08b3433ad4128cbfc3f9be872a3da41
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:32:11 2013 -0700

    tests: add test for mongoc_rpc_kill_cursors_t.

 tests/test-mongoc-rpc.c | 39 ++++++++++++++++++++++++++++++++++++++-
 1 file changed, 38 insertions(+), 1 deletion(-)

commit 65b3a711aa4e11565b4c6fa96425e2fc74eaffef
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:31:55 2013 -0700

    rpc: implement int64 array and bson array gather.

 mongoc/mongoc-rpc.c | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit fae1c1633e449ab10c49377dc5e87af89b0a15b2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:23:18 2013 -0700

    tests: add test for mongoc_rpc_scatter_insert().

 tests/test-mongoc-rpc.c | 44 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)

commit d7b465c7fe9709539b660abd9cd85e4e44d078b8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:18:24 2013 -0700

    rpc: add test for mongoc_rpc_get_more_scatter().

 tests/test-mongoc-rpc.c | 31 ++++++++++++++++++++++++++++++-
 1 file changed, 30 insertions(+), 1 deletion(-)

commit 8871d7a51d333e5201c46357abebfe45cb23650f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 01:14:51 2013 -0700

    rpc: start on mongoc_rpc_scatter().
    
    This also includes some adjustments to the rpc mechanism so that we
    can encode/decode a bit easier. We verify strictly that bson documents
    are proper sizing so that we can trust their lengths later.

 mongoc/mongoc-rpc-private.h |  17 +++--
 mongoc/mongoc-rpc.c         | 173 ++++++++++++++++++++++++++++++++++++++++++--
 tests/test-mongoc-rpc.c     |  42 +++++++++--
 3 files changed, 212 insertions(+), 20 deletions(-)

commit b9c6bc38005d9fa2cadcaa6a3179a52058938a36
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 00:23:10 2013 -0700

    stream: use TCP_NOPUSH on OS X.

 mongoc/mongoc-stream.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 35dea4f4284379bf62a5d904a1a4dc908312c03a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 00:03:44 2013 -0700

    tests: update unit test names.

 tests/test-mongoc-rpc.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit f55462cbce49c6caf311538ea76460e91b4d1828
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 19 00:02:44 2013 -0700

    tests: add test for mongoc_rpc_update_t.

 tests/test-mongoc-rpc.c | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit 14add125db4d8faf6c4c3241356be76ef03d672d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 23:56:57 2013 -0700

    tests: add test for mongoc_rpc_reply_t.

 mongoc/mongoc-rpc-private.h |  2 +-
 mongoc/mongoc-rpc.c         | 32 +++++++++++++++-----------------
 mongoc/op-reply.def         |  2 +-
 tests/test-mongoc-rpc.c     | 36 ++++++++++++++++++++++++++++++++++++
 4 files changed, 53 insertions(+), 19 deletions(-)

commit 5d7b19aab2be7cbfba10009928b121464ac31d0f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 23:56:00 2013 -0700

    tests: add test for mongoc_rpc_msg_t.

 tests/test-mongoc-rpc.c | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit 3846a55eb6d2215cf38ad5cfebd4264b512a3d13
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 19:18:52 2013 -0700

    tests: add test for mongoc_rpc_kill_cursors_t.

 mongoc/mongoc-rpc.c     |  4 ++++
 tests/test-mongoc-rpc.c | 23 ++++++++++++++++++++++-
 2 files changed, 26 insertions(+), 1 deletion(-)

commit 80f71b9a468b33098c214ce6fcf86601c88d142d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 19:04:49 2013 -0700

    test: add get_more, query, and insert tests.

 tests/test-mongoc-rpc.c | 87 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 87 insertions(+)

commit 5d44486abedf8d1114e1e31d6885e2b64159994c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 19:04:33 2013 -0700

    rpc: add printf for raw buffer fields.

 mongoc/mongoc-rpc.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 7e139505176bacef7ea02d0daa0686dfba1e7676
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 17:54:09 2013 -0700

    rpc: add test-mongoc-rpc.

 .gitignore              |   1 +
 mongoc/mongoc-rpc.c     |   1 +
 tests/Makefile.include  |   7 ++++
 tests/test-mongoc-rpc.c | 102 ++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 111 insertions(+)

commit b800f74202315a2573950f1514a237faa347f20e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 17:51:49 2013 -0700

    rpc: calculate message length as we gather io.

 mongoc/mongoc-rpc.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 317bb700c5ba128f5927ed8e87d70a431917f340
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 17:51:19 2013 -0700

    rpc: implement mongoc_rpc_printf().

 mongoc/mongoc-rpc-private.h |   1 +
 mongoc/mongoc-rpc.c         | 100 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 101 insertions(+)

commit 4922ad307c10cd591228e0bb0e34db63d51cf9bf
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 17:49:41 2013 -0700

    array: allow & before mongoc_array_index().

 mongoc/mongoc-array-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 301ab59caebedad7a3fc574e1ff6dffebb034e0e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 16:54:55 2013 -0700

    rpc: just call function and break;

 mongoc/mongoc-rpc.c | 24 ++++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)

commit 514d11ab1d14a6e24755b9f2029dbbbaac7283dc
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 15:40:29 2013 -0700

    client: start plumbing alternate rpc design.

 mongoc/mongoc-client-private.h  |   9 ++++
 mongoc/mongoc-client.c          |  34 +++++++++++++
 mongoc/mongoc-cluster-private.h |  13 +++++
 mongoc/mongoc-cluster.c         | 109 ++++++++++++++++++++++++++++++++++++++++
 4 files changed, 165 insertions(+)

commit 0d07041ac46b3889a9dff14cbba96d085060da0b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 15:40:06 2013 -0700

    rpc: make mongoc_rpc_gather() void.

 mongoc/mongoc-rpc-private.h |  6 +++---
 mongoc/mongoc-rpc.c         | 11 +++++------
 2 files changed, 8 insertions(+), 9 deletions(-)

commit 9fb4a63b482a3e542bf747d2341dbd85d2bde3f6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 15:39:23 2013 -0700

    stream: handle short writes in mongoc_stream_unix_t.

 mongoc/mongoc-stream.c | 36 +++++++++++++++++++++++++++++++-----
 1 file changed, 31 insertions(+), 5 deletions(-)

commit ba6f3c20c0ff6ad16e540684629fa2dc2bafd243
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 15:08:02 2013 -0700

    rpc: start prototyping an xmacro based rpc design.

 mongoc/Makefile.include     |   2 +
 mongoc/mongoc-rpc-private.h |  88 +++++++++++++++++++
 mongoc/mongoc-rpc.c         | 201 ++++++++++++++++++++++++++++++++++++++++++++
 mongoc/op-delete.def        |  11 +++
 mongoc/op-get-more.def      |  11 +++
 mongoc/op-header.def        |   7 ++
 mongoc/op-insert.def        |  10 +++
 mongoc/op-kill-cursors.def  |   9 ++
 mongoc/op-msg.def           |   8 ++
 mongoc/op-query.def         |  13 +++
 mongoc/op-reply.def         |  12 +++
 mongoc/op-update.def        |  12 +++
 12 files changed, 384 insertions(+)

commit dadc066c6660c7d30d869eae06e68febbbf23c73
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 15:07:02 2013 -0700

    build: alphabetical

 mongoc/Makefile.include | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dacd872e31dd6b2438a8f8ef1d9542b483faac1a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 14:42:59 2013 -0700

    array: make arrays stack allocated and add clear function.

 mongoc/mongoc-array-private.h |  4 +++-
 mongoc/mongoc-array.c         | 24 ++++++++++--------------
 tests/test-mongoc-array.c     | 25 +++++++++++++++++--------
 3 files changed, 30 insertions(+), 23 deletions(-)

commit 48613ff992fda02b424b20b23e6ea67149589e3b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 18 13:51:33 2013 -0700

    array: add mongoc_array_t for power of 2 growing array.
    
    This will be used in a few places to make alloca() code a bit safer
    so we don't need to worry about stack overflows.
    
    For example, with the new RPC packet parsing/generation code coming, this
    will allow for struct iovec to be added to the array before being sent to
    the destination socket. Doing so will clean up pipelining of RPCs.

 .gitignore                    |  1 +
 mongoc/Makefile.include       |  2 +
 mongoc/mongoc-array-private.h | 54 +++++++++++++++++++++++++++
 mongoc/mongoc-array.c         | 86 +++++++++++++++++++++++++++++++++++++++++++
 tests/Makefile.include        |  7 ++++
 tests/test-mongoc-array.c     | 38 +++++++++++++++++++
 6 files changed, 188 insertions(+)

commit 7f78868dab7a438049e39228d28d08174fc406f8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 17 18:00:25 2013 -0700

    all: add support for coallescing event delivery.
    
    If multiple events are sent together to mongoc_client_send(), the
    underlying tcp stream will be corked to allow for events to share a
    single packet.
    
    Ideally, longer term, we would use a single writev() with all of the
    events gathered buffers. This adds two syscalls which is undesired.
    But it does get the packets joined which is a good idea for now.
    
    Another option would be to make mongoc_stream_cork() add a temporary
    iovec array that gets appended to on mongoc_stream_writev() and flushed
    on a call to mongoc_stream_uncork().

 mongoc/mongoc-client-private.h  |   3 +-
 mongoc/mongoc-client.c          |  23 ++++---
 mongoc/mongoc-cluster-private.h |  38 ++++++------
 mongoc/mongoc-cluster.c         | 129 +++++++++++++++++++++++++++-------------
 mongoc/mongoc-collection.c      |   6 +-
 mongoc/mongoc-cursor.c          |   7 +--
 6 files changed, 130 insertions(+), 76 deletions(-)

commit 81b52e5a7a551f16354bae961d619149819147aa
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 17 17:53:56 2013 -0700

    stream: add support to cork and uncork tcp streams.
    
    Ideally, we would just use writev() with the vectors from multiple
    mongoc_event_t structures. However, that is a bit difficult in the
    current design. We can instead cork and uncork if multiple events
    are coallesced into a single mongoc_client_send().

 mongoc/mongoc-stream.c | 61 ++++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream.h |  4 ++++
 2 files changed, 65 insertions(+)

commit 3dfb723b5906b3f451f56b52ec7ce49d2ba9bcc9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 17 15:05:41 2013 -0700

    tests: add test for mongoc_collection_insert().

 .gitignore                     |  2 +-
 tests/Makefile.include         |  7 ++++
 tests/test-mongoc-collection.c | 73 ++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 81 insertions(+), 1 deletion(-)

commit 66ae745076110aedcec55f0f9aae68de0ceb254d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 17 14:42:44 2013 -0700

    collection: add insert/update/delete to mongoc_collection_t.
    
    This does not contain error checking roundtrips from the server yet.
    That will be added based on options provided in the @options parameter.

 mongoc/mongoc-collection-private.h |   1 +
 mongoc/mongoc-collection.c         | 118 +++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h         |  43 ++++++++------
 tests/test-load.c                  |   2 +-
 4 files changed, 146 insertions(+), 18 deletions(-)

commit 9c27f33b2e19e4b575eaf51641fd8ed1a5549b79
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 17:03:44 2013 -0700

    database: make mongoc_database_command_simple() public API.

 mongoc/mongoc-database.c | 2 +-
 mongoc/mongoc-database.h | 6 ++++++
 2 files changed, 7 insertions(+), 1 deletion(-)

commit a3c7be6f51f9d503d3dfdbe97df5d8525fc21b58
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 17:03:30 2013 -0700

    client: use mongodb://127.0.0.1/ as default connection string.

 mongoc/mongoc-client.c | 4 ++++
 1 file changed, 4 insertions(+)

commit f8500788e41a6c75c3899cfc086a79cc737b43d2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 17:03:17 2013 -0700

    build: add missing header.

 mongoc/Makefile.include | 1 +
 1 file changed, 1 insertion(+)

commit f365228da51b6b6d5def5f83a95db800bba8bfee
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 16:30:47 2013 -0700

    tests: release collection so valgrind shows no leaks.

 tests/test-load.c | 1 +
 1 file changed, 1 insertion(+)

commit 7788ec72bfd6e5489b075284f021c21fa4f273c5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 14:47:21 2013 -0700

    database: implement mongoc_database_drop().

 mongoc/mongoc-database.c | 61 ++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-database.h |  5 ++++
 mongoc/mongoc-error.h    |  2 ++
 tests/test-load.c        |  5 ++++
 4 files changed, 73 insertions(+)

commit c2ac3a0cd057a3c742931f6dfa38f872cb69eb02
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 14:37:09 2013 -0700

    collection: implement mongoc_collection_drop().

 mongoc/mongoc-client.c             |  7 +---
 mongoc/mongoc-collection-private.h |  5 ++-
 mongoc/mongoc-collection.c         | 75 ++++++++++++++++++++++++++++++++++----
 mongoc/mongoc-collection.h         |  5 +++
 tests/test-load.c                  |  6 +++
 5 files changed, 83 insertions(+), 15 deletions(-)

commit 2ff11febfb01d53881d8d0a2be5042bc10be1500
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 13:20:42 2013 -0700

    collection: implement mongoc_collection_find().

 mongoc/mongoc-collection.c | 18 ++++++++++++++++++
 tests/test-load.c          | 27 +++++++++++++++++++++++++++
 2 files changed, 45 insertions(+)

commit 555bccacfd807d8f364c6b00d92f664e1c3b4a52
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 12:57:19 2013 -0700

    collection: start on collection structure.

 mongoc/Makefile.include            |  2 ++
 mongoc/mongoc-client.c             | 19 ++++++++++++++
 mongoc/mongoc-client.h             |  7 ++++++
 mongoc/mongoc-collection-private.h | 45 +++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.c         | 46 ++++++++++++++++++++++++++++++++++
 mongoc/mongoc-collection.h         | 51 ++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc.h                    |  1 +
 7 files changed, 171 insertions(+)

commit 51d8d4b76754f1fb88aa9ac790fa688c96e0a4c6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 12:56:59 2013 -0700

    cursor: remove error path on cursor creation.

 mongoc/mongoc-cursor-private.h | 3 +--
 mongoc/mongoc-cursor.c         | 3 +--
 mongoc/mongoc-database.c       | 5 ++---
 mongoc/mongoc-database.h       | 3 +--
 tests/test-load.c              | 2 +-
 5 files changed, 6 insertions(+), 10 deletions(-)

commit c16b6f33182e18f431efd7fc9f0369fe6fd23c64
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri Jun 14 12:25:54 2013 -0700

    cursor: handle query failure and invalid cursor flags on OP_REPLY.

 mongoc/mongoc-cursor.c | 75 ++++++++++++++++++++++++++++++++++++++++++++++----
 mongoc/mongoc-error.h  |  9 +++---
 2 files changed, 74 insertions(+), 10 deletions(-)

commit 6067999416b060eb6d2b0d4268edf4aaa7c9f45c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 13 18:09:05 2013 -0700

    cursor: adjust cursor API to result in less consumer code.

 mongoc/mongoc-cursor.c | 44 +++++++++++++++++++++--------
 mongoc/mongoc-cursor.h |  8 ++++--
 tests/test-load.c      | 77 ++++++++++++++++++++++++--------------------------
 3 files changed, 74 insertions(+), 55 deletions(-)

commit 974a6de5696ae4b7ea9c2c3de1bc9082ab1cd0cb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 13 15:48:58 2013 -0700

    buffer: only realloc on destroy if data is allocated.

 mongoc/mongoc-buffer.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit c68d1ef4a7f3f41a023162c4649b48ce0683e46d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 13 15:24:48 2013 -0700

    cursor: make cursor execution lazy until mongoc_cursor_next() is called.

 mongoc/mongoc-cursor-private.h |  47 ++++++++------
 mongoc/mongoc-cursor.c         | 135 ++++++++++++++++++++++++++++-------------
 mongoc/mongoc-database.c       |  26 +-------
 3 files changed, 127 insertions(+), 81 deletions(-)

commit c1347d08302ef516863581182078bf5e961f34f5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 12 13:44:02 2013 -0700

    cursor: print errors.

 tests/test-load.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 53ca13f7c5ae27190ee947ca5e26f7c8a9a40e96
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 12 13:42:44 2013 -0700

    cursor: progress on cursor iteration.

 mongoc/mongoc-cursor-private.h |  16 +++++-
 mongoc/mongoc-cursor.c         | 120 +++++++++++++++++++++++++++++++++++------
 mongoc/mongoc-cursor.h         |   5 +-
 mongoc/mongoc-database.c       |   2 +
 mongoc/mongoc-error.h          |   3 ++
 tests/test-load.c              |   2 +-
 6 files changed, 128 insertions(+), 20 deletions(-)

commit a8cac31b79995204531a20d941335907adbf390b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 11 18:29:12 2013 -0700

    cursor: allow fetching next reply document.

 mongoc/mongoc-cursor-private.h |  1 +
 mongoc/mongoc-cursor.c         | 18 ++++++++++++++++++
 2 files changed, 19 insertions(+)

commit bc8fd757df970244eec7e30ccd702c33bb7dabc2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 11 18:23:34 2013 -0700

    cursor: set error message on failure.

 mongoc/mongoc-cursor.c | 5 +++++
 mongoc/mongoc-error.h  | 2 +-
 mongoc/mongoc-stream.c | 2 +-
 3 files changed, 7 insertions(+), 2 deletions(-)

commit 691534808255af39a92402d66d0e97920748a621
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 11 18:13:01 2013 -0700

    database: cleanup.

 mongoc/mongoc-database.c | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 9b4b624b8de253981d9be872c4dcef8e8a4bbb70
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 11 18:00:48 2013 -0700

    cursor: avoid extra allocation for mongoc_event_t.

 mongoc/mongoc-cursor-private.h |  5 +++--
 mongoc/mongoc-cursor.c         | 30 +++++++++++++++++----------
 mongoc/mongoc-database.c       | 46 +++++++++++++++---------------------------
 3 files changed, 38 insertions(+), 43 deletions(-)

commit dcfb044e4ed4c8cc17ee04476c797b903a6efa9a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 11 17:22:43 2013 -0700

    cursor: transfer event ownership to cursor.

 mongoc/mongoc-cursor-private.h |  1 +
 mongoc/mongoc-cursor.c         | 19 ++++++++++++++++++
 mongoc/mongoc-database.c       | 45 ++++++++++++++++++++++--------------------
 3 files changed, 44 insertions(+), 21 deletions(-)

commit cc0d0e3ef420068697ae4336c86f95719b9657e7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 15:42:16 2013 -0700

    database: more plumbing of cursors from database command.

 mongoc/mongoc-client.c   | 14 ++++++++++++++
 mongoc/mongoc-client.h   |  6 ++++++
 mongoc/mongoc-cursor.c   | 15 +++++++++++++++
 mongoc/mongoc-cursor.h   |  3 ++-
 mongoc/mongoc-database.c |  7 ++++++-
 mongoc/mongoc.h          |  1 +
 tests/test-load.c        | 50 +++++++++++++++++++++++++++++++-----------------
 7 files changed, 76 insertions(+), 20 deletions(-)

commit 0f0388e662b19e731536494866665c8acb383f9f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 14:52:43 2013 -0700

    cursor: start stubbing out cursor structure.

 mongoc/Makefile.include        |  2 ++
 mongoc/mongoc-cursor-private.h | 48 +++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-cursor.c         | 49 ++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-database.c       |  2 ++
 4 files changed, 101 insertions(+)

commit d6e191612c84e33bf06ee85b242a115542e7bed3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 14:52:20 2013 -0700

    client: implement mongoc_client_stamp().

 mongoc/mongoc-client.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit a477822bde8af5747ac4e57485d55ff2e8f4c790
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 14:35:24 2013 -0700

    cluster: add stamp for tracking connection changes.

 mongoc/mongoc-client-private.h  |  5 +++++
 mongoc/mongoc-cluster-private.h |  3 +++
 mongoc/mongoc-cluster.c         | 31 +++++++++++++++++++++++++++++++
 mongoc/mongoc-database.c        |  6 +-----
 4 files changed, 40 insertions(+), 5 deletions(-)

commit 940e4206120e33667e4616260d0a398a40d89f0a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:58:15 2013 -0700

    tests: cleanup received event.

 tests/test-load.c | 1 +
 1 file changed, 1 insertion(+)

commit be274ee593ff1830abce8fd4212b0ebd2ab23320
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:57:24 2013 -0700

    cluster: cleanup connected streams on destruction.

 mongoc/mongoc-cluster.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 6e8ae531b70f8aa92e511ec98c8d5280c3051a9f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:57:14 2013 -0700

    event: cleanup allocations after recv failure.

 mongoc/mongoc-event.c | 23 ++++++++++++++---------
 1 file changed, 14 insertions(+), 9 deletions(-)

commit f0284ccda6702105fe7213c7f51758561c502ed7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:56:55 2013 -0700

    stream: cleanup after received event.

 mongoc/mongoc-stream.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 2afa677086c5035e23fa926bd8b1d5eabd664c2b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:49:46 2013 -0700

    cluster: release allocated URI struct.

 mongoc/mongoc-cluster.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit a9c7e53367dfaf71d8964678ef65a2d7abc88b40
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:04:48 2013 -0700

    cursor: start stubbing out cursor structure.

 mongoc/mongoc-cursor.h | 37 +++++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)

commit a40455cc960579663845eee3d1a3952df849170e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 13:04:39 2013 -0700

    database: start stubbing out database structure.

 mongoc/Makefile.include          |  4 ++
 mongoc/mongoc-database-private.h | 44 +++++++++++++++++++
 mongoc/mongoc-database.c         | 95 ++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-database.h         | 52 ++++++++++++++++++++++
 mongoc/mongoc.h                  |  1 +
 5 files changed, 196 insertions(+)

commit 2248f23cad57798ca13ee4cbe990fed770341425
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Jun 10 12:50:05 2013 -0700

    event: implement mongoc_event_destroy().

 mongoc/mongoc-event-private.h | 20 ++++++++++++--------
 mongoc/mongoc-event.c         | 35 +++++++++++++++++++++++++++++++++++
 2 files changed, 47 insertions(+), 8 deletions(-)

commit f748dce3baac44ce100eccfb0c75a1e52b25e1b1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 18:01:09 2013 -0700

    test: allow specifying the target URI.

 tests/test-load.c | 15 +++++++++++----
 1 file changed, 11 insertions(+), 4 deletions(-)

commit 3498da2d73c9c3bdefc623daf7a1b0dc33cbb765
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 17:30:10 2013 -0700

    buffer: set error when read from stream has failed.

 mongoc/mongoc-buffer.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit b942c1d54b3853d488fbeda7d44d55521216090b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 17:29:58 2013 -0700

    error: cleanup error enumerations.

 mongoc/mongoc-client.c | 20 ++++++++++----------
 mongoc/mongoc-error.h  | 16 ++++++++--------
 2 files changed, 18 insertions(+), 18 deletions(-)

commit 8af4d10ed2edd83cadc49c6fb2a9d365c3758d73
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 17:24:19 2013 -0700

    event: plumb through maximum MongoDB message sizes.

 mongoc/mongoc-cluster.c       |  4 ++--
 mongoc/mongoc-error.h         |  7 +++++--
 mongoc/mongoc-event-private.h |  1 +
 mongoc/mongoc-event.c         | 13 ++++++-------
 mongoc/mongoc-stream.c        |  9 +++++----
 tests/test-mongoc-event.c     |  8 ++++----
 6 files changed, 23 insertions(+), 19 deletions(-)

commit fbf826deb705c8e0ac20f11c5725202a9a1a70c4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 17:05:37 2013 -0700

    cluster: filter nodes outside acceptable latency.

 mongoc/mongoc-cluster-private.h |  2 +-
 mongoc/mongoc-cluster.c         | 17 ++++++++++++++++-
 2 files changed, 17 insertions(+), 2 deletions(-)

commit 106ffde8e9c6e7e9de3ededdc0c0900d29f20127
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 16:49:32 2013 -0700

    cluster: choose node from leftovers by random.

 mongoc/mongoc-cluster.c | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 23914986bf886a45bf094143a83178736f4f2133
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 15:36:17 2013 -0700

    client: cleanup setsockopt for TCP_NODELAY.

 mongoc/mongoc-client.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 21a07fe61ea6f38fef5f58f0beb7ea901f9fb25e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 15:25:33 2013 -0700

    cluster: add docs for mongoc_cluster_try_recv().

 mongoc/mongoc-cluster.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit da7ff7132985b7297ce506c8ac7924b6ae0c33df
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 15:13:53 2013 -0700

    cluster: implement mongoc_cluster_try_send().
    
    This will return 0 on failure, or the index of the node communicated with
    starting from 1. This value can be supplied to a supplimental
    mongoc_cluster_send() or mongoc_cluster_recv() to communicate via the
    same node.

 mongoc/mongoc-cluster.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit bc3f4888dde7647eafbaab48f12fd96755bbf3c1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 15:12:27 2013 -0700

    cluster: apply node hint before filtering by latency.
    
    Otherwise we could get in a state where we select the wrong node even
    though we know which node we want to communicate with.

 mongoc/mongoc-cluster.c | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

commit bd5909ad0736c485bcfc3732f4edee0b704ac96d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu Jun 6 14:11:40 2013 -0700

    test-load: ensure message type is set.

 tests/test-load.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 9654d86d998b20b7463494bdb7abacb0c5215a94
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 5 15:50:53 2013 -0700

    event: update cursor id comment.

 mongoc/mongoc-event.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 23b9cead2734769f67f22dabf86f6617563006eb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 5 15:42:14 2013 -0700

    event: fixup some event parsing.

 mongoc/mongoc-cluster.c |  4 +---
 mongoc/mongoc-event.c   | 20 +++++++++++---------
 2 files changed, 12 insertions(+), 12 deletions(-)

commit 8d9bba95ca9e2e45cca3befe5da3973c47e2da11
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed Jun 5 11:22:12 2013 -0700

    event: used typed reader.

 mongoc/mongoc-event.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit ca7c581cfecfe236a905714d239435fa5d56c407
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 4 18:25:17 2013 -0700

    event: wip on reading events.

 mongoc/mongoc-error.h |  2 ++
 mongoc/mongoc-event.c | 65 ++++++++++++++++++++-------------------------------
 2 files changed, 27 insertions(+), 40 deletions(-)

commit 7162d0f8d9795aebe667cad828b937de99915615
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 4 18:03:12 2013 -0700

    cluster: clear stream on failure to write.

 mongoc/mongoc-cluster.c | 11 +++--------
 tests/test-load.c       |  1 +
 2 files changed, 4 insertions(+), 8 deletions(-)

commit f4323dec5cc95a25ab0b1f74b517c1a07aec8d07
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Jun 4 16:56:57 2013 -0700

    cluster: progress on send/recv infrastructure for direct mode.

 mongoc/mongoc-client-private.h  |   2 +-
 mongoc/mongoc-client.c          |  15 +++++
 mongoc/mongoc-cluster-private.h |   4 ++
 mongoc/mongoc-cluster.c         | 145 +++++++++++++++++++++++++++++++++++++---
 tests/test-load.c               |   8 ++-
 5 files changed, 163 insertions(+), 11 deletions(-)

commit 023edb42d441cc84607630356d112fee2ab79db9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 29 14:02:49 2013 -0700

    cluster: set error for now until forced reconnection is done.

 mongoc/mongoc-cluster.c | 5 +++++
 1 file changed, 5 insertions(+)

commit efbf9fbc7134a06448fd696166c52d4be6fb684e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 29 14:02:11 2013 -0700

    cluster: only use first node in direct mode.

 mongoc/mongoc-cluster.c | 4 ++++
 1 file changed, 4 insertions(+)

commit debbd455e94d7a090d6f31cb6f296484c2c9b186
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 29 14:01:48 2013 -0700

    list: add some documentation.

 mongoc/mongoc-list.c | 41 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 41 insertions(+)

commit 4f79a7ee22a5afaaef24dfb67627e379402e65ac
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 28 18:49:48 2013 -0700

    cluster: Add some TODOs

 mongoc/mongoc-cluster.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit a3f1371dd973a6553863192132957de969e56037
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 28 17:45:31 2013 -0700

    cluster: progress on mongoc_cluster_select().

 mongoc/mongoc-cluster-private.h |   3 +-
 mongoc/mongoc-cluster.c         | 103 +++++++++++++++++++++++++++++++++++++++-
 mongoc/mongoc-event-private.h   |   1 +
 3 files changed, 105 insertions(+), 2 deletions(-)

commit a59a3e5865e4fef81c08dcb383331a57a04479fc
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 28 13:32:50 2013 -0700

    client: more client<->cluster interaction.

 mongoc/mongoc-client-private.h  |   6 +-
 mongoc/mongoc-client.c          | 138 ++++-----------------
 mongoc/mongoc-cluster-private.h |  34 +++++-
 mongoc/mongoc-cluster.c         | 262 ++++++++++------------------------------
 tests/test-load.c               |   2 +-
 5 files changed, 123 insertions(+), 319 deletions(-)

commit 6d545d0733af1e316b84383a6d5f78d5ee43bf89
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 18:22:47 2013 -0700

    tests: suppress logs on client test unless -v is specified.

 tests/test-mongoc-client-pool.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit bfbd819e2f90f6bdd6fd76765fc64847eff37036
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 18:18:17 2013 -0700

    client: WIP on initial connection setup.

 mongoc/mongoc-client-private.h |  4 ++++
 mongoc/mongoc-client.c         | 54 ++++++++++++++++++++++++++++++++----------
 mongoc/mongoc-cluster.c        |  3 +++
 mongoc/mongoc-event.c          |  5 ++++
 mongoc/mongoc-stream.c         | 14 ++++++++---
 tests/test-load.c              |  1 +
 6 files changed, 66 insertions(+), 15 deletions(-)

commit ac666ab07fb71ccb3bebee39658164595130b8fe
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 17:06:41 2013 -0700

    client: SOCK_STREAM, not SOCK_DGRAM.

 mongoc/mongoc-client.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d689d547e3e4cb138661501a91228236ad8e1c60
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 13:42:35 2013 -0700

    client: WIP on connecting.

 mongoc/mongoc-client.c | 65 +++++++++-----------------------------------------
 1 file changed, 11 insertions(+), 54 deletions(-)

commit e5f6de5b294abc653abcead5c0a05a5a42a06d5c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 13:09:16 2013 -0700

    cluster: use memcpy() instead of assignment.

 mongoc/mongoc-cluster.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6827b294bd997538056e61296bd5defc3e7ba0be
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 13:06:03 2013 -0700

    event: add nslen test for queries.

 tests/test-mongoc-event.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d7e1eff5cadcf94fb12117bb827ba383f0fe8837
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 12:44:38 2013 -0700

    event: add support for OP_QUERY in mongoc_event_read().

 mongoc/mongoc-event-private.h |  1 +
 mongoc/mongoc-event.c         | 14 +++++++-------
 tests/test-mongoc-event.c     | 44 +++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 52 insertions(+), 7 deletions(-)

commit f69f35de8bdac65e446c355adc76b0450181efdb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 23 12:44:17 2013 -0700

    buffer: add typed read helper for buffer handling endianness and cstrings.

 mongoc/mongoc-buffer-private.h | 12 +++++++
 mongoc/mongoc-buffer.c         | 75 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 87 insertions(+)

commit d361ebf659733e8302a34b23106630ad4c23f50f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 20:30:58 2013 -0700

    event: add typed buffer reader idea.

 mongoc/mongoc-event.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit 227e8eea9d4c2574644f22cd8393d7c8fdbc2108
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 17:08:28 2013 -0700

    event: move note.

 mongoc/mongoc-event.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit ff5f1a0edb1c4cbe6aceb4b1bc19ccf46ae0a878
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 17:00:22 2013 -0700

    event: implement reader for OP_KILL_CURSORS.

 mongoc/mongoc-event-private.h | 22 +++++++++++++---------
 mongoc/mongoc-event.c         | 17 +++++++++++++++++
 tests/test-mongoc-event.c     | 33 +++++++++++++++++++++++++++++++--
 3 files changed, 61 insertions(+), 11 deletions(-)

commit c1d9ed42849ec2dceccd025c6646a0c8bea030fe
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 16:20:53 2013 -0700

    event: use single iovec now that desc field is packed.

 mongoc/mongoc-event.c | 13 +++----------
 1 file changed, 3 insertions(+), 10 deletions(-)

commit 53b403e8c4c2f4c2f67564a2bee3d419cf2f599c
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 14:21:16 2013 -0700

    event: use packed substructure for mongoc_event_reply_t descriptors.

 mongoc/mongoc-event-private.h | 36 +++++++++++++++++-------------------
 mongoc/mongoc-event.c         |  8 ++++----
 tests/test-mongoc-event.c     | 16 ++++++++--------
 3 files changed, 29 insertions(+), 31 deletions(-)

commit b2f912979eee25fab10b39d7507032afd752d7d7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 14:15:42 2013 -0700

    event: test integer fields of mongoc_event_reply_t.

 tests/test-mongoc-event.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit f67a1ebdd930ed9508b33d4c72e7ab9293f9cb12
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 14:15:00 2013 -0700

    event: dont pack reply portion as it is not guaranteed to be packed.
    
    A substructure can be packed, however. Might be worth it in a follow up
    commit.

 mongoc/mongoc-event-private.h |  2 --
 mongoc/mongoc-event.c         | 13 ++++++++++---
 2 files changed, 10 insertions(+), 5 deletions(-)

commit 51920b24a72b244d4ed7dd006575e18a5e19ed38
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 13:51:27 2013 -0700

    event: test decoding of reply and msg events.

 mongoc/mongoc-buffer.c    |  9 +++---
 mongoc/mongoc-event.c     |  2 ++
 mongoc/mongoc.h           |  1 +
 tests/test-mongoc-event.c | 82 +++++++++++++++++++++++++++++++++++++++++------
 4 files changed, 81 insertions(+), 13 deletions(-)

commit 500827aec4905379f8060477e61e47214914529a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 13:25:27 2013 -0700

    event: use bson_reader_t to read incoming OP_REPLY document stream.

 mongoc/mongoc-event-private.h |  6 ++++++
 mongoc/mongoc-event.c         | 24 ++++++++++++++++++++----
 2 files changed, 26 insertions(+), 4 deletions(-)

commit 4a9707fed5b50348399bfece5d7388e902bf90f9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 22 13:09:35 2013 -0700

    event: do buffering from stream inside the event structure.
    
    Most drivers are significantly worse than this, but I would like to avoid
    this double buffering. That is difficult without incurring multiple
    syscalls to perform read() on the underlying buffer. Probably worth
    testing buffered vs unbuffered mongoc_stream_t instances. The syscall
    overhead for reading the 16 byte message header might be less than the
    memcpy() of average size buffers.

 mongoc/mongoc-event-private.h |  3 ++
 mongoc/mongoc-event.c         | 82 +++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 85 insertions(+)

commit 7b3d6ac8559a6eb2e7d7bceb757ce6efd0ee14c4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 21 18:20:53 2013 -0700

    stream: destroy parent stream and free structure in buffered stream destruction

 mongoc/mongoc-stream.c | 16 +++-------------
 1 file changed, 3 insertions(+), 13 deletions(-)

commit cce1252d4b436a6a8fa7b9f6f8305e60037c3517
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 20:52:57 2013 -0700

    client: used buffered streams with default initiator.

 mongoc/mongoc-client.c | 8 ++++++--
 mongoc/mongoc-stream.h | 1 +
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 0b9cc4998b86a6dd1cb7eccd1175038248549bc7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 20:46:41 2013 -0700

    buffer: add buffered stream with mongoc_stream_buffered_new().

 mongoc/mongoc-buffer.c |   1 -
 mongoc/mongoc-stream.c | 106 ++++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 101 insertions(+), 6 deletions(-)

commit 876b8d58d96bed9ca2140af78c9b0196b4f69b41
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 20:11:39 2013 -0700

    buffer: add some more to the tests.

 tests/test-mongoc-buffer.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 01b4fc22c0f6348b7d925ec259a90643340ffe5d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 20:11:31 2013 -0700

    stream: synthesize EBADF if fd is -1.

 mongoc/mongoc-stream.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 71c0d3964f9553823247acdaebec7ea7005dea32
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 20:00:13 2013 -0700

    buffer: add test to fill buffer and read.

 .gitignore                     |  1 +
 mongoc/mongoc-buffer-private.h |  6 +++---
 mongoc/mongoc-buffer.c         | 25 +++++++++++++++++++++++++
 tests/Makefile.include         |  7 +++++++
 tests/test-mongoc-buffer.c     | 41 +++++++++++++++++++++++++++++++++++++++++
 5 files changed, 77 insertions(+), 3 deletions(-)

commit af3f854460f3cf4b41373ce86d6a7d308f2dc2b7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 18:58:06 2013 -0700

    tests: make test target should depend on proper binaries.

 tests/Makefile.include | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5ebdc8a03e6271729036375054872dde20418703
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 18:08:32 2013 -0700

    buffer: start on read buffering.
    
    this allows us to buffer to/from the stream implementations. this should
    reduce the number of read syscalls we perform since they are amortized by
    filling the entire buffer.
    
    the buffer is grown in powers of two.

 mongoc/Makefile.include        |   2 +
 mongoc/mongoc-buffer-private.h |  70 ++++++++++++++++++++
 mongoc/mongoc-buffer.c         | 143 +++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream.c         |   9 ++-
 4 files changed, 222 insertions(+), 2 deletions(-)

commit ed914e9e50649d612a8367e7ecce50b1713d52c5
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 14:29:39 2013 -0700

    cluster: reuse the established connection, check for primary status.

 mongoc/mongoc-cluster.c | 60 +++++++++++++++++++++++++++++++++++++------------
 1 file changed, 46 insertions(+), 14 deletions(-)

commit 476adbe308b8eb5c7a000681bf9538e816f55aae
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 12:35:12 2013 -0700

    cluster: create stream if necessary on target cluster node.

 mongoc/mongoc-cluster.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit eac20753f73a7ede071e44def6411e61debd19ec
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 12:26:34 2013 -0700

    cluster: use hostlist parser to build mongoc_cluster_node_t

 mongoc/mongoc-cluster.c | 32 +++++++++++++++++++++++++++-----
 1 file changed, 27 insertions(+), 5 deletions(-)

commit 47877fcacf8bd83c98e13e8badad86215eb228d3
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 12:23:50 2013 -0700

    hostlist: add preconditions and clear host_list memory.

 mongoc/mongoc-uri.c | 5 +++++
 1 file changed, 5 insertions(+)

commit c62dc704daae138e5ac234187aff613f1f40caab
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 20 12:21:48 2013 -0700

    hostlist: allow parsing a host:port string into a mongoc_host_list_t.

 mongoc/mongoc-host-list.h |  5 +++++
 mongoc/mongoc-uri.c       | 34 ++++++++++++++++++++++++++++++++++
 tests/test-mongoc-uri.c   | 16 ++++++++++++++++
 3 files changed, 55 insertions(+)

commit 2c1f5529b7effb5b02b7948de9d0c79a9f15e196
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri May 17 17:58:32 2013 -0700

    cluster: ensure a stream for each of the connections in "hosts".

 mongoc/mongoc-cluster.c | 44 +++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 39 insertions(+), 5 deletions(-)

commit 430fc862a209cb9b9667fc4ac4d5d7fe05b11a83
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri May 17 17:10:53 2013 -0700

    cluster: check for isdbgrid and max message and bson sizes.

 mongoc/mongoc-cluster-private.h |  2 ++
 mongoc/mongoc-cluster.c         | 23 +++++++++++++++++++++++
 2 files changed, 25 insertions(+)

commit 507a57708af70110da571a489d30af4cce2d9e06
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri May 17 17:02:05 2013 -0700

    cluster: start on replicaSet ismaster trust choices.

 mongoc/mongoc-cluster.c | 69 +++++++++++++++++++++++++++++++++++++++++++++++--
 mongoc/mongoc-stream.c  |  4 +++
 2 files changed, 71 insertions(+), 2 deletions(-)

commit 226a653df2c985e66dfceb70dd8f49fe9f38dbb1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri May 17 16:41:12 2013 -0700

    stream: add mongoc_stream_ismaster() convenience function.

 mongoc/mongoc-event.c  | 13 +++++++++++
 mongoc/mongoc-stream.c | 58 ++++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream.h |  2 ++
 3 files changed, 73 insertions(+)

commit 91f064049b571fa69766768007c135474d5d3c7b
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri May 17 16:21:09 2013 -0700

    client: let the client create streams on behalf of the cluster.
    
    This keeps the stream creation in one place, which i think is desired
    despite the fact that it makes cluster/client tightly coupled. That
    was the idea to begin with anyway, so not so bad.

 mongoc/mongoc-client-private.h  |  8 ++++++++
 mongoc/mongoc-client.c          | 15 ++++++++++++++-
 mongoc/mongoc-cluster-private.h |  9 ++++++---
 mongoc/mongoc-cluster.c         | 34 +++++++++++++++++++++++++++++++++-
 4 files changed, 61 insertions(+), 5 deletions(-)

commit 77a79af4c75dae3860402bbf87995411e3358a9a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Fri May 17 14:12:34 2013 -0700

    cluster: only 12 members can exist so we can hard code the array.

 mongoc/mongoc-client.c          |  2 +-
 mongoc/mongoc-cluster-private.h | 24 ++++++++++++------------
 mongoc/mongoc-cluster.c         | 20 +++-----------------
 3 files changed, 16 insertions(+), 30 deletions(-)

commit 4cd224e7ded1e72677ca05737045df8c31730ab2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 16 15:21:05 2013 -0700

    cluster: init cluster with uri information.
    
    This allows us to detect the cluster mode we should be running in.
    This is as follows:
    
     1) Use replica set mode if a ?replicaSet=Name was provided.
     2) Use sharded cluster if multiple hosts but no ?replicaSet=Name
     3) Use direct mode if a single host was provided but no ?replicaSet=Name

 mongoc/mongoc-client.c          |  3 +--
 mongoc/mongoc-cluster-private.h |  9 ++++++---
 mongoc/mongoc-cluster.c         | 19 ++++++++++++++++++-
 3 files changed, 25 insertions(+), 6 deletions(-)

commit 944690cdcbe9fc2cf4f1cb0a194a1af249824c26
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 16 15:10:19 2013 -0700

    uri: HOST_NAME_MAX is defined elsewhere.

 mongoc/mongoc-uri.c | 5 -----
 1 file changed, 5 deletions(-)

commit 01da23aac7c0cf974d051d52b82e2081fd030d82
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 16 15:06:45 2013 -0700

    client: disable read path for now.

 mongoc/mongoc-client.c | 2 ++
 1 file changed, 2 insertions(+)

commit 4f5dc90f75a4caa83b563517af5678ca1033d3e2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 16 15:06:36 2013 -0700

    uri: make mongoc_host_list_t contain inline host and host_and_port fields.
    
    This makes it a little easier to embed the structure since we no longer
    need to worry about freeing referenced memory.

 mongoc/mongoc-host-list.h | 13 +++++++++++--
 mongoc/mongoc-uri.c       |  9 +++++----
 2 files changed, 16 insertions(+), 6 deletions(-)

commit 223b9bb2d530f94d148bc0f6b9e1e42e9374096f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 15 18:01:19 2013 -0700

    cluster: start on cluster implementation.

 mongoc/Makefile.include         |  2 ++
 mongoc/mongoc-client.c          |  3 +++
 mongoc/mongoc-cluster-private.h | 13 +++++++---
 mongoc/mongoc-cluster.c         | 54 +++++++++++++++++++++++++++++++++++++++++
 4 files changed, 68 insertions(+), 4 deletions(-)

commit 526fc6fa86c9e0fa0575c49a09c5997d2e5520c7
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 15 15:43:35 2013 -0700

    client: only trust authoritative nodes for seed information.

 mongoc/mongoc-client.c | 36 ++++++++++++++++++++++++++++--------
 1 file changed, 28 insertions(+), 8 deletions(-)

commit bf0fe523785f767c2a8ee0021d871208aefa05e8
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 15 15:01:36 2013 -0700

    client: more wip on fetching client status.

 mongoc/mongoc-client.c          | 91 ++++++++++++++++++++++++++++++++++++++---
 mongoc/mongoc-cluster-private.h |  6 +++
 2 files changed, 92 insertions(+), 5 deletions(-)

commit ae75b3ad71ac14a1a69830070d478a1b21ff70fd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 15 14:00:59 2013 -0700

    client: wip on connecting to seed list.

 mongoc/mongoc-client.c          | 58 ++++++++++++++++++++++++++++++++++-------
 mongoc/mongoc-cluster-private.h | 11 +++++++-
 mongoc/mongoc-error.h           |  5 +++-
 3 files changed, 62 insertions(+), 12 deletions(-)

commit ecf9624d91558c877469d304c49859aa15996d70
Author: Christian Hergert <christian@hergert.me>
Date:   Tue May 14 21:40:03 2013 -0700

    event: fix precondition.

 mongoc/mongoc-event.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eaff39775603a456a9feccba062af222ff31e7db
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 14 18:06:22 2013 -0700

    event: write to a stream rather than a file-descriptor.

 mongoc/mongoc-event-private.h | 13 +++++++------
 mongoc/mongoc-event.c         |  8 ++++----
 2 files changed, 11 insertions(+), 10 deletions(-)

commit 88986560e0991c0a408be8a8101c5871b41f6718
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 14 15:55:43 2013 -0700

    load: add test tool against local db.

 .gitignore             |  1 +
 mongoc/mongoc-client.c |  4 ++++
 tests/Makefile.include |  6 ++++++
 tests/test-load.c      | 57 ++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 68 insertions(+)

commit b842c4a94ef74bb91c8320b035690db12ac3fc58
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 14 15:40:30 2013 -0700

    uri: add test for ? specified but no options.

 tests/test-mongoc-uri.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 8f4109cb9a9ed2c7c4cbc7dcf96628fd326d8416
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 14 15:30:23 2013 -0700

    log: add some basic logging infrastructure.

 mongoc/Makefile.include |   2 +
 mongoc/mongoc-log.c     | 100 ++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-log.h     | 103 ++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc.h         |   1 +
 4 files changed, 206 insertions(+)

commit 1c88280b91f591149181f88ee6ee5d1784d14c00
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 14 14:52:44 2013 -0700

    conn: remove mongoc_conn_t abstraction in favor of mongoc_stream_t.

 mongoc/Makefile.include      |   2 -
 mongoc/mongoc-conn-private.h | 110 --------------------
 mongoc/mongoc-conn.c         | 239 -------------------------------------------
 tests/Makefile.include       |   7 --
 tests/test-mongoc-conn.c     |  27 -----
 5 files changed, 385 deletions(-)

commit c398c401af490a8ded45c89e712a606e361c8512
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 14 14:52:32 2013 -0700

    client: add docs for mongoc_client_send().

 mongoc/mongoc-client.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit dd6feb23375af54802465bfcfe5097803cf297fe
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 17:55:52 2013 -0700

    client: implement creation of unix domain sockets.

 mongoc/mongoc-client.c | 42 ++++++++++++++++++++++++++++++++++++++----
 1 file changed, 38 insertions(+), 4 deletions(-)

commit e5f89f740b87d3f0a38fa56454c8b1b52941741d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 17:36:51 2013 -0700

    client: create stream initiator delegate abstraction.

 mongoc/mongoc-client.c | 120 +++++++++++++++++++++++++++++++++++++++++++++++--
 mongoc/mongoc-client.h |  27 +++++++++++
 2 files changed, 143 insertions(+), 4 deletions(-)

commit 1de949bee3b9a25384183cf123c6fdc4b4da0836
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 16:51:41 2013 -0700

    stream: make error check a bit more readable.

 mongoc/mongoc-stream.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aa3245389d7f560b7945c029b5b5d2f67bc9ca8d
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 16:50:42 2013 -0700

    stream: add comment about fsync().

 mongoc/mongoc-stream.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 48f4bba5130d5e510c863511e04c4875b7fef0b1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 16:43:21 2013 -0700

    stream: refactor to only manage file descriptor.
    
    connect() should be called outside of the stream abstraction by the
    connection initiators. this is simply an abstraction on communicating
    with that abstraction.

 mongoc/mongoc-stream.c | 26 +++++++++++---------------
 mongoc/mongoc-stream.h | 23 ++++++++++-------------
 2 files changed, 21 insertions(+), 28 deletions(-)

commit db48ee27d7be7b529f7c2d72b3c9960ffe37dff4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 16:35:52 2013 -0700

    stream: start on stream abstraction.
    
    This will be needed so we can transparently support TLS as well as simplify
    socket support on Windows. Additionally, higher level drivers such as PHP
    will want to use their own stream abstraction and this should provide the
    necessary mechanism to do so.

 mongoc/Makefile.include |   2 +
 mongoc/mongoc-stream.c  | 248 ++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-stream.h  |  64 +++++++++++++
 3 files changed, 314 insertions(+)

commit 0453ec730d0d1072eb23e6f7eba089f7d56549ad
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Thu May 9 12:32:16 2013 -0700

    cluster: add cluster structure for future use.

 mongoc/mongoc-client.c          |  8 +++++---
 mongoc/mongoc-cluster-private.h | 45 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 50 insertions(+), 3 deletions(-)

commit 8039b43ccaf32d3e164319df26540062b5400f7e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 21:51:31 2013 -0700

    client: store connections in list.

 mongoc/mongoc-client.c        | 21 ++++++++++++++-------
 mongoc/mongoc-queue-private.h |  2 ++
 2 files changed, 16 insertions(+), 7 deletions(-)

commit 2260c4468e1d8cbfbc52612850c58df2ae0babbb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 21:41:11 2013 -0700

    list: add a singly-linked-list implementation.

 .gitignore                   |   1 +
 mongoc/Makefile.include      |   2 +
 mongoc/mongoc-list-private.h |  53 +++++++++++++++++++++
 mongoc/mongoc-list.c         | 107 +++++++++++++++++++++++++++++++++++++++++++
 tests/Makefile.include       |   7 +++
 tests/test-mongoc-list.c     |  56 ++++++++++++++++++++++
 6 files changed, 226 insertions(+)

commit 0bc75adbcf059507113548251611ee837cc46682
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 19:21:08 2013 -0700

    client: add TODO.

 mongoc/mongoc-client-pool.c | 4 ++++
 1 file changed, 4 insertions(+)

commit f8e1b6a9252bfdabbf619b2be1fb081c6b53c397
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 18:28:48 2013 -0700

    client: release uri in mongoc_client_destroy().

 mongoc/mongoc-client.c | 1 +
 1 file changed, 1 insertion(+)

commit e9dafef28c021166eaf3ef56c1715c85008ce4fd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 18:26:17 2013 -0700

    tests: add test for mongoc_client_pool_t.

 .gitignore                      |  1 +
 tests/Makefile.include          |  7 +++++++
 tests/test-mongoc-client-pool.c | 30 ++++++++++++++++++++++++++++++
 3 files changed, 38 insertions(+)

commit 6877c36684e0feabde6792502a03494a8f56ec3e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 18:26:06 2013 -0700

    pool: add mongoc_client_pool_t to mongoc.h.

 mongoc/mongoc.h | 1 +
 1 file changed, 1 insertion(+)

commit a4ec2bb93af8efa93c71ffa2a1c6f8841243e4e6
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 18:25:50 2013 -0700

    pool: implement mongoc_client_pool_push().

 mongoc/mongoc-client-pool.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 7eab73542738431ab5b2f4c85ece80cab0324e66
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 18:24:43 2013 -0700

    client: add mongoc_client_get_uri().

 mongoc/mongoc-client.c | 8 ++++++++
 mongoc/mongoc-client.h | 4 ++++
 2 files changed, 12 insertions(+)

commit 4edff0652512d7c7f9035404c46c8ca0bb2bea02
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 17:06:20 2013 -0700

    pool: blocking queue.

 mongoc/mongoc-client-pool.c | 32 +++++++++++++++++++++++++++++---
 1 file changed, 29 insertions(+), 3 deletions(-)

commit 491cce3a5df220c4d21eb850627e116059d464c9
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 16:36:44 2013 -0700

    pool: start on pool data structure.

 mongoc/Makefile.include     |  2 +
 mongoc/mongoc-client-pool.c | 90 +++++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-client-pool.h | 44 ++++++++++++++++++++++
 3 files changed, 136 insertions(+)

commit 83bbbb49d7b6cd7385f25b8c04503f55756307e2
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 15:49:28 2013 -0700

    client: initialize inflight queue in mongoc_client_new().

 mongoc/mongoc-client.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 2aade01b4ca20373ffb8f6118b38a4a422aa0bcd
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 15:49:11 2013 -0700

    queue: implement mongoc_queue_init() and mongoc_queue_get_length().

 mongoc/mongoc-queue-private.h |  8 ++++++++
 mongoc/mongoc-queue.c         | 24 ++++++++++++++++++++++++
 tests/test-mongoc-queue.c     |  2 ++
 3 files changed, 34 insertions(+)

commit 969b6176a17735de617a07d7ec4acdf839b15a2f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 8 00:37:59 2013 -0700

    conn: fill in some connection connectors.

 mongoc/mongoc-conn.c | 58 ++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 47 insertions(+), 11 deletions(-)

commit 9ca185c69f5b6c45f5c08c737ba502439462220a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue May 7 15:50:53 2013 -0700

    conn: track connection options.

 mongoc/mongoc-conn-private.h |  1 +
 mongoc/mongoc-conn.c         | 11 +++++------
 2 files changed, 6 insertions(+), 6 deletions(-)

commit f024975622a83b2784abc5d471b2ce88de220ceb
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 6 18:14:00 2013 -0700

    conn: separate read and write fds to implement send.

 mongoc/mongoc-conn-private.h |  8 +++----
 mongoc/mongoc-conn.c         | 52 ++++++++++++++++++++++++++++++++++++++++++--
 mongoc/mongoc-error.h        |  1 +
 tests/test-mongoc-conn.c     |  1 +
 4 files changed, 56 insertions(+), 6 deletions(-)

commit 320833f01b19b21c1beb74fc62d7a9eaa2bf5b5f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 6 17:53:10 2013 -0700

    queue: add a double-ended queue implementation.

 .gitignore                    |  1 +
 mongoc/Makefile.include       |  2 ++
 mongoc/mongoc-queue-private.h | 66 ++++++++++++++++++++++++++++++++++
 mongoc/mongoc-queue.c         | 82 +++++++++++++++++++++++++++++++++++++++++++
 tests/Makefile.include        | 17 ++++++---
 tests/test-mongoc-queue.c     | 34 ++++++++++++++++++
 6 files changed, 197 insertions(+), 5 deletions(-)

commit 43b78ea057634250270e37e3b81aa531424741b4
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon May 6 14:36:37 2013 -0700

    conn: start on basic connection structure.
    
    This structure will be private to the library and headers will not be
    installed on the target system. It will be used by higher level API such
    as mongoc_client_t to communicate with the target server.

 .gitignore                   |   1 +
 mongoc/Makefile.include      |   3 +
 mongoc/mongoc-conn-private.h | 109 ++++++++++++++++++++++++++++++
 mongoc/mongoc-conn.c         | 156 +++++++++++++++++++++++++++++++++++++++++++
 mongoc/mongoc-error.h        |  47 +++++++++++++
 mongoc/mongoc.h              |   1 +
 tests/Makefile.include       |   7 ++
 tests/test-mongoc-conn.c     |  26 ++++++++
 8 files changed, 350 insertions(+)

commit 95653458c848b60ec45137b166196cadf4ba054e
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Wed May 1 15:40:50 2013 -0700

    bson: track bson_t implementation changes.

 mongoc/mongoc-event-private.h | 2 +-
 mongoc/mongoc-uri.c           | 2 +-
 tests/test-mongoc-uri.c       | 4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit cb60b54efc806b388fe288530642f0108290d28f
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Apr 30 11:34:47 2013 -0700

    make sure mongoc-stdint.h is installed and included.

 mongoc/Makefile.include | 1 +
 mongoc/mongoc.h         | 1 +
 2 files changed, 2 insertions(+)

commit 6770247bc83f54e03fddd1593db26372f1c09e54
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Tue Apr 30 11:28:01 2013 -0700

    tests: add test case for mongoc_event_reply_t.

 tests/binary/reply1.dat   | Bin 0 -> 536 bytes
 tests/test-mongoc-event.c |  41 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 41 insertions(+)

commit 06b4dc86c5a6e67727492ce04e90658f376d7bf1
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 17:08:49 2013 -0700

    tests: add test case for mongoc_event_msg_t.

 tests/binary/msg1.dat     | Bin 0 -> 40 bytes
 tests/test-mongoc-event.c |  27 +++++++++++++++++++++++++++
 2 files changed, 27 insertions(+)

commit 6d54c4f4c3f7da708058d3a1796caab19cf580bc
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 16:50:06 2013 -0700

    tests: add test case for mongoc_event_kill_cursors_t.

 mongoc/mongoc-event-private.h  |   6 +++++-
 tests/binary/kill_cursors1.dat | Bin 0 -> 64 bytes
 tests/test-mongoc-event.c      |  38 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 43 insertions(+), 1 deletion(-)

commit b706c0e3ee9e2e905f10f16d9d8a581f788fcc01
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 15:32:59 2013 -0700

    tests: add test case for mongoc_event_get_more_t.

 tests/binary/get_more1.dat | Bin 0 -> 42 bytes
 tests/test-mongoc-event.c  |  32 ++++++++++++++++++++++++++++++++
 2 files changed, 32 insertions(+)

commit 8f9f9a947b105b7b38adc337e704793423022f2a
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 15:14:22 2013 -0700

    tests: add test case for mongoc_event_delete_t.

 mongoc/mongoc-event-private.h |   2 +-
 tests/binary/delete1.dat      | Bin 0 -> 39 bytes
 tests/test-mongoc-event.c     |  32 ++++++++++++++++++++++++++++++++
 3 files changed, 33 insertions(+), 1 deletion(-)

commit 34a299a3492c77533381e33b4b7902aa3e431d82
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 15:01:57 2013 -0700

    tests: add test case for mongoc_event_update_t.

 tests/binary/update1.dat  | Bin 0 -> 44 bytes
 tests/test-mongoc-event.c |  35 +++++++++++++++++++++++++++++++++++
 2 files changed, 35 insertions(+)

commit cbcc0b33875ca9394faf13340bd689e912990689
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 14:46:58 2013 -0700

    event: add encoder test for mongoc_insert_t.

 tests/binary/insert1.dat  | Bin 0 -> 130 bytes
 tests/test-mongoc-event.c |  40 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 40 insertions(+)

commit 4e168a89f9a38e2ae5412bf11390bfbc78d02dfe
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 14:36:28 2013 -0700

    event: add test for mongoc_event_query_t with no fields set.

 tests/binary/query2.dat   | Bin 0 -> 43 bytes
 tests/test-mongoc-event.c |  34 ++++++++++++++++++++++++++++++++++
 2 files changed, 34 insertions(+)

commit 25b03c8770579529237533ab601feac983f34b69
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 13:10:26 2013 -0700

    m4: don't include libtool.m4.

 m4/.gitignore |    1 +
 m4/libtool.m4 | 7982 ---------------------------------------------------------
 2 files changed, 1 insertion(+), 7982 deletions(-)

commit 9c8ed97f3a3fd3f21043171a1ff0681180995a39
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Mon Apr 29 13:09:42 2013 -0700

    event: add test for encoding of mongoc_event_query_t.

 .gitignore                    |   1 +
 mongoc/mongoc-event-private.h |   2 +-
 tests/Makefile.include        |   7 ++++
 tests/binary/query1.dat       | Bin 0 -> 48 bytes
 tests/test-mongoc-event.c     |  79 ++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 88 insertions(+), 1 deletion(-)

commit 8646925d6b96e78d49b4d6302b1b4f3abe00e287
Author: Christian Hergert <christian@hergert.me>
Date:   Mon Apr 29 00:37:23 2013 -0700

    track libbson master.

 mongoc/mongoc-event-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fc4d935153a856bbc943e9d6683281747411ca09
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Sun Apr 28 16:54:49 2013 -0400

    tests: add unit test for mongoc_uri_t.

 .gitignore              |   1 +
 tests/Makefile.include  |   7 +++
 tests/mongoc-tests.h    |  82 ++++++++++++++++++++++++++++++
 tests/test-mongoc-uri.c | 129 ++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 219 insertions(+)

commit 19d090d6e3a8554f53498cda7783cc86cd67c3be
Author: Christian Hergert <christian.hergert@10gen.com>
Date:   Sun Apr 28 16:51:17 2013 -0400

    add autoconf/automake based build system.

 .gitignore                     |   22 +
 AUTHORS                        |    1 +
 COPYING                        |  202 +
 ChangeLog                      |    5 +
 Makefile                       |   59 -
 Makefile.am                    |   33 +
 NEWS                           |    0
 README                         |    1 +
 README.md                      |    3 +
 autogen.sh                     |    4 +
 configure.ac                   |  133 +
 libmongoc-1.0.pc.in            |   11 +
 m4/.gitignore                  |    4 +
 m4/ax_python.m4                |   98 +
 m4/libtool.m4                  | 7982 ++++++++++++++++++++++++++++++++++++++++
 m4/silent.m4                   |   46 +
 m4/stdint.m4                   |   92 +
 mongoc-client-private.h        |   46 -
 mongoc-client.c                |   84 -
 mongoc-client.h                |   54 -
 mongoc-event-private.h         |  407 --
 mongoc-event.c                 |  184 -
 mongoc-flags.h                 |  130 -
 mongoc-host-list.h             |   45 -
 mongoc-uri.c                   |  495 ---
 mongoc-uri.h                   |   46 -
 mongoc.h                       |   32 -
 mongoc/.gitignore              |    2 +
 mongoc/Makefile.include        |   36 +
 mongoc/mongoc-client-private.h |   46 +
 mongoc/mongoc-client.c         |   84 +
 mongoc/mongoc-client.h         |   54 +
 mongoc/mongoc-event-private.h  |  407 ++
 mongoc/mongoc-event.c          |  184 +
 mongoc/mongoc-flags.h          |  130 +
 mongoc/mongoc-host-list.h      |   45 +
 mongoc/mongoc-uri.c            |  495 +++
 mongoc/mongoc-uri.h            |   46 +
 mongoc/mongoc-version.h.in     |   95 +
 mongoc/mongoc.h                |   32 +
 tests/Makefile.include         |   10 +
 41 files changed, 10303 insertions(+), 1582 deletions(-)

commit a3e5b5eeb6061efb781d2ec466acbfbf76cbf886
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Apr 28 16:23:16 2013 -0400

    break code out into logical components.

 Makefile                |  59 +++++++
 mongoc-client-private.h |  46 +++++
 mongoc-client.c         |  84 +++++++++
 mongoc-client.h         |  54 ++++++
 mongoc-event-private.h  | 407 +++++++++++++++++++++++++++++++++++++++++++
 mongoc-event.c          | 184 ++++++++++++++++++++
 mongoc-flags.h          | 130 ++++++++++++++
 mongoc.c                | 451 ------------------------------------------------
 mongoc.h                | 294 +------------------------------
 9 files changed, 969 insertions(+), 740 deletions(-)

commit 6127c31af6eeba587c5eb074ff2913b1c4235b52
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Apr 28 15:37:47 2013 -0400

    protocol: add protocol flags and events with simple encoder.
    
    This can either compose to a buffer or use iovec directly with writev().
    In the most simple case, writev() is just barely faster than buffering.
    In the pathological case, where much buffer resizing will occur, it is
    a lot faster and easier on the memory allocator.
    
    This should allow for building both a sync and async client eventually.

 mongoc.c | 451 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc.h | 316 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 767 insertions(+)

commit 3438a2bb924b63399089ea5469234c2b04e92c83
Author: Christian Hergert <christian@hergert.me>
Date:   Sun Apr 28 15:35:48 2013 -0400

    uri: add mongodb:// style URI parser.

 mongoc-host-list.h |  45 +++++
 mongoc-uri.c       | 495 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 mongoc-uri.h       |  46 +++++
 3 files changed, 586 insertions(+)
